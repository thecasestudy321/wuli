var __awaiter=this&&this.__awaiter||function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{h(n.next(e))}catch(t){s(t)}}function a(e){try{h(n["throw"](e))}catch(t){s(t)}}function h(e){e.done?i(e.value):o(e.value).then(r,a)}h((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return h([e,t])}}function h(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,o&&(s=r[0]&2?o["return"]:r[0]?o["throw"]||((s=o["return"])&&s.call(o),0):o.next)&&!(s=s.call(o,r[1])).done)return s;if(o=0,s)r=[r[0]&2,s.value];switch(r[0]){case 0:case 1:s=r;break;case 4:i.label++;return{value:r[1],done:false};case 5:i.label++;o=r[1];r=[0];continue;case 7:r=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(r[0]===6||r[0]===2)){i=0;continue}if(r[0]===3&&(!s||r[1]>s[0]&&r[1]<s[3])){i.label=r[1];break}if(r[0]===6&&i.label<s[1]){i.label=s[1];s=r;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(r);break}if(s[2])i.ops.pop();i.trys.pop();continue}r=t.call(e,i)}catch(a){r=[6,a];o=0}finally{n=s=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:true}}};var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var s=arguments[t],r=0,a=s.length;r<a;r++,o++)n[o]=s[r];return n};System.register(["./p-7243f468.system.js","./p-5008d5f5.system.js","./p-3fa219de.system.js","./p-eed37127.system.js","./p-b1a9552b.system.js"],(function(exports){"use strict";var registerInstance,h,getElement,createEvent,DomUtils,SystemUtils,NBUtils;return{setters:[function(e){registerInstance=e.r;h=e.h;getElement=e.g;createEvent=e.c},function(e){DomUtils=e.D},function(e){SystemUtils=e.S},function(){},function(e){NBUtils=e.N}],execute:function(){var FRACTION_LIST=[{value:1/2,content:"1/2"},{value:3/2,content:"3/2"},{value:1/3,content:"1/3"},{value:2/3,content:"2/3"},{value:8/3,content:"8/3"}];var NbChemBridge=exports("nb_chem_bridge",function(){function class_1(e){registerInstance(this,e);this.arrowPosition=true;this.way="";this.coefficient=1;this.electronics=1}class_1.prototype.brigdeChange=function(e,t){var i=e.from,n=e.to;i.bindElement.valenceVisible=true;n.bindElement.valenceVisible=true;var o=t.from,s=t.to;o.bindElement.valenceVisible=false;s.bindElement.valenceVisible=false};class_1.prototype.componentWillLoad=function(){this.componentWillUpdate()};class_1.prototype.componentWillUpdate=function(){var _this=this;var e=DomUtils.domQuerySelector(this.ele,".bridge");if(e){this.color=getComputedStyle(e).color}var _a=this.bridgeConfig,from=_a.from,to=_a.to,mode=_a.mode,coefficient=_a.coefficient,electronics=_a.electronics;if(!from||!to){console.log("参数不健全");return}if(mode===undefined){this.mode=1}else{this.mode=mode}var fv=from.valence;var tv=to.valence;console.log("---------\x3e",fv,tv);if("string"===typeof fv){fv=eval(fv)}if("string"===typeof tv){tv=eval(tv)}this.direction="top";if(this.mode===1&&fv!==tv){if(fv<tv){this.way="失去"}else{this.way="得到";this.direction="bottom"}}else{this.way=""}if(coefficient&&electronics){this.coefficient=coefficient;this.electronics=electronics}else{this.coefficient=Math.min(from.count,to.count);var dv=Math.abs(fv-tv);if(!Number.isInteger(dv)){var length=FRACTION_LIST.length;for(var i=0;i<length;i++){if(Math.abs(dv-FRACTION_LIST[i].value)<Number.EPSILON){dv=FRACTION_LIST[i].content;break}}}this.electronics=dv}if(!Number.isInteger(this.coefficient)){this.coefficient=Math.round(this.coefficient)}from.medObj.getElementBounds(from.indexInMed).then((function(e){var t=e.top,i=e.left,n=e.height,o=e.width;to.medObj.getElementBounds(to.indexInMed).then((function(e){var s=e.top,r=e.left,a=e.height,h=e.width;_this.left=i+o/2;switch(_this.direction){case"top":{_this.top=t;break}case"bottom":{_this.top=t+n}}_this.width=r-i;if(h!==o){_this.width+=(h-o)/2}if(_this.width<0){_this.left+=_this.width;_this.width=-_this.width}if(r<i){_this.arrowPosition=false}}))}))};class_1.prototype.componentDidLoad=function(){var e=this.bridgeConfig,t=e.from,i=e.to;t.bindElement.valenceVisible=true;i.bindElement.valenceVisible=true;this.componentWillUpdate()};class_1.prototype.createTitleDom=function(){if(this.mode){return h("span",null,this.coefficient,"×","string"===typeof this.electronics?h("nb-num-fraction",{value:this.electronics}):this.electronics)}else{return h("span",null,this.coefficient*this.electronics)}};class_1.prototype.componentDidUnload=function(){var e=this.bridgeConfig,t=e.from,i=e.to;t.bindElement.valenceVisible=false;i.bindElement.valenceVisible=false};class_1.prototype.render=function(){return h("div",{class:"bridge "+this.direction+(!this.arrowPosition?" reversal":""),style:{top:this.top+"px",left:this.left+"px",width:this.width+"px",borderColor:this.color}},h("div",{class:"line"},h("div",{class:"title"},this.way,this.createTitleDom(),"e⁻")),h("span",{class:"electronic"}," "))};Object.defineProperty(class_1.prototype,"ele",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(class_1,"watchers",{get:function(){return{bridgeConfig:["brigdeChange"]}},enumerable:true,configurable:true});Object.defineProperty(class_1,"style",{get:function(){return"\@-webkit-keyframes top{0%{left:0;top:100%;opacity:0}25%{left:0;top:-.2em;opacity:1}75%{left:100%;top:-.2em;margin-left:-.1em;opacity:1}to{left:100%;top:100%;margin-left:-.1em;opacity:0}}\@keyframes top{0%{left:0;top:100%;opacity:0}25%{left:0;top:-.2em;opacity:1}75%{left:100%;top:-.2em;margin-left:-.1em;opacity:1}to{left:100%;top:100%;margin-left:-.1em;opacity:0}}\@-webkit-keyframes top_r{to{left:0;top:100%;opacity:0}75%{left:0;top:-.2em;opacity:1}25%{left:100%;top:-.2em;margin-left:-.1em;opacity:1}0%{left:100%;top:100%;margin-left:-.1em;opacity:0}}\@keyframes top_r{to{left:0;top:100%;opacity:0}75%{left:0;top:-.2em;opacity:1}25%{left:100%;top:-.2em;margin-left:-.1em;opacity:1}0%{left:100%;top:100%;margin-left:-.1em;opacity:0}}\@-webkit-keyframes bottom{0%{left:0;top:-.2em;opacity:0}25%{left:0;top:100%;margin-top:-.15em;opacity:1}75%{left:100%;top:100%;margin-top:-.1em;margin-left:-.1em;opacity:1}to{left:100%;top:-.1em;margin-left:-.1em;opacity:0}}\@keyframes bottom{0%{left:0;top:-.2em;opacity:0}25%{left:0;top:100%;margin-top:-.15em;opacity:1}75%{left:100%;top:100%;margin-top:-.1em;margin-left:-.1em;opacity:1}to{left:100%;top:-.1em;margin-left:-.1em;opacity:0}}.bridge{position:absolute;height:.8em;margin-left:-.1em;border-left:.1em solid;border-right:.1em solid}.bridge .line{width:100%;text-align:center;white-space:nowrap;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;font-size:.6em}.bridge .electronic{position:absolute;top:0;left:0;width:0;height:0;margin-left:-.2em;border:.15em solid;border-radius:50%;-webkit-transform:scale(.7);transform:scale(.7)}.bridge.top{margin-top:-1.5em;border-top:.1em solid}.bridge.top:after{position:absolute;content:\"\";right:-.2em;bottom:-.1em;width:0;height:0;border-left:.15em solid transparent;border-right:.15em solid transparent;border-top:.3em solid}.bridge.top .line .title{position:absolute;top:0;margin-top:-2em}.bridge.top .electronic{-webkit-animation:top 5s linear infinite;animation:top 5s linear infinite}.bridge.bottom{margin-top:.8em;border-bottom:.1em solid}.bridge.bottom:after{position:absolute;content:\"\";right:-.2em;top:-.1em;width:0;height:0;border-left:.15em solid transparent;border-right:.15em solid transparent;border-bottom:.3em solid}.bridge.bottom .line .title{position:absolute;bottom:0;margin-bottom:-2em}.bridge.bottom .electronic{-webkit-animation:bottom 5s linear infinite;animation:bottom 5s linear infinite}.bridge.reversal{-webkit-animation-direction:alternate;animation-direction:alternate}.bridge.reversal:after{left:-.2em}.bridge.reversal.top .electronic{-webkit-animation:top_r 5s linear infinite;animation:top_r 5s linear infinite}"},enumerable:true,configurable:true});return class_1}());var NbChemCondition=exports("nb_chem_condition",function(){function e(e){registerInstance(this,e);this.conTopStr="";this.conBtmStr=""}e.prototype.medCreatComplete=function(e){e.stopPropagation()};e.prototype.updateUI=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){e=DomUtils.domQuerySelector(this.ele,".conditionBox");this.color=getComputedStyle(e).color;return[2]}))}))};e.prototype.componentWillLoad=function(){if(this.conditionAry){if(this.conditionAry[0]){this.conTopStr=this.conditionAry[0]}if(this.conditionAry[1]){this.conBtmStr=this.conditionAry[1]}}};e.prototype.componentDidLoad=function(){this.updateUI()};e.prototype.creatConDom=function(e){if(!e||e===""){return h("span",null," ")}var t=e.split("、");return t.map((function(e){if(/^[A-Z]+/.test(e)){return h("nb-chem-med",{medName:e,medCalVal:false})}else{return h("span",null,e)}}))};e.prototype.render=function(){return h("div",{class:"conditionBox"},h("div",{class:"con-top condition"},this.creatConDom(this.conTopStr)),h("div",{class:"arrowType"+this.arrowType}),h("div",{class:"con-btm condition"},this.creatConDom(this.conBtmStr)))};Object.defineProperty(e.prototype,"ele",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".conditionBox{text-align:center;font-size:1em;min-width:1.5em}.condition{font-size:.6em;margin:0 .5em}.arrowType1{height:.1em;border-top:.1em solid;border-bottom:.1em solid}.arrowType2{height:0;width:calc(100% - .1em);margin-right:.1em;border:.05em solid;border-left:none;border-right:none;position:relative}.arrowType2:after{position:absolute;content:\"\";right:-.1em;top:-.15em;width:0;height:0;border-top:.15em solid transparent;border-bottom:.15em solid transparent;border-left:.3em solid}.arrowType3{height:.1em;width:100%;margin:0 .2em;border-width:.1em 0;border-style:solid;position:relative;margin:.1em 0}.arrowType3:after{right:0;top:-.2em;width:0}.arrowType3:after,.arrowType3:before{position:absolute;content:\"\";height:.1em;border:.15em solid;border-top:none;border-bottom:none;transform:skewY(30deg);-webkit-transform:skewY(30deg);-moz-transform:skewY(30deg)}.arrowType3:before{left:0;bottom:-.2em}"},enumerable:true,configurable:true});return e}());var NbChemElement=exports("nb_chem_element",function(){function e(e){var t=this;registerInstance(this,e);this.valenceAble=true;this.valenceVisible=false;this.switchValenceVisible=function(){t.valenceVisible=!t.valenceVisible;var e=DomUtils.domQuerySelector(t.ele,".element");e.removeEventListener("touchend",t.switchValenceVisible);e.removeEventListener("mouseup",t.switchValenceVisible)};this.eleCreatComplete=createEvent(this,"eleCreatComplete",7)}e.prototype.getBounds=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i,n,o,s;return __generator(this,(function(r){e=DomUtils.domQuerySelector(this.ele,".element");t=DomUtils.domQuerySelector(this.ele,".valenceNumBox");i=e.offsetLeft,n=e.offsetTop,o=e.offsetHeight,s=e.offsetWidth;return[2,{left:i+t.offsetLeft,top:n+t.offsetTop,height:o-t.offsetTop,width:Math.max(s,t.offsetWidth)}]}))}))};e.prototype.getValenceVisible=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.valenceVisible]}))}))};e.prototype.setValenceVisible=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(e!==this.valenceVisible){return[2,this.valenceVisible=e]}return[2]}))}))};e.prototype.changeValenceVisible=function(e){var t=this;var i=DomUtils.domQuerySelector(this.ele,".element");i.addEventListener("touchend",this.switchValenceVisible,{passive:false});i.addEventListener("mouseup",this.switchValenceVisible);setTimeout((function(){i.removeEventListener("touchend",t.switchValenceVisible);i.removeEventListener("mouseup",t.switchValenceVisible)}),500)};e.prototype.componentWillLoad=function(){};e.prototype.componentDidLoad=function(){this.eleInfo.bindElement=this;this.eleCreatComplete.emit({info:this.eleInfo,target:this});var e=SystemUtils.getInstance()};e.prototype.getValenceNum=function(){var e=this.eleInfo.valence;switch(typeof e){case"number":{return h("div",{class:"valenceNum"},e>0?"+"+e:e)}case"string":{return h("div",{class:"valenceNum"},h("nb-num-fraction",{value:e,showPositive:true}))}}};e.prototype.render=function(){var e=this;return h("div",{class:"element "+(this.valenceAble?"active":""),onPointerDown:function(t){return e.changeValenceVisible(t)}},h("div",{class:"eleName"},this.eleInfo.content),h("div",{class:"valenceNumBox",style:{display:this.valenceAble&&this.valenceVisible?"flex":"none"}},this.getValenceNum()))};Object.defineProperty(e.prototype,"ele",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".element{display:inline-block;position:relative}.element.active,.element .eleName{-webkit-transition:all .2s;transition:all .2s}.element.active{cursor:pointer}.element.active:hover .eleName{text-shadow:rgba(0,0,0,.8) 0 .1em .1em;-webkit-transform:translateY(-.1em);transform:translateY(-.1em)}.element .valenceNumBox{position:absolute;top:-.75em;height:1em;line-height:1em;width:100%;font-size:60%;-ms-flex-align:center;align-items:center}.element .valenceNumBox,.element .valenceNumBox .valenceNum{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.element .valenceNumBox .valenceNum{color:#f5a623;font-weight:bolder}"},enumerable:true,configurable:true});return e}());var KEY="nb-chem-equ-usertip";var NbChemEquPanel=exports("nb_chem_equ_panel",function(){function e(e){registerInstance(this,e);this.MED_TYPE_REDOX={};this.isTouchDevice=false;this.topAndBtmHeight=40;this.forceWidth=0;this.supportsPassiveOption=false;this.expression="2H2+O2==2H2O";this.aboutList=[];this.minWidth=420;this.minHeight=260;this.width=580;this.height=300;this.showState=0;this.scale=1;this.showStateAble_1=false;this.showStateAble_2=false;this.showMedType=false;this.showTip=!localStorage.getItem(KEY);this.isFull=false;this.isShowAbloutList=false;this.showMedTypeSet=new Set;this.eqConScale=.25;this.eqConLeft=0;this.eqConTop=0;this.eqConTopArea=[0,0];this.eqConLeftArea=[0,0];this.showDefinitionList=false;this.isShowMoreList=false;this.hadResize=false;this.needChangePos=false;this.close=createEvent(this,"close",7);this.converExp=createEvent(this,"converExp",7);this.tapAbloutExp=createEvent(this,"tapAbloutExp",7)}e.prototype.sizeChangeHander=function(e){var t=e.detail,i=t.height,n=t.width;var o=this.scale;this.scale=n/this.width;if(e.detail.fullScreenChange){var s=this.equation.getBoundingClientRect();this.eqConLeft=Math.max(this.minWidth,n)*.5-s.width/this.eqConScale*.5;this.eqConTop=(Math.max(this.minHeight,i)-this.topAndBtmHeight)*.5-s.height/this.eqConScale*.5}else{this.needChangePos=true}this.eqConScale=Math.max(Math.min(1.5,this.eqConScale/o*this.scale),.1);this.hadResize=true};e.prototype.equCreatCompleteHander=function(e){var t=e.detail;this.showStateAble_1=t.showEleTransformAble_0;this.showStateAble_2=t.showEleTransformAble_1;this.showMedType=t.showMedType;this.MED_TYPE_REDOX=t.MED_TYPE_REDOX;if(this.showStateAble_1||this.showStateAble_2||this.showMedType||this.MED_TYPE_REDOX){this.topAndBtmHeight=92}};e.prototype.componentWillLoad=function(){this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;var e=SystemUtils.getInstance();this.supportsPassiveOption=e.supportsPassiveOption};e.prototype.componentDidLoad=function(){this.panel=DomUtils.domQuerySelector(this.ele,"nb-panel");this.header=DomUtils.domQuerySelector(this.ele,"#header");this.equation=DomUtils.domQuerySelector(this.ele,"nb-chem-equation");this.width=Math.max(this.equation.getBoundingClientRect().width+40,this.minWidth);this.innerDom=DomUtils.domQuerySelector(this.ele,"#inner");this.init()};e.prototype.componentDidUpdate=function(){this.setDragArea()};e.prototype.setDragArea=function(){if(!this.hadResize)return;var e=this.equation.getBoundingClientRect();var t=this.innerDom.getBoundingClientRect();var i;if(this.forceWidth){i=this.forceWidth;this.forceWidth=0}else{i=t.width}var n=t.height;var o=100;var s=this.eqConLeftArea[1]-this.eqConLeftArea[0];var r=this.eqConTopArea[1]-this.eqConTopArea[0];var a=this.eqConLeft-this.eqConLeftArea[0];var h=this.eqConTop-this.eqConTopArea[0];this.eqConLeftArea[0]=-(e.width/this.eqConScale+e.width)*.5+o*this.eqConScale;this.eqConLeftArea[1]=this.eqConLeftArea[0]+e.width+i-o*this.eqConScale*2;this.eqConTopArea[0]=-(e.height/this.eqConScale+e.height)*.5+o*this.eqConScale;this.eqConTopArea[1]=this.eqConTopArea[0]+e.height+n-o*this.eqConScale*2;if(this.needChangePos){this.needChangePos=false;if(s&&r){this.eqConLeft=a/s*(this.eqConLeftArea[1]-this.eqConLeftArea[0])+this.eqConLeftArea[0];this.eqConTop=h/r*(this.eqConTopArea[1]-this.eqConTopArea[0])+this.eqConTopArea[0]}}else{if(this.eqConLeft<this.eqConLeftArea[0]){this.eqConLeft=this.eqConLeftArea[0]}if(this.eqConLeft>this.eqConLeftArea[1]){this.eqConLeft=this.eqConLeftArea[1]}if(this.eqConTop<this.eqConTopArea[0]){this.eqConTop=this.eqConTopArea[0]}if(this.eqConTop>this.eqConTopArea[1]){this.eqConTop=this.eqConTopArea[1]}}};e.prototype.init=function(){this.initEqConPos(this.width,this.height);this.setGesture();this.initHeaderEvents()};e.prototype.setGesture=function(){if(this.isTouchDevice){this.addTouchDeviceEvents()}else{this.addPcDeviceEvents()}};e.prototype.addTouchDeviceEvents=function(){var e=this;var t=false;var i=[];var n;var o;var s=false;var r;this.innerDom.addEventListener("touchstart",(function(a){if(a.touches&&a.touches.length===1){a.stopPropagation();a.preventDefault();o={x:a.touches[0].pageX,y:a.touches[0].pageY};s=true}if(a.touches&&a.touches.length>=2){t=true;s=false;i=a.touches;n=e.eqConScale;r={x:(i[0].pageX+i[1].pageX)/2,y:(i[0].pageY+i[1].pageY)/2};a.stopPropagation();a.preventDefault()}}));document.addEventListener("touchmove",(function(a){if(a.touches&&a.touches.length>=2&&t){a.preventDefault();a.stopPropagation();var h=a.touches;var l=e.getDistance(h[0],h[1])/e.getDistance(i[0],i[1]);e.setEqConScaleAndPos(l*n,r)}if(a.touches&&a.touches.length===1&&s){a.preventDefault();a.stopPropagation();var c=a.touches[0];var u=c.pageX-o.x;var f=c.pageY-o.y;e.setEqConPos(e.eqConLeft+u,e.eqConTop+f);o.x=c.pageX;o.y=c.pageY}}),this.supportsPassiveOption?{passive:false}:false);document.addEventListener("touchend",(function(e){if(t){t=false}if(e.touches.length===0&&s){s=false}}),this.supportsPassiveOption?{passive:false}:false)};e.prototype.addPcDeviceEvents=function(){var e=this;var t;var i=false;this.innerDom.addEventListener("mousedown",(function(e){i=true;e=e||window.event;e.preventDefault();e.stopPropagation();t={x:e.pageX,y:e.pageY}}));document.addEventListener("mousemove",(function(n){if(i){n=n||window.event;n.preventDefault();n.stopPropagation();var o=n.pageX-t.x;var s=n.pageY-t.y;e.setEqConPos(e.eqConLeft+o,e.eqConTop+s);t.x=n.pageX;t.y=n.pageY}}),false);document.addEventListener("mouseup",(function(e){if(i){e=e||window.event;e.preventDefault();e.stopPropagation();i=false}}),false)};e.prototype.getDistance=function(e,t){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)};e.prototype.initEqConPos=function(e,t){var i=this.equation.getBoundingClientRect();this.eqConLeft=Math.max(this.minWidth,e)*.5-i.width/this.eqConScale*.5;this.eqConTop=(Math.max(this.minHeight,t)-this.topAndBtmHeight)*.5-i.height/this.eqConScale*.5;this.hadResize=true;this.forceWidth=Math.max(this.minWidth,e)};e.prototype.setEqConPos=function(e,t){this.eqConLeft=Math.max(this.eqConLeftArea[0],Math.min(this.eqConLeftArea[1],e));this.eqConTop=Math.max(this.eqConTopArea[0],Math.min(this.eqConTopArea[1],t))};e.prototype.changeEqConScale=function(e){e=e||window.event;e.stopPropagation();e.preventDefault();var t=e.wheelDelta||e.detail*40;if(t===0)return;var i=Math.max(.025,Math.min(.2,Math.abs(t/4800)));var n=t>0?1:-1;this.setEqConScaleAndPos(this.eqConScale+i*n,{x:e.pageX,y:e.pageY})};e.prototype.setEqConScaleAndPos=function(e,t){var i=t.x;var n=t.y;var o=this.equation.getBoundingClientRect();var s=this.eqConScale;var r=(o.left-i)/o.width;var a=(o.top-n)/o.height;e=Math.max(Math.min(1.5,e),.1);this.eqConScale=e;this.hadResize=true;var h=this.eqConScale/s;var l=o.width*h;var c=o.height*h;var u=o.left-(l-o.width)/2;var f=o.top-(c-o.height)/2;var d=r*l-u+i;var p=a*c-f+n;this.setEqConPos(this.eqConLeft+d,this.eqConTop+p)};e.prototype.initHeaderEvents=function(){if(this.isTouchDevice){this.header.addEventListener("touchstart",this.startDrag.bind(this),false)}else{this.header.addEventListener("mousedown",this.startDrag.bind(this),false)}};e.prototype.changeState=function(e){var t=this;if(this.timer){return}var i=this.showState;this.showState=0;if(i!==e){this.timer=setTimeout((function(){if(t.timer){t.timer=null}t.showState=e}),20)}};e.prototype.showMedTypeHander=function(e){if(e==="ALL"){var t=true;if(this.showMedTypeSet.size===4){t=false}for(var i in this.MED_TYPE_REDOX){if(t){this.showMedTypeSet.add(i);this.equation.changeMedTypeShowState(i,true)}else{this.showMedTypeSet.delete(i);this.equation.changeMedTypeShowState(i,false)}}}else{if(this.showMedTypeSet.has(e)){this.showMedTypeSet.delete(e);this.equation.changeMedTypeShowState(e,false)}else{this.showMedTypeSet.add(e);this.equation.changeMedTypeShowState(e,true)}}this.showMedTypeSet=new Set(__spreadArrays(this.showMedTypeSet))};e.prototype.startDrag=function(e){if(this.panel){if(e.touches){var t=e.touches[0];e.clientX=t.clientX;e.clientY=t.clientY}this.panel.startDrag(e)}};e.prototype.closeTip=function(e){this.showTip=false;localStorage.setItem(KEY,"true");e.stopPropagation();e.preventDefault()};e.prototype.gotoFull=function(e){this.isFull=e;this.panel.gotoFull(e);this.isShowAbloutList=false;this.isShowMoreList=false};e.prototype.converExpTap=function(){this.gotoFull(false);this.converExp.emit({expression:this.expression})};e.prototype.closeTap=function(){this.close.emit()};e.prototype.changeShowAbloutList=function(){this.isShowAbloutList=!this.isShowAbloutList};e.prototype.tapAbloutExpHander=function(e){var t=e.index;this.tapAbloutExp.emit({index:t});this.gotoFull(false)};e.prototype.changeDefinitionListState=function(){this.showDefinitionList=!this.showDefinitionList};e.prototype.changeShowMoreList=function(){this.isShowMoreList=!this.isShowMoreList;if(!this.isShowMoreList){this.isShowAbloutList=false}};e.prototype.creatBridgeBtnGroupDom=function(){var e=this;var t=[{title:"单线桥",show:this.showStateAble_1,bindId:1},{title:"双线桥",show:this.showStateAble_2,bindId:2}];return t.map((function(t,i){var n=t.show,o=t.title,s=t.bindId;return h("button",{style:{display:n?undefined:"none"},class:"changeBtn btn "+(e.showState===s?"active":"")+(i>0?" hasLine":""),onClick:function(){e.changeState(s)}},o)}))};e.prototype.creatDefinitionListDom=function(){var e=this;var t=[{title:"全部",bindId:"ALL"},{title:"氧化剂",bindId:this.MED_TYPE_REDOX.OXIDANT},{title:"还原剂",bindId:this.MED_TYPE_REDOX.REDUCING},{title:"氧化产物",bindId:this.MED_TYPE_REDOX.OXIDANT_PRIDUCT},{title:"还原产物",bindId:this.MED_TYPE_REDOX.REDUCING_PRIDUCT}];return t.map((function(t){var i=t.title,n=t.bindId;if(n==="ALL"){var o=e.showMedTypeSet.size===4;return h("div",{class:"infoList "+(o?"active":""),onClick:function(){e.showMedTypeHander(n)}},h("span",{class:"box"},o?"✓":""),i)}else{var o=e.showMedTypeSet.has(n);return h("div",{class:"infoList "+(o?"active":""),onClick:function(){e.showMedTypeHander(n)}},h("span",{class:"box"},o?"✓":""),i)}}))};e.prototype.creatAboutListDom=function(){var e=this;if(!this.aboutList||!this.aboutList[0]){return h("div",{class:"listItem"},h("div",{class:"itemTitle"},"无"))}return this.aboutList.map((function(t,i){var n=t.title,o=t.subtitle,s=t.type;return h("div",{class:"listItem",onClick:function(){e.tapAbloutExpHander({index:i})}},h("div",{class:"itemTitle"},n),h("div",{class:"sunTitle"},h("span",{class:"type",style:{display:s?"inline-block":"none"}},s),h("span",{class:"info"},o)))}))};e.prototype.render=function(){var e=this;return h("nb-panel",{width:this.width,height:this.height,minWidth:this.minWidth,minHeight:this.minHeight,closeVisible:false},h("div",{slot:"panel-body",id:"panel-body",class:this.isFull?"full":""},h("div",{id:"header"},h("div",{id:"title"},"方程式"),h("div",{id:"btnGroup",style:{display:!this.isFull?"flex":"none"}},h("div",{id:"more",onClick:function(){e.changeShowMoreList()}}),h("div",{id:"full",onClick:function(){e.gotoFull(true)}}),h("div",{id:"close",onClick:function(){e.closeTap()}}))),h("div",{id:"inner",onWheel:function(t){e.changeEqConScale(t)}},h("div",{id:"equation-con",style:{transform:"scale("+this.eqConScale+")",left:this.eqConLeft+"px",top:this.eqConTop+"px"}},h("nb-chem-equation",{style:{transform:"scale("+.25*this.scale+")"},eleTransformState:this.showState,expression:this.expression})),h("div",{class:"userTip",style:{display:this.showTip?"block":"none"}},"提示：点击元素可查看价态(有机物除外)",h("span",{class:"closeIcon",onPointerDown:function(t){e.closeTip(t)}},"✕"))),h("div",{id:"footer",style:{height:this.isFull||this.showStateAble_1||this.showStateAble_2?"":"0px",minHeight:this.isFull||this.showStateAble_1||this.showStateAble_2?"":"0px"}},h("div",{class:"fullBtnGroup",style:{display:this.isFull?"flex":"none"}},h("div",{class:"fullBtn",onClick:function(){e.gotoFull(false)}},h("div",{class:"back"})),h("div",{class:"fullBtn"},h("button",{class:"about btn "+(this.isShowAbloutList?"active":""),onClick:function(){e.changeShowAbloutList()}},h("span",{class:"aboutIcon"}),"相关实验"),h("button",{class:"about btn",onClick:function(){e.converExpTap()}},h("span",{class:"generateIcon"}),"生成实验"))),h("div",{style:{display:this.showStateAble_1||this.showStateAble_2?"flex":"none"}},h("div",{class:"bridgeBtnGroup"},this.creatBridgeBtnGroupDom()),h("div",{class:"definitionList"+(this.showDefinitionList?" active":"")},h("button",{class:"listBtn",onClick:function(){e.changeDefinitionListState()}},"显示设置 ",h("span",{class:"listIcon"})),h("div",{class:"list",style:{display:this.showDefinitionList?"block":"none"}},this.creatDefinitionListDom())))),h("div",{class:"moreList",style:{display:this.isShowMoreList?"block":"none"}},h("div",{class:this.isShowAbloutList?"active":"",onClick:function(){e.changeShowAbloutList()}},"相关实验"),h("div",{onClick:function(){e.converExpTap()}},"生成实验"),h("span",{class:"triangle"})),h("div",{class:"aboutEqList test",style:{display:this.isShowAbloutList?"block":"none"}},this.creatAboutListDom())))};Object.defineProperty(e.prototype,"ele",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"\@charset \"UTF-8\";#panel-body .about .aboutIcon,.about_def{background-position:0 -511px}#panel-body .about .aboutIcon,#panel-body .about.active .aboutIcon,.about_def,.about_pre{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:24px;height:24px}#panel-body .about.active .aboutIcon,.about_pre{background-position:0 -279px}#panel-body #footer .fullBtnGroup .fullBtn .back,.back_def{background-position:0 -540px}#panel-body #footer .fullBtnGroup .fullBtn .back,#panel-body #footer .fullBtnGroup .fullBtn .back:hover,.back_def,.back_hov{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:24px;height:24px}#panel-body #footer .fullBtnGroup .fullBtn .back:hover,.back_hov{background-position:0 -569px}#panel-body #footer .fullBtnGroup .fullBtn .back:active,.back_pre{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;background-position:0 -76px;width:24px;height:24px}#panel-body #header #close,.close_def{background-position:0 -105px}#panel-body #header #close,#panel-body #header #close:hover,.close_def,.close_hov{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:25px;height:24px}#panel-body #header #close:hover,.close_hov{background-position:0 -134px}#panel-body #header #close:active,.close_pre{background-position:0 -163px}#panel-body #header #close:active,#panel-body .creatExperiment,.close_pre,.conversion_def{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:25px;height:24px}#panel-body .creatExperiment,.conversion_def{background-position:0 -192px}#panel-body .creatExperiment:hover,.conversion_hov{background-position:0 -221px}#panel-body .creatExperiment:active,#panel-body .creatExperiment:hover,.conversion_hov,.conversion_pre{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:25px;height:24px}#panel-body .creatExperiment:active,.conversion_pre{background-position:0 -250px}#panel-body #header #full,.full_def{background-position:0 -598px}#panel-body #header #full,#panel-body #header #full:hover,.full_def,.full_hov{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:30px;height:24px}#panel-body #header #full:hover,.full_hov{background-position:0 -308px}#panel-body #header #full:active,.full_pre{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;background-position:0 -337px;width:30px;height:24px}#panel-body .about .generateIcon,.generate_def{background-position:0 -366px}#panel-body .about.active .generateIcon,#panel-body .about .generateIcon,.generate_def,.generate_pre{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:24px;height:24px}#panel-body .about.active .generateIcon,.generate_pre{background-position:0 -395px}#panel-body #header #more,.more_def{background-position:0 -424px}#panel-body #header #more,#panel-body #header #more:hover,.more_def,.more_hov{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:30px;height:24px}#panel-body #header #more:hover,.more_hov{background-position:0 -453px}#panel-body #header #more:active,.more_pre{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;background-position:0 -482px;width:30px;height:24px}#panel-body #footer .definitionList.active .listBtn .listIcon,.triangle_1{background-position:0 -19px}#panel-body #footer .definitionList.active .listBtn .listIcon,.full #footer .definitionList .listBtn .listIcon,.triangle_1,.triangle_2{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:14px;height:14px}.full #footer .definitionList .listBtn .listIcon,.triangle_2{background-position:0 -38px}.full #footer .definitionList .listBtn.active .listIcon,.triangle_3{background-position:0 -57px}#panel-body #footer .definitionList .listBtn .listIcon,.full #footer .definitionList .listBtn.active .listIcon,.triangle_3,.triangle_4{background-image:url(assets/imgs/nbk/nbk_nb-chem-equ-panel_sprite.png);background-size:30px 622px;background-repeat:no-repeat;width:14px;height:14px}#panel-body #footer .definitionList .listBtn .listIcon,.triangle_4{background-position:0 0}nb-panel{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button{display:inherit}.full{border-radius:0!important}.full #footer .bridgeBtnGroup{height:42px!important}.full #footer .changeBtn{width:105px!important;top:0!important;height:42px!important;z-index:1!important}.full #footer .definitionList{height:42px!important;width:150px!important}.full #footer .definitionList .listBtn{top:0!important}.full #footer .definitionList .listBtn .listIcon{margin-top:4px}.full #footer .definitionList .list{width:134px!important}.full .aboutEqList{bottom:55px!important;right:130px!important;top:auto!important;left:auto!important}.test::-webkit-scrollbar{width:4px}.test::-webkit-scrollbar-track{background-color:transparent}.test::-webkit-scrollbar-thumb{background:hsla(0,0%,100%,.5);border-radius:2px}#panel-body{-webkit-transition:all .2s;transition:all .2s;background:#464c54;height:100%;width:100%;-webkit-box-shadow:0 4px 26px 0 rgba(24,26,30,.51);box-shadow:0 4px 26px 0 rgba(24,26,30,.51);border-radius:8px;overflow:hidden;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#panel-body .btn{cursor:pointer;outline:none;border:none}#panel-body .about{width:80px;height:26px;line-height:26px;text-align:center;background:hsla(0,0%,100%,.1);border-radius:6px;margin:0;font-size:14px;color:#a6a6a6}#panel-body .about .aboutIcon,#panel-body .about .generateIcon{margin:0!important}#panel-body .about.active{background:#2592ff;color:#fff}#panel-body .about.active .aboutIcon,#panel-body .about.active .generateIcon{margin:0!important}#panel-body #header{min-height:40px;width:100%;background:-webkit-gradient(linear,left top,left bottom,from(#3f444c),to(#343940));background:linear-gradient(180deg,#3f444c,#343940);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}#panel-body #header #title{color:#c5cad2;font-size:14px}#panel-body #header #btnGroup{position:absolute;display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end}#panel-body #header #btnGroup :nth-child(n){position:relative;margin:0 6px 0 0}#panel-body #header #btnGroup :last-child{margin-right:15px}#panel-body #inner{position:relative;height:100%;-ms-flex-negative:100;flex-shrink:100;color:hsla(0,0%,100%,.85);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;overflow:hidden}#panel-body #inner nb-chem-equation{font-size:96px;-webkit-transition:all .1s;transition:all .1s;-webkit-transform:scale(.25);transform:scale(.25)}#panel-body #inner #equation-con{position:absolute}#panel-body #inner .userTip{position:absolute;top:12px;width:250px;height:24px;line-height:24px;text-align:center;background:rgba(37,146,255,.2);border-radius:5px;font-size:12px;color:hsla(0,0%,100%,.85)}#panel-body #inner .userTip .closeIcon{position:absolute;right:4px;cursor:pointer}#panel-body #footer{min-height:52px;height:52px;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}#panel-body #footer .fullBtnGroup{position:absolute;width:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}#panel-body #footer .fullBtnGroup .fullBtn{margin:0 20px;height:42px;background:#141516;-webkit-box-shadow:0 5px 12px 0 rgba(0,0,0,.5);box-shadow:0 5px 12px 0 rgba(0,0,0,.5);border-radius:10px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#panel-body #footer .fullBtnGroup .fullBtn :nth-child(n){position:relative;margin:10px}#panel-body #footer .fullBtnGroup .fullBtn .about{width:100px;height:26px}#panel-body #footer .bridgeBtnGroup{height:28px;border-radius:6px;overflow:hidden}#panel-body #footer .bridgeBtnGroup .changeBtn{width:70px;height:28px;background:rgba(0,0,0,.2);font-size:14px;color:#a6a6a6;padding:0;position:relative;float:left}#panel-body #footer .bridgeBtnGroup .changeBtn.active{color:#fff;background:#2592ff}#panel-body #footer .bridgeBtnGroup .changeBtn.hasLine{border-left:1px solid #464c54}#panel-body #footer .definitionList{width:100px;height:28px;background:rgba(0,0,0,.2);border-radius:6px;margin-left:12px;text-align:center}#panel-body #footer .definitionList.active{background:#2e92ff!important}#panel-body #footer .definitionList.active .listBtn{color:#fff}#panel-body #footer .definitionList .listBtn{padding:0;margin:0;background:transparent;border:none;outline:none;width:100%;height:100%;font-size:14px;position:relative;color:#a6a6a6;cursor:pointer}#panel-body #footer .definitionList .listBtn .listIcon{margin-top:2px;position:fixed}#panel-body #footer .definitionList .list{position:absolute;bottom:55px;color:#999;font-size:13px;width:84px;background:rgba(35,38,40,.98);padding:8px;border-radius:6px}#panel-body #footer .definitionList .list .infoList{text-align:left;line-height:24px;cursor:pointer}#panel-body #footer .definitionList .list .infoList .box{width:10px;height:10px;border-radius:2px;display:inline-block;border:1px solid #999;margin-right:7px;position:relative;top:1px;line-height:12px}#panel-body #footer .definitionList .list .infoList.active{color:#2e92ff}#panel-body #footer .definitionList .list .infoList.active .box{border-color:#2e92ff}#panel-body .aboutEqList{position:absolute;top:45px;right:-205px;width:260px;max-height:225px;padding:10px;background:#232628;border:1px solid #25282e;border-radius:6px;overflow-y:auto}#panel-body .aboutEqList .listItem{margin:4px 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}#panel-body .aboutEqList .listItem .itemTitle{color:#fff;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#panel-body .aboutEqList .listItem .sunTitle{color:#a6a6a6;font-size:12px;width:100%;text-overflow:ellipsis}#panel-body .aboutEqList .listItem .type{background-color:#bb5b5b;border-radius:2px;display:inline-block;width:1em;height:1em;line-height:1em;text-align:center;margin-right:.5em}#panel-body .aboutEqList .listItem .info{height:1em;text-overflow:ellipsis}#panel-body .aboutEqList .listItem:hover .itemTitle,#panel-body .aboutEqList .listItem:hover .sunTitle{color:#2592ff}#panel-body .aboutEqList .listItem:hover .type{background-color:#2592ff;color:#fff}#panel-body .moreList{position:absolute;background:rgba(35,38,40,.98);width:86px;padding:12px 0;border-radius:6px;font-size:14px;line-height:20px;right:80px;top:45px}#panel-body .moreList div{color:#a6a6a6;line-height:24px;height:24px;padding:0 12px}#panel-body .moreList div.active,#panel-body .moreList div:hover{color:#fff;background:#2e92ff}#panel-body .moreList .triangle{position:absolute;top:-12px;right:12px;width:0;height:0;border:6px solid;border-color:transparent transparent rgba(35,38,40,.98)}"},enumerable:true,configurable:true});return e}());var IngredientNode=function(){function e(e,t){this.count=1;this.valence=0;this.content=e;this.type=t}return e}();var ING_TYPE={ELEMENT:"ELEMENT",SUBSCRIPT:"SUBSCRIPT",SYMBOL:"SYMBOL",COEFFICIENT:"COEFFICIENT"};var MED_TYPE_REDOX={OXIDANT:"OXIDANT",REDUCING:"REDUCING",OXIDANT_PRIDUCT:"OXIDANT_PRIDUCT",REDUCING_PRIDUCT:"REDUCING_PRIDUCT"};var ELEMENT_VALENCE={H:{nums:[1,-1]},Li:{nums:[1]},Be:{nums:[2]},B:{nums:[3]},C:{nums:[-1,2,4]},N:{nums:[-3,1,2,3,4,5]},O:{nums:[-2]},F:{nums:[-1]},Na:{nums:[1]},Mg:{nums:[2]},Al:{nums:[3]},Si:{nums:[4]},P:{nums:[-3,3,5]},S:{nums:[-2,2,4,6]},Cl:{nums:[-1,1,3,5,7]},K:{nums:[1]},Ca:{nums:[2]},Cr:{nums:[2,3,6]},Mn:{nums:[2,4,6,7]},Fe:{nums:[2,3]},Cu:{nums:[1,2]},Zn:{nums:[2]},Br:{nums:[-1,1,3,5,7]},Ag:{nums:[1]},I:{nums:[-1,5,7]},Ba:{nums:[2]},Hg:{nums:[2]},Pb:{nums:[2,4]}};var CONDIRIONS_FORMAT={"=":{"=":1,">":2},"<":{">":3}};var NbChemEquation=exports("nb_chem_equation",function(){function class_5(e){registerInstance(this,e);this.expression="CaCO3+2HCl=点燃&加热、浓硫酸>CaCl2+H2O+CO2_g";this.showEleTransform=true;this.listenerHover=false;this.eleTransformState=2;this.showEleTransformAble_0=false;this.showEleTransformAble_1=false;this.showMedType=false;this.productCompleteCount=0;this.resultCompleteCount=0;this.equationObj={product:[],result:[],condition:[],arrowType:1};this.calcedEleTransform=true;this.elementControl={product:{},result:{}};this.eleTransformList=[];this.equCreatComplete=createEvent(this,"equCreatComplete",7)}class_5.prototype.medCreatComplete=function(e){var t=e.detail,i=t.medName,n=t.chemEles,o=t.target,s=t.calculateValence;if(!s){this.calcedEleTransform=false}if(!this.calcedEleTransform){return}if(this.productCompleteCount<this.equationObj.product.length){for(var r=0,a=this.equationObj.product.length;r<a;r++){var h=this.equationObj.product[r];if(h.medName===i){h.chemEles=n;h.medObj=o;this.productCompleteCount++;break}}}if(this.resultCompleteCount<this.equationObj.result.length){for(var r=0,a=this.equationObj.result.length;r<a;r++){var h=this.equationObj.result[r];if(h.medName===i){h.chemEles=n;h.medObj=o;this.resultCompleteCount++;break}}}if(this.productCompleteCount>=this.equationObj.product.length&&this.resultCompleteCount>=this.equationObj.result.length){this.createElementControl();this.calculateEleTransform()}};class_5.prototype.changeMedTypeShowState=function(e,t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(e){case MED_TYPE_REDOX.OXIDANT:case MED_TYPE_REDOX.REDUCING:{this.equationObj.product.forEach((function(i){var n=i.medObj;n.changeMedTypeShowState(e,t)}));break}case MED_TYPE_REDOX.OXIDANT_PRIDUCT:case MED_TYPE_REDOX.REDUCING_PRIDUCT:{this.equationObj.result.forEach((function(i){var n=i.medObj;n.changeMedTypeShowState(e,t)}));break}}return[2]}))}))};class_5.prototype.componentWillLoad=function(){this.analyticalExpression()};class_5.prototype.componentDidLoad=function(){if(this.showEleTransform){this.equCreatComplete.emit({showEleTransformAble_0:this.showEleTransformAble_0,showEleTransformAble_1:this.showEleTransformAble_1,showMedType:this.showMedType,MED_TYPE_REDOX:MED_TYPE_REDOX})}};class_5.prototype.analyticalExpression=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i,n,o,s,r,a,h,l;var c=this;return __generator(this,(function(u){e=this.expression;t=e.length;n="",o="",s="";for(r=0;r<t;r++){a=e[r];if(!i){if(CONDIRIONS_FORMAT[a]){i=CONDIRIONS_FORMAT[a]}else{n+=a}}else if(isNaN(i)){if(i[a]){i=i[a]}else{s+=a}}else{o+=a}}this.equationObj.arrowType=i;this.equationObj.condition=s.split("&");h=n.split("+");l=o.split("+");h.forEach((function(e){var t=parseInt(e);if(t){e=e.replace(""+t,"")}else{t=1}c.equationObj.product.push({medName:e,module:t,chemEles:[]})}));l.forEach((function(e){var t=parseInt(e);if(t){e=e.replace(""+t,"")}else{t=1}c.equationObj.result.push({medName:e,module:t,chemEles:[]})}));return[2]}))}))};class_5.prototype.createElementControl=function(){if(!this.showEleTransform){return}var e=this.elementControl;this.equationObj.product.forEach((function(t){var i=t.chemEles,n=t.module,o=t.medObj;var s=e.product;i.forEach((function(e,t){var i=e.content;var r=Object.assign({medObj:o,indexInMed:t},e);r.count*=n;if(s[i]){s[i].push(r)}else{s[i]=[r]}}))}));this.equationObj.result.forEach((function(t){var i=t.chemEles,n=t.module,o=t.medObj;var s=e.result;i.forEach((function(e,t){var i=e.content;var r=Object.assign({medObj:o,indexInMed:t},e);r.count*=n;if(s[i]){s[i].push(r)}else{s[i]=[r]}}))}))};class_5.prototype.calculateEleTransform=function(){if(!this.showEleTransform||!this.calcedEleTransform||this.expression=="Fe3O4+8HCl==FeCl2+2FeCl3+4H2O"){return}var elementControl=this.elementControl;for(var key in elementControl.product){var prod=elementControl.product[key];var resu=elementControl.result[key];for(var i=0,lp=prod.length;i<lp;i++){var pe=prod[i];for(var j=0,lr=resu.length;j<lr;j++){var re=resu[j];if(pe.valence===re.valence){var remove=Math.min(pe.count,re.count);pe.count-=remove;re.count-=remove}}}}for(var key in elementControl.product){var prod=elementControl.product[key];var resu=elementControl.result[key];for(var i=0,lp=prod.length;i<lp;i++){var pe=prod[i];if(!pe.count){continue}for(var j=0,lr=resu.length;j<lr;j++){var re=resu[j];if(!re.count){continue}if(pe.valence!==re.valence){var changeObj={from:pe,to:re};this.eleTransformList.push(changeObj)}}}}if(this.eleTransformList.length<=0){this.showEleTransformAble_0=false;this.showEleTransformAble_1=false}else{if(this.eleTransformList.length>2){this.showEleTransformAble_1=false}else if(this.eleTransformList.length===2){this.showEleTransformAble_1=true}var last=this.eleTransformList[0].from.bindElement;var length=this.eleTransformList.length;var i=1;for(;i<length;i++){var now=this.eleTransformList[i].from.bindElement;if(now!==last){break}}if(i>=length){this.showEleTransformAble_0=false}else{this.eleTransformList.sort((function(a,b){var dis=eval(a.from.valence)-eval(a.to.valence)-(eval(b.from.valence)-eval(b.to.valence));if(Number.isNaN(dis)){dis=1e3}return dis}));var count=0;var i_1=0;var length_1=this.eleTransformList.length;var from=this.eleTransformList[0].from;var to=this.eleTransformList[length_1-1].from;for(;i_1<length_1;i_1++){var a=this.eleTransformList[i_1];var dis=eval(a.to.valence)-eval(a.from.valence);if(dis>0){count+=dis*Math.min(a.to.count,a.from.count);if(a.from.bindElement!==from.bindElement){from=null;break}}else{if(a.from.bindElement!==to.bindElement){to=null;break}}}if(from&&to){this.showEleTransform_0_config={from:from,to:to,coefficient:count,electronics:1,mode:0};this.showEleTransformAble_0=true}else{this.showEleTransformAble_0=false}}}if(this.eleTransformList.length){this.showMedType=true;this.eleTransformList.forEach((function(config){var from=config.from,to=config.to;if(eval(from.valence)<eval(to.valence)){from.medObj.setMedType(MED_TYPE_REDOX.REDUCING);to.medObj.setMedType(MED_TYPE_REDOX.OXIDANT_PRIDUCT)}else{from.medObj.setMedType(MED_TYPE_REDOX.OXIDANT);to.medObj.setMedType(MED_TYPE_REDOX.REDUCING_PRIDUCT)}}))}};class_5.prototype.createMedDom=function(e){var t=this;var i=[];for(var n=0,o=e.length;n<o;n++){var s=e[n];if(s.module>1){i.push(s.module)}i.push(s);if(n!==o-1){i.push("+")}}return i.map((function(e){if(!isNaN(e)){return h("div",{class:"inl-blc module"}," ",e," ")}else if(e==="+"){return h("div",{class:"inl-blc"}," ",e," ")}else{return h("div",{class:"inl-blc"},h("nb-chem-med",{medInfo:e,medCalVal:t.showEleTransform}))}}))};class_5.prototype.createEleDom=function(){var e=this;if(!this.calcedEleTransform){return}if(this.showEleTransformAble_0&&this.eleTransformState===1){return h("nb-chem-bridge",{eleTransformState:this.eleTransformState,bridgeConfig:Object.assign({},this.showEleTransform_0_config),style:{color:"#3BC3FF"}})}else if(this.showEleTransformAble_1&&this.eleTransformState===2){var t=["#3BC3FF","#3BC3FF"];return this.eleTransformList.map((function(i,n){return h("nb-chem-bridge",{eleTransformState:e.eleTransformState,bridgeConfig:Object.assign({},i),style:{color:t[n]}})}))}};class_5.prototype.render=function(){return h("div",{class:"equation"},this.createMedDom(this.equationObj.product),h("div",{class:"inl-blc"},h("nb-chem-condition",{conditionAry:this.equationObj.condition,arrowType:this.equationObj.arrowType})),this.createMedDom(this.equationObj.result),this.createEleDom())};Object.defineProperty(class_5.prototype,"el",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(class_5,"style",{get:function(){return".equation{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.inl-blc{margin:0 .1em;white-space:nowrap}.module{margin-right:-.1em}"},enumerable:true,configurable:true});return class_5}());var commonlyRegular={isUpperCaseChar:function(e){if(!e||e.length!==1){console.error("isUpperCase 传入参数不合法");return false}return/^[A-Z]$/.test(e)},isLowerCaseChar:function(e){if(!e||e.length!==1){console.error("isUpperCase 传入参数不合法");return false}return/^[a-z]$/.test(e)},isNumberChar:function(e){if(!e||e.length!==1){console.error("isUpperCase 传入参数不合法");return false}return/^[0-9]$/.test(e)}};var REG=commonlyRegular;var NbChemMed=exports("nb_chem_med",function(){function e(e){registerInstance(this,e);this.medName="KO2";this.medInfo={};this.medCalVal=true;this.ingredientList=[];this.calculateValence=true;this.medTypeRedox=new Set;this.medChar="";this.showMedTypeSet=new Set;this.eleCreatCompletedCount=0;this.eleList=[];this.allEle=[];this.medCreatComplete=createEvent(this,"medCreatComplete",7)}e.prototype.eleCreatComplete=function(e){if(++this.eleCreatCompletedCount>=this.allEle.length){this.medCreatComplete.emit({chemEles:this.allEle,target:this,medName:this.medName,calculateValence:this.calculateValence})}};e.prototype.setMedType=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.medTypeRedox.add(e);return[2]}))}))};e.prototype.getElementBounds=function(e){return __awaiter(this,void 0,void 0,(function(){var t,i,n,o;return __generator(this,(function(s){t=DomUtils.domQuerySelector(this.ele,".med");i=t.offsetLeft,n=t.offsetTop;o=this.allEle[e];if(!o){return[2,null]}else{return[2,o.bindElement.getBounds().then((function(e){return{left:i+e.left,top:n+e.top,height:e.height,width:e.width}}))]}return[2]}))}))};e.prototype.changeMedTypeShowState=function(e,t){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(n){i=new Set(__spreadArrays(this.showMedTypeSet));if(t){i.add(e)}else{i.delete(e)}this.showMedTypeSet=i;return[2]}))}))};e.prototype.componentWillLoad=function(){this.medName=this.medInfo.medName||this.medName;this.analyticalMedName();if(!this.medCalVal){return}this.analyticalEleNum();this.getAllValence()};e.prototype.componentDidLoad=function(){};e.prototype.analyticalMedName=function(){var e=this.medName;var t=this.ingredientList;var i=e.length;if(t.length){return}for(var n=0;n<i;n++){var o=void 0;if(t.length>0){o=t[t.length-1]}var s=e[n];var r=void 0;if(REG.isUpperCaseChar(s)){r=new IngredientNode(s,ING_TYPE.ELEMENT)}else if(REG.isLowerCaseChar(s)){if(o){if(o.type===ING_TYPE.SYMBOL&&o.content==="_"&&n===i-1){if(s==="s"){o.content="↓";this.medChar="↓"}else if(s==="g"){o.content="↑";this.medChar="↑"}}else if(o.type===ING_TYPE.ELEMENT){o.content+=s}}}else if(REG.isNumberChar(s)){if(o&&o.content==="·"){r=new IngredientNode(s,ING_TYPE.COEFFICIENT)}else if(o&&(o.type===ING_TYPE.ELEMENT||o.type===ING_TYPE.SYMBOL)){r=new IngredientNode(s,ING_TYPE.SUBSCRIPT)}else if(o&&(o.type===ING_TYPE.SUBSCRIPT||o.type===ING_TYPE.COEFFICIENT)){o.content+=s}}else{if(s==="|"&&o.type===ING_TYPE.SYMBOL&&/^\|+$/.test(o.content)){o.content+=s}else{r=new IngredientNode(s,ING_TYPE.SYMBOL)}}if(r){t.push(r)}}if(this.medChar){t.pop()}};e.prototype.analyticalEleNum=function(){var e=this.ingredientList;var t=this.eleList;var i=this.allEle;var n;var o=0;for(var s=0,r=e.length;s<r;s++){var a=e[s];if(a.type===ING_TYPE.ELEMENT){l(a)}else if(a.type===ING_TYPE.SUBSCRIPT){var h=a.content<<0;if(n.type===ING_TYPE.ELEMENT){n.count*=h}else if(/^[\]|\)]$/.test(n.content)){c(n.content,h,s-2)}}else if(a.content==="·"){o+=1;continue}n=a}function l(e){if(!t[o]){t[o]=[]}t[o].push(e);i.push(e)}function c(t,i,n){var o={"]":"[",")":"("};var s=o[t];i=i>>0;var r=e;var a=n;while(!r[a]||r[a].content!==s){var h=r[a],l=h.type,c=h.content;if(l===ING_TYPE.ELEMENT){r[a].count*=i}a--}}};e.prototype.getAllValence=function(){var e=this;var t=[].concat(this.eleList);if(this.eleList.length>1){t=t.sort((function(e,t){return e.length-t.length}))}t.forEach((function(t){e.getOnceValence(t)}))};e.prototype.getOnceValence=function(e){if(e.length===1){return}if(n()){this.calculateValence=false;return}var t=[];var i=[];if(e.length===2){if(/^(Na|H|K)$/.test(e[0].content)&&e[0].count===2&&/^O$/.test(e[1].content)&&e[1].count===2){e[0].valence=1;e[1].valence=-1;return}else if(e[0].content==="Fe"&&e[1].content==="O"&&e[0].count===3&&e[1].count===4){e[0].valence="8/3";e[1].valence=-2}else if(e[0].content==="K"&&e[1].content==="O"&&e[0].count===1&&e[1].count===2){e[0].valence=1;e[1].valence="-1/2"}}e.forEach((function(e,n){if(!!e.valence){return}var o=ELEMENT_VALENCE[e.content];if(!o){console.warn("无法找到"+e.content+"的价态列表")}var s=o.nums;if(s&&s.length===1){e.valence=s[0];return}else{i.push(o);t.push(e)}}));o(0);function n(){for(var t=0,i=e.length;t<i;t++){var n=e[t];if(n.content!=="C"){continue}var o=e[t+1];if(!o){var s=e[t-1];if(s&&s.content==="Ca"&&s.count===1&&n.count===2){return false}return true}else if(o.content==="O"){if(o.count/n.count===3){return false}if(i===2&&n.count===1&&[1,2].includes(o.count)){return false}}else if(o.content==="N"){if(o.count/n.count===1){return false}}else if(o.content==="S"){if(o.count/n.count===2){return false}}return true}}function o(e){if(e>=t.length){return s()}var n=i[e].nums;for(var r=0,a=n.length;r<a;r++){t[e].valence=n[r];if(o(e+1)){return true}}return false}function s(){var t=0;e.forEach((function(e){var i=e.valence,n=e.count;t+=i*n}));return t===0}};e.prototype.render=function(){return h("div",{class:"medBox"},h("div",{class:"med"},this.creatMed(),this.creatMedType()),h("span",{class:"char"},this.medChar))};e.prototype.creatMed=function(){var e=this;return this.ingredientList.map((function(t){if(ING_TYPE.SYMBOL===t.type&&/^\|+$/.test(t.content)){var i=["-","=","≡"];t.content=i[t.content.length-1]}switch(t.type){case ING_TYPE.SUBSCRIPT:{return h("span",{class:"subscript"},t.content)}case ING_TYPE.ELEMENT:{var n=void 0;if(e.calculateValence&&e.medCalVal){n=h("nb-chem-element",{eleInfo:t,valenceAble:e.calculateValence&&e.medCalVal})}else{n=h("span",null,t.content)}return n}default:{return h("span",null,t.content)}}}))};e.prototype.creatMedType=function(){var e=this;var t=Array.from(this.medTypeRedox).filter((function(t){return e.showMedTypeSet.has(t)})).map((function(e){var t={OXIDANT:"氧化剂",REDUCING:"还原剂",OXIDANT_PRIDUCT:"氧化产物",REDUCING_PRIDUCT:"还原产物"};return t[e]}));return h("div",{class:"medType"},h("div",{class:"medTypeInner"},t.join("/")))};Object.defineProperty(e.prototype,"ele",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".med{position:relative;display:inline-block;white-space:nowrap}.med .subscript{position:relative;top:.2em;line-height:1em;font-size:60%}.med .medType{position:absolute;top:100%;left:0;width:100%;height:.5em;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;color:#f5a623;font-weight:bolder}.med .medType .medTypeInner{font-size:.5em}"},enumerable:true,configurable:true});return e}());var NbNumFraction=exports("nb_num_fraction",function(){function e(e){registerInstance(this,e);this.showPositive=false}e.prototype.componentWillLoad=function(){var e=false;var t=this.value;if(/[0-9]+\/[0-9]+$/.test(t)){var i=/^-/;if(i.test(t)){e=true;t=t.replace(i,"")}this.numbers=t.split("/")}this.isNegative=e};e.prototype.componentDidLoad=function(){var e=DomUtils.domQuerySelector(this.ele,".fractionBox");this.color=getComputedStyle(e).color};e.prototype.render=function(){return h("span",{class:"fractionBox"},h("div",{class:"valenceNum"},h("div",{class:"symbol"},this.isNegative?"-":this.showPositive?"+":h("span",{style:{width:"0px"}}," ")),h("div",{class:"fraction"},h("div",{class:"num"},this.numbers[0]),h("div",{class:"line",style:{borderColor:this.color}}," "),h("div",{class:"num"},this.numbers[1]))))};Object.defineProperty(e.prototype,"ele",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".fractionBox{display:inline-block}.valenceNum,.valenceNum .fraction{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.valenceNum .fraction{font-size:60%;line-height:.8em;-ms-flex-direction:column;flex-direction:column}.valenceNum .line{width:100%;height:0;border-top:.1rem solid #000;margin:.1em 0}.valenceNum .num{padding:0 .1em}.valenceNum .symbol{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;margin-top:-.1em}"},enumerable:true,configurable:true});return e}());var NbPanel=exports("nb_panel",function(){function e(e){var t=this;registerInstance(this,e);this.isFull=false;this.hold=false;this.enableEdge=false;this.x=0;this.y=0;this.width=400;this.height=300;this.minWidth=200;this.minHeight=200;this.maxWidth=undefined;this.maxHeight=undefined;this.canResize=true;this.closeVisible=true;this.supportsPassiveOption=false;this.scaling=false;this.downP=null;this.downDragP=null;this.guangObj={direct:"",isIntersect:false,line:{width:540,height:35},btn:{width:50,height:30}};this.editorPanelStyle={tempObj:{}};this.moveOptions={bWidth:0,bHeight:0};this.scaleWinMove=function(e){if(!t.downP)return;if(!e.clientX&&e.touches){var i=e.touches[0];e.clientX=i.clientX;e.clientY=i.clientY}var n=e.clientX-t.downP.x;var o=e.clientY-t.downP.y;t.width+=n;t.width=Math.max(t.minWidth,t.width);if(t.maxWidth){t.width=Math.min(t.maxWidth,t.width)}t.height+=o;t.height=Math.max(t.minHeight,t.height);if(t.maxHeight){t.height=Math.min(t.maxHeight,t.height)}t.downP.x=e.clientX;t.downP.y=e.clientY;t.scaling=true;t.sizeChange.emit({target:t,width:t.width,height:t.height})};this.scaleWinEnd=function(e){t.downP=null;t.scaling=false;document.removeEventListener("touchend",t.scaleWinEnd);document.removeEventListener("touchmove",t.scaleWinMove);document.removeEventListener("mouseup",t.scaleWinEnd);document.removeEventListener("mousemove",t.scaleWinMove)};this.moveDrag=function(e){if(!t.downDragP)return;if(!e.clientX&&e.touches){var i=e.touches[0];e.clientX=i.clientX;e.clientY=i.clientY}var n=e.clientX-t.downDragP.x;var o=e.clientY-t.downDragP.y;var s=t.getPanelDom();if(s){t.x+=n;t.y+=o}t.downDragP.x=e.clientX;t.downDragP.y=e.clientY;var r=NBUtils.M.getXYLen(t.oriDownDragP.x,t.oriDownDragP.y,e.clientX,e.clientY);if(r>20){t.moveChange.emit({target:t})}};this.endDrag=function(e){if(!t.downDragP)return;t.downDragP=null;document.removeEventListener("touchend",t.endDrag);document.removeEventListener("touchmove",t.moveDrag);document.removeEventListener("mouseup",t.endDrag);document.removeEventListener("mousemove",t.moveDrag);t.moveEnd.emit(e)};this.sizeChange=createEvent(this,"sizeChange",7);this.moveChange=createEvent(this,"moveChange",7);this.moveEnd=createEvent(this,"moveEnd",7);this.closed=createEvent(this,"closed",7)}e.prototype.moveToXY=function(e,t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){this.x=e;this.y=t;return[2]}))}))};e.prototype.setRect=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height;return[2]}))}))};e.prototype.getRect=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,new NBUtils.Rectangle(this.x,this.y,this.width,this.height)]}))}))};e.prototype.gotoFull=function(e){if(e===void 0){e=true}return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(i){this.isFull=e;setTimeout((function(){var e=t.getPanelDom(),i=e.offsetWidth,n=e.offsetHeight;t.sizeChange.emit({target:t,width:i,height:n,fullScreenChange:true})}),20);return[2]}))}))};e.prototype.componentWillLoad=function(){var e=SystemUtils.getInstance();this.supportsPassiveOption=e.supportsPassiveOption};e.prototype.componentDidLoad=function(){var e=this;$(window).off(".equ.panel").on("resize.equ.panel",(function(){if(e.isFull){var t=e.getPanelDom(),i=t.offsetWidth,n=t.offsetHeight;e.sizeChange.emit({target:e,width:i,height:n,fullScreenChange:true})}}))};e.prototype.getPanelDom=function(){return DomUtils.domQuerySelector(this.ele,".editor-panel")};e.prototype.scaleWinBegin=function(e){if(this.hold){return}this.downP={x:0,y:0};this.downP.x=e.clientX;this.downP.y=e.clientY;if(this.supportsPassiveOption){document.addEventListener("touchend",this.scaleWinEnd,{passive:false});document.addEventListener("touchmove",this.scaleWinMove,{passive:false})}else{document.addEventListener("touchend",this.scaleWinEnd);document.addEventListener("touchmove",this.scaleWinMove)}document.addEventListener("mouseup",this.scaleWinEnd);document.addEventListener("mousemove",this.scaleWinMove)};e.prototype.startDrag=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){console.log("startdrag~~~~~~~~~",e);if(this.hold||this.isFull)return[2];this.downDragP=new NBUtils.Point(e.clientX,e.clientY);this.oriDownDragP=this.downDragP.clone();this.moveOptions.bWidth=document.body.clientWidth;this.moveOptions.bHeight=document.body.clientHeight;if(this.supportsPassiveOption){document.addEventListener("touchend",this.endDrag,{passive:false});document.addEventListener("touchmove",this.moveDrag,{passive:false})}else{document.addEventListener("touchend",this.endDrag);document.addEventListener("touchmove",this.moveDrag)}document.addEventListener("mouseup",this.endDrag);document.addEventListener("mousemove",this.moveDrag);return[2]}))}))};e.prototype.panelCloseHandle=function(e){this.closed.emit({target:this})};e.prototype.render=function(){var e=this;var t={left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",position:"absolute"};var i={left:0,top:0,width:"100%",height:"100%",position:"fixed",zIndex:9999999};return h("div",{class:"editor-panel",style:this.isFull?i:t},h("div",{class:this.scaling?"body-shell panel-div":"panel-div"},h("slot",{name:"panel-body"},h("div",null))),h("div",{class:"panel-close-btn",onClick:function(t){return e.panelCloseHandle(t)},style:{display:this.closeVisible?"block":"none"}}),h("nb-touch-cell",{class:"editor-dragBtn",style:{display:this.canResize&&!this.isFull?"block":"none"},onNbMouseDown:function(t){return e.scaleWinBegin(t.detail)}},h("div",{class:"editor-dragBtn-img",style:{display:this.hold?"none":""}})))};Object.defineProperty(e.prototype,"ele",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".close_hov{background-position:0 -19px}.close_hov,.close_pre{background-image:url(assets/imgs/nbk/nbk_nb-panel_sprite.png);background-size:540px 246px;background-repeat:no-repeat;width:30px;height:24px}.close_pre{background-position:0 -48px}.colse_def,nb-panel .editor-panel .panel-close-btn{background-position:0 -77px;width:30px;height:24px}.colse_def,.guangtop,nb-panel .editor-panel .panel-close-btn,nb-panel .editor-panel .panel-guang .panel-guang-line{background-image:url(assets/imgs/nbk/nbk_nb-panel_sprite.png);background-size:540px 246px;background-repeat:no-repeat}.guangtop,nb-panel .editor-panel .panel-guang .panel-guang-line{background-position:0 -211px;width:540px;height:35px}.meau_def,nb-panel .editor-panel .panel-guang .panel-guang-btn{background-position:0 -106px}.meau_def,.meau_hov,nb-panel .editor-panel .panel-guang .panel-guang-btn,nb-panel .editor-panel .panel-guang .panel-guang-btn:hover{background-image:url(assets/imgs/nbk/nbk_nb-panel_sprite.png);background-size:540px 246px;background-repeat:no-repeat;width:50px;height:30px}.meau_hov,nb-panel .editor-panel .panel-guang .panel-guang-btn:hover{background-position:0 -141px}.meau_pre,nb-panel .editor-panel .panel-guang .panel-guang-btn:active{background-image:url(assets/imgs/nbk/nbk_nb-panel_sprite.png);background-size:540px 246px;background-repeat:no-repeat;background-position:0 -176px;width:50px;height:30px}.scale,nb-panel .editor-panel .editor-dragBtn .editor-dragBtn-img{background-image:url(assets/imgs/nbk/nbk_nb-panel_sprite.png);background-size:540px 246px;background-repeat:no-repeat;background-position:0 0;width:14px;height:14px}nb-panel .body-shell{pointer-events:none}nb-panel .panel-div{height:100%}nb-panel .moveAnimate{-webkit-transition:left .5s,top .5s;transition:left .5s,top .5s}nb-panel .editor-panel{position:relative;display:block;background:-webkit-gradient(linear,left top,left bottom,from(#3f444c),color-stop(48%,#3a3f46),to(#343940));background:linear-gradient(180deg,#3f444c,#3a3f46 48%,#343940);border-radius:8px;-webkit-box-shadow:0 2px 16px 0 rgba(0,0,0,.09);box-shadow:0 2px 16px 0 rgba(0,0,0,.09);z-index:999}nb-panel .editor-panel .editor-alpha{position:absolute;width:100%;margin-top:40px;height:90%;opacity:0;background-color:#ec6941}nb-panel .editor-panel .editor-dragBtn{position:absolute;width:25px;height:25px;right:0;bottom:0}nb-panel .editor-panel .editor-dragBtn .editor-dragBtn-img{position:absolute;right:4px;bottom:4px}nb-panel .editor-panel .panel-guang{position:fixed}nb-panel .editor-panel .panel-close-btn{position:absolute;right:10px;top:8.5px}nb-panel .editor-panel .drag-bar{width:100%;height:40px;pointer-events:none;background:rgba(236,105,65,0);position:absolute;display:inline-block}"},enumerable:true,configurable:true});return e}());var NbTouchCell=exports("nb_touch_cell",function(){function e(e){registerInstance(this,e);this.istouch=false;this.nbMouseDown=createEvent(this,"nbMouseDown",7)}e.prototype.touchStartHanlder=function(e){var t=e.touches[0];e.clientX=t.clientX;e.clientY=t.clientY;this.nbMouseDown.emit(e);this.istouch=true};e.prototype.mouseDownHanlder=function(e){if(this.istouch){this.istouch=false;return}this.nbMouseDown.emit(e)};e.prototype.componentWillLoad=function(){};Object.defineProperty(e.prototype,"element",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return""},enumerable:true,configurable:true});return e}())}}}));