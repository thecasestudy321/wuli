import{c as t,a as e}from"./p-ba1f185e.js";var n=t((function(t){var n=t;function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function t(n,r,i){function o(a,s){if(!r[a]){if(!n[a]){var h="function"==typeof e&&e;if(!s&&h)return h(a,!0);if(u)return u(a,!0);throw new Error("Cannot find module '"+a+"'")}var f=r[a]={exports:{}};n[a][0].call(f.exports,(function(t){return o(n[a][1][t]||t)}),f,f.exports,t,n,r,i)}return r[a].exports}for(var u="function"==typeof e&&e,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e){var n=function(){function t(){r(this,t)}return o(t,null,[{key:"arrayContainsValue",value:function(t,e){return-1!=t.indexOf(e)}},{key:"arrayContainsArray",value:function(e,n){var r=!0,i=void 0,o=n.length;for(i=0;i<o;i++)if(!t.arrayContainsValue(e,n[i])){r=!1;break}return r}},{key:"removeValueFromArray",value:function(t,e){var n=void 0;for(n=t.length;n>-1;n--)if(t[n]==e)return t.splice(n,1),!0;return!1}},{key:"addSingleArr",value:function(e,n){return!t.arrayContainsValue(e,n)&&(e.push(n),!0)}},{key:"removeValueFromIndex",value:function(t,e){var n=void 0;return e>=0&&e<t.length&&(n=t[e],t.splice(e,1)),n}},{key:"removeArrayFromArray",value:function(e,n){var r=n.length,i=void 0;for(i=0;i<r;i++)t.removeValueFromArray(e,n[i])}},{key:"createUniqueCopy",value:function(e){var n=new Array,r=e.length,i=void 0,o=void 0;for(o=0;o<r;++o)t.arrayContainsValue(n,i=e[o])||n.push(i);return n}},{key:"arraysAreEqual",value:function(t,e){if(t.length!=e.length)return!1;var n=t.length,r=void 0;for(r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}},{key:"clear",value:function(t){t&&0!=t.length&&t.splice(0,t.length)}},{key:"print",value:function(t){for(var e in t)trace(e+":"+t[e])}},{key:"getIndexFromValue",value:function(t,e){var n=-1,r=void 0,i=t.length;for(r=0;r<i;r++)if(e==t[r]){n=r;break}return n}},{key:"swapObj",value:function(){}},{key:"swapArrObj",value:function(e,n,r){var i=t.getIndexFromValue(e,n),o=t.getIndexFromValue(e,r);i>-1&&o>-1&&(e[i]=r,e[o]=n)}},{key:"swapArrInd",value:function(t,e,n){var r=t[e];e>-1&&n>-1&&(t[e]=t[n],t[n]=r)}},{key:"swapChaArrInd",value:function(e,n,r){var i=[],o=void 0,u=void 0,a=void 0,s=void 0,h=e.length;if(n<0||n>=h)return e;if(r>=0&&r<h){o=e[n],u=e[r],t.removeValueFromIndex(e,n);var f=t.getIndexFromValue(e,u);for(a=0;a<f;a++)i[a]=e[a];for(i[f]=o,s=f+1;s<h+1;s++)i[s]=e[s-1]}else r>=h?(o=e[n],t.removeValueFromIndex(e,n),e.push(o),i=t.copyArray(e)):r<0&&(o=e[n],t.removeValueFromIndex(e,n),e.unshift(o),i=t.copyArray(e));return i}},{key:"getString",value:function(t,e){return t&&0!==t.length?t.join(e=e||","):""}},{key:"copy",value:function(t){return t?t.slice():null}},{key:"copyArray",value:function(e){return t.copy(e)}},{key:"isArray",value:function(t){return"[object Array]"===Object.prototype.toString.call(t)}}]),t}();e.exports=n},{}],2:[function(t,e){var n=function(){function t(){r(this,t)}return o(t,null,[{key:"checkHasFlag",value:function(t,e){t=t instanceof $?t:$(t);for(var n=!1,r=0;r++<20;){var i=t&&t[0]?t[0].tagName:null;if(i=i?i.toLowerCase():i,!t||"phy-app"===i||"body"===i)break;if(t.hasClass(e)){n=!0;break}t=t.parent()}return n}}]),t}();e.exports=n},{}],3:[function(t,e){var n=t("./NumberUtilities"),u=function(){function t(){r(this,t)}return o(t,null,[{key:"setFullscreen",value:function(t){var e=t instanceof HTMLElement?t:document.documentElement,n=e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen;if(n)n.call(e);else if(window.ActiveXObject){var r=new window.ActiveXObject("WScript.Shell");r&&r.SendKeys("{F11}")}else console.log("~~~Your browser is not supported setFullscreen")}},{key:"exitFullscreen",value:function(){var t=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;if(t)t.call(document);else if(window.ActiveXObject){var e=new window.ActiveXObject("WScript.Shell");e&&e.SendKeys("{F11}")}}},{key:"_invokeFieldOrMethod",value:function(t,e){var n=void 0;return["webkit","moz","ms","o",""].forEach((function(r){if(!n){""===r&&(e=e.slice(0,1).toLowerCase()+e.slice(1));var o=i(t[r+e]);o+""!="undefined"&&(n="function"===o?t[r+e]():t[r+e])}})),n}},{key:"isFullScreen",value:function(){return t._invokeFieldOrMethod(document,"FullScreen")||t._invokeFieldOrMethod(document,"IsFullScreen")||document.IsFullScreen}},{key:"toggle",value:function(e){var n=t.isFullScreen();return n?t.exitFullscreen():t.setFullscreen(e),!n}},{key:"addFullListener",value:function(e,r){if(!e||!r)return console.error("~~~~dom 或者 func 为空"),null;var i=n.getUnique();return t._fullListenerMap[i]={dom:e,func:r},e.addEventListener("webkitfullscreenchange",r),e.addEventListener("mozfullscreenchange",r),e.addEventListener("fullscreenchange",r),e.addEventListener("MSFullscreenChange",r),i}},{key:"removeFullListener",value:function(e){if(!t._fullListenerMap[e])return!1;var n=t._fullListenerMap[e],r=n.dom,i=n.func;return r.removeEventListener("webkitfullscreenchange",i),r.removeEventListener("mozfullscreenchange",i),r.removeEventListener("fullscreenchange",i),r.removeEventListener("MSFullscreenChange",i),delete t._fullListenerMap[e],!0}},{key:"hasFullListener",value:function(e){return!!t._fullListenerMap[e]}},{key:"setFullscreenFix",value:function(t){var e=window.__temp_fix_full_data;if(t&&!e){window.__temp_fix_full_data={element:t,style:{zIndex:t.style.zIndex||"unset",position:t.style.position||"unset",left:t.style.position||"unset",top:t.style.top||"unset",width:t.style.width||"unset",height:t.style.height||"unset"},parent:$(t).parent()};var n=$(t).detach();$(document.body).append(n),$(t).css({zIndex:9999,position:"fixed",left:"0px",top:"0px",width:$(window).width()+"px",height:$(window).height()+"px"})}}},{key:"exitFullscreenFix",value:function(){var t=window.__temp_fix_full_data;if(t){var e=t.style,n=t.element,r=t.parent,i=$(n).detach();r.append(i),e&&n&&$(n).css(e),delete window.__temp_fix_full_data}}},{key:"toggleFix",value:function(e){e&&(window.__temp_fix_full_data?t.exitFullscreenFix():t.setFullscreenFix(e))}}]),t}();u._fullListenerMap={},e.exports=u},{"./NumberUtilities":10}],4:[function(t,e){(function(t){var n=t||window,i=n.PIXI?n.PIXI.mesh.Mesh:function(){},u=function(){function t(e,n,o){r(this,t);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(u.mess=o||{},u.points=[],u._ready=!0,u.rectW=10,u.rectH=10,u.radius=10,u.total=36,u.drawType=n||t.RECT,u.drawMode=i.DRAW_MODES.TRIANGLES,u.drawType===t.CRICLE)u.radius=u.mess.r||10,u.radius>300&&(u.total*=2);else if(u.drawType===t.RECT)u.rectW=u.mess.w||10,u.rectH=u.mess.h||10;else if(u.drawType===t.POLYGON){if(!o||!o.points||o.points.length<3)throw new Error("输入数据有误");u.points=o.points}return u.refresh(),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(t,i),o(t,[{key:"updateData",value:function(){}},{key:"drawCircle",value:function(e){this.drawType=t.CRICLE,this.radius=e}},{key:"drawRect",value:function(e,n){this.drawType=t.RECT,this.rectW=e,this.rectH=n}},{key:"refresh",value:function(){var e=[0,0],n=[],r=[],i=this.texture;if(i._updateUvs(),this.drawType===t.RECT)$.each(i._uvs,(function(t,e){n.push(e)})),e=[0,0,this.rectW,0,0,this.rectH,this.rectW,this.rectH],r=[0,1,2,1,3,2];else if(this.drawType===t.CRICLE){var o=0,u=i._uvs,a=2*this.radius/i.width,s={x:u.x0+(A=u.x1*a)/2,y:u.y0+(x=u.y2*a)/2};n.push(s.x,s.y);var h=A/2,f=2*Math.PI/this.total;for(k=0;k<this.total;k++){var v=o,c=this.radius*Math.cos(v),l=this.radius*Math.sin(v),d=h*Math.cos(v),y=h*Math.sin(v);o+=f,e.push(c,l),n.push(s.x+d,s.y+y),k>1&&r.push(0,k-1,k)}r.push(0,this.total-1,this.total,0,this.total,1)}else if(this.drawType==t.POLYGON){var k,w=1e6,m=-1e6,M=1e7,g=-1e5;for(e=[],k=0;k<this.points.length;k++)(T=this.points[k]).index=k,e.push(T.x,T.y),0===k?(w=m=T.y,M=g=T.x):(T.x<M&&(M=T.x),T.x>g&&(g=T.x),T.y<w&&(w=T.y),T.y>m&&(m=T.y));var b=g-M,p=m-w,A=(u=i._uvs).x1-u.x0,x=u.y2-u.y0;for(k=0;k<this.points.length;k++){var T=this.points[k];n.push(u.x0+A*(d=(T.x-M)/b),u.y0+x*(y=(T.y-w)/p))}r=3==this.points.length?[0,1,2]:this.createTriangles()}this.vertices=new Float32Array(e),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(r)}},{key:"createTriangles",value:function(){var t,e=this.points.concat(),n=[],r=0,i=0,o=0;for(r=0;r<e.length;r++)0==r?(u=e[e.length-1],a=e[r],s=e[r+1]):r==e.length-1?(u=e[r-1],a=e[r],s=e[0]):(u=e[r-1],a=e[r],s=e[r+1]),(h=this.cross(u,a,s))?i++:o++;for(t=i>o,r=0;;){if(3==e.length){n.push(e[0].index,e[1].index,e[2].index);break}var u,a,s;r>e.length-1&&(r=0),0==r?(u=e[e.length-1],a=e[r],s=e[r+1]):r==e.length-1?(u=e[r-1],a=e[r],s=e[0]):(u=e[r-1],a=e[r],s=e[r+1]);var h=this.cross(u,a,s);if(h==t){var f=void 0,v=void 0,c=void 0;0==r?(f=e[e.length-1],v=e[r],c=e[r+1]):r==e.length-1?(f=e[r-1],v=e[r],c=e[0]):(f=e[r-1],v=e[r],c=e[r+1]);var l=void 0,d=!0;for(l=0;l<e.length;l++)if(e[l]!=f&&e[l]!=v&&e[l]!=c&&this.isInsideTriangle(f,v,c,e[l])){d=!1,r++;break}d&&(n.push(f.index,v.index,c.index),e.splice(r,1))}else r++}return n}},{key:"isInsideTriangle",value:function(t,e,n,r){var i=(e.x-r.x)*(n.y-r.y)-(n.x-r.x)*(e.y-r.y),o=(n.x-r.x)*(t.y-r.y)-(t.x-r.x)*(n.y-r.y);return this.sign((t.x-r.x)*(e.y-r.y)-(e.x-r.x)*(t.y-r.y))===this.sign(i)&&this.sign(i)===this.sign(o)}},{key:"sign",value:function(t){return Math.abs(t)/t}},{key:"cross",value:function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)>0}},{key:"_onTextureUpdate",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var u=i.get;return void 0!==u?u.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onTextureUpdate",this).call(this),this._ready&&this.refresh()}}]),t}();u.CRICLE="circle",u.RECT="rect",u.POLYGON="polygon",e.exports=u}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e){var n=function(){function t(){r(this,t)}return o(t,null,[{key:"drawArc",value:function(t,e,n,r,i,o){var u=[e,n];o||(o=0);var a=o*Math.PI/180,s=(o+i)*Math.PI/180,h=[u[0]+r*Math.cos(a),u[1]+r*Math.sin(a)];t.moveTo(h[0],h[1]);for(var f=[u[0]+r*Math.cos(s),u[1]+r*Math.sin(s)],v=h,c=0;c<i;c+=2){var l=(c+o)*Math.PI/180,d=[r*Math.cos(l)+u[0],r*Math.sin(l)+u[1]];t.moveTo(v[0],v[1]),t.lineTo(d[0],d[1]),t.filling&&(t.lineTo(u[0],u[1]),t.lineTo(v[0],v[1])),v=d}t.lineTo(f[0],f[1]),t.filling&&(t.lineTo(u[0],u[1]),t.lineTo(v[0],v[1]))}}]),t}();e.exports=n},{}],6:[function(t,e){var n=function(){function t(){r(this,t),this._data={}}return o(t,[{key:"get",value:function(t){var e=this._data[this._hash(t)];return e&&e[1]}},{key:"find",value:function(t){return this.get(t)}},{key:"set",value:function(t,e){this._data[this._hash(t)]=[t,e]}},{key:"insert",value:function(t,e){this.set(t,e)}},{key:"put",value:function(t,e){this.set(t,e)}},{key:"copy",value:function(t){for(var e in t._data)this._data[e]=t._data[e]}},{key:"has",value:function(t){return this._hash(t)in this._data}},{key:"containsKey",value:function(t){return this.has(t)}},{key:"search",value:function(t){for(var e in this._data)if(this._data[e][1]===t)return this._data[e][0];return null}},{key:"remove",value:function(t){delete this._data[this._hash(t)]}},{key:"type",value:function(t){var e=Object.prototype.toString.call(t).slice(8,-1).toLowerCase();return"domwindow"!==e||t?e:t+""}},{key:"keys",value:function(){var t=[];return this.forEach((function(e,n){t.push(n)})),t}},{key:"getKeySet",value:function(){return this.keys()}},{key:"values",value:function(){var t=[];return this.forEach((function(e){t.push(e)})),t}},{key:"count",value:function(){return this.keys().length}},{key:"size",value:function(){return this.count()}},{key:"clear",value:function(){this._data={}}},{key:"clone",value:function(){return new t(this)}},{key:"forEach",value:function(t,e){for(var n in this._data){var r=this._data[n];t.call(e||this,r[1],r[0])}}},{key:"toString",value:function(){var t="HashMap Content = \n";return this.forEach((function(e,n){t+=n+" -> "+e+"\n"})),t}},{key:"length",value:function(){return this.count()}},{key:"isEmpty",value:function(){return 0===this.count()}},{key:"containsValue",value:function(t){var e=!1;return this.forEach((function(n){if(t===n)return e=!0,!1})),e}},{key:"getKeyValyeArray",value:function(){var t=[];return this.forEach((function(e,n){t.push({key:n,value:e})})),t}},{key:"_hash",value:function(e){switch(this.type(e)){case"undefined":case"null":case"boolean":case"number":case"string":case"regexp":return e+"";case"date":return"♣"+e.getTime();case"array":for(var n=[],r=0;r<e.length;r++)n[r]=this._hash(e[r]);return"♥"+n.join("⁞");default:return e.hasOwnProperty("_hmuid_")||(e._hmuid_=++t.uid),"♦"+e._hmuid_}}}]),t}();e.exports=n},{}],7:[function(t,e){var n=t("./NumberUtilities"),u=t("./Point"),a=t("./Rectangle"),s=t("./ArrayUtil"),h=t("./ObjTree"),f=function(){function t(){r(this,t)}return o(t,null,[{key:"sq",value:function(t){return Math.pow(Math.abs(t),2)}},{key:"bevel",value:function(t,e){return Math.sqrt(t*t+e*e)}},{key:"max",value:function(t){return Math.max.apply(null,t)}},{key:"ping",value:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length}},{key:"getUnique",value:function(){return n.getUnique()}},{key:"getUniqueID",value:function(){return n.getUniqueID()}},{key:"getBoundsFromArray",value:function(t){for(var e=new a,n=1e8,r=-1e8,i=1e10,o=-1e9,u=0;u<t.length;u++){var s=t[u];s.x<n&&(n=s.x),s.y<i&&(i=s.y),s.x+s.width>r&&(r=s.x+s.width),s.y+s.height>o&&(o=s.y+s.height)}return e.x=n,e.y=i,e.width=r-n,e.height=o-i,e}},{key:"getCenP",value:function(t,e){return new u((t.x+e.x)/2,(t.y+e.y)/2)}},{key:"getPointLen",value:function(t,e){return u.distance(t,e)}},{key:"getFuhao",value:function(t){return t>=0?1:-1}},{key:"getXYLen",value:function(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))}},{key:"getXianDianByDis",value:function(e,n,r,i){var o;if(r.x===i.x&&r.y===i.y)return r.clone();if(Math.abs(i.x-r.x)<1e-6){if(n&&r.y>i.y||!n&&r.y<i.y)return new u(r.x,r.y-e);if(!n&&r.y>i.y||n&&r.y<i.y)return new u(r.x,r.y+e)}o=(i.y-r.y)/(i.x-r.x);var a=Math.sqrt(e*e/(1+o*o))+r.x,s=-Math.sqrt(e*e/(1+o*o))+r.x,h=o*(a-r.x)+r.y,f=o*(s-r.x)+r.y,v=t.sq(a-i.x)+t.sq(h-i.y),c=t.sq(s-i.x)+t.sq(f-i.y);return n?v>c?new u(s,f):new u(a,h):v>c?new u(a,h):new u(s,f)}},{key:"interpolate",value:function(t,e,n){return new u(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)}},{key:"getRandColor",value:function(){return 16777215*Math.random()+4278190080}},{key:"getDecimalNum",value:function(t){var e=""+t;return this.StringUtil.contains(e,".")?(e=e.substring(e.indexOf(".")+1)).length:0}},{key:"getAngleP",value:function(t,e){return e||(e=new u(0,0)),Math.atan2(t.y-e.y,t.x-e.x)*(180/Math.PI)}},{key:"getAngleP1",value:function(t,e){var n=Math.atan2(t.y,t.x)*(180/Math.PI);return e?n-Math.atan2(e.y,e.x)*(180/Math.PI):n}},{key:"getAreaByPoints",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);r=e.x-n.x,i=e.y-n.y;var u=Math.sqrt(r*r+i*i);r=n.x-t.x,i=n.y-t.y;var a=Math.sqrt(r*r+i*i),s=(o+u+a)/2;return Math.sqrt(s*(s-o)*(s-u)*(s-a))}},{key:"checkPointIn",value:function(e,n,r,i){var o=t.getAreaByPoints(n,r,i),u=0;return u+=t.getAreaByPoints(e,n,r),u+=t.getAreaByPoints(e,r,i),(u+=t.getAreaByPoints(e,i,n))===o||Math.abs(u-o)<1e-4}},{key:"getAngleByP",value:function(e,n,r){var i=t.getPointLen(n,r),o=t.getPointLen(e,r),u=t.getPointLen(e,n),a=2*o*u;return 0===a&&(a=1e-9),180*Math.acos((o*o+u*u-i*i)/a)/Math.PI}},{key:"getPoint_NeiXin",value:function(e,n,r){var i=t.getPointLen(e,n),o=t.getPointLen(n,r),a=t.getPointLen(e,r),s=new u;return s.x=(i*e.x+o*n.x+a*r.x)/(i+o+a),s.y=(i*e.y+o*n.y+a*r.y)/(i+o+a),s}},{key:"getSPPoint",value:function(t){return new u(t.x,t.y)}},{key:"setSPPoint",value:function(t,e){t&&e&&(t.x=e.x,t.y=e.y)}},{key:"setSPPointXY",value:function(t,e,n){t&&(t.x=e,t.y=n)}},{key:"rotaPointFromP",value:function(e,n,r){n.y===e.y&&(n.y=e.y+t.MIN);var i=new u(e.x-n.x,e.y-n.y),o=t.rotaPoint(i,r);return o.x+=n.x,o.y+=n.y,o}},{key:"atan",value:function(e,n){return t.getAngleP(e,n)}},{key:"getPFrom2DianAndAngle",value:function(e,n,r,i){e.clone(),n.clone();var o=180+t.atan(n,e)-i,a=t.toHu(o);e=t.rotaPoint(e,-a),n=t.rotaPoint(n,-a);var s=Math.sqrt(t.sq(n.x-e.x)+t.sq(n.y-e.y))*Math.sin(t.toHu(r))/Math.sin(t.toHu(180-r-i))+n.x,h=new u(s,n.y);return t.rotaPoint(h,a)}},{key:"toHu",value:function(t){return t/180*Math.PI}},{key:"toAngle",value:function(t){return t/Math.PI*180}},{key:"getNumStr",value:function(t){if(!(t=t.toString()))return"";var e=/(-?\d+)(\.\d+)?/;return null===e.exec(t)?0:(e.exec(t)[0]||0)-0}},{key:"getPStr",value:function(t){return/'+/.exec(t)}},{key:"getFAStr",value:function(t){return/[ABC]+/.exec(t)}},{key:"checkPointOnLineLeftOrRight",value:function(t,e,n){return(t.x-e.x)*(t.y-n.y)-(t.x-n.x)*(t.y-e.y)}},{key:"checkOnLineAB",value:function(t,e,n,r){return r||(r=.5),Math.abs((t.y-e.y)*(t.x-n.x)-(t.y-n.y)*(t.x-e.x))<r}},{key:"checkInLineAB",value:function(e,n,r,i){i||(i=.1);var o=!1;return e?t.getPointLen(e,n)+t.getPointLen(e,r)-t.getPointLen(n,r)<i&&(o=!0):o=!1,o}},{key:"isPingxing",value:function(t,e,n,r){var i=!1;return(e.y-t.y)*(r.x-n.x)==(e.x-t.x)*(r.y-n.y)&&(i=!0),i}},{key:"getJiaoP",value:function(t,e,n,r){var i,o,a=new u,s=t.x,h=t.y,f=e.x,v=e.y,c=n.x,l=n.y,d=r.x,y=r.y,k=1e-7;return a.x=(i=f===s?(v-h)/(f-s+k):(v-h)/(f-s))==(o=d===c?(y-l)/(d-c+k):(y-l)/(d-c))?(i*s-o*c+l-h)/(i-o+k):(i*s-o*c+l-h)/(i-o),a.y=i*a.x-i*s+h,a}},{key:"checkJPIsInAB",value:function(e,n,r,i){var o=t.getJiaoP(e,n,r,i);return t.checkInLineAB(o,e,n)}},{key:"checkJPIsInABCD",value:function(e,n,r,i){var o=t.getJiaoP(e,n,r,i);return t.checkInLineAB(o,e,n)&&t.checkInLineAB(o,r,i)||t.checkInLineAB(e,r,i)||t.checkInLineAB(n,r,i)||t.checkInLineAB(r,e,n)||t.checkInLineAB(i,e,n)}},{key:"hasPoint",value:function(t,e){for(var n=!1,r=0;r<t.length;r++){var i=t[r];if(i.x===e.x&&i.y===e.y){n=!0;break}}return n}},{key:"rotaPoint",value:function(t,e){var n=new u;return n.x=Math.cos(e)*t.x-Math.sin(e)*t.y,n.y=Math.cos(e)*t.y+Math.sin(e)*t.x,n}},{key:"getPArrRect",value:function(t){for(var e=void 0,n=void 0,r=0;r<t.length;r++){var i=t[r];e?(e.x=Math.min(e.x,i.x),e.y=Math.min(e.y,i.y)):e=new u(i.x,i.y),n?(n.x=Math.max(n.x,i.x),n.y=Math.max(n.y,i.y)):n=new u(e.x,e.y)}return new a(e.x,e.y,n.x-e.x,n.y-e.y)}},{key:"getRectCen",value:function(t){var e=new u;return e.x=(t.left+t.right)/2,e.y=(t.top+t.bottom)/2,e}},{key:"getRectFromDuiP",value:function(t,e){var n=Math.min(t.x,e.x),r=Math.min(t.y,e.y),i=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);return new a(n,r,i,o)}},{key:"getZoomPoint",value:function(t,e,n,r){var i=t.x,o=t.y;return new u((n.x-i)/(e.x-i)*(r.x-i)+i,(n.y-o)/(e.y-o)*(r.y-o)+o)}},{key:"getZoomPointA",value:function(e,n,r,i,o){var a=e.x,s=e.y,h=n.x,f=n.y,v=i.x,c=i.y,l=new u(r.x-a,r.y-s),d=new u(h-a,f-s),y=new u(v-a,c-s),k=new u(l.x/d.x*y.x,l.y/d.y*y.y),w=new u(k.x+a-v,k.y+s-c),m=(w=t.getRoZoomP(w,o)).x+v;return new u(m,w.y+c)}},{key:"isPointNi",value:function(t,e,n){var r=e.x,i=e.y;return(t.x-r)*(n.y-i)<(t.y-i)*(n.x-r)}},{key:"getRoZoomP",value:function(e,n){var r=new u;return r.x=e.x*Math.cos(t.toHu(-n))+e.y*Math.sin(t.toHu(-n)),r.y=e.y*Math.cos(t.toHu(-n))-e.x*Math.sin(t.toHu(-n)),r}},{key:"getOvalPoint",value:function(t,e,n){void 0===n&&(n=null);var r=[],i=t/2,o=e/2,a=0,s=void 0,h=void 0;for(n||(n=new u(0,0));a<2*Math.PI;)s=n.x+i*Math.sin(a),h=n.y+o*Math.cos(a),r.push(new u(s,h)),a+=2/180*Math.PI;return r}},{key:"getRegPolygon",value:function(t,e,n){var r=[];if(1===t)return[e];for(var i=0;i<t;i++){var o=new u;o.x=e.x+n*Math.cos(2*Math.PI/t*i),o.y=e.y+n*Math.sin(2*Math.PI/t*i),Math.abs(o.x)<1e-5&&(o.x=0),Math.abs(o.y)<1e-5&&(o.y=0),r.push(o)}return r}},{key:"getLianPObj",value:function(t,e){return{p1:t,p2:e}}},{key:"getRegPolygonRay",value:function(e,n,r){var i=t.getRegPolygon(e,n,r),o=[];if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(e>2){for(var u=0;u<i.length-1;u++)o.push({p1:i[u],p2:i[u+1]});o.push({p1:i[i.length-1],p2:i[0]})}return{pArr:i,lianArr:o}}},{key:"getThreeRay",value:function(e,n,r){var i=[],o=[],a=0;i.push(n),a++;for(var s=Math.ceil((e-1)/3),h=0;h<s;h++)for(var f=0;f<3&&a!==e;f++){var v,c=new u((v=1===i.length?i[0]:i[i.length-3]).x,v.y-r);if(i.push(c),++a===e)break;var l=t.rotaPointFromP(c,n,2*-Math.PI/3);if(i.push(l),++a===e)break;var d=t.rotaPointFromP(c,n,2*Math.PI/3);if(i.push(d),++a===e)break}if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(3===e)o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2]));else if(e>3){o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2]));for(var y=0;y<=i.length-4;y++)o.push(t.getLianPObj(i[y],i[y+3]))}return{pArr:i,lianArr:o}}},{key:"getCrossRay",value:function(e,n,r){var i=[],o=[],a=0;i.push(n),a++;for(var s=Math.ceil((e-1)/3),h=0;h<s;h++)for(var f=0;f<4&&a!==e;f++){var v,c=new u((v=1===i.length?i[0]:i[i.length-4]).x,v.y-r);if(i.push(c),++a===e)break;var l=t.rotaPointFromP(c,n,-Math.PI/2);if(i.push(l),++a===e)break;var d=t.rotaPointFromP(c,n,-Math.PI);if(i.push(d),++a===e)break;var y=t.rotaPointFromP(c,n,Math.PI/2);if(i.push(y),++a===e)break}if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(3===e)o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2]));else if(4===e)o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2])),o.push(t.getLianPObj(i[0],i[3]));else if(e>4){o.push(t.getLianPObj(i[0],i[1])),o.push(t.getLianPObj(i[0],i[2])),o.push(t.getLianPObj(i[0],i[3]));for(var k=0;k<=i.length-5;k++)o.push(t.getLianPObj(i[k],i[k+4]))}return{pArr:i,lianArr:o}}},{key:"getHorizontalRay",value:function(e,n,r){var i=[],o=[],a=0;i.push(n),a++;for(var s=Math.ceil((e-1)/3),h=0;h<s;h++)for(var f=0;f<3&&a!==e;f++){var v,c=new u((v=1===i.length?i[0]:i[i.length-2]).x-r,v.y);if(i.push(c),++a===e)break;var l=t.rotaPointFromP(c,n,Math.PI);if(i.push(l),++a===e)break}if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(e>2){o.push(t.getLianPObj(i[0],i[1]));for(var d=0;d<=i.length-3;d++)o.push(t.getLianPObj(i[d],i[d+2]))}return{pArr:i,lianArr:o}}},{key:"getVerticalRay",value:function(e,n,r){var i=[],o=[],a=0;i.push(n),a++;for(var s=Math.ceil((e-1)/3),h=0;h<s;h++)for(var f=0;f<3&&a!==e;f++){var v,c=new u((v=1===i.length?i[0]:i[i.length-2]).x,v.y-r);if(i.push(c),++a===e)break;var l=t.rotaPointFromP(c,n,Math.PI);if(i.push(l),++a===e)break}if(2===e)o.push(t.getLianPObj(i[0],i[1]));else if(e>2){o.push(t.getLianPObj(i[0],i[1]));for(var d=0;d<=i.length-3;d++)o.push(t.getLianPObj(i[d],i[d+2]))}return{pArr:i,lianArr:o}}},{key:"getDuiDianP",value:function(e,n,r){var i=new u,o=t.getGaoDianFrom3Dian(e,n,r);return i.x=2*o.x-e.x,i.y=2*o.y-e.y,i}},{key:"getDuiDianDian",value:function(t,e){return new u(2*e.x-t.x,2*e.y-t.y)}},{key:"getNumJie",value:function(t,e){void 0===e&&(e=0),t-=0;var n=Math.pow(10,e),r=Math.round(t*n)/n+"",i=r.split(".");if(0===e)return i[0];var o=0;2===i.length?o=e-i[1].length:(o=e,r+=".");for(var u=0;u<o;)r+="0",u++;return r-0==0?0:r}},{key:"getNumToInt",value:function(t){var e=t+"",n=e.indexOf(".");return-1===n?e-0:(e=e.slice(0,n))-0}},{key:"getGaoDianFrom3Dian",value:function(t,e,n){if(!t||!e||!n)return console.error("nb-utils:getGaoDianFrom3Dian 参数不能为空"),null;if(e.x===n.x&&e.y===n.y)return new u(e.x,e.y);var r=t.x,i=t.y,o=e.x,a=e.y,s=n.x,h=n.y;return new u(1*((h-a)*(h-a)*o+(s-o)*(s-o)*r+(i-a)*(s-o)*(h-a))/((h-a)*(h-a)+(s-o)*(s-o)),((r-o)*(s-o)*(h-a)+(i-a)*(h-a)*(h-a))/((h-a)*(h-a)+(s-o)*(s-o))+a)}},{key:"getDisFrom3Dian",value:function(e,n,r){var i=t.getGaoDianFrom3Dian(e,n,r);return t.getPointLen(e,i)}},{key:"getXianDuanGaoXianDian",value:function(e,n,r,i){void 0===i&&(i=!0);var o=t.getXianDianByDis(r,!0,e,n);return t.rotaPointFromP(o,e,i?-Math.PI/2:Math.PI/2)}},{key:"getRectOneP",value:function(t,e,n){return new u(t.x+e.x-n.x,t.y+e.y-n.y)}},{key:"retrieveRGBComponent",value:function(t){return"[object String]"===Object.prototype.toString.call(t)&&(t="0x"+(t="#"===t.substring(0,1)?t.substring(1):t)-0),[t>>16,t>>8&255,255&t]}},{key:"generateFromRGBComponent",value:function(t){return null===t||3!==t.length||t[0]<0||t[0]>255||t[1]<0||t[1]>255||t[2]<0||t[2]>255?16777215:t[0]<<16|t[1]<<8|t[2]}},{key:"generateTransitionalColor",value:function(e,n,r){if(1===r)return[e];if(2===r)return[e,n];var i=t.retrieveRGBComponent(e),o=t.retrieveRGBComponent(n),u=[];u.push(e),r-=2;for(var a=o[0]-i[0],s=o[1]-i[1],h=o[2]-i[2],f=1;f<r-1;f++)u.push(t.generateFromRGBComponent([i[0]+a*f/r,i[1]+s*f/r,i[2]+h*f/r]));return u.push(n),u}},{key:"drawArc",value:function(t,e,n,r,i,o){var u=[e,n];o||(o=0);var a=o*Math.PI/180,s=(o+i)*Math.PI/180,h=[u[0]+r*Math.cos(a),u[1]+r*Math.sin(a)];t.moveTo(h[0],h[1]);for(var f=[u[0]+r*Math.cos(s),u[1]+r*Math.sin(s)],v=h,c=0;c<i;c+=2){var l=(c+o)*Math.PI/180,d=[r*Math.cos(l)+u[0],r*Math.sin(l)+u[1]];t.moveTo(v[0],v[1]),t.lineTo(d[0],d[1]),t.filling&&(t.lineTo(u[0],u[1]),t.lineTo(v[0],v[1])),v=d}t.lineTo(f[0],f[1]),t.filling&&(t.lineTo(u[0],u[1]),t.lineTo(v[0],v[1]))}},{key:"getArcPoints",value:function(e,n,r,i,o){i=t.toAngle(i);var a=[],s=[e,n];(o=t.toAngle(o))||(o=0);var h=o*Math.PI/180,f=[s[0]+r*Math.cos(h),s[1]+r*Math.sin(h)];a.push(new u(f[0],f[1]));for(var v=0;v<i;v+=1){rad=(v+o)*Math.PI/180;var c=[r*Math.cos(rad)+s[0],r*Math.sin(rad)+s[1]];a.push(new u(c[0],c[1]))}return a}},{key:"checkPolygonPointArr",value:function(e,n){for(var r=0,i=0,o=void 0,u=!1,a=0;a<n.length;a++){var s=void 0,h=void 0;a===n.length-1?(s=n[a],h=n[0]):(s=n[a],h=n[a+1]),o=t.getAngleByP(e,s,h),Math.abs(o-180)<.2&&(u=!0),i+=o}return u?r=2:!u&&Math.abs(i-360)<.2?r=1:Math.abs(i-360)>.2&&(r=3),r}},{key:"clonePointArr",value:function(t){if(!t)return null;for(var e=[],n=0;n<t.length;n++)e.push(t[n].clone());return e}},{key:"checkArrEqual",value:function(e,n,r){void 0===r&&(r=5),e=t.clonePointArr(e),n=t.clonePointArr(n);var i=t.getRectCen(t.getPArrRect(e)),o=t.getRectCen(t.getPArrRect(n)),u=o.x-i.x,a=o.y-i.y,s=void 0,h=void 0;for(s=0;s<e.length;s++){var f=e[s];f.x+=u,f.y+=a}for(s=0;s<e.length;s++){var v=e[s],c=!1;for(h=0;h<n.length;h++)if(t.getPointLen(v,n[h])<=r){c=!0;break}if(!c)return!1}return{chaX:u,chaY:a}}},{key:"checkPointEqual",value:function(e,n,r){return void 0===r&&(r=.1),t.getPointLen(e,n)<r}},{key:"checkPolygonPointArr2",value:function(t,e){for(var n=!1,r=0,i=0,o=e.length,u=0,a=o-1;u<o;a=u++){var s=(t.x-e[a].x)*(e[u].y-e[a].y)-(t.y-e[a].y)*(e[u].x-e[a].x);s>0?++r:s<0&&++i}return 0!==r&&0!==i||(n=!0),n}},{key:"drawPolygonPArr",value:function(t,e){t.moveTo(e[0].x,e[0].y),$.each(e,(function(n){n>0&&t.lineTo(e[n].x,e[n].y)})),t.lineTo(e[0].x,e[0].y)}},{key:"vec3ToVec2",value:function(t){return nape.geom.Vec2.get(t.zpp_inner.x,t.zpp_inner.y)}},{key:"getJiao_polygon_line",value:function(e,n,r){for(var i=[],o=0;o<r.length;o++){var u=r[o],a=o===r.length-1?r[0]:r[o+1];if(!t.isPingxing(u,a,e,n)){var s=t.getJiaoP(e,n,u,a);t.checkInLineAB(s,u,a,.1)&&i.push(s)}}return i}},{key:"containtsP",value:function(e,n,r){void 0===r&&(r=.1);for(var i=!1,o=0;o<e.length;o++)if(t.getPointLen(e[o],n)<r){i=!0;break}return i}},{key:"getNearP",value:function(e,n){var r=1e5,i=void 0,o=void 0;for(o=0;o<e.length;o++){var u=e[o],a=t.getPointLen(n,u);a<r&&(r=a,i=u)}return i}},{key:"checkPolygonPointArr3",value:function(t,e){if(null===e)return!1;var n=e.length,r=0,i=void 0,o=void 0,u=0;for(i=e[0],r=1;r<=n;r++)o=e[r%n],t.y>Math.min(i.y,o.y)&&t.y<=Math.max(i.y,o.y)&&t.x<=Math.max(i.x,o.x)&&i.y!==o.y&&(i.x===o.x||t.x<=(t.y-i.y)*(o.x-i.x)/(o.y-i.y)+i.x)&&u++,i=o;return u%2!=0}},{key:"centerRotate",value:function(t,e){var n=t.rotation;t.rotation=0;var r=t.width,i=t.height;t.rotation=n;var o=t.localToGlobal(new u(r/2,i/2));t.rotation=e;var a=t.localToGlobal(new u(r/2,i/2)),s=o.subtract(a),h=t.transform.matrix;h.translate(s.x,s.y),t.transform.matrix=h}},{key:"getAllChildren",value:function(t){if(!t)return null;for(var e=[],n=0;n<t.numChildren;n++)e.push(t.getChildAt(n));return e}},{key:"getFnName",value:function(t){var e=t.toString().replace(/[\s\?]*/g,""),n=(e=e.substring(0,e.length>=50?50:e.length)).match(/^function([^\(]+?)\(/);if(n&&n[1])return n[1];var r=t.caller.toString().replace(/[\s\?]*/g,""),i=r.indexOf(e);return(n=r.substring(i-30,i).match(/([^\=]+?)\=/))&&n[1]?n[1]:"anonymous"}},{key:"touchIsType",value:function(t,e){if(t===e)return!0;switch(e){case TouchEvent.TOUCH_BEGIN:return"touchstart"===t;case TouchEvent.TOUCH_MOVE:return"touchmove"===t;case TouchEvent.TOUCH_END:return"touchend"===t;case TouchEvent.TOUCH_END_OUDSIDE:return"touchendoutside"===t;case TouchEvent.TAP:return"tap"===t}return!1}},{key:"addDenyDB",value:function(e){s.addSingleArr(t.__bdArr,e)}},{key:"removeDenyDB",value:function(e){s.removeValueFromArray(t.__bdArr,e)}},{key:"_checkIsDBMC",value:function(e){return s.arrayContainsValue(t.__bdArr,e)}},{key:"addDomTouch",value:function(e,n,r,i){if(e&&n){var o="_M"+t.getUnique()+"_";return n.mc=e,n.this=r,e[o]=n,e[o].downTime=(new Date).getTime(),e[o].downP=new u,e.$document=$(document),e[0]&&(e[0][o]=e[o]),i||(i={time:500,dis:15}),i&&(n.outData=i,n.outData.canTab=!0),n.tab&&(e[o+"touchTab"]=function(t){t.t="tab",this[o]&&this[o].tab.call(this[o].this?this[o].this:this,t,this)},e.on("click."+o+" touchend.tab"+o,e[o+"touchTab"])),e[o+"touchStart"]=function(e){if(this[o]){this.$document.on("mousemove."+o+" touchmove."+o,this[o+"touchMove"]),e.t="begin",this._isDown=!0;var n=void 0,r=void 0,i=!1;t._checkIsDBMC(this)&&(t.__isDenyDB=!0),this[o].dbtab&&(n=(new Date).getTime()-this[o].downTime,r=Math.abs(t.getPointLen(this[o].downP,t.getCanvasP(e))),n<300&&r<50&&(i=!0,this[o].dbtab.call(this[o].this?this[o].this:this,e,this))),this[o].downTime=(new Date).getTime(),this[o].downP=t.getSPPoint(t.getMouseXY(e)),!i&&this[o].begin&&(!this[o].isAddDB||this[o].isAddDB&&!t.__isDenyDB)&&this[o].begin.call(this[o].this?this[o].this:this,e,this)}}.bind(e),e[o+"touchMove"]=function(e){if(this._isDown&&(e.t="move",this[o])){if(t._checkIsDBMC(this)&&(t.__isDenyDB=!0),this[o]&&(e.outData=this[o].outData,this[o].outData)){var n=Math.abs(t.getPointLen(this[o].downP,t.getMouseXY(e)));this[o].outData.dis&&n>this[o].outData.dis&&(this[o].outData.canTab=!1)}this._isDown&&this[o]&&this[o].move&&(!this[o].isAddDB||this[o].isAddDB&&!t.__isDenyDB)&&this[o].move.call(this[o].this?this[o].this:this,e,this),this[o]&&this[o].move2&&(!this[o].isAddDB||this[o].isAddDB&&!t.__isDenyDB)&&this[o].move2.call(this[o].this?this[o].this:this,e,this)}}.bind(e),e[o+"touchEnd"]=function(e){e.t="end",this[o]&&(this.$document.off("mousemove."+o,this[o+"touchMove"]),this.$document.off("touchmove."+o,this[o+"touchMove"]),this._isDown=!1,n.end&&(!this[o].isAddDB||this[o].isAddDB&&!t.__isDenyDB)&&this[o].end.call(this[o].this?this[o].this:this,e,this),this[o]&&this[o].isAddDB&&t.__isDenyDB&&(t.__isDenyDB=!1))}.bind(e),e.on("mousedown."+o+" touchstart."+o,e[o+"touchStart"]),e.on("mouseup."+o+" touchend."+o,e[o+"touchEnd"]),o}}},{key:"removeDomTouch",value:function(t,e){t&&e&&(t[e+"touchTab"]&&(t.off("click."+e+" touchend.tab"+e,t[e+"touchTab"]),delete t[e+"touchTab"]),t.off("mousedown."+e+" touchstart."+e,t[e+"touchStart"]),t.$document&&t.$document.off("mousemove."+e+" touchmove."+e,t[e+"touchMove"]),t.off("mouseup."+e+" touchend."+e,t[e+"touchEnd"]),delete t[e+"touchStart"],delete t[e+"touchMove"],delete t[e+"touchEnd"],t[e]&&delete t[e])}},{key:"addSVGTouch",value:function(e,n,r,i){if(e&&n){var o="_MSVG"+t.getUnique()+"_";return n.this=r=void 0===r?e:r,n.mc=e,e.data(o,n),e.data("funcID",o),i||(i={time:300,dis:15}),i&&(n.outData=i,n.outData.canTab=!0),n._svg_tabFunc=function(t){var e=this.data("funcID"),n=this.data(e);t.t="tab",t.mc=this,n.tab.call(n.this,t)},n._svg_beginFunc=function(t){var e=this.data("funcID");this._isDown=!0;var n=this.data(e);t.t="begin",t.mc=this,n.begin.call(n.this,t)},n._svg_moveFunc=function(t){if(this._isDown){var e=this.data("funcID"),n=this.data(e);t.t="move",t.mc=this,n.move.call(n.this,t)}},n._svg_endFunc=function(t){var e=this.data("funcID"),n=this.data(e);this._isDown=!1,t.t="end",t.mc=this,n.end.call(n.this,t)},n.tab&&e.click(n._svg_tabFunc),t.isMobileBrowser()?(n.begin&&e.touchstart(n._svg_beginFunc),n.move&&e.touchmove(n._svg_moveFunc),n.end&&e.touchend(n._svg_endFunc)):(n.begin&&e.mousedown(n._svg_beginFunc),n.move&&e.mousemove(n._svg_moveFunc),n.end&&e.mouseup(n._svg_endFunc)),o}}},{key:"isMobileBrowser",value:function(){var t=!1;if(navigator){var e=navigator.userAgent;t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)}return t}},{key:"removeSVGTouch",value:function(t,e){if(t&&e){var n=t.data(e);n.tab&&t.unclick(n._svg_tabFunc),n.begin&&(t.untouchstart(n._svg_beginFunc),t.unmousedown(n._svg_beginFunc)),n.move&&(t.untouchmove(n._svg_moveFunc),t.unmousemove(n._svg_moveFunc)),n.end&&(t.untouchend(n._svg_endFunc),t.unmouseup(n._svg_endFunc)),t.data(e,null)}}},{key:"addTouch",value:function(e,n,r,i){if(n){var o="_M"+t.getUnique()+"_";return n.mc=e,n.this=r,e[o]=n,e[o].downTime=(new Date).getTime(),e[o].downP=new u,i||(i={time:300,dis:15}),i&&(n.outData=i,n.outData.canTab=!0),n.tab&&(e[o+"touchTab"]=function(e){if(e.t="tab",this[o]){if(this[o].outData){var n=(new Date).getTime()-this[o].downTime;this[o].outData.time>0&&this[o].outData.time&&n>this[o].outData.time&&(this[o].outData.canTab=!1)}(!this[o].outData||this[o].outData&&this[o].outData.canTab)&&this[o].tab.call(this[o].this?this[o].this:this,e,this),this[o]&&this[o].outData&&(this[o].outData.canTab=!0,this[o].outData.downP=t.getSPPoint(t.getMouseXY(e)))}},e.addEventListener(TouchEvent.TOUCH_END,e[o+"touchTab"])),e[o+"touchStart"]=function(e){e.t="begin",this._isDown=!0;var n=void 0,r=void 0,i=!1;t._checkIsDBMC(this)&&(t.__isDenyDB=!0),this[o].dbtab&&(n=(new Date).getTime()-this[o].downTime,r=Math.abs(t.getPointLen(this[o].downP,t.getMouseXY(e))),n<300&&r<50&&(i=!0,this[o].dbtab.call(this[o].this?this[o].this:this,e,this))),this[o].downTime=(new Date).getTime(),this[o].downP=t.getSPPoint(t.getMouseXY(e)),!i&&this[o].begin&&this[o].begin.call(this[o].this?this[o].this:this,e,this)},e.addEventListener(TouchEvent.TOUCH_BEGIN,e[o+"touchStart"]),e[o+"touchMove"]=function(e){if(e.t="move",this[o].globalMove&&this[o].globalMove.call(this[o].this?this[o].this:this,e,this),this._isDown){if(t._checkIsDBMC(this)&&(t.__isDenyDB=!0),e.outData=this[o].outData,this[o].outData){var n=Math.abs(t.getPointLen(this[o].downP,t.getMouseXY(e)));this[o].outData.dis&&n>this[o].outData.dis&&(this[o].outData.canTab=!1)}this[o].move&&this[o].move.call(this[o].this?this[o].this:this,e,this)}},e.addEventListener(TouchEvent.TOUCH_MOVE,e[o+"touchMove"]),e[o+"touchEnd"]=function(t){t.t="end",this._isDown=!1,n.end&&this[o].end.call(this[o].this?this[o].this:this,t,this)},e.addEventListener(TouchEvent.TOUCH_END,e[o+"touchEnd"]),e.addEventListener(TouchEvent.TOUCH_END_OUTSIDE,e[o+"touchEnd"]),o}}},{key:"removeTouch",value:function(t,e){if(t&&e){if(t[e]){var n=t[e],r=!0,i=!1,o=void 0;try{for(var u,a=Object.keys(n)[Symbol.iterator]();!(r=(u=a.next()).done);r=!0)n[u.value]=null}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}}delete t[e],t[e+"touchTab"]&&(t.removeEventListener(TouchEvent.TOUCH_END,t[e+"touchTab"]),delete t[e+"touchTab"]),t.removeEventListener(TouchEvent.TOUCH_BEGIN,t[e+"touchStart"]),delete t[e+"touchStart"],t.removeEventListener(TouchEvent.TOUCH_MOVE,t[e+"touchMove"]),delete t[e+"touchMove"],t[e+"touchEnd"]&&(t.removeEventListener(TouchEvent.TOUCH_END,t[e+"touchEnd"]),t.removeEventListener(TouchEvent.TOUCH_END_OUTSIDE,t[e+"touchEnd"]),delete t[e+"touchEnd"]),t[e]&&(t[e].this=null)}}},{key:"vec2Length",value:function(t){return Math.sqrt(t.get_x()*t.get_x()+t.get_y()*t.get_y())}},{key:"vec3Length",value:function(t){return Math.sqrt(t.zpp_inner.x*t.zpp_inner.x+t.zpp_inner.y*t.zpp_inner.y+t.zpp_inner.z*t.zpp_inner.z)}},{key:"getRayPoint",value:function(t,e,n){var r=u.interpolate(e,t,1/u.distance(t,e));return new u(t.x+(r.x-t.x)*n,t.y+(r.y-t.y)*n)}},{key:"addDrag",value:function(e,n,r,i,o){i||(i=e),n&&void 0===r.dragRectEnable&&(r.dragRectEnable=n&&n.width>=0&&n.height>=0);var a=t.addTouch(e,{begin:function(n){e[a+"_dragData"].isDown=!0,t.setSPPoint(e[a+"_dragData"].p,t.getMouseXY(n)),r&&r.begin&&r.begin.call(i,n)},move:function(o){if(e[a+"_dragData"].isDown){var u=t.getMouseXY(o).x-e[a+"_dragData"].p.x,s=t.getMouseXY(o).y-e[a+"_dragData"].p.y;if(e.getMScale){var h=e.getMScale();u/=h.x,s/=h.y}var f=e.x+u,v=e.y+s;r&&r.dragRectEnable&&(f=t.range(f,n.x,n.x+n.width),v=t.range(v,n.y,n.y+n.height)),e[a].isLock||e.x===f&&e.y===v||(t.setSPPointXY(e,f,v),t.setSPPoint(e[a+"_dragData"].p,t.getMouseXY(o)),r&&r.move&&(o.chaX=u,o.chaY=s,r.move.call(i,o)))}},end:function(t){e[a+"_dragData"].isDown=!1,r&&r.end&&r.end.call(i,t)},tab:function(t){r&&r.tab&&r.tab.call(i,t)},dbtab:function(t){r&&r.dbtab&&r.dbtab.call(i,t)}},i,o);return e[a+"_dragData"]={p:new u(0,0)},a}},{key:"removeDrag",value:function(e,n){delete e[n+"_dragData"],t.removeTouch(e,n)}},{key:"setButton",value:function(e,n,r){if(!e.totalFrames)throw new Error("it is not MovieClip");if(2!==e.totalFrames)throw new Error("totalFrames is not equals 2");e.____setButton_touchID=t.addTouch(e,{begin:function(){this.currentFrame=1},end:function(){this.currentFrame=0},tab:function(){n&&n.call(r||this,{target:this})}},null,{time:-1})}},{key:"removeButton",value:function(e){e&&t.removeTouch(e,e.____setButton_touchID)}},{key:"setToggle",value:function(e,n,r){e.data=n,e.data.target=e;var i=r||e;e.toggled&&(e.x+=e.data.w),t.addTouch(e,{tab:function(){e.data.toggled=!e.data.toggled,e.data.toggled?e.x+=e.data.w:e.x-=e.data.w,e.data.toggle&&e.data.toggle.call(i,e.data.toggled)}})}},{key:"writeTxt",value:function(t,e){var n=new Blob([e],{type:"text/plain;charset=utf-8"});FileSaver.saveAs(n,t)}},{key:"setObjProperties",value:function(t,e){for(var n in e)t[n]=e[n]}},{key:"getAbsoluteUrl",value:function(t){var e=document.createElement("A");return e.href=t,e.href}},{key:"drawDashed",value:function(e,n,r,i,o){i||(i=5),o||(o=5);for(var a=t.getPointLen(n,r),s=0,h=void 0,f=void 0;s<a;)h=u.interpolate(r,n,s/a),(s+=i)>a&&(s=a),f=u.interpolate(r,n,s/a),e.moveTo(h.x,h.y),e.lineTo(f.x,f.y),s+=o}},{key:"drawDashedRect",value:function(e,n,r,i,o,u,a){t.drawDashed(e,n,r,u,a),t.drawDashed(e,r,i,u,a),t.drawDashed(e,i,o,u,a),t.drawDashed(e,o,n,u,a)}},{key:"drawSVGDashed",value:function(e,n,r,i){r||(r=5),i||(i=5);for(var o=t.getPointLen(e,n),a=0,s=void 0,h=void 0,f="";a<o;)s=u.interpolate(n,e,a/o),(a+=r)>o&&(a=o),h=u.interpolate(n,e,a/o),f+="M"+s.x+" "+s.y,f+="L"+h.x+" "+h.y,a+=i;return f}},{key:"drawSVGDashedRect",value:function(e,n,r,i,o,u){var a="";return a+=t.drawSVGDashed(e,n,o,u),a+=t.drawSVGDashed(n,r,o,u),(a+=t.drawSVGDashed(r,i,o,u))+t.drawSVGDashed(i,e,o,u)}},{key:"parseXML",value:function(t){return(new h).parseXML(t)}},{key:"removeAllChild",value:function(t){if(t&&t.children.length)for(;t.children.length>0;)t.removeChildAt(0)}},{key:"get_quadraticCurveTo_points",value:function(t,e,n,r,i,o){for(var a=void 0,s=void 0,h=[],f=t,v=e,c=0,l=1;l<=20;++l)a=f+(n-f)*(c=l/20),h.push(new u(a+(n+(i-n)*c-a)*c,(s=v+(r-v)*c)+(r+(o-r)*c-s)*c));return h}},{key:"extends",value:function(t,e){t.prototype=Object.create(e.prototype),t.constructor=t}},{key:"range",value:function(t,e,n){return t=Math.max(e,t),Math.min(n,t)}},{key:"getValidAngle",value:function(t){var e=Math.abs(t);return t<0?360*Math.floor(e/360+1)+t:0===e?0:e%360}},{key:"angleSplitLine",value:function(t,e,n,r){var i=new u(e.x-t.x,e.y-t.y),o=new u(r.x-n.x,r.y-n.y),a=Math.sqrt(i.x*i.x+i.y*i.y),s=Math.sqrt(o.x*o.x+o.y*o.y),h=new u(1/a*i.x,1/a*i.y),f=new u(1/s*o.x,1/s*o.y);return new u(h.x+f.x,h.y+f.y)}},{key:"getValidHu",value:function(e){return t.toHu(t.getValidAngle(t.toAngle(e)))}},{key:"stopPropagation",value:function(e){var n=function(t){t.stopPropagation()};t.addTouch(e,{tab:n,begin:n,move:n,end:n})}},{key:"GetObjPos",value:function(t){var e=t,n=new u(e.offsetLeft-e.scrollLeft,e.offsetTop-e.scrollTop);for(e=e.offsetParent;e;)n.x+=e.offsetLeft-e.scrollLeft,n.y+=e.offsetTop-e.scrollTop,e=e.offsetParent;return n}},{key:"containsPoint",value:function(t,e){return!!t.getBounds().contains(e.x,e.y)}},{key:"getMouseXY",value:function(t,e,n){void 0===e&&(e=0),n||(n="changedTouches");var r=void 0;if(t.data&&t.data.global)r=t.data.global;else if(void 0===t.clientX){var i=void 0;t[n]?(i=this.getIndexFromIdentifier(t[n],e),r=new u(t[n][i].clientX,t[n][i].clientY)):(i=this.getIndexFromIdentifier(t.originalEvent[n],e),r=new u(t.originalEvent[n][i].clientX,t.originalEvent[n][i].clientY))}else r=new u(t.clientX,t.clientY);return r.clone()}},{key:"getIndexFromIdentifier",value:function(t,e){var n=0;for(n=0;n<t.length;n++)if(e===t[n].identifier)return n;return 0}},{key:"getCanvasPToMouseP",value:function(e){var n=t.getCanvasP(e),r={data:{}};return r.data.global=new u(n.x,n.y),r.type=e.type,r}},{key:"getMousePToCanvasP",value:function(e){var n=t.getMouseXY(e),r=$("#canvasID").offset(),i=new u(r.left,r.top),o=nb.PhysicsMain.ToolScale,a=new u(n.x*o,n.y*o);a.x+=i.x,a.y+=i.y;var s={data:{}};return s.data.global=new u(a.x,a.y),s.type=e.type,s}},{key:"getCanvasP",value:function(e,n,r){var i=$("#canvasID").offset(),o=new u(i.left,i.top),a=t.getMouseXY(e,n,r),s=new u(a.x-o.x,a.y-o.y);return s.x=s.x/nb.PhysicsMain.ToolScale,s.y=s.y/nb.PhysicsMain.ToolScale,s}},{key:"getCanvasP_sdk",value:function(e,n,r){var i=new u(0,0),o=t.getMouseXY(e,n,r);return new u(o.x-i.x,o.y-i.y)}},{key:"os",value:function(){var t=navigator.userAgent.toLowerCase();return{isIpad:/ipad/.test(t),isIphone:/iphone os/.test(t),isAndroid:/android/.test(t),isWindowsCe:/windows ce/.test(t),isWindowsMobile:/windows mobile/.test(t),isWin2K:/windows nt 5.0/.test(t),isXP:/windows nt 5.1/.test(t),isVista:/windows nt 6.0/.test(t),isWin7:/windows nt 6.1/.test(t),isWin8:/windows nt 6.2/.test(t),isWin81:/windows nt 6.3/.test(t),isWinPC:/windows nt/.test(t)}}},{key:"RGBToHex",value:function(t){var e=t;if(/^(rgb|RGB)/.test(e)){for(var n=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),r="",i=0;i<n.length;i++){var o=Number(n[i]).toString(16);1===o.length&&(o="0"+o),r+=o}return r}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e))return e;var u=e.replace(/#/,"").split("");if(6===u.length)return e;if(3===u.length){for(var a="",s=0;s<u.length;s+=1)a+=u[s]+u[s];return a}}},{key:"isColorDeep",value:function(e){var n=t.retrieveRGBComponent(e);return!(.299*n[0]+.587*n[1]+.114*n[2]>=192)}},{key:"getDomColor",value:function(t){return"#"+Number(t).toString(16)}},{key:"linePath",value:function(t,e,n){if(void 0===n&&(n=!0),!t||!e||e.length<3)return null;t.moveTo(e[0].x,e[0].y);var r=void 0,i=e.length;for(r=1;r<i;r++)t.lineTo(e[r].x,e[r].y);return n&&t.lineTo(e[0].x,e[0].y),t}},{key:"getRoundP",value:function(e,n,r){var i=t.getXianDianByDis(10,!0,n,e),o=t.getXianDianByDis(10,!0,n,r);return t.toHu(t.getAngleByP(e,n,r)),[e,i,o,r]}},{key:"addTicker",value:function(t,e,n){void 0===n&&(n=!0);var r=window.PIXI,i=void 0;return r&&((i=new r.ticker.Ticker).$this=e,i.add((function(){i.$this?t.call(i.$this):t()})),n&&i.start()),i}},{key:"removeTicker",value:function(t){t&&(t.stop(),t.$this=null,delete t.$this,t=null)}},{key:"delayCallFunc",value:function(e,n,r,i){void 0===i&&(i=50),r||(r=this),e.call(r)?n.call(r):setTimeout((function(){t.delayCallFunc(e,n,r,i)}),i)}},{key:"makeOrStr",value:function(t,e){var n=void 0,r=void 0,i=e.length,o=t.length,u="",a=void 0,s=void 0;for(n=0;n<i;n++){for(r=0;r<o;r++)a=t.charCodeAt(r),s=e.charCodeAt(n)^a;u+=String.fromCharCode(s)}return u}},{key:"standardletiance",value:function(t){var e=void 0,n=t.length,r=0;for(e=0;e<n;e++)r+=t[e];var i=r/n,o=0;for(e=0;e<n;e++){var u=t[e]-i;o+=u*u}return Math.sqrt(o/n)}},{key:"hitTestPoint",value:function(t,e,n){var r=t.getBounds();return n||(e=t.toGlobal(e)),r.contains(e.x,e.y)}},{key:"alignPivot",value:function(t,e,n){var r=e||"center",i=n||"center";"left"===r?t.pivot.x=0:"center"===r?t.pivot.x=t.width/2:"right"===r&&(t.pivot.x=t.width),"top"===i?t.pivot.y=0:"center"===i?t.pivot.y=t.height/2:"bottom"===i&&(t.pivot.y=t.height)}},{key:"clone",value:function(e){if(null===e||"object"!==(void 0===e?"undefined":i(e)))return e;if(e instanceof Date){var n=new Date;return n.setTime(e.getTime()),n}if(e instanceof Array){var r=[],o=void 0,u=e.length;for(o=0;o<u;++o)r[o]=t.clone(e[o]);return r}if(e instanceof Object){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=t.clone(e[s]));return a}throw new Error("Unable to copy obj! Its type isn't supported.")}},{key:"equals",value:function(e,n){if(e===n)return!0;if(null==n||"object"!==(void 0===n?"undefined":i(n)))return!1;var r=0,o=0;for(var u in e)r++;for(var a in n)o++;if(r!==o)return!1;if(n.constructor===e.constructor){for(var s in e)if("object"===i(e[s])){if(!t.equals(e[s],n[s]))return!1}else if("function"==typeof e[s]){if(!t.equals(e[s].toString(),n[s].toString()))return!1}else if(e[s]!==n[s])return!1;return!0}return!1}},{key:"getFirstChildren",value:function(t){for(var e=[],n=t.getElementsByTagName("*"),r=0,i=n.length;r<i;++r)if(1===n[r].nodeType){var o=n[r].parentNode;1===o.nodeType?o===t&&(e[e.length]=n[r]):o.parentNode===t&&(e[e.length]=n[r])}return e}},{key:"setInputReg",value:function(t,e){var n=this;$("#"+t).keyup((function(){var t=n.value.replace(e,"");$(n).val(t)}))}},{key:"debounce",value:function(t,e,n,r){void 0===e&&(e=250);var i=void 0,o=r||this;return function(){var r=o||this,u=arguments,a=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||t.apply(r,u)}),e),a&&t.apply(r,u)}}},{key:"getAddPIXIBMP",value:function(t,e){if(!t||!t.children||!e||0===e.length)return null;var n=null;return each(t.children,(function(t,r){if(r&&r._nbData_&&r._nbData_.libName===e)return n=r,!1})),n}},{key:"checkValidMT",value:function(t){return!t.type||t.type.indexOf("touch")>-1}},{key:"fullScreen",value:function(){var t=document.documentElement,e=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(void 0!==e&&e)e.call(t);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}},{key:"exitFullScreen",value:function(){var t=document,e=t.cancelFullScreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.exitFullScreen;if(void 0!==e&&e)e.call(t);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}},{key:"listenFullscreen",value:function(t,e){var n=void 0!==e?e:this,r=document.documentElement;r.requestFullscreen?document.addEventListener("fullscreenchange",(function(){t.call(n,document.fullscreen)}),!1):r.mozRequestFullScreen?document.addEventListener("mozfullscreenchange",(function(){t.call(n,document.mozFullScreen)}),!1):r.webkitRequestFullscreen?document.addEventListener("webkitfullscreenchange",(function(){t.call(n,document.webkitIsFullScreen)}),!1):r.msRequestFullscreen&&document.addEventListener("msfullscreenchange",(function(){t.call(n,document.msFullscreenElement)}),!1)}},{key:"setRopePoints",value:function(t,e){t.points=e,t.vertices=new Float32Array(4*e.length),t.uvs=new Float32Array(4*e.length),t.colors=new Float32Array(2*e.length),t.indices=new Uint16Array(2*e.length),(t._refresh||t.refresh).call(t)}},{key:"checkIsWinXP",value:function(){var t="Win32"===navigator.platform||"Windows"===navigator.platform,e=!1,n=navigator.userAgent;return t&&(e=n.indexOf("Windows NT 5.1")>-1||n.indexOf("Windows Xp")>-1),e}},{key:"checkIsIE",value:function(){return!!window.ActiveXObject||"ActiveXObject"in window}},{key:"killTweenMax",value:function(e,n){if(e)if(e instanceof Array)for(;e.length;)t.killTweenMax(e.pop());else if(TweenMax.killTweensOf(e.target,!1,null),!n){for(var r in e.prevNode=null,e.nextNode=null,e.target=null,e.vars)e.vars[r].this&&(e.vars[r].this=null),e.vars[r]=null;e.data=null,e=null}}},{key:"getObjFromJsonStr",value:function(t){var e=null;try{var n="[object String]"===Object.prototype.toString.call(t)?JSON.parse(t):t;"[object Object]"===Object.prototype.toString.call(n)&&(e=n)}catch(t){e=null}return e}},{key:"getUrlPara",value:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=location.href.substring(location.href.indexOf("?")+1).match(e);return null!=n?n[2]:null}}]),t}();f.MIN=1e-6,f.__bdArr=[],f.__isDenyDB=!1,e.exports=f},{"./ArrayUtil":1,"./NumberUtilities":10,"./ObjTree":11,"./Point":12,"./Rectangle":14}],8:[function(t,e){var n=function(){function t(){r(this,t),this.ERROR_MATRIX_NOT_SQUARE="Matrix must be square.",this.ERROR_VECTOR_NOT_2D="Only two dimensional operations are supported at this time."}return o(t,null,[{key:"_check2DVector",value:function(t){if(2!==t.length)throw new Error(this.ERROR_VECTOR_NOT_2D)}},{key:"deepCopy",value:function(t){if(!Array.isArray(t))throw new Error("Input must be a Matrix.");if(void 0===t[0][0])throw new Error("Input cannot be a vector.");for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n].slice();return e}},{key:"isSquare",value:function(t){if(!Array.isArray(t))throw new Error("Input must be a Matrix.");if(void 0===t[0][0])throw new Error("Input cannot be a vector.");for(var e=t.length,n=0;n<e;n++)if(t[n].length!==e)return!1;return!0}},{key:"addition",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw new Error("Matrix mismatch");var n=new Array(t.length),r=void 0;if(t[0].length)for(r=0;r<t.length;r++){n[r]=new Array(t[r].length);for(var i=0;i<t[r].length;i++)n[r][i]=t[r][i]+e[r][i]}else for(r=0;r<t.length;r++)n[r]=t[r]+e[r];return n}},{key:"traceMatrix",value:function(t){var e=void 0,n=void 0;if(t[0].length)for(e=0;e<t.length;e++){n="";for(var r=0;r<t[e].length;r++)n+=t[e][r]+"\t";console.log(n)}else{for(n="",e=0;e<t.length;e++)n+=t[e]+"\t";console.log(n)}}},{key:"subtraction",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw new Error("Matrix mismatch");var n=new Array(t.length),r=void 0;if(t[0].length)for(r=0;r<t.length;r++){n[r]=new Array(t[r].length);for(var i=0;i<t[r].length;i++)n[r][i]=t[r][i]-e[r][i]}else for(r=0;r<t.length;r++)n[r]=t[r]-e[r];return n}},{key:"scalar",value:function(t,e){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)t[n][r]=e*t[n][r];return t}},{key:"transpose",value:function(t){for(var e=new Array(t[0].length),n=0;n<t[0].length;n++){e[n]=new Array(t.length);for(var r=0;r<t.length;r++)e[n][r]=t[r][n]}return e}},{key:"identity",value:function(t){for(var e=new Array(t),n=0;n<t;n++){e[n]=new Array(t);for(var r=0;r<t;r++)e[n][r]=n===r?1:0}return e}},{key:"dotproduct",value:function(t,e){if(t.length!==e.length)throw new Error("Vector mismatch");for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}},{key:"multiply",value:function(e,n){if(e[0].length!==n.length)throw new Error("Matrix mismatch");for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=new Array(n[0].length);for(var o=t.transpose(n),u=0;u<r.length;u++)for(var a=0;a<r[u].length;a++)r[u][a]=t.dotproduct(e[u],o[a]);return r}},{key:"determinant",value:function(e){var n=e.length,r=e[0].length,i=0,o=void 0,u=void 0,a=void 0,s=void 0;if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);if(1===n)return e[0][0];if(2===n)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(u=0;u<r;u++){for(a=e[0][u],s=e[0][u],o=1;o<n;o++)s*=e[o][((u+o)%r+r)%r],a*=e[o][((u-o)%r+r)%r];i+=s-a}return i}},{key:"lupDecomposition",value:function(e){if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);var n=e.length,r=t.deepCopy(e),i=t.transpose(t.identity(n)),o=void 0,u=new Array(n);this.getL=function(e){for(var n=e[0].length,r=t.identity(n),i=0;i<n;i++)for(var o=0;o<n;o++)i>o&&(r[i][o]=e[i][o]);return r},this.getU=function(e){for(var n=e[0].length,r=t.identity(n),i=0;i<n;i++)for(var o=0;o<n;o++)i<=o&&(r[i][o]=e[i][o]);return r};for(var a=0;a<n;a++){var s=void 0;for(s=0;s<n;s++)u[s]=r[s][a];for(s=0;s<n;s++){o=r[s];for(var h=Math.min(s,a),f=0,v=0;v<h;v++)f+=o[v]*u[v];o[a]=u[s]-=f}var c=a;for(s=a+1;s<n;s++)Math.abs(u[s])>Math.abs(u[c])&&(c=s);if(c!==a&&(r=t.rowSwitch(r,c,a),i=t.rowSwitch(i,c,a)),a<n&&0!==r[a][a])for(s=a+1;s<n;s++)r[s][a]/=r[a][a]}return[this.getL(r),this.getU(r),i]}},{key:"rotate",value:function(e,n,r){t._check2DVector(e);var i="clockwise"===r?-1:1,o=n*(Math.PI/180),u=[[Math.cos(o),-1*i*Math.sin(o)],[i*Math.sin(o),Math.cos(o)]];return t.multiply(u,e)}},{key:"scale",value:function(e,n,r){return t._check2DVector(e),t.multiply([[n,0],[0,r]],e)}},{key:"shear",value:function(e,n,r){return t._check2DVector(e),t.multiply([[1,"xaxis"===r?n:0],["yaxis"===r?n:0,1]],e)}},{key:"affine",value:function(e,n,r){t._check2DVector(e);var i=t.multiply([[1,0,n],[0,1,r],[0,0,1]],[[e[0][0]],[e[1][0]],[1]]);return[[i[0][0]],[i[1][0]]]}},{key:"rowScale",value:function(t,e,n){for(var r=new Array(t.length),i=0;i<t.length;i++){r[i]=new Array(t[i].length);for(var o=0;o<t[i].length;o++)r[i][o]=i===e?n*t[i][o]:t[i][o]}return r}},{key:"rowSwitch",value:function(t,e,n){for(var r=new Array(t.length),i=0;i<t.length;i++){r[i]=new Array(t[i].length);for(var o=0;o<t[i].length;o++)r[i][o]=i===e?t[n][o]:i===n?t[e][o]:t[i][o]}return r}},{key:"rowAddMultiple",value:function(t,e,n,r){for(var i=new Array(t.length),o=0;o<t.length;o++){i[o]=new Array(t[o].length);for(var u=0;u<t[o].length;u++)o===n?i[n][u]=t[n][u]+r*t[e][u]:i[o][u]=t[o][u]}return i}},{key:"GaussJordanEliminate",value:function(t,e){for(var n=void 0===e?1e-10:e,r=t.length,i=t[0].length,o=-1,u=void 0,a=void 0,s=void 0;++o<r;){var h=o;for(u=o;++u<r;)Math.abs(t[u][o])>Math.abs(t[h][o])&&(h=u);var f=t[o];if(t[o]=t[h],t[h]=f,Math.abs(t[o][o])<=n)return t;for(u=o;++u<r;)for(s=t[u][o]/t[o][o],a=o-1;++a<i;)t[u][a]-=t[o][a]*s}for(o=r;--o>=0;){for(s=t[o][o],u=-1;++u<o;)for(a=i;--a>=o;)t[u][a]-=t[o][a]*t[u][o]/s;for(t[o][o]/=s,a=r-1;++a<i;)t[o][a]/=s}return t}},{key:"rowReduce",value:function(e,n){return t.GaussJordanEliminate(e,n)}},{key:"inverse",value:function(e){if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);var n=e.length,r=t.identity(n),i=void 0;for(i=0;i<n;i++)e[i]=e[i].concat(r[i]);for(e=t.GaussJordanEliminate(e),i=0;i<n;i++)e[i]=e[i].slice(n);return e}},{key:"getCol",value:function(t,e){var n=new Array(t.length);if(e<0)throw new Error("The specified column must be a positive integer.");if(e>=t[0].length)throw new Error("The specified column must be between 0 and the number of columns - 1.");for(var r=0;r<t.length;r++)n[r]=t[r][e];return n}},{key:"reorderRows",value:function(t,e){var n=[];if(void 0===e)throw new Error("A reordering array must be entered.");if(e.length!==t.length)throw new Error("The reordered matrix must have the same number of rows as the original Matrix.");for(var r=0;r<e.length;r++){if(e[r]<0)throw new Error("The desired order of the rows must be positive integers.");if(e[r]>=e.length)throw new Error("The desired order of the rows must start at 0 and end at the number of rows - 1.");n.push(t[e[r]])}return n}},{key:"reorderCols",value:function(e,n){var r=[];if(void 0===n)throw new Error("Please enter a desired reordering array.");if(n.length!==e[0].length)throw new Error("The reordered matrix must have the same number of columns as the original Matrix.");for(var i=0;i<n.length;i++){if(n[i]<0)throw new Error("The desired order of the columns must be positive integers.");if(n[i]>=n.length)throw new Error("The desired order of the columns must start at 0 and end at the number of columns - 1.");r.push(t.getCol(e,n[i]))}return t.transpose(r)}},{key:"reverseRows",value:function(e){for(var n=[],r=e.length-1;r>-1;r--)n.push(r);return t.reorderRows(e,n)}},{key:"reverseCols",value:function(e){for(var n=[],r=e.length-1;r>-1;r--)n.push(r);return t.reorderCols(e,n)}},{key:"zeros",value:function(t,e){var n=new Array(t);if(t<1||e<1)throw new Error("The matrix dimensions must be positive integers.");t=Math.ceil(t),e=Math.ceil(e);for(var r=0;r<t;r++){for(var i=new Array(e),o=0;o<e;o++)i[o]=0;n[r]=i}return n}},{key:"zigzag",value:function(e,n,r){if(e<=1)throw new Error("Matrix size must be at least 2x2.");e=Math.ceil(e);var i=t.zeros(e,e),o=function(t){var n=!1,r=e*e,i=1,o=1,u=void 0,a=void 0,s=void 0,h=void 0,f=void 0;for(t[0][0]=r,t[e-1][e-1]=i,h=1;h<e;h++)n?(r-=4*o,i+=4*o,o++):(r--,i++),t[0][h]=r,t[e-1][e-1-h]=i,n=!n;var v=!0;for(h=1;h<e;h++){for(s=t[u=0][a=h],f=1;f<h+1;f++)v?s-=1:s+=1,t[++u][--a]=s;v=!v}for(v=e%2==0,h=1;h<e-1;h++){for(s=t[u=e-1][a=h],f=1;f<e-h;f++)v?s--:s++,t[--u][++a]=s;v=!v}return t},u=function(e){return t.transpose(o(e))},a=function(e){return t.reverseCols(o(e))},s=function(e){return t.reverseCols(t.reverseRows(o(e)))},h=function(e){return t.transpose(s(e))};if("BR"===n&&"H"===r)return o(i);if("BR"===n&&"V"===r)return u(i);if("BL"===n&&"H"===r)return a(i);if("BL"===n&&"V"===r)return function(e){return t.reverseRows(h(a(e)))}(i);if("TR"===n&&"H"===r)return function(e){return t.reverseRows(o(e))}(i);if("TR"===n&&"V"===r)return function(e){return t.reverseRows(u(e))}(i);if("TL"===n&&"H"===r)return s(i);if("TL"===n&&"V"===r)return h(i);throw new Error("Enter the direction (V,H) and corner (BR,BL,TR,TL) correctly.")}},{key:"vectorNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length)throw new Error("Vector must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e)throw new Error("Norm order must be a number.");var n=t.length,r=0,i=void 0,o=void 0;switch(e=void 0===e?2:e){case 1/0:for(o=0;o<n;o++)(i=Math.abs(t[o]))>r&&(r=i);break;case-1/0:for(r=1/0,o=0;o<n;o++)(i=Math.abs(t[o]))<r&&(r=i);break;default:for(o=0;o<n;o++)r+=Math.pow(Math.abs(t[o]),e);r=Math.pow(r,1/e)}return r}},{key:"matrixNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length||!Array.isArray(t[0]))throw new Error("Matrix must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e&&null!==e)throw new Error("Norm order must be a number or null.");var n=t.length,r=t[0].length,i=0,o=void 0,u=void 0,a=void 0;switch(e=void 0===e?null:e){case 1/0:for(u=0;u<n;u++){for(o=0,a=0;a<r;a++)o+=Math.abs(t[u][a]);o>i&&(i=o)}break;case-1/0:for(i=1/0,u=0;u<n;u++){for(o=0,a=0;a<r;a++)o+=Math.abs(t[u][a]);o<i&&(i=o)}break;case 1:for(u=0;u<r;u++){for(o=0,a=0;a<n;a++)o+=Math.abs(t[a][u]);o>i&&(i=o)}break;case-1:for(i=1/0,u=0;u<r;u++){for(o=0,a=0;a<n;a++)o+=Math.abs(t[a][u]);o<i&&(i=o)}break;case null:for(u=0;u<n;u++)for(a=0;a<r;a++)i+=Math.pow(t[u][a],2);i=Math.pow(i,.5);break;case 2:case-2:throw new Error("Singular values are not yet supported in numbers.js.");default:for(u=0;u<n;u++)for(a=0;a<r;a++)i+=Math.pow(Math.abs(t[u][a]),e);i=Math.pow(i,1/e)}return i}},{key:"isUpperBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||t.length<2)throw new Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||e<0||e%1!=0)throw new Error("Upper bandwidth must be a nonzero integer.");for(var n=!0,r=t[0].length,i=0,o=e+1;o<r;o++){if(0!==t[i][o]){n=!1;break}i++}return n}},{key:"isLowerBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||t.length<2)throw new Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||e<0||e%1!=0)throw new Error("Lower bandwidth must be a nonzero integer.");for(var n=!0,r=t.length,i=0,o=e+1;o<r;o++){if(0!==t[o][i]){n=!1;break}i++}return n}},{key:"isRowDD",value:function(e){var n=e.length;if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var r=0;r<n;r++){var o=e[r],u=o[r],a=i(o,r);if(Math.abs(u)<a)return!1}return!0}},{key:"isStrictlyRowDD",value:function(e){if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=e.length,r=0;r<n;r++){var o=e[r],u=o[r],a=i(o,r);if(Math.abs(u)<=a)return!1}return!0}},{key:"isColumnDD",value:function(e){if(!t.isSquare)throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=e.length,r=0;r<n;r++){var o=t.getCol(e,r),u=o[r],a=i(o,r);if(Math.abs(u)<a)return!1}return!0}},{key:"isStrictlyColumnDD",value:function(e){if(!t.isSquare(e))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=e.length,r=0;r<n;r++){var o=t.getCol(e,r),u=o[r],a=i(o,r);if(Math.abs(u)<=a)return!1}return!0}}]),t}();n.clone=n.deepCopy,n.add=n.addition;var i=function(t,e){var n=0,r=void 0;for(r=0;r<e;r++)n+=Math.abs(t[r]);for(r=e+1;r<t.length;r++)n+=Math.abs(t[r]);return n};e.exports=n},{}],9:[function(t,e){var n=function(){function t(e,n){r(this,t),this._m=[],this._isError=!1,this._errorMes="",this._det=0,this._rows=e,this._columns=n,Object.defineProperty(this,"isError",{get:function(){return this._isError},set:function(t){this._isError=t}}),Object.defineProperty(this,"errorMes",{get:function(){return this._errorMes},set:function(t){this._errorMes=t}}),Object.defineProperty(this,"detMultiplier",{get:function(){return this._det}}),Object.defineProperty(this,"rows",{get:function(){return this._rows}}),Object.defineProperty(this,"columns",{get:function(){return this._columns}}),Object.defineProperty(this,"m",{get:function(){return this._m}});var i=e*n,o=void 0;for(o=0;o<i;o++)this._m.push(0)}return o(t,[{key:"identity",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,void(this._errorMes="Number of rows doesn't match number of columns");var t=void 0,e=void 0;for(t=0;t<this._rows;t++)for(e=0;e<this._columns;e++)this._m[e+t*this._columns]=t==e?1:0}},{key:"multiply",value:function(e){if(this._isError=!1,this._errorMes="",this._columns!=e.rows)return this._isError=!0,void(this._errorMes="Number of columns of the first matrix doesn't match with number of rows of the second matrix");var n=e.columns,r=new t(this._rows,n),i=void 0,o=void 0,u=void 0;for(i=0;i<this._rows;i++)for(o=0;o<n;o++)for(u=0;u<this._columns;u++)r._m[o+i*n]+=this._m[u+i*this._columns]*e._m[o+u*n];this._columns=n,this._m=r._m}},{key:"scalar",value:function(t){var e=this._rows*this._columns,n=void 0;for(n=0;n<e;n++)this._m[n]*=t}},{key:"add",value:function(t){if(this._isError=!1,this._errorMes="",this._rows!=t.rows||this._columns!=t.columns)return this._isError=!0,void(this._errorMes="Number of columns and rows of the first matrix doesn't match with number of columns and rows of the second matrix");var e=this._rows*this._columns,n=void 0;for(n=0;n<e;n++)this._m[n]+=t._m[n]}},{key:"substract",value:function(t){if(this._isError=!1,this._errorMes="",this._rows!=t.rows||this._columns!=t.columns)return this._isError=!0,void(this._errorMes="Number of columns and rows of the first matrix doesn't match with number of columns and rows of the second matrix");var e=this._rows*this._columns,n=void 0;for(n=0;n<e;n++)this._m[n]-=t._m[n]}},{key:"transpose",value:function(){var e=new t(this._columns,this._rows),n=void 0,r=void 0;for(n=0;n<this._rows;n++)for(r=0;r<this._columns;r++)e._m[n+r*this._rows]=this._m[r+n*this._columns];return e}},{key:"gaussElimination",value:function(){this._isError=!1,this._errorMes="";var t=void 0,e=void 0;if(this._det=1,this._rows>this._columns-1)return this._isError=!0,void(this._errorMes="This matrix doesn't represent any system of equations");var n=void 0,r=void 0,i=void 0;for(n=0;n<this._rows-1;n++){for(t=n,r=n+1;r<this._rows;r++)Math.abs(this._m[n+r*this._columns])>Math.abs(this._m[n+t*this._columns])&&(t=r);for(this.swapRows(n,t),r=n+1;r<this._rows;r++){if(0==this._m[n*(1+this._columns)])return this._isError=!0,void(this._errorMes="This system of equations doesn't have any solution");for(e=this._m[n+r*this._columns]/this._m[n*(1+this._columns)],i=n;i<this._columns;i++)this._m[i+r*this._columns]-=this._m[i+n*this._columns]*e}}return 0==this._m[(this._rows-1)*(1+this._columns)]?(this._isError=!0,void(this._errorMes="This system of equations doesn't have any solution")):void 0}},{key:"inverse",value:function(){this._isError=!1,this._errorMes="";var e=this._rows,n=new t(e,e);if(this._rows!=this._columns)return n.resize(0,0),n.isError=!0,n.errorMes="Number of rows doesn't match number of columns",n;var r=void 0,i=this.merge(n),o=i.columns,u=void 0;for(u=0;u<e;u++)i._m[u+e+u*o]=1;if(i.gaussElimination(),i.isError)return n.resize(0,0),n.isError=!0,n.errorMes=i.errorMes,n;for(var a=void 0,s=0;s<e;s++)for(u=e-1;u>=0;u--){for(r=0,a=u+1;a<e;a++)r+=i._m[a+u*o]*n._m[s+a*e];n._m[s+u*e]=(i._m[s+e+u*o]-r)/i._m[u*(1+o)]}return n}},{key:"gaussDeterminant",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,this._errorMes="Number of rows doesn't match number of columns",null;var e=this._rows,n=this.merge(new t(e,1));if(n.gaussElimination(),n.isError)return this._isError=!0,this._errorMes="Some unexpected error",0;this._det=n.detMultiplier;var r=n.columns,i=void 0;for(i=0;i<e;i++)this._det*=n._m[i*(1+r)];return this._det}},{key:"recursiveDeterminant",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,this._errorMes="Number of rows doesn't match number of columns",null;var t=this._rows,e=0,n=void 0,r=void 0,i=void 0,o=void 0,u=void 0,a=void 0;if(t>1)for(a=0;a<t;a++)0!=(u=this._m[a])&&(o=a%2==0?1:-1,0==a?i=this.fragment(1,1,t-1,this._columns-1):a==t-1?i=this.fragment(1,0,t-1,this.columns-2):(n=this.fragment(1,0,t-1,a-1),r=this.fragment(1,a+1,t-1,this._columns-1),i=n.merge(r)),e+=o*u*i.recursiveDeterminant());else e=_m[0];return e}},{key:"insert",value:function(t,e,n,r){var i=this._rows,o=this._columns;if(!(e>=i||n>=o)){var u=e+t.rows,a=n+t.columns;u=u>i?u:i,a=a>o?a:o,r&&this.resize(u,a);var s=(u=e+t.rows)<=this._rows?u:this._rows,h=(a=n+t.columns)<=this._columns?a:this._columns,f=void 0,v=void 0;for(f=e;f<s;f++)for(v=n;v<h;v++)this._m[v+f*this._columns]=t._m[v-n+(f-e)*t.columns]}}},{key:"resize",value:function(e,n){var r=this._rows,i=this._columns,o=new t(e,n),u=void 0,a=void 0;for(u=0;u<e;u++)if(u<r)for(a=0;a<n;a++)a<i&&(o._m[a+u*n]=this._m[a+u*i]);this._rows=e,this._columns=n,this._m=o._m}},{key:"fragment",value:function(e,n,r,i){e>this._rows&&(e=this._rows),n>this._columns&&(n=this._columns),r>this._rows&&(r=this._rows),i>this._columns&&(i=this._columns);var o=void 0;e>r&&(o=e,e=r,r=o),n>i&&(o=n,n=i,i=o);var u=i-n+1,a=new t(r-e+1,u),s=void 0,h=void 0;for(s=e;s<=r;s++)for(h=n;h<=i;h++)a._m[h-n+(s-e)*u]=_m[h+s*this._columns];return a}},{key:"merge",value:function(e){var n=e.rows,r=e.columns,i=this._rows,o=this._columns,u=o+r,a=new t(Math.max(i,n),u),s=void 0,h=void 0;for(s=0;s<i;s++)for(h=0;h<o;h++)a._m[h+s*u]=this._m[h+s*o];for(s=0;s<n;s++)for(h=0;h<r;h++)a._m[h+o+s*u]=e._m[h+s*r];return a}},{key:"swapRows",value:function(t,e){if(!(t>this._rows||e>this._rows)&&t!=e){this._det=-this._det;var n=void 0,r=void 0;for(r=0;r<this._columns;r++)n=this._m[r+t*this._columns],this._m[r+t*this._columns]=this._m[r+e*this._columns],this._m[r+e*this._columns]=n}}},{key:"random",value:function(t,e){var n=this._rows*this._columns,r=void 0;for(r=0;r<n;r++)this._m[r]=Math.round(Math.random()*(Math.max(t,e)-Math.min(t,e)))+Math.min(t,e)}},{key:"clone",value:function(){var e=this._rows*this._columns,n=new t(this._rows,this._columns),r=void 0;for(r=0;r<e;r++)n._m[r]=this._m[r];return n}},{key:"setElement",value:function(t,e,n){t>=this._rows||e>=this._columns||(this._m[e+t*this._columns]=n)}},{key:"getElement",value:function(t,e){return t>=this._rows||e>=this._columns?NaN:this._m[e+t*this._columns]}},{key:"setMatrixFromRows",value:function(t){var e=t.length,n=t[0].length,r=void 0,i=void 0;for(r=0;r<e;r++)if(t[r].length!=n)return;for(this._m.length=e*n,r=0;r<e;r++)for(i=0;i<n;i++)this._m[i+r*n]=t[r][i];this._rows=e,this._columns=n}},{key:"setMatrixFromVector",value:function(t,e,n){var r=e*n;if(r==t.length){var i=void 0;for(i=0;i<r;i++)this._m[i]=t[i];this._rows=e,this._columns=n}}},{key:"traceMatrix",value:function(){}}],[{key:"GaussSolution",value:function(e,n){var r=e.rows,i=void 0,o=new t(r,1);if(e.rows!=e.columns||e.rows!=n.rows||n.columns>1||0==n.columns)return o.resize(0,0),o.isError=!0,o.errorMes="Can't solve this system of equations",o;var u=e.merge(n),a=u.columns;if(u.gaussElimination(),u.isError)return o.resize(0,0),o.isError=!0,o.errorMes=u.errorMes,o;var s=void 0,h=void 0;for(s=r-1;s>=0;s--){for(i=0,h=s+1;h<r;h++)i+=u._m[h+s*a]*o._m[h];o._m[s]=(u._m[r+s*a]-i)/u._m[s*(1+a)]}return o}},{key:"LUPDecomposition",value:function(t,e){if(t.rows==t.columns){var n=t.rows;e.resize(n,1);var r=void 0,i=void 0,o=void 0;for(r=0;r<n;r++)e._m[r]=r;for(o=0;o<n;o++){var u=0,a=void 0;for(r=o;r<n;r++)Math.abs(t._m[o+r*n])>u&&(u=Math.abs(t._m[o+r*n]),a=r);if(0==u)return t.isError=!0,void(t.errorMes="Can't solve this system of equations");for(e.swapRows(o,a),t.swapRows(o,a),r=o+1;r<n;r++)for(t._m[o+r*n]/=t._m[o*(1+n)],i=o+1;i<n;i++)t._m[i+r*n]-=t._m[o+r*n]*t._m[i+o*n]}}}},{key:"LUPSolution",value:function(e,n,r){var i=e.rows,o=void 0,u=void 0,a=void 0,s=new t(i,1);if(e.isError||i!=e.columns||i!=n.rows||1!=n.columns||i!=r.rows||1!=r.columns)return s.resize(0,0),s.isError=!0,s.errorMes="Can't solve this system of equations",s;for(u=0;u<i;u++){for(o=0,a=0;a<u;a++)o+=e._m[a+u*i]*s._m[a];s._m[u]=r._m[n._m[u]]-o}for(u=i-1;u>=0;u--){for(o=0,a=u+1;a<i;a++)o+=e._m[a+u*i]*s._m[a];s._m[u]=(s._m[u]-o)/e._m[u*(1+i)]}return s}},{key:"CramerSolution",value:function(e,n){var r=e.rows,i=new t(r,1),o=void 0;if(e.rows!=e.columns||e.rows!=n.rows||1!=n.columns)return i.resize(0,0),i.isError=!0,i.errorMes="Can't solve this system of equations",i;var u=e.recursiveDeterminant();if(0==u)return i.resize(0,0),i.isError=!0,i.errorMes="The A matrix is not invertible. So I can't solve this system of equations",i;var a=void 0;for(a=0;a<r;a++)(o=e.clone()).insert(n,0,a),i._m[a]=o.recursiveDeterminant()/u;return i}}]),t}();e.exports=n},{}],10:[function(t,e){var n=function(){function t(){r(this,t)}return o(t,null,[{key:"round",value:function(t,e){return void 0===e&&(e=1),Math.round(t/e)*e}},{key:"floor",value:function(t,e){return void 0===e&&(e=1),Math.floor(t/e)*e}},{key:"ceil",value:function(t,e){return void 0===e&&(e=1),Math.ceil(t/e)*e}},{key:"random",value:function(e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=1),e>n){var i=e;e=n,n=i}var o=n-e+1*r,u=Math.random()*o;return t.floor(u+=e,r)}},{key:"getUniqueID",value:function(){return t.getUnique()+""}},{key:"getUnique",value:function(){null==t._aUniqueIDs&&(t._aUniqueIDs=new Array);for(var e=new Date,n=e.getTime();!t.isUnique(n);)n+=t.random(e.getTime(),2*e.getTime());return t._aUniqueIDs.push(n),n}},{key:"isUnique",value:function(e){for(var n=0;n<t._aUniqueIDs.length;n++)if(t._aUniqueIDs[n]==e)return!1;return!0}}]),t}();e.exports=n},{}],11:[function(t,e){(function(t){var n=t||window,u=function(){function t(){r(this,t),this.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',this.attr_prefix="-"}return o(t,[{key:"parseXML",value:function(t){var e=void 0;if(n.DOMParser){var r=(new DOMParser).parseFromString(t,"application/xml");if(!r)return;e=r.documentElement}else n.ActiveXObject&&(xmldom=new ActiveXObject("Microsoft.XMLDOM"),xmldom.async=!1,xmldom.loadXML(t),e=xmldom.documentElement);if(e)return this.parseDOM(e)}},{key:"parseHTTP",value:function(t,e,n){var r={};for(var i in e)r[i]=e[i];if(r.method||(r.method=void 0===r.postBody&&void 0===r.postbody&&void 0===r.parameters?"get":"post"),n){r.asynchronous=!0;var o=this,u=n,a=r.onComplete;r.onComplete=function(t){var e=void 0;t&&t.responseXML&&t.responseXML.documentElement&&(e=o.parseDOM(t.responseXML.documentElement)),u(e,t),a&&a(t)}}else r.asynchronous=!1;var s=void 0;if("undefined"!=typeof HTTP&&HTTP.Request){r.uri=t;var h=new HTTP.Request(r);h&&(s=h.transport)}else if("undefined"!=typeof Ajax&&Ajax.Request){var f=new Ajax.Request(t,r);f&&(s=f.transport)}return n?s:s&&s.responseXML&&s.responseXML.documentElement?this.parseDOM(s.responseXML.documentElement):void 0}},{key:"parseDOM",value:function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!==t.nodeType){var r={};r[t.nodeName]=n,n=r}return n}}},{key:"parseElement",value:function(t){if(7!==t.nodeType){if(3===t.nodeType||4===t.nodeType){if(null===t.nodeValue.match(/[^\x00-\x20]/))return;return t.nodeValue}var e=void 0,n={};if(t.attributes&&t.attributes.length){e={};for(var r=0;r<t.attributes.length;r++){var i=t.attributes[r].nodeName;if("string"==typeof i){var o=t.attributes[r].nodeValue;o&&(void 0===n[i=this.attr_prefix+i]&&(n[i]=0),n[i]++,this.addNode(e,i,n[i],o))}}}if(t.childNodes&&t.childNodes.length){var u=!0;e&&(u=!1);for(var a=0;a<t.childNodes.length&&u;a++){var s=t.childNodes[a].nodeType;3!==s&&4!==s&&(u=!1)}if(u){e||(e="");for(var h=0;h<t.childNodes.length;h++)e+=t.childNodes[h].nodeValue}else{e||(e={});for(var f=0;f<t.childNodes.length;f++){var v=t.childNodes[f].nodeName;if("string"==typeof v){var c=this.parseElement(t.childNodes[f]);c&&(void 0===n[v]&&(n[v]=0),n[v]++,this.addNode(e,v,n[v],c))}}}}return e}}},{key:"addNode",value:function(t,e,n,r){this.__force_array[e]?(1===n&&(t[e]=[]),t[e][t[e].length]=r):1===n?t[e]=r:2===n?t[e]=[t[e],r]:t[e][t[e].length]=r}},{key:"writeXML",value:function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e}},{key:"hash_to_xml",value:function(t,e){var n=[],r=[];for(var o in e)if(e.hasOwnProperty(o)){var u=e[o];o.charAt(0)!==this.attr_prefix?n[n.length]=void 0!==u&&u?"object"===(void 0===u?"undefined":i(u))&&u.constructor===Array?this.array_to_xml(o,u):"object"===(void 0===u?"undefined":i(u))?this.hash_to_xml(o,u):this.scalar_to_xml(o,u):"<"+o+" />":r[r.length]=" "+o.substring(1)+'="'+this.xml_escape(u)+'"'}var a=r.join(""),s=n.join("");return void 0!==t&&t&&(s=n.length>0?s.match(/\n/)?"<"+t+a+">\n"+s+"</"+t+">\n":"<"+t+a+">"+s+"</"+t+">\n":"<"+t+a+" />\n"),s}},{key:"array_to_xml",value:function(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r];n[n.length]=void 0!==o&&o?"object"===(void 0===o?"undefined":i(o))&&o.constructor===Array?this.array_to_xml(t,o):"object"===(void 0===o?"undefined":i(o))?this.hash_to_xml(t,o):this.scalar_to_xml(t,o):"<"+t+" />"}return n.join("")}},{key:"scalar_to_xml",value:function(t,e){return"#text"===t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"}},{key:"xml_escape",value:function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}]),t}();e.exports=u}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,e){var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.x=e,this.y=n}return o(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"normalize",value:function(t){var e=this.length;0!==e&&(this.x*=t/e,this.y*=t/e)}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+"}"}},{key:"setTo",value:function(t,e){this.x=t,this.y=e}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}],[{key:"vec2ToPoint",value:function(e){return new t(e.get_x(),e.get_y())}},{key:"interpolate",value:function(e,n,r){return new t(e.x+(n.x-e.x)*r,e.y+(n.y-e.y)*r)}},{key:"distance",value:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}}]),t}();e.exports=n},{}],13:[function(t,e){var n=function(){function t(e){r(this,t),this.__queuePromiseArr=e.slice(),this.resultArr=[]}return o(t,[{key:"run",value:function(){var t=this;return new Promise((function(e,n){t.resolve=e,t.reject=n,t.__queueNext()}))}},{key:"__queueNext",value:function(){var t=this;this.__queuePromiseArr.length?this.__queuePromiseArr.shift().then((function(e){t.resultArr.push(e),t.__queueNext()})).catch(this.reject):this.resolve(this.resultArr)}}]),t}();e.exports=n},{}],14:[function(t,e){var n=t("./Point"),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.x=e,this.y=i,this.width=o,this.height=u,this.topLeftPoint=new n,this.sizePoint=new n}return o(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},{key:"union",value:function(e){if(0===e.width||0===e.height)return this;var n=Math.min(this.x,e.x),r=Math.min(this.y,e.y);return new t(n,r,Math.max(this.x+this.width,e.x+e.width)-n,Math.max(this.y+this.height,e.y+e.height)-r)}},{key:"inflate",value:function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e}},{key:"contains",value:function(t,e){return t>=this.x&&t<=this.right&&e>=this.y&&e<=this.bottom}},{key:"containsPoint",value:function(t){return this.contains(t.x,t.y)}},{key:"offset",value:function(t,e){this.x+=t,this.y+=e}},{key:"intersects",value:function(t,e){return e?!(t.left>=this.right||t.right<=this.left||t.top>=this.bottom||t.bottom<=this.top):!(t.left>this.right||t.right<this.left||t.top>this.bottom||t.bottom<this.top)}},{key:"intersection",value:function(e,n){var r=new t;return this.intersects(e,n)&&(e.left<=this.right?(r.x=e.left,r.width=this.right-r.x):(r.x=this.left,r.width=e.right-r.x),r.y=e.top<this.top?this.top:e.top,r.height=e.bottom<this.bottom?e.bottom:this.bottom,r.height=r.height-r.y),r}},{key:"isEmpty",value:function(){return this.width<=0||this.height<=0}},{key:"setEmpty",value:function(){this.x=0,this.y=0,this.width=0,this.height=0}},{key:"setTo",value:function(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r}},{key:"left",get:function(){return this.x},set:function(t){this.x=t}},{key:"top",get:function(){return this.y},set:function(t){this.y=t}},{key:"right",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"bottom",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"topLeft",get:function(){return this.topLeftPoint.x=this.x,this.topLeftPoint.y=this.y,this.topLeftPoint},set:function(t){this.x=t.x,this.y=t.y}},{key:"size",get:function(){return this.sizePoint.x=this.width,this.sizePoint.y=this.height,this.sizePoint},set:function(t){this.width=t.x,this.height=t.y}}]),t}();e.exports=i},{"./Point":12}],15:[function(t,e){var n=function(){function t(){r(this,t)}return o(t,[{key:"load",value:function(t){var e=this;return new Promise((function(n){e._loadNextSVG(n,t,[])}))}},{key:"_loadNextSVG",value:function(t,e,n){var r=this;if(0!==e.length){var i=e.shift();Snap.load(i.path,(function(o){i.g=o.select("g"),n.push(i),r._loadNextSVG(t,e,n)}),this)}else t(n)}}]),t}();e.exports=n},{}],16:[function(t,e){var n=function(){function t(){r(this,t)}return o(t,null,[{key:"stringsAreEqual",value:function(t,e,n){return n?t===e:t.toUpperCase()===e.toUpperCase()}},{key:"trim",value:function(e){return t.ltrim(t.rtrim(e))}},{key:"ltrim",value:function(t){for(var e=t.length,n=0;n<e;n++)if(t.charCodeAt(n)>32)return t.substring(n);return""}},{key:"rtrim",value:function(t){for(var e=t.length;e>0;e--)if(t.charCodeAt(e-1)>32)return t.substring(0,e);return""}},{key:"beginsWith",value:function(t,e){return e===t.substring(0,e.length)}},{key:"endsWith",value:function(t,e){return e===t.substring(t.length-e.length)}},{key:"remove",value:function(e,n){return t.replace(e,n,"")}},{key:"replace",value:function(t,e,n){return t.split(e).join(n)}},{key:"stringHasValue",value:function(t){return null!==t&&t.length>0}},{key:"contains",value:function(t,e){return""===t&&""===e||!!t&&t.indexOf(e)>-1}},{key:"addString",value:function(t,e,n){void 0===n&&(n="0");for(var r=t;r.length<e;)r+=n;return r}}]),t}();e.exports=n},{}],17:[function(t,e){var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this._x=e,this._y=n}return o(t,[{key:"clone",value:function(){return new t(this._x,this._y)}},{key:"scale",value:function(t){return this._x*=t,this._y*=t,this}},{key:"add",value:function(t){return this._x+=t.x,this._y+=t.y,this}},{key:"substract",value:function(t){return this._x-=t.x,this._y-=t.y,this}},{key:"dotProduct",value:function(t){return this._x*t.x+this._y*t.y}},{key:"dotProdWithNormalizing",value:function(t){var e=t.clone().normalize();return this._x*e.x+this._y*e.y}},{key:"isPerpendicular",value:function(e){return Math.abs(this.dotProduct(e))<t.EPSILON_SQUARED}},{key:"crossProduct",value:function(t){return this._x*t.y-this._y*t.x}},{key:"isParallel",value:function(e){return Math.abs(this.crossProduct(e))<t.EPSILON_SQUARED}},{key:"isZero",value:function(){return Math.abs(this._x)<t.EPSILON&&Math.abs(this._y)<t.EPSILON}},{key:"zero",value:function(){this._x=this._y=0}},{key:"normalize",value:function(){return this.isZero()?(this._x=1,this):this.scale(1/this.length)}},{key:"isNormalized",value:function(){return Math.abs(this.lengthSquared-1)<t.EPSILON_SQUARED}},{key:"equals",value:function(e){return Math.abs(this._x-e.x)<t.EPSILON&&Math.abs(this._y-e.y)<t.EPSILON}},{key:"isValid",value:function(){return!isNaN(this._x)&&!isNaN(this._y)&&isFinite(this._x)&&isFinite(this._y)}},{key:"rotate",value:function(t){var e=Math.sin(t),n=Math.cos(t),r=this._x;return this._x=r*n-this._y*e,this._y=r*e+this._y*n,this}},{key:"rotateWithTrig",value:function(t,e){var n=this._x;return this._x=n*e-this._y*t,this._y=n*t+this._y*e,this}},{key:"negate",value:function(){return this._x*=-1,this._y*=-1,this}},{key:"projectTo",value:function(e){var n=this.dotProduct(e),r=e.lengthSquared;return new t(n*e.x/r,n*e.y/r)}},{key:"projectToNormalized",value:function(e){var n=this.dotProduct(e);return new t(n*e.x,n*e.y)}},{key:"perpProduct",value:function(t){return this.lx*t.x+this.ly*t.y}},{key:"ratio",value:function(e,n,r){return this.isParallel(r)?NaN:this.lengthSquared<t.EPSILON_SQUARED||r.lengthSquared<t.EPSILON_SQUARED?NaN:n.clone().substract(e).perpProduct(r)/this.perpProduct(r)}},{key:"findIntersection",value:function(e,n,r){var i=this.ratio(e,n,r);return isNaN(i)?new t(NaN,NaN):new t(e.x+i*this.x,e.y+i*this.y)}},{key:"findIntersectionInBounds",value:function(e,n,r){e.clone().substract(n);var i=this.ratio(e,n,r),o=r.ratio(n,e,this);return!isNaN(i)&&!isNaN(o)&&i>0&&i<=1&&o>0&&o<=1?new t(e.x+i*this.x,e.y+i*this.y):new t(NaN,NaN)}},{key:"truncate",value:function(t){return this.length=Math.min(t,this.length),this}},{key:"angleBetween",value:function(t){var e=this.clone(),n=t.clone();return this.isNormalized()||e.normalize(),t.isNormalized()||n.normalize(),Math.acos(e.dotProduct(n))}},{key:"setXY",value:function(t,e){this._x=t,this._y=e}},{key:"sign",value:function(t,e){return(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x)}},{key:"dist",value:function(t){return Math.sqrt(this.distSquared(t))}},{key:"dist_XY",value:function(t,e){var n=t-this._x,r=e-this._y;return Math.sqrt(n*n+r*r)}},{key:"distSquared",value:function(t){var e=t.x-this._x,n=t.y-this._y;return e*e+n*n}},{key:"distSquared_XY",value:function(t,e){var n=t-this._x,r=e-this._y;return n*n+r*r}},{key:"bounce",value:function(t,e){void 0===e&&(e=1);var n=(1+e)*this.dotProduct(t);return this._x-=n*t.x,this._y-=n*t.y,this}},{key:"bounceWithFriction",value:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0),this.clone();var r=this.projectToNormalized(t.rightNormal),i=this.projectToNormalized(t),o=-i.y,u=r.y;return this.x=-i.x*e+r.x*n,this.y=o*e+u*n,this}},{key:"toString",value:function(){return"["+this._x+", "+this._y+"]"}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"length",get:function(){return Math.sqrt(this._x*this._x+this._y*this._y)},set:function(t){var e=this.angle;this._x=t*Math.cos(e),this._y=t*Math.sin(e)}},{key:"lengthSquared",get:function(){return this._x*this._x+this._y*this._y}},{key:"angle",get:function(){return this.isZero()?0:Math.atan2(this._y,this._x)},set:function(t){var e=this.length;this._x=e*Math.cos(t),this._y=e*Math.sin(t)}},{key:"dx",get:function(){return this.isZero()?0:this._x/this.length}},{key:"dy",get:function(){return this.isZero()?0:this._y/this.length}},{key:"rightNormal",get:function(){return new t(-this._y,this._x)}},{key:"rx",get:function(){return-this._y}},{key:"ry",get:function(){return this._x}},{key:"leftNormal",get:function(){return new t(this._y,-this._x)}},{key:"lx",get:function(){return this._y}},{key:"ly",get:function(){return-this._x}}]),t}();n.EPSILON=1e-7,n.EPSILON_SQUARED=n.EPSILON*n.EPSILON,e.exports=n},{}],18:[function(t,e){(function(r){var i=r||window;i.trace=console.log.bind(console),i.each=function(t,e,n){var r=void 0,i=t.length;for(r=0;r<i&&!1!==e.call(n||t[r],r,t[r]);r++);},Date.prototype.pattern=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[this.getDay()+""])),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t};var o={Point:t("./Point"),Rectangle:t("./Rectangle"),SVGLoad:t("./SVGLoad"),ArrayUtil:t("./ArrayUtil"),NumberUtilities:t("./NumberUtilities"),Matrix:t("./Matrix"),ObjTree:t("./ObjTree"),StringUtil:t("./StringUtil"),Vector2DMath:t("./Vector2DMath"),HashMap:t("./HashMap"),MatrixMath:t("./MatrixMath"),GraphicsTexture:t("./GraphicsTexture"),GraphicsUtil:t("./GraphicsUtil"),M:t("./M"),PromiseQueue:t("./PromiseQueue"),DomUtil:t("./DomUtil"),FullscreenTool:t("./FullscreenTool")};e.exports=o,(void 0===n?function(){}:n).exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ArrayUtil":1,"./DomUtil":2,"./FullscreenTool":3,"./GraphicsTexture":4,"./GraphicsUtil":5,"./HashMap":6,"./M":7,"./Matrix":8,"./MatrixMath":9,"./NumberUtilities":10,"./ObjTree":11,"./Point":12,"./PromiseQueue":13,"./Rectangle":14,"./SVGLoad":15,"./StringUtil":16,"./Vector2DMath":17}]},{},[18])}));export{n as N};