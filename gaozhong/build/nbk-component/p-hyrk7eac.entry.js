import{r as t,c as e,h as s,g as i}from"./p-05c16912.js";import"./p-ba1f185e.js";import{a as o}from"./p-e0dd32b5.js";import{o as a,b as l}from"./p-ef3a3db5.js";import{i as n,a as c,b as h,c as d}from"./p-a370223b.js";var r=function(t,e){for(var s=-1,i=null==t?0:t.length;++s<i&&!1!==e(t[s],s,t););return t},u=a(Object.keys,Object),y=Object.prototype.hasOwnProperty,m=function(t){return c(t)?h(t):function(t){if(!n(t))return u(t);var e=[];for(var s in Object(t))y.call(t,s)&&"constructor"!=s&&e.push(s);return e}(t)},f=function(t,e){if(null==t)return t;if(!c(t))return function(t,e){return t&&l(t,e,m)}(t,e);for(var s=t.length,i=-1,o=Object(t);++i<s&&!1!==e(o[i],i,o););return t},B=function(t,e){return(o(t)?r:f)(t,"function"==typeof(s=e)?s:d);var s};const p=class{constructor(s){t(this,s),this.isPlay=!0,this.keycode="",this.drawTShow=!1,this.toolTShow=!1,this.updateui=0,this.firstMecBtnArr=[],this.drawBlocks=[{active:!1,default:"rectBtn",type:"rect",name:"绘制",lan_key:"canvas.mec_tool.rect",key:"R"},{active:!1,default:"circleBtn",type:"circle",name:"圆",lan_key:"canvas.mec_tool.circle",key:"C"},{active:!1,default:"ropeBtn",type:"rope",name:"绳子",lan_key:"canvas.mec_tool.rope",key:"O"},{active:!1,default:"gearBtn",type:"gear",name:"齿轮",lan_key:"canvas.mec_tool.gear",key:"G"},{active:!1,default:"polyBtn",type:"poly",name:"钢笔",lan_key:"canvas.mec_tool.poly",key:"L"}],this.toolBlocks=[{active:!1,default:"fixBtn",type:"fixed",name:"固定",lan_key:"canvas.mec_tool.fixed",key:"F"},{active:!1,default:"bearBtn",type:"bearing",name:"轴承",lan_key:"canvas.mec_tool.bearing",key:"B"},{active:!1,default:"springBtn",type:"spring",name:"弹簧",lan_key:"canvas.mec_tool.spring",key:"P"},{active:!1,default:"thrusBtn",type:"thruster",name:"推力",lan_key:"canvas.mec_tool.thruster",key:"T"},{active:!1,default:"sliceBtn",type:"slice",name:"切割",lan_key:"canvas.mec_tool.slice",key:"S"},{active:!1,default:"rotaBtn",type:"rota",name:"旋转",lan_key:"canvas.mec_tool.rota",key:"Q"}],this.drawCurt=null,this.toolCurt=null,this.firstCurMec=null,this.toggleBtnConfigs={dragBtn:{selectedBoxClass:"font-box-se",deSelectedBoxClass:"font-box-dese",selectedClass:"dragBtnSe",deSelectedClass:"dragBtnDese",name:"挥动",lan_key:"canvas.mec_tool.drag",selected:!0},drawBlocksBtn:{selectedBoxClass:"font-box-dese",deSelectedBoxClass:"font-box-dese",selectedClass:"drawBtn",deSelectedClass:"drawBtn",name:"绘制",lan_key:"canvas.mec_tool.draw",hasSanjiao:!0},toolBlocksBtn:{selectedBoxClass:"font-box-dese",deSelectedBoxClass:"font-box-dese",selectedClass:"toolBtn",deSelectedClass:"toolBtn",name:"工具",lan_key:"canvas.mec_tool.tools",hasSanjiao:!0},drawBlocks:[],toolBlocks:[]},this.mechToolChange=e(this,"mechToolChange",7),this.playChange=e(this,"playChange",7)}keycodeChange(t,e){""==t&&(t="drag");let s=this.typeInDraw(t);s?this.drawCurt=s:(s=this.typeInTool(t),this.toolCurt=s||null)}typeInDraw(t){let e=null;return B(this.drawBlocks,s=>{s.type===t&&(e=s)}),e}typeInTool(t){let e=null;return B(this.toolBlocks,s=>{s.type===t&&(e=s)}),e}async componentDidLoad(){this.leftBody=this.ele.querySelector("#leftBody");const t=this.ele.querySelector("#dragBtnId");this.dragBtnId=await t.getTarget();const e=this.ele.querySelector("#drawBlocksBtnId");this.drawBlocksBtnId=await e.getTarget();const s=this.ele.querySelector("#toolBlocksBtnId");this.toolBlocksBtnId=await s.getTarget(),this.firstMecBtnArr.push(this.dragBtnId,this.drawBlocksBtnId,this.toolBlocksBtnId),this.firstCurMec=this.dragBtnId;for(let i=0;i<this.drawBlocks.length;i++){const t=this.drawBlocks[i];this.toggleBtnConfigs.drawBlocks.push({selectedBoxClass:"font-box-se",deSelectedBoxClass:"font-box-dese",selectedClass:`inBlock ${t.default}-se`,deSelectedClass:`inBlock ${t.default}-dese`,name:this.getlan(t.lan_key)})}for(let i=0;i<this.toolBlocks.length;i++){const t=this.toolBlocks[i];this.toggleBtnConfigs.toolBlocks.push({selectedBoxClass:"font-box-se",deSelectedBoxClass:"font-box-dese",selectedClass:`inBlock ${t.default}-se`,deSelectedClass:`inBlock ${t.default}-dese`,name:this.getlan(t.lan_key)})}this.toggleBtnConfigs.dragBtn.name=this.getlan(this.toggleBtnConfigs.dragBtn.lan_key),this.toggleBtnConfigs.drawBlocksBtn.name=this.getlan(this.toggleBtnConfigs.drawBlocksBtn.lan_key),this.toggleBtnConfigs.toolBlocksBtn.name=this.getlan(this.toggleBtnConfigs.toolBlocksBtn.lan_key),this.updateui=Math.random()}getTip(t){return t}playClick(t){this.playChange.emit(t)}firstMecChaged(t){if(this.firstCurMec!==t.target){let e=null;this.firstMecBtnArr.forEach(s=>{s.selected=s===t.target,s.selected&&(e=t.target)}),this.firstCurMec=e}this.firstCurMec===this.dragBtnId?(this.sendMec(this.dragBtnId.selected?{type:"drag"}:{type:"move"}),this.hideDrawBlock(),this.hideToolBlock(),this.toolTShow=!1,this.drawTShow=!1,this.drawCurt=null,this.toolCurt=null):this.firstCurMec===this.drawBlocksBtnId?(this.sendMec({type:"move"}),this.drawTShow=this.firstCurMec.selected,this.toolTShow=!1,this.toolCurt=null,this.hideToolBlock()):this.firstCurMec===this.toolBlocksBtnId?(this.sendMec({type:"move"}),this.drawTShow=!1,this.drawCurt=null,this.toolTShow=this.firstCurMec.selected,this.hideDrawBlock()):(this.drawTShow=!1,this.toolTShow=!1,this.drawCurt=null,this.toolCurt=null,this.sendMec({type:"move"}))}hideDrawBlock(){this.toggleBtnConfigs.drawBlocks.forEach(t=>{t.selected=!1})}hideToolBlock(){this.toggleBtnConfigs.toolBlocks.forEach(t=>{t.selected=!1})}sendMec(t){this.mechToolChange.emit(t)}drawBlockActive(t,e){this.toggleBtnConfigs.drawBlocks.forEach(e=>{e.target!==t&&(e.target.selected=!1)}),t.selected?(this.drawCurt=e,this.sendMec({type:e.type})):(this.drawCurt=null,this.sendMec({type:"drag"}))}toolBlockActive(t,e){this.toggleBtnConfigs.toolBlocks.forEach(e=>{e.target!==t&&(e.target.selected=!1)}),t.selected?(this.toolCurt=e,this.sendMec({type:e.type})):(this.toolCurt=null,this.sendMec({type:"move"}))}documentTouchEnd(t){this.leftBody&&this.leftBody.contains(t.target)||this.mouseleaveHandle()}mouseleaveHandle(){this.drawCurt||this.toolCurt||!this.drawTShow&&!this.toolTShow||(this.drawTShow=!1,this.toolTShow=!1,this.firstCurMec&&(this.firstCurMec.selected=!1))}getlan(t){return this.trans?this.trans.getStrFromKey(t,""):t}drawTShowDom(){if(this.drawTShow)return s("div",{class:"block-con"},this.toggleBtnConfigs.drawBlocks.map((t,e)=>s("mec-toggle-btn",{onSelectChange:t=>{this.drawBlockActive(t.detail.target,this.drawBlocks[e])},config:t})))}addTooldom(){if(this.toolTShow)return s("div",{class:"outBlock2 second-tool-left shandow-block"},s("div",{class:"block-con"},this.toggleBtnConfigs.toolBlocks.map((t,e)=>s("mec-toggle-btn",{onSelectChange:t=>{this.toolBlockActive(t.detail.target,this.toolBlocks[e])},config:t}))))}addPlayDom(){return this.isPlay?s("div",{class:"groupDiv2"},s("div",{class:"pasueBtn",onClick:()=>{this.playClick(!1)}}),s("div",{class:"play-btn"},this.getlan("canvas.mec_tool.pause"))):s("div",{class:"groupDiv2"},s("div",{class:"playBtn",onClick:()=>{this.playClick(!0)}}),s("div",{class:"play-btn"},this.getlan("canvas.mec_tool.play")))}render(){return s("div",{id:"leftBody",class:"mecToolClass shandow-block",onMouseLeave:()=>{this.mouseleaveHandle()}},s("div",{class:"groupDiv"},s("mec-toggle-btn",{id:"dragBtnId",config:this.toggleBtnConfigs.dragBtn,onSelectChange:t=>{this.firstMecChaged(t.detail)}}),s("mec-toggle-btn",{id:"drawBlocksBtnId",config:this.toggleBtnConfigs.drawBlocksBtn,onSelectChange:t=>{this.firstMecChaged(t.detail)}}),s("mec-toggle-btn",{class:"tool-tog-btn",id:"toolBlocksBtnId",config:this.toggleBtnConfigs.toolBlocksBtn,onSelectChange:t=>{this.firstMecChaged(t.detail)}}),s("div",{class:"outBlock second-tool-left shandow-block"},this.drawTShowDom()),this.addTooldom()),this.addPlayDom(),s("div",{class:"mecTool-back"}))}get ele(){return i(this)}static get watchers(){return{keycode:["keycodeChange"]}}static get style(){return".toolbar_icon_play_default,nb-mechTool-group .playBtn{background-position:0 0}.toolbar_icon_play_default,.toolbar_icon_play_hover,nb-mechTool-group .playBtn,nb-mechTool-group .playBtn:hover{background-image:url(assets/imgs/nbk/nbk_mechtool-group_sprite.png);background-size:34px 229px;background-repeat:no-repeat;width:34px;height:34px}.toolbar_icon_play_hover,nb-mechTool-group .playBtn:hover{background-position:0 -39px}.toolbar_icon_play_pressed{background-position:0 -78px}.toolbar_icon_play_pressed,.toolbar_icon_stop_default,nb-mechTool-group .pasueBtn{background-image:url(assets/imgs/nbk/nbk_mechtool-group_sprite.png);background-size:34px 229px;background-repeat:no-repeat;width:34px;height:34px}.toolbar_icon_stop_default,nb-mechTool-group .pasueBtn{background-position:0 -117px}.toolbar_icon_stop_hover,nb-mechTool-group .pasueBtn:hover{background-position:0 -156px}.toolbar_icon_stop_hover,.toolbar_icon_stop_pressed,nb-mechTool-group .pasueBtn:hover{background-image:url(assets/imgs/nbk/nbk_mechtool-group_sprite.png);background-size:34px 229px;background-repeat:no-repeat;width:34px;height:34px}.toolbar_icon_stop_pressed{background-position:0 -195px}nb-mechTool-group .mecToolClass{position:absolute;width:60px;left:30px;top:95px}nb-mechTool-group .mecToolClass .blockBtn{margin:0 13px 0 13px}nb-mechTool-group .mecToolClass .outBlock{top:72px;position:absolute}nb-mechTool-group .mecToolClass .outBlock2{top:135px;position:absolute}nb-mechTool-group .mecToolClass .groupDiv{padding-top:7px;width:100%}nb-mechTool-group .mecToolClass .groupDiv .tool-tog-btn .toggle-box{margin-top:3px}nb-mechTool-group .mecToolClass .second-tool-left{left:62px;width:60px}nb-mechTool-group .mecToolClass .block-con{width:100%;padding-bottom:18px;padding-top:1px}nb-mechTool-group .shandow-block{background:rgba(26,28,30,.95);-webkit-box-shadow:6px 6px 15px rgba(0,0,0,.2);box-shadow:6px 6px 15px rgba(0,0,0,.2);border-radius:10px}nb-mechTool-group .groupDiv2{padding:8px 13px 20px 13px;border-radius:0 0 10px 10px;cursor:pointer}nb-mechTool-group .groupDiv2 .play-btn{color:#ccc;text-align:center}nb-mechTool-group .mecTool-back{width:5px;height:195px;background-color:rgba(255,0,0,0);position:absolute;left:60px;top:79px}"}};export{p as nb_mechtool_group};