/*!
 * Copyright (c) 2017 Nobook inc.
 * 
 * (TBD)
 * 
 * Version: 0.6.57
 * Date: Mon Apr 27 2020 08:22:33 GMT+0800 (CST)
 */
webpackJsonpPhysicsCanvas([5],{438:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var n=i(483),o=(r(n),i(852)),a=r(o),s=i(851),l=r(s),u=i(860),h=r(u),c=i(861),f=r(c),p=i(865),d=r(p),y=i(866),b=r(y),v=i(869),g=r(v),m=i(867),_=r(m),P=i(868),w=r(P),k=i(855),C=r(k),O=i(871),A=r(O),E=i(854),M=r(E),T=i(858),S=r(T),I=i(870),B=r(I),L=i(856),j=r(L),x=i(853),D=r(x),N=i(859),R=r(N),U=i(857),F=r(U),W=i(864),H=r(W),V=i(862),G=r(V),q=i(863),X=r(q),z=i(872),Y=r(z),$=i(849),K=r($);K["default"].classList={ChaTouTwo:a["default"],ChaTouThree:l["default"],ElecFamilyLight:h["default"],ElecFamilyLightHolder:f["default"],ElecFamilySwitchA:d["default"],ElecFamilySwitchB:b["default"],ElecFamilyTwoHoleOutlets:g["default"],ElecFamilyThreeHoleOutlets:_["default"],ElecFamilyTv:w["default"],ElecFamilyFan:C["default"],ElecFamilyWave:A["default"],ElecFamilyCooker:M["default"],ElecFamilyInserted:S["default"],ElecFamilyWash:B["default"],ElecFamilyFridge:j["default"],ElecFamilyAir:D["default"],ElecFamilyKettle:R["default"],ElecFamilyHeater:F["default"],ElecFamilyStove:H["default"],ElecFamilyPencil:G["default"],ElecFamilyPower:X["default"],ElecFamilyWire:Y["default"],ComTimerNew:r(i(545))["default"]},e["default"]=K["default"]},448:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);t.length>e;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=function b(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:b(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},h=i(1),c=i(502),f=r(c),p=i(503),d=r(p),y=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.iElecInter=t.iElecInter,i.magnet=null,i.terminalL=null,i.terminalR=null,i.canMagReversal=!1,i.hasMagReversal=!1,i.ratedV=0,i.ratedP=0,i.isZuHe||(i.bposter0=new d["default"]("bposter0",i),i.bposter1=new d["default"]("bposter1",i),h.M.setSPPointXY(i.bposter0,-5e3,-5e3),h.M.setSPPointXY(i.bposter1,-5e3,-5e3)),i}return s(e,t),l(e,[{key:"addedFore",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){if(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addTisi(),this.bp0&&h.M.setSPPointXY(this.bposter0,this.bp0.x+this.bp0.width/2,this.bp0.y),this.bp1&&h.M.setSPPointXY(this.bposter1,this.bp1.x+this.bp1.width/2,this.bp1.y),!this.globalConfig.DEBUG){var t=void 0;for(t=0;8>t;t++){var i=this["bp"+t];i&&this.removeChild(i)}}this.updateTerminal(),this.updateMagnet()}},{key:"addTisi",value:function(){var t=this;if(this.proSet){this.tisi=new this.HoverButton({"default":"skin/icon_repair_default",hover:"skin/icon_repair_hover",pressed:"skin/icon_repair_pressed",tab:function(){t.repair()}}),this.tisi.pivot.x=this.tisi.width/2,this.tisi.pivot.y=this.tisi.height;var e=new h.Point(this.proSet.x+this.proSet.width/2,this.proSet.y+this.proSet.height);this.tisiBox=new PIXI.Sprite,this.tisiBox.addChild(this.tisi),this.tisi.scale.x=.9,this.tisi.scale.y=.9,this.main.skinview.add(this.tisiBox,function(){return{p:e,fromTar:t}}),TweenMax.to(this.tisi,1,{y:-50,yoyo:!0,repeat:-1}),this.globalConfig.DEBUG||(this.removeChild(this.proSet),this.proSet=null),this.tisi.visible=!1,this.addCursor(this.tisi,"hand")}}},{key:"addedEnd",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this),this.freshGlow()}},{key:"freshGlow",value:function(){if(this.canReversal){this.showGlowIndex(this.hasReversal?1:0)}else u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshGlow",this).call(this)}},{key:"addedEnd",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"rotateChange",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t),this._fresh_from_componentBox_rotation()}},{key:"_fresh_from_componentBox_rotation",value:function(){if(this.canRotate&&this.bp0&&this.bp1){this.bposter0.oriPosition||(this.bposter0.oriPosition=this.bposter0.position.clone(),this.bposter1.oriPosition=this.bposter1.position.clone());var t=h.M.rotaPointFromP(this.bposter0.oriPosition,this.componentBox,this.componentBox.rotation),e=h.M.rotaPointFromP(this.bposter1.oriPosition,this.componentBox,this.componentBox.rotation);h.M.setSPPoint(this.bposter0,t),h.M.setSPPoint(this.bposter1,e),this.updateBinds(),this.globalConfig.DEBUG&&(this.bp0.x=t.x-this.bp0.width/2,this.bp0.y=t.y,this.bp1.x=e.x-this.bp1.width/2,this.bp1.y=e.y)}}},{key:"rotatedConf",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotatedConf",this).call(this,t),this._fresh_from_componentBox_rotation()}},{key:"repair",value:function(){var t=this;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this),this.tisi&&(this.tisi.visible=!1),this.freshLibPan(),setTimeout(function(){t.freshLibPan()},100)}},{key:"break",value:function(){var t=this;this.isBreak||(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this),setTimeout(function(){t.hadDestory||(t.tisi&&t.globalConfig.SHOWTIPPAO&&(t.tisi.gotoDefault(),t.tisi.visible=!0,t.globalConfig.SoundTool.registAndPlay("ElecLampAndHolder"===t.classname||"ElecLampAndHolderRes"===t.classname?t.SoundStr.LAMP_BURN_OUT:t.SoundStr.BURN_OUT)),t.diyChanged())},0))}},{key:"set_bposter",value:function(t,e,i){this.bposter0=t,this.bposter1=e,this.Resistance=i,this.bposter0.bindinger.set_myroad(this.bposter1.bindinger,this.Resistance)}},{key:"setWorkPower",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"setWorkElec",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t)}},{key:"updateMagnet",value:function(){this.magnet&&this.magnet.gotoAndStop(this.hasMagReversal?1:0)}},{key:"magReversal",value:function(){this.updateMagnet()}},{key:"updateTerminal",value:function(){this.hasReversal?(this.terminalL&&this.terminalL.gotoAndStop(1),this.terminalR&&this.terminalR.gotoAndStop(0)):(this.terminalL&&this.terminalL.gotoAndStop(0),this.terminalR&&this.terminalR.gotoAndStop(1))}},{key:"reversal",value:function(t,e){if(this.canReversal){t||(this.hasReversal=!this.hasReversal);var i=h.M.getSPPoint(this.bposter0),r=h.M.getSPPoint(this.bposter1);h.M.setSPPoint(this.bposter0,r),h.M.setSPPoint(this.bposter1,i),this.hasReversal?(this.bposter0.bindinger.linkWireType=2,this.bposter1.bindinger.linkWireType=1):(this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2),e||this.reversalBposter01(),this.updateBinds(!0),this.freshGlow()}this.branchChange=!0,this.updateTerminal()}},{key:"reversalBposter01",value:function(){var t,e,i=this,r=this.bposter0.bindinger.friendPostersArr.slice(),o=this.bposter1.bindinger.friendPostersArr.slice();(t=this.bposter0.bindinger.friendPostersArr).splice.apply(t,[0,this.bposter0.bindinger.friendPostersArr.length].concat(n(o))),(e=this.bposter1.bindinger.friendPostersArr).splice.apply(e,[0,this.bposter1.bindinger.friendPostersArr.length].concat(n(r))),this.bposter0.bindinger.friendPostersArr.forEach(function(t){h.ArrayUtil.removeValueFromArray(t.friendPostersArr,i.bposter1.bindinger),t.friendPostersArr.push(i.bposter0.bindinger),t.BindMC.wire_h_mc.linkBposter=i.bposter0.bindinger}),this.bposter1.bindinger.friendPostersArr.forEach(function(t){h.ArrayUtil.removeValueFromArray(t.friendPostersArr,i.bposter0.bindinger),t.friendPostersArr.push(i.bposter1.bindinger),t.BindMC.wire_h_mc.linkBposter=i.bposter1.bindinger})}},{key:"getData",value:function(){var t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.hasReversal=this.hasReversal,t.hasMagReversal=this.hasMagReversal,t}},{key:"setData",value:function(t){this.hasReversal=!!t.hasReversal,this.hasMagReversal=!!t.hasMagReversal,t.isBreak&&this.tisi&&(this.tisi.visible=this.globalConfig.SHOWTIPPAO,this.tisi.gotoDefault()),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this._fresh_from_componentBox_rotation(),this.hasReversal&&this.reversal(!0),this.updateTerminal(),this.updateMagnet()}},{key:"setDataOver",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),!this.canReversal&&this.canRotate&&this._fresh_from_componentBox_rotation()}},{key:"loopHandle",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"loopHandle",this).call(this)}},{key:"initZuhe",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this)}},{key:"caculateOver",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"caculateOver",this).call(this)}},{key:"revokeOver",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revokeOver",this).call(this)}},{key:"beginFore",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t)}},{key:"moveFore",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t)}},{key:"endFore",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t)}},{key:"getConfEnd",value:function(t){return t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConfEnd",this).call(this,t)}},{key:"checkIsInOneHui",value:function(){return this.elecUtil.checkBindMCInElec([this.bposter0,this.bposter1])}},{key:"removed",value:function(){this.tisiBox&&this.main.skinview.remove(this.tisiBox),this.label&&this.main.skinview.remove(this.label),this.flabel12Box&&this.main.skinview.remove(this.flabel12Box),this.tisi&&(TweenMax.killTweensOf(this.tisi),this.tisi.dispose(),this.tisi=null),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"freshTxtSize",value:function(){}},{key:"viewZoomComplete",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"viewZoomComplete",this).call(this),this.freshTxtSize()}},{key:"defaultSettingChanged",value:function(){this.branchChange=!0}}]),e}(f["default"]);y.elecNumLabel=0,e["default"]=y},450:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function o(){r(this,o)};n.MIN_DRAW_ELEC_NUM=5e-4,n.BINDMC_POTISON_CHANGED="bindMCPotisonChanged",n.ELEC_WIRE_THICK_ALPHA=10,n.ELEC__GUAI_DIS_THICK=n.ELEC_WIRE_THICK_ALPHA,n.ELEC_BREAK_BEI=1.1,n.ELEC_BREAK_BEI2=1.25,n.MIN_RESISTANCE=1e-8,n.MAX_RESISTANCE=-1,n.DAMAGE_A=50,e["default"]=n},458:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(50),s=r(a),l=i(472),u=r(l),h=void 0,c=function(){function t(e){n(this,t),this.config=Object.assign({},e),this.config.moduleMain=this,h=this,this.moduleType=-1,this.active=!1,this.hasInit=!1,this.cachePool=new u["default"],this.looplist=[]}return o(t,[{key:"getModuleType",value:function(){return this.constructor.MODULE_TYPE}},{key:"init",value:function(){this.hasInit=!0}},{key:"addPhysicsCanvasListeners",value:function(){var t=this.config.main;this.onRemoveEquipmentProx||(this.onRemoveEquipmentProx=this.onRemoveEquipment.bind(this),this.onCanvasDomClickProx=this.onCanvasDomClick.bind(this),this.onSetDataCompleteProx=this.onSetDataComplete.bind(this)),t.addEventListener(s["default"].REMOVE_EQUIPMENT,this.onRemoveEquipmentProx),t.addEventListener(s["default"].CANVAS_DOM_CLICK,this.onCanvasDomClickProx),t.addEventListener(s["default"].SET_DATA_COMPLETE,this.onSetDataCompleteProx)}},{key:"removePhysicsCanvasListeners",value:function(){var t=this.config.main;t.removeEventListener(s["default"].REMOVE_EQUIPMENT,this.onRemoveEquipmentProx),t.removeEventListener(s["default"].CANVAS_DOM_CLICK,this.onCanvasDomClickProx),t.removeEventListener(s["default"].SET_DATA_COMPLETE,this.onSetDataCompleteProx)}},{key:"canvasLock",value:function(t){}},{key:"onRemoveEquipment",value:function(){}},{key:"onCanvasDomClick",value:function(t){}},{key:"onSetDataComplete",value:function(){}},{key:"onShowAllEquip",value:function(){}},{key:"setActive",value:function(t){this.active=t,8===this.moduleType?t?(PIXI.settings.RESOLUTION=1,this.forceAndMotion.resize()):PIXI.settings.RESOLUTION=this.globalConfig.RESOLUTION:PIXI.settings.RESOLUTION!==this.globalConfig.RESOLUTION&&(PIXI.settings.RESOLUTION=this.globalConfig.RESOLUTION),t?this.addPhysicsCanvasListeners():this.removePhysicsCanvasListeners()}},{key:"enterModule",value:function(t){return Promise.resolve()}},{key:"destroy",value:function(){this.removePhysicsCanvasListeners(),this.config.moduleMain=null,this.config=null,this.onRemoveEquipmentProx=null,this.onCanvasDomClickProx=null,this.onSetDataCompleteProx=null,this.hasInit=null,this.active=null}},{key:"updateEqu",value:function(){for(var t=this.main.getEquipmentArr(!0),e=0;t.length>e;e++){var i=t[e];if(i.update)try{i.update()}catch(r){}}}},{key:"getData",value:function(){return{}}},{key:"setData",value:function(t){}},{key:"startRecoverEqu",value:function(){}},{key:"completeRecoverEqu",value:function(){}},{key:"setDataBefore",value:function(){return Promise.resolve()}},{key:"requestAnimationLoop",value:function(){this.updateEqu(),this.main&&this.main.disComp&&this.main.disComp.update(),this.foreachLooplist()}},{key:"foreachLooplist",value:function(){for(var t=0;this.looplist.length>t;t++){var e=this.looplist[t];e.update&&e.update()}}},{key:"main",get:function(){return this.config?this.config.main:null}},{key:"equipmentUtil",get:function(){return this.main.equipmentUtil}},{key:"globalConfig",get:function(){return this.main.globalConfig}},{key:"language",get:function(){return this.main.language}},{key:"SoundTool",get:function(){return this.main.globalConfig.SoundTool}},{key:"phy",get:function(){return this.main.phy}},{key:"ParticleUtil",get:function(){return this.config.ParticleUtil}},{key:"SoundStr",get:function(){return this.config.SoundStr}},{key:"Button",get:function(){return this.config.Button}},{key:"HoverButton",get:function(){return this.config.HoverButton}},{key:"ComponentProperty",get:function(){return this.config.ComponentProperty}},{key:"NBCommand",get:function(){return this.config.NBCommand}},{key:"MouseManager",get:function(){return this.config.MouseManager}},{key:"NBDrag",get:function(){return this.config.NBDrag}},{key:"UploadSkinTool",get:function(){return this.config.UploadSkinTool}},{key:"NBEvent",get:function(){return this.config.NBEvent}}],[{key:"getInstance",value:function(){return h}}]),t}();window.each=function(t,e,i){var r=void 0;for(r=0;t&&t.length>r;r++){if(!1===(i?e.call(i,r,t[r]):e.call(t[r],r,t[r])))break}},e["default"]=c},472:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();e["default"]=function(){function t(){r(this,t),this.graphicsList=[],this.textList=[],this.elecWiredots=[],this.threeList={}}return n(t,[{key:"disposeAll",value:function(){this.graphicsList.length=0,this.textList.length=0,this.elecWiredots.length=0;for(var t=Object.keys(this.threeList),e=0;t.length>e;e++)for(var i=this.threeList[t[e]],r=0;i.length>r;r++)try{var n=i[r];n.removed&&n.removed()}catch(o){}this.threeList={}}},{key:"resetAll",value:function(t){t.x=0,t.y=0,t.pivot.x=0,t.pivot.y=0,t.scale.x=1,t.scale.y=1,t.rotation=0}},{key:"pushGraphic",value:function(t){t.clear(),this.resetAll(t),this.graphicsList.push(t)}},{key:"popGraphic",value:function(){var t=this.graphicsList.pop();return t&&t.transform||(t=new PIXI.Graphics),t}},{key:"pushText",value:function(t){t.text="",this.resetAll(t),this.textList.push(t)}},{key:"popText",value:function(t,e){var i=this.textList.pop();return i||(t=t||"",e=e||"",i=new PIXI.Text(t,e)),i}},{key:"pushElecDot",value:function(t){this.elecWiredots.push(t)}},{key:"popElecDot",value:function(){return this.elecWiredots.pop()}},{key:"pushThreeClass",value:function(t,e){var i=this.threeList[t];i||(i=[],this.threeList[t]=i),this.resetAll(e),i.push(e)}},{key:"popThreeClass",value:function(t,e,i){var r=this.threeList[t],n=null;return r&&(n=r.pop()),n||(n=new e(i)),n}}]),t}()},480:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(448),l=function(t){return t&&t.__esModule?t:{"default":t}}(s),u=function(t){function e(t){r(this,e),t.iElecInter=1;var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.Resistance=0,i.classname="BaseElecWire",i}return o(e,t),a(e,[{key:"linkTwoBindMC",value:function(t,e){this.elecUtil.linkWireBindMC(this.bposter0,t),this.elecUtil.linkWireBindMC(this.bposter1,e)}},{key:"unLink",value:function(t){t&&t.bindinger&&t.bindinger.breakBinding.call(t.bindinger)}}]),e}(l["default"]);u.UPDATE_POSTER_POSITION="update_poster_position",e["default"]=u},483:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function b(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:b(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(1),h=i(114),c=r(h),f=i(850),p=r(f),d=i(448),y=r(d);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=0;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.touBox=new PIXI.Sprite,i.showLineType=2,i.lineNameArr=["ElecWireLineStyleRed","ElecWireLineStyleBlueB","ElecWireLineStyleYellow"],i.bindChar=null,i.charDotP=null,i._charLineArr=[],i.hotCirArr=[],i.iElecInter=-3,i.isCheckPencilLink=!1,i.resetDisLoadComp=!0,i.isCharBase=!1,i}return a(e,t),s(e,[{key:"createRope",value:function(t,e){var i=void 0;if(this.globalConfig.isWinXP){var r=new PIXI.Graphics;r.lineNameInd=e,i=r}else i=new PIXI.mesh.Rope(PIXI.Texture.fromImage(t),[]);return i}},{key:"setRopePoints",value:function(t,e,i){var r=void 0;if(e){r=[];var n=!0,o=!1,a=undefined;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value,h=!1,c=!0,f=!1,p=undefined;try{for(var d,y=r[Symbol.iterator]();!(c=(d=y.next()).done);c=!0){var b=d.value;if(u.x===b.x&&u.y===b.y){h=!0;break}}}catch(v){f=!0,p=v}finally{try{!c&&y["return"]&&y["return"]()}finally{if(f)throw p}}h||r.push(u)}}catch(v){o=!0,a=v}finally{try{!n&&l["return"]&&l["return"]()}finally{if(o)throw a}}}if(this.globalConfig.isWinXP){i=t.lineNameInd||i,t.clear();t.lineStyle(9,[8523520,1276846,15052063,10263456][i]),r.forEach(function(e,i){0===i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})}else t.setRopePoints(r)}},{key:"addHeadWires",value:function(t){var e=this;t.forEach(function(t){var i=t.type?t.type:0,r=e.createRope(e.globalConfig.cdn_static+"electrical/elecwire/"+e.globalConfig.IMAGE_SCALE+e.lineNameArr[i]+".png");e.touBox.addChild(r),e.setRopePoints(r,t.pArr,i)})}},{key:"clearHeadWires",value:function(){u.M.removeAllChild(this.touBox)}},{key:"drawLineArr",value:function(){}},{key:"addChar",value:function(){var t=this,e=this.cha2||this.cha3;if(e){this.charDot.visible=!1,e.visible=!1,this.charDotP=u.M.getSPPoint(this.charDot);var i=this.dependEquipments;if(i){this.main.viewStack.updateTransform();var r=this.main.viewStack.toLocal(u.M.getSPPoint(e),this.parent);this.bindChar=i[0],u.M.setSPPoint(this.bindChar.parent,r),this.charLine=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+"ElecWireLineStyle.png",3),this.addChildAt(this.charLine,0),this.charLine.visible=!1,this.bindChar.bindComp=this,this.__isOwnChar=!0,this.removeChild(this.charDot),this.removeChild(this["char"]),this._fresh_bindChar(),setTimeout(function(){t.hadDestory||(t.freshCharLine(),t.freshLinks(),t.charLine.visible=!0,t.addBindCharOK(),t.dispatchLoadedComplete())})}}}},{key:"addBindCharOK",value:function(t,e){}},{key:"addHotCir",value:function(t,e,i,r,n){var o={};(0,c["default"])(o,this.paramObj,{bindMC:t,Radius:i});var a=new p["default"](o);return this.addChild(a),this.hotCirArr.push(a),e&&u.M.setSPPoint(a,e),a.elecInsOne=r,a.hotFlag=n,a}},{key:"freshCharLine",value:function(t){if(this.main&&this.charLine){t||(t=this.bindChar);var e=void 0;if(this.main.view.updateTransform(),"ElecInsOne"===t.classname){e=this.toLocal(t.posP,t.pare),0===t.charType?e.y-=10:e.y+=10}else e=this.toLocal(new u.Point(0,0),t);this._charLineArr=u.M.getRoundP(this.charDotP,new u.Point(e.x,this.charDotP.y),e),this.setRopePoints(this.charLine,this._charLineArr)}}},{key:"_checkPencilLink",value:function(){this.main.getAllElecArr().forEach(function(t){var e=t.component;e&&"ElecFamilyPencil"===e.classname&&e.checkPencilLink.call(e)})}},{key:"added",value:function(){this.addChildAt(this.touBox,0),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addChar(),this.drawLineArr()}},{key:"moveDragHandle",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveDragHandle",this).call(this,t),this.classname&&"7"===this.cateid&&(this.freshCharLine(),this.isCheckPencilLink&&this._checkPencilLink())}},{key:"removed",value:function(){var t=this;if("ElecFamilyWire"!==this.classname){this.bindChar&&(this.bindChar.unBind.call(this.bindChar),this.__isOwnChar&&(this.bindChar.bindComp=null,this.main.removeEquipment(this.bindChar)),this.bindChar=null);this.elecUtil.getAllElecWires(this).forEach(function(e){t.main.removeEquipment.call(t.main,e)})}this.parent.removeEventListener(this.NBDrag.event.STOP_DRAG,this._dragHandle),this.parent.removeEventListener(this.NBDrag.event.DRAG_MOVE,this._dragHandle),"ElecFamilyWire"!==this.classname&&l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return this.bindChar&&(t.bindCharX=this.bindChar.parent.x,t.bindCharY=this.bindChar.parent.y,this.bindChar.bindHO&&("ElecInsOne"===this.bindChar.bindHO.classname?t.bindInsInd=this.bindChar.bindHO.index:t.bindChar_bindHO_UID=this.bindChar.bindHO.UID)),t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this._fresh_bindChar()}},{key:"_fresh_bindChar",value:function(){this.bindChar&&this.setData_obj&&!this.bindChar._hasSetData&&(this.bindChar._hasSetData=!0,this.bindChar.parent.x=this.setData_obj.bindCharX,this.bindChar.parent.y=this.setData_obj.bindCharY)}},{key:"freshLinks",value:function(){if(this.bindChar&&this.setData_obj&&this.setData_obj.bindChar_bindHO_UID&&this.bindChar){this.bindChar.toBindHO(this.getChildByUID(this.setData_obj.bindChar_bindHO_UID))}}},{key:"setDataOver",value:function(){this.setData_obj&&this.setData_obj.bindInsInd!==undefined&&(this.__bindChar_setDataOverNum=0,this.__bindChar_setDataOver())}},{key:"__bindChar_setDataOver",value:function(){var t=this;this.bindChar?this.bindChar.endEnd():50>this.__bindChar_setDataOverNum&&(this.__bindChar_setDataOverNum++,setTimeout(function(){t.hadDestory||t.__bindChar_setDataOver()},100))}}]),e}(y["default"])},484:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(483),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o=t.ratedP,a=t.ratedV,s=t.workV;return a=a||220,s=s||200,i.ratedV=a,i.ratedP=o,i.oriRateP=o,i.freshMyResistance(),i.workV=s,i.isOutElec=!1,i.canReset=!0,i}return o(e,t),a(e,[{key:"freshMyResistance",value:function(){this.Resistance=l.M.sq(this.ratedV)/this.ratedP}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.bg&&2===this.bg.totalFrames&&(this.bg.currentFrame=Math.abs(t)>this.workV?1:0)}},{key:"reset",value:function(){this.ratedP=this.oriRateP,this.freshMyResistance(),this.freshLibPan(),this.diyChanged()}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.INPUT,name:this.language.getLocaleStr("ratedPowerfull"),showValue:this.ratedP+"W",enterUnit:"W",maxValue:3e3,minValue:1,callBack:function(e){t.ratedP=l.M.getNumStr(e.showValue)-0,t.freshMyResistance(),t.diyChanged()}}),i}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("ratedVoltage")+": "+this.ratedV+"V\n    ",this.ratedP!==undefined&&(t+=this.language.getLocaleStr("ratedPowerfull")+": "+this.ratedP+"W\n    "),t}}]),e}(h["default"])},487:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:h(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(226),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.useBottom=!1,i.useTop=!1,i.bottomCon=null,i.topCon=null,i.pinP={x:0,y:0},i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.useBottom&&(this.bottomCon=this._addCon(this.main.view.viewBottomStack)),this.useTop&&(this.topCon=this._addCon(this.main.view.viewTopStack)),this.updatePosition()}},{key:"removed",value:function(){this._removeCon(this.bottomCon),this._removeCon(this.topCon),this.bottomCon=null,this.topCon=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"updatePosition",value:function(){this.getPinView();var t=this.pinP,e=this.getRotInView();this.bottomCon&&(this.bottomCon.x=t.x,this.bottomCon.y=t.y,this.bottomCon.rotation=e),this.topCon&&(this.topCon.x=t.x,this.topCon.y=t.y,this.topCon.rotation=e)}},{key:"getRotInView",value:function(){return this.rotation}},{key:"getPinView",value:function(){this.pinP.x=this.x,this.pinP.y=this.y}},{key:"moveEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.updatePosition()}},{key:"_addCon",value:function(t){var e=new PIXI.Container;return t.addChild(e),e.interactive=!1,e.interactiveChildren=!1,e}},{key:"_removeCon",value:function(t){t&&t.parent&&t.parent.removeChild(t)}}]),e}(u["default"])},491:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e["default"]=function n(t,e){r(this,n),this.fl=t||0,this.re=e||0}},502:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function P(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:P(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(1),h=i(49),c=i(504),f=r(c),p=i(450),d=r(p),y=i(13),b=i(448),v=r(b),g=i(487),m=r(g),_=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.iElecInter=0,i.flagLabel="",i.loop=!1,i.curPower=0,i.curElec=0,i._Resistance=d["default"].MIN_RESISTANCE,i.Power=0,i.Source=0,i.huiUID="0",i.allCompArrT=[],i.staCompArrT=[],i.huiArr=[],i.bPsArr=[],i.isLock=!1,i.isZuHe=!1,i.zuheBox=null,i.zuheCompArr=[],i.ratedV=0,i.ratedP=0,i.ratedI=0,i.valid=!1,i._isBreak=!1,i.isShortCircuit=!1,i.elecConnect=!0,i.drawDis=37,i.branchChange=!1,i.isReLoopElec=!1,i}return a(e,t),s(e,[{key:"_addJnjection",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_addJnjection",this).call(this,t),this.elecUtil=t?this.moduleMain.elecUtil:null}},{key:"reLoop",value:function(){return!1}},{key:"moveDragHandle",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveDragHandle",this).call(this,t),this.updateBinds()}},{key:"configBPosters",value:function(t){var e=this;u.ArrayUtil.clear(this.bPsArr),u.ArrayUtil.clear(this.owenBindingers),$.each(t,function(t,i){u.StringUtil.contains(t,"bposter")&&(e[t]=i,i.bodyBposterName=t,e.addBinPoster(i,i.bindinger.body))})}},{key:"createZuhe",value:function(t){var e=this;if(!this.hadDestory){this.isZuHe=!0;var i=[],r=[],n=[],o=void 0,a=t.bar||0,s=t.inductor||0,l=t.capacitance||0;for(o=1;a>=o;o++)i.push("bar"+o);for(this.createBRes(i),o=a+1;a+s>=o;o++)r.push("bar"+o);for(this.createBInductor(r),o=a+s+1;a+s+l>=o;o++)n.push("bar"+o);this.createBCapacitance(n);var u={};$.each(t.pos,function(t,i){u["bposter"+t]=e["bar"+i[0]]["bposter"+i[1]]}),this.configBPosters(u),t.wire&&$.each(t.wire,function(t,i){e["wire"+(t+1)]=e.createBWire(e["bar"+i[0][0]]["bposter"+i[0][1]],e["bar"+i[1][0]]["bposter"+i[1][1]])}),t.res&&$.each(t.res,function(t,i){e["bar"+i[0]].Resistance=i[1]}),$.each(t.pos,function(t,i){e.elecUtil.setBindXY(e["bposter"+t],e["bp"+t]),e["bposter"+t].ind=t})}}},{key:"createBRes",value:function(t){var i=this;$.each(t,function(t,r){var n=(0,h.extend)({name:r,zuheBox:i},i.paramObj),o=new e.zhClassMap.BaseElecResistance(n);i[r]=o,o.bposter0.x=o.bposter0.y=-5e4,o.bposter1.x=o.bposter1.y=-5e4,i.zuheCompArr.push(o)})}},{key:"createBInductor",value:function(t){var i=this;$.each(t,function(t,r){var n=(0,h.extend)({name:r,zuheBox:i},i.paramObj),o=new e.zhClassMap.BaseInductor(n);i[r]=o,o.bposter0.x=o.bposter0.y=-5e4,o.bposter1.x=o.bposter1.y=-5e4,i.zuheCompArr.push(o)})}},{key:"createBCapacitance",value:function(t){var i=this;$.each(t,function(t,r){var n=(0,h.extend)({name:r,zuheBox:i},i.paramObj),o=new e.zhClassMap.BaseCapacitance(n);i[r]=o,o.bposter0.x=o.bposter0.y=-5e4,o.bposter1.x=o.bposter1.y=-5e4,i.zuheCompArr.push(o)})}},{key:"createBWire",value:function(t,i){var r=(0,h.extend)({zuheBox:this},this.paramObj),n=new e.zhClassMap.BaseElecWire(r);return n.linkTwoBindMC(t,i),this.zuheCompArr.push(n),n.zuheBox=this,n}},{key:"addBinPoster",value:function(t,e){e||(e=this);var i=new f["default"](e,t,t.name);return this.bPsArr.push(i),null!==t&&(t.alpha=0),i}},{key:"addBinWirePoster",value:function(t){var e=new f["default"](this,t,t.name);return this.bPsArr.push(e),e}},{key:"diyChanged",value:function(){this.elecUtil&&this.elecUtil.diyChanged()}},{key:"initZuhe",value:function(){}},{key:"addedFore",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.initZuhe()}},{key:"freshDp",value:function(){var t=this;if(!this.elecUtil.checkIsWire(this))for(var e=0;this.bPsArr.length>e;e++){var i=this["bposter"+e];if(!i)break;var r=i.position;if(!r)break;if(r=r.add(i.dp),!i.dpSP&&i.bindinger.canStartDrawElecWire){var n=new PIXI.Graphics,o=this.globalConfig.DEBUG_DP?.5:0;n.beginFill(16711680,o),n.drawCircle(0,0,this.drawDis),n.endFill(),this.canRotate?this.componentBox.addChild(n):this.addChild(n),i.dpSP=n,n.poster=i,n.name=i.name+"_dpSP",i.dpSP.touchId=u.M.addTouch(n,{begin:function(e){if((0,h.get)(e,"target.poster.bindinger.canStartDrawElecWire")&&1!==t.iElecInter)if(t.ori_cannotSystemDrag=t.cannotSystemDrag,t.cannotSystemDrag=!0,-3===t.iElecInter)t.main.dispatchEvent(y.PHY_EVENTS.BPOSTER_DPSP_DOWN,e);else{t.main.viewStack.parent.updateTransform();var i=t.main.viewStack.toLocal(new u.Point,e.target);t.moduleMain.drawLineComp.startDrawElecWire.call(t.moduleMain.drawLineComp,i,e)}},move:function(e){t.main.dispatchEvent(y.PHY_EVENTS.BPOSTER_DPSP_MOVE,e)}}),this.globalConfig.DEBUG_GLOW&&(n.visible=!1)}i.dpSP&&u.M.setSPPoint(i.dpSP,r)}}},{key:"addBposterMouseStatus",value:function(t){if(t){if(!this._hasAddBposterMouseStatus){this._hasAddBposterMouseStatus=!0;for(var e=0;this.bPsArr.length>e;e++){var i=this["bposter"+e];i.dpSP&&this.addCursor(i.dpSP,"huizhi")}}}else if(this._hasAddBposterMouseStatus){this._hasAddBposterMouseStatus=!1;for(var r=0;this.bPsArr.length>r;r++){var n=this["bposter"+r];this.removedCursor(n.dpSP)}}}},{key:"addedEnd",value:function(){if(this.freshDp(),this.globalConfig.DEBUG_SHOW_UNNODE&&!this.elecUtil.checkIsWire(this)){for(var t=0;this.bPsArr.length>t;t++){var e=this["bposter"+t],i=new PIXI.Sprite;this.addChild(i),e.unNodeSP=i,u.M.setSPPointXY(i,e.dpSP.x,e.dpSP.y+20);var r=new PIXI.Text("0",{font:'30px "Microsoft Yahei"',fill:13421568,align:"left"});i.addChild(r),i.unLabel=r,r.y=30*t;var n=new PIXI.Text("",{font:'30px "Microsoft Yahei"',fill:16737792,align:"left"});i.addChild(n),i.numberLabel=n,n.y=r.y+30;var o=new PIXI.Text("",{font:'30px "Microsoft Yahei"',fill:16711680,align:"left"});i.addChild(o),i.wangLabel=o,o.y=n.y+30,o.visible=this.globalConfig.DEBUG_SHOW_UNNODE_WANG}var a=new PIXI.Text("",{font:'34px "Microsoft Yahei"',fill:10027008,align:"left"});this.addChild(a),this.elecNumLabel=a,a.text="编号: "+v["default"].elecNumLabel++;var s=this.getLocalBounds();a.x=s.x+s.width/2,a.y=s.y-30}this.elecUtil.checkIsWire(this)||this.addBposterMouseStatus(!0)}},{key:"removed",value:function(){var t=this;if(this.elecUtil.deleteEqUID(this.UID),this.addBposterMouseStatus(!1),this.isZuHe&&each(this.zuheCompArr,function(t,e){e.removed.call(e),e.zuheBox=null}),this.zuheCompArr=null,this.elecUtil.checkIsWire(this))for(var i=this.bPsArr.length,r=0;i>r;r++){var n=this.bPsArr[r];n.clear_friend.call(n)}var o=this.elecUtil.getAllElecWires(this);this.bPsArr&&$.each(this.bPsArr,function(e,i){i.body&&(i.BindMC&&(i.BindMC.body=null,i.BindMC.dpSP&&(u.M.removeTouch(i.BindMC.dpSP,i.BindMC.dpSP.touchId),i.BindMC.dpSP=null)),each(i.friendPostersArr,function(t,e){"ElecWire"===e.body.classname&&(e.BindMC.wire_h_mc.linkBposter=null)}),i.desdroy.call(i),t["bposter"+e]&&(t["bposter"+e]=null))}),each(o,function(t,e){e.freshTouDirect.call(e),e.show_h_mc.call(e,!0)}),this.bPsArr=null,u.ArrayUtil.removeValueFromArray(this.allCompArrT,this),u.ArrayUtil.removeValueFromArray(this.staCompArrT,this),this.allCompArrT=null,this.staCompArrT=null,this.huiArr=null,this.elecUtil=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"repair",value:function(){this.isBreak=!1,this.diyChanged(),this.dispatchEvent(y.PHY_EVENTS.SET_WORK_POWER_REPAIR)}},{key:"break",value:function(){this.isBreak=!0,this.dispatchEvent(y.PHY_EVENTS.SET_WORK_POWER_BREAK)}},{key:"bindWire",value:function(t,e){}},{key:"setWorkElec",value:function(t){}},{key:"setWorkPower",value:function(t){}},{key:"setWorkElecDel",value:function(t){}},{key:"setWorkPowerDel",value:function(t){}},{key:"caculateOver",value:function(){}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.uid=this.UID,t.isBreak=this.isBreak,t.flagLabel=this.flagLabel,t.Resistance=this.Resistance,t.Power=this.Power,t.posts=[],this.bPsArr.forEach(function(e,i){t.posts[i]={UID:e.UID}}),t}},{key:"setData",value:function(t){this.UID=t.uid,this.isBreak=t.isBreak,this.flagLabel=t.flagLabel,this.Resistance=t.Resistance,this.Power=t.Power,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),t.posts&&this.bPsArr.forEach(function(e,i){t.posts[i]&&(e.UID=t.posts[i].UID)})}},{key:"setDataOver",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.freshDp()}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}},{key:"loopHandle",value:function(){}},{key:"rotateChange",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t)}},{key:"checkHasPower",value:function(t){if(t&&t.huiArr){t=t||this;var e=void 0,i=t.huiArr.length;for(e=0;i>e;e++){var r=t.huiArr[e];if("ElecNo"!==r.classname&&r.Power>0)return!0}}return!1}},{key:"revokeOver",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revokeOver",this).call(this),setTimeout(function(){t.hadDestory||t.updateBinds()},50)}},{key:"moveFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t)}},{key:"endFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t),1!==this.iElecInter&&"ElecWire"!==this.classname&&this.ori_cannotSystemDrag!==undefined&&(this.cannotSystemDrag=this.ori_cannotSystemDrag,delete this.ori_cannotSystemDrag)}},{key:"getLocalBoundsElecs",value:function(){return this.canRotate?[this.componentBox]:this.bg?[this.bg]:[this]}},{key:"freshEquipShows",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshEquipShows",this).call(this,t),this.label&&(this.label.visible=t)}},{key:"updateBinds",value:function(t,e){if(!this.elecUtil.checkIsWire(this)){for(var i=0;this.bPsArr.length>i;i++)this.bPsArr[i].bindingFllowIng(t);e&&this.elecUtil.getAllElecWires(this).forEach(function(t){t.freshTouDirect.call(t)})}}},{key:"beginEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginEnd",this).call(this,t),this.main.dispatchEvent(y.PHY_EVENTS.TIP_TOP_BEGIN,{target:this.bPsArr,type:2})}},{key:"endEnd",value:function(t){var i=this;if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),"ElecWire"!==this.classname){var r=!1;this.bPsArr.forEach(function(t){var e=i.elecUtil.getNearWireBinding(t);e.forEach(function(e){e.body.linkWireBindMC.call(e.body,e.BindMC,t.BindMC)}),e.length&&(r=!0)}),r&&this.diyChanged()}}},{key:"startStep",value:function(){}},{key:"endStep",value:function(){}},{key:"overStep",value:function(){this.caculateOver()}},{key:"Resistance",set:function(t){this._Resistance=t},get:function(){return this._Resistance}},{key:"UID",get:function(){return this._UID},set:function(t){this.elecUtil.setEqUID(this,t),this._UID=t}},{key:"elecType",get:function(){var t=void 0;switch(this.iElecInter){case 2:t=3;break;case 11:t=2;break;case 9:case 10:t=this.iElecInter;break;case 12:t=12;break;default:t=1}return t}},{key:"elect_Update",get:function(){return this.elecUtil.elect_Update}},{key:"electricField_Update",get:function(){return this.elecUtil.electricField_Update}},{key:"magneticField_Update",get:function(){return this.elecUtil.magneticField_Update}},{key:"isBreak",get:function(){return this._isBreak},set:function(t){this._isBreak=t}},{key:"numLabel",get:function(){return this.elecNumLabel.text}}]),e}(m["default"]);!function(){Promise.all([i.e(11).then(i.bind(null,480)),i.e(11).then(i.bind(null,522)),i.e(11).then(i.bind(null,586)),i.e(11).then(i.bind(null,585))]).then(function(t){_.zhClassMap={BaseElecWire:t[0]["default"],BaseElecResistance:t[1]["default"],BaseInductor:t[2]["default"],BaseCapacitance:t[3]["default"]}})}(),e["default"]=_},503:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),l=i(450),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t,i){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.body=i,i&&(o.moduleMain=i.moduleMain),o.UID=s.M.getUniqueID(),o.position=new s.Point(0,0),o.dp=new s.Point(0,0),o.isWireBind=!1,o.downFunc=null,o.upHandleFunc=null,o.wire_h_mc=null,o.name=t,o.initBindinger(),o}return o(e,t),a(e,[{key:"initBindinger",value:function(){this.body&&(this.moduleMain.elecUtil.checkIsWire(this.body)?(this.bindinger=this.body.addBinWirePoster(this),this.isWireBind=!0):(this.bindinger=this.body.addBinPoster(this),this.isWireBind=!1))}},{key:"freshPosition",value:function(t,e){this.position.x=t,this.position.y=e,this.isWireBind&&this.dispatchEvent(u["default"].BINDMC_POTISON_CHANGED)}},{key:"toGlobal",value:function(){var t=null;return this.bindinger&&this.bindinger.body?("BaseElecResistance"===this.bindinger.body.classname||"BaseInductor"===this.bindinger.body.classname||"BaseCapacitance"===this.bindinger.body.classname?(this.bindinger.body.zuheBox.parent.updateTransform(),t=this.bindinger.body.zuheBox.toGlobal(this.position)):(this.bindinger.body.parent.updateTransform(),t=this.bindinger.body.toGlobal(this.position)),t):null}},{key:"getGlobalBp",value:function(){var t=this.position.add(this.dp),e=null;return this.bindinger&&this.bindinger.body?("BaseElecResistance"===this.bindinger.body.classname?(this.bindinger.body.zuheBox.parent.updateTransform(),e=this.bindinger.body.zuheBox.toGlobal(t)):(this.bindinger.body.parent.updateTransform(),e=this.bindinger.body.toGlobal(t)),e):null}},{key:"x",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y=t}},{key:"alpha",get:function(){return this.isWireBind&&this.wire_h_mc?this.wire_h_mc.alpha:1},set:function(t){this.isWireBind&&this.wire_h_mc&&(this.wire_h_mc.alpha=t)}}]),e}(PIXI.Container)},504:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(1);e["default"]=function(){function t(e,i,n){if(r(this,t),this.UID=o.M.getUniqueID(),this.name="",this.myroad_arr=[],this._Un=0,this.unNode=null,this.body=e,this.canStartDrawElecWire=!0,e&&(this.globalConfig=e.moduleMain.globalConfig,this.elecUtil=e.elecUtil),this.BindMC=i,this.BindMC.bindinger&&this.BindMC.bindinger.body){this.BindMC.bindinger.body.bPsArr.splice(o.ArrayUtil.getIndexFromValue(this.BindMC.bindinger.body.bPsArr,this.BindMC.bindinger),1,this)}this.BindMC.bindinger=this,this.name=n,this.friendPostersArr=[],this.linkPostersArr=[],this.linkWireType=0}return n(t,[{key:"clear_friend",value:function(){for(var t=this.friendPostersArr.length,e=0;t>e;e++){var i=this.friendPostersArr[e],r=0;if(i){for(var n=i.friendPostersArr.length,a=0;n>a;a++){if(i.friendPostersArr[a]===this){i.friendPostersArr.splice(r,1);break}r++}this.elecUtil.checkIsWire(i.body)&&(i.BindMC.alpha=1)}}o.ArrayUtil.clear(this.friendPostersArr)}},{key:"desdroy",value:function(){$.each(this.friendPostersArr,function(t,e){o.ArrayUtil.clear(e.friendPostersArr)}),this.friendPostersArr=null,this.BindMC.bindinger=null,this.BindMC.wire_h_mc=null,this.BindMC=null,this.body=null,o.ArrayUtil.clear(this.myroad_arr),this.myroad_arr=null}},{key:"set_myroad",value:function(t,e){void 0===e&&(e=1e-6);var i=void 0,r=this.myroad_arr.length,n=!1;for(i=0;r>i;i++){if(this.myroad_arr[i].to==t){n=!0;break}}if(!n){this.myroad_arr.push({to:t,zu:e});t.myroad_arr.push({to:this,zu:e})}}},{key:"clear_myroad",value:function(){var t=void 0,e=void 0,i=void 0,r=void 0;for(i=this.myroad_arr.length,t=0;i>t;t++){var n=this.myroad_arr[t],a=0;for(r=n.to.myroad_arr.length,e=0;r>e;e++){if(n.to.myroad_arr[e].to==this){n.to.myroad_arr.splice(a,1);break}a++}}o.ArrayUtil.clear(this.myroad_arr)}},{key:"nearToBinding",value:function(){this.globalConfig.main.view.updateTransform();var t=this.globalConfig.main.view.toLocal(new o.Point,this.BindMC),e=void 0,i=void 0,r=void 0,n=[],a=this.globalConfig.main.getEquipmentArr(),s=a.length;for(i=0;s>i;i++)if((e=a[i].component)&&!this.elecUtil.checkIsWire(e)&&e.bPsArr&&(!e.showLineType||1===e.showLineType)){var l=e.bPsArr.length;for(r=0;l>r;r++){var u=e.bPsArr[r];if(!u.body.isZuHe&&(!u.BindMC.cannotBindWire&&u.canStartDrawElecWire)){var h=this.globalConfig.main.view.toLocal(new o.Point,u.BindMC);if(0!==h.x||0!==h.y){var c=o.M.getPointLen(t,h);c>this.globalConfig.connectMinDistanceNumber||n.push({distance:c,component:u.body,bPsIt:u})}}}}var f=!1;return n.length&&(n.sort(function(t,e){return e.distance>t.distance?-1:1}),f=this.nearToBinding__0(n[0])),f}},{key:"nearToBinding__0",value:function(t){var e=t.component,i=t.bPsIt,r=i;if(this.elecUtil.getWireLinkBposter("bposter0"===this.BindMC.name?this.BindMC.body.bposter1:this.BindMC.body.bposter0)===i)return!1;this.elecUtil.linkWireBindMC(this.BindMC,i.BindMC);var n=this.body.toLocal(r.BindMC.position,r.BindMC);return this.BindMC.freshPosition(n.x,n.y),e.bindWire(i,this.BindMC),this.body._drawLine.call(this.body),!0}},{key:"breakBinding",value:function(){var t=this.elecUtil.checkIsWire(this.body),e=this.UID;$.each(this.friendPostersArr,function(i,r){r&&r.friendPostersArr&&$.each(r.friendPostersArr,function(i,n){if(n.UID===e)return o.ArrayUtil.removeValueFromIndex(r.friendPostersArr,i),t||(r.BindMC.alpha=1),!1})}),o.ArrayUtil.clear(this.friendPostersArr),t||(this.BindMC.alpha=1)}},{key:"bindingFllowIng",value:function(t){if(this.BindMC){new o.Point(this.BindMC.x,this.BindMC.y);if(this.body){var e=void 0,i=void 0;for(i=0;this.friendPostersArr.length>i;i++)if(e=this.friendPostersArr[i],"ElecWire"===e.body.classname||"ElecFamilyWire"===e.body.classname){var r=e.body.toLocal(this.BindMC.position,this.BindMC);e.BindMC.freshPosition(r.x,r.y),e.body._drawLine.call(e.body,!1,t)}else"SElecWire"===e.body.classname?(o.M.setSPPoint(e.BindMC.position,this.BindMC.position),e.body.caculateAndDraw.call(e.body)):"BaseElecWire"===e.body.classname&&e.body.dispatchEvent(e.body.constructor.UPDATE_POSTER_POSITION)}}}},{key:"Un",set:function(t){this._Un=t,this.BindMC.unNodeSP&&(this.BindMC.unNodeSP.unLabel.text=t)},get:function(){return this._Un}},{key:"UID",get:function(){return this._UID},set:function(t){this.elecUtil&&this.elecUtil.setEqUID(this,t),this._UID=t}}]),t}()},522:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(448),l=r(s),u=i(450),h=r(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=6;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.name=t.name,i.zuheBox=t.zuheBox,i.Resistance=t.resistance||h["default"].MIN_RESISTANCE,i.classname="BaseElecResistance",i.bposter0.bindinger.set_myroad(i.bposter1.bindinger,i.Resistance),i}return a(e,t),e}(l["default"])},523:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(1),s=i(535),l=r(s),u=i(534),h=r(u),c=i(450),f=r(c);e["default"]=function(){function t(e){n(this,t),this.INPUT_ELEC_NAME_DEBUG=!1,this.SHOW_UNNODES_DEBUG=!1,this.moduleMain=e,this.globalConfig=e.globalConfig,this.main=this.globalConfig.main,this.NBEvent=this.main.constructor.NBEvent,this.ZERO_RESISTANCE=f["default"].MIN_RESISTANCE,this.allCompArr=[],this.staCompArr=[],this.zuheCompArr=[],this.huiArr=[],this.isChangeTrue=!1,this.time=0,this.timeStep=5e-6,this.stepLoopStepTime=0,this.addLoopInit()}return o(t,[{key:"checkAllChanged",value:function(){this.isChangeTrue=!0,this.updateCircuit()}},{key:"updateCircuit",value:function(){this.freshEquipmentArr(),this.checkNodeChange()&&(this.setChangeFalse(),this.runCircuit())}},{key:"checkNodeChange",value:function(){if(this.isChangeTrue)return!0;for(var t=!1,e=this.allCompArr.length,i=0;e>i;i++){if(this.allCompArr[i].branchChange){t=!0;break}}return t}},{key:"setChangeFalse",value:function(){this.isChangeTrue=!1;for(var t=this.allCompArr.length,e=0;t>e;e++){this.allCompArr[e].branchChange=!1}}},{key:"runCircuit",value:function(){this.startStepDis(),this.doStepDis()?this.isChangeTrue=!0:this.endStepDis()}},{key:"startStepDis",value:function(){for(var t=this.allCompArr.length,e=0;t>e;e++){var i=this.allCompArr[e];i._findFlag=0,i.huiArr=[],i.bPsArr.forEach(function(t){t.Un=0,t.unNode=null,t._findFlag=0}),i.startStep.call(i)}}},{key:"doStepDis",value:function(){var t=this,e=!1;return this.findHuiArr().forEach(function(i){i.forEach(function(t){t.huiArr=i});var r=new h["default"](t);if(r.createNodes(i),r.elecArr.length&&r.unNodes.length){var n=r.elecArr.length,o=new l["default"];o.setHead(r.unNodes.length-1);for(var s=0;n>s;s++){var u=r.elecArr[s];if(1===u.elecType)u.Resistance>0?o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,u.Resistance,1):0===u.Resistance&&t.showElecLine&&o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,t.ZERO_RESISTANCE,1);else if(9===u.elecType||10===u.elecType)o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,u.compResistance,1),o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,u.Source,2);else if(3===u.elecType)o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,-u.Power,3);else if(2===u.elecType)o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,-u.Source,2);else if(12===u.elecType){var c=u.bposter0.bindinger.unNode.number,f=u.bposter1.bindinger.unNode.number,p=u.bposter2.bindinger.unNode.number,d=u.bposter3.bindinger.unNode.number;o.appendVCCurrentSource(c,p,f,d,u.node_a2),o.appendVCCurrentSource(f,d,c,p,u.node_a3),o.appendBranch(c,p,a1,13),o.appendBranch(f,d,a4,13),o.appendBranch(c,p,u.Source1,2),o.appendBranch(f,d,u.Source2,2)}}var y=o.caculate();if(y&&y.vns){for(var b=null,v=0,g=0;y.vns.length>g;g++){var m=r.unNodes[g+1];m.Un=y.vns[g][0],m.isGround&&(b=m),v=Math.min(v,m.Un)}b&&(v=b.Un),r.unNodes.forEach(function(t){t.Un-=v})}else{for(var _=0;r.unNodes.length>_;_++)r.unNodes[_].destroy.call(r.unNodes[_]);a.ArrayUtil.clear(r.unNodes)}r.unNodes.forEach(function(t){t.freshUn.call(t)});var P=r.reLoopCacu();e=e||P}}),e}},{key:"endStepDis",value:function(){for(var t=this.allCompArr.length,e=0;t>e;e++){var i=this.allCompArr[e];i.endStep.call(i);var r=i.bPsArr;2===r.length&&(r[0].unNode&&r[1].unNode&&r[0].unNode.UID===r[1].unNode.UID?(i.curPower=r[1].Un-r[0].Un,0!==i.Resistance&&i.Resistance!==f["default"].MAX_RESISTANCE?(i.curElec=i.isBreak?0:i.curPower/i.Resistance,i.setWorkElec.call(i,i.curElec)):0===i.Resistance&&(this.showElecLine?(i.curElec=i.isBreak?0:i.curPower/this.ZERO_RESISTANCE,i.setWorkElec.call(i,i.curElec)):i.setWorkElec.call(i,null)),i.setWorkPower.call(i,i.curPower)):(i.curPower=0,i.curElec=0,i.isBreak||(i.setWorkElec.call(i,0),i.setWorkPower.call(i,0)))),i.overStep.call(i)}this.zuheCompArr.forEach(function(t){t.overStep.call(t)})}},{key:"freshEquipmentArr",value:function(){var t=this;a.ArrayUtil.clear(this.zuheCompArr),a.ArrayUtil.clear(this.allCompArr),a.ArrayUtil.clear(this.staCompArr);for(var e=this.main.viewStack.children.length,i=0;e>i;i++){var r=this.main.viewStack.getChildAt(i).component;r.bposter0&&r.bposter1&&(r.isZuHe?(this.zuheCompArr.push(r),this.allCompArr=this.allCompArr.concat(r.zuheCompArr)):this.allCompArr.push(r),this.staCompArr.push(r))}if(7===this.globalConfig.version&&this.moduleMain.elecFamilyPower){var n=this.moduleMain.elecFamilyPower;this.zuheCompArr.push(n),this.allCompArr=this.allCompArr.concat(n.zuheCompArr)}if(this.moduleMain.groundElecManager){this.moduleMain.groundElecManager.getAllLinkElec().forEach(function(e){t.allCompArr.push(e)})}}},{key:"findHuiArr",value:function(){for(var t=this,e=this.allCompArr.filter(function(t){return!(t.isBreak||!t.elecConnect)}),i=[];e.length;){(function(){var r=e.shift();if(0!==r._findFlag)return"continue";r._findFlag=1;for(var n=[r],o=[];n.length;)!function(){var e=n.shift();if(e.bPsArr.forEach(function(t){t.friendPostersArr.forEach(function(t){var e=t.body;e&&!e.isBreak&&e.elecConnect&&0===e._findFlag&&(e._findFlag=1,n.push(e))})}),e.isGround&&t.moduleMain.groundElecManager){t.moduleMain.groundElecManager.getAllLinkElec().forEach(function(t){!t.isBreak&&t.elecConnect&&t.UID!==e.UID&&0===t._findFlag&&(t._findFlag=1,n.push(t))})}e._findFlag=2,o.push(e)}();i.push(o)})()}return i}},{key:"addLoopInit",value:function(){this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.main.addEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandle({isRunning:this.main.isRunning})}},{key:"canvasRunHandle",value:function(t){this.setActive(t.isRunning)}},{key:"setActive",value:function(t){}},{key:"stepLoop",value:function(){var t=this;this.stepLoopStepTime>0?this.stepLoopTimerFlag||(this.stepLoopTimerFlag=setTimeout(function(){t.updateCircuit(),t.time+=t.timeStep,t.stepLoopTimerFlag=0},this.stepLoopStepTime)):(this.updateCircuit(),this.time+=this.timeStep)}},{key:"clearAll",value:function(){this.allCompArr=[],this.staCompArr=[],this.zuheCompArr=[],this.huiArr=[]}},{key:"destroy",value:function(){this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"showElecLine",get:function(){return this.globalConfig.showElecLine}}]),t}()},524:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(1),a=i(530),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(){r(this,t),this.elecArr_=[],this.CONST_k=9e9,this.GAN_VALID_MAXDIS=300,this.GAN_VALID_MINDIS=40}return n(t,[{key:"appendOne",value:function(t,e,i,r){this.elecArr_.push(new s["default"](t,e,new o.Vector2DMath(i,r)))}},{key:"clear",value:function(){o.ArrayUtil.clear(this.elecArr_)}},{key:"caculate",value:function(){var t=void 0,e=void 0,i=void 0,r=void 0;for(i=this.elecArr_.length-1,r=this.elecArr_.length,t=0;i>t;t++)for(e=t+1;r>e;e++){var n=this.getTwo_ganNum(this.elecArr_[t],this.elecArr_[e]);0>this.elecArr_[e].elecNum?this.elecArr_[t].ganNum-=n:this.elecArr_[t].ganNum+=n;var o=this.getTwo_ganNum(this.elecArr_[e],this.elecArr_[t]);0>this.elecArr_[t].elecNum?this.elecArr_[e].ganNum-=o:this.elecArr_[e].ganNum+=o}}},{key:"getTwo_ganNum",value:function(t,e){var i=void 0,r=t.v.dist(e.v);return i=r>this.GAN_VALID_MINDIS?this.GAN_VALID_MAXDIS>r?e.elecNum*this.GAN_VALID_MINDIS/r:0:e.elecNum,Math.abs(i)}},{key:"getElecV",value:function(t,e,i){var r=new o.Vector2DMath,n=this;return $.each(this.elecArr_,function(a,s){if(i&&o.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=n.getOneElecV(t,e,s);r.add(l)}),r}},{key:"getOneElecV",value:function(t,e,i){var r=i.v.dist_XY(t,e);if(0==r||r>2*this.GAN_VALID_MAXDIS)return new o.Vector2DMath(0,0);var n=Math.abs(this.CONST_k*i.elecNum/i.v.distSquared_XY(t,e)),a=new o.Vector2DMath(t-i.v.x,e-i.v.y);0>i.elecNum&&(a.x=-a.x,a.y=-a.y);var s=a.length;return new o.Vector2DMath(a.x/s*n,a.y/s*n)}},{key:"elecArr",value:function(){return this.elecArr_}}]),t}()},525:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(524),a=function(t){return t&&t.__esModule?t:{"default":t}}(o),s=i(1);e["default"]=function(){function t(e){r(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.allCompArr=[],this.staCompArr=[],this.zuheFiledCompArr=new s.HashMap,this.core_=new a["default"],this.huiArr=[],this.oneHuiArr=new s.HashMap,this.allCompArrW_=[],this.allCompArrT=[]}return n(t,[{key:"checkAllChanged",value:function(){var t=this;s.ArrayUtil.clear(this.huiArr),this.getAll_comp();var e=void 0;for(e=0;this.allCompArr.length>e;e++)this.allCompArr[e].isLock&&(this.allCompArr.splice(e,1),e--);this.allCompArrT=s.ArrayUtil.copyArray(this.allCompArr),this.cacu_allElecs(),this.setFriends(),$.each(this.staCompArr,function(e,i){i.allCompArr=this.allCompArr,i.staCompArr=this.staCompArr,i.caculateBegin.call(i),i.getElecVFunc=function(e,i){return t.getElecV(e.x,e.y,i)}}),this.average_huiArr(),this.core_.clear(),$.each(this.allCompArr,function(e,i){if(i.isLock)return!0;t.core_.appendOne(i.UID,i.elecNum,i.elecPoint.x,i.elecPoint.y)}),this.core_.caculate(),$.each(this.core_.elecArr_,function(e,i){t.allCompArr[e].ganNum=i.ganNum}),$.each(this.allCompArr,function(t,e){e.setGanYingElec.call(this,{ganNum:e.ganNum})}),$.each(this.allCompArr,function(e,i){var r=t.getElecV(i.elecPoint.x,i.elecPoint.y),n=t.getNearItem(i);n?(r.nearNum=n.elecNum,r.nearItem=n,i.setElectricField(r)):(r.nearNum=0,r.nearItem=null,i.setElectricField(r))}),$.each(this.staCompArr,function(t,e){if(e.isLock)return!0;e.caculateOver.call(e,"mag")})}},{key:"getNearItem",value:function(t){var e=1e5,i=null;return $.each(this.allCompArr,function(r,n){if(t==n||t.UID==n.UID||"WastPaper"==n.classname)return!0;var o=s.M.getPointLen(n.elecPoint,t.elecPoint);e>o&&(e=o,i=n)}),i}},{key:"average_huiArr",value:function(){$.each(this.huiArr,function(t,e){var i=0,r=0;$.each(e,function(t,e){if(e.isLock)return!0;r++,i+=e.elecNum});var n=Math.floor(i/r*10)/10;$.each(e,function(t,e){if(e.isLock)return!0;e.elecNum=n})})}},{key:"getElecV",value:function(t,e,i){var r=this.core_.getElecV(t,e,i);return{x:r.x,y:r.y}}},{key:"setFriends",value:function(){var t=this;$.each(this.allCompArr,function(t,e){s.ArrayUtil.clear(e.friendArr)}),$.each(this.huiArr,function(e,i){$.each(i,function(e,r){r.friendArr=t.get_item_friendArr(i,r)})})}},{key:"get_item_friendArr",value:function(t,e){var i=[];return $.each(t,function(t,r){r.UID!=e.UID&&i.push(r)}),i}},{key:"cacu_allElecs",value:function(){var t=this;this.oneHuiArr.clear();var e=[];if(0!=this.allCompArrT.length){for(e.push(this.allCompArrT.pop());e.length>0;){var i=e.shift();this.oneHuiArr.insert(i.UID,i);var r=this.get_OtherItems(i,this.allCompArr);if(!r)return;$.each(r,function(i,r){t.oneHuiArr.containsKey(r.UID)||s.ArrayUtil.arrayContainsValue(e,r)||(s.ArrayUtil.removeValueFromArray(t.allCompArrT,r),e.push(r))})}var n=this.oneHuiArr.values();2>n.length||this.huiArr.push(n),this.allCompArrT.length>0&&this.cacu_allElecs()}}},{key:"get_OtherItems",value:function(t,e){var i=[];return t?($.each(e,function(e,r){r.hitRect&&!r.isLock&&t.checkHitRect&&t.checkHitRect(r)&&i.push(r)}),i):this.hitArr_}},{key:"getAll_comp",value:function(){var t,e,i=void 0,r=void 0;this.hasZuhe=!1,s.ArrayUtil.clear(this.allCompArr),s.ArrayUtil.clear(this.staCompArr),this.zuheFiledCompArr.clear();var n=this.globalConfig.main.getEquipmentArr();for(i=n.length-1;i>=0;i--){var t=n[i];t&&(t.component&&(t=t.component,-2==t.iElecInter&&(this.staCompArr.push(t),t.isZuHeFiled?(this.zuheFiledCompArr.insert(t.UID,t),this.allCompArr=this.allCompArr.concat(t.zuheFiledCompArr),this.hasZuhe=!0):this.allCompArr.push(t))))}for(r=this.staCompArr.length,i=0;r>i;i++){var e=this.staCompArr[i];e.allCompArr=this.allCompArr,e.staCompArr=this.staCompArr}}},{key:"removeElec",value:function(t){t&&this.zuheFiledCompArr.remove(t.UID)}}]),t}()},526:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(1);e["default"]=function o(t,e,i){r(this,o),this.UID=t,this.magNum=e,(this.v=i)||(this.v=new n.Vector2DMath)}},527:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(1);e["default"]=function o(t,e,i,a,s){r(this,o),this.UID=t,this.lineL=e,this.v=i,a&&(this.topP=a.clone()),s&&(this.bottomP=s.clone()),this.v||(this.v=new n.Vector2DMath)}},528:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(1),s=i(526),l=r(s),u=i(527),h=r(u);e["default"]=function(){function t(){n(this,t),this.magArr_=[],this.magLineArr_=[],this.CONST_k=1e6,this.GAN_VALID_MAXDIS=120,this.GAN_VALID_MINDIS=40}return o(t,[{key:"appendOne",value:function(t,e,i,r){this.magArr_.push(new l["default"](t,e,new a.Vector2DMath(i,r)))}},{key:"appendLineOne",value:function(t,e,i,r,n,o){this.magLineArr_.push(new h["default"](t,r,new a.Vector2DMath(e,i),n,o))}},{key:"clear",value:function(){a.ArrayUtil.clear(this.magArr_),a.ArrayUtil.clear(this.magLineArr_)}},{key:"caculate",value:function(){var t=void 0,e=void 0;for(this.magArr_.length-1,this.magArr_.length,t=0;this.magArr_.length-1>t;t++)for(e=t+1;this.magArr_.length>e;e++){var i=this.getTwo_ganNum(this.magArr_[t],this.magArr_[e]);0>this["this"].magArr_[e].magNum?this.magArr_[t].ganNum-=i:this.magArr_[t].ganNum+=i;var r=this.getTwo_ganNum(this.magArr_[e],this.magArr_[t]);0>this.magArr_[t].magNum?this.magArr_[e].ganNum-=r:this.magArr_[e].ganNum+=r}}},{key:"getTwo_ganNum",value:function(t,e){var i=t.v.dist(e.v);return i>this.GAN_VALID_MINDIS?this.GAN_VALID_MAXDIS>i?e.magNum*this.GAN_VALID_MINDIS/i:0:e.magNum}},{key:"getMagV",value:function(t,e,i){var r=new a.Vector2DMath,n=this;return $.each(this.magArr_,function(o,s){if(i&&a.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=n.getOneMagV(t,e,s);r.add(l)}),$.each(this.magLineArr_,function(o,s){if(i&&a.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=n.getOneLineMagV(t,e,s);r.add(l)}),r}},{key:"getOneLineMagV",value:function(t,e,i){if(0==i.lineL)return new a.Vector2DMath;var r=new a.Vector2DMath,n=new a.Point(t,e),o=a.M.getPointLen(n,i.topP)+a.M.getPointLen(n,i.bottomP)-a.M.getPointLen(i.topP,i.bottomP),s=void 0;if(1>Math.abs(o))s=1;else{var l=a.M.getGaoDianFrom3Dian(n,i.topP,i.bottomP);if(!a.M.checkInLineAB(l,i.topP,i.bottomP,.5))return new a.Vector2DMath(0,0);s=a.M.getPointLen(n,l),s=Math.max(2,s)}var u=170-s/10;u=Math.max(1,u),u*=i.lineL;var h=new a.Point(i.topP.x-i.bottomP.x,i.topP.y-i.bottomP.y);h=a.M.rotaPoint(h,a.M.toHu(90)),r.x=h.x,r.y=h.y;var c=r.length;return new a.Vector2DMath(-r.x/c*u,-r.y/c*u)}},{key:"getOneMagV",value:function(t,e,i){if(0==i.v.dist_XY(t,e))return new a.Vector2DMath(0,0);var r=Math.abs(this.CONST_k*i.magNum/i.v.distSquared_XY(t,e)),n=new a.Vector2DMath(t-i.v.x,e-i.v.y);0>i.magNum&&(n.x=-n.x,n.y=-n.y);var o=n.length;return new a.Vector2DMath(n.x/o*r,n.y/o*r)}},{key:"get_magArr",value:function(){return this.magArr_}}]),t}()},529:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(1),a=i(528),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(e){r(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.allCompArr=[],this.staCompArr=[],this.core_=new s["default"]}return n(t,[{key:"checkAllChanged",value:function(){this.getAll_comp.call(this);var t=this;$.each(this.staCompArr,function(e,i){i.allCompArr=t.allCompArr,i.staCompArr=t.staCompArr,i.caculateBegin&&i.caculateBegin.call(t),i.getMagVFunc=function(t,e){return getMagV(t.x,t.y,e)}}),this.core_.clear(),$.each(this.allCompArr,function(e,i){if(i.isLock)return!0;if("AstElecComp"===i.classname){var r=Math.abs(i.curPower)>1e-6?i.curPower:0;t.core_.appendLineOne(i.UID,i.x,i.y,r,i.getGlobalTopP(),i.getGlobalBottomP())}else t.core_.appendOne(i.UID,i.magNum,i.magPoint.x,i.magPoint.y)}),$.each(this.allCompArr,function(e,i){if(i.isLock)return!0;var r=t.getMagV(i.magPoint.x,i.magPoint.y);if(i.setMagtricField){var n=t.getNearItem(i);n&&(r.nearNum=n.magNum,r.nearItem=n,i.setMagtricField(r))}}),$.each(this.allCompArr,function(t,e){if(e.isLock)return!0;e.caculateOver&&e.caculateOver.call(e)})}},{key:"getNearItem",value:function(t){var e=this.globalConfig.main.view.toLocal(new o.Point,t),i=1e5,r=null;return $.each(this.allCompArr,function(n,a){var s=o.M.getPointLen(a.magPoint,e);if(a.UID==t.UID||0==a.magNum)return!0;i>s&&(i=s,r=a)}),r}},{key:"getMagV",value:function(t,e,i){var r=this.core_.getMagV(t,e,i);return{x:r.x,y:r.y}}},{key:"getAll_comp",value:function(){o.ArrayUtil.clear(this.allCompArr),o.ArrayUtil.clear(this.staCompArr);var t=void 0,e=this.globalConfig.main.getEquipmentArr();for(t=e.length-1;t>=0;t--){var i=e[t];i&&(i.component&&(i=i.component,i.isLock||2==i.magType&&(this.staCompArr.push(i),i.isZuHeMag?this.allCompArr=this.allCompArr.concat(i.zuheCompArrMag):i.isYuan&&this.allCompArr.push(i))))}}},{key:"freshMag",value:function(t){$.each(this.staCompArr,function(e,i){i.freshMag&&i.freshMag(t)})}}]),t}()},530:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(1);e["default"]=function o(t,e,i){r(this,o),this.UID=t,this.elecNum=e,this.v=i,this.ganNum=0,this.v||(this.v=new n.Vector2DMath)}},533:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(491),a=function(t){return t&&t.__esModule?t:{"default":t}}(o);e["default"]=function(){function t(){r(this,t)}return n(t,null,[{key:"cmplx",value:function(t,e){return new a["default"](t,e)}},{key:"add",value:function(t,e){var i=new a["default"];return i.re=t.re+e.re,i.fl=t.fl+e.fl,i}},{key:"sub",value:function(t,e){var i=new a["default"];return i.re=t.re-e.re,i.fl=t.fl-e.fl,i}},{key:"time",value:function(t,e){var i=new a["default"];return i.re=t.fl*e.re+t.re*e.fl,i.fl=t.fl*e.fl-t.re*e.re,i}},{key:"divv",value:function(t,e){var i=new a["default"],r=e.re*e.re+e.fl*e.fl;return r?(r=1/r,i.re=(t.re*e.fl-t.fl*e.re)*r,i.fl=(t.fl*e.fl-t.re*e.re)*r,i):null}},{key:"sabs",value:function(t){return Math.sqrt(t.fl*t.fl+t.re*t.re)}},{key:"ang",value:function(t){var e=void 0;return 0===t.fl?e=90:(e=Math.atan2(t.re,t.fl),e=180*e/3.1415926),e}}]),t}()},534:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(1),a=i(538),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(e){r(this,t),this.UID=o.M.getUniqueID(),this.cacuMain=e,this.elecArr=null,this.allBPoster=[],this.allBPosterMap=new Map,this.unNodes=[],this.reLoopCompArr=[]}return n(t,[{key:"createNodes",value:function(t){if(this.elecArr=t,this.findAllBPosterAndReset(),this.createUnNodes(),this.cacuMain.SHOW_UNNODES_DEBUG)for(var e=0;this.unNodes.length>e;e++)for(var i=this.unNodes[e],r=0;i.bposterArr.length>r;r++);}},{key:"findAllBPosterAndReset",value:function(){var t=this;o.ArrayUtil.clear(this.unNodes),o.ArrayUtil.clear(this.allBPoster),this.allBPosterMap.clear(),this.elecArr.forEach(function(e){t.allBPoster=t.allBPoster.concat(e.bPsArr),e.isReLoopElec&&t.reLoopCompArr.push(e)}),this.allBPoster.forEach(function(e){t.allBPosterMap.set(e.UID,e)})}},{key:"createUnNodes",value:function(){for(var t=this,e=0;this.allBPoster.length;){var i=this.allBPoster.shift();if(0===i._findFlag){i._findFlag=1;for(var r=[i],n=new s["default"](this.UID),o=[];r.length;){var a=r.shift(),l=a.friendPostersArr;if(a.isGround){l=l.concat(a.friendPostersArr)}else if(!this.cacuMain.showElecLine&&2===a.body.bPsArr.length&&1===a.body.elecType&&0===a.body.Resistance&&!a.body.isBreak&&a.body.elecConnect){var u="bposter0"===a.BindMC.name?a.body.bposter1.bindinger:a.body.bposter0.bindinger;l=l.concat([u])}l=l.filter(function(e){var i=!1;return t.allBPosterMap.has(e.UID)?0===e._findFlag&&(i=!0):(i=!0,t.allBPosterMap.set(e.UID,e)),i&&(e._findFlag=1),i}),r=r.concat(l),a._findFlag=2,a.unNode=n,a.isGround&&(n.isGround=!0),o.push(a)}n.number=e,n.bposterArr=o,this.unNodes.push(n),e++}}}},{key:"reLoopCacu",value:function(){var t=!1;return this.elecArr.forEach(function(e){t=t||e.reLoop()}),t}}]),t}()},535:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(491),s=r(a),l=i(533),u=r(l),h=i(537),c=r(h);e["default"]=function(){function t(){n(this,t),this.debug=!1,this.inputDebug=!1,this.gn=[],this.jn=[],this.nt=0,this.nb=0,this.w=100*Math.PI,this.jr=[0],this.branchDataArr=[]}return o(t,[{key:"trace",value:function(){if(this.debug)for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i]}},{key:"setHead",value:function(t){this.nt=t}},{key:"appendBranch",value:function(t,e,i,r){this.branchDataArr.push([t,e,i]),this.jr.push(r)}},{key:"appendVCCurrentSource",value:function(t,e,i,r,n){this.branchDataArr.push([start,end,n,i,r]),this.jr.push(12)}},{key:"clear",value:function(){this.branchDataArr.splice(0,this.branchDataArr.length),this.jr.splice(1,this.jr.length-1),this.nt=0,this.nb=0}},{key:"caculate",value:function(){if(this.nb=this.branchDataArr.length,0===this.nt||0===this.nb)return null;for(var t=[],e=[],i=[],r=this.jn,n=this.gn,o=0;this.nt+5>o;o++){r[o]=new s["default"](0,0),e[o]=new s["default"](0,0),i[o]=new s["default"](0,0);for(var a=0;this.nt+5>a;a++)n[o]||(n[o]=[]),n[o][a]=new s["default"](0,0),t[o]||(t[o]=[]),t[o][a]=new s["default"](0,0)}var l=this.input(e),u=l.ny,h=l.at;this.trace("******ny******"),this.trace("ny:",u);for(var f=1;u>=f;f++){t[f]||(t[f]=[]);for(var p=1;u>=p;p++)n[f][p]||(n[f][p]=new s["default"]),t[f][p]=n[f][p];t[f][u+1]=r[f]}this.trace("******gna******");for(var d=1;u>=d;d++){for(var y="",b=1;u+1>=b;b++)y+="\t"+t[d][b].fl;this.trace(y)}if(this.gauss(t,i,u)>1e-9){this.trace("******a的转置******"),this.debug&&c["default"].traceMatrix(h),this.trace("******节点电压Vn******");for(var v=1;u>=v;v++)this.trace(v+"-----------\x3e"+i[v].fl+"+i"+i[v].re);for(var g=[],m=this.nt+1;u>=m;m++)g.push(i[m].fl);this.trace("******节点电压Vn实体部分 vns******");for(var _=[],P=1;this.nt>=P;P++)_[P-1]||(_[P-1]=[]),_[P-1][0]=i[P].fl;this.debug&&c["default"].traceMatrix(_),this.trace("******支路电压 Ub = At * GN ******");var w=c["default"].multiply(h,_);return this.debug&&c["default"].traceMatrix(w),{vns:_,ub:w,list:g}}return this.trace("没结果!"),null}},{key:"conclus",value:function(t,e,i){var r=this.w,n=this.nt;this.trace("*********节点电压*********");for(var o=1;n>=o;o++)this.trace("VN["+o+"]="+t[o].fl+"+j"+t[o].re);this.trace("*******电压源支路电流*******");for(var a=n+1;i>=a;a++)this.trace("IS["+e[a]+"]="+t[a].fl+"+j"+t[a].re);this.trace("***********时域形式***********");for(var s=1;n>=s;s++)this.trace("vn["+s+"]="+u["default"].sabs(t[s])+"cos("+r+"t+"+u["default"].ang(t[s])+")");for(var l=n+1;i>=l;l++)this.trace("IS["+e[l]+"]="+u["default"].sabs(t[l])+"cos("+r+"t+"+u["default"].ang(t[l])+")")}},{key:"input",value:function(t){var e=[],i=[],r=void 0,n=[],o=[],a=[],s=[],l=[],u=this.nt,h=this.nb,f=this.w;this.trace("节点数NT "+u+",支路数NB "+h+",角频率W "+f),r=u;for(var p=this.jr,d=1;h>=d;d++)switch(this.trace("编号 "+d+", 类型 "+p[d]),p[d]){case 1:case 2:case 9:case 10:case 13:this.gj(d,p,e,n,s,l,f,this.branchDataArr[d-1]);break;case 3:r++,this.es(d,e,n,s,l,r,o,this.branchDataArr[d-1]),t[r]=d;break;case 4:r++,this.vcvs(d,e,n,s,r,i,o),t[r]=d;break;case 5:this.vccs(d,e,n,s,i);break;case 6:r++,this.ccvs(d,e,n,s,r,i,o),t[r]=d;break;case 7:this.cccs(d,e,n,s,i,o);break;case 8:this.hllm(d,e,n,s,l,i,f);break;default:this.trace("error")}this.trace("============GN==============");for(var y=1;u+1>=y;y++){for(var b="",v=1;u+1>=v;v++)b+="\t"+this.gn[y][v].fl;this.trace(b)}this.trace("============RHS==============");for(var g="",m=1;u+1>=m;m++)g+="\t"+this.jn[m].fl;this.trace(g);for(var _=1;h+1>=_;_++)a[e[_]]||(a[e[_]]=[]),a[n[_]]||(a[n[_]]=[]),a[e[_]][_-1]=1,a[n[_]][_-1]=-1;for(var P=0;a.length>P;P++)for(var w=0;h>w;w++)a[P]||(a[P]=[]),a[P][w]||(a[P][w]=0);a.shift(),this.trace("******************"),this.trace("输入节点数NT 输入支路数NB 扩展行NY 输入角频率W"),this.trace("NT\tNB\tNY\tW"),this.trace(u+"\t"+h+"\t"+r+"\t"+f),this.trace("********各支路参数**********"),this.trace("编号I 支路类型JR 起点编号NS 止点编号NF 参数DX 元件类型ICR 初相角DXC 控制支路编号IC"),this.trace("I\tJR\tNS\tNF\tDX\tDXC\tIC");for(var k=1;h>=k;k++)this.trace(k+"\t"+p[k]+"\t"+e[k]+"\t"+n[k]+"\t"+s[k]+"\t"+l[k]+"\t"+i[k]);return this.trace("******关联矩阵a******"),this.debug&&c["default"].traceMatrix(a),{ny:r,at:c["default"].transpose(a)}}},{key:"gj",value:function(t,e,i,r,n,o,a,l){var h=this.gn,c=this.jn,f=void 0,p=void 0,d=new s["default"](1,0),y=new s["default"],b=new s["default"],v=l;if(i[t]=v[0],r[t]=v[1],1===e[t]||9===e[t]||10===e[t]||13===e[t])n[t]=v[2],this.trace("输入起点，止点，参数及元件类型（R：１，L：２，C：３）:",i[t],r[t],n[t]),f=i[t],p=r[t],1===e[t]||13===e[t]?(y.fl=n[t],y.re=0):9===e[t]?(y.fl=0,y.re=n[t]*a):10===e[t]&&(y.fl=0,y.re=-1/(n[t]*a)),b=13===e[t]?y:u["default"].divv(d,y),0!==f&&0!==p?(this.buGn(f,p),h[f][f]=u["default"].add(h[f][f],b),h[p][p]=u["default"].add(h[p][p],b),h[p][f]=u["default"].sub(h[p][f],b),h[f][p]=u["default"].sub(h[f][p],b)):0===p?(this.buGn(f),h[f][f]=u["default"].add(h[f][f],b)):(this.buGn(p),h[p][p]=u["default"].add(h[p][p],b));else{o[t]=0,n[t]=v[2],this.trace("输入起点，止点与参数及初相角: ",i[t],r[t],n[t],o[t]);var g=3.14159*o[t]/180;y.fl=n[t]*Math.cos(g),y.re=n[t]*Math.sin(g),f=i[t],p=r[t],f&&(c[f]=u["default"].sub(c[f],y)),p&&(c[p]=u["default"].add(c[p],y))}}},{key:"es",value:function(t,e,i,r,n,o,a,l){var u=this.gn,h=this.jn,c=new s["default"],f=new s["default"](1,0),p=new s["default"](-1,0),d=l;e[t]=d[0],i[t]=d[1],r[t]=d[2],n[t]=0,this.trace("输入电压源的起点，止点与参数及初相角: ",e[t],i[t],r[t],n[t]);var y=e[t],b=i[t];a[t]=o,0!==y&&(this.buGn(y,o),u[y][o]=f,u[o][y]=f),0!==b&&(this.buGn(b,o),u[b][o]=p,u[o][b]=p);var v=n[t]*Math.PI/180;c.fl=r[t]*Math.cos(v),c.re=r[t]*Math.sin(v),h[o]=c}},{key:"buGn",value:function(){for(var t=this,e=arguments.length,i=Array(e),r=0;e>r;r++)i[r]=arguments[r];i.forEach(function(e){t.gn[e]||(t.gn[e]=[])})}},{key:"vcvs",value:function(t,e,i,r,n,o,a){var l=this.gn,h=new s["default"](1,0),c=new s["default"](-1,0),f=new s["default"];this.trace("输入VCVS起点，止点，参数与控制支路",e[t],i[t],r[t],o[t]);var p=e[t],d=i[t],y=e[o[t]],b=i[o[t]];a[t]=n,0!==p&&(this.buGn(p,n),l[p][n]=h,l[n][p]=h),0!==d&&(this.buGn(d,n),l[d][n]=c,l[n][d]=c),f.fl=r[t],f.re=0,0!==y&&(this.buGn(n),l[n][y]=u["default"].sub(l[n][y],f)),0!==b&&(this.buGn(n),l[n][b]=u["default"].add(l[n][b],f))}},{key:"vccs",value:function(t,e,i,r,n){var o=this.gn,a=new s["default"];this.trace("输入VCCS起点止点参数与控制支路",e[t],i[t],r[t],n[t]);var l=e[t],h=i[t],c=e[n[t]],f=i[n[t]];a.fl=r[t],a.re=0,0===l?(this.buGn(h),0!==c&&(o[h][c]=u["default"].sub(o[h][c],a)),0!==f&&(o[h][f]=u["default"].add(o[h][f],a))):0===h?(this.buGn(l),0!==c&&(o[l][c]=u["default"].add(o[l][c],a)),0!==f&&(o[l][f]=u["default"].sub(o[l][f],a))):(this.buGn(l,h),0!==c&&(o[l][c]=u["default"].sub(o[l][f],a),o[h][f]=u["default"].add(o[h][f],a)),0!==f&&(this.buGn(l,h),o[l][f]=u["default"].sub(o[l][f],a),o[h][f]=u["default"].add(o[h][f],a)))}},{key:"ccvs",value:function(t,e,i,r,n,o){var a=this.gn,l=new s["default"],u=new s["default"],h=new s["default"];this.trace("输入CCVS的起点止点，参数控制支路序号:",e[t],i[t],r[t],n[t]);var c=e[t],f=i[t],p=o[n[t]];o[t]=ny,l.fl=1,l.re=0,u.fl=-1,u.re=0,0!==c&&(this.buGn(c,ny),a[c][ny]=l,a[ny][c]=l),0!==f&&(this.buGn(f,ny),a[f][ny]=u,a[ny][f]=u),h.fl=r[t],h.re=0,this.buGn(ny),a[ny][p]=sub(a[ny][ke],h)}},{key:"cccs",value:function(t,e,i,r,n,o){var a=this.gn,l=new s["default"];this.trace("输入CCCS的起点，止点，参数及控制支路序号:",e[t],i[t],r[t],n[t]);var h=e[t],c=i[t],f=o[n[t]];l.dl=r[t],l.re=0,h&&(this.buGn(h),a[h][f]=u["default"].add(a[h][f],l)),c&&(this.buGn(c),a[c][f]=u["default"].sub(a[c][f],l))}},{key:"hllm",value:function(t,e,i,r,n,o,a){var s=this.gn;if(this.trace("输入互感支路的起点，止点，参数，互感系数，控制支路:",e[t],i[t],r[t],n[t],o[t]),0!==r[o[t]]){var l=e[t],h=i[t],c=e[o[t]],f=i[o[t]],p=r[o[t]],d=p*r[t]-n[t]*n[t],y=r[t]/(a*d),b=p/(a*d),v=n[t]/(a*d),g=cmplx(0,-y),m=cmplx(0,y),_=cmplx(0,-b),P=cmplx(0,b),w=cmplx(0,v),k=cmplx(0,-v);0!==l&&0!==h?(this.buGn(l,h),s[l][l]=u["default"].add(s[l][l],_),s[h][h]=u["default"].add(s[h][h],_),s[l][h]=u["default"].add(s[l][h],P),s[h][l]=u["default"].add(s[h][l],P)):0===h?(this.buGn(l),s[l][l]=u["default"].add(s[l][l],_)):(this.buGn(h),s[h][h]=u["default"].add(s[h][h],_)),0!==c&&0!==f?(this.buGn(c,f),s[c][c]=u["default"].add(s[c][c],g),s[f][f]=u["default"].add(s[f][f],g),s[c][f]=u["default"].add(s[c][f],m),s[f][c]=u["default"].add(s[f][c],m)):0===f?(this.buGn(c),s[c][c]=u["default"].add(s[c][c],g)):(this.buGn(f),s[f][f]=u["default"].add(s[f][f],g)),0!==l&&0!==c&&(this.buGn(l,c),s[l][c]=u["default"].add(s[l][c],w),s[c][l]=u["default"].add(s[c][l],w)),0!==h&&0!==f&&(this.buGn(h,f),s[h][f]=u["default"].add(s[h][f],w),s[f][h]=u["default"].add(s[f][h],w)),0!==l&&0!==f&&(this.buGn(l,f),s[l][f]=u["default"].add(s[l][f],k),s[f][l]=u["default"].add(s[f][l],k)),0!==h&&0!==c&&(this.buGn(h,c),s[h][c]=u["default"].add(s[h][c],k),s[c][h]=u["default"].add(s[c][h],k))}}},{key:"gauss",value:function(t,e,i){for(var r=void 0,n=[],o=i+1,a=1;i>=a;a++){if(1e-9>(r=this.zu(n,1e-10,i,o,a,t)))return r;var s=void 0;for(s=a;o>=s;s++)t[a][s]=u["default"].divv(t[a][s],n[0]);for(var l=1;i>=l;l++)if(l!==a){var h=t[l][a];for(s=a;o>=s;s++)t[l][s]=u["default"].sub(t[l][s],u["default"].time(h,t[a][s]))}}for(var c=1;i>=c;c++)e[c]=t[c][o];return r}},{key:"zu",value:function(t,e,i,r,n,o){for(var a=new s["default"],l=u["default"].sabs(o[n][n]),h=n,c=n;i>=c;c++)u["default"].sabs(o[c][n])>l&&(l=u["default"].sabs(o[c][n]),h=c);if(e>=l)return 0;if(t[0]=o[h][n],h===n)return 1;for(var f=n;r>=f;f++)a=o[h][f],o[h][f]=o[n][f],o[n][f]=a;return 1}}]),t}()},536:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);t.length>e;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),l=i(523),u=r(l),h=i(525),c=r(h),f=i(529),p=r(f),d=function(){function t(e){o(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.main=this.globalConfig.main,this.eqMap={}}return a(t,[{key:"destroy",value:function(){this.elect_Update.destroy(),this.elect_Update=null,this.moduleMain=null,this.globalConfig=null,this.eqMap={}}},{key:"clear",value:function(){this.elect_Update.clearAll(),this.eqMap={}}},{key:"init",value:function(){this.elect_Update=new u["default"](this.moduleMain),this.electricField_Update=new c["default"](this.moduleMain),this.magneticField_Update=new p["default"](this.moduleMain)}},{key:"setEqUID",value:function(t,e){this.eqMap[t.UID]&&(this.eqMap[t.UID]=null),this.eqMap[e]=t}},{key:"deleteEqUID",value:function(t){this.eqMap[t]=null}},{key:"getEqByUID",value:function(t){return this.eqMap[t]}},{key:"setActive",value:function(t){this.elect_Update.setActive(t)}},{key:"diyChanged",value:function(t){this.globalConfig&&this.globalConfig.main&&this.globalConfig.main.isDestroy||this.elect_Update&&(this.elect_Update.checkAllChanged(t),this.globalConfig.main.dispatchEvent("diyChanged"))}},{key:"checkIsWire",value:function(t){return!!t&&1===t.iElecInter}},{key:"getBposterWires",value:function(t){var e=[];return t&&t.bindinger&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length>0&&$.each(t.bindinger.friendPostersArr,function(t,i){"ElecWire"!==i.body.classname&&"ElecFamilyWire"!==i.body.classname||e.push(i)}),e}},{key:"getBposterWiresBody",value:function(t){var e=this.getBposterWires(t),i=[];return each(e,function(t,e){i.push(e.body)}),i}},{key:"getAllBposterWires",value:function(t){var e=[];return $.each(t.bPsArr,function(t,i){$.each(i.friendPostersArr,function(t,i){"ElecWire"!==i.body.classname&&"SElecWire"!==i.body.classname||e.push(i)})}),e}},{key:"getAllElecWires",value:function(t){var e=new s.HashMap;return t.bPsArr&&$.each(t.bPsArr,function(t,i){$.each(i.friendPostersArr,function(t,i){"ElecWire"!==i.body.classname&&"SElecWire"!==i.body.classname&&"ElecFamilyWire"!==i.body.classname||e.put(i.body.UID,i.body)})}),e.values()}},{key:"getWireLinkBposter",value:function(t){var e=this,i=null;return t&&t.bindinger&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length&&$.each(t.bindinger.friendPostersArr,function(t,r){if(!e.checkIsWire(r.body))return i=r,!1}),i}},{key:"getWireBposterElec",value:function(t){var e=this,i=null;return t&&t.bindinger&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length&&$.each(t.bindinger.friendPostersArr,function(t,r){if(!e.checkIsWire(r.body))return i="BaseElecResistance"===r.body.classname?r.body.zuheBox:r.body,!1}),i}},{key:"getWireAllBposterElecs",value:function(t){if(!t)return[];var e=new Map,i=this.getWireBposterElec(t.bposter0),r=this.getWireBposterElec(t.bposter1);return i&&e.set(i.uid,i),r&&e.set(r.uid,r),[].concat(n(e.values()))}},{key:"checkIsDuan",value:function(t){if(!t||this.checkIsWire(t))return!1;var e=this.getBposterWiresBody(t.bposter0),i=this.getBposterWiresBody(t.bposter1),r=!1;return each(e,function(t,e){if(each(i,function(t,i){if(e.uid===i.uid)return r=!0,!1}),r)return!1}),r}},{key:"checkIsPower",value:function(t){return 2===t.iElecInter}},{key:"checkIsLamp",value:function(t){return 3===t.iElecInter}},{key:"checkIsVoltmeter",value:function(t){return 4===t.iElecInter}},{key:"checkIsAmpereMeter",value:function(t){return 5===t.iElecInter}},{key:"modifyBinPosterType",value:function(t,e){if(!this.checkIsWire(this)){var i=t.bindinger.friendPostersArr,r=void 0,n=i.length;for(r=0;n>r;r++){var o=i[r];this.checkIsWire(o.body)&&(o.binPoster.currentFrame=e)}t.bindinger.body.updateBinds()}}},{key:"linkWireBindMC",value:function(t,e){var i=void 0,r=void 0,n=e.bindinger.friendPostersArr.concat([e.bindinger]);for(r=n.length,i=0;r>i;i++){var o=n[i];o.friendPostersArr.push(t.bindinger),t.bindinger.friendPostersArr.push(o)}}},{key:"setBindXY",value:function(t,e){t.x=e.x+e.width/2,t.y=e.y,!this.globalConfig.DEBUG&&e.parent&&e.parent.removeChild(this.bp)}},{key:"getMagStaCompArr",value:function(){for(var t=[],e=this.globalConfig.main.getEquipmentArr(),i=e.length-1;i>=0;i--){var r=e[i];r&&(r.component&&(r=r.component,r.isLock||2===r.magType&&t.push(r)))}return t}},{key:"getElecStaCompArr",value:function(){for(var t=[],e=this.globalConfig.main.getEquipmentArr(),i=e.length-1;i>=0;i--){var r=e[i];r&&(r.component&&(r=r.component,r.isLock||1===r.magType&&t.push(r)))}return t}},{key:"getEquipmentArr",value:function(t){var e=this.globalConfig.main.getEquipmentArr(),i=[];return t?t instanceof Array?$.each(e,function(e,r){r.component&&s.ArrayUtil.arrayContainsValue(t,r.component.classname)&&i.push(r.component)}):$.each(e,function(e,r){r.component&&r.component.classname===t&&i.push(r.component)}):$.each(e,function(t,e){i.push(e.component)}),i}},{key:"findEAb",value:function(t,e){return s.ArrayUtil.clear(t.mapfind),e.bindinger?this.findBindEA(t,e.bindinger.friendPostersArr):null}},{key:"findBindEA",value:function(t,e){var i=void 0,r=e.length;for(i=0;r>i;i++)if(-1===t.mapfind.indexOf(e[i]))if(t.mapfind.push(e[i]),this.checkIsWire(e[i].body)){var n=0;if(0!==(n="bposter0"===e[i].name?this.findBindEA(t,e[i].body.bposter1.bindinger.friendPostersArr):this.findBindEA(t,e[i].body.bposter0.bindinger.friendPostersArr)))return n}else{if(!e[i].body)return 0;var o=e[i].body.classname;if("ElectricAppliance"===o||"MetalPlates"===o)return e[i];if(e[i].body.isBreak)return 0;for(var a=[],s=0;;){if(!e[i].body["bposter"+s])break;e[i].body["bposter"+s].UID!==e[i].UID&&a.push(e[i].body["bposter"+s]),s++}var l=void 0,u=a.length;for(l=0;u>l;l++){var h=a[l].bindinger.body.classname;if("ElectricAppliance"===h||"MetalPlates"===h)return a[l];var c=this.findBindEA(t,a[l].bindinger.friendPostersArr);if(0!==c)return c}}return 0}},{key:"getTime",value:function(){return this.elect_Update.time}},{key:"getTimeStep",value:function(){return this.elect_Update.timeStep}},{key:"getUnNode",value:function(t,e){return _.get(t,"bposter"+e+".bindinger.unNode",null)}},{key:"getUnNodeUID",value:function(t,e){return _.get(t,"bposter"+e+".bindinger.unNode.UID",null)}},{key:"checkBindingerInElec",value:function(t){if(!t||!t.length)return!1;for(var e=null,i=0;t.length>i;i++){var r=t[i],n=_.get(r,"unNode.UID",null);if(!n)return!1;if(e){if(e!==n)return!1}else e=n}return!0}},{key:"checkBindMCInElec",value:function(t){return!!t&&this.checkBindingerInElec(t.map(function(t){return t.bindinger}))}},{key:"checkBPsInOneHui",value:function(t){return!(!t||!t.bPsArr)&&this.checkBindingerInElec(t.bPsArr)}},{key:"getNearWireBinding",value:function(t){var e=this;this.main.view.updateTransform();var i=[],r=this.getEquipmentArr("ElecWire"),n=[];return r.forEach(function(t){t.bPsArr.forEach(function(t){0===t.friendPostersArr.length&&n.push(t)})}),n.length>0&&n.forEach(function(r){var n=e.main.view.toLocal(new s.Point,r.BindMC),o=e.main.view.toLocal(new s.Point,t.BindMC);s.M.getPointLen(n,o)>e.globalConfig.connectMinDistanceNumber||i.push(r)}),i}},{key:"getNearBinding",value:function(t){var e=this;if(!t)return null;this.globalConfig.main.view.updateTransform();var i=t.BindMC.toGlobal(),r=this.getEquipmentArr(),n=99999999,o=void 0;if(r.forEach(function(t){e.checkIsWire(t)||t.bPsArr&&t.bPsArr.length&&t.bPsArr.forEach(function(t){var e=t.BindMC.toGlobal(),r=s.M.getPointLen(i,e);n>r&&(n=r,o=t)})}),o){var a=this.globalConfig.main.view.toLocal(new s.Point,t.BindMC),l=this.globalConfig.main.view.toLocal(new s.Point,o.BindMC);if(this.globalConfig.connectMinDistanceNumber>s.M.getPointLen(a,l))return o}return null}}]),t}();d.L="L",d.S="S",d.A="A",d.U="V",d.R="R",d.E="E",d.H="H",d.M="M",d.VD="VD",d.C="C",d.BATTERY_LEFT=3,d.BATTERY_RIGHT=2,d.LAMP_RIGHT=4,d.LAMP_LEFT=5,d.SLIDE_TOP_LEFT=8,d.SLIDE_TOP_RIGHT=9,d.SLIDE_BOTM_LEFT=6,d.SLIDE_BOTM_RIGHT=7,e["default"]=d},537:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.ERROR_MATRIX_NOT_SQUARE="Matrix must be square.",this.ERROR_VECTOR_NOT_2D="Only two dimensional operations are supported at this time."}return n(t,null,[{key:"_check2DVector",value:function(t){if(2!==t.length)throw Error(this.ERROR_VECTOR_NOT_2D)}},{key:"deepCopy",value:function(t){if(!Array.isArray(t))throw Error("Input must be a Matrix.");if(t[0][0]===undefined)throw Error("Input cannot be a vector.");for(var e=Array(t.length),i=0;t.length>i;i++)e[i]=t[i].slice();return e}},{key:"isSquare",value:function(t){if(!Array.isArray(t))throw Error("Input must be a Matrix.");if(t[0][0]===undefined)throw Error("Input cannot be a vector.");for(var e=t.length,i=0;e>i;i++)if(t[i].length!==e)return!1;return!0}},{key:"addition",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw Error("Matrix mismatch");var i=Array(t.length),r=void 0;if(t[0].length)for(r=0;t.length>r;r++){i[r]=Array(t[r].length);for(var n=0;t[r].length>n;n++)i[r][n]=t[r][n]+e[r][n]}else for(r=0;t.length>r;r++)i[r]=t[r]+e[r];return i}},{key:"traceMatrix",value:function(t){var e=void 0,i=void 0;if(t[0].length)for(e=0;t.length>e;e++){i="";for(var r=0;t[e].length>r;r++)i+=t[e][r]+"\t"}else for(i="",e=0;t.length>e;e++)i+=t[e]+"\t"}},{key:"subtraction",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw Error("Matrix mismatch");var i=Array(t.length),r=void 0;if(t[0].length)for(r=0;t.length>r;r++){i[r]=Array(t[r].length);for(var n=0;t[r].length>n;n++)i[r][n]=t[r][n]-e[r][n]}else for(r=0;t.length>r;r++)i[r]=t[r]-e[r];return i}},{key:"scalar",value:function(t,e){for(var i=0;t.length>i;i++)for(var r=0;t[i].length>r;r++)t[i][r]=e*t[i][r];return t}},{key:"transpose",value:function(t){for(var e=Array(t[0].length),i=0;t[0].length>i;i++){e[i]=Array(t.length);for(var r=0;t.length>r;r++)e[i][r]=t[r][i]}return e}},{key:"identity",value:function(t){for(var e=Array(t),i=0;t>i;i++){e[i]=Array(t);for(var r=0;t>r;r++)e[i][r]=i===r?1:0}return e}},{key:"dotproduct",value:function(t,e){if(t.length!==e.length)throw Error("Vector mismatch");for(var i=0,r=0;t.length>r;r++)i+=t[r]*e[r];return i}},{key:"multiply",value:function(e,i){if(e[0].length!==i.length)throw Error("Matrix mismatch");for(var r=Array(e.length),n=0;e.length>n;n++)r[n]=Array(i[0].length);for(var o=t.transpose(i),a=0;r.length>a;a++)for(var s=0;r[a].length>s;s++)r[a][s]=t.dotproduct(e[a],o[s]);return r}},{key:"determinant",value:function(e){var i=e.length,r=e[0].length,n=0,o=void 0,a=void 0,s=void 0,l=void 0;if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);if(1===i)return e[0][0];if(2===i)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(a=0;r>a;a++){for(s=e[0][a],l=e[0][a],o=1;i>o;o++)l*=e[o][((a+o)%r+r)%r],s*=e[o][((a-o)%r+r)%r];n+=l-s}return n}},{key:"lupDecomposition",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var i=e.length,r=t.deepCopy(e),n=t.transpose(t.identity(i)),o=void 0,a=Array(i);this.getL=function(e){for(var i=e[0].length,r=t.identity(i),n=0;i>n;n++)for(var o=0;i>o;o++)n>o&&(r[n][o]=e[n][o]);return r},this.getU=function(e){for(var i=e[0].length,r=t.identity(i),n=0;i>n;n++)for(var o=0;i>o;o++)n>o||(r[n][o]=e[n][o]);return r};for(var s=0;i>s;s++){var l=void 0;for(l=0;i>l;l++)a[l]=r[l][s];for(l=0;i>l;l++){o=r[l];for(var u=Math.min(l,s),h=0,c=0;u>c;c++)h+=o[c]*a[c];o[s]=a[l]-=h}var f=s;for(l=s+1;i>l;l++)Math.abs(a[l])>Math.abs(a[f])&&(f=l);if(f!==s&&(r=t.rowSwitch(r,f,s),n=t.rowSwitch(n,f,s)),i>s&&0!==r[s][s])for(l=s+1;i>l;l++)r[l][s]/=r[s][s]}return[this.getL(r),this.getU(r),n]}},{key:"rotate",value:function(e,i,r){t._check2DVector(e);var n="clockwise"===r?-1:1,o=i*(Math.PI/180);return t.multiply([[Math.cos(o),-1*n*Math.sin(o)],[n*Math.sin(o),Math.cos(o)]],e)}},{key:"scale",value:function(e,i,r){return t._check2DVector(e),t.multiply([[i,0],[0,r]],e)}},{key:"shear",value:function(e,i,r){return t._check2DVector(e),t.multiply([[1,"xaxis"===r?i:0],["yaxis"===r?i:0,1]],e)}},{key:"affine",value:function(e,i,r){t._check2DVector(e);var n=[[1,0,i],[0,1,r],[0,0,1]],o=[[e[0][0]],[e[1][0]],[1]],a=t.multiply(n,o);return[[a[0][0]],[a[1][0]]]}},{key:"rowScale",value:function(t,e,i){for(var r=Array(t.length),n=0;t.length>n;n++){r[n]=Array(t[n].length);for(var o=0;t[n].length>o;o++)r[n][o]=n===e?i*t[n][o]:t[n][o]}return r}},{key:"rowSwitch",value:function(t,e,i){for(var r=Array(t.length),n=0;t.length>n;n++){r[n]=Array(t[n].length);for(var o=0;t[n].length>o;o++)r[n][o]=n===e?t[i][o]:n===i?t[e][o]:t[n][o]}return r}},{key:"rowAddMultiple",value:function(t,e,i,r){for(var n=Array(t.length),o=0;t.length>o;o++){n[o]=Array(t[o].length);for(var a=0;t[o].length>a;a++)o===i?n[i][a]=t[i][a]+r*t[e][a]:n[o][a]=t[o][a]}return n}},{key:"GaussJordanEliminate",value:function(t,e){for(var i=void 0===e?1e-10:e,r=t.length,n=t[0].length,o=-1,a=void 0,s=void 0,l=void 0;++o<r;){var u=o;for(a=o;++a<r;)Math.abs(t[a][o])>Math.abs(t[u][o])&&(u=a);var h=t[o];if(t[o]=t[u],t[u]=h,Math.abs(t[o][o])<=i)return t;for(a=o;++a<r;)for(l=t[a][o]/t[o][o],s=o-1;++s<n;)t[a][s]-=t[o][s]*l}for(o=r;--o>=0;){for(l=t[o][o],a=-1;++a<o;)for(s=n;--s>=o;)t[a][s]-=t[o][s]*t[a][o]/l;for(t[o][o]/=l,s=r-1;++s<n;)t[o][s]/=l}return t}},{key:"rowReduce",value:function(e,i){return t.GaussJordanEliminate(e,i)}},{key:"inverse",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var i=e.length,r=t.identity(i),n=void 0;for(n=0;i>n;n++)e[n]=e[n].concat(r[n]);for(e=t.GaussJordanEliminate(e),n=0;i>n;n++)e[n]=e[n].slice(i);return e}},{key:"getCol",value:function(t,e){var i=Array(t.length);if(0>e)throw Error("The specified column must be a positive integer.");if(e>=t[0].length)throw Error("The specified column must be between 0 and the number of columns - 1.");for(var r=0;t.length>r;r++)i[r]=t[r][e];return i}},{key:"reorderRows",value:function(t,e){var i=[];if(e===undefined)throw Error("A reordering array must be entered.");if(e.length!==t.length)throw Error("The reordered matrix must have the same number of rows as the original Matrix.");for(var r=0;e.length>r;r++){if(0>e[r])throw Error("The desired order of the rows must be positive integers.");if(e[r]>=e.length)throw Error("The desired order of the rows must start at 0 and end at the number of rows - 1.");i.push(t[e[r]])}return i}},{key:"reorderCols",value:function(e,i){var r=[];if(i===undefined)throw Error("Please enter a desired reordering array.");if(i.length!==e[0].length)throw Error("The reordered matrix must have the same number of columns as the original Matrix.");for(var n=0;i.length>n;n++){if(0>i[n])throw Error("The desired order of the columns must be positive integers.");if(i[n]>=i.length)throw Error("The desired order of the columns must start at 0 and end at the number of columns - 1.");r.push(t.getCol(e,i[n]))}return t.transpose(r)}},{key:"reverseRows",value:function(e){for(var i=[],r=e.length-1;r>-1;r--)i.push(r);return t.reorderRows(e,i)}},{key:"reverseCols",value:function(e){for(var i=[],r=e.length-1;r>-1;r--)i.push(r);return t.reorderCols(e,i)}},{key:"zeros",value:function(t,e){var i=Array(t);if(1>t||1>e)throw Error("The matrix dimensions must be positive integers.");t=Math.ceil(t),e=Math.ceil(e);for(var r=0;t>r;r++){for(var n=Array(e),o=0;e>o;o++)n[o]=0;i[r]=n}return i}},{key:"zigzag",value:function(e,i,r){if(1>=e)throw Error("Matrix size must be at least 2x2.");e=Math.ceil(e);var n=t.zeros(e,e),o=function(t){var i=!1,r=e*e,n=1,o=1,a=void 0,s=void 0,l=void 0,u=void 0,h=void 0;for(t[0][0]=r,t[e-1][e-1]=n,u=1;e>u;u++)i?(r-=4*o,n+=4*o,o++):(r--,n++),t[0][u]=r,t[e-1][e-1-u]=n,i=!i;var c=!0;for(u=1;e>u;u++){for(a=0,s=u,l=t[a][s],h=1;u+1>h;h++)c?l-=1:l+=1,a++,s--,t[a][s]=l;c=!c}for(c=e%2==0,u=1;e-1>u;u++){for(a=e-1,s=u,l=t[a][s],h=1;e-u>h;h++)c?l--:l++,a--,s++,t[a][s]=l;c=!c}return t},a=function(e){return t.transpose(o(e))},s=function(e){return t.reverseCols(o(e))},l=function(e){return t.reverseCols(t.reverseRows(o(e)))},u=function(e){return t.transpose(l(e))};if("BR"===i&&"H"===r)return o(n);if("BR"===i&&"V"===r)return a(n);if("BL"===i&&"H"===r)return s(n);if("BL"===i&&"V"===r)return function(e){return t.reverseRows(u(s(e)))}(n);if("TR"===i&&"H"===r)return function(e){return t.reverseRows(o(e))}(n);if("TR"===i&&"V"===r)return function(e){return t.reverseRows(a(e))}(n);if("TL"===i&&"H"===r)return l(n);if("TL"===i&&"V"===r)return u(n);throw Error("Enter the direction (V,H) and corner (BR,BL,TR,TL) correctly.")}},{key:"vectorNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length)throw Error("Vector must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e)throw Error("Norm order must be a number.");e=void 0===e?2:e;var i=t.length,r=0,n=void 0,o=void 0;switch(e){case Infinity:for(o=0;i>o;o++)(n=Math.abs(t[o]))>r&&(r=n);break;case-Infinity:for(r=Infinity,o=0;i>o;o++)n=Math.abs(t[o]),r>n&&(r=n);break;default:for(o=0;i>o;o++)r+=Math.pow(Math.abs(t[o]),e);r=Math.pow(r,1/e)}return r}},{key:"matrixNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length||!Array.isArray(t[0]))throw Error("Matrix must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e&&null!==e)throw Error("Norm order must be a number or null.");e=void 0===e?null:e;var i=t.length,r=t[0].length,n=0,o=void 0,a=void 0,s=void 0;switch(e){case Infinity:for(a=0;i>a;a++){for(o=0,s=0;r>s;s++)o+=Math.abs(t[a][s]);o>n&&(n=o)}break;case-Infinity:for(n=Infinity,a=0;i>a;a++){for(o=0,s=0;r>s;s++)o+=Math.abs(t[a][s]);n>o&&(n=o)}break;case 1:for(a=0;r>a;a++){for(o=0,s=0;i>s;s++)o+=Math.abs(t[s][a]);o>n&&(n=o)}break;case-1:for(n=Infinity,a=0;r>a;a++){for(o=0,s=0;i>s;s++)o+=Math.abs(t[s][a]);n>o&&(n=o)}break;case null:for(a=0;i>a;a++)for(s=0;r>s;s++)n+=Math.pow(t[a][s],2);n=Math.pow(n,.5);break;case 2:case-2:throw Error("Singular values are not yet supported in numbers.js.");default:for(a=0;i>a;a++)for(s=0;r>s;s++)n+=Math.pow(Math.abs(t[a][s]),e);n=Math.pow(n,1/e)}return n}},{key:"isUpperBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||2>t.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||0>e||e%1!=0)throw Error("Upper bandwidth must be a nonzero integer.");for(var i=!0,r=t[0].length,n=0,o=e+1;r>o;o++){if(0!==t[n][o]){i=!1;break}n++}return i}},{key:"isLowerBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||2>t.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||0>e||e%1!=0)throw Error("Lower bandwidth must be a nonzero integer.");for(var i=!0,r=t.length,n=0,o=e+1;r>o;o++){if(0!==t[o][n]){i=!1;break}n++}return i}},{key:"isRowDD",value:function(e){var i=e.length;if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var r=0;i>r;r++){var n=e[r],o=n[r],a=t.sumNondiagonalElements(n,r);if(Math.abs(o)<a)return!1}return!0}},{key:"isStrictlyRowDD",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=e.length,r=0;i>r;r++){var n=e[r],o=n[r],a=t.sumNondiagonalElements(n,r);if(Math.abs(o)<=a)return!1}return!0}},{key:"isColumnDD",value:function(e){if(!t.isSquare)throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=e.length,r=0;i>r;r++){var n=t.getCol(e,r),o=n[r],a=t.sumNondiagonalElements(n,r);if(Math.abs(o)<a)return!1}return!0}},{key:"isStrictlyColumnDD",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=e.length,r=0;i>r;r++){var n=t.getCol(e,r),o=n[r],a=t.sumNondiagonalElements(n,r);if(Math.abs(o)<=a)return!1}return!0}},{key:"sumNondiagonalElements",value:function(t,e){var i=0,r=void 0;for(r=0;e>r;r++)i+=Math.abs(t[r]);for(r=e+1;t.length>r;r++)i+=Math.abs(t[r]);return i}}]),t}();o.clone=o.deepCopy,o.add=o.addition,e["default"]=o},538:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();e["default"]=function(){function t(e){r(this,t),this.UID=e,this.bposterArr=[],this.number=0,this.Un=0,this.isGround=!1}return n(t,[{key:"freshUn",value:function(){var t=this;this.bposterArr.forEach(function(e){e.Un=t.Un,e.BindMC.unNodeSP&&(e.BindMC.unNodeSP.numberLabel.text=t.number+"号",e.BindMC.unNodeSP.wangLabel.text=t.UID+"团")})}},{key:"destroy",value:function(){this.bposterArr.forEach(function(t){t.unNode=null,t.Un=0,t.BindMC.unNodeSP&&(t.BindMC.unNodeSP.numberLabel.text="",t.BindMC.unNodeSP.wangLabel.text="")})}}]),t}()},545:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(226),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.txt=i.globalConfig.main.cachePool.popText("",{font:"25px Arial",fill:16750848}),i.cateid=5,i.var_now_T=0,i.is_animation_playing=!1,i.isStart=!1,i.start_time=null,i.my_time=0,i.lineSP=null,i.pauseTime=null,i.isshowlabel=!0,i.tic=null,i.sound=null,i.topTouchId=null,i.rightTouchId=null,i.jd=1,i.timeRate=isNaN(i.main.globalConfig.TIME_RATE)?1:i.main.globalConfig.TIME_RATE,i.preT=0,i.runT=0,i}return o(e,t),a(e,[{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this);var i=this.language.getLocaleStr("wei");this.jdArr=["1"+i,"2"+i],this.timeType=0,this.timeTypeArr=[this.language.getLocaleStr("virtual_time"),this.language.getLocaleStr("standard_time")],this.parent.dragArea=this.bg,this.componentBox.visible=!1,this.removeChild(this.componentBox),this.addChild(this.txt),this.tline.visible=!1,this.txt.x=-240,this.txt.y=-220,this.topOriY=this.top.y,this.topTouchId=l.M.addTouch(this.top,{tab:this.topBtnClick,begin:function(e){t.top.y=t.topOriY+10,t.cannotSystemDrag=!0},end:function(e){t.top.y=t.topOriY,t.cannotSystemDrag=!1}},this);var r=l.M.getSPPoint(this.right);this.rightTouchId=l.M.addTouch(this.right,{tab:this.rightBtnClick,begin:function(e){l.M.setSPPointXY(t.right,r.x+5,r.y+5),t.cannotSystemDrag=!0},end:function(e){l.M.setSPPoint(t.right,r),t.cannotSystemDrag=!1}},this,{time:300,dis:15}),this.freshEquipShows(this.globalConfig.SHOWEQUVALUE),this.addCursor(this.top,"hand"),this.addCursor(this.right,"hand")}},{key:"rightBtnClick",value:function(t){this.playStop()}},{key:"topBtnClick",value:function(t){this.isStart?this.playToggle():(this.playGo(),this.playSound(!0))}},{key:"removed",value:function(){this.globalConfig.main.cachePool.pushText(this.txt),this.removeChild(this.txt),this.txt=null,this.removedCursor(this.top),this.removedCursor(this.right),l.M.removeTouch(this.top,this.topTouchId),l.M.removeTouch(this.right,this.rightTouchId),this.tic&&this.tic.stop(),this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"freshVolume",value:function(){this.globalConfig.VOLUME&&this.isStart&&this.is_animation_playing?this.sound||(this.sound=this.globalConfig.SoundTool.play(this.SoundStr.COMTIMER,!0)):this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null)}},{key:"playSound",value:function(t){t?this.freshVolume():this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null)}},{key:"playGo",value:function(){this.isStart=!0,this.is_animation_playing=!0,this.start_time=this.getCurrentTime(),this.preT=(new Date).getTime(),this.runT=0,this.isshowlabel&&(this.tline.visible=!0)}},{key:"playStop",value:function(){this.isStart=!1,this.is_animation_playing=!1,this.my_time=0,this.runT=0,this.preT=0,this.tic&&this.tic.stop(),this.freshShow(0),this.playSound(!1),this.tline.visible=!1,this.txt.text=""}},{key:"update",value:function(){if(this.is_animation_playing){if(this.globalConfig.isMec()&&!this.moduleMain.napeEngine.play)return void this.playSound(!1);this.sound||this.playSound(!0);this.freshShow(this.my_time+this.getTimeD())}}},{key:"playToggle",value:function(){this.is_animation_playing=!this.is_animation_playing,this.is_animation_playing?(this.start_time=this.getCurrentTime(),this.preT=(new Date).getTime(),this.runT=0,this.playSound(!0)):(this.my_time+=this.getTimeD(),this.playSound(!1))}},{key:"getTimeD",value:function(){var t=0;if(this.globalConfig.isMec()&&!this.timeType){if(null===this.start_time)return 0;t=this.getCurrentTime()-this.start_time}else{if(null===this.start_time)return 0;var e=(new Date).getTime(),i=e-this.preT;this.preT=e,this.runT+=i*this.timeRate,t=this.runT+this.start_time}return t}},{key:"getCurrentTime",value:function(){return this.globalConfig.isMec()&&!this.timeType?s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getCurrentTime",this).call(this):0}},{key:"freshShow",value:function(t){this.miao.rotation=t/3e4*Math.PI*2,this.fen.rotation=t/9e5*Math.PI*2;var e=""+l.M.getNumJie(t/1e3,this.jd);this.contains(e,".")||(e+=".");for(var i=e.slice(e.indexOf(".")).length-1;this.jd>i;)e+="0",i++;this.txt.text=e+"s"}},{key:"contains",value:function(t,e){return t.indexOf(e)>-1}},{key:"freshEquipShows",value:function(t){this.isshowlabel=t,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshEquipShows",this).call(this,t),this.txt.visible=t,this.isStart&&!t?this.tline.visible=!1:this.isStart&&t&&(this.tline.visible=!0)}},{key:"changeJd",value:function(t){this.jd=l.M.getNumStr(this.jdArr[t.checked])-0}},{key:"timeChanged",value:function(t){this.timeType=t.checked,this.playStop()}},{key:"selectRenderChild",value:function(){return this.bg.getBounds()}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.timeType=this.timeType,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.timeType=t.timeType||0}},{key:"setTimeValue",value:function(t){this.playStop(),this.playGo();var i=1e3*t.showValue;this.freshShow(i);var r=(new Date).getTime();this.runT=0,this.globalConfig.isMec()&&!this.timeType?this.start_time=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getCurrentTime",this).call(this)-i:(this.start_time=0,this.preT=r-i/this.timeRate),this.playToggle()}},{key:"toRandomValue",value:function(){this.setTimeValue({showValue:(600*Math.random()).toFixed(1)-0})}},{key:"getConf",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);t.confArr=[];var i=this.language.getLocaleStr("wei");return t.confArr.push(this.ComponentProperty.getTextInput("指定示数",0,"",this.setTimeValue,this)),t.confArr.push(this.ComponentProperty.getButton("","随机示数",this.toRandomValue,this)),t.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("accuracy"),l.ArrayUtil.getIndexFromValue(this.jdArr,this.jd+i),this.jdArr,this.changeJd.bind(this))),this.globalConfig.isMec()&&t.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("type"),this.timeType,this.timeTypeArr,this.timeChanged.bind(this))),t}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("accuracy")+": "+(this.jd+this.language.getLocaleStr("wei"))+"\n    "+this.language.getLocaleStr("type")+": "+this.timeTypeArr[this.timeType]+"\n    "}}]),e}(h["default"])},651:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(483),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isCharBase=!0,i.canShowDragRect=!1,i.canShowConfPan=!1,i.bindHO=null,i.bindComp=null,i.level=6,i.charType=0,i.isBreak=!0,i.noRenderSelected=!1,i.allowSave=!1,i}return o(e,t),a(e,[{key:"beginEnd",value:function(){this.unBind()}},{key:"unBind",value:function(){this.bindHO&&("ElecFamilyInserted"===this.bindComp.classname?(this.bindHO.wire1.unLink(this.bindHO.wire1.bposter1),this.bindHO.wire2.unLink(this.bindHO.wire2.bposter1),this.bindHO.wire3.unLink(this.bindHO.wire3.bposter1),this.bindHO.bindChar=null,this.bindHO=null,this.bg.currentFrame=0,this.diyChanged()):(this.bindHO.link_bindChar(!1),this.bindHO.bindChar=null,this.bindHO=null,this.bg.currentFrame=0,this.isBreak=!0,this.diyChanged()))}},{key:"endEnd",value:function(t){if(!this.bindHO){var e=void 0;if(e=0===this.charType?this.getChildByClassInRadius(this,"ElecFamilyTwoHoleOutlets",100,new l.Point(0,0)):this.getChildByClassInRadius(this,"ElecFamilyThreeHoleOutlets",100,new l.Point(0,0)),e.length>0){var i=!0,r=!1,n=undefined;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){if(this.toBindHO(o.value))break}}catch(b){r=!0,n=b}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw n}}}else{var s=this.elecUtil.getEquipmentArr(["ElecFamilyInserted"]),u=void 0,h=1e4,c=void 0,f=this.toGlobalView(new l.Point,this);if(each(s,function(t,e){var i=void 0;for(i=0;3>i;i++){var r=e["posP"+i];if(r){var n=this.toGlobalView(r,e),o=l.M.getPointLen(f,n);e.checkIndCanBind.call(e,i)&&h>o&&(h=o,u=i,c=e)}}h>100&&(u=-1)},this),u>=0){var p=c.insArr[u];if(p.bindChar=this,"ElecFamilyInserted"===this.bindComp.classname){this.bindHO=p,p.charType=this.charType;for(var d=this.bindComp,y=1;3>=y;y++)this.elecUtil.linkWireBindMC(p["wire"+y].bposter1,d["bar"+y].bposter0);this.bg.currentFrame=1,this.freshBindLocation(),this.isBreak=!1,this.Resistance=this.bindComp.Resistance,this.diyChanged()}else this.bindHO=p,p.charType=this.charType,this.bindHO.link_bindChar(!0),this.bg.currentFrame=1,this.freshBindLocation(),this.isBreak=!1,this.Resistance=this.bindComp.Resistance,this.diyChanged()}}}this.bindComp?this.main.setCurElec(this.bindComp,!1):this.bindHO&&this.main.setCurElec(this.bindHO,!1)}},{key:"toBindHO",value:function(t){if("ElecFamilyInserted"===this.bindComp.classname){if(!t||t.bindChar||this.bindHO)return!1;t.bindChar=this;var e=this.bindComp,i=t;if(1!==i.charType)return;for(var r=1;3>=r;r++)this.elecUtil.linkWireBindMC(i["wire"+r].bposter1,e["bar"+r].bposter0);return this.bg.currentFrame=1,this.bindHO=i,this.freshBindLocation(),this.diyChanged(),!0}return!(!t||t.bindChar||this.bindHO)&&(t.bindChar=this,this.bindHO=t,this.bindHO.link_bindChar(!0),this.bg.currentFrame=1,this.freshBindLocation(),this.isBreak=!1,this.Resistance=this.bindComp.Resistance,this.diyChanged(),!0)}},{key:"freshBindLocation",value:function(t){if(this.bindHO){var e=void 0;if("ElecInsOne"===this.bindHO.classname){var i=this.bindHO.pare;this.parent.parent.updateTransform(),e=this.parent.parent.toLocal(this.bindHO.posP,i),0===this.bindHO.charType?e.y-=10:e.y+=10}else this.parent.parent.updateTransform(),e=0===this.charType?this.parent.parent.toLocal(new l.Point(0,5),this.bindHO):this.parent.parent.toLocal(new l.Point(0,0),this.bindHO);l.M.setSPPoint(this.parent,e),this.bindComp&&this.bindComp.freshCharLine.call(this.bindComp,this.bindHO)}}},{key:"moveEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.bindComp&&this.bindComp.freshCharLine.call(this.bindComp)}},{key:"setWorkElec",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.bindComp&&(this.bindComp.curElec=this.curElec,this.bindComp.setWorkElec.call(this.bindComp,t))}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.bindComp&&(this.bindComp.curPower=this.curPower,this.bindComp.setWorkPower.call(this.bindComp,t))}}]),e}(h["default"])},652:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:p(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(483),h=r(u),c=i(480),f=r(c);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isHoBase=!0,i.bindChar=null,i.level=4,i.showLineType=1,i.isCheckPencilLink=!0,i.charType=0,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,0]],res:[[1,.1],[2,.1]]}),this.wire1=new f["default"](this.paramObj),this.wire1.zuheBox=this,this.zuheCompArr.push(this.wire1),this.elecUtil.linkWireBindMC(this.wire1.bposter0,this.bar1.bposter1),this.wire2=new f["default"](this.paramObj),this.wire2.zuheBox=this,this.zuheCompArr.push(this.wire2),this.elecUtil.linkWireBindMC(this.wire2.bposter0,this.bar2.bposter1)}},{key:"link_bindChar",value:function(t){this.bindChar&&(t?(this.elecUtil.linkWireBindMC(this.wire1.bposter1,this.bindChar.bposter0),this.elecUtil.linkWireBindMC(this.wire2.bposter1,this.bindChar.bposter1)):(this.wire1.unLink(this.wire1.bposter1),this.wire2.unLink(this.wire2.bposter1)))}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.freshBindLocation()}},{key:"freshBindLocation",value:function(){this.bindChar&&this.bindChar.freshBindLocation()}}]),e}(h["default"])},849:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function y(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:y(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(1),h=i(76),c=i(458),f=r(c),p=i(536),d=r(p);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.moduleType=7,i}return a(e,t),s(e,[{key:"init",value:function(){var t=this;return this.hasInit?Promise.resolve():(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this.globalConfig.showElecLine=!1,new Promise(function(e){t.elecUtil=new d["default"](t),t.elecUtil.init(),e()}))}},{key:"createElecFamilyPower",value:function(){var t=this;return new Promise(function(e){t.elecFamilyPower?e(t.elecFamilyPower):t.main.addComp([{name:"ElecFamilyPower"}],!0,function(i){t.elecFamilyPower=i[0],t.elecFamilyPower.parent.parent.removeChild(t.elecFamilyPower.parent),e(t.elecFamilyPower)})})}},{key:"enterModule",value:function(t){var e=this;return new Promise(function(i){t?setTimeout(function(){e.createElecFamilyPower().then(function(){var t=new PIXI.Sprite;e.main.otherContainer.parent.updateTransform();var r=new u.Point(0,100),n=e.main.otherContainer.toLocal(r,e.main.stage);u.M.setSPPoint(t,n),t.addChild(e.elecFamilyPower),t.component=e.elecFamilyPower,e.main.otherContainer.addChild(t),i()})},100):(e.elecFamilyPower&&e.elecFamilyPower.parent&&e.elecFamilyPower.parent.removeChild(e.elecFamilyPower),i())})}},{key:"onRemoveEquipment",value:function(){this.elecUtil.diyChanged(),this.elecUtil.electricField_Update.checkAllChanged()}},{key:"getElecFamilyPowerData",value:function(){return this.elecFamilyPower.getData()}},{key:"setElecFamilyPowerData",value:function(t){var e=this;this.elecFamilyPower.setData(t),setTimeout(function(){e.elecUtil.diyChanged()},1e3)}},{key:"requestAnimationLoop",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requestAnimationLoop",this).call(this),this.elecUtil&&this.elecUtil.elect_Update.stepLoop.call(this.elecUtil.elect_Update),this.elecFamilyPower&&this.elecFamilyPower.stepLoop.call(this.elecFamilyPower)}}],[{key:"MODULE_TYPE",get:function(){return h.Modules.ELECFAMILY}}]),e}(f["default"])},850:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(226),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o=t.bindMC;i.Radius=t.Radius||12,i.canLinkPen=!0;i.bindMC=o,i.isLock=!1;return i}return o(e,t),a(e,[{key:"isHasLinkChar",value:function(){return!this.canLinkPen||!!(this.bindMC&&this.bindMC.bindinger.body&&this.bindMC.bindinger.body.zuheBox)&&("ElecFamilyInserted"===this.bindMC.bindinger.body.zuheBox.classname?this.checkInsertedHasLink():!!this.bindMC.bindinger.body.zuheBox.bindChar)}},{key:"checkInsertedHasLink",value:function(){var t=!1;return this.elecInsOne&&this.elecInsOne.bindChar&&(t=0===this.elecInsOne.charType?this.hotFlag>=10&&15>=this.hotFlag:this.hotFlag>=1&&9>=this.hotFlag),t}}]),e}(l["default"])},851:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(651),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.charType=1,i}return o(e,t),e}(s["default"])},852:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(651),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s["default"])},853:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(484),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){return r(this,e),t.ratedP=1e3,n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"playSound",value:function(t){var e=this;t?this._timerID||(this._timerID=setTimeout(function(){e.hadDestory||(e._timerID=null,e.playMySound(t))},100)):(this.playMySound(!1),clearTimeout(this._timerID),this._timerID=null)}},{key:"playMySound",value:function(t,e){var i=this;e||(this._toplay=t),1===this.globalConfig.VOLUME&&t?this.sound||(this.sound=this.globalConfig.SoundTool.playT(this.SoundStr.KONGTIAO,function(){i.soundLoop=i.globalConfig.SoundTool.playT(i.SoundStr.KONGTIAOLOOP,null,null,i,!0)},null)):(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null,this.globalConfig.SoundTool.stopT(this.soundLoop),this.soundLoop=null)}},{key:"freshVolume",value:function(){this.playMySound(this._toplay&&this.globalConfig.VOLUME,!0)}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.setWorkPower(0),this._cInd=0,this._loopT=0,this.ticker=l.M.addTicker(function(){++t._cInd>1&&(t._cInd=0,t.bg.lamp.visible?t.bg.ye.totalFrames-1>t.bg.ye.currentFrame&&t.bg.ye.currentFrame++:t.bg.ye.currentFrame>0&&t.bg.ye.currentFrame--)})}},{key:"setWorkPower",value:function(t){Math.abs(t)>this.workV?(this.bg.lamp.visible=!0,this.playSound(!0)):(this.bg.lamp.visible=!1,this.playSound(!1))}},{key:"removed",value:function(){l.M.removeTicker(this.ticker),this.ticker=null,this.playSound(!1),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"selectRenderChild",value:function(){return this.updateTransform(),this.bg.getBounds()}}]),e}(h["default"])},854:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:h(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(484),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){return r(this,e),t.ratedP=1e3,n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this._steamParticle=null,this._steamParticle=this.ParticleUtil.getParticle(this.ParticleUtil.particles.waterstream2),this.main.otherContainer.addChild(this._steamParticle),this._steamParticle.bind(this,-5,-70),this._steamParticle.completeFunc=function(){t._steamParticle.particle.maxParticles=0}}},{key:"setWorkPower",value:function(t){var i=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this._temp_num=t,this._timerID&&(clearTimeout(this._timerID),this.setWorkPowerDelay(0)),this._timerID=setTimeout(function(){i.hadDestory||(i._timerID=null,i.setWorkPowerDelay(i._temp_num))},100)}},{key:"setWorkPowerDelay",value:function(t){var e=this;this.bg&&2===this.bg.totalFrames?Math.abs(t)>this.workV?this._streamID=setTimeout(function(){e.hadDestory||e._steamParticle&&(e._steamParticle.particle.maxParticles=200)},5e3):(this._steamParticle&&this._steamParticle.particle&&(this._steamParticle.particle.maxParticles=0),clearTimeout(this._streamID)):(this._steamParticle&&(this._steamParticle.particle.maxParticles=0),clearTimeout(this._streamID))}},{key:"removed",value:function(){this._steamParticle.completeFunc=null,this._steamParticle.destroy.call(this._steamParticle),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(u["default"])},855:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(484),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){return r(this,e),t.ratedP=120,n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this);this._addN=0,this._maxN=.8,this._speed=.001,this.ticker=l.M.addTicker(this._loop,this)}},{key:"_loop",value:function(){Math.abs(this.curPower)>this.workV?this._maxN>this._addN?this._addN+=this._speed:this._addN=this._maxN:this._addN>0?this._addN-=.8*this._speed:this._addN=0,this._addN=l.M.range(this._addN,0,this._maxN),this.ye.rotation=l.M.getValidHu(this.ye.rotation+this._addN)}},{key:"removed",value:function(){this.ticker.stop(),this.ticker=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getLocalBoundsElecs",value:function(){return[this.bg,this.zhao]}}]),e}(h["default"])},856:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(484),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){return r(this,e),t.ratedP=150,n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"playSound",value:function(t){var e=this;t?this._timerID||(this._timerID=setTimeout(function(){e.hadDestory||(e._timerID=null,e.playMySound(t))},100)):(this.playMySound(!1),clearTimeout(this._timerID),this._timerID=null)}},{key:"playMySound",value:function(t,e){e||(this._toplay=t),1===this.globalConfig.VOLUME&&t?this.sound||(this.soundLoop=this.globalConfig.SoundTool.playT(this.SoundStr.ZHILENG,null,null,this,!0)):(this.globalConfig.SoundTool.stopT(this.soundLoop),this.soundLoop=null)}},{key:"freshVolume",value:function(){this.playMySound(this._toplay&&this.globalConfig.VOLUME,!0)}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.setWorkPower(0),this._cInd=0,this._type=2,this.clickID=l.M.addTouch(this.bg.mbtn,{tab:function(e){t._type=1===t._type?2:1}}),this.ticker=l.M.addTicker(function(){++t._cInd>1&&(t._cInd=0,1===t._type?t.bg.frigdge.totalFrames-1>t.bg.frigdge.currentFrame&&(0!==t.bg.frigdge.currentFrame&&32!==t.bg.frigdge.currentFrame||t.globalConfig.SoundTool.play(t.SoundStr.BINGXIANGKAI),t.bg.frigdge.currentFrame++):2===t._type&&t.bg.frigdge.currentFrame>0&&(1!==t.bg.frigdge.currentFrame&&32!==t.bg.frigdge.currentFrame||t.globalConfig.SoundTool.play(t.SoundStr.BINGXIANGGUAN),t.bg.frigdge.currentFrame--))})}},{key:"setWorkPower",value:function(t){Math.abs(t)>this.workV?(this.bg.lamp1.visible=!0,this.bg.lamp2.visible=!0,this.playSound(!0)):(this.bg.lamp1.visible=!1,this.bg.lamp2.visible=!1,this.playSound(!1))}},{key:"removed",value:function(){l.M.removeTouch(this.bg.mbtn,this.clickID),l.M.removeTicker(this.ticker),this.playSound(!1),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"selectRenderChild",value:function(){return this.bg.back.getBounds()}}]),e}(h["default"])},857:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(484),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){return r(this,e),t.ratedP=1e3,n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s["default"])},858:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:g(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(1),h=i(114),c=r(h),f=i(484),p=r(f),d=i(873),y=r(d),b=i(480),v=r(b);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.Resistance=1e5,i.level=4,i.loadLevel=4,i.ratedAArr=["10A","20A","30A"],i.temp_zuheCompArr=[],i.ratedA=u.M.getNumStr(i.ratedAArr[1])-0,i.isCheckPencilLink=!0,i.canReset=!1,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){this.createZuhe({bar:3,pos:[]})}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.initLink()}},{key:"initLink",value:function(){this.insArr=[];var t=void 0;for(t=0;3>t;t++){var i=u.M.getSPPoint(this["pos"+t]),r={};(0,c["default"])(r,this.paramObj,{pare:this});var n=new y["default"](r);n.index=t,n.posP=i,this.insArr[t]=n,e["posP"+t]||(e["posP"+t]=i),this["posP"+t]||(this["posP"+t]=i);var o=void 0;for(o=1;3>=o;o++){var a=new v["default"](this.paramObj);a.zuheBox=this,this.zuheCompArr.push(a),this.elecUtil.linkWireBindMC(a.bposter0,this["bar"+o].bposter1),this["wire"+o]=a,n["wire"+o]=a}}this.addHotCir(this.bar1.bposter0,new u.Point(-81,12),10,this.insArr[0],1),this.addHotCir(this.bar1.bposter0,new u.Point(-15,12),10,this.insArr[1],2),this.addHotCir(this.bar1.bposter0,new u.Point(51,12),10,this.insArr[2],3),this.addHotCir(this.bar2.bposter0,new u.Point(-54,12),10,this.insArr[0],4),this.addHotCir(this.bar2.bposter0,new u.Point(12,12),10,this.insArr[1],5),this.addHotCir(this.bar2.bposter0,new u.Point(78,12),10,this.insArr[2],6),this.addHotCir(this.bar3.bposter0,new u.Point(-68,-12),8,this.insArr[0],7),this.addHotCir(this.bar3.bposter0,new u.Point(-2,-12),8,this.insArr[1],8),this.addHotCir(this.bar3.bposter0,new u.Point(64,-12),8,this.insArr[2],9),this.addHotCir(this.bar1.bposter0,new u.Point(-84,-12),10,this.insArr[0],10),this.addHotCir(this.bar1.bposter0,new u.Point(-18,-12),10,this.insArr[1],11),this.addHotCir(this.bar1.bposter0,new u.Point(48,-12),10,this.insArr[2],12),this.addHotCir(this.bar2.bposter0,new u.Point(-52,-12),10,this.insArr[0],13),this.addHotCir(this.bar2.bposter0,new u.Point(14,-12),10,this.insArr[1],14),this.addHotCir(this.bar2.bposter0,new u.Point(80,-12),10,this.insArr[2],15)}},{key:"checkIndCanBind",value:function(t){return!this.insArr[t].bindChar}},{key:"caculateOver",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"caculateOver",this).call(this),this.bar1&&Math.abs(this.bar1.curElec)>this.ratedA+1&&(this.bar1.isBreak=this.bar2.isBreak=this.bar3.isBreak=!0,this["break"]())}},{key:"repair",value:function(){this.bar1.isBreak=this.bar2.isBreak=this.bar3.isBreak=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),each(this.insArr,function(t,e){e.moveEnd.call(e)},this)}},{key:"setDataOver",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.ratedA=this.ratedA,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.ratedA=t.ratedA}},{key:"getConf",value:function(){var t=this;this.elecLable="插排";var e={"this":this,confArr:[]};return e.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("rated_current"),u.ArrayUtil.getIndexFromValue(this.ratedAArr,this.ratedA+"A"),this.ratedAArr,function(e){t.ratedA=u.M.getNumStr(t.ratedAArr[e.checked])-0,t.diyChanged()})),e}}]),e}(p["default"])},859:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:h(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(484),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){r(this,e),t.ratedP=1e3;var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i._temp_num=0,i}return o(e,t),a(e,[{key:"playSound",value:function(t,e){var i=this;this.hadDestory||(1===this.globalConfig.VOLUME&&t?this.sound||(this.sound=this.globalConfig.SoundTool.playT(this.SoundStr.RESHUIHU,function(){i.soundLoop=i.globalConfig.SoundTool.playT(i.SoundStr.RESHUIHU,null,null,i,!0)},null)):(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null,this.globalConfig.SoundTool.stopT(this.soundLoop),this.soundLoop=null))}},{key:"freshVolume",value:function(){this.playSound(this._toplay&&this.globalConfig.VOLUME,!0)}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this._steamParticle=null,this._steamParticle=this.ParticleUtil.getParticle(this.ParticleUtil.particles.waterstream),this.main.otherContainer.addChild(this._steamParticle),this._steamParticle.bind(this,-72,-70),this._steamParticle._this=this,this._steamParticle.completeFunc=function(){t._steamParticle.particle.maxParticles=0}}},{key:"setWorkPower",value:function(t){var i=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),clearTimeout(this._workPTime),this._workPTime=setTimeout(function(){i.hadDestory||i.setWorkPower_time(t)},100)}},{key:"setWorkPower_time",value:function(){var t=this,e=this.curPower;this._temp_num!==(e>150?220:0)&&(this._temp_num=e,this._timerID&&(clearTimeout(this._timerID),this.setWorkPowerDelay(0)),this._timerID=setTimeout(function(){t.hadDestory||(t._timerID=null,t.setWorkPowerDelay(t._temp_num))},100))}},{key:"setWorkPowerDelay",value:function(){var t=this;this.bg&&2===this.bg.totalFrames?Math.abs(this._temp_num)>this.workV?this._streamID=setTimeout(function(){t.hadDestory||Math.abs(t._temp_num)>t.workV&&(t._steamParticle&&(t._steamParticle.particle.maxParticles=200),t.playSound(!0))},5e3):(this._steamParticle&&this._steamParticle.particle&&(this._steamParticle.particle.maxParticles=0),this.playSound(!1),clearTimeout(this._streamID)):(this._steamParticle&&(this._steamParticle.particle.maxParticles=0),this.playSound(!1),clearTimeout(this._streamID))}},{key:"removed",value:function(){this._steamParticle.destroy.call(this._steamParticle),this.playSound(!1),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(u["default"])},860:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(483),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.paoTypeArr=[i.language.getLocaleStr("bchideng"),i.language.getLocaleStr("jnengdeng")],i.paoType=i.paoTypeArr[0],i.touTypeArr=[i.language.getLocaleStr("luowen"),i.language.getLocaleStr("kakou")],i.touType=i.touTypeArr[0],i.ratedP=100,i.ratedPArr=["25W","60W","100W"],i.bindHolder=null,i.Resistance=l.M.sq(220)/i.ratedP,i._isSeLock=!1,i}return o(e,t),a(e,[{key:"freshType",value:function(){this.bg.light.mm1.visible=!1,this.bg.light.mm2.visible=!1,this.bg.light.mm3.visible=!1,this.bg.light.mm4.visible=!1,this.curMM=this.paoType===this.paoTypeArr[0]?this.touType===this.touTypeArr[0]?this.bg.light.mm4:this.bg.light.mm3:this.touType===this.touTypeArr[0]?this.bg.light.mm2:this.bg.light.mm1,this.curMM.visible=!0;var t=l.M.sq(this.curPower)/this.Resistance;this.curMM.mm.alpha=Math.min(Math.sqrt(t/100),1),this.curMM.mm.visible=0!==this.curMM.mm.alpha}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this._isDown=!1,this._downP=new l.Point,l.M.setSPPointXY(this.bposter0,-5e3,-5e3),l.M.setSPPointXY(this.bposter1,-5e3,-5e3),this.freshType()}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.freshType()}},{key:"beginEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginEnd",this).call(this,t);var i=l.M.getMouseXY(t);l.M.setSPPoint(this._downP,i),this._isDown=!0}},{key:"moveEnd",value:function(t){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this._isDown){var i=l.M.getMouseXY(t);l.M.getPointLen(i,this._downP)>5&&this.unBindC()}}},{key:"unBindC",value:function(){this.bindHolder&&(this.bindHolder.link_bindLight(!1),this.bindHolder.bindLight=null,this.bindHolder=null,this._isSeLock=!1)}},{key:"endEnd",value:function(t){var i=this;if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this._isDown=!1,!this.bindHolder){var r=this.getChildByClassInRadius(this,"ElecFamilyLightHolder",150,new l.Point(0,0));each(r,function(t,e){if(!e.bindLight&&i.touType===e.touType)return i._bindLightHolder(e),!1})}}},{key:"_bindLightHolder",value:function(t){t.bindLight=this,this.bindHolder=t,this.freshBindLocation(),this.bindHolder.link_bindLight(!0),this._isSeLock=!0}},{key:"freshBindLocation",value:function(t){if(this.bindHolder){this.main.viewStack.updateTransform();var e=this.main.viewStack.toLocal(new l.Point(0,95),this.bindHolder);l.M.setSPPoint(this.parent,e)}}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.paoType=this.paoTypeArr.indexOf(this.paoType),t.touType=this.touTypeArr.indexOf(this.touType),t.ratedP=this.ratedP,this.bindHolder&&(t.bindHolder_UID=this.bindHolder.UID),t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),isNaN(t.paoType)||(this.paoType=this.paoTypeArr[t.paoType]),isNaN(t.touType)||(this.touType=this.touTypeArr[t.touType]),this.ratedP=t.ratedP,this.Resistance=l.M.sq(220)/this.ratedP,this.freshType()}},{key:"setDataOver",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.setData_obj&&this.setData_obj.bindHolder_UID&&(this.bindHolder=this.getChildByUID(this.setData_obj.bindHolder_UID),this._bindLightHolder(this.bindHolder))}},{key:"removed",value:function(){this.unBindC(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("lamp_type"),l.ArrayUtil.getIndexFromValue(this.paoTypeArr,this.paoType),this.paoTypeArr,function(e){t.paoType=t.paoTypeArr[e.checked],t.freshType()}),this.ComponentProperty.getRadio(this.language.getLocaleStr("lamp_head_type"),l.ArrayUtil.getIndexFromValue(this.touTypeArr,this.touType),this.touTypeArr,function(e){t.touType=t.touTypeArr[e.checked],t.freshType(),t.unBindC(),t.endEnd(null)}),this.ComponentProperty.getRadio(this.language.getLocaleStr("ratedPowerfull"),l.ArrayUtil.getIndexFromValue(this.ratedPArr,this.ratedP+"W"),this.ratedPArr,function(e){t.ratedP=l.M.getNumStr(t.ratedPArr[e.checked]),t.Resistance=l.M.sq(220)/t.ratedP,t.diyChanged(),t.freshType()})),i}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("ratedVoltage")+": 220V\n    "+this.language.getLocaleStr("ratedPowerfull")+": "+this.ratedP+"W\n    "}}]),e}(h["default"])},861:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:d(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(1),h=i(483),c=r(h),f=i(480),p=r(f);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.showLineType=1,i.bindLight=null,i.touTypeArr=[i.language.getLocaleStr("luowen"),i.language.getLocaleStr("kakou")],i.touType=i.touTypeArr[0],i.isShowNei=!1,i.level=6,i.isCheckPencilLink=!0,i.canShowNei=!0,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,0]],res:[[1,.002],[2,.002]]}),this.wire1=new p["default"](this.paramObj),this.wire1.zuheBox=this,this.zuheCompArr.push(this.wire1),this.elecUtil.linkWireBindMC(this.wire1.bposter0,this.bar1.bposter1),this.wire2=new p["default"](this.paramObj),this.wire2.zuheBox=this,this.zuheCompArr.push(this.wire2),this.elecUtil.linkWireBindMC(this.wire2.bposter0,this.bar2.bposter1),this.wire1.Resistance=this.wire2.Resistance=.001,this.bar1.bindWire=this.bar2.bindWire=function(e,i){t.bindWire(e,i)}}},{key:"link_bindLight",value:function(t){this.bindLight&&(t?(this.elecUtil.linkWireBindMC(this.wire1.bposter1,this.bindLight.bposter0),this.elecUtil.linkWireBindMC(this.wire2.bposter1,this.bindLight.bposter1),this.diyChanged()):(this.wire1.unLink(this.wire1.bposter1),this.wire2.unLink(this.wire2.bposter1),this.diyChanged()))}},{key:"drawLineArr",value:function(){this.addHeadWires([{type:1,pArr:[new u.Point(this.bposter0.x,this.bposter0.y),new u.Point(this.bposter0.x,this.bposter0.y+50)]},{type:0,pArr:u.M.getRoundP(new u.Point(this.bposter1.x+2,this.bposter1.y),new u.Point(this.bposter1.x-15,this.bposter1.y),new u.Point(this.bposter1.x-15,this.bposter1.y+50))}])}},{key:"freshType",value:function(){var t=this;this.isShowNei?(this.bg.currentFrame=this.touType===this.touTypeArr[0]?1:2,this.level=4,this.hotCir0.isLock=this.hotCir1.isLock=this.hotCir2.isLock=!1):(this.bg.currentFrame=0,this.level=6,this.hotCir0.isLock=this.hotCir1.isLock=this.hotCir2.isLock=!0),this.upToTop(),this.hotCirArr.forEach(function(e){e.canLinkPen=t.isShowNei}),this.main.dispatchEvent("freshPencil")}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-12,-15),10),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-12,0),6),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-17,7),6),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-14,23),12),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-14,33),12),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(12,23),12),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(12,33),12),this.hotCir2=this.addHotCir(this.bar1.bposter1,new u.Point(0,30),18),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(11,-15),11),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(9,0),7),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(4,7),4),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(0,7),4),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(-4,7),4),this.freshType()}},{key:"_getElecFromBposter",value:function(t){var e=this,i=null;return t&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length>0&&$.each(t.bindinger.friendPostersArr,function(t,r){if(!e.elecUtil.checkIsWire(r.body))return i=r.body,!1}),i}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.freshBindLocation()}},{key:"freshBindLocation",value:function(t){this.bindLight&&this.bindLight.freshBindLocation.call(this.bindLight)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.touType=this.touTypeArr.indexOf(this.touType),t.isShowNei=this.isShowNei,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),isNaN(t.touType)||(this.touType=this.touTypeArr[t.touType]),this.isShowNei=t.isShowNei,this.freshType()}},{key:"overStep",value:function(){}},{key:"clickShowNei",value:function(){this.isShowNei=!this.isShowNei,this.freshType()}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("lamp_holder_type"),u.ArrayUtil.getIndexFromValue(this.touTypeArr,this.touType),this.touTypeArr,function(e){t.bindLight||(t.touType=t.touTypeArr[e.checked],t.freshType())})),i}},{key:"removed",value:function(){this.bar1.bindWire=null,this.bar2.bindWire=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(c["default"])},862:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:g(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(1),h=i(114),c=r(h),f=i(483),p=r(f),d=i(480),y=r(d),b=i(522),v=r(b);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.level=7,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.isZuHe=!0,this.wire1=new y["default"](this.paramObj),this.wire1.zuheBox=this,this.zuheCompArr.push(this.wire1),this.wire2=new y["default"](this.paramObj),this.wire2.zuheBox=this,this.zuheCompArr.push(this.wire2);var t={};(0,c["default"])(t,this.paramObj,{name:"bar1",zuheBox:this,resistance:1e6}),this.bar1=new v["default"](t),this.zuheCompArr.push(this.bar1),this.elecUtil.linkWireBindMC(this.wire1.bposter0,this.bar1.bposter0),this.elecUtil.linkWireBindMC(this.wire2.bposter0,this.bar1.bposter1),this.elecUtil.linkWireBindMC(this.wire1.bposter1,this.moduleMain.elecFamilyPower.bposter2),this._freshPencilHandleProxy=this.freshPencilHandle.bind(this),this.main.addEventListener("freshPencil",this._freshPencilHandleProxy)}},{key:"freshPencilHandle",value:function(){this.checkPencilLink()}},{key:"linkW",value:function(t){t?this.elecUtil.linkWireBindMC(this.wire2.bposter1,t):this.wire1.unLink(this.wire2.bposter1)}},{key:"beginEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginEnd",this).call(this,t),this.linkW(null),this.diyChanged()}},{key:"endEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.checkPencilLink()}},{key:"caculateOver",value:function(){this.bg.currentFrame=Math.abs(this.bar1.bposter1.bindinger.Un)>.1?1:0}},{key:"setDataOver",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.checkPencilLink()}},{key:"checkPencilLink",value:function(){var t=this.toGlobalView(new u.Point,this.bg),e=this.main.getAllElecArr(),i=null,r=!0,n=!1,o=undefined;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,h=l.component;if(h&&h.hotCirArr&&h.hotCirArr.length>0){var c=!0,f=!1,p=undefined;try{for(var d,y=h.hotCirArr[Symbol.iterator]();!(c=(d=y.next()).done);c=!0){var b=d.value;if(!b.isHasLinkChar()){var v=this.toGlobalView(new u.Point,b);if(b.Radius>u.M.getPointLen(t,v)){b.isHasLinkChar(),i=b;break}}}}catch(g){f=!0,p=g}finally{try{!c&&y["return"]&&y["return"]()}finally{if(f)throw p}}if(i)break}}}catch(g){n=!0,o=g}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw o}}this.linkW(i&&!i.isLock?i.bindMC:null),this.diyChanged()}},{key:"removed",value:function(){this.main.removeEventListener("freshPencil",this._freshPencilHandleProxy),this._freshPencilHandleProxy=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(p["default"])},863:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function f(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:f(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(483),h=function(t){return t&&t.__esModule?t:{"default":t}}(u),c=i(13);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.canDel=!1,i.showLineType=1,i.allowSave=!1,i.canCopy=!1,i.canShowDragRect=!1,i.biaoNameArr=[i.language.getLocaleStr("jxdnengbiao"),i.language.getLocaleStr("szdnengbiao")],i.biaoName=i.biaoNameArr[0],i.switchNameArr=[i.language.getLocaleStr("zdkaiguan"),i.language.getLocaleStr("kqkaiguan")],i.switchName=i.switchNameArr[0],i.w=85964,i.P=0,i.timeStep=.5,i.elecIArr=["20A","30A","40A"],i.elecI=20,i.leftPosX=630;return i.WIRE_LEN=5e3,i.linePArr=[[new l.Point(i.leftPosX+.5,74.5),new l.Point(i.leftPosX+i.WIRE_LEN,74.5)],[new l.Point(i.leftPosX,105.5),new l.Point(i.leftPosX+i.WIRE_LEN,105.5)],[new l.Point(i.leftPosX+62,149),new l.Point(i.leftPosX+i.WIRE_LEN,149)]],i.noRenderSelected=!1,i.maiSpeed=0,i.notShowDelBtn=!0,i.numSPXYArr=[new l.Point(143,144),new l.Point(156,131)],i.hasBeginDraw=!1,i}return o(e,t),a(e,[{key:"addTisi",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addTisi",this).call(this),this.addChild(this.tisiBox)}},{key:"addLoopInit",value:function(){this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.main.addEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandle({isRunning:this.main.isRunning})}},{key:"canvasRunHandle",value:function(t){this.setActive(t.isRunning)}},{key:"setActive",value:function(t){}},{key:"stepLoop",value:function(){var t=this.P*this.timeStep;this.freshMai(this.P),this.setJNum(t),this.freshLabel()}},{key:"destroy",value:function(){this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"initNumComp",value:function(){this.numSP=new PIXI.Sprite,this.addChild(this.numSP),this.arr=[];var t=void 0;for(t=0;6>t;t++){var e=new PIXI.Text("2V",{font:"16px 微软雅黑",fill:16777215,align:"left"});this.arr.push(e),this.numSP.addChild(e),e.text="0",e.x=16.9*(5-t)}}},{key:"freshMai",value:function(t){this.maiSpeed+=t;this.biaoName===this.biaoNameArr[1]&&(1>t?this.maichong.currentFrame=1:this.maiSpeed>1e3&&(this.maiSpeed=0,this.maichong.currentFrame=0===this.maichong.currentFrame?1:0))}},{key:"setJNum",value:function(t){t/=36e4,this.tiao.addNum(t),this.w+=this.biaoName===this.biaoNameArr[0]?t:-t;var e=Math.floor(this.w);this.arr[0].text=""+Math.floor(e%10),this.arr[1].text=""+Math.floor(e/10%10),this.arr[2].text=""+Math.floor(e/100%10),this.arr[3].text=""+Math.floor(e/1e3%10),this.arr[4].text=""+Math.floor(e/1e4%10),this.arr[5].text=""+Math.floor(e/1e5%10)}},{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:5,pos:[[1,0],[2,1],[3,1]],wire:[[[1,1],[4,0]],[[4,1],[2,0]],[[2,1],[5,0]],[[5,1],[3,0]]],res:[[1,1e-4],[2,.001],[3,1e-4],[4,1e-4],[5,1e-4]]}),this.bar1.Power=220,this.bar1.iElecInter=2,this.bar3.Power=-220,this.bar3.iElecInter=2,this.bposter1.lineNameInd=0,this.bposter0.lineNameInd=1,this.bposter2.lineNameInd=2}},{key:"initLines",value:function(){for(var t=["ElecWireLineStyleRed.png","ElecWireLineStyleBlueB.png","ElecWireLineStyleYellow.png"],e=0;3>e;e++){var i=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+t[e]);this.lineBox.addChild(i),this.setRopePoints(i,this.linePArr[e],e)}l.M.setSPPointXY(this.jiedi,640,this.linePArr[2][0].y-4)}},{key:"freshType",value:function(){this.biaoName===this.biaoNameArr[0]?(this.energy.currentFrame=0,this.maichong.visible=!1,l.M.setSPPoint(this.numSP,this.numSPXYArr[1]),this.tiao.visible=!0):(this.energy.currentFrame=1,this.maichong.visible=!0,l.M.setSPPoint(this.numSP,this.numSPXYArr[0]),this.tiao.visible=!1),this.switchName===this.switchNameArr[0]?(this.jxkg.visible=!0,this.jxkgonoff.visible=!0,this.baoxiansi.visible=!0,this.kqkg.visible=!1,this.anxia.visible=!1,this.anxiabtn.visible=!1,this.kqkgonoff.visible=!1,l.M.setSPPoint(this.hotCir0,this.hotCirPArr[0][0]),l.M.setSPPoint(this.hotCir1,this.hotCirPArr[0][1]),this.lines.currentFrame=0):(this.jxkg.visible=!1,this.jxkgonoff.visible=!1,this.baoxiansi.visible=!1,this.kqkg.visible=!0,this.anxia.visible=!0,this.anxiabtn.visible=!0,this.kqkgonoff.visible=!0,l.M.setSPPoint(this.hotCir0,this.hotCirPArr[1][0]),l.M.setSPPoint(this.hotCir1,this.hotCirPArr[1][1]),this.lines.currentFrame=1),this.tisi&&this.tisi.visible&&(this.tisi.visible=!1),this.anxia.currentFrame=1,this.jxkgonoff.currentFrame=this.kqkgonoff.currentFrame=1,this.bar2.isBreak=!1,1!==this.baoxiansi.currentFrame&&3!==this.baoxiansi.currentFrame&&5!==this.baoxiansi.currentFrame||this.baoxiansi.currentFrame--,this.openElec(!0)||this.diyChanged()}},{key:"initWireHandle",value:function(){var t=this;this.main.addEventListener(c.PHY_EVENTS.BLACK_TOUCH_BEGIN,function(e){t.begin(e)}),this.main.addEventListener(c.PHY_EVENTS.BLACK_TOUCH_MOVE,function(e){t.move(e)}),this.documentEndProx=this.documentEnd.bind(this),this.main.addEventListener(c.PHY_EVENTS.DOCUMENT_END,this.documentEndProx);var e=!1;this.lineBoxId=l.M.addTouch(this.lineBox,{begin:function(i){e=!0,t.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_BEGIN,i)},move:function(i){e&&t.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_MOVE,i)},end:function(i){e&&(e=!1,t.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_END,i))}})}},{key:"begin",value:function(t,e){var i=this;if(!this.hasBeginDraw&&(this.hasBeginDraw=!0,7===this.globalConfig.version)){var r=this.phy.getMouseXY(t);this.main.view.updateTransform();if(this.parent.toLocal(r,this.main.viewStack).x>=this.leftPosX){var n=this.getPowerLineData(r),o=void 0,a=void 0,s=-1,u=0,h=!1;if(n)s=0,o=n.p,a=n.post,u=n.lineNameInd;else{var c=this.getPowerElecData(r,e);c&&(s=1,this.main.viewStack.parent.updateTransform(),o=this.main.viewStack.toLocal(new l.Point,c.bPsIt.BindMC),a=c.bPsIt.BindMC,u=0===a.ind?1:1===a.ind?0:2,h=!0)}-1!==s&&(this.addComp([{name:"ElecFamilyWire",p:new l.Point(0,0),classParam:{lineNameInd:u}}],function(t){var e=t[0];e.allowSave=!0,e.linkType=s,0===s&&(e.bposter0LK=!0),e.startP.call(e,o),i.curWire=e,i.elecUtil.linkWireBindMC(e.bposter0,a)},!0),h=!0),h&&(this.globalConfig.isBlackMoveEnable=!1,setTimeout(function(){i.hadDestory||i.main.execute(i.NBCommand.STOP_SELECT,event)},0))}}}},{key:"move",value:function(t){if(7===this.globalConfig.version&&this.curWire){this.curWire.moveP.call(this.curWire,this.phy.getMouseXY(t))}}},{key:"documentEnd",value:function(t){if(this.globalConfig.isBlackMoveEnable=!0,this.hasBeginDraw=!1,7===this.globalConfig.version&&this.curWire){var e=this.curWire.bposter0.toGlobal();if(50>e.x||50>e.y)return this.curWire.dispose(),this.main.removeEquipment.call(this.main,this.curWire),void(this.curWire=null);var i=this.phy.getCanvasP(t);if(1===this.curWire.linkType){var r=this.getPowerLineData(i);if(!r){if(0===this.curWire.bposter1.bindinger.BindMC.x&&0===this.curWire.bposter1.bindinger.BindMC.y)this.main.removeEquipment.call(this.main,this.curWire),this.curWire.dispose();else{if(this.curWire.bposter1.bindinger.nearToBinding.call(this.curWire.bposter1.bindinger)){var n=this.elecUtil.getWireBposterElec(this.curWire.bposter0),o=this.elecUtil.getWireBposterElec(this.curWire.bposter1);n&&o&&n.uid===o.uid?(this.main.removeEquipment.call(this.main,this.curWire),this.curWire.dispose()):(this.checkAndDispose_curWire(),this.diyChanged())}else this.main.removeEquipment.call(this.main,this.curWire),this.curWire.dispose()}return void(this.curWire=null)}i=r.p,this.curWire.bposter1LK=!0,this.elecUtil.linkWireBindMC(this.curWire.bposter1,r.post),this.checkAndDispose_curWire()}this.curWire&&(this.diyChanged(),this.curWire.endP.call(this.curWire,i),this.globalConfig.SoundTool.registAndPlay(this.SoundStr.DAO_XIAN_LIAN_JIE),this.curWire=null)}}},{key:"checkAndDispose_curWire",value:function(t){var e=this;if(!this.curWire)return!1;var i=this.curWire.bposter0.bindinger.friendPostersArr,r=[];if(each(i,function(t,e){"ElecFamilyWire"===e.body.classname&&r.push(e.body.UID)}),r.length>0){var n=this.curWire.bposter1.bindinger.friendPostersArr;each(n,function(t,i){if("ElecFamilyWire"===i.body.classname&&l.ArrayUtil.arrayContainsValue(r,i.body.UID))return e.curWire.dispose(),e.main.removeEquipment.call(e.main,e.curWire),e.curWire=null,!1},this)}}},{key:"getPowerLineData",value:function(t){this.main.viewStack.parent.updateTransform();var e=this.main.viewStack.toLocal(this.linePArr[0][0],this),i=this.main.viewStack.toLocal(this.linePArr[1][0],this),r=this.main.viewStack.toLocal(this.linePArr[2][0],this),n=Math.abs(t.y-e.y),o=Math.abs(t.y-i.y),a=Math.abs(t.y-r.y),s=Math.min(n,o,a);if(s>50/this.main.view.scale.x)return null;var u=new l.Point(t.x,0),h=void 0;return s===n?(u.y=e.y,h=this.bposter1):s===o?(u.y=i.y,h=this.bposter0):s===a&&(u.y=r.y,h=this.bposter2),{post:h,p:u,lineNameInd:h.lineNameInd}}},{key:"getPowerElecData",value:function(t,e){var i=void 0,r=void 0,n=void 0,o=[],a=this.main.getEquipmentArr(),s=a.length;for(r=0;s>r;r++)if(i=a[r].component,!this.elecUtil.checkIsWire(i)&&i.bPsArr&&(!i.showLineType||1===i.showLineType)){var u=i.bPsArr.length;for(this.main.viewStack.parent.updateTransform(),n=0;u>n;n++){var h=i.bPsArr[n];if(!h.body.isZuHe){var c=this.main.viewStack.toLocal(new l.Point,h.BindMC),f=l.M.getPointLen(t,c);!e&&f>30||o.push({distance:f,component:h.body,bPsIt:h})}}}return o.length?(o.sort(function(t,e){return e.distance>t.distance?-1:1}),o[0]):null}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this);var i=l.M.getAddPIXIBMP(this,"tiaobmd");i&&this.removeChild(i),this.tiao=this.create_tiaoComp(),this.addChild(this.tiao),this.tiao.x=30,this.tiao.y=171.5,this.lineBox=new PIXI.Sprite,this.addChild(this.lineBox),this.initLines(),this.isDown=!1,this.downP=new l.Point,this.tabId=l.M.addTouch(this,{tab:function(e){t.main.setCurElec.call(t.main,t,!0)}});var r=function(e){e.stopPropagation(),t.isDown=!0;var i=t.phy.getMouseXY(e);l.M.setSPPoint(t.downP,i)},n=function(e){if(t.isDown){var i=t.phy.getMouseXY(e),r=i.y-t.downP.y;0===t.kqkgonoff.currentFrame&&-20>r?(t.wire1.isBreak=!1,(t.switchName===t.switchNameArr[0]||t.switchName===t.switchNameArr[1]&&1===t.anxia.currentFrame)&&(t.jxkgonoff.currentFrame=t.kqkgonoff.currentFrame=1,t.isDown=!1,t.switchName===t.switchNameArr[1]&&t.globalConfig.SoundTool.play(t.SoundStr.SWITCH_OPEN),t.openElec(!0)),1===t.jxkgonoff.currentFrame&&0===t.anxia.currentFrame&&(t.anxia.currentFrame=1)):1===t.kqkgonoff.currentFrame&&r>20&&(t.jxkgonoff.currentFrame=t.kqkgonoff.currentFrame=0,t.isDown=!1,t.switchName===t.switchNameArr[1]&&t.globalConfig.SoundTool.play(t.SoundStr.SWITCH_CLOSE),t.wire1.isBreak=!0,t.openElec(!1))}},o=function(e){t.isDown=!1};this.kqkgonoffId=l.M.addTouch(this.kqkgonoff,{begin:r,move:n,end:o},this),this.jxkgonoffId=l.M.addTouch(this.jxkgonoff,{begin:r,move:n,end:o},this),l.M.setButton(this.anxiabtn,function(e){0!==t.anxia.currentFrame&&(t.anxia.currentFrame=0,t.jxkgonoff.currentFrame=t.kqkgonoff.currentFrame=0,t.openElec(!1),t.globalConfig.SoundTool.play(t.SoundStr.SWITCH_CLOSE))}),this.anxiaId=l.M.addTouch(this.anxia,{begin:function(e){t.anxia.currentFrame=1}}),this.initWireHandle(),this.jxkgonoff.currentFrame=this.kqkgonoff.currentFrame=1,this.openElec(!0),this.hotCir0=this.addHotCir(this.bar2.bposter0),this.hotCir1=this.addHotCir(this.bar2.bposter1),this.hotCirPArr=[[new l.Point(477,260),new l.Point(477,290)],[new l.Point(477,158),new l.Point(551,280)]],this.initNumComp(),this.freshType(),this.main.addEventListener(c.PHY_EVENTS.BPOSTER_DPSP_DOWN,function(e){t.begin(e,!0)}),this.main.addEventListener(c.PHY_EVENTS.BPOSTER_DPSP_MOVE,function(e){t.move(e,!0)}),this.addCursor(this.lineBox,"huizhi"),this.addLoopInit()}},{key:"create_tiaoComp",value:function(){var t=new PIXI.Sprite;t.sp1=PIXI.Sprite.fromFrame("ElecFamilyPower/tiaobmd"),t.sp2=PIXI.Sprite.fromFrame("ElecFamilyPower/tiaobmd"),t.addChild(t.sp1),t.addChild(t.sp2);var e=new PIXI.Graphics;return e.beginFill(16711680,.8),e.drawRect(129,0,88,3),t.addChild(e),t.mask=e,t.num=0,t.fresh=function(){t.sp1.x=t.num%t.sp1.width,t.sp2.x=t.sp1.x+t.sp1.width},t.fresh(),t.addNum=function(e){t.num+=500*e,t.fresh()},t}},{key:"openElec",value:function(t){return this._openElecState!==t&&(this._openElecState=t,t?(this.switchName!==this.switchNameArr[0]||1!==this.baoxiansi.currentFrame&&3!==this.baoxiansi.currentFrame&&5!==this.baoxiansi.currentFrame)&&(this.bar2.isBreak=!1,this.bar3.isBreak=!1,this.wire2.isBreak=!1):(this.bar2.isBreak=!0,this.bar3.isBreak=!0,this.wire2.isBreak=!0),this.diyChanged(),!0)}},{key:"overStep",value:function(){var t=this,e=!1;Math.abs(this.bar5.curElec)>.01&&this.switchName===this.switchNameArr[1]&&(this.anxia.currentFrame=0,this.jxkgonoff.currentFrame=this.kqkgonoff.currentFrame=0,this.openElec(!1),this.globalConfig.SoundTool.play(this.SoundStr.SWITCH_CLOSE),e=!0),(Math.abs(this.bar4.curElec)>this.elecI||Math.abs(this.bar5.curElec)>this.elecI)&&(this.switchName===this.switchNameArr[1]?(this.kqkgonoff.currentFrame=0,this.tisi&&this.tisi.visible&&(this.tisi.visible=!1),this.globalConfig.SoundTool.play(this.SoundStr.SWITCH_CLOSE)):(0!==this.baoxiansi.currentFrame&&2!==this.baoxiansi.currentFrame&&4!==this.baoxiansi.currentFrame||this.baoxiansi.currentFrame++,this.tisi&&(this.tisi.visible=!0,this.globalConfig.SoundTool.registAndPlay(this.SoundStr.LAMP_BURN_OUT))),this.bar2.isBreak=!0,this.openElec(!1),e=!0),e&&(this.__cacuInt&&clearTimeout(this.__cacuInt),this.__cacuInt=setTimeout(function(){t.hadDestory||(t.__cacuInt=null,t.diyChanged())},150)),this.P=Math.abs((this.bposter0.bindinger.Un-this.bposter1.bindinger.Un)*this.bar4.curElec)}},{key:"removed",value:function(){this.removedCursor(this.lineBox),l.M.removeTouch(this,this.tabId),l.M.removeTouch(this.lineBox,this.lineBoxId),l.M.removeTouch(this.kqkgonoff,this.kqkgonoffId),l.M.removeTouch(this.jxkgonoff,this.jxkgonoffId),l.M.removeTouch(this.anxia,this.anxiaId),this.main.removeEventListener(c.PHY_EVENTS.DOCUMENT_END,this.documentEndProx),this.destroy(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t={};return t.biaoName=this.biaoName,t.switchName=this.switchName,t.elecI=this.elecI,t.isLingBreak=this.isLingBreak,t}},{key:"setData",value:function(t){t&&(this.biaoName=t.biaoName,this.switchName=t.switchName,this.elecI=t.elecI,this.isLingBreak=!!t.isLingBreak,this.freshType())}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.elecLable=this.rootData.name,i.canDelete=!1,i.confArr.push({type:this.ComponentProperty.RADIO,name:this.getLocaleStr("elec_meter_type","电表类型"),checked:l.ArrayUtil.getIndexFromValue(this.biaoNameArr,this.biaoName),value:this.biaoNameArr,"this":this,callBack:function(e){t.biaoName=t.biaoNameArr[e.checked],t.freshType()}},{type:this.ComponentProperty.RADIO,name:this.getLocaleStr("switch_type","开关类型"),checked:l.ArrayUtil.getIndexFromValue(this.switchNameArr,this.switchName),value:this.switchNameArr,"this":this,callBack:function(e){t.switchName=t.switchNameArr[e.checked],t.freshType(),t.freshLibPan()}},this.getSwitch([this.getLocaleStr("liveWireDamage","零线损坏"),this.isLingBreak,function(e){t.isLingBreak=e.checked}])),this.switchName===this.switchNameArr[0]&&(i.confArr.push(this.getRadio([this.getLocaleStr("safety_wire","保险丝"),l.ArrayUtil.getIndexFromValue(this.elecIArr,this.elecI+"A"),this.elecIArr,function(e){t.elecI=l.M.getNumStr(t.elecIArr[e.checked])-0,t.tisi&&t.tisi.visible&&(t.tisi.visible=!1),t.baoxiansi.currentFrame=20===t.elecI?0:30===t.elecI?2:4,t.freshType(),t.diyChanged()}])),1!==this.baoxiansi.currentFrame&&3!==this.baoxiansi.currentFrame&&5!==this.baoxiansi.currentFrame||i.confArr.push({type:this.ComponentProperty.BUTTON,name:this.getLocaleStr("repl_safety_wire","修复保险丝"),text:this.getLocaleStr("repair","修复"),"this":this,callBack:function(e){1===t.jxkgonoff.currentFrame&&(t.bar2.isBreak=!1,t.bar3.isBreak=!1,t.wire2.isBreak=!1),t.baoxiansi.currentFrame--,t.tisi&&t.tisi.visible&&(t.tisi.visible=!1),t.diyChanged()}})),i}},{key:"isLingBreak",set:function(t){this.bar4.isBreak!==t&&(this.bar4.isBreak=t,this.bar4.branchChange=!0)},get:function(){return this.bar4.isBreak}}]),e}(h["default"])},864:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:h(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(484),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){return r(this,e),t.ratedP=1500,n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bg.redAlpha.alpha=0}},{key:"setWorkPower",value:function(t){Math.abs(t)>this.workV?TweenMax.to(this.bg.redAlpha,2,{alpha:1}):TweenMax.to(this.bg.redAlpha,2,{alpha:0})}}]),e}(u["default"])},865:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(483),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.showLineType=1,i.canShowRepairBtn=!1,i}return o(e,t),a(e,[{key:"drawLineArr",value:function(){this.addHeadWires([{type:0,pArr:l.M.getRoundP(this.bposter0,new l.Point(this.bposter0.x+25,this.bposter0.y),new l.Point(this.bposter0.x+25,this.bposter0.y+50))},{type:0,pArr:[this.bposter1,new l.Point(this.bposter1.x,this.bposter1.y+50)]}]),this.bposter0.ind=1,this.bposter1.ind=1}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.isBreak=!0,this.oriLineY=this.line.y;var i=void 0;this._lineTouchId=l.M.addTouch(this.line,{begin:function(e){t.cannotSystemDrag=!0,t.downY=l.M.getMouseXY(e).y,i=!0},move:function(e){var r=l.M.getMouseXY(e).y;t.line.y+=r-t.downY,t.line.y-t.oriLineY>15?t.line.y=t.oriLineY+15:0>t.line.y-t.oriLineY&&(t.line.y=t.oriLineY),t.downY=r,i&&t.line.y-t.oriLineY>7?(i=!1,t.switchOpen()):!i&&4>t.line.y-t.oriLineY&&(i=!0)},end:function(e){t.cannotSystemDrag=!1,t.line.y=t.oriLineY}}),this.addCursor(this.line,"tuozhuai")}},{key:"switchOpen",value:function(){this.isBreak=!this.isBreak,this.diyChanged()}},{key:"removed",value:function(){this.removedCursor(this.line),l.M.removeTouch(this.line,this._lineTouchId),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(h["default"])},866:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(483),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.showLineType=1,i.nameInd=0,i.touchId=null,i.nameArr=[i.language.getLocaleStr("two_line"),i.language.getLocaleStr("three_line")],i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,1],[1,0],[2,1]],wire:[[[1,0],[2,0]]]})}},{key:"_drawLineArr",value:function(){0===this.nameInd?(this.clearHeadWires(),this.addHeadWires([{type:0,pArr:l.M.getRoundP(this.var_oriPArr1[0],new l.Point(this.var_oriPArr1[0].x+30,this.var_oriPArr1[0].y),new l.Point(this.var_oriPArr1[0].x+30,this.var_oriPArr1[0].y+50))},{type:0,pArr:[this.var_oriPArr1[1],new l.Point(this.var_oriPArr1[1].x,this.var_oriPArr1[1].y+70)]}]),l.M.setSPPoint(this.bposter0,this.var_oriPArr1[0]),l.M.setSPPoint(this.bposter1,this.var_oriPArr1[1]),l.M.setSPPointXY(this.bposter2,-5e4,-5e4),this.bposter0.dp.setTo(0,0),this.bposter1.dp.setTo(0,0),this.bposter2.dp.setTo(-5e4,-5e4),this.bposter2.bindinger.friendPostersArr.length>0&&this.bposter2.bindinger.friendPostersArr.forEach(function(t){t.body.removeOwner()}),this.freshDp()):(this.clearHeadWires(),this.addHeadWires([{type:0,pArr:l.M.getRoundP(this.var_oriPArr2[0],new l.Point(this.var_oriPArr2[0].x+20,this.var_oriPArr2[0].y),new l.Point(this.var_oriPArr2[0].x+20,this.var_oriPArr2[0].y+70))},{type:0,pArr:[this.var_oriPArr2[1],new l.Point(this.var_oriPArr2[1].x,this.var_oriPArr2[1].y+70)]},{type:0,pArr:l.M.getRoundP(this.var_oriPArr2[2],new l.Point(this.var_oriPArr2[2].x-30,this.var_oriPArr2[2].y),new l.Point(this.var_oriPArr2[2].x-30,this.var_oriPArr2[2].y+70))}]),l.M.setSPPoint(this.bposter0,this.var_oriPArr2[0]),l.M.setSPPoint(this.bposter1,this.var_oriPArr2[1]),l.M.setSPPoint(this.bposter2,this.var_oriPArr2[2]),this.bposter0.dp.setTo(0,0),this.bposter1.dp.setTo(0,0),this.bposter2.dp.setTo(0,-10),this.freshDp()),this.updateBinds(),this.bposter0.ind=1,this.bposter1.ind=1,this.bposter2.ind=1}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bg.currentFrame=1,this.freshOpen(!0),this.var_oriPArr1=[new l.Point(this.bposter0.x,this.bposter0.y+10),new l.Point(this.bposter1.x,this.bposter1.y+10)],this.var_oriPArr2=[new l.Point(this.bposter0.x,this.bposter0.y),new l.Point(this.bposter1.x-15,this.bposter1.y),l.M.getSPPoint(this.bposter2)],this.touchId=l.M.addTouch(this.cbtn,{tab:function(e){t.bg.currentFrame=0==t.bg.currentFrame?1:0,t.freshOpen()}},this),this.freshOpen(),this._drawLineArr(),this.addCursor(this.cbtn,"hand")}},{key:"freshOpen",value:function(t){0==this.bg.currentFrame?(this.bar1.isBreak=!1,this.bar2.isBreak=!0):(this.bar1.isBreak=!0,this.bar2.isBreak=!1),t||this.diyChanged()}},{key:"removed",value:function(){this.removedCursor(this.cbtn),l.M.removeTouch(this.cbtn,this.touchId),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.nameInd=this.nameInd,t.cframe=this.bg.currentFrame,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.nameInd=t.nameInd,this.bg.currentFrame=t.cframe,this._drawLineArr(),this.freshOpen(!0)}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("type"),this.nameInd,this.nameArr,function(e){t.nameInd=e.checked,t._drawLineArr()})),i}}]),e}(h["default"])},867:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:d(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(1),h=i(652),c=r(h),f=i(480),p=r(f);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.charType=1,i.loadLevel=3,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){this.createZuhe({bar:3,pos:[[1,0],[2,0],[3,0]]}),this.wire1=new p["default"](this.paramObj),this.wire1.zuheBox=this,this.zuheCompArr.push(this.wire1),this.elecUtil.linkWireBindMC(this.wire1.bposter0,this.bar1.bposter1),this.wire2=new p["default"](this.paramObj),this.wire2.zuheBox=this,this.zuheCompArr.push(this.wire2),this.elecUtil.linkWireBindMC(this.wire2.bposter0,this.bar2.bposter1),this.wire3=new p["default"](this.paramObj),this.wire3.zuheBox=this,this.zuheCompArr.push(this.wire3),this.elecUtil.linkWireBindMC(this.wire3.bposter0,this.bar3.bposter1)}},{key:"drawLineArr",value:function(){this.addHeadWires([{type:0,pArr:u.M.getRoundP(u.M.getSPPoint(this.bposter1),new u.Point(this.bposter1.x-8,this.bposter1.y),new u.Point(this.bposter1.x-8,this.bposter1.y+50))},{type:1,pArr:u.M.getRoundP(u.M.getSPPoint(this.bposter0),new u.Point(this.bposter0.x+8,this.bposter0.y),new u.Point(this.bposter0.x+8,this.bposter0.y+50))},{type:2,pArr:[new u.Point(this.bposter2.x,this.bposter2.y),new u.Point(this.bposter2.x,this.bposter2.y+75)]}])}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addHotCir(this.bar1.bposter0,new u.Point(-15,10)),this.addHotCir(this.bar2.bposter0,new u.Point(15,10)),this.addHotCir(this.bar3.bposter0,new u.Point(0,-10))}}]),e}(c["default"])},868:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(484),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(t){return r(this,e),t.ratedP=120,n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"selectRenderChild",value:function(){return this.updateTransform(),this.bg.getBounds()}}]),e}(l["default"])},869:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(652),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.loadLevel=3,i}return o(e,t),a(e,[{key:"drawLineArr",value:function(){this.addHeadWires([{type:1,pArr:[l.M.getSPPoint(this.bposter0),new l.Point(this.bposter0.x,this.bposter0.y+60)]},{type:0,pArr:[l.M.getSPPoint(this.bposter1),new l.Point(this.bposter1.x,this.bposter1.y+60)]}])}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addHotCir(this.bar1.bposter0,new l.Point(-15,0)),this.addHotCir(this.bar2.bposter0,new l.Point(15,0))}}]),e}(h["default"])},870:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:c(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(484),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){r(this,e),t.ratedP=400;var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.addN=0,i.maxN=.1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.deng.visible=!1}},{key:"update",value:function(){this.hadDestory||(Math.abs(this.curPower)>this.workV?(this.addN=this.maxN,this.deng.visible||(this.deng.visible=!0)):(this.addN=0,this.deng.visible&&(this.deng.visible=!1)),this.addN=l.M.range(this.addN,0,this.maxN),this.bg.ye&&(this.bg.ye.rotation+=this.addN))}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(h["default"])},871:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(484),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){return r(this,e),t.ratedP=1e3,n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s["default"])},872:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function f(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var n=Object.getPrototypeOf(t);return null===n?undefined:f(n,e,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(1),u=i(483),h=function(t){return t&&t.__esModule?t:{"default":t}}(u),c=i(13);e["default"]=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.elecFamilyPower=i.moduleMain.elecFamilyPower,i.iElecInter=1,i.linkType=0,i.loadLevel=6,i.bposter0LK=!1,i.bposter1LK=!1,i.lineNameInd=t.classParam&&t.classParam.lineNameInd?t.classParam.lineNameInd:0,i.Resistance=.001,i.visible=!1,i.noRenderSelected=!0,i}return o(e,t),a(e,[{key:"startP",value:function(t){this.globalConfig.canCanvasDrag=!1,l.M.setSPPoint(this.bposter0,t)}},{key:"moveP",value:function(t){l.M.setSPPoint(this.bposter1,t),this.freshbp(!0),this._drawLine()}},{key:"endP",value:function(t){if(this.globalConfig.canCanvasDrag=!0,l.M.setSPPoint(this.bposter1,t),this.freshbp(),this._drawLine(),0===this.linkType){var e=l.M.getSPPoint(this.bposter0);if(100>l.M.getPointLen(e,t))return void this.removeOwner();this.bposter1.bindinger.nearToBinding.call(this.bposter1.bindinger)?(this.globalConfig.SoundTool.registAndPlay(this.SoundStr.DAO_XIAN_LIAN_JIE),this.diyChanged()):this.removeOwner()}}},{key:"removeOwner",value:function(){this.main.removeEquipment.call(this.main,this),this.dispose()}},{key:"dispose",value:function(){this.bposter0.bindinger.breakBinding.call(this.bposter0.bindinger),this.bposter1.bindinger.breakBinding.call(this.bposter1.bindinger),this.diyChanged()}},{key:"freshbp",value:function(t){0===this.linkType?this.bposter0.x=this.bposter1.x:t||(this.bposter1.x=this.bposter0.x)}},{key:"_drawLine",value:function(){this.bposter0LK?this.bposter0.x=this.bposter1.x:this.bposter1LK&&(this.bposter1.x=this.bposter0.x);var t=void 0,e=void 0;this.bposter1.y>this.bposter0.y?(t=l.M.getSPPoint(this.bposter0),e=l.M.getSPPoint(this.bposter1)):(t=l.M.getSPPoint(this.bposter1),e=l.M.getSPPoint(this.bposter0));var i=this.getLinkPowerPoster();if(i){t=l.M.getSPPoint(i[0]);var r=i[2].BindMC.lineNameInd;this.main.view.updateTransform(),t.y=this.parent.toLocal(this.elecFamilyPower.linePArr[r][0],this.elecFamilyPower.lineBox).y,e=l.M.getSPPoint(i[1]);var n=i[1].bindinger.friendPostersArr,o=0;each(n,function(t,e){if("ElecFamilyWire"!==e.body.classname)return o=e.BindMC.ind!==undefined?e.BindMC.ind:e.name.substring(e.name.length-1)-0,!0},this);var a=new l.Point(this.elecFamilyPower.leftPosX,0),s=this.toLocal(a,this.elecFamilyPower).x+20*o+70;s>t.x&&(t.x=s,this.bposter0.x=t.x,u=new l.Point(t.x,e.y),this.setRopePoints(this.bg,[t,u]),this.setRopePoints(this.bg1,[u,e]),this.setRopePoints(this.lineFG,[t,u]),this.setRopePoints(this.lineFG1,[u,e])),l.M.setSPPoint(this.xiantou,t),this.xiantou.visible=!0,this._dragG.clear(),this._dragG.beginFill(16711680,0),this._dragG.drawRect(t.x-10,t.y,20,Math.abs(e.y-t.y+10)),this._dragG.drawRect(t.x+10,e.y-10,Math.abs(e.x-t.x-10),10),this._dragG.endFill(),l.M.setSPPoint(this.closeBtn,new l.Point(t.x,t.y+(e.y-t.y)/2))}else this.xiantou.visible=!1,this._dragG.clear(),this._dragG.beginFill(16711680,0),this._dragG.drawRect(Math.min(t.x,e.x),t.y-10,Math.abs(e.x-t.x),20),this._dragG.endFill(),l.M.setSPPoint(this.closeBtn,new l.Point(t.x+(e.x-t.x)/2,t.y));var u=new l.Point(e.x,t.y);this.setRopePoints(this.bg,[t,u]),this.setRopePoints(this.bg1,[u,e]),this.setRopePoints(this.lineFG,[t,u]),this.setRopePoints(this.lineFG1,[u,e]),this.visible||(this.visible=!0)}},{key:"getLinkPowerPoster",value:function(){var t=this,e=this.bposter0.bindinger.friendPostersArr,i=null,r=null,n=null;return each(e,function(e,o){if(o.body.zuheBox&&"ElecFamilyPower"===o.body.zuheBox.classname)return i=t.bposter0,r=t.bposter1,n=o,!0}),i||(e=this.bposter1.bindinger.friendPostersArr,each(e,function(e,o){if(o.body.zuheBox&&"ElecFamilyPower"===o.body.zuheBox.classname)return i=t.bposter1,r=t.bposter0,n=o,!0})),i?[i,r,n]:null}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.cannotSystemDrag=!0,this.removeChild(this.bg),this.bg=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+this.lineNameArr[this.lineNameInd]+".png"),this.addChild(this.bg),this.setRopePoints(this.bg,[new l.Point(-500,-500),new l.Point(-501,-500)]),this.bg1=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+this.lineNameArr[this.lineNameInd]+".png"),this.addChild(this.bg1),this.setRopePoints(this.bg1,[new l.Point(-500,-500),new l.Point(-501,-500)]),this.lineFG=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+"ElecWireSe.png"),this.addChild(this.lineFG),this.lineFG1=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+"ElecWireSe.png"),this.addChild(this.lineFG1),this.lineFG.visible=this.lineFG1.visible=!1,this.addChild(this.xiantou),this._dragG=new PIXI.Graphics,this.addChild(this._dragG),this.closeBtn.visible=!1,l.M.addTouch(this,{begin:function(e){t.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_BEGIN,e)},move:function(e){t.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_MOVE,e)},end:function(e){t.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_END,e)}}),this.xiantou.visible=!1,this.fresh_lineNameInd()}},{key:"fresh_lineNameInd",value:function(){this.removeChild(this.bg),this.removeChild(this.bg1),this.lineNameInd=this.lineNameInd||0,this.bg=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+this.lineNameArr[this.lineNameInd]+".png"),this.addChild(this.bg),this.setRopePoints(this.bg,[new l.Point(-500,-500),new l.Point(-501,-500)]),this.bg1=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+this.lineNameArr[this.lineNameInd]+".png"),this.addChild(this.bg1),this.setRopePoints(this.bg1,[new l.Point(-500,-500),new l.Point(-501,-500)]),this.addChild(this.lineFG),this.addChild(this.lineFG1),this.addChild(this.xiantou),this.addChild(this._dragG),this.addChild(this.closeBtn)}},{key:"setRopePoints",value:function(t,i,r){r=this.lineNameInd,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setRopePoints",this).call(this,t,i,r)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.bposter0X=this.bposter0.x,t.bposter0Y=this.bposter0.y,t.bposter1X=this.bposter1.x,t.bposter1Y=this.bposter1.y,t.linkType=this.linkType,t.bposter0LK=this.bposter0LK,t.bposter1LK=this.bposter1LK,t.lineNameInd=this.lineNameInd,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.bposter0.x=t.bposter0X,this.bposter0.y=t.bposter0Y,this.bposter1.x=t.bposter1X,this.bposter1.y=t.bposter1Y,this.linkType=t.linkType,this.bposter0LK=t.bposter0LK,this.bposter1LK=t.bposter1LK,this.lineNameInd=t.lineNameInd,this.bposter0LK?this._linkToPower(this.bposter0,this.lineNameInd):this.bposter0.bindinger.nearToBinding.call(this.bposter0.bindinger),this.bposter1LK?this._linkToPower(this.bposter1,this.lineNameInd):this.bposter1.bindinger.nearToBinding.call(this.bposter1.bindinger),this.fresh_lineNameInd(),this._drawLine()}},{key:"_linkToPower",value:function(t,e){if(null===e||e===undefined){this.main.viewStack.parent.updateTransform();var i=this.main.viewStack.toLocal(new l.Point,t),r=this.elecFamilyPower.getPowerLineData.call(this.elecFamilyPower,i);r&&this.elecUtil.linkWireBindMC(t,r.post)}else{var n=void 0;n=0===e?this.elecFamilyPower.bposter1:1===e?this.elecFamilyPower.bposter0:this.elecFamilyPower.bposter2,this.elecUtil.linkWireBindMC(t,n)}}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),r=[this.language.getLocaleStr("red"),this.language.getLocaleStr("blue"),this.language.getLocaleStr("yellow")],n=r[this.lineNameInd];return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("wireColor"),canEnter:!1,showValue:n,value:r,"this":this,callBack:function(e){t.lineNameInd=e.checked,t.fresh_lineNameInd(),t._drawLine()}}),i}},{key:"removed",value:function(){this.dispose()}},{key:"setSelected",value:function(t){[this.lineFG,this.lineFG1].forEach(function(e){t?(e.alpha=1,e.visible=!0):e.visible=!1})}},{key:"getLocalBoundsElecs",value:function(){return[this.closeBtn]}}]),e}(h["default"])},873:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();e["default"]=function(){function t(e){r(this,t),this.classname="ElecInsOne",this.elecUtil=e.moduleMain.elecUtil,this.pare=e.pare,this.index=0,this.bindChar=null,this.charType=0,this.wire1=null,this.wire2=null,this.wire3=null}return n(t,[{key:"freshBindLocation",value:function(){this.bindChar&&this.bindChar.freshBindLocation()}},{key:"link_bindChar",value:function(t){this.bindChar&&(t?(this.elecUtil.linkWireBindMC(this.wire1.bposter1,this.bindChar.bposter0),this.elecUtil.linkWireBindMC(this.wire2.bposter1,this.bindChar.bposter1)):(this.wire1.unLink(this.wire1.bposter1),this.wire2.unLink(this.wire2.bposter1)))}},{key:"moveEnd",value:function(){this.freshBindLocation()}}]),t}()}});