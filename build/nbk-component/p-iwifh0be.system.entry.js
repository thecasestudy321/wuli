var __awaiter=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function s(e){try{u(i.next(e))}catch(t){a(t)}}function o(e){try{u(i["throw"](e))}catch(t){a(t)}}function u(e){e.done?r(e.value):n(e.value).then(s,o)}u((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return u([e,t])}}function u(s){if(i)throw new TypeError("Generator is already executing.");while(r)try{if(i=1,n&&(a=s[0]&2?n["return"]:s[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;if(n=0,a)s=[s[0]&2,a.value];switch(s[0]){case 0:case 1:a=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;n=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){r.label=s[1];break}if(s[0]===6&&r.label<a[1]){r.label=a[1];a=s;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(s);break}if(a[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(o){s=[6,o];n=0}finally{i=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-7243f468.system.js","./p-5008d5f5.system.js","./p-eed37127.system.js"],(function(e){"use strict";var t,r,i,n,a,s,o,u;return{setters:[function(e){t=e.r;r=e.c;i=e.h;n=e.g},function(e){a=e.D},function(e){s=e.b;o=e.g;u=e.c}],execute:function(){var l;if(typeof window!=="undefined"){l=window}else if(typeof s!=="undefined"){l=s}else if(typeof self!=="undefined"){l=self}else{l={}}var f=l;var d={};var c=Object.freeze({__proto__:null,default:d});var h=o(c);var p=typeof s!=="undefined"?s:typeof window!=="undefined"?window:{};var m;if(typeof document!=="undefined"){m=document}else{m=p["__GLOBAL_DOCUMENT_CACHE@4"];if(!m){m=p["__GLOBAL_DOCUMENT_CACHE@4"]=h}}var v=m;function g(e){return e.replace(/\n\r?\s*/g,"")}var y=function e(t){var r="",i=0;for(;i<arguments.length;i++)r+=g(t[i])+(arguments[i+1]||"");return r};var _=T;var b=Object.prototype.toString;function T(e){var t=b.call(e);return t==="[object Function]"||typeof e==="function"&&t!=="[object RegExp]"||typeof window!=="undefined"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}var S="Function.prototype.bind called on incompatible ";var w=Array.prototype.slice;var k=Object.prototype.toString;var E="[object Function]";var C=function e(t){var r=this;if(typeof r!=="function"||k.call(r)!==E){throw new TypeError(S+r)}var i=w.call(arguments,1);var n;var a=function(){if(this instanceof n){var e=r.apply(this,i.concat(w.call(arguments)));if(Object(e)===e){return e}return this}else{return r.apply(t,i.concat(w.call(arguments)))}};var s=Math.max(0,r.length-i.length);var o=[];for(var u=0;u<s;u++){o.push("$"+u)}n=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(a);if(r.prototype){var l=function e(){};l.prototype=r.prototype;n.prototype=new l;l.prototype=null}return n};var A=Function.prototype.bind||C;var O=Object.prototype.toString;var P=function e(t){var r=O.call(t);var i=r==="[object Arguments]";if(!i){i=r!=="[object Array]"&&t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&O.call(t.callee)==="[object Function]"}return i};var I;if(!Object.keys){var L=Object.prototype.hasOwnProperty;var D=Object.prototype.toString;var U=P;var x=Object.prototype.propertyIsEnumerable;var R=!x.call({toString:null},"toString");var M=x.call((function(){}),"prototype");var B=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var N=function(e){var t=e.constructor;return t&&t.prototype===e};var j={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true};var F=function(){if(typeof window==="undefined"){return false}for(var e in window){try{if(!j["$"+e]&&L.call(window,e)&&window[e]!==null&&typeof window[e]==="object"){try{N(window[e])}catch(t){return true}}}catch(t){return true}}return false}();var V=function(e){if(typeof window==="undefined"||!F){return N(e)}try{return N(e)}catch(t){return false}};I=function e(t){var r=t!==null&&typeof t==="object";var i=D.call(t)==="[object Function]";var n=U(t);var a=r&&D.call(t)==="[object String]";var s=[];if(!r&&!i&&!n){throw new TypeError("Object.keys called on a non-object")}var o=M&&i;if(a&&t.length>0&&!L.call(t,0)){for(var u=0;u<t.length;++u){s.push(String(u))}}if(n&&t.length>0){for(var l=0;l<t.length;++l){s.push(String(l))}}else{for(var f in t){if(!(o&&f==="prototype")&&L.call(t,f)){s.push(String(f))}}}if(R){var d=V(t);for(var c=0;c<B.length;++c){if(!(d&&B[c]==="constructor")&&L.call(t,B[c])){s.push(B[c])}}}return s}}var H=I;var q=Array.prototype.slice;var G=Object.keys;var W=G?function e(t){return G(t)}:H;var z=Object.keys;W.shim=function e(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);if(!t){Object.keys=function e(t){if(P(t)){return z(q.call(t))}return z(t)}}}else{Object.keys=W}return Object.keys||W};var $=W;var X=typeof Symbol==="function"&&typeof Symbol("foo")==="symbol";var Y=Object.prototype.toString;var K=Array.prototype.concat;var Q=Object.defineProperty;var J=function(e){return typeof e==="function"&&Y.call(e)==="[object Function]"};var Z=function(){var e={};try{Q(e,"x",{enumerable:false,value:e});for(var t in e){return false}return e.x===e}catch(r){return false}};var ee=Q&&Z();var te=function(e,t,r,i){if(t in e&&(!J(i)||!i())){return}if(ee){Q(e,t,{configurable:true,enumerable:false,value:r,writable:true})}else{e[t]=r}};var re=function(e,t){var r=arguments.length>2?arguments[2]:{};var i=$(t);if(X){i=K.call(i,Object.getOwnPropertySymbols(t))}for(var n=0;n<i.length;n+=1){te(e,i[n],t[i[n]],r[i[n]])}};re.supportsDescriptors=!!ee;var ie=re;var ne=function e(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var t={};var r=Symbol("test");var i=Object(r);if(typeof r==="string"){return false}if(Object.prototype.toString.call(r)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(i)!=="[object Symbol]"){return false}var n=42;t[r]=n;for(r in t){return false}if(typeof Object.keys==="function"&&Object.keys(t).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(t).length!==0){return false}var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==r){return false}if(!Object.prototype.propertyIsEnumerable.call(t,r)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==n||s.enumerable!==true){return false}}return true};var ae=s.Symbol;var se=function e(){if(typeof ae!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof ae("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return ne()};var oe;var ue=TypeError;var le=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new ue};var fe=se();var de=Object.getPrototypeOf||function(e){return e.__proto__};var ce=oe;var he=oe;var pe=oe;var me=typeof Uint8Array==="undefined"?oe:de(Uint8Array);var ve={"$ %Array%":Array,"$ %ArrayBuffer%":typeof ArrayBuffer==="undefined"?oe:ArrayBuffer,"$ %ArrayBufferPrototype%":typeof ArrayBuffer==="undefined"?oe:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":fe?de([][Symbol.iterator]()):oe,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":oe,"$ %AsyncFunction%":he,"$ %AsyncFunctionPrototype%":oe,"$ %AsyncGenerator%":oe,"$ %AsyncGeneratorFunction%":pe,"$ %AsyncGeneratorPrototype%":oe,"$ %AsyncIteratorPrototype%":oe,"$ %Atomics%":typeof Atomics==="undefined"?oe:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":typeof DataView==="undefined"?oe:DataView,"$ %DataViewPrototype%":typeof DataView==="undefined"?oe:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":typeof Float32Array==="undefined"?oe:Float32Array,"$ %Float32ArrayPrototype%":typeof Float32Array==="undefined"?oe:Float32Array.prototype,"$ %Float64Array%":typeof Float64Array==="undefined"?oe:Float64Array,"$ %Float64ArrayPrototype%":typeof Float64Array==="undefined"?oe:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":oe,"$ %GeneratorFunction%":ce,"$ %GeneratorPrototype%":oe,"$ %Int8Array%":typeof Int8Array==="undefined"?oe:Int8Array,"$ %Int8ArrayPrototype%":typeof Int8Array==="undefined"?oe:Int8Array.prototype,"$ %Int16Array%":typeof Int16Array==="undefined"?oe:Int16Array,"$ %Int16ArrayPrototype%":typeof Int16Array==="undefined"?oe:Int8Array.prototype,"$ %Int32Array%":typeof Int32Array==="undefined"?oe:Int32Array,"$ %Int32ArrayPrototype%":typeof Int32Array==="undefined"?oe:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":fe?de(de([][Symbol.iterator]())):oe,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":typeof Map==="undefined"?oe:Map,"$ %MapIteratorPrototype%":typeof Map==="undefined"||!fe?oe:de((new Map)[Symbol.iterator]()),"$ %MapPrototype%":typeof Map==="undefined"?oe:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":typeof Promise==="undefined"?oe:Promise,"$ %PromisePrototype%":typeof Promise==="undefined"?oe:Promise.prototype,"$ %PromiseProto_then%":typeof Promise==="undefined"?oe:Promise.prototype.then,"$ %Promise_all%":typeof Promise==="undefined"?oe:Promise.all,"$ %Promise_reject%":typeof Promise==="undefined"?oe:Promise.reject,"$ %Promise_resolve%":typeof Promise==="undefined"?oe:Promise.resolve,"$ %Proxy%":typeof Proxy==="undefined"?oe:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":typeof Reflect==="undefined"?oe:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":typeof Set==="undefined"?oe:Set,"$ %SetIteratorPrototype%":typeof Set==="undefined"||!fe?oe:de((new Set)[Symbol.iterator]()),"$ %SetPrototype%":typeof Set==="undefined"?oe:Set.prototype,"$ %SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?oe:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":typeof SharedArrayBuffer==="undefined"?oe:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":fe?de(""[Symbol.iterator]()):oe,"$ %StringPrototype%":String.prototype,"$ %Symbol%":fe?Symbol:oe,"$ %SymbolPrototype%":fe?Symbol.prototype:oe,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":le,"$ %TypedArray%":me,"$ %TypedArrayPrototype%":me?me.prototype:oe,"$ %TypeError%":ue,"$ %TypeErrorPrototype%":ue.prototype,"$ %Uint8Array%":typeof Uint8Array==="undefined"?oe:Uint8Array,"$ %Uint8ArrayPrototype%":typeof Uint8Array==="undefined"?oe:Uint8Array.prototype,"$ %Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?oe:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray==="undefined"?oe:Uint8ClampedArray.prototype,"$ %Uint16Array%":typeof Uint16Array==="undefined"?oe:Uint16Array,"$ %Uint16ArrayPrototype%":typeof Uint16Array==="undefined"?oe:Uint16Array.prototype,"$ %Uint32Array%":typeof Uint32Array==="undefined"?oe:Uint32Array,"$ %Uint32ArrayPrototype%":typeof Uint32Array==="undefined"?oe:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":typeof WeakMap==="undefined"?oe:WeakMap,"$ %WeakMapPrototype%":typeof WeakMap==="undefined"?oe:WeakMap.prototype,"$ %WeakSet%":typeof WeakSet==="undefined"?oe:WeakSet,"$ %WeakSetPrototype%":typeof WeakSet==="undefined"?oe:WeakSet.prototype};var ge=A.call(Function.call,String.prototype.replace);var ye=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var _e=/\\(\\)?/g;var be=function e(t){var r=[];ge(t,ye,(function(e,t,i,n){r[r.length]=i?ge(n,_e,"$1"):t||e}));return r};var Te=function e(t,r){var i="$ "+t;if(!(i in ve)){throw new SyntaxError("intrinsic "+t+" does not exist!")}if(typeof ve[i]==="undefined"&&!r){throw new ue("intrinsic "+t+" exists, but is not available. Please file an issue!")}return ve[i]};var Se=function e(t,r){if(arguments.length>1&&typeof r!=="boolean"){throw new TypeError('"allowMissing" argument must be a boolean')}var i=be(t);if(i.length===0){return Te(t,r)}var n=Te("%"+i[0]+"%",r);for(var a=1;a<i.length;a+=1){if(n!=null){n=n[i[a]]}}return n};var we=A.call(Function.call,Object.prototype.hasOwnProperty);var ke=Se("%TypeError%");var Ee=Se("%SyntaxError%");var Ce={"Property Descriptor":function e(t,r){if(t.Type(r)!=="Object"){return false}var i={"[[Configurable]]":true,"[[Enumerable]]":true,"[[Get]]":true,"[[Set]]":true,"[[Value]]":true,"[[Writable]]":true};for(var n in r){if(we(r,n)&&!i[n]){return false}}var a=we(r,"[[Value]]");var s=we(r,"[[Get]]")||we(r,"[[Set]]");if(a&&s){throw new ke("Property Descriptors may not be both accessor and data descriptors")}return true}};var Ae=function e(t,r,i,n){var a=Ce[r];if(typeof a!=="function"){throw new Ee("unknown record type: "+r)}if(!a(t,n)){throw new ke(i+" must be a "+r)}};var Oe=Se("%TypeError%");var Pe=function e(t,r){if(t.Type(r)!=="Object"){return false}var i={"[[Configurable]]":true,"[[Enumerable]]":true,"[[Get]]":true,"[[Set]]":true,"[[Value]]":true,"[[Writable]]":true};for(var n in r){if(we(r,n)&&!i[n]){return false}}if(t.IsDataDescriptor(r)&&t.IsAccessorDescriptor(r)){throw new Oe("Property Descriptors may not be both accessor and data descriptors")}return true};var Ie=Number.isNaN||function e(t){return t!==t};var Le=Number.isNaN||function(e){return e!==e};var De=Number.isFinite||function(e){return typeof e==="number"&&!Le(e)&&e!==Infinity&&e!==-Infinity};var Ue=function e(t){return t>=0?1:-1};var xe=function e(t,r){var i=t%r;return Math.floor(i>=0?i:i+r)};var Re=Se("%Function%");var Me=Re.apply;var Be=Re.call;var Ne=function e(){return A.apply(Be,arguments)};var je=function e(){return A.apply(Me,arguments)};Ne.apply=je;var Fe=Ne(Se("String.prototype.indexOf"));var Ve=function e(t,r){var i=Se(t,!!r);if(typeof i==="function"&&Fe(t,".prototype.")){return Ne(i)}return i};var He=Ve("String.prototype.slice");var qe=function e(t,r){if(t===r){return true}if(t.length>r.length){return false}return He(r,0,t.length)===t};var Ge=Function.prototype.toString;var We=/^\s*class\b/;var ze=function e(t){try{var r=Ge.call(t);return We.test(r)}catch(i){return false}};var $e=function e(t){try{if(ze(t)){return false}Ge.call(t);return true}catch(r){return false}};var Xe=Object.prototype.toString;var Ye="[object Function]";var Ke="[object GeneratorFunction]";var Qe=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var Je=function e(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(typeof t==="function"&&!t.prototype){return true}if(Qe){return $e(t)}if(ze(t)){return false}var r=Xe.call(t);return r===Ye||r===Ke};var Ze=function e(t){return t===null||typeof t!=="function"&&typeof t!=="object"};var et=Object.prototype.toString;var tt={"[[DefaultValue]]":function(e){var t;if(arguments.length>1){t=arguments[1]}else{t=et.call(e)==="[object Date]"?String:Number}if(t===String||t===Number){var r=t===String?["toString","valueOf"]:["valueOf","toString"];var i,n;for(n=0;n<r.length;++n){if(Je(e[r[n]])){i=e[r[n]]();if(Ze(i)){return i}}}throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};var rt=function e(t){if(Ze(t)){return t}if(arguments.length>1){return tt["[[DefaultValue]]"](t,arguments[1])}return tt["[[DefaultValue]]"](t)};var it=Se("%Object%");var nt=Se("%EvalError%");var at=Se("%TypeError%");var st=Se("%String%");var ot=Se("%Date%");var ut=Se("%Number%");var lt=Se("%Math.floor%");var ft=Se("%Date.UTC%");var dt=Se("%Math.abs%");var ct=Ve("Date.prototype.getUTCFullYear");var ht=24;var pt=60;var mt=60;var vt=1e3;var gt=vt*mt;var yt=gt*pt;var _t=864e5;var bt={ToPrimitive:rt,ToBoolean:function e(t){return!!t},ToNumber:function e(t){return+t},ToInteger:function e(t){var r=this.ToNumber(t);if(Ie(r)){return 0}if(r===0||!De(r)){return r}return Ue(r)*Math.floor(Math.abs(r))},ToInt32:function e(t){return this.ToNumber(t)>>0},ToUint32:function e(t){return this.ToNumber(t)>>>0},ToUint16:function e(t){var r=this.ToNumber(t);if(Ie(r)||r===0||!De(r)){return 0}var i=Ue(r)*Math.floor(Math.abs(r));return xe(i,65536)},ToString:function e(t){return st(t)},ToObject:function e(t){this.CheckObjectCoercible(t);return it(t)},CheckObjectCoercible:function e(t,r){if(t==null){throw new at(r||"Cannot call method on "+t)}return t},IsCallable:Je,SameValue:function e(t,r){if(t===r){if(t===0){return 1/t===1/r}return true}return Ie(t)&&Ie(r)},Type:function e(t){if(t===null){return"Null"}if(typeof t==="undefined"){return"Undefined"}if(typeof t==="function"||typeof t==="object"){return"Object"}if(typeof t==="number"){return"Number"}if(typeof t==="boolean"){return"Boolean"}if(typeof t==="string"){return"String"}},IsPropertyDescriptor:function e(t){return Pe(this,t)},IsAccessorDescriptor:function e(t){if(typeof t==="undefined"){return false}Ae(this,"Property Descriptor","Desc",t);if(!we(t,"[[Get]]")&&!we(t,"[[Set]]")){return false}return true},IsDataDescriptor:function e(t){if(typeof t==="undefined"){return false}Ae(this,"Property Descriptor","Desc",t);if(!we(t,"[[Value]]")&&!we(t,"[[Writable]]")){return false}return true},IsGenericDescriptor:function e(t){if(typeof t==="undefined"){return false}Ae(this,"Property Descriptor","Desc",t);if(!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t)){return true}return false},FromPropertyDescriptor:function e(t){if(typeof t==="undefined"){return t}Ae(this,"Property Descriptor","Desc",t);if(this.IsDataDescriptor(t)){return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]}}else if(this.IsAccessorDescriptor(t)){return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]}}else{throw new at("FromPropertyDescriptor must be called with a fully populated Property Descriptor")}},ToPropertyDescriptor:function e(t){if(this.Type(t)!=="Object"){throw new at("ToPropertyDescriptor requires an object")}var r={};if(we(t,"enumerable")){r["[[Enumerable]]"]=this.ToBoolean(t.enumerable)}if(we(t,"configurable")){r["[[Configurable]]"]=this.ToBoolean(t.configurable)}if(we(t,"value")){r["[[Value]]"]=t.value}if(we(t,"writable")){r["[[Writable]]"]=this.ToBoolean(t.writable)}if(we(t,"get")){var i=t.get;if(typeof i!=="undefined"&&!this.IsCallable(i)){throw new TypeError("getter must be a function")}r["[[Get]]"]=i}if(we(t,"set")){var n=t.set;if(typeof n!=="undefined"&&!this.IsCallable(n)){throw new at("setter must be a function")}r["[[Set]]"]=n}if((we(r,"[[Get]]")||we(r,"[[Set]]"))&&(we(r,"[[Value]]")||we(r,"[[Writable]]"))){throw new at("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute")}return r},"Abstract Equality Comparison":function e(t,r){var i=this.Type(t);var n=this.Type(r);if(i===n){return t===r}if(t==null&&r==null){return true}if(i==="Number"&&n==="String"){return this["Abstract Equality Comparison"](t,this.ToNumber(r))}if(i==="String"&&n==="Number"){return this["Abstract Equality Comparison"](this.ToNumber(t),r)}if(i==="Boolean"){return this["Abstract Equality Comparison"](this.ToNumber(t),r)}if(n==="Boolean"){return this["Abstract Equality Comparison"](t,this.ToNumber(r))}if((i==="String"||i==="Number")&&n==="Object"){return this["Abstract Equality Comparison"](t,this.ToPrimitive(r))}if(i==="Object"&&(n==="String"||n==="Number")){return this["Abstract Equality Comparison"](this.ToPrimitive(t),r)}return false},"Strict Equality Comparison":function e(t,r){var i=this.Type(t);var n=this.Type(r);if(i!==n){return false}if(i==="Undefined"||i==="Null"){return true}return t===r},"Abstract Relational Comparison":function e(t,r,i){if(this.Type(i)!=="Boolean"){throw new at("Assertion failed: LeftFirst argument must be a Boolean")}var n;var a;if(i){n=this.ToPrimitive(t,ut);a=this.ToPrimitive(r,ut)}else{a=this.ToPrimitive(r,ut);n=this.ToPrimitive(t,ut)}var s=this.Type(n)==="String"&&this.Type(a)==="String";if(!s){var o=this.ToNumber(n);var u=this.ToNumber(a);if(Ie(o)||Ie(u)){return undefined}if(De(o)&&De(u)&&o===u){return false}if(o===0&&u===0){return false}if(o===Infinity){return false}if(u===Infinity){return true}if(u===-Infinity){return false}if(o===-Infinity){return true}return o<u}if(qe(a,n)){return false}if(qe(n,a)){return true}return n<a},msFromTime:function e(t){return xe(t,vt)},SecFromTime:function e(t){return xe(lt(t/vt),mt)},MinFromTime:function e(t){return xe(lt(t/gt),pt)},HourFromTime:function e(t){return xe(lt(t/yt),ht)},Day:function e(t){return lt(t/_t)},TimeWithinDay:function e(t){return xe(t,_t)},DayFromYear:function e(t){return 365*(t-1970)+lt((t-1969)/4)-lt((t-1901)/100)+lt((t-1601)/400)},TimeFromYear:function e(t){return _t*this.DayFromYear(t)},YearFromTime:function e(t){return ct(new ot(t))},WeekDay:function e(t){return xe(this.Day(t)+4,7)},DaysInYear:function e(t){if(xe(t,4)!==0){return 365}if(xe(t,100)!==0){return 366}if(xe(t,400)!==0){return 365}return 366},InLeapYear:function e(t){var r=this.DaysInYear(this.YearFromTime(t));if(r===365){return 0}if(r===366){return 1}throw new nt("Assertion failed: there are not 365 or 366 days in a year, got: "+r)},DayWithinYear:function e(t){return this.Day(t)-this.DayFromYear(this.YearFromTime(t))},MonthFromTime:function e(t){var r=this.DayWithinYear(t);if(0<=r&&r<31){return 0}var i=this.InLeapYear(t);if(31<=r&&r<59+i){return 1}if(59+i<=r&&r<90+i){return 2}if(90+i<=r&&r<120+i){return 3}if(120+i<=r&&r<151+i){return 4}if(151+i<=r&&r<181+i){return 5}if(181+i<=r&&r<212+i){return 6}if(212+i<=r&&r<243+i){return 7}if(243+i<=r&&r<273+i){return 8}if(273+i<=r&&r<304+i){return 9}if(304+i<=r&&r<334+i){return 10}if(334+i<=r&&r<365+i){return 11}},DateFromTime:function e(t){var r=this.MonthFromTime(t);var i=this.DayWithinYear(t);if(r===0){return i+1}if(r===1){return i-30}var n=this.InLeapYear(t);if(r===2){return i-58-n}if(r===3){return i-89-n}if(r===4){return i-119-n}if(r===5){return i-150-n}if(r===6){return i-180-n}if(r===7){return i-211-n}if(r===8){return i-242-n}if(r===9){return i-272-n}if(r===10){return i-303-n}if(r===11){return i-333-n}throw new nt("Assertion failed: MonthFromTime returned an impossible value: "+r)},MakeDay:function e(t,r,i){if(!De(t)||!De(r)||!De(i)){return NaN}var n=this.ToInteger(t);var a=this.ToInteger(r);var s=this.ToInteger(i);var o=n+lt(a/12);var u=xe(a,12);var l=ft(o,u,1);if(this.YearFromTime(l)!==o||this.MonthFromTime(l)!==u||this.DateFromTime(l)!==1){return NaN}return this.Day(l)+s-1},MakeDate:function e(t,r){if(!De(t)||!De(r)){return NaN}return t*_t+r},MakeTime:function e(t,r,i,n){if(!De(t)||!De(r)||!De(i)||!De(n)){return NaN}var a=this.ToInteger(t);var s=this.ToInteger(r);var o=this.ToInteger(i);var u=this.ToInteger(n);var l=a*yt+s*gt+o*vt+u;return l},TimeClip:function e(t){if(!De(t)||dt(t)>864e13){return NaN}return ut(new ot(this.ToNumber(t)))},modulo:function e(t,r){return xe(t,r)}};var Tt=bt;var St=A.call(Function.call,String.prototype.replace);var wt=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/;var kt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;var Et=function e(){var t=Tt.ToString(Tt.CheckObjectCoercible(this));return St(St(t,wt,""),kt,"")};var Ct="​";var At=function e(){if(String.prototype.trim&&Ct.trim()===Ct){return String.prototype.trim}return Et};var Ot=function e(){var t=At();ie(String.prototype,{trim:t},{trim:function e(){return String.prototype.trim!==t}});return t};var Pt=A.call(Function.call,At());ie(Pt,{getPolyfill:At,implementation:Et,shim:Ot});var It=Pt;var Lt=Object.prototype.toString;var Dt=Object.prototype.hasOwnProperty;var Ut=function e(t,r,i){for(var n=0,a=t.length;n<a;n++){if(Dt.call(t,n)){if(i==null){r(t[n],n,t)}else{r.call(i,t[n],n,t)}}}};var xt=function e(t,r,i){for(var n=0,a=t.length;n<a;n++){if(i==null){r(t.charAt(n),n,t)}else{r.call(i,t.charAt(n),n,t)}}};var Rt=function e(t,r,i){for(var n in t){if(Dt.call(t,n)){if(i==null){r(t[n],n,t)}else{r.call(i,t[n],n,t)}}}};var Mt=function e(t,r,i){if(!Je(r)){throw new TypeError("iterator must be a function")}var n;if(arguments.length>=3){n=i}if(Lt.call(t)==="[object Array]"){Ut(t,r,n)}else if(typeof t==="string"){xt(t,r,n)}else{Rt(t,r,n)}};var Bt=Mt;var Nt=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var jt=function(e){if(!e)return{};var t={};Bt(It(e).split("\n"),(function(e){var r=e.indexOf(":"),i=It(e.slice(0,r)).toLowerCase(),n=It(e.slice(r+1));if(typeof t[i]==="undefined"){t[i]=n}else if(Nt(t[i])){t[i].push(n)}else{t[i]=[t[i],n]}}));return t};var Ft=Ht;var Vt=Object.prototype.hasOwnProperty;function Ht(){var e={};for(var t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r){if(Vt.call(r,i)){e[i]=r[i]}}}return e}var qt=$t;$t.XMLHttpRequest=f.XMLHttpRequest||Kt;$t.XDomainRequest="withCredentials"in new $t.XMLHttpRequest?$t.XMLHttpRequest:f.XDomainRequest;Gt(["get","put","post","patch","head","delete"],(function(e){$t[e==="delete"?"del":e]=function(t,r,i){r=zt(t,r,i);r.method=e.toUpperCase();return Xt(r)}}));function Gt(e,t){for(var r=0;r<e.length;r++){t(e[r])}}function Wt(e){for(var t in e){if(e.hasOwnProperty(t))return false}return true}function zt(e,t,r){var i=e;if(_(t)){r=t;if(typeof e==="string"){i={uri:e}}}else{i=Ft(t,{uri:e})}i.callback=r;return i}function $t(e,t,r){t=zt(e,t,r);return Xt(t)}function Xt(e){if(typeof e.callback==="undefined"){throw new Error("callback argument missing")}var t=false;var r=function r(i,n,a){if(!t){t=true;e.callback(i,n,a)}};function i(){if(o.readyState===4){setTimeout(s,0)}}function n(){var e=undefined;if(o.response){e=o.response}else{e=o.responseText||Yt(o)}if(m){try{e=JSON.parse(e)}catch(t){}}return e}function a(e){clearTimeout(v);if(!(e instanceof Error)){e=new Error(""+(e||"Unknown XMLHttpRequest Error"))}e.statusCode=0;return r(e,g)}function s(){if(l)return;var t;clearTimeout(v);if(e.useXDR&&o.status===undefined){t=200}else{t=o.status===1223?204:o.status}var i=g;var a=null;if(t!==0){i={body:n(),statusCode:t,method:d,headers:{},url:f,rawRequest:o};if(o.getAllResponseHeaders){i.headers=jt(o.getAllResponseHeaders())}}else{a=new Error("Internal XMLHttpRequest Error")}return r(a,i,i.body)}var o=e.xhr||null;if(!o){if(e.cors||e.useXDR){o=new $t.XDomainRequest}else{o=new $t.XMLHttpRequest}}var u;var l;var f=o.url=e.uri||e.url;var d=o.method=e.method||"GET";var c=e.body||e.data;var h=o.headers=e.headers||{};var p=!!e.sync;var m=false;var v;var g={body:undefined,headers:{},statusCode:0,method:d,url:f,rawRequest:o};if("json"in e&&e.json!==false){m=true;h["accept"]||h["Accept"]||(h["Accept"]="application/json");if(d!=="GET"&&d!=="HEAD"){h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json");c=JSON.stringify(e.json===true?c:e.json)}}o.onreadystatechange=i;o.onload=s;o.onerror=a;o.onprogress=function(){};o.onabort=function(){l=true};o.ontimeout=a;o.open(d,f,!p,e.username,e.password);if(!p){o.withCredentials=!!e.withCredentials}if(!p&&e.timeout>0){v=setTimeout((function(){if(l)return;l=true;o.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";a(e)}),e.timeout)}if(o.setRequestHeader){for(u in h){if(h.hasOwnProperty(u)){o.setRequestHeader(u,h[u])}}}else if(e.headers&&!Wt(e.headers)){throw new Error("Headers cannot be set on an XDomainRequest object")}if("responseType"in e){o.responseType=e.responseType}if("beforeSend"in e&&typeof e.beforeSend==="function"){e.beforeSend(o)}o.send(c||null);return o}function Yt(e){if(e.responseType==="document"){return e.responseXML}var t=e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!t){return e.responseXML}return null}function Kt(){}var Qt=Object.create||function(){function e(){}return function(t){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.")}e.prototype=t;return new e}}();function Jt(e,t){this.name="ParsingError";this.code=e.code;this.message=t||e.message}Jt.prototype=Qt(Error.prototype);Jt.prototype.constructor=Jt;Jt.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function Zt(e){function t(e,t,r,i){return(e|0)*3600+(t|0)*60+(r|0)+(i|0)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!r){return null}if(r[3]){return t(r[1],r[2],r[3].replace(":",""),r[4])}else if(r[1]>59){return t(r[1],r[2],0,r[4])}else{return t(0,r[1],r[2],r[4])}}function er(){this.values=Qt(null)}er.prototype={set:function(e,t){if(!this.get(e)&&t!==""){this.values[e]=t}},get:function(e,t,r){if(r){return this.has(e)?this.values[e]:t[r]}return this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i){if(t===r[i]){this.set(e,t);break}}},integer:function(e,t){if(/^-?\d+$/.test(t)){this.set(e,parseInt(t,10))}},percent:function(e,t){var r;if(r=t.match(/^([\d]{1,3})(\.[\d]*)?%$/)){t=parseFloat(t);if(t>=0&&t<=100){this.set(e,t);return true}}return false}};function tr(e,t,r,i){var n=i?e.split(i):[e];for(var a in n){if(typeof n[a]!=="string"){continue}var s=n[a].split(r);if(s.length!==2){continue}var o=s[0];var u=s[1];t(o,u)}}function rr(e,t,r){var i=e;function n(){var t=Zt(e);if(t===null){throw new Jt(Jt.Errors.BadTimeStamp,"Malformed timestamp: "+i)}e=e.replace(/^[^\sa-zA-Z-]+/,"");return t}function a(e,t){var i=new er;tr(e,(function(e,t){switch(e){case"region":for(var n=r.length-1;n>=0;n--){if(r[n].id===t){i.set(e,r[n].region);break}}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];i.integer(e,s);i.percent(e,s)?i.set("snapToLines",false):null;i.alt(e,s,["auto"]);if(a.length===2){i.alt("lineAlign",a[1],["start","middle","end"])}break;case"position":a=t.split(",");i.percent(e,a[0]);if(a.length===2){i.alt("positionAlign",a[1],["start","middle","end"])}break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","middle","end","left","right"]);break}}),/:/,/\s/);t.region=i.get("region",null);t.vertical=i.get("vertical","");t.line=i.get("line","auto");t.lineAlign=i.get("lineAlign","start");t.snapToLines=i.get("snapToLines",true);t.size=i.get("size",100);t.align=i.get("align","middle");t.position=i.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align);t.positionAlign=i.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function s(){e=e.replace(/^\s+/,"")}s();t.startTime=n();s();if(e.substr(0,3)!=="--\x3e"){throw new Jt(Jt.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i)}e=e.substr(3);s();t.endTime=n();s();a(e,t)}var ir={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "};var nr={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var ar={v:"title",lang:"lang"};var sr={rt:"ruby"};function or(e,t){function r(){if(!t){return null}function e(e){t=t.substr(e.length);return e}var r=t.match(/^([^<]*)(<[^>]*>?)?/);return e(r[1]?r[1]:r[2])}function i(e){return ir[e]}function n(e){while(h=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/)){e=e.replace(h[0],i)}return e}function a(e,t){return!sr[t.localName]||sr[t.localName]===e.localName}function s(t,r){var i=nr[t];if(!i){return null}var n=e.document.createElement(i);n.localName=i;var a=ar[t];if(a&&r){n[a]=r.trim()}return n}var o=e.document.createElement("div"),u=o,l,f=[];while((l=r())!==null){if(l[0]==="<"){if(l[1]==="/"){if(f.length&&f[f.length-1]===l.substr(2).replace(">","")){f.pop();u=u.parentNode}continue}var d=Zt(l.substr(1,l.length-2));var c;if(d){c=e.document.createProcessingInstruction("timestamp",d);u.appendChild(c);continue}var h=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h){continue}c=s(h[1],h[3]);if(!c){continue}if(!a(u,c)){continue}if(h[2]){c.className=h[2].substr(1).replace("."," ")}f.push(h[1]);u.appendChild(c);u=c;continue}u.appendChild(e.document.createTextNode(n(l)))}return o}var ur=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function lr(e){for(var t=0;t<ur.length;t++){var r=ur[t];if(e>=r[0]&&e<=r[1]){return true}}return false}function fr(e){var t=[],r="",i;if(!e||!e.childNodes){return"ltr"}function n(e,t){for(var r=t.childNodes.length-1;r>=0;r--){e.push(t.childNodes[r])}}function a(e){if(!e||!e.length){return null}var t=e.pop(),r=t.textContent||t.innerText;if(r){var i=r.match(/^.*(\n|\r)/);if(i){e.length=0;return i[0]}return r}if(t.tagName==="ruby"){return a(e)}if(t.childNodes){n(e,t);return a(e)}}n(t,e);while(r=a(t)){for(var s=0;s<r.length;s++){i=r.charCodeAt(s);if(lr(i)){return"rtl"}}}return"ltr"}function dr(e){if(typeof e.line==="number"&&(e.snapToLines||e.line>=0&&e.line<=100)){return e.line}if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement){return-1}var t=e.track,r=t.textTrackList,i=0;for(var n=0;n<r.length&&r[n]!==t;n++){if(r[n].mode==="showing"){i++}}return++i*-1}function cr(){}cr.prototype.applyStyles=function(e,t){t=t||this.div;for(var r in e){if(e.hasOwnProperty(r)){t.style[r]=e[r]}}};cr.prototype.formatStyle=function(e,t){return e===0?0:e+t};function hr(e,t,r){cr.call(this);this.cue=t;this.cueDiv=or(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv);this.div=e.document.createElement("div");i={direction:fr(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(i);this.div.appendChild(this.cueDiv);var n=0;switch(t.positionAlign){case"start":n=t.position;break;case"middle":n=t.position-t.size/2;break;case"end":n=t.position-t.size;break}if(t.vertical===""){this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(t.size,"%")})}else{this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(t.size,"%")})}this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}hr.prototype=Qt(cr.prototype);hr.prototype.constructor=hr;function pr(e){var t,r,i,n;if(e.div){r=e.div.offsetHeight;i=e.div.offsetWidth;n=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect();t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left;this.right=e.right;this.top=e.top||n;this.height=e.height||r;this.bottom=e.bottom||n+(e.height||r);this.width=e.width||i;this.lineHeight=t!==undefined?t:e.lineHeight}pr.prototype.move=function(e,t){t=t!==undefined?t:this.lineHeight;switch(e){case"+x":this.left+=t;this.right+=t;break;case"-x":this.left-=t;this.right-=t;break;case"+y":this.top+=t;this.bottom+=t;break;case"-y":this.top-=t;this.bottom-=t;break}};pr.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top};pr.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++){if(this.overlaps(e[t])){return true}}return false};pr.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right};pr.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}};pr.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),r=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),i=t*r;return i/(this.height*this.width)};pr.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}};pr.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0;var r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0;var i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var n={left:e.left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||r};return n};function mr(e,t,r,i){function n(e,t){var n,a=new pr(e),s=1;for(var o=0;o<t.length;o++){while(e.overlapsOppositeAxis(r,t[o])||e.within(r)&&e.overlapsAny(i)){e.move(t[o])}if(e.within(r)){return e}var u=e.intersectPercentage(r);if(s>u){n=new pr(e);s=u}e=new pr(a)}return n||a}var a=new pr(t),s=t.cue,o=dr(s),u=[];if(s.snapToLines){var l;switch(s.vertical){case"":u=["+y","-y"];l="height";break;case"rl":u=["+x","-x"];l="width";break;case"lr":u=["-x","+x"];l="width";break}var f=a.lineHeight,d=f*Math.round(o),c=r[l]+f,h=u[0];if(Math.abs(d)>c){d=d<0?-1:1;d*=Math.ceil(c/f)*f}if(o<0){d+=s.vertical===""?r.height:r.width;u=u.reverse()}a.move(h,d)}else{var p=a.lineHeight/r.height*100;switch(s.lineAlign){case"middle":o-=p/2;break;case"end":o-=p;break}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")});break}u=["+y","-x","+x","-y"];a=new pr(t)}var m=n(a,u);t.move(m.toCSSCompatValues(r))}function vr(){}vr.StringDecoder=function(){return{decode:function(e){if(!e){return""}if(typeof e!=="string"){throw new Error("Error - expected string data.")}return decodeURIComponent(encodeURIComponent(e))}}};vr.convertCueToDOMTree=function(e,t){if(!e||!t){return null}return or(e,t)};var gr=.05;var yr="sans-serif";var _r="1.5%";vr.processCues=function(e,t,r){if(!e||!t||!r){return null}while(r.firstChild){r.removeChild(r.firstChild)}var i=e.document.createElement("div");i.style.position="absolute";i.style.left="0";i.style.right="0";i.style.top="0";i.style.bottom="0";i.style.margin=_r;r.appendChild(i);function n(e){for(var t=0;t<e.length;t++){if(e[t].hasBeenReset||!e[t].displayState){return true}}return false}if(!n(t)){for(var a=0;a<t.length;a++){i.appendChild(t[a].displayState)}return}var s=[],o=pr.getSimpleBoxPosition(i),u=Math.round(o.height*gr*100)/100;var l={font:u+"px "+yr};(function(){var r,n;for(var a=0;a<t.length;a++){n=t[a];r=new hr(e,n,l);i.appendChild(r.div);mr(e,r,o,s);n.displayState=r.div;s.push(pr.getSimpleBoxPosition(r))}})()};vr.Parser=function(e,t,r){if(!r){r=t;t={}}if(!t){t={}}this.window=e;this.vttjs=t;this.state="INITIAL";this.buffer="";this.decoder=r||new TextDecoder("utf8");this.regionList=[]};vr.Parser.prototype={reportOrThrowError:function(e){if(e instanceof Jt){this.onparsingerror&&this.onparsingerror(e)}else{throw e}},parse:function(e){var t=this;if(e){t.buffer+=t.decoder.decode(e,{stream:true})}function r(){var e=t.buffer;var r=0;while(r<e.length&&e[r]!=="\r"&&e[r]!=="\n"){++r}var i=e.substr(0,r);if(e[r]==="\r"){++r}if(e[r]==="\n"){++r}t.buffer=e.substr(r);return i}function i(e){var r=new er;tr(e,(function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(i.length!==2){break}var n=new er;n.percent("x",i[0]);n.percent("y",i[1]);if(!n.has("x")||!n.has("y")){break}r.set(e+"X",n.get("x"));r.set(e+"Y",n.get("y"));break;case"scroll":r.alt(e,t,["up"]);break}}),/=/,/\s/);if(r.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=r.get("width",100);i.lines=r.get("lines",3);i.regionAnchorX=r.get("regionanchorX",0);i.regionAnchorY=r.get("regionanchorY",100);i.viewportAnchorX=r.get("viewportanchorX",0);i.viewportAnchorY=r.get("viewportanchorY",100);i.scroll=r.get("scroll","");t.onregion&&t.onregion(i);t.regionList.push({id:r.get("id"),region:i})}}function n(e){var r=new er;tr(e,(function(e,t){switch(e){case"MPEGT":r.integer(e+"S",t);break;case"LOCA":r.set(e+"L",Zt(t));break}}),/[^\d]:/,/,/);t.ontimestampmap&&t.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")})}function a(e){if(e.match(/X-TIMESTAMP-MAP/)){tr(e,(function(e,t){switch(e){case"X-TIMESTAMP-MAP":n(t);break}}),/=/)}else{tr(e,(function(e,t){switch(e){case"Region":i(t);break}}),/:/)}}try{var s;if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer)){return this}s=r();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0]){throw new Jt(Jt.Errors.BadSignature)}t.state="HEADER"}var u=false;while(t.buffer){if(!/\r\n|\n/.test(t.buffer)){return this}if(!u){s=r()}else{u=false}switch(t.state){case"HEADER":if(/:/.test(s)){a(s)}else if(!s){t.state="ID"}continue;case"NOTE":if(!s){t.state="ID"}continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s){continue}t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");t.state="CUE";if(s.indexOf("--\x3e")===-1){t.cue.id=s;continue}case"CUE":try{rr(s,t.cue,t.regionList)}catch(f){t.reportOrThrowError(f);t.cue=null;t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=s.indexOf("--\x3e")!==-1;if(!s||l&&(u=true)){t.oncue&&t.oncue(t.cue);t.cue=null;t.state="ID";continue}if(t.cue.text){t.cue.text+="\n"}t.cue.text+=s;continue;case"BADCUE":if(!s){t.state="ID"}continue}}}catch(f){t.reportOrThrowError(f);if(t.state==="CUETEXT"&&t.cue&&t.oncue){t.oncue(t.cue)}t.cue=null;t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{e.buffer+=e.decoder.decode();if(e.cue||e.state==="HEADER"){e.buffer+="\n\n";e.parse()}if(e.state==="INITIAL"){throw new Jt(Jt.Errors.BadSignature)}}catch(t){e.reportOrThrowError(t)}e.onflush&&e.onflush();return this}};var br=vr;var Tr="auto";var Sr={"":1,lr:1,rl:1};var wr={start:1,middle:1,end:1,left:1,right:1};function kr(e){if(typeof e!=="string"){return false}var t=Sr[e.toLowerCase()];return t?e.toLowerCase():false}function Er(e){if(typeof e!=="string"){return false}var t=wr[e.toLowerCase()];return t?e.toLowerCase():false}function Cr(e,t,r){this.hasBeenReset=false;var i="";var n=false;var a=e;var s=t;var o=r;var u=null;var l="";var f=true;var d="auto";var c="start";var h=50;var p="middle";var m=50;var v="middle";Object.defineProperties(this,{id:{enumerable:true,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:true,get:function(){return n},set:function(e){n=!!e}},startTime:{enumerable:true,get:function(){return a},set:function(e){if(typeof e!=="number"){throw new TypeError("Start time must be set to a number.")}a=e;this.hasBeenReset=true}},endTime:{enumerable:true,get:function(){return s},set:function(e){if(typeof e!=="number"){throw new TypeError("End time must be set to a number.")}s=e;this.hasBeenReset=true}},text:{enumerable:true,get:function(){return o},set:function(e){o=""+e;this.hasBeenReset=true}},region:{enumerable:true,get:function(){return u},set:function(e){u=e;this.hasBeenReset=true}},vertical:{enumerable:true,get:function(){return l},set:function(e){var t=kr(e);if(t===false){throw new SyntaxError("An invalid or illegal string was specified.")}l=t;this.hasBeenReset=true}},snapToLines:{enumerable:true,get:function(){return f},set:function(e){f=!!e;this.hasBeenReset=true}},line:{enumerable:true,get:function(){return d},set:function(e){if(typeof e!=="number"&&e!==Tr){throw new SyntaxError("An invalid number or illegal string was specified.")}d=e;this.hasBeenReset=true}},lineAlign:{enumerable:true,get:function(){return c},set:function(e){var t=Er(e);if(!t){throw new SyntaxError("An invalid or illegal string was specified.")}c=t;this.hasBeenReset=true}},position:{enumerable:true,get:function(){return h},set:function(e){if(e<0||e>100){throw new Error("Position must be between 0 and 100.")}h=e;this.hasBeenReset=true}},positionAlign:{enumerable:true,get:function(){return p},set:function(e){var t=Er(e);if(!t){throw new SyntaxError("An invalid or illegal string was specified.")}p=t;this.hasBeenReset=true}},size:{enumerable:true,get:function(){return m},set:function(e){if(e<0||e>100){throw new Error("Size must be between 0 and 100.")}m=e;this.hasBeenReset=true}},align:{enumerable:true,get:function(){return v},set:function(e){var t=Er(e);if(!t){throw new SyntaxError("An invalid or illegal string was specified.")}v=t;this.hasBeenReset=true}}});this.displayState=undefined}Cr.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Ar=Cr;var Or={"":true,up:true};function Pr(e){if(typeof e!=="string"){return false}var t=Or[e.toLowerCase()];return t?e.toLowerCase():false}function Ir(e){return typeof e==="number"&&(e>=0&&e<=100)}function Lr(){var e=100;var t=3;var r=0;var i=100;var n=0;var a=100;var s="";Object.defineProperties(this,{width:{enumerable:true,get:function(){return e},set:function(t){if(!Ir(t)){throw new Error("Width must be between 0 and 100.")}e=t}},lines:{enumerable:true,get:function(){return t},set:function(e){if(typeof e!=="number"){throw new TypeError("Lines must be set to a number.")}t=e}},regionAnchorY:{enumerable:true,get:function(){return i},set:function(e){if(!Ir(e)){throw new Error("RegionAnchorX must be between 0 and 100.")}i=e}},regionAnchorX:{enumerable:true,get:function(){return r},set:function(e){if(!Ir(e)){throw new Error("RegionAnchorY must be between 0 and 100.")}r=e}},viewportAnchorY:{enumerable:true,get:function(){return a},set:function(e){if(!Ir(e)){throw new Error("ViewportAnchorY must be between 0 and 100.")}a=e}},viewportAnchorX:{enumerable:true,get:function(){return n},set:function(e){if(!Ir(e)){throw new Error("ViewportAnchorX must be between 0 and 100.")}n=e}},scroll:{enumerable:true,get:function(){return s},set:function(e){var t=Pr(e);if(t===false){throw new SyntaxError("An invalid or illegal string was specified.")}s=t}}})}var Dr=Lr;var Ur=u((function(e){var t=e.exports={WebVTT:br,VTTCue:Ar,VTTRegion:Dr};f.vttjs=t;f.WebVTT=t.WebVTT;var r=t.VTTCue;var i=t.VTTRegion;var n=f.VTTCue;var a=f.VTTRegion;t.shim=function(){f.VTTCue=r;f.VTTRegion=i};t.restore=function(){f.VTTCue=n;f.VTTRegion=a};if(!f.VTTCue){t.shim()}}));var xr=Rr;function Rr(e,t){var r;var i=null;try{r=JSON.parse(e,t)}catch(n){i=n}return[i,r]}var Mr=u((function(e,t){(function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;var i=/^([^\/?#]*)(.*)$/;var n=/(?:\/|^)\.(?=\/)/g;var a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;var s={buildAbsoluteURL:function(e,t,r){r=r||{};e=e.trim();t=t.trim();if(!t){if(!r.alwaysNormalize){return e}var n=s.parseURL(e);if(!n){throw new Error("Error trying to parse base URL.")}n.path=s.normalizePath(n.path);return s.buildURLFromParts(n)}var a=s.parseURL(t);if(!a){throw new Error("Error trying to parse relative URL.")}if(a.scheme){if(!r.alwaysNormalize){return t}a.path=s.normalizePath(a.path);return s.buildURLFromParts(a)}var o=s.parseURL(e);if(!o){throw new Error("Error trying to parse base URL.")}if(!o.netLoc&&o.path&&o.path[0]!=="/"){var u=i.exec(o.path);o.netLoc=u[1];o.path=u[2]}if(o.netLoc&&!o.path){o.path="/"}var l={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc){l.netLoc=o.netLoc;if(a.path[0]!=="/"){if(!a.path){l.path=o.path;if(!a.params){l.params=o.params;if(!a.query){l.query=o.query}}}else{var f=o.path;var d=f.substring(0,f.lastIndexOf("/")+1)+a.path;l.path=s.normalizePath(d)}}}if(l.path===null){l.path=r.alwaysNormalize?s.normalizePath(a.path):a.path}return s.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);if(!t){return null}return{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}},normalizePath:function(e){e=e.split("").reverse().join("").replace(n,"");while(e.length!==(e=e.replace(a,"")).length){}return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s})()}));var Br=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var jr=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t};var Fr=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e};var Vr=function(){function e(){Br(this,e);this.listeners={}}e.prototype.on=function e(t,r){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(r)};e.prototype.off=function e(t,r){if(!this.listeners[t]){return false}var i=this.listeners[t].indexOf(r);this.listeners[t].splice(i,1);return i>-1};e.prototype.trigger=function e(t){var r=this.listeners[t];var i=void 0;var n=void 0;var a=void 0;if(!r){return}if(arguments.length===2){n=r.length;for(i=0;i<n;++i){r[i].call(this,arguments[1])}}else{a=Array.prototype.slice.call(arguments,1);n=r.length;for(i=0;i<n;++i){r[i].apply(this,a)}}};e.prototype.dispose=function e(){this.listeners={}};e.prototype.pipe=function e(t){this.on("data",(function(e){t.push(e)}))};return e}();var Hr=function(e){jr(t,e);function t(){Br(this,t);var r=Fr(this,e.call(this));r.buffer="";return r}t.prototype.push=function e(t){var r=void 0;this.buffer+=t;r=this.buffer.indexOf("\n");for(;r>-1;r=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,r));this.buffer=this.buffer.substring(r+1)}};return t}(Vr);var qr=function e(){var t="[^=]*";var r='"[^"]*"|[^,]*';var i="(?:"+t+")=(?:"+r+")";return new RegExp("(?:^|,)("+i+")")};var Gr=function e(t){var r=t.split(qr());var i={};var n=r.length;var a=void 0;while(n--){if(r[n]===""){continue}a=/([^=]*)=(.*)/.exec(r[n]).slice(1);a[0]=a[0].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1");i[a[0]]=a[1]}return i};var Wr=function(e){jr(t,e);function t(){Br(this,t);var r=Fr(this,e.call(this));r.customParsers=[];return r}t.prototype.push=function e(t){var r=void 0;var i=void 0;t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(t.length===0){return}if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}for(var n=0;n<this.customParsers.length;n++){if(this.customParsers[n].call(this,t)){return}}if(t.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:t.slice(1)});return}t=t.replace("\r","");r=/^#EXTM3U/.exec(t);if(r){this.trigger("data",{type:"tag",tagType:"m3u"});return}r=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"inf"};if(r[1]){i.duration=parseFloat(r[1])}if(r[2]){i.title=r[2]}this.trigger("data",i);return}r=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"targetduration"};if(r[1]){i.duration=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"totalduration"};if(r[1]){i.duration=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"version"};if(r[1]){i.version=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"media-sequence"};if(r[1]){i.number=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"discontinuity-sequence"};if(r[1]){i.number=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"playlist-type"};if(r[1]){i.playlistType=r[1]}this.trigger("data",i);return}r=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"byterange"};if(r[1]){i.length=parseInt(r[1],10)}if(r[2]){i.offset=parseInt(r[2],10)}this.trigger("data",i);return}r=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t);if(r){i={type:"tag",tagType:"allow-cache"};if(r[1]){i.allowed=!/NO/.test(r[1])}this.trigger("data",i);return}r=/^#EXT-X-MAP:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"map"};if(r[1]){var a=Gr(r[1]);if(a.URI){i.uri=a.URI}if(a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],u=s[1];i.byterange={};if(o){i.byterange.length=parseInt(o,10)}if(u){i.byterange.offset=parseInt(u,10)}}}this.trigger("data",i);return}r=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"stream-inf"};if(r[1]){i.attributes=Gr(r[1]);if(i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION.split("x");var f={};if(l[0]){f.width=parseInt(l[0],10)}if(l[1]){f.height=parseInt(l[1],10)}i.attributes.RESOLUTION=f}if(i.attributes.BANDWIDTH){i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)}if(i.attributes["PROGRAM-ID"]){i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10)}}this.trigger("data",i);return}r=/^#EXT-X-MEDIA:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"media"};if(r[1]){i.attributes=Gr(r[1])}this.trigger("data",i);return}r=/^#EXT-X-ENDLIST/.exec(t);if(r){this.trigger("data",{type:"tag",tagType:"endlist"});return}r=/^#EXT-X-DISCONTINUITY/.exec(t);if(r){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}r=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"program-date-time"};if(r[1]){i.dateTimeString=r[1];i.dateTimeObject=new Date(r[1])}this.trigger("data",i);return}r=/^#EXT-X-KEY:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"key"};if(r[1]){i.attributes=Gr(r[1]);if(i.attributes.IV){if(i.attributes.IV.substring(0,2).toLowerCase()==="0x"){i.attributes.IV=i.attributes.IV.substring(2)}i.attributes.IV=i.attributes.IV.match(/.{8}/g);i.attributes.IV[0]=parseInt(i.attributes.IV[0],16);i.attributes.IV[1]=parseInt(i.attributes.IV[1],16);i.attributes.IV[2]=parseInt(i.attributes.IV[2],16);i.attributes.IV[3]=parseInt(i.attributes.IV[3],16);i.attributes.IV=new Uint32Array(i.attributes.IV)}}this.trigger("data",i);return}r=/^#EXT-X-START:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"start"};if(r[1]){i.attributes=Gr(r[1]);i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]);i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)}this.trigger("data",i);return}r=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"cue-out-cont"};if(r[1]){i.data=r[1]}else{i.data=""}this.trigger("data",i);return}r=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"cue-out"};if(r[1]){i.data=r[1]}else{i.data=""}this.trigger("data",i);return}r=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"cue-in"};if(r[1]){i.data=r[1]}else{i.data=""}this.trigger("data",i);return}this.trigger("data",{type:"tag",data:t.slice(4)})};t.prototype.addParser=function e(t){var r=this;var i=t.expression,n=t.customType,a=t.dataParser,s=t.segment;if(typeof a!=="function"){a=function e(t){return t}}this.customParsers.push((function(e){var t=i.exec(e);if(t){r.trigger("data",{type:"custom",data:a(e),customType:n,segment:s});return true}}))};return t}(Vr);var zr=function(e){jr(t,e);function t(){Br(this,t);var r=Fr(this,e.call(this));r.lineStream=new Hr;r.parseStream=new Wr;r.lineStream.pipe(r.parseStream);var i=r;var n=[];var a={};var s=void 0;var o=void 0;var u=function e(){};var l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var f=0;r.manifest={allowCache:true,discontinuityStarts:[],segments:[]};r.parseStream.on("data",(function(e){var t=void 0;var r=void 0;({tag:function d(){({"allow-cache":function t(){this.manifest.allowCache=e.allowed;if(!("allowed"in e)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function t(){var t={};if("length"in e){a.byterange=t;t.length=e.length;if(!("offset"in e)){this.trigger("info",{message:"defaulting offset to zero"});e.offset=0}}if("offset"in e){a.byterange=t;t.offset=e.offset}},endlist:function e(){this.manifest.endList=true},inf:function t(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(e.duration>0){a.duration=e.duration}if(e.duration===0){a.duration=.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=n},key:function t(){if(!e.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(e.attributes.METHOD==="NONE"){o=null;return}if(!e.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(!e.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}o={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI};if(typeof e.attributes.IV!=="undefined"){o.iv=e.attributes.IV}},"media-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number});return}this.manifest.mediaSequence=e.number},"discontinuity-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number});return}this.manifest.discontinuitySequence=e.number;f=e.number},"playlist-type":function t(){if(!/VOD|EVENT/.test(e.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist});return}this.manifest.playlistType=e.playlistType},map:function t(){s={};if(e.uri){s.uri=e.uri}if(e.byterange){s.byterange=e.byterange}},"stream-inf":function t(){this.manifest.playlists=n;this.manifest.mediaGroups=this.manifest.mediaGroups||l;if(!e.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!a.attributes){a.attributes={}}Nr(a.attributes,e.attributes)},media:function i(){this.manifest.mediaGroups=this.manifest.mediaGroups||l;if(!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{};t=n[e.attributes["GROUP-ID"]];r={default:/yes/i.test(e.attributes.DEFAULT)};if(r["default"]){r.autoselect=true}else{r.autoselect=/yes/i.test(e.attributes.AUTOSELECT)}if(e.attributes.LANGUAGE){r.language=e.attributes.LANGUAGE}if(e.attributes.URI){r.uri=e.attributes.URI}if(e.attributes["INSTREAM-ID"]){r.instreamId=e.attributes["INSTREAM-ID"]}if(e.attributes.CHARACTERISTICS){r.characteristics=e.attributes.CHARACTERISTICS}if(e.attributes.FORCED){r.forced=/yes/i.test(e.attributes.FORCED)}t[e.attributes.NAME]=r},discontinuity:function e(){f+=1;a.discontinuity=true;this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function t(){if(typeof this.manifest.dateTimeString==="undefined"){this.manifest.dateTimeString=e.dateTimeString;this.manifest.dateTimeObject=e.dateTimeObject}a.dateTimeString=e.dateTimeString;a.dateTimeObject=e.dateTimeObject},targetduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration});return}this.manifest.targetDuration=e.duration},totalduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration});return}this.manifest.totalDuration=e.duration},start:function t(){if(!e.attributes||isNaN(e.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}},"cue-out":function t(){a.cueOut=e.data},"cue-out-cont":function t(){a.cueOutCont=e.data},"cue-in":function t(){a.cueIn=e.data}}[e.tagType]||u).call(i)},uri:function t(){a.uri=e.uri;n.push(a);if(this.manifest.targetDuration&&!("duration"in a)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});a.duration=this.manifest.targetDuration}if(o){a.key=o}a.timeline=f;if(s){a.map=s}a={}},comment:function e(){},custom:function t(){if(e.segment){a.custom=a.custom||{};a.custom[e.customType]=e.data}else{this.manifest.custom=this.manifest.custom||{};this.manifest.custom[e.customType]=e.data}}})[e.type].call(i)}));return r}t.prototype.push=function e(t){this.lineStream.push(t)};t.prototype.end=function e(){this.lineStream.push("\n")};t.prototype.addParser=function e(t){this.parseStream.addParser(t)};return t}(Vr);
/**
             * mpd-parser
             * @version 0.6.1
             * @copyright 2018 Brightcove, Inc
             * @license Apache-2.0
             */var $r=function e(t){var r;var i=t.attributes,n=t.segments;var a={attributes:(r={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:(i.type||"static")==="static",timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};if(i.contentProtection){a.contentProtection=i.contentProtection}return a};var Xr=function e(t){var r;var i=t.attributes,n=t.segments;if(typeof n==="undefined"){n=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}];i.duration=i.sourceDuration}return{attributes:(r={NAME:i.id,BANDWIDTH:i.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:(i.type||"static")==="static",timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1}};var Yr=function e(t){return t.reduce((function(e,t){var r=t.attributes.role&&t.attributes.role.value||"main";var i=t.attributes.lang||"";var n="main";if(i){n=t.attributes.lang+" ("+r+")"}if(e[n]&&e[n].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth){return e}e[n]={language:i,autoselect:true,default:r==="main",playlists:[$r(t)],uri:""};return e}),{})};var Kr=function e(t){return t.reduce((function(e,t){var r=t.attributes.lang||"text";if(e[r]){return e}e[r]={language:r,default:false,autoselect:false,playlists:[Xr(t)],uri:""};return e}),{})};var Qr=function e(t){var r;var i=t.attributes,n=t.segments;var a={attributes:(r={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:(i.type||"static")==="static",timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};if(i.contentProtection){a.contentProtection=i.contentProtection}return a};var Jr=function e(t){var r;if(!t.length){return{}}var i=t[0].attributes,n=i.sourceDuration,a=i.minimumUpdatePeriod,s=a===undefined?0:a;var o=function e(t){var r=t.attributes;return r.mimeType==="video/mp4"||r.contentType==="video"};var u=function e(t){var r=t.attributes;return r.mimeType==="audio/mp4"||r.contentType==="audio"};var l=function e(t){var r=t.attributes;return r.mimeType==="text/vtt"||r.contentType==="text"};var f=t.filter(o).map(Qr);var d=t.filter(u);var c=t.filter(l);var h={allowCache:true,discontinuityStarts:[],segments:[],endList:true,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:n,playlists:f,minimumUpdatePeriod:s*1e3};if(d.length){h.mediaGroups.AUDIO.audio=Yr(d)}if(c.length){h.mediaGroups.SUBTITLES.subs=Kr(c)}return h};var Zr=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var ei=function e(t){return!!t&&(typeof t==="undefined"?"undefined":Zr(t))==="object"};var ti=function e(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++){r[i]=arguments[i]}return r.reduce((function(t,r){Object.keys(r).forEach((function(i){if(Array.isArray(t[i])&&Array.isArray(r[i])){t[i]=t[i].concat(r[i])}else if(ei(t[i])&&ei(r[i])){t[i]=e(t[i],r[i])}else{t[i]=r[i]}}));return t}),{})};var ri=function e(t,r){if(/^[a-z]+:/i.test(r)){return r}if(!/\/\//i.test(t)){t=Mr.buildAbsoluteURL(f.location.href,t)}return Mr.buildAbsoluteURL(t,r)};var ii=function e(t){var r=t.baseUrl,i=r===undefined?"":r,n=t.source,a=n===undefined?"":n,s=t.range,o=s===undefined?"":s;var u={uri:a,resolvedUri:ri(i||"",a)};if(o){var l=o.split("-");var f=parseInt(l[0],10);var d=parseInt(l[1],10);u.byterange={length:d-f,offset:f}}return u};var ni=function e(t,r,i){var n=t.NOW,a=t.clientOffset,s=t.availabilityStartTime,o=t.timescale,u=o===undefined?1:o,l=t.start,f=l===undefined?0:l,d=t.minimumUpdatePeriod,c=d===undefined?0:d;var h=(n+a)/1e3;var p=s+f;var m=h+c;var v=m-p;return Math.ceil((v*u-r)/i)};var ai=function e(t,r){var i=t.type,n=i===undefined?"static":i,a=t.minimumUpdatePeriod,s=a===undefined?0:a,o=t.media,u=o===undefined?"":o,l=t.sourceDuration,f=t.timescale,d=f===undefined?1:f,c=t.startNumber,h=c===undefined?1:c,p=t.periodIndex;var m=[];var v=-1;for(var g=0;g<r.length;g++){var y=r[g];var _=y.d;var b=y.r||0;var T=y.t||0;if(v<0){v=T}if(T&&T>v){v=T}var S=void 0;if(b<0){var w=g+1;if(w===r.length){if(n==="dynamic"&&s>0&&u.indexOf("$Number$")>0){S=ni(t,v,_)}else{S=(l*d-v)/_}}else{S=(r[w].t-v)/_}}else{S=b+1}var k=h+m.length+S;var E=h+m.length;while(E<k){m.push({number:E,duration:_/d,time:v,timeline:p});v+=_;E++}}return m};var si=function e(t,r){var i=[];for(var n=t;n<r;n++){i.push(n)}return i};var oi=function e(t){return t.reduce((function(e,t){return e.concat(t)}),[])};var ui=function e(t){if(!t.length){return[]}var r=[];for(var i=0;i<t.length;i++){r.push(t[i])}return r};var li={static:function e(t){var r=t.duration,i=t.timescale,n=i===undefined?1:i,a=t.sourceDuration;return{start:0,end:Math.ceil(a/(r/n))}},dynamic:function e(t){var r=t.NOW,i=t.clientOffset,n=t.availabilityStartTime,a=t.timescale,s=a===undefined?1:a,o=t.duration,u=t.start,l=u===undefined?0:u,f=t.minimumUpdatePeriod,d=f===undefined?0:f,c=t.timeShiftBufferDepth,h=c===undefined?Infinity:c;var p=(r+i)/1e3;var m=n+l;var v=p+d;var g=v-m;var y=Math.ceil(g*s/o);var _=Math.floor((p-m-h)*s/o);var b=Math.floor((p-m)*s/o);return{start:Math.max(0,_),end:Math.min(y,b)}}};var fi=function e(t){return function(e,r){var i=t.duration,n=t.timescale,a=n===undefined?1:n,s=t.periodIndex,o=t.startNumber,u=o===undefined?1:o;return{number:u+e,duration:i/a,timeline:s,time:r*i}}};var di=function e(t){var r=t.type,i=r===undefined?"static":r,n=t.duration,a=t.timescale,s=a===undefined?1:a,o=t.sourceDuration;var u=li[i](t),l=u.start,f=u.end;var d=si(l,f).map(fi(t));if(i==="static"){var c=d.length-1;d[c].duration=o-n/s*c}return d};var ci=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;var hi=function e(t){return function(e,r,i,n){if(e==="$$"){return"$"}if(typeof t[r]==="undefined"){return e}var a=""+t[r];if(r==="RepresentationID"){return a}if(!i){n=1}else{n=parseInt(n,10)}if(a.length>=n){return a}return""+new Array(n-a.length+1).join("0")+a}};var pi=function e(t,r){return t.replace(ci,hi(r))};var mi=function e(t,r){if(!t.duration&&!r){return[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]}if(t.duration){return di(t)}return ai(t,r)};var vi=function e(t,r){var i={RepresentationID:t.id,Bandwidth:t.bandwidth||0};var n=t.initialization,a=n===undefined?{sourceURL:"",range:""}:n;var s=ii({baseUrl:t.baseUrl,source:pi(a.sourceURL,i),range:a.range});var o=mi(t,r);return o.map((function(e){i.Number=e.number;i.Time=e.time;var r=pi(t.media||"",i);return{uri:r,timeline:e.timeline,duration:e.duration,resolvedUri:ri(t.baseUrl||"",r),map:s,number:e.number}}))};var gi={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};var yi=function e(t,r){var i=t.baseUrl,n=t.initialization,a=n===undefined?{}:n;var s=ii({baseUrl:i,source:a.sourceURL,range:a.range});var o=ii({baseUrl:i,source:r.media,range:r.mediaRange});o.map=s;return o};var _i=function e(t,r){var i=t.duration,n=t.segmentUrls,a=n===undefined?[]:n;if(!i&&!r||i&&r){throw new Error(gi.SEGMENT_TIME_UNSPECIFIED)}var s=a.map((function(e){return yi(t,e)}));var o=void 0;if(i){o=di(t)}if(r){o=ai(t,r)}var u=o.map((function(e,t){if(s[t]){var r=s[t];r.timeline=e.timeline;r.duration=e.duration;r.number=e.number;return r}})).filter((function(e){return e}));return u};var bi=function e(t){var r=t.baseUrl,i=t.initialization,n=i===undefined?{}:i,a=t.sourceDuration,s=t.timescale,o=s===undefined?1:s,u=t.indexRange,l=u===undefined?"":u,f=t.duration;if(!r){throw new Error(gi.NO_BASE_URL)}var d=ii({baseUrl:r,source:n.sourceURL,range:n.range});var c=ii({baseUrl:r,source:r,range:l});c.map=d;if(f){var h=di(t);if(h.length){c.duration=h[0].duration;c.timeline=h[0].timeline}}else if(a){c.duration=a/o;c.timeline=0}c.number=0;return[c]};var Ti=function e(t){var r=t.attributes,i=t.segmentInfo;var n=void 0;var a=void 0;if(i.template){a=vi;n=ti(r,i.template)}else if(i.base){a=bi;n=ti(r,i.base)}else if(i.list){a=_i;n=ti(r,i.list)}if(!a){return{attributes:r}}var s=a(n,i.timeline);if(n.duration){var o=n,u=o.duration,l=o.timescale,f=l===undefined?1:l;n.duration=u/f}else if(s.length){n.duration=s.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0)}else{n.duration=0}return{attributes:n,segments:s}};var Si=function e(t){return t.map(Ti)};var wi=function e(t,r){return ui(t.childNodes).filter((function(e){var t=e.tagName;return t===r}))};var ki=function e(t){return t.textContent.trim()};var Ei=function e(t){var r=365*24*60*60;var i=30*24*60*60;var n=24*60*60;var a=60*60;var s=60;var o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/;var u=o.exec(t);if(!u){return 0}var l=u.slice(1),f=l[0],d=l[1],c=l[2],h=l[3],p=l[4],m=l[5];return parseFloat(f||0)*r+parseFloat(d||0)*i+parseFloat(c||0)*n+parseFloat(h||0)*a+parseFloat(p||0)*s+parseFloat(m||0)};var Ci=function e(t){var r=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;if(r.test(t)){t+="Z"}return Date.parse(t)};var Ai={mediaPresentationDuration:function e(t){return Ei(t)},availabilityStartTime:function e(t){return Ci(t)/1e3},minimumUpdatePeriod:function e(t){return Ei(t)},timeShiftBufferDepth:function e(t){return Ei(t)},start:function e(t){return Ei(t)},width:function e(t){return parseInt(t,10)},height:function e(t){return parseInt(t,10)},bandwidth:function e(t){return parseInt(t,10)},startNumber:function e(t){return parseInt(t,10)},timescale:function e(t){return parseInt(t,10)},duration:function e(t){var r=parseInt(t,10);if(isNaN(r)){return Ei(t)}return r},d:function e(t){return parseInt(t,10)},t:function e(t){return parseInt(t,10)},r:function e(t){return parseInt(t,10)},DEFAULT:function e(t){return t}};var Oi=function e(t){if(!(t&&t.attributes)){return{}}return ui(t.attributes).reduce((function(e,t){var r=Ai[t.name]||Ai.DEFAULT;e[t.name]=r(t.value);return e}),{})};function Pi(e){var t=f.atob(e);var r=new Uint8Array(t.length);for(var i=0;i<t.length;i++){r[i]=t.charCodeAt(i)}return r}var Ii={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};var Li=function e(t,r){if(!r.length){return t}return oi(t.map((function(e){return r.map((function(t){return ri(e,ki(t))}))})))};var Di=function e(t){var r=wi(t,"SegmentTemplate")[0];var i=wi(t,"SegmentList")[0];var n=i&&wi(i,"SegmentURL").map((function(e){return ti({tag:"SegmentURL"},Oi(e))}));var a=wi(t,"SegmentBase")[0];var s=i||r;var o=s&&wi(s,"SegmentTimeline")[0];var u=i||a||r;var l=u&&wi(u,"Initialization")[0];var f=r&&Oi(r);if(f&&l){f.initialization=l&&Oi(l)}else if(f&&f.initialization){f.initialization={sourceURL:f.initialization}}var d={template:f,timeline:o&&wi(o,"S").map((function(e){return Oi(e)})),list:i&&ti(Oi(i),{segmentUrls:n,initialization:Oi(l)}),base:a&&ti(Oi(a),{initialization:Oi(l)})};Object.keys(d).forEach((function(e){if(!d[e]){delete d[e]}}));return d};var Ui=function e(t,r,i){return function(e){var n=wi(e,"BaseURL");var a=Li(r,n);var s=ti(t,Oi(e));var o=Di(e);return a.map((function(e){return{segmentInfo:ti(i,o),attributes:ti(s,{baseUrl:e})}}))}};var xi=function e(t){return t.reduce((function(e,t){var r=Oi(t);var i=Ii[r.schemeIdUri];if(i){e[i]={attributes:r};var n=wi(t,"cenc:pssh")[0];if(n){var a=ki(n);var s=a&&Pi(a);e[i].pssh=s}}return e}),{})};var Ri=function e(t,r,i){return function(e){var n=Oi(e);var a=Li(r,wi(e,"BaseURL"));var s=wi(e,"Role")[0];var o={role:Oi(s)};var u=ti(t,n,o);var l=xi(wi(e,"ContentProtection"));if(Object.keys(l).length){u=ti(u,{contentProtection:l})}var f=Di(e);var d=wi(e,"Representation");var c=ti(i,f);return oi(d.map(Ui(u,a,c)))}};var Mi=function e(t,r){return function(e,i){var n=Li(r,wi(e,"BaseURL"));var a=Oi(e);var s=ti(t,a,{periodIndex:i});var o=wi(e,"AdaptationSet");var u=Di(e);return oi(o.map(Ri(s,n,u)))}};var Bi=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=r.manifestUri,n=i===undefined?"":i,a=r.NOW,s=a===undefined?Date.now():a,o=r.clientOffset,u=o===undefined?0:o;var l=wi(t,"Period");if(l.length!==1){throw new Error(gi.INVALID_NUMBER_OF_PERIOD)}var f=Oi(t);var d=Li([n],wi(t,"BaseURL"));f.sourceDuration=f.mediaPresentationDuration||0;f.NOW=s;f.clientOffset=u;return oi(l.map(Mi(f,d)))};var Ni=function e(t){if(t===""){throw new Error(gi.DASH_EMPTY_MANIFEST)}var r=new f.DOMParser;var i=r.parseFromString(t,"application/xml");var n=i&&i.documentElement.tagName==="MPD"?i.documentElement:null;if(!n||n&&n.getElementsByTagName("parsererror").length>0){throw new Error(gi.DASH_INVALID_XML)}return n};var ji=function e(t){var r=wi(t,"UTCTiming")[0];if(!r){return null}var i=Oi(r);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT";i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(gi.UNSUPPORTED_UTC_TIMING_SCHEME)}return i};var Fi=function e(t,r){return Jr(Si(Bi(Ni(t),r)))};var Vi=function e(t){return ji(Ni(t))};var Hi=function(e){return e>>>0};var qi={toUnsigned:Hi};var Gi=qi.toUnsigned;var Wi,zi,$i,Xi,Yi;Wi=function(e,t){var r=[],i,n,a,s,o;if(!t.length){return null}for(i=0;i<e.byteLength;){n=Gi(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]);a=zi(e.subarray(i+4,i+8));s=n>1?i+n:e.byteLength;if(a===t[0]){if(t.length===1){r.push(e.subarray(i+8,s))}else{o=Wi(e.subarray(i+8,s),t.slice(1));if(o.length){r=r.concat(o)}}}i=s}return r};zi=function(e){var t="";t+=String.fromCharCode(e[0]);t+=String.fromCharCode(e[1]);t+=String.fromCharCode(e[2]);t+=String.fromCharCode(e[3]);return t};$i=function(e){var t={},r=Wi(e,["moov","trak"]);return r.reduce((function(e,t){var r,i,n,a,s;r=Wi(t,["tkhd"])[0];if(!r){return null}i=r[0];n=i===0?12:20;a=Gi(r[n]<<24|r[n+1]<<16|r[n+2]<<8|r[n+3]);s=Wi(t,["mdia","mdhd"])[0];if(!s){return null}i=s[0];n=i===0?12:20;e[a]=Gi(s[n]<<24|s[n+1]<<16|s[n+2]<<8|s[n+3]);return e}),t)};Xi=function(e,t){var r,i,n;r=Wi(t,["moof","traf"]);i=[].concat.apply([],r.map((function(t){return Wi(t,["tfhd"]).map((function(r){var i,n,a;i=Gi(r[4]<<24|r[5]<<16|r[6]<<8|r[7]);n=e[i]||9e4;a=Wi(t,["tfdt"]).map((function(e){var t,r;t=e[0];r=Gi(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);if(t===1){r*=Math.pow(2,32);r+=Gi(e[8]<<24|e[9]<<16|e[10]<<8|e[11])}return r}))[0];a=a||Infinity;return a/n}))})));n=Math.min.apply(null,i);return isFinite(n)?n:0};Yi=function(e){var t=Wi(e,["moov","trak"]);var r=[];t.forEach((function(e){var t=Wi(e,["mdia","hdlr"]);var i=Wi(e,["tkhd"]);t.forEach((function(e,t){var n=zi(e.subarray(8,12));var a=i[t];var s;var o;var u;if(n==="vide"){s=new DataView(a.buffer,a.byteOffset,a.byteLength);o=s.getUint8(0);u=o===0?s.getUint32(12):s.getUint32(20);r.push(u)}}))}));return r};var Ki={findBox:Wi,parseType:zi,timescale:$i,startTime:Xi,videoTrackIds:Yi};var Qi=Math.pow(2,32)-1;var Ji,Zi,en,tn,rn,nn,an,sn,on,un,ln,fn,dn,cn,hn,pn,mn,vn,gn,yn,_n,bn,Tn,Sn,wn,kn,En,Cn,An,On,Pn,In,Ln,Dn,Un,xn;(function(){var e;Tn={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(e in Tn){if(Tn.hasOwnProperty(e)){Tn[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]}}Sn=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);kn=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);wn=new Uint8Array([0,0,0,1]);En=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);Cn=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);An={video:En,audio:Cn};In=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);Pn=new Uint8Array([0,0,0,0,0,0,0,0]);Ln=new Uint8Array([0,0,0,0,0,0,0,0]);Dn=Ln;Un=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);xn=Ln;On=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();Ji=function(e){var t=[],r=0,i,n,a;for(i=1;i<arguments.length;i++){t.push(arguments[i])}i=t.length;while(i--){r+=t[i].byteLength}n=new Uint8Array(r+8);a=new DataView(n.buffer,n.byteOffset,n.byteLength);a.setUint32(0,n.byteLength);n.set(e,4);for(i=0,r=8;i<t.length;i++){n.set(t[i],r);r+=t[i].byteLength}return n};Zi=function(){return Ji(Tn.dinf,Ji(Tn.dref,In))};en=function(e){return Ji(Tn.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))};tn=function(){return Ji(Tn.ftyp,Sn,wn,Sn,kn)};pn=function(e){return Ji(Tn.hdlr,An[e])};rn=function(e){return Ji(Tn.mdat,e)};hn=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,e.duration&255,85,196,0,0]);if(e.samplerate){t[12]=e.samplerate>>>24&255;t[13]=e.samplerate>>>16&255;t[14]=e.samplerate>>>8&255;t[15]=e.samplerate&255}return Ji(Tn.mdhd,t)};cn=function(e){return Ji(Tn.mdia,hn(e),pn(e.type),an(e))};nn=function(e){return Ji(Tn.mfhd,new Uint8Array([0,0,0,0,(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255]))};an=function(e){return Ji(Tn.minf,e.type==="video"?Ji(Tn.vmhd,On):Ji(Tn.smhd,Pn),Zi(),vn(e))};sn=function(e,t){var r=[],i=t.length;while(i--){r[i]=yn(t[i])}return Ji.apply(null,[Tn.moof,nn(e)].concat(r))};on=function(e){var t=e.length,r=[];while(t--){r[t]=fn(e[t])}return Ji.apply(null,[Tn.moov,ln(4294967295)].concat(r).concat(un(e)))};un=function(e){var t=e.length,r=[];while(t--){r[t]=_n(e[t])}return Ji.apply(null,[Tn.mvex].concat(r))};ln=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ji(Tn.mvhd,t)};mn=function(e){var t=e.samples||[],r=new Uint8Array(4+t.length),i,n;for(n=0;n<t.length;n++){i=t[n].flags;r[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy}return Ji(Tn.sdtp,r)};vn=function(e){return Ji(Tn.stbl,gn(e),Ji(Tn.stts,xn),Ji(Tn.stsc,Dn),Ji(Tn.stsz,Un),Ji(Tn.stco,Ln))};(function(){var e,t;gn=function(r){return Ji(Tn.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),r.type==="video"?e(r):t(r))};e=function(e){var t=e.sps||[],r=e.pps||[],i=[],n=[],a;for(a=0;a<t.length;a++){i.push((t[a].byteLength&65280)>>>8);i.push(t[a].byteLength&255);i=i.concat(Array.prototype.slice.call(t[a]))}for(a=0;a<r.length;a++){n.push((r[a].byteLength&65280)>>>8);n.push(r[a].byteLength&255);n=n.concat(Array.prototype.slice.call(r[a]))}return Ji(Tn.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(e.width&65280)>>8,e.width&255,(e.height&65280)>>8,e.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Ji(Tn.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([t.length]).concat(i).concat([r.length]).concat(n))),Ji(Tn.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};t=function(e){return Ji(Tn.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(e.channelcount&65280)>>8,e.channelcount&255,(e.samplesize&65280)>>8,e.samplesize&255,0,0,0,0,(e.samplerate&65280)>>8,e.samplerate&255,0,0]),en(e))}})();dn=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(e.id&4278190080)>>24,(e.id&16711680)>>16,(e.id&65280)>>8,e.id&255,0,0,0,0,(e.duration&4278190080)>>24,(e.duration&16711680)>>16,(e.duration&65280)>>8,e.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(e.width&65280)>>8,e.width&255,0,0,(e.height&65280)>>8,e.height&255,0,0]);return Ji(Tn.tkhd,t)};yn=function(e){var t,r,i,n,a,s,o;t=Ji(Tn.tfhd,new Uint8Array([0,0,0,58,(e.id&4278190080)>>24,(e.id&16711680)>>16,(e.id&65280)>>8,e.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));s=Math.floor(e.baseMediaDecodeTime/(Qi+1));o=Math.floor(e.baseMediaDecodeTime%(Qi+1));r=Ji(Tn.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,s&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255]));a=32+20+8+16+8+8;if(e.type==="audio"){i=bn(e,a);return Ji(Tn.traf,t,r,i)}n=mn(e);i=bn(e,n.length+a);return Ji(Tn.traf,t,r,i,n)};fn=function(e){e.duration=e.duration||4294967295;return Ji(Tn.trak,dn(e),cn(e))};_n=function(e){var t=new Uint8Array([0,0,0,0,(e.id&4278190080)>>24,(e.id&16711680)>>16,(e.id&65280)>>8,e.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(e.type!=="video"){t[t.length-1]=0}return Ji(Tn.trex,t)};(function(){var e,t,r;r=function(e,t){var r=0,i=0,n=0,a=0;if(e.length){if(e[0].duration!==undefined){r=1}if(e[0].size!==undefined){i=2}if(e[0].flags!==undefined){n=4}if(e[0].compositionTimeOffset!==undefined){a=8}}return[0,0,r|i|n|a,1,(e.length&4278190080)>>>24,(e.length&16711680)>>>16,(e.length&65280)>>>8,e.length&255,(t&4278190080)>>>24,(t&16711680)>>>16,(t&65280)>>>8,t&255]};t=function(e,t){var i,n,a,s;n=e.samples||[];t+=8+12+16*n.length;i=r(n,t);for(s=0;s<n.length;s++){a=n[s];i=i.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&65280)>>>8,a.size&255,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,a.flags.degradationPriority&240<<8,a.flags.degradationPriority&15,(a.compositionTimeOffset&4278190080)>>>24,(a.compositionTimeOffset&16711680)>>>16,(a.compositionTimeOffset&65280)>>>8,a.compositionTimeOffset&255])}return Ji(Tn.trun,new Uint8Array(i))};e=function(e,t){var i,n,a,s;n=e.samples||[];t+=8+12+8*n.length;i=r(n,t);for(s=0;s<n.length;s++){a=n[s];i=i.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&65280)>>>8,a.size&255])}return Ji(Tn.trun,new Uint8Array(i))};bn=function(r,i){if(r.type==="audio"){return e(r,i)}return t(r,i)}})();var Rn={ftyp:tn,mdat:rn,moof:sn,moov:on,initSegment:function(e){var t=tn(),r=on(e),i;i=new Uint8Array(t.byteLength+r.byteLength);i.set(t);i.set(r,t.byteLength);return i}};var Mn=function(){this.init=function(){var e={};this.on=function(t,r){if(!e[t]){e[t]=[]}e[t]=e[t].concat(r)};this.off=function(t,r){var i;if(!e[t]){return false}i=e[t].indexOf(r);e[t]=e[t].slice();e[t].splice(i,1);return i>-1};this.trigger=function(t){var r,i,n,a;r=e[t];if(!r){return}if(arguments.length===2){n=r.length;for(i=0;i<n;++i){r[i].call(this,arguments[1])}}else{a=[];i=arguments.length;for(i=1;i<arguments.length;++i){a.push(arguments[i])}n=r.length;for(i=0;i<n;++i){r[i].apply(this,a)}}};this.dispose=function(){e={}}}};Mn.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}));this.on("done",(function(t){e.flush(t)}));return e};Mn.prototype.push=function(e){this.trigger("data",e)};Mn.prototype.flush=function(e){this.trigger("done",e)};var Bn=Mn;var Nn=function(e){var t,r,i=[],n=[];i.byteLength=0;for(t=0;t<e.length;t++){r=e[t];if(r.nalUnitType==="access_unit_delimiter_rbsp"){if(i.length){i.duration=r.dts-i.dts;n.push(i)}i=[r];i.byteLength=r.data.byteLength;i.pts=r.pts;i.dts=r.dts}else{if(r.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){i.keyFrame=true}i.duration=r.dts-i.dts;i.byteLength+=r.data.byteLength;i.push(r)}}if(n.length&&(!i.duration||i.duration<=0)){i.duration=n[n.length-1].duration}n.push(i);return n};var jn=function(e){var t,r,i=[],n=[];i.byteLength=0;i.nalCount=0;i.duration=0;i.pts=e[0].pts;i.dts=e[0].dts;n.byteLength=0;n.nalCount=0;n.duration=0;n.pts=e[0].pts;n.dts=e[0].dts;for(t=0;t<e.length;t++){r=e[t];if(r.keyFrame){if(i.length){n.push(i);n.byteLength+=i.byteLength;n.nalCount+=i.nalCount;n.duration+=i.duration}i=[r];i.nalCount=r.length;i.byteLength=r.byteLength;i.pts=r.pts;i.dts=r.dts;i.duration=r.duration}else{i.duration+=r.duration;i.nalCount+=r.length;i.byteLength+=r.byteLength;i.push(r)}}if(n.length&&i.duration<=0){i.duration=n[n.length-1].duration}n.byteLength+=i.byteLength;n.nalCount+=i.nalCount;n.duration+=i.duration;n.push(i);return n};var Fn=function(e){var t;if(!e[0][0].keyFrame&&e.length>1){t=e.shift();e.byteLength-=t.byteLength;e.nalCount-=t.nalCount;e[0][0].dts=t.dts;e[0][0].pts=t.pts;e[0][0].duration+=t.duration}return e};var Vn=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};var Hn=function(e,t){var r=Vn();r.dataOffset=t;r.compositionTimeOffset=e.pts-e.dts;r.duration=e.duration;r.size=4*e.length;r.size+=e.byteLength;if(e.keyFrame){r.flags.dependsOn=2;r.flags.isNonSyncSample=0}return r};var qn=function(e,t){var r,i,n,a,s,o=t||0,u=[];for(r=0;r<e.length;r++){a=e[r];for(i=0;i<a.length;i++){s=a[i];n=Hn(s,o);o+=n.size;u.push(n)}}return u};var Gn=function(e){var t,r,i,n,a,s,o=0,u=e.byteLength,l=e.nalCount,f=u+4*l,d=new Uint8Array(f),c=new DataView(d.buffer);for(t=0;t<e.length;t++){n=e[t];for(r=0;r<n.length;r++){a=n[r];for(i=0;i<a.length;i++){s=a[i];c.setUint32(o,s.data.byteLength);o+=4;d.set(s.data,o);o+=s.data.byteLength}}}return d};var Wn={groupNalsIntoFrames:Nn,groupFramesIntoGops:jn,extendFirstKeyFrame:Fn,generateSampleTable:qn,concatenateNalData:Gn};var zn=9e4;var $n=function(e,t){if(typeof t.pts==="number"){if(e.timelineStartInfo.pts===undefined){e.timelineStartInfo.pts=t.pts}if(e.minSegmentPts===undefined){e.minSegmentPts=t.pts}else{e.minSegmentPts=Math.min(e.minSegmentPts,t.pts)}if(e.maxSegmentPts===undefined){e.maxSegmentPts=t.pts}else{e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)}}if(typeof t.dts==="number"){if(e.timelineStartInfo.dts===undefined){e.timelineStartInfo.dts=t.dts}if(e.minSegmentDts===undefined){e.minSegmentDts=t.dts}else{e.minSegmentDts=Math.min(e.minSegmentDts,t.dts)}if(e.maxSegmentDts===undefined){e.maxSegmentDts=t.dts}else{e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts)}}};var Xn=function(e){delete e.minSegmentDts;delete e.maxSegmentDts;delete e.minSegmentPts;delete e.maxSegmentPts};var Yn=function(e,t){var r,i,n=e.minSegmentDts;if(!t){n-=e.timelineStartInfo.dts}r=e.timelineStartInfo.baseMediaDecodeTime;r+=n;r=Math.max(0,r);if(e.type==="audio"){i=e.samplerate/zn;r*=i;r=Math.floor(r)}return r};var Kn={clearDtsInfo:Xn,calculateTrackBaseMediaDecodeTime:Yn,collectDtsInfo:$n};var Qn=4,Jn=128;var Zn=function(e){var t=0,r={payloadType:-1,payloadSize:0},i=0,n=0;while(t<e.byteLength){if(e[t]===Jn){break}while(e[t]===255){i+=255;t++}i+=e[t++];while(e[t]===255){n+=255;t++}n+=e[t++];if(!r.payload&&i===Qn){r.payloadType=i;r.payloadSize=n;r.payload=e.subarray(t,t+n);break}t+=n;i=0;n=0}return r};var ea=function(e){if(e.payload[0]!==181){return null}if((e.payload[1]<<8|e.payload[2])!==49){return null}if(String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])!=="GA94"){return null}if(e.payload[7]!==3){return null}return e.payload.subarray(8,e.payload.length-1)};var ta=function(e,t){var r=[],i,n,a,s;if(!(t[0]&64)){return r}n=t[0]&31;for(i=0;i<n;i++){a=i*3;s={type:t[a+2]&3,pts:e};if(t[a+2]&4){s.ccData=t[a+3]<<8|t[a+4];r.push(s)}}return r};var ra=function(e){var t=e.byteLength,r=[],i=1,n,a;while(i<t-2){if(e[i]===0&&e[i+1]===0&&e[i+2]===3){r.push(i+2);i+=2}else{i++}}if(r.length===0){return e}n=t-r.length;a=new Uint8Array(n);var s=0;for(i=0;i<n;s++,i++){if(s===r[0]){s++;r.shift()}a[i]=e[s]}return a};var ia={parseSei:Zn,parseUserData:ea,parseCaptionPackets:ta,discardEmulationPreventionBytes:ra,USER_DATA_REGISTERED_ITU_T_T35:Qn};var na=function(){na.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new fa(0,0),new fa(0,1),new fa(1,0),new fa(1,1)];this.reset();this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data"));e.on("done",this.trigger.bind(this,"done"))}),this)};na.prototype=new Bn;na.prototype.push=function(e){var t,r,i;if(e.nalUnitType!=="sei_rbsp"){return}t=ia.parseSei(e.escapedRBSP);if(t.payloadType!==ia.USER_DATA_REGISTERED_ITU_T_T35){return}r=ia.parseUserData(t);if(!r){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}i=ia.parseCaptionPackets(e.pts,r);this.captionPackets_=this.captionPackets_.concat(i);if(this.latestDts_!==e.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=e.dts};na.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach((function(e){e.flush()}),this);return}this.captionPackets_.forEach((function(e,t){e.presortIndex=t}));this.captionPackets_.sort((function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts}));this.captionPackets_.forEach((function(e){if(e.type<2){this.dispatchCea608Packet(e)}}),this);this.captionPackets_.length=0;this.ccStreams_.forEach((function(e){e.flush()}),this);return};na.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach((function(e){e.reset()}))};na.prototype.dispatchCea608Packet=function(e){if(this.setsChannel1Active(e)){this.activeCea608Channel_[e.type]=0}else if(this.setsChannel2Active(e)){this.activeCea608Channel_[e.type]=1}if(this.activeCea608Channel_[e.type]===null){return}this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};na.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};na.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};var aa={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var sa=function(e){if(e===null){return""}e=aa[e]||e;return String.fromCharCode(e)};var oa=14;var ua=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var la=function(){var e=[],t=oa+1;while(t--){e.push("")}return e};var fa=function(e,t){fa.prototype.init.call(this);this.field_=e||0;this.dataChannel_=t||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,r,i,n,a;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}i=t>>>8;n=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(e.pts);this.flushDisplayed(e.pts);r=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=r;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(e.pts)}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=la()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=la()}else if(t===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(e.pts);this.displayed_=la()}this.mode_="paintOn";this.startPts_=e.pts}else if(this.isSpecialCharacter(i,n)){i=(i&3)<<8;a=sa(i|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isExtCharacter(i,n)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}i=(i&3)<<8;a=sa(i|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isMidRowCode(i,n)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((n&14)===14){this.addFormatting(e.pts,["i"])}if((n&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(i,n)){this.column_+=n&3}else if(this.isPAC(i,n)){var s=ua.indexOf(t&7968);if(this.mode_==="rollUp"){this.setRollUp(e.pts,s)}if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(n&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(n)){if((n&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(i)){if(n===0){n=null}a=sa(i);a+=sa(n);this[this.mode_](e.pts,a);this.column_+=a.length}}};fa.prototype=new Bn;fa.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){return e.trim()})).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};fa.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=la();this.nonDisplayed_=la();this.lastControlCode_=null;this.column_=0;this.row_=oa;this.rollUpRows_=2;this.formatting_=[]};fa.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};fa.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};fa.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&(t>=32&&t<=63)};fa.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&(t>=32&&t<=47)};fa.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&(t>=33&&t<=35)};fa.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&(t>=64&&t<=127)};fa.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};fa.prototype.isNormalChar=function(e){return e>=32&&e<=127};fa.prototype.setRollUp=function(e,t){if(this.mode_!=="rollUp"){this.row_=oa;this.mode_="rollUp";this.flushDisplayed(e);this.nonDisplayed_=la();this.displayed_=la()}if(t!==undefined&&t!==this.row_){for(var r=0;r<this.rollUpRows_;r++){this.displayed_[t-r]=this.displayed_[this.row_-r];this.displayed_[this.row_-r]=""}}if(t===undefined){t=this.row_}this.topRow_=t-this.rollUpRows_+1};fa.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var r=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,r)};fa.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[];this[this.mode_](e,t)};fa.prototype.popOn=function(e,t){var r=this.nonDisplayed_[this.row_];r+=t;this.nonDisplayed_[this.row_]=r};fa.prototype.rollUp=function(e,t){var r=this.displayed_[this.row_];r+=t;this.displayed_[this.row_]=r};fa.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.row_+1;e<oa+1;e++){this.displayed_[e]=""}for(e=this.topRow_;e<this.row_;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[this.row_]=""};fa.prototype.paintOn=function(e,t){var r=this.displayed_[this.row_];r+=t;this.displayed_[this.row_]=r};var da={CaptionStream:na,Cea608Stream:fa};var ca={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var ha=8589934592;var pa=4294967296;var ma=function(e,t){var r=1;if(e>t){r=-1}while(Math.abs(t-e)>pa){e+=r*ha}return e};var va=function(e){var t,r;va.prototype.init.call(this);this.type_=e;this.push=function(e){if(e.type!==this.type_){return}if(r===undefined){r=e.dts}e.dts=ma(e.dts,r);e.pts=ma(e.pts,r);t=e.dts;this.trigger("data",e)};this.flush=function(){r=t;this.trigger("done")};this.discontinuity=function(){r=void 0;t=void 0}};va.prototype=new Bn;var ga={TimestampRolloverStream:va,handleRollover:ma};var ya=function(e,t,r){var i,n="";for(i=t;i<r;i++){n+="%"+("00"+e[i].toString(16)).slice(-2)}return n},_a=function(e,t,r){return decodeURIComponent(ya(e,t,r))},ba=function(e,t,r){return unescape(ya(e,t,r))},Ta=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Sa={TXXX:function(e){var t;if(e.data[0]!==3){return}for(t=1;t<e.data.length;t++){if(e.data[t]===0){e.description=_a(e.data,1,t);e.value=_a(e.data,t+1,e.data.length).replace(/\0*$/,"");break}}e.data=e.value},WXXX:function(e){var t;if(e.data[0]!==3){return}for(t=1;t<e.data.length;t++){if(e.data[t]===0){e.description=_a(e.data,1,t);e.url=_a(e.data,t+1,e.data.length);break}}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++){if(e.data[t]===0){e.owner=ba(e.data,0,t);break}}e.privateData=e.data.subarray(t+1);e.data=e.privateData}},wa;wa=function(e){var t={debug:!!(e&&e.debug),descriptor:e&&e.descriptor},r=0,i=[],n=0,a;wa.prototype.init.call(this);this.dispatchType=ca.METADATA_STREAM_TYPE.toString(16);if(t.descriptor){for(a=0;a<t.descriptor.length;a++){this.dispatchType+=("00"+t.descriptor[a].toString(16)).slice(-2)}}this.push=function(e){var a,s,o,u,l,f;if(e.type!=="timed-metadata"){return}if(e.dataAlignmentIndicator){n=0;i.length=0}if(i.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){if(t.debug){console.log("Skipping unrecognized metadata packet")}return}i.push(e);n+=e.data.byteLength;if(i.length===1){r=Ta(e.data.subarray(6,10));r+=10}if(n<r){return}a={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts};for(l=0;l<r;){a.data.set(i[0].data.subarray(0,r-l),l);l+=i[0].data.byteLength;n-=i[0].data.byteLength;i.shift()}s=10;if(a.data[5]&64){s+=4;s+=Ta(a.data.subarray(10,14));r-=Ta(a.data.subarray(16,20))}do{o=Ta(a.data.subarray(s+4,s+8));if(o<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}f=String.fromCharCode(a.data[s],a.data[s+1],a.data[s+2],a.data[s+3]);u={id:f,data:a.data.subarray(s+10,s+o+10)};u.key=u.id;if(Sa[u.id]){Sa[u.id](u);if(u.owner==="com.apple.streaming.transportStreamTimestamp"){var d=u.data,c=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;c*=4;c+=d[7]&3;u.timeStamp=c;if(a.pts===undefined&&a.dts===undefined){a.pts=u.timeStamp;a.dts=u.timeStamp}this.trigger("timestamp",u)}}a.frames.push(u);s+=10;s+=o}while(s<r);this.trigger("data",a)}};wa.prototype=new Bn;var ka=wa;var Ea=ga.TimestampRolloverStream;var Ca,Aa,Oa;var Pa=188,Ia=71;Ca=function(){var e=new Uint8Array(Pa),t=0;Ca.prototype.init.call(this);this.push=function(r){var i=0,n=Pa,a;if(t){a=new Uint8Array(r.byteLength+t);a.set(e.subarray(0,t));a.set(r,t);t=0}else{a=r}while(n<a.byteLength){if(a[i]===Ia&&a[n]===Ia){this.trigger("data",a.subarray(i,n));i+=Pa;n+=Pa;continue}i++;n++}if(i<a.byteLength){e.set(a.subarray(i),0);t=a.byteLength-i}};this.flush=function(){if(t===Pa&&e[0]===Ia){this.trigger("data",e);t=0}this.trigger("done")}};Ca.prototype=new Bn;Aa=function(){var e,t,r,i;Aa.prototype.init.call(this);i=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;e=function(e,i){var n=0;if(i.payloadUnitStartIndicator){n+=e[n]+1}if(i.type==="pat"){t(e.subarray(n),i)}else{r(e.subarray(n),i)}};t=function(e,t){t.section_number=e[7];t.last_section_number=e[8];i.pmtPid=(e[10]&31)<<8|e[11];t.pmtPid=i.pmtPid};r=function(e,t){var r,n,a,s;if(!(e[5]&1)){return}i.programMapTable={video:null,audio:null,"timed-metadata":{}};r=(e[1]&15)<<8|e[2];n=3+r-4;a=(e[10]&15)<<8|e[11];s=12+a;while(s<n){var o=e[s];var u=(e[s+1]&31)<<8|e[s+2];if(o===ca.H264_STREAM_TYPE&&i.programMapTable.video===null){i.programMapTable.video=u}else if(o===ca.ADTS_STREAM_TYPE&&i.programMapTable.audio===null){i.programMapTable.audio=u}else if(o===ca.METADATA_STREAM_TYPE){i.programMapTable["timed-metadata"][u]=o}s+=((e[s+3]&15)<<8|e[s+4])+5}t.programMapTable=i.programMapTable};this.push=function(t){var r={},i=4;r.payloadUnitStartIndicator=!!(t[1]&64);r.pid=t[1]&31;r.pid<<=8;r.pid|=t[2];if((t[3]&48)>>>4>1){i+=t[i]+1}if(r.pid===0){r.type="pat";e(t.subarray(i),r);this.trigger("data",r)}else if(r.pid===this.pmtPid){r.type="pmt";e(t.subarray(i),r);this.trigger("data",r);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([t,i,r])}else{this.processPes_(t,i,r)}};this.processPes_=function(e,t,r){if(r.pid===this.programMapTable.video){r.streamType=ca.H264_STREAM_TYPE}else if(r.pid===this.programMapTable.audio){r.streamType=ca.ADTS_STREAM_TYPE}else{r.streamType=this.programMapTable["timed-metadata"][r.pid]}r.type="pes";r.data=e.subarray(t);this.trigger("data",r)}};Aa.prototype=new Bn;Aa.STREAM_TYPES={h264:27,adts:15};Oa=function(){var e=this,t={data:[],size:0},r={data:[],size:0},i={data:[],size:0},n=function(e,t){var r;t.packetLength=6+(e[4]<<8|e[5]);t.dataAlignmentIndicator=(e[6]&4)!==0;r=e[7];if(r&192){t.pts=(e[9]&14)<<27|(e[10]&255)<<20|(e[11]&254)<<12|(e[12]&255)<<5|(e[13]&254)>>>3;t.pts*=4;t.pts+=(e[13]&6)>>>1;t.dts=t.pts;if(r&64){t.dts=(e[14]&14)<<27|(e[15]&255)<<20|(e[16]&254)<<12|(e[17]&255)<<5|(e[18]&254)>>>3;t.dts*=4;t.dts+=(e[18]&6)>>>1}}t.data=e.subarray(9+e[8])},a=function(t,r,i){var a=new Uint8Array(t.size),s={type:r},o=0,u=0,l=false,f;if(!t.data.length||t.size<9){return}s.trackId=t.data[0].pid;for(o=0;o<t.data.length;o++){f=t.data[o];a.set(f.data,u);u+=f.data.byteLength}n(a,s);l=r==="video"||s.packetLength<=t.size;if(i||l){t.size=0;t.data.length=0}if(l){e.trigger("data",s)}};Oa.prototype.init.call(this);this.push=function(n){({pat:function(){},pes:function(){var e,s;switch(n.streamType){case ca.H264_STREAM_TYPE:case ca.H264_STREAM_TYPE:e=t;s="video";break;case ca.ADTS_STREAM_TYPE:e=r;s="audio";break;case ca.METADATA_STREAM_TYPE:e=i;s="timed-metadata";break;default:return}if(n.payloadUnitStartIndicator){a(e,s,true)}e.data.push(n);e.size+=n.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},r=n.programMapTable;if(r.video!==null){t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.video,codec:"avc",type:"video"})}if(r.audio!==null){t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.audio,codec:"adts",type:"audio"})}e.trigger("data",t)}})[n.type]()};this.flush=function(){a(t,"video");a(r,"audio");a(i,"timed-metadata");this.trigger("done")}};Oa.prototype=new Bn;var La={PAT_PID:0,MP2T_PACKET_LENGTH:Pa,TransportPacketStream:Ca,TransportParseStream:Aa,ElementaryStream:Oa,TimestampRolloverStream:Ea,CaptionStream:da.CaptionStream,Cea608Stream:da.Cea608Stream,MetadataStream:ka};for(var Da in ca){if(ca.hasOwnProperty(Da)){La[Da]=ca[Da]}}var Ua=La;var xa;var Ra=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];xa=function(){var e;xa.prototype.init.call(this);this.push=function(t){var r=0,i=0,n,a,s,o,u,l;if(t.type!=="audio"){return}if(e){o=e;e=new Uint8Array(o.byteLength+t.data.byteLength);e.set(o);e.set(t.data,o.byteLength)}else{e=t.data}while(r+5<e.length){if(e[r]!==255||(e[r+1]&246)!==240){r++;continue}a=(~e[r+1]&1)*2;n=(e[r+3]&3)<<11|e[r+4]<<3|(e[r+5]&224)>>5;u=((e[r+6]&3)+1)*1024;l=u*9e4/Ra[(e[r+2]&60)>>>2];s=r+n;if(e.byteLength<s){return}this.trigger("data",{pts:t.pts+i*l,dts:t.dts+i*l,sampleCount:u,audioobjecttype:(e[r+2]>>>6&3)+1,channelcount:(e[r+2]&1)<<2|(e[r+3]&192)>>>6,samplerate:Ra[(e[r+2]&60)>>>2],samplingfrequencyindex:(e[r+2]&60)>>>2,samplesize:16,data:e.subarray(r+7+a,s)});if(e.byteLength===s){e=undefined;return}i++;e=e.subarray(s)}};this.flush=function(){this.trigger("done")}};xa.prototype=new Bn;var Ma=xa;var Ba;Ba=function(e){var t=e.byteLength,r=0,i=0;this.length=function(){return 8*t};this.bitsAvailable=function(){return 8*t+i};this.loadWord=function(){var n=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(s===0){throw new Error("no bytes available")}a.set(e.subarray(n,n+s));r=new DataView(a.buffer).getUint32(0);i=s*8;t-=s};this.skipBits=function(e){var n;if(i>e){r<<=e;i-=e}else{e-=i;n=Math.floor(e/8);e-=n*8;t-=n;this.loadWord();r<<=e;i-=e}};this.readBits=function(e){var n=Math.min(i,e),a=r>>>32-n;i-=n;if(i>0){r<<=n}else if(t>0){this.loadWord()}n=e-n;if(n>0){return a<<n|this.readBits(n)}return a};this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e){if((r&2147483648>>>e)!==0){r<<=e;i-=e;return e}}this.loadWord();return e+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1};this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();if(1&e){return 1+e>>>1}return-1*(e>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var Na=Ba;var ja,Fa;var Va;Fa=function(){var e=0,t,r;Fa.prototype.init.call(this);this.push=function(i){var n;if(!r){r=i.data}else{n=new Uint8Array(r.byteLength+i.data.byteLength);n.set(r);n.set(i.data,r.byteLength);r=n}for(;e<r.byteLength-3;e++){if(r[e+2]===1){t=e+5;break}}while(t<r.byteLength){switch(r[t]){case 0:if(r[t-1]!==0){t+=2;break}else if(r[t-2]!==0){t++;break}if(e+3!==t-2){this.trigger("data",r.subarray(e+3,t-2))}do{t++}while(r[t]!==1&&t<r.length);e=t-2;t+=3;break;case 1:if(r[t-1]!==0||r[t-2]!==0){t+=3;break}this.trigger("data",r.subarray(e+3,t-2));e=t-2;t+=3;break;default:t+=3;break}}r=r.subarray(e);t-=e;e=0};this.flush=function(){if(r&&r.byteLength>3){this.trigger("data",r.subarray(e+3))}r=null;e=0;this.trigger("done")}};Fa.prototype=new Bn;Va={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};ja=function(){var e=new Fa,t,r,i,n,a,s,o;ja.prototype.init.call(this);t=this;this.push=function(t){if(t.type!=="video"){return}r=t.trackId;i=t.pts;n=t.dts;e.push(t)};e.on("data",(function(e){var o={trackId:r,pts:i,dts:n,data:e};switch(e[0]&31){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp";o.escapedRBSP=a(e.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp";o.escapedRBSP=a(e.subarray(1));o.config=s(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp";break;default:break}t.trigger("data",o)}));e.on("done",(function(){t.trigger("done")}));this.flush=function(){e.flush()};o=function(e,t){var r=8,i=8,n,a;for(n=0;n<e;n++){if(i!==0){a=t.readExpGolomb();i=(r+a+256)%256}r=i===0?r:i}};a=function(e){var t=e.byteLength,r=[],i=1,n,a;while(i<t-2){if(e[i]===0&&e[i+1]===0&&e[i+2]===3){r.push(i+2);i+=2}else{i++}}if(r.length===0){return e}n=t-r.length;a=new Uint8Array(n);var s=0;for(i=0;i<n;s++,i++){if(s===r[0]){s++;r.shift()}a[i]=e[s]}return a};s=function(e){var t=0,r=0,i=0,n=0,a=1,s,u,l,f,d,c,h,p,m,v,g,y,_,b;s=new Na(e);u=s.readUnsignedByte();f=s.readUnsignedByte();l=s.readUnsignedByte();s.skipUnsignedExpGolomb();if(Va[u]){d=s.readUnsignedExpGolomb();if(d===3){s.skipBits(1)}s.skipUnsignedExpGolomb();s.skipUnsignedExpGolomb();s.skipBits(1);if(s.readBoolean()){g=d!==3?8:12;for(b=0;b<g;b++){if(s.readBoolean()){if(b<6){o(16,s)}else{o(64,s)}}}}}s.skipUnsignedExpGolomb();c=s.readUnsignedExpGolomb();if(c===0){s.readUnsignedExpGolomb()}else if(c===1){s.skipBits(1);s.skipExpGolomb();s.skipExpGolomb();h=s.readUnsignedExpGolomb();for(b=0;b<h;b++){s.skipExpGolomb()}}s.skipUnsignedExpGolomb();s.skipBits(1);p=s.readUnsignedExpGolomb();m=s.readUnsignedExpGolomb();v=s.readBits(1);if(v===0){s.skipBits(1)}s.skipBits(1);if(s.readBoolean()){t=s.readUnsignedExpGolomb();r=s.readUnsignedExpGolomb();i=s.readUnsignedExpGolomb();n=s.readUnsignedExpGolomb()}if(s.readBoolean()){if(s.readBoolean()){_=s.readUnsignedByte();switch(_){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:{y=[s.readUnsignedByte()<<8|s.readUnsignedByte(),s.readUnsignedByte()<<8|s.readUnsignedByte()];break}}if(y){a=y[0]/y[1]}}}return{profileIdc:u,levelIdc:l,profileCompatibility:f,width:Math.ceil(((p+1)*16-t*2-r*2)*a),height:(2-v)*(m+1)*16-i*2-n*2}}};ja.prototype=new Bn;var Ha={H264Stream:ja,NalByteStream:Fa};var qa;qa=function(){var e=new Uint8Array,t=0;qa.prototype.init.call(this);this.setTimestamp=function(e){t=e};this.parseId3TagSize=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],n=(i&16)>>4;if(n){return r+20}return r+10};this.parseAdtsSize=function(e,t){var r=(e[t+5]&224)>>5,i=e[t+4]<<3,n=e[t+3]&3<<11;return n|i|r};this.push=function(r){var i=0,n=0,a,s,o,u;if(e.length){u=e.length;e=new Uint8Array(r.byteLength+u);e.set(e.subarray(0,u));e.set(r,u)}else{e=r}while(e.length-n>=3){if(e[n]==="I".charCodeAt(0)&&e[n+1]==="D".charCodeAt(0)&&e[n+2]==="3".charCodeAt(0)){if(e.length-n<10){break}i=this.parseId3TagSize(e,n);if(i>e.length){break}s={type:"timed-metadata",data:e.subarray(n,n+i)};this.trigger("data",s);n+=i;continue}else if(e[n]&255===255&&(e[n+1]&240)===240){if(e.length-n<7){break}i=this.parseAdtsSize(e,n);if(i>e.length){break}o={type:"audio",data:e.subarray(n,n+i),pts:t,dts:t};this.trigger("data",o);n+=i;continue}n++}a=e.length-n;if(a>0){e=e.subarray(n)}else{e=new Uint8Array}}};qa.prototype=new Bn;var Ga=qa;var Wa=[33,16,5,32,164,27];var za=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var $a=function(e){var t=[];while(e--){t.push(0)}return t};var Xa=function(e){return Object.keys(e).reduce((function(t,r){t[r]=new Uint8Array(e[r].reduce((function(e,t){return e.concat(t)}),[]));return t}),{})};var Ya={96e3:[Wa,[227,64],$a(154),[56]],88200:[Wa,[231],$a(170),[56]],64e3:[Wa,[248,192],$a(240),[56]],48e3:[Wa,[255,192],$a(268),[55,148,128],$a(54),[112]],44100:[Wa,[255,192],$a(268),[55,163,128],$a(84),[112]],32e3:[Wa,[255,192],$a(268),[55,234],$a(226),[112]],24e3:[Wa,[255,192],$a(268),[55,255,128],$a(268),[111,112],$a(126),[224]],16e3:[Wa,[255,192],$a(268),[55,255,128],$a(268),[111,255],$a(269),[223,108],$a(195),[1,192]],12e3:[za,$a(268),[3,127,248],$a(268),[6,255,240],$a(268),[13,255,224],$a(268),[27,253,128],$a(259),[56]],11025:[za,$a(268),[3,127,248],$a(268),[6,255,240],$a(268),[13,255,224],$a(268),[27,255,192],$a(268),[55,175,128],$a(108),[112]],8e3:[za,$a(268),[3,121,16],$a(47),[7]]};var Ka=Xa(Ya);var Qa=9e4,Ja,Za,es,ts,rs,is;Ja=function(e){return e*Qa};Za=function(e,t){return e*t};es=function(e){return e/Qa};ts=function(e,t){return e/t};rs=function(e,t){return Ja(ts(e,t))};is=function(e,t){return Za(es(e),t)};var ns={secondsToVideoTs:Ja,secondsToAudioTs:Za,videoTsToSeconds:es,audioTsToSeconds:ts,audioTsToVideoTs:rs,videoTsToAudioTs:is};var as=Ha.H264Stream;var ss=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var os=["width","height","profileIdc","levelIdc","profileCompatibility"];var us=9e4;var ls,fs,ds,cs;var hs,ps,ms;hs=function(e){if(e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)){return true}return false};ps=function(e,t){var r;if(e.length!==t.length){return false}for(r=0;r<e.length;r++){if(e[r]!==t[r]){return false}}return true};ms=function(e){var t,r,i=0;for(t=0;t<e.length;t++){r=e[t];i+=r.data.byteLength}return i};fs=function(e,t){var r=[],i=0,n=0,a=0,s=Infinity;t=t||{};fs.prototype.init.call(this);this.push=function(t){Kn.collectDtsInfo(e,t);if(e){ss.forEach((function(r){e[r]=t[r]}))}r.push(t)};this.setEarliestDts=function(t){n=t-e.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(e){s=e};this.setAudioAppendStart=function(e){a=e};this.flush=function(){var n,a,s,o;if(r.length===0){this.trigger("done","AudioSegmentStream");return}n=this.trimAdtsFramesByEarliestDts_(r);e.baseMediaDecodeTime=Kn.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps);this.prefixWithSilence_(e,n);e.samples=this.generateSampleTable_(n);s=Rn.mdat(this.concatenateFrameData_(n));r=[];a=Rn.moof(i,[e]);o=new Uint8Array(a.byteLength+s.byteLength);i++;o.set(a);o.set(s,a.byteLength);Kn.clearDtsInfo(e);this.trigger("data",{track:e,boxes:o});this.trigger("done","AudioSegmentStream")};this.prefixWithSilence_=function(e,t){var r,i=0,n=0,o=0,u=0,l,f;if(!t.length){return}r=ns.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate);i=Math.ceil(us/(e.samplerate/1024));if(a&&s){n=r-Math.max(a,s);o=Math.floor(n/i);u=o*i}if(o<1||u>us/2){return}l=Ka[e.samplerate];if(!l){l=t[0].data}for(f=0;f<o;f++){t.splice(f,0,{data:l})}e.baseMediaDecodeTime-=Math.floor(ns.videoTsToAudioTs(u,e.samplerate))};this.trimAdtsFramesByEarliestDts_=function(t){if(e.minSegmentDts>=n){return t}e.minSegmentDts=Infinity;return t.filter((function(t){if(t.dts>=n){e.minSegmentDts=Math.min(e.minSegmentDts,t.dts);e.minSegmentPts=e.minSegmentDts;return true}return false}))};this.generateSampleTable_=function(e){var t,r,i=[];for(t=0;t<e.length;t++){r=e[t];i.push({size:r.data.byteLength,duration:1024})}return i};this.concatenateFrameData_=function(e){var t,r,i=0,n=new Uint8Array(ms(e));for(t=0;t<e.length;t++){r=e[t];n.set(r.data,i);i+=r.data.byteLength}return n}};fs.prototype=new Bn;ls=function(e,t){var r=0,i=[],n=[],a,s;t=t||{};ls.prototype.init.call(this);delete e.minPTS;this.gopCache_=[];this.push=function(t){Kn.collectDtsInfo(e,t);if(t.nalUnitType==="seq_parameter_set_rbsp"&&!a){a=t.config;e.sps=[t.data];os.forEach((function(t){e[t]=a[t]}),this)}if(t.nalUnitType==="pic_parameter_set_rbsp"&&!s){s=t.data;e.pps=[t.data]}i.push(t)};this.flush=function(){var a,s,o,u,l,f;while(i.length){if(i[0].nalUnitType==="access_unit_delimiter_rbsp"){break}i.shift()}if(i.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}a=Wn.groupNalsIntoFrames(i);o=Wn.groupFramesIntoGops(a);if(!o[0][0].keyFrame){s=this.getGopForFusion_(i[0],e);if(s){o.unshift(s);o.byteLength+=s.byteLength;o.nalCount+=s.nalCount;o.pts=s.pts;o.dts=s.dts;o.duration+=s.duration}else{o=Wn.extendFirstKeyFrame(o)}}if(n.length){var d;if(t.alignGopsAtEnd){d=this.alignGopsAtEnd_(o)}else{d=this.alignGopsAtStart_(o)}if(!d){this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);i=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}Kn.clearDtsInfo(e);o=d}Kn.collectDtsInfo(e,o);e.samples=Wn.generateSampleTable(o);l=Rn.mdat(Wn.concatenateNalData(o));e.baseMediaDecodeTime=Kn.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps);this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})));this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);i=[];this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime);this.trigger("timelineStartInfo",e.timelineStartInfo);u=Rn.moof(r,[e]);f=new Uint8Array(u.byteLength+l.byteLength);r++;f.set(u);f.set(l,u.byteLength);this.trigger("data",{track:e,boxes:f});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){Kn.clearDtsInfo(e);a=undefined;s=undefined};this.getGopForFusion_=function(t){var r=45e3,i=1e4,n=Infinity,a,s,o,u,l;for(l=0;l<this.gopCache_.length;l++){u=this.gopCache_[l];o=u.gop;if(!(e.pps&&ps(e.pps[0],u.pps[0]))||!(e.sps&&ps(e.sps[0],u.sps[0]))){continue}if(o.dts<e.timelineStartInfo.dts){continue}a=t.dts-o.dts-o.duration;if(a>=-i&&a<=r){if(!s||n>a){s=u;n=a}}}if(s){return s.gop}return null};this.alignGopsAtStart_=function(e){var t,r,i,a,s,o,u,l;s=e.byteLength;o=e.nalCount;u=e.duration;t=r=0;while(t<n.length&&r<e.length){i=n[t];a=e[r];if(i.pts===a.pts){break}if(a.pts>i.pts){t++;continue}r++;s-=a.byteLength;o-=a.nalCount;u-=a.duration}if(r===0){return e}if(r===e.length){return null}l=e.slice(r);l.byteLength=s;l.duration=u;l.nalCount=o;l.pts=l[0].pts;l.dts=l[0].dts;return l};this.alignGopsAtEnd_=function(e){var t,r,i,a,s,o;t=n.length-1;r=e.length-1;s=null;o=false;while(t>=0&&r>=0){i=n[t];a=e[r];if(i.pts===a.pts){o=true;break}if(i.pts>a.pts){t--;continue}if(t===n.length-1){s=r}r--}if(!o&&s===null){return null}var u;if(o){u=r}else{u=s}if(u===0){return e}var l=e.slice(u);var f=l.reduce((function(e,t){e.byteLength+=t.byteLength;e.duration+=t.duration;e.nalCount+=t.nalCount;return e}),{byteLength:0,duration:0,nalCount:0});l.byteLength=f.byteLength;l.duration=f.duration;l.nalCount=f.nalCount;l.pts=l[0].pts;l.dts=l[0].dts;return l};this.alignGopsWith=function(e){n=e}};ls.prototype=new Bn;cs=function(e,t){this.numberOfTracks=0;this.metadataStream=t;if(typeof e.remux!=="undefined"){this.remuxTracks=!!e.remux}else{this.remuxTracks=true}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;cs.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}this.pendingTracks.push(e.track);this.pendingBoxes.push(e.boxes);this.pendingBytes+=e.boxes.byteLength;if(e.track.type==="video"){this.videoTrack=e.track}if(e.track.type==="audio"){this.audioTrack=e.track}}};cs.prototype=new Bn;cs.prototype.flush=function(e){var t=0,r={captions:[],captionStreams:{},metadata:[],info:{}},i,n,a,s=0,o;if(this.pendingTracks.length<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){s=this.videoTrack.timelineStartInfo.pts;os.forEach((function(e){r.info[e]=this.videoTrack[e]}),this)}else if(this.audioTrack){s=this.audioTrack.timelineStartInfo.pts;ss.forEach((function(e){r.info[e]=this.audioTrack[e]}),this)}if(this.pendingTracks.length===1){r.type=this.pendingTracks[0].type}else{r.type="combined"}this.emittedTracks+=this.pendingTracks.length;a=Rn.initSegment(this.pendingTracks);r.initSegment=new Uint8Array(a.byteLength);r.initSegment.set(a);r.data=new Uint8Array(this.pendingBytes);for(o=0;o<this.pendingBoxes.length;o++){r.data.set(this.pendingBoxes[o],t);t+=this.pendingBoxes[o].byteLength}for(o=0;o<this.pendingCaptions.length;o++){i=this.pendingCaptions[o];i.startTime=i.startPts-s;i.startTime/=9e4;i.endTime=i.endPts-s;i.endTime/=9e4;r.captionStreams[i.stream]=true;r.captions.push(i)}for(o=0;o<this.pendingMetadata.length;o++){n=this.pendingMetadata[o];n.cueTime=n.pts-s;n.cueTime/=9e4;r.metadata.push(n)}r.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",r);if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};ds=function(e){var t=this,r=true,i,n;ds.prototype.init.call(this);e=e||{};this.baseMediaDecodeTime=e.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r;r.type="aac";r.metadataStream=new Ua.MetadataStream;r.aacStream=new Ga;r.audioTimestampRolloverStream=new Ua.TimestampRolloverStream("audio");r.timedMetadataTimestampRolloverStream=new Ua.TimestampRolloverStream("timed-metadata");r.adtsStream=new Ma;r.coalesceStream=new cs(e,r.metadataStream);r.headOfPipeline=r.aacStream;r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream);r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream);r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)}));r.aacStream.on("data",(function(i){if(i.type==="timed-metadata"&&!r.audioSegmentStream){n=n||{timelineStartInfo:{baseMediaDecodeTime:t.baseMediaDecodeTime},codec:"adts",type:"audio"};r.coalesceStream.numberOfTracks++;r.audioSegmentStream=new fs(n,e);r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)}}));r.coalesceStream.on("data",this.trigger.bind(this,"data"));r.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r;r.type="ts";r.metadataStream=new Ua.MetadataStream;r.packetStream=new Ua.TransportPacketStream;r.parseStream=new Ua.TransportParseStream;r.elementaryStream=new Ua.ElementaryStream;r.videoTimestampRolloverStream=new Ua.TimestampRolloverStream("video");r.audioTimestampRolloverStream=new Ua.TimestampRolloverStream("audio");r.timedMetadataTimestampRolloverStream=new Ua.TimestampRolloverStream("timed-metadata");r.adtsStream=new Ma;r.h264Stream=new as;r.captionStream=new Ua.CaptionStream;r.coalesceStream=new cs(e,r.metadataStream);r.headOfPipeline=r.packetStream;r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream);r.elementaryStream.pipe(r.videoTimestampRolloverStream).pipe(r.h264Stream);r.elementaryStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream);r.elementaryStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream);r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream);r.elementaryStream.on("data",(function(a){var s;if(a.type==="metadata"){s=a.tracks.length;while(s--){if(!i&&a.tracks[s].type==="video"){i=a.tracks[s];i.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}else if(!n&&a.tracks[s].type==="audio"){n=a.tracks[s];n.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}}if(i&&!r.videoSegmentStream){r.coalesceStream.numberOfTracks++;r.videoSegmentStream=new ls(i,e);r.videoSegmentStream.on("timelineStartInfo",(function(e){if(n){n.timelineStartInfo=e;r.audioSegmentStream.setEarliestDts(e.dts)}}));r.videoSegmentStream.on("processedGopsInfo",t.trigger.bind(t,"gopInfo"));r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){if(n){r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}}));r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)}if(n&&!r.audioSegmentStream){r.coalesceStream.numberOfTracks++;r.audioSegmentStream=new fs(n,e);r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)}}}));r.coalesceStream.on("data",this.trigger.bind(this,"data"));r.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e;if(n){n.timelineStartInfo.dts=undefined;n.timelineStartInfo.pts=undefined;Kn.clearDtsInfo(n);n.timelineStartInfo.baseMediaDecodeTime=e;if(t.audioTimestampRolloverStream){t.audioTimestampRolloverStream.discontinuity()}}if(i){if(t.videoSegmentStream){t.videoSegmentStream.gopCache_=[];t.videoTimestampRolloverStream.discontinuity()}i.timelineStartInfo.dts=undefined;i.timelineStartInfo.pts=undefined;Kn.clearDtsInfo(i);t.captionStream.reset();i.timelineStartInfo.baseMediaDecodeTime=e}if(t.timedMetadataTimestampRolloverStream){t.timedMetadataTimestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(e){if(n){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)}};this.alignGopsWith=function(e){if(i&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)}};this.push=function(e){if(r){var t=hs(e);if(t&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!t&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}r=false}this.transmuxPipeline_.headOfPipeline.push(e)};this.flush=function(){r=true;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};ds.prototype=new Bn;var vs={Transmuxer:ds,VideoSegmentStream:ls,AudioSegmentStream:fs,AUDIO_PROPERTIES:ss,VIDEO_PROPERTIES:os};var gs,ys,_s=Ki.parseType,bs=function(e){return new Date(e*1e3-20828448e5)},Ts=function(e){return{isLeading:(e[0]&12)>>>2,dependsOn:e[0]&3,isDependedOn:(e[1]&192)>>>6,hasRedundancy:(e[1]&48)>>>4,paddingValue:(e[1]&14)>>>1,isNonSyncSample:e[1]&1,degradationPriority:e[2]<<8|e[3]}},Ss=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[],i,n;for(i=0;i+4<e.length;i+=n){n=t.getUint32(i);i+=4;if(n<=0){r.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(e[i]&31){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[i]&31);break}}return r},ws={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:gs(e.subarray(78,e.byteLength))}},avcC:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:e[4]&3,sps:[],pps:[]},i=e[5]&31,n,a,s,o;s=6;for(o=0;o<i;o++){a=t.getUint16(s);s+=2;r.sps.push(new Uint8Array(e.subarray(s,s+a)));s+=a}n=e[s];s++;for(o=0;o<n;o++){a=t.getUint16(s);s+=2;r.pps.push(new Uint8Array(e.subarray(s,s+a)));s+=a}return r},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:e[8]&31,decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(e[26]&7)<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={majorBrand:_s(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;while(i<e.byteLength){r.compatibleBrands.push(_s(e.subarray(i,i+4)));i+=4}return r},dinf:function(e){return{boxes:gs(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:gs(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:_s(e.subarray(8,12)),name:""},i=8;for(i=24;i<e.byteLength;i++){if(e[i]===0){i++;break}r.name+=String.fromCharCode(e[i])}r.name=decodeURIComponent(escape(r.name));return r},mdat:function(e){return{byteLength:e.byteLength,nals:Ss(e)}},mdhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};if(n.version===1){r+=4;n.creationTime=bs(t.getUint32(r));r+=8;n.modificationTime=bs(t.getUint32(r));r+=4;n.timescale=t.getUint32(r);r+=8;n.duration=t.getUint32(r)}else{n.creationTime=bs(t.getUint32(r));r+=4;n.modificationTime=bs(t.getUint32(r));r+=4;n.timescale=t.getUint32(r);r+=4;n.duration=t.getUint32(r)}r+=4;i=t.getUint16(r);n.language+=String.fromCharCode((i>>10)+96);n.language+=String.fromCharCode(((i&992)>>5)+96);n.language+=String.fromCharCode((i&31)+96);return n},mdia:function(e){return{boxes:gs(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:gs(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};if(e.byteLength>28){r.streamDescriptor=gs(e.subarray(28))[0]}return r},moof:function(e){return{boxes:gs(e)}},moov:function(e){return{boxes:gs(e)}},mvex:function(e){return{boxes:gs(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};if(i.version===1){r+=4;i.creationTime=bs(t.getUint32(r));r+=8;i.modificationTime=bs(t.getUint32(r));r+=4;i.timescale=t.getUint32(r);r+=8;i.duration=t.getUint32(r)}else{i.creationTime=bs(t.getUint32(r));r+=4;i.modificationTime=bs(t.getUint32(r));r+=4;i.timescale=t.getUint32(r);r+=4;i.duration=t.getUint32(r)}r+=4;i.rate=t.getUint16(r)+t.getUint16(r+2)/16;r+=4;i.volume=t.getUint8(r)+t.getUint8(r+1)/8;r+=2;r+=2;r+=2*4;i.matrix=new Uint32Array(e.subarray(r,r+9*4));r+=9*4;r+=6*4;i.nextTrackId=t.getUint32(r);return i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r;for(r=4;r<e.byteLength;r++){t.samples.push({dependsOn:(e[r]&48)>>4,isDependedOn:(e[r]&12)>>2,hasRedundancy:e[r]&3})}return t},sidx:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8),earliestPresentationTime:t.getUint32(12),firstOffset:t.getUint32(16)},i=t.getUint16(22),n;for(n=24;i;n+=12,i--){r.references.push({referenceType:(e[n]&128)>>>7,referencedSize:t.getUint32(n)&2147483647,subsegmentDuration:t.getUint32(n+4),startsWithSap:!!(e[n+8]&128),sapType:(e[n+8]&112)>>>4,sapDeltaTime:t.getUint32(n+8)&268435455})}return r},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:gs(e)}},stco:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=t.getUint32(4),n;for(n=8;i;n+=4,i--){r.chunkOffsets.push(t.getUint32(n))}return r},stsc:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=t.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]},n;for(n=8;r;n+=12,r--){i.sampleToChunks.push({firstChunk:t.getUint32(n),samplesPerChunk:t.getUint32(n+4),sampleDescriptionIndex:t.getUint32(n+8)})}return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:gs(e.subarray(8))}},stsz:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:t.getUint32(4),entries:[]},i;for(i=12;i<e.byteLength;i+=4){r.entries.push(t.getUint32(i))}return r},stts:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=t.getUint32(4),n;for(n=8;i;n+=8,i--){r.timeToSamples.push({sampleCount:t.getUint32(n),sampleDelta:t.getUint32(n+4)})}return r},styp:function(e){return ws.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};if(t.version===1){t.baseMediaDecodeTime*=Math.pow(2,32);t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]}return t},tfhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},i=r.flags[2]&1,n=r.flags[2]&2,a=r.flags[2]&8,s=r.flags[2]&16,o=r.flags[2]&32,u=r.flags[0]&65536,l=r.flags[0]&131072,f;f=8;if(i){f+=4;r.baseDataOffset=t.getUint32(12);f+=4}if(n){r.sampleDescriptionIndex=t.getUint32(f);f+=4}if(a){r.defaultSampleDuration=t.getUint32(f);f+=4}if(s){r.defaultSampleSize=t.getUint32(f);f+=4}if(o){r.defaultSampleFlags=t.getUint32(f)}if(u){r.durationIsEmpty=true}if(!i&&l){r.baseDataOffsetIsMoof=true}return r},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};if(i.version===1){r+=4;i.creationTime=bs(t.getUint32(r));r+=8;i.modificationTime=bs(t.getUint32(r));r+=4;i.trackId=t.getUint32(r);r+=4;r+=8;i.duration=t.getUint32(r)}else{i.creationTime=bs(t.getUint32(r));r+=4;i.modificationTime=bs(t.getUint32(r));r+=4;i.trackId=t.getUint32(r);r+=4;r+=4;i.duration=t.getUint32(r)}r+=4;r+=2*4;i.layer=t.getUint16(r);r+=2;i.alternateGroup=t.getUint16(r);r+=2;i.volume=t.getUint8(r)+t.getUint8(r+1)/8;r+=2;r+=2;i.matrix=new Uint32Array(e.subarray(r,r+9*4));r+=9*4;i.width=t.getUint16(r)+t.getUint16(r+2)/16;r+=4;i.height=t.getUint16(r)+t.getUint16(r+2)/16;return i},traf:function(e){return{boxes:gs(e)}},trak:function(e){return{boxes:gs(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:e[20]&3,sampleIsDependedOn:(e[21]&192)>>6,sampleHasRedundancy:(e[21]&48)>>4,samplePaddingValue:(e[21]&14)>>1,sampleIsDifferenceSample:!!(e[21]&1),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=t.flags[2]&1,n=t.flags[2]&4,a=t.flags[1]&1,s=t.flags[1]&2,o=t.flags[1]&4,u=t.flags[1]&8,l=r.getUint32(4),f=8,d;if(i){t.dataOffset=r.getInt32(f);f+=4}if(n&&l){d={flags:Ts(e.subarray(f,f+4))};f+=4;if(a){d.duration=r.getUint32(f);f+=4}if(s){d.size=r.getUint32(f);f+=4}if(u){d.compositionTimeOffset=r.getUint32(f);f+=4}t.samples.push(d);l--}while(l--){d={};if(a){d.duration=r.getUint32(f);f+=4}if(s){d.size=r.getUint32(f);f+=4}if(o){d.flags=Ts(e.subarray(f,f+4));f+=4}if(u){d.compositionTimeOffset=r.getUint32(f);f+=4}t.samples.push(d)}return t},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};gs=function(e){var t=0,r=[],i,n,a,s,o;var u=new ArrayBuffer(e.length);var l=new Uint8Array(u);for(var f=0;f<e.length;++f){l[f]=e[f]}i=new DataView(u);while(t<e.byteLength){n=i.getUint32(t);a=_s(e.subarray(t+4,t+8));s=n>1?t+n:e.byteLength;o=(ws[a]||function(e){return{data:e}})(e.subarray(t+8,s));o.size=n;o.type=a;r.push(o);t=s}return r};ys=function(e,t){var r;t=t||0;r=new Array(t*2+1).join(" ");return e.map((function(e,i){return r+e.type+"\n"+Object.keys(e).filter((function(e){return e!=="type"&&e!=="boxes"})).map((function(t){var i=r+"  "+t+": ",n=e[t];if(n instanceof Uint8Array||n instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);if(!a){return i+"<>"}if(a.length===1){return i+"<"+a.join("").slice(1)+">"}return i+"<\n"+a.map((function(e){return r+"  "+e})).join("\n")+"\n"+r+"  >"}return i+JSON.stringify(n,null,2).split("\n").map((function(e,t){if(t===0){return e}return r+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+ys(e.boxes,t+1):"")})).join("\n")};var ks={inspect:gs,textify:ys,parseTfdt:ws.tfdt,parseHdlr:ws.hdlr,parseTfhd:ws.tfhd,parseTrun:ws.trun};var Es=ia.discardEmulationPreventionBytes;var Cs=da.CaptionStream;var As=function(e,t){var r=e;for(var i=0;i<t.length;i++){var n=t[i];if(r<n.size){return n}r-=n.size}return null};var Os=function(e,t,r){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=[],a,s,o,u;for(s=0;s+4<e.length;s+=o){o=i.getUint32(s);s+=4;if(o<=0){continue}switch(e[s]&31){case 6:var l=e.subarray(s+1,s+1+o);var f=As(s,t);a={nalUnitType:"sei_rbsp",size:o,data:l,escapedRBSP:Es(l),trackId:r};if(f){a.pts=f.pts;a.dts=f.dts;u=f}else{a.pts=u.pts;a.dts=u.dts}n.push(a);break;default:break}}return n};var Ps=function(e,t,r){var i=t;var n=r.defaultSampleDuration||0;var a=r.defaultSampleSize||0;var s=r.trackId;var o=[];e.forEach((function(e){var t=ks.parseTrun(e);var r=t.samples;r.forEach((function(e){if(e.duration===undefined){e.duration=n}if(e.size===undefined){e.size=a}e.trackId=s;e.dts=i;if(e.compositionTimeOffset===undefined){e.compositionTimeOffset=0}e.pts=i+e.compositionTimeOffset;i+=e.duration}));o=o.concat(r)}));return o};var Is=function(e,t){var r=Ki.findBox(e,["moof","traf"]);var i=Ki.findBox(e,["mdat"]);var n={};var a=[];i.forEach((function(e,t){var i=r[t];a.push({mdat:e,traf:i})}));a.forEach((function(e){var r=e.mdat;var i=e.traf;var a=Ki.findBox(i,["tfhd"]);var s=ks.parseTfhd(a[0]);var o=s.trackId;var u=Ki.findBox(i,["tfdt"]);var l=u.length>0?ks.parseTfdt(u[0]).baseMediaDecodeTime:0;var f=Ki.findBox(i,["trun"]);var d;var c;if(t===o&&f.length>0){d=Ps(f,l,s);c=Os(r,d,o);if(!n[o]){n[o]=[]}n[o]=n[o].concat(c)}}));return n};var Ls=function(e,t,r){var i;if(!t){return null}i=Is(e,t);return{seiNals:i[t],timescale:r}};var Ds=function(){var e=false;var t;var r;var i;var n;var a;this.isInitialized=function(){return e};this.init=function(){t=new Cs;e=true;t.on("data",(function(e){e.startTime=e.startPts/n;e.endTime=e.endPts/n;a.captions.push(e);a.captionStreams[e.stream]=true}))};this.isNewInit=function(e,t){if(e&&e.length===0||t&&typeof t==="object"&&Object.keys(t).length===0){return false}return i!==e[0]||n!==t[i]};this.parse=function(e,t,s){var o;if(!this.isInitialized()){return null}else if(!t||!s){return null}else if(this.isNewInit(t,s)){i=t[0];n=s[i]}else if(!i||!n){r.push(e);return null}while(r.length>0){var u=r.shift();this.parse(u,t,s)}o=Ls(e,i,n);if(o===null||!o.seiNals){return null}this.pushNals(o.seiNals);this.flushStream();return a};this.pushNals=function(e){if(!this.isInitialized()||!e||e.length===0){return null}e.forEach((function(e){t.push(e)}))};this.flushStream=function(){if(!this.isInitialized()){return null}t.flush()};this.clearParsedCaptions=function(){a.captions=[];a.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized()){return null}t.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){r=[];i=null;n=null;if(!a){a={captions:[],captionStreams:{}}}else{this.clearParsedCaptions()}this.resetCaptionStream()};this.reset()};var Us=Ds;var xs={generator:Rn,probe:Ki,Transmuxer:vs.Transmuxer,AudioSegmentStream:vs.AudioSegmentStream,VideoSegmentStream:vs.VideoSegmentStream,CaptionParser:Us};var Rs=xs.CaptionParser;var Ms=function(e){var t=e[1]&31;t<<=8;t|=e[2];return t};var Bs=function(e){return!!(e[1]&64)};var Ns=function(e){var t=0;if((e[3]&48)>>>4>1){t+=e[4]+1}return t};var js=function(e,t){var r=Ms(e);if(r===0){return"pat"}else if(r===t){return"pmt"}else if(t){return"pes"}return null};var Fs=function(e){var t=Bs(e);var r=4+Ns(e);if(t){r+=e[r]+1}return(e[r+10]&31)<<8|e[r+11]};var Vs=function(e){var t={};var r=Bs(e);var i=4+Ns(e);if(r){i+=e[i]+1}if(!(e[i+5]&1)){return}var n,a,s;n=(e[i+1]&15)<<8|e[i+2];a=3+n-4;s=(e[i+10]&15)<<8|e[i+11];var o=12+s;while(o<a){var u=i+o;t[(e[u+1]&31)<<8|e[u+2]]=e[u];o+=((e[u+3]&15)<<8|e[u+4])+5}return t};var Hs=function(e,t){var r=Ms(e);var i=t[r];switch(i){case ca.H264_STREAM_TYPE:return"video";case ca.ADTS_STREAM_TYPE:return"audio";case ca.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}};var qs=function(e){var t=Bs(e);if(!t){return null}var r=4+Ns(e);if(r>=e.byteLength){return null}var i=null;var n;n=e[r+7];if(n&192){i={};i.pts=(e[r+9]&14)<<27|(e[r+10]&255)<<20|(e[r+11]&254)<<12|(e[r+12]&255)<<5|(e[r+13]&254)>>>3;i.pts*=4;i.pts+=(e[r+13]&6)>>>1;i.dts=i.pts;if(n&64){i.dts=(e[r+14]&14)<<27|(e[r+15]&255)<<20|(e[r+16]&254)<<12|(e[r+17]&255)<<5|(e[r+18]&254)>>>3;i.dts*=4;i.dts+=(e[r+18]&6)>>>1}}return i};var Gs=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var Ws=function(e){var t=4+Ns(e);var r=e.subarray(t);var i=0;var n=0;var a=false;var s;for(;n<r.byteLength-3;n++){if(r[n+2]===1){i=n+5;break}}while(i<r.byteLength){switch(r[i]){case 0:if(r[i-1]!==0){i+=2;break}else if(r[i-2]!==0){i++;break}if(n+3!==i-2){s=Gs(r[n+3]&31);if(s==="slice_layer_without_partitioning_rbsp_idr"){a=true}}do{i++}while(r[i]!==1&&i<r.length);n=i-2;i+=3;break;case 1:if(r[i-1]!==0||r[i-2]!==0){i+=3;break}s=Gs(r[n+3]&31);if(s==="slice_layer_without_partitioning_rbsp_idr"){a=true}n=i-2;i+=3;break;default:i+=3;break}}r=r.subarray(n);i-=n;n=0;if(r&&r.byteLength>3){s=Gs(r[n+3]&31);if(s==="slice_layer_without_partitioning_rbsp_idr"){a=true}}return a};var zs={parseType:js,parsePat:Fs,parsePmt:Vs,parsePayloadUnitStartIndicator:Bs,parsePesType:Hs,parsePesTime:qs,videoPacketContainsKeyFrame:Ws};var $s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var Xs=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};var Ys=function(e,t,r){var i,n="";for(i=t;i<r;i++){n+="%"+("00"+e[i].toString(16)).slice(-2)}return n};var Ks=function(e,t,r){return unescape(Ys(e,t,r))};var Qs=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],n=(i&16)>>4;if(n){return r+20}return r+10};var Js=function(e,t){var r=(e[t+5]&224)>>5,i=e[t+4]<<3,n=e[t+3]&3<<11;return n|i|r};var Zs=function(e,t){if(e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(e[t]&255===255&&(e[t+1]&240)===240){return"audio"}return null};var eo=function(e){var t=0;while(t+5<e.length){if(e[t]!==255||(e[t+1]&246)!==240){t++;continue}return $s[(e[t+2]&60)>>>2]}return null};var to=function(e){var t,r,i,n;t=10;if(e[5]&64){t+=4;t+=Xs(e.subarray(10,14))}do{r=Xs(e.subarray(t+4,t+8));if(r<1){return null}n=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]);if(n==="PRIV"){i=e.subarray(t+10,t+r+10);for(var a=0;a<i.byteLength;a++){if(i[a]===0){var s=Ks(i,0,a);if(s==="com.apple.streaming.transportStreamTimestamp"){var o=i.subarray(a+1);var u=(o[3]&1)<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;u*=4;u+=o[7]&3;return u}break}}}t+=10;t+=r}while(t<e.byteLength);return null};var ro={parseId3TagSize:Qs,parseAdtsSize:Js,parseType:Zs,parseSampleRate:eo,parseAacTimestamp:to};var io=ga.handleRollover;var no={};no.ts=zs;no.aac=ro;var ao=9e4,so=188,oo=71;var uo=function(e){if(e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)){return true}return false};var lo=function(e,t){var r=0,i=so,n,a;while(i<e.byteLength){if(e[r]===oo&&e[i]===oo){n=e.subarray(r,i);a=no.ts.parseType(n,t.pid);switch(a){case"pat":if(!t.pid){t.pid=no.ts.parsePat(n)}break;case"pmt":if(!t.table){t.table=no.ts.parsePmt(n)}break;default:break}if(t.pid&&t.table){return}r+=so;i+=so;continue}r++;i++}};var fo=function(e,t,r){var i=0,n=so,a,s,o,u,l;var f=false;while(n<e.byteLength){if(e[i]===oo&&e[n]===oo){a=e.subarray(i,n);s=no.ts.parseType(a,t.pid);switch(s){case"pes":o=no.ts.parsePesType(a,t.table);u=no.ts.parsePayloadUnitStartIndicator(a);if(o==="audio"&&u){l=no.ts.parsePesTime(a);if(l){l.type="audio";r.audio.push(l);f=true}}break;default:break}if(f){break}i+=so;n+=so;continue}i++;n++}n=e.byteLength;i=n-so;f=false;while(i>=0){if(e[i]===oo&&e[n]===oo){a=e.subarray(i,n);s=no.ts.parseType(a,t.pid);switch(s){case"pes":o=no.ts.parsePesType(a,t.table);u=no.ts.parsePayloadUnitStartIndicator(a);if(o==="audio"&&u){l=no.ts.parsePesTime(a);if(l){l.type="audio";r.audio.push(l);f=true}}break;default:break}if(f){break}i-=so;n-=so;continue}i--;n--}};var co=function(e,t,r){var i=0,n=so,a,s,o,u,l,f,d,c;var h=false;var p={data:[],size:0};while(n<e.byteLength){if(e[i]===oo&&e[n]===oo){a=e.subarray(i,n);s=no.ts.parseType(a,t.pid);switch(s){case"pes":o=no.ts.parsePesType(a,t.table);u=no.ts.parsePayloadUnitStartIndicator(a);if(o==="video"){if(u&&!h){l=no.ts.parsePesTime(a);if(l){l.type="video";r.video.push(l);h=true}}if(!r.firstKeyFrame){if(u){if(p.size!==0){f=new Uint8Array(p.size);d=0;while(p.data.length){c=p.data.shift();f.set(c,d);d+=c.byteLength}if(no.ts.videoPacketContainsKeyFrame(f)){r.firstKeyFrame=no.ts.parsePesTime(f);r.firstKeyFrame.type="video"}p.size=0}}p.data.push(a);p.size+=a.byteLength}}break;default:break}if(h&&r.firstKeyFrame){break}i+=so;n+=so;continue}i++;n++}n=e.byteLength;i=n-so;h=false;while(i>=0){if(e[i]===oo&&e[n]===oo){a=e.subarray(i,n);s=no.ts.parseType(a,t.pid);switch(s){case"pes":o=no.ts.parsePesType(a,t.table);u=no.ts.parsePayloadUnitStartIndicator(a);if(o==="video"&&u){l=no.ts.parsePesTime(a);if(l){l.type="video";r.video.push(l);h=true}}break;default:break}if(h){break}i-=so;n-=so;continue}i--;n--}};var ho=function(e,t){if(e.audio&&e.audio.length){var r=t;if(typeof r==="undefined"){r=e.audio[0].dts}e.audio.forEach((function(e){e.dts=io(e.dts,r);e.pts=io(e.pts,r);e.dtsTime=e.dts/ao;e.ptsTime=e.pts/ao}))}if(e.video&&e.video.length){var i=t;if(typeof i==="undefined"){i=e.video[0].dts}e.video.forEach((function(e){e.dts=io(e.dts,i);e.pts=io(e.pts,i);e.dtsTime=e.dts/ao;e.ptsTime=e.pts/ao}));if(e.firstKeyFrame){var n=e.firstKeyFrame;n.dts=io(n.dts,i);n.pts=io(n.pts,i);n.dtsTime=n.dts/ao;n.ptsTime=n.dts/ao}}};var po=function(e){var t=false,r=0,i=null,n=null,a=0,s=0,o;while(e.length-s>=3){var u=no.aac.parseType(e,s);switch(u){case"timed-metadata":if(e.length-s<10){t=true;break}a=no.aac.parseId3TagSize(e,s);if(a>e.length){t=true;break}if(n===null){o=e.subarray(s,s+a);n=no.aac.parseAacTimestamp(o)}s+=a;break;case"audio":if(e.length-s<7){t=true;break}a=no.aac.parseAdtsSize(e,s);if(a>e.length){t=true;break}if(i===null){o=e.subarray(s,s+a);i=no.aac.parseSampleRate(o)}r++;s+=a;break;default:s++;break}if(t){return null}}if(i===null||n===null){return null}var l=ao/i;var f={audio:[{type:"audio",dts:n,pts:n},{type:"audio",dts:n+r*1024*l,pts:n+r*1024*l}]};return f};var mo=function(e){var t={pid:null,table:null};var r={};lo(e,t);for(var i in t.table){if(t.table.hasOwnProperty(i)){var n=t.table[i];switch(n){case ca.H264_STREAM_TYPE:r.video=[];co(e,t,r);if(r.video.length===0){delete r.video}break;case ca.ADTS_STREAM_TYPE:r.audio=[];fo(e,t,r);if(r.audio.length===0){delete r.audio}break;default:break}}}return r};var vo=function(e,t){var r=uo(e);var i;if(r){i=po(e)}else{i=mo(e)}if(!i||!i.audio&&!i.video){return null}ho(i,t);return i};var go={inspect:vo};function yo(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var _o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var bo=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var To=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t};var So=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e};var wo=function e(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]];var r=t[0];var i=t[1];var n=r[4];var a=i[4];var s=void 0;var o=void 0;var u=void 0;var l=[];var f=[];var d=void 0;var c=void 0;var h=void 0;var p=void 0;var m=void 0;var v=void 0;for(s=0;s<256;s++){f[(l[s]=s<<1^(s>>7)*283)^s]=s}for(o=u=0;!n[o];o^=d||1,u=f[u]||1){p=u^u<<1^u<<2^u<<3^u<<4;p=p>>8^p&255^99;n[o]=p;a[p]=o;h=l[c=l[d=l[o]]];v=h*16843009^c*65537^d*257^o*16843008;m=l[p]*257^p*16843008;for(s=0;s<4;s++){r[s][o]=m=m<<24^m>>>8;i[s][p]=v=v<<24^v>>>8}}for(s=0;s<5;s++){r[s]=r[s].slice(0);i[s]=i[s].slice(0)}return t};var ko=null;var Eo=function(){function e(t){_o(this,e);if(!ko){ko=wo()}this._tables=[[ko[0][0].slice(),ko[0][1].slice(),ko[0][2].slice(),ko[0][3].slice(),ko[0][4].slice()],[ko[1][0].slice(),ko[1][1].slice(),ko[1][2].slice(),ko[1][3].slice(),ko[1][4].slice()]];var r=void 0;var i=void 0;var n=void 0;var a=void 0;var s=void 0;var o=this._tables[0][4];var u=this._tables[1];var l=t.length;var f=1;if(l!==4&&l!==6&&l!==8){throw new Error("Invalid aes key size")}a=t.slice(0);s=[];this._key=[a,s];for(r=l;r<4*l+28;r++){n=a[r-1];if(r%l===0||l===8&&r%l===4){n=o[n>>>24]<<24^o[n>>16&255]<<16^o[n>>8&255]<<8^o[n&255];if(r%l===0){n=n<<8^n>>>24^f<<24;f=f<<1^(f>>7)*283}}a[r]=a[r-l]^n}for(i=0;r;i++,r--){n=a[i&3?r:r-4];if(r<=4||i<4){s[i]=n}else{s[i]=u[0][o[n>>>24]]^u[1][o[n>>16&255]]^u[2][o[n>>8&255]]^u[3][o[n&255]]}}}e.prototype.decrypt=function e(t,r,i,n,a,s){var o=this._key[1];var u=t^o[0];var l=n^o[1];var f=i^o[2];var d=r^o[3];var c=void 0;var h=void 0;var p=void 0;var m=o.length/4-2;var v=void 0;var g=4;var y=this._tables[1];var _=y[0];var b=y[1];var T=y[2];var S=y[3];var w=y[4];for(v=0;v<m;v++){c=_[u>>>24]^b[l>>16&255]^T[f>>8&255]^S[d&255]^o[g];h=_[l>>>24]^b[f>>16&255]^T[d>>8&255]^S[u&255]^o[g+1];p=_[f>>>24]^b[d>>16&255]^T[u>>8&255]^S[l&255]^o[g+2];d=_[d>>>24]^b[u>>16&255]^T[l>>8&255]^S[f&255]^o[g+3];g+=4;u=c;l=h;f=p}for(v=0;v<4;v++){a[(3&-v)+s]=w[u>>>24]<<24^w[l>>16&255]<<16^w[f>>8&255]<<8^w[d&255]^o[g++];c=u;u=l;l=f;f=d;d=c}};return e}();var Co=function(){function e(){_o(this,e);this.listeners={}}e.prototype.on=function e(t,r){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(r)};e.prototype.off=function e(t,r){if(!this.listeners[t]){return false}var i=this.listeners[t].indexOf(r);this.listeners[t].splice(i,1);return i>-1};e.prototype.trigger=function e(t){var r=this.listeners[t];if(!r){return}if(arguments.length===2){var i=r.length;for(var n=0;n<i;++n){r[n].call(this,arguments[1])}}else{var a=Array.prototype.slice.call(arguments,1);var s=r.length;for(var o=0;o<s;++o){r[o].apply(this,a)}}};e.prototype.dispose=function e(){this.listeners={}};e.prototype.pipe=function e(t){this.on("data",(function(e){t.push(e)}))};return e}();var Ao=function(e){To(t,e);function t(){_o(this,t);var r=So(this,e.call(this,Co));r.jobs=[];r.delay=1;r.timeout_=null;return r}t.prototype.processJob_=function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};t.prototype.push=function e(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return t}(Co);var Oo=function e(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};var Po=function e(t,r,i){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2);var a=new Eo(Array.prototype.slice.call(r));var s=new Uint8Array(t.byteLength);var o=new Int32Array(s.buffer);var u=void 0;var l=void 0;var f=void 0;var d=void 0;var c=void 0;var h=void 0;var p=void 0;var m=void 0;var v=void 0;u=i[0];l=i[1];f=i[2];d=i[3];for(v=0;v<n.length;v+=4){c=Oo(n[v]);h=Oo(n[v+1]);p=Oo(n[v+2]);m=Oo(n[v+3]);a.decrypt(c,h,p,m,o,v);o[v]=Oo(o[v]^u);o[v+1]=Oo(o[v+1]^l);o[v+2]=Oo(o[v+2]^f);o[v+3]=Oo(o[v+3]^d);u=c;l=h;f=p;d=m}return s};var Io=function(){function e(t,r,i,n){_o(this,e);var a=e.STEP;var s=new Int32Array(t.buffer);var o=new Uint8Array(t.byteLength);var u=0;this.asyncStream_=new Ao;this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),r,i,o));for(u=a;u<s.length;u+=a){i=new Uint32Array([Oo(s[u-4]),Oo(s[u-3]),Oo(s[u-2]),Oo(s[u-1])]);this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),r,i,o))}this.asyncStream_.push((function(){n(null,yo(o))}))}e.prototype.decryptChunk_=function e(t,r,i,n){return function(){var e=Po(t,r,i);n.set(e,t.byteOffset)}};bo(e,null,[{key:"STEP",get:function e(){return 32e3}}]);return e}();
/**
             * @license
             * Video.js 7.2.3 <http://videojs.com/>
             * Copyright Brightcove, Inc. <https://www.brightcove.com/>
             * Available under Apache License Version 2.0
             * <https://github.com/videojs/video.js/blob/master/LICENSE>
             *
             * Includes vtt.js <https://github.com/mozilla/vtt.js>
             * Available under Apache License Version 2.0
             * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
             */var Lo="7.2.3";var Do=void 0;var Uo="info";var xo=[];var Ro=function e(t,r){var i=Do.levels[Uo];var n=new RegExp("^("+i+")$");if(t!=="log"){r.unshift(t.toUpperCase()+":")}if(xo){xo.push([].concat(r))}r.unshift("VIDEOJS:");if(!f.console){return}var a=f.console[t];if(!a&&t==="debug"){a=f.console.info||f.console.log}if(!a||!i||!n.test(t)){return}a[Array.isArray(r)?"apply":"call"](f.console,r)};Do=function e(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++){r[i]=arguments[i]}Ro("log",r)};Do.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:Uo};Do.level=function(e){if(typeof e==="string"){if(!Do.levels.hasOwnProperty(e)){throw new Error('"'+e+'" in not a valid log level')}Uo=e}return Uo};Do.history=function(){return xo?[].concat(xo):[]};Do.history.clear=function(){if(xo){xo.length=0}};Do.history.disable=function(){if(xo!==null){xo.length=0;xo=null}};Do.history.enable=function(){if(xo===null){xo=[]}};Do.error=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}return Ro("error",t)};Do.warn=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}return Ro("warn",t)};Do.debug=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}return Ro("debug",t)};var Mo=Do;var Bo=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var No=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var jo=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t};var Fo=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e};var Vo=function(e,t){e.raw=t;return e};var Ho=Object.prototype.toString;var qo=function e(t){return $o(t)?Object.keys(t):[]};function Go(e,t){qo(e).forEach((function(r){return t(e[r],r)}))}function Wo(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return qo(e).reduce((function(r,i){return t(r,e[i],i)}),r)}function zo(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++){r[i-1]=arguments[i]}if(Object.assign){return Object.assign.apply(Object,[e].concat(r))}r.forEach((function(t){if(!t){return}Go(t,(function(t,r){e[r]=t}))}));return e}function $o(e){return!!e&&(typeof e==="undefined"?"undefined":Bo(e))==="object"}function Xo(e){return $o(e)&&Ho.call(e)==="[object Object]"&&e.constructor===Object}function Yo(e,t){if(!e||!t){return""}if(typeof f.getComputedStyle==="function"){var r=f.getComputedStyle(e);return r?r[t]:""}return""}var Ko=Vo(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function Qo(e){return typeof e==="string"&&/\S/.test(e)}function Jo(e){if(/\s/.test(e)){throw new Error("class has illegal whitespace characters")}}function Zo(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function eu(){return v===f.document}function tu(e){return $o(e)&&e.nodeType===1}function ru(){try{return f.parent!==f.self}catch(e){return true}}function iu(e){return function(t,r){if(!Qo(t)){return v[e](null)}if(Qo(r)){r=v.querySelector(r)}var i=tu(r)?r:v;return i[e]&&i[e](t)}}function nu(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=arguments[3];var n=v.createElement(e);Object.getOwnPropertyNames(t).forEach((function(e){var r=t[e];if(e.indexOf("aria-")!==-1||e==="role"||e==="type"){Mo.warn(y(Ko,e,r));n.setAttribute(e,r)}else if(e==="textContent"){au(n,r)}else{n[e]=r}}));Object.getOwnPropertyNames(r).forEach((function(e){n.setAttribute(e,r[e])}));if(i){ku(n,i)}return n}function au(e,t){if(typeof e.textContent==="undefined"){e.innerText=t}else{e.textContent=t}return e}function su(e,t){if(t.firstChild){t.insertBefore(e,t.firstChild)}else{t.appendChild(e)}}function ou(e,t){Jo(t);if(e.classList){return e.classList.contains(t)}return Zo(t).test(e.className)}function uu(e,t){if(e.classList){e.classList.add(t)}else if(!ou(e,t)){e.className=(e.className+" "+t).trim()}return e}function lu(e,t){if(e.classList){e.classList.remove(t)}else{Jo(t);e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")}return e}function fu(e,t,r){var i=ou(e,t);if(typeof r==="function"){r=r(e,t)}if(typeof r!=="boolean"){r=!i}if(r===i){return}if(r){uu(e,t)}else{lu(e,t)}return e}function du(e,t){Object.getOwnPropertyNames(t).forEach((function(r){var i=t[r];if(i===null||typeof i==="undefined"||i===false){e.removeAttribute(r)}else{e.setAttribute(r,i===true?"":i)}}))}function cu(e){var t={};var r=","+"autoplay,controls,playsinline,loop,muted,default,defaultMuted"+",";if(e&&e.attributes&&e.attributes.length>0){var i=e.attributes;for(var n=i.length-1;n>=0;n--){var a=i[n].name;var s=i[n].value;if(typeof e[a]==="boolean"||r.indexOf(","+a+",")!==-1){s=s!==null?true:false}t[a]=s}}return t}function hu(e,t){return e.getAttribute(t)}function pu(e,t,r){e.setAttribute(t,r)}function mu(e,t){e.removeAttribute(t)}function vu(){v.body.focus();v.onselectstart=function(){return false}}function gu(){v.onselectstart=function(){return true}}function yu(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect();var r={};["bottom","height","left","right","top","width"].forEach((function(e){if(t[e]!==undefined){r[e]=t[e]}}));if(!r.height){r.height=parseFloat(Yo(e,"height"))}if(!r.width){r.width=parseFloat(Yo(e,"width"))}return r}}function _u(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode){t=e.getBoundingClientRect()}if(!t){return{left:0,top:0}}var r=v.documentElement;var i=v.body;var n=r.clientLeft||i.clientLeft||0;var a=f.pageXOffset||i.scrollLeft;var s=t.left+a-n;var o=r.clientTop||i.clientTop||0;var u=f.pageYOffset||i.scrollTop;var l=t.top+u-o;return{left:Math.round(s),top:Math.round(l)}}function bu(e,t){var r={};var i=_u(e);var n=e.offsetWidth;var a=e.offsetHeight;var s=i.top;var o=i.left;var u=t.pageY;var l=t.pageX;if(t.changedTouches){l=t.changedTouches[0].pageX;u=t.changedTouches[0].pageY}r.y=Math.max(0,Math.min(1,(s-u+a)/a));r.x=Math.max(0,Math.min(1,(l-o)/n));return r}function Tu(e){return $o(e)&&e.nodeType===3}function Su(e){while(e.firstChild){e.removeChild(e.firstChild)}return e}function wu(e){if(typeof e==="function"){e=e()}return(Array.isArray(e)?e:[e]).map((function(e){if(typeof e==="function"){e=e()}if(tu(e)||Tu(e)){return e}if(typeof e==="string"&&/\S/.test(e)){return v.createTextNode(e)}})).filter((function(e){return e}))}function ku(e,t){wu(t).forEach((function(t){return e.appendChild(t)}));return e}function Eu(e,t){return ku(Su(e),t)}function Cu(e){if(e.button===undefined&&e.buttons===undefined){return true}if(e.button===0&&e.buttons===undefined){return true}if(e.button!==0||e.buttons!==1){return false}return true}var Au=iu("querySelector");var Ou=iu("querySelectorAll");var Pu=Object.freeze({isReal:eu,isEl:tu,isInFrame:ru,createEl:nu,textContent:au,prependTo:su,hasClass:ou,addClass:uu,removeClass:lu,toggleClass:fu,setAttributes:du,getAttributes:cu,getAttribute:hu,setAttribute:pu,removeAttribute:mu,blockTextSelection:vu,unblockTextSelection:gu,getBoundingClientRect:yu,findPosition:_u,getPointerPosition:bu,isTextNode:Tu,emptyEl:Su,normalizeContent:wu,appendContent:ku,insertContent:Eu,isSingleLeftClick:Cu,$:Au,$$:Ou});var Iu=1;function Lu(){return Iu++}var Du={};var Uu="vdata"+(new Date).getTime();function xu(e){var t=e[Uu];if(!t){t=e[Uu]=Lu()}if(!Du[t]){Du[t]={}}return Du[t]}function Ru(e){var t=e[Uu];if(!t){return false}return!!Object.getOwnPropertyNames(Du[t]).length}function Mu(e){var t=e[Uu];if(!t){return}delete Du[t];try{delete e[Uu]}catch(r){if(e.removeAttribute){e.removeAttribute(Uu)}else{e[Uu]=null}}}function Bu(e,t){var r=xu(e);if(r.handlers[t].length===0){delete r.handlers[t];if(e.removeEventListener){e.removeEventListener(t,r.dispatcher,false)}else if(e.detachEvent){e.detachEvent("on"+t,r.dispatcher)}}if(Object.getOwnPropertyNames(r.handlers).length<=0){delete r.handlers;delete r.dispatcher;delete r.disabled}if(Object.getOwnPropertyNames(r).length===0){Mu(e)}}function Nu(e,t,r,i){r.forEach((function(r){e(t,r,i)}))}function ju(e){function t(){return true}function r(){return false}if(!e||!e.isPropagationStopped){var i=e||f.event;e={};for(var n in i){if(n!=="layerX"&&n!=="layerY"&&n!=="keyLocation"&&n!=="webkitMovementX"&&n!=="webkitMovementY"){if(!(n==="returnValue"&&i.preventDefault)){e[n]=i[n]}}}if(!e.target){e.target=e.srcElement||v}if(!e.relatedTarget){e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement}e.preventDefault=function(){if(i.preventDefault){i.preventDefault()}e.returnValue=false;i.returnValue=false;e.defaultPrevented=true};e.defaultPrevented=false;e.stopPropagation=function(){if(i.stopPropagation){i.stopPropagation()}e.cancelBubble=true;i.cancelBubble=true;e.isPropagationStopped=t};e.isPropagationStopped=r;e.stopImmediatePropagation=function(){if(i.stopImmediatePropagation){i.stopImmediatePropagation()}e.isImmediatePropagationStopped=t;e.stopPropagation()};e.isImmediatePropagationStopped=r;if(e.clientX!==null&&e.clientX!==undefined){var a=v.documentElement;var s=v.body;e.pageX=e.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0);e.pageY=e.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode;if(e.button!==null&&e.button!==undefined){e.button=e.button&1?0:e.button&4?1:e.button&2?2:0}}return e}var Fu=false;(function(){try{var e=Object.defineProperty({},"passive",{get:function e(){Fu=true}});f.addEventListener("test",null,e);f.removeEventListener("test",null,e)}catch(t){}})();var Vu=["touchstart","touchmove"];function Hu(e,t,r){if(Array.isArray(t)){return Nu(Hu,e,t,r)}var i=xu(e);if(!i.handlers){i.handlers={}}if(!i.handlers[t]){i.handlers[t]=[]}if(!r.guid){r.guid=Lu()}i.handlers[t].push(r);if(!i.dispatcher){i.disabled=false;i.dispatcher=function(t,r){if(i.disabled){return}t=ju(t);var n=i.handlers[t.type];if(n){var a=n.slice(0);for(var s=0,o=a.length;s<o;s++){if(t.isImmediatePropagationStopped()){break}else{try{a[s].call(e,t,r)}catch(u){Mo.error(u)}}}}}}if(i.handlers[t].length===1){if(e.addEventListener){var n=false;if(Fu&&Vu.indexOf(t)>-1){n={passive:true}}e.addEventListener(t,i.dispatcher,n)}else if(e.attachEvent){e.attachEvent("on"+t,i.dispatcher)}}}function qu(e,t,r){if(!Ru(e)){return}var i=xu(e);if(!i.handlers){return}if(Array.isArray(t)){return Nu(qu,e,t,r)}var n=function e(t,r){i.handlers[r]=[];Bu(t,r)};if(t===undefined){for(var a in i.handlers){if(Object.prototype.hasOwnProperty.call(i.handlers||{},a)){n(e,a)}}return}var s=i.handlers[t];if(!s){return}if(!r){n(e,t);return}if(r.guid){for(var o=0;o<s.length;o++){if(s[o].guid===r.guid){s.splice(o--,1)}}}Bu(e,t)}function Gu(e,t,r){var i=Ru(e)?xu(e):{};var n=e.parentNode||e.ownerDocument;if(typeof t==="string"){t={type:t,target:e}}else if(!t.target){t.target=e}t=ju(t);if(i.dispatcher){i.dispatcher.call(e,t,r)}if(n&&!t.isPropagationStopped()&&t.bubbles===true){Gu.call(null,n,t,r)}else if(!n&&!t.defaultPrevented){var a=xu(t.target);if(t.target[t.type]){a.disabled=true;if(typeof t.target[t.type]==="function"){t.target[t.type]()}a.disabled=false}}return!t.defaultPrevented}function Wu(e,t,r){if(Array.isArray(t)){return Nu(Wu,e,t,r)}var i=function i(){qu(e,t,i);r.apply(this,arguments)};i.guid=r.guid=r.guid||Lu();Hu(e,t,i)}var zu=Object.freeze({fixEvent:ju,on:Hu,off:qu,trigger:Gu,one:Wu});var $u=false;var Xu=void 0;var Yu=function e(){if(!eu()||Xu.options.autoSetup===false){return}var t=Array.prototype.slice.call(v.getElementsByTagName("video"));var r=Array.prototype.slice.call(v.getElementsByTagName("audio"));var i=Array.prototype.slice.call(v.getElementsByTagName("video-js"));var n=t.concat(r,i);if(n&&n.length>0){for(var a=0,s=n.length;a<s;a++){var o=n[a];if(o&&o.getAttribute){if(o.player===undefined){var u=o.getAttribute("data-setup");if(u!==null){Xu(o)}}}else{Ku(1);break}}}else if(!$u){Ku(1)}};function Ku(e,t){if(t){Xu=t}f.setTimeout(Yu,e)}if(eu()&&v.readyState==="complete"){$u=true}else{Wu(f,"load",(function(){$u=true}))}var Qu=function e(t){var r=v.createElement("style");r.className=t;return r};var Ju=function e(t,r){if(t.styleSheet){t.styleSheet.cssText=r}else{t.textContent=r}};var Zu=function e(t,r,i){if(!r.guid){r.guid=Lu()}var n=function e(){return r.apply(t,arguments)};n.guid=i?i+"_"+r.guid:r.guid;return n};var el=function e(t,r){var i=Date.now();var n=function e(){var n=Date.now();if(n-i>=r){t.apply(undefined,arguments);i=n}};return n};var tl=function e(t,r,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:f;var a=void 0;var s=function e(){n.clearTimeout(a);a=null};var o=function e(){var s=this;var o=arguments;var u=function e(){a=null;u=null;if(!i){t.apply(s,o)}};if(!a&&i){t.apply(s,o)}n.clearTimeout(a);a=n.setTimeout(u,r)};o.cancel=s;return o};var rl=function e(){};rl.prototype.allowedEvents_={};rl.prototype.on=function(e,t){var r=this.addEventListener;this.addEventListener=function(){};Hu(this,e,t);this.addEventListener=r};rl.prototype.addEventListener=rl.prototype.on;rl.prototype.off=function(e,t){qu(this,e,t)};rl.prototype.removeEventListener=rl.prototype.off;rl.prototype.one=function(e,t){var r=this.addEventListener;this.addEventListener=function(){};Wu(this,e,t);this.addEventListener=r};rl.prototype.trigger=function(e){var t=e.type||e;if(typeof e==="string"){e={type:t}}e=ju(e);if(this.allowedEvents_[t]&&this["on"+t]){this["on"+t](e)}Gu(this,e)};rl.prototype.dispatchEvent=rl.prototype.trigger;var il=void 0;rl.prototype.queueTrigger=function(e){var t=this;if(!il){il=new Map}var r=e.type||e;var i=il.get(this);if(!i){i=new Map;il.set(this,i)}var n=i.get(r);i.delete(r);f.clearTimeout(n);var a=f.setTimeout((function(){if(i.size===0){i=null;il.delete(t)}t.trigger(e)}),0);i.set(r,a)};var nl=function e(t){return t instanceof rl||!!t.eventBusEl_&&["on","one","off","trigger"].every((function(e){return typeof t[e]==="function"}))};var al=function e(t){return typeof t==="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length};var sl=function e(t){if(!t.nodeName&&!nl(t)){throw new Error("Invalid target; must be a DOM node or evented object.")}};var ol=function e(t){if(!al(t)){throw new Error("Invalid event type; must be a non-empty string or array.")}};var ul=function e(t){if(typeof t!=="function"){throw new Error("Invalid listener; must be a function.")}};var ll=function e(t,r){var i=r.length<3||r[0]===t||r[0]===t.eventBusEl_;var n=void 0;var a=void 0;var s=void 0;if(i){n=t.eventBusEl_;if(r.length>=3){r.shift()}a=r[0];s=r[1]}else{n=r[0];a=r[1];s=r[2]}sl(n);ol(a);ul(s);s=Zu(t,s);return{isTargetingSelf:i,target:n,type:a,listener:s}};var fl=function e(t,r,i,n){sl(t);if(t.nodeName){zu[r](t,i,n)}else{t[r](i,n)}};var dl={on:function e(){var t=this;for(var r=arguments.length,i=Array(r),n=0;n<r;n++){i[n]=arguments[n]}var a=ll(this,i),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;fl(o,"on",u,l);if(!s){var f=function e(){return t.off(o,u,l)};f.guid=l.guid;var d=function e(){return t.off("dispose",f)};d.guid=l.guid;fl(this,"on","dispose",f);fl(o,"on","dispose",d)}},one:function e(){var t=this;for(var r=arguments.length,i=Array(r),n=0;n<r;n++){i[n]=arguments[n]}var a=ll(this,i),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s){fl(o,"one",u,l)}else{var f=function e(){for(var r=arguments.length,i=Array(r),n=0;n<r;n++){i[n]=arguments[n]}t.off(o,u,e);l.apply(null,i)};f.guid=l.guid;fl(o,"one",u,f)}},off:function e(t,r,i){if(!t||al(t)){qu(this.eventBusEl_,t,r)}else{var n=t;var a=r;sl(n);ol(a);ul(i);i=Zu(this,i);this.off("dispose",i);if(n.nodeName){qu(n,a,i);qu(n,"dispose",i)}else if(nl(n)){n.off(a,i);n.off("dispose",i)}}},trigger:function e(t,r){return Gu(this.eventBusEl_,t,r)}};function cl(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=t.eventBusKey;if(r){if(!e[r].nodeName){throw new Error('The eventBusKey "'+r+'" does not refer to an element.')}e.eventBusEl_=e[r]}else{e.eventBusEl_=nu("span",{className:"vjs-event-bus"})}zo(e,dl);e.on("dispose",(function(){e.off();f.setTimeout((function(){e.eventBusEl_=null}),0)}));return e}var hl={state:{},setState:function e(t){var r=this;if(typeof t==="function"){t=t()}var i=void 0;Go(t,(function(e,t){if(r.state[t]!==e){i=i||{};i[t]={from:r.state[t],to:e}}r.state[t]=e}));if(i&&nl(this)){this.trigger({changes:i,type:"statechanged"})}return i}};function pl(e,t){zo(e,hl);e.state=zo({},e.state,t);if(typeof e.handleStateChanged==="function"&&nl(e)){e.on("statechanged",e.handleStateChanged)}return e}function ml(e){if(typeof e!=="string"){return e}return e.charAt(0).toUpperCase()+e.slice(1)}function vl(e,t){return ml(e)===ml(t)}function gl(){var e={};for(var t=arguments.length,r=Array(t),i=0;i<t;i++){r[i]=arguments[i]}r.forEach((function(t){if(!t){return}Go(t,(function(t,r){if(!Xo(t)){e[r]=t;return}if(!Xo(e[r])){e[r]={}}e[r]=gl(e[r],t)}))}));return e}var yl=function(){function e(t,r,i){No(this,e);if(!t&&this.play){this.player_=t=this}else{this.player_=t}this.options_=gl({},this.options_);r=this.options_=gl(this.options_,r);this.id_=r.id||r.el&&r.el.id;if(!this.id_){var n=t&&t.id&&t.id()||"no_player";this.id_=n+"_component_"+Lu()}this.name_=r.name||null;if(r.el){this.el_=r.el}else if(r.createEl!==false){this.el_=this.createEl()}if(r.evented!==false){cl(this,{eventBusKey:this.el_?"el_":null})}pl(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};if(r.initChildren!==false){this.initChildren()}this.ready(i);if(r.reportTouchActivity!==false){this.enableTouchActivity()}}e.prototype.dispose=function e(){this.trigger({type:"dispose",bubbles:false});if(this.children_){for(var t=this.children_.length-1;t>=0;t--){if(this.children_[t].dispose){this.children_[t].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;if(this.el_){if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}Mu(this.el_);this.el_=null}this.player_=null};e.prototype.player=function e(){return this.player_};e.prototype.options=function e(t){Mo.warn("this.options() has been deprecated and will be moved to the constructor in 6.0");if(!t){return this.options_}this.options_=gl(this.options_,t);return this.options_};e.prototype.el=function e(){return this.el_};e.prototype.createEl=function e(t,r,i){return nu(t,r,i)};e.prototype.localize=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:t;var n=this.player_.language&&this.player_.language();var a=this.player_.languages&&this.player_.languages();var s=a&&a[n];var o=n&&n.split("-")[0];var u=a&&a[o];var l=i;if(s&&s[t]){l=s[t]}else if(u&&u[t]){l=u[t]}if(r){l=l.replace(/\{(\d+)\}/g,(function(e,t){var i=r[t-1];var n=i;if(typeof i==="undefined"){n=e}return n}))}return l};e.prototype.contentEl=function e(){return this.contentEl_||this.el_};e.prototype.id=function e(){return this.id_};e.prototype.name=function e(){return this.name_};e.prototype.children=function e(){return this.children_};e.prototype.getChildById=function e(t){return this.childIndex_[t]};e.prototype.getChild=function e(t){if(!t){return}t=ml(t);return this.childNameIndex_[t]};e.prototype.addChild=function t(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.children_.length;var a=void 0;var s=void 0;if(typeof r==="string"){s=ml(r);var o=i.componentClass||s;i.name=s;var u=e.getComponent(o);if(!u){throw new Error("Component "+o+" does not exist")}if(typeof u!=="function"){return null}a=new u(this.player_||this,i)}else{a=r}this.children_.splice(n,0,a);if(typeof a.id==="function"){this.childIndex_[a.id()]=a}s=s||a.name&&ml(a.name());if(s){this.childNameIndex_[s]=a}if(typeof a.el==="function"&&a.el()){var l=this.contentEl().children;var f=l[n]||null;this.contentEl().insertBefore(a.el(),f)}return a};e.prototype.removeChild=function e(t){if(typeof t==="string"){t=this.getChild(t)}if(!t||!this.children_){return}var r=false;for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i]===t){r=true;this.children_.splice(i,1);break}}if(!r){return}this.childIndex_[t.id()]=null;this.childNameIndex_[t.name()]=null;var n=t.el();if(n&&n.parentNode===this.contentEl()){this.contentEl().removeChild(t.el())}};e.prototype.initChildren=function t(){var r=this;var i=this.options_.children;if(i){var n=this.options_;var a=function e(t){var i=t.name;var a=t.opts;if(n[i]!==undefined){a=n[i]}if(a===false){return}if(a===true){a={}}a.playerOptions=r.options_.playerOptions;var s=r.addChild(i,a);if(s){r[i]=s}};var s=void 0;var o=e.getComponent("Tech");if(Array.isArray(i)){s=i}else{s=Object.keys(i)}s.concat(Object.keys(this.options_).filter((function(e){return!s.some((function(t){if(typeof t==="string"){return e===t}return e===t.name}))}))).map((function(e){var t=void 0;var n=void 0;if(typeof e==="string"){t=e;n=i[t]||r.options_[t]||{}}else{t=e.name;n=e}return{name:t,opts:n}})).filter((function(t){var r=e.getComponent(t.opts.componentClass||ml(t.name));return r&&!o.isTech(r)})).forEach(a)}};e.prototype.buildCSSClass=function e(){return""};e.prototype.ready=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!t){return}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(t);return}if(r){t.call(this)}else{this.setTimeout(t,1)}};e.prototype.triggerReady=function e(){this.isReady_=true;this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[];if(e&&e.length>0){e.forEach((function(e){e.call(this)}),this)}this.trigger("ready")}),1)};e.prototype.$=function e(t,r){return Au(t,r||this.contentEl())};e.prototype.$$=function e(t,r){return Ou(t,r||this.contentEl())};e.prototype.hasClass=function e(t){return ou(this.el_,t)};e.prototype.addClass=function e(t){uu(this.el_,t)};e.prototype.removeClass=function e(t){lu(this.el_,t)};e.prototype.toggleClass=function e(t,r){fu(this.el_,t,r)};e.prototype.show=function e(){this.removeClass("vjs-hidden")};e.prototype.hide=function e(){this.addClass("vjs-hidden")};e.prototype.lockShowing=function e(){this.addClass("vjs-lock-showing")};e.prototype.unlockShowing=function e(){this.removeClass("vjs-lock-showing")};e.prototype.getAttribute=function e(t){return hu(this.el_,t)};e.prototype.setAttribute=function e(t,r){pu(this.el_,t,r)};e.prototype.removeAttribute=function e(t){mu(this.el_,t)};e.prototype.width=function e(t,r){return this.dimension("width",t,r)};e.prototype.height=function e(t,r){return this.dimension("height",t,r)};e.prototype.dimensions=function e(t,r){this.width(t,true);this.height(r)};e.prototype.dimension=function e(t,r,i){if(r!==undefined){if(r===null||r!==r){r=0}if((""+r).indexOf("%")!==-1||(""+r).indexOf("px")!==-1){this.el_.style[t]=r}else if(r==="auto"){this.el_.style[t]=""}else{this.el_.style[t]=r+"px"}if(!i){this.trigger("componentresize")}return}if(!this.el_){return 0}var n=this.el_.style[t];var a=n.indexOf("px");if(a!==-1){return parseInt(n.slice(0,a),10)}return parseInt(this.el_["offset"+ml(t)],10)};e.prototype.currentDimension=function e(t){var r=0;if(t!=="width"&&t!=="height"){throw new Error("currentDimension only accepts width or height value")}if(typeof f.getComputedStyle==="function"){var i=f.getComputedStyle(this.el_);r=i.getPropertyValue(t)||i[t]}r=parseFloat(r);if(r===0){var n="offset"+ml(t);r=this.el_[n]}return r};e.prototype.currentDimensions=function e(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};e.prototype.currentWidth=function e(){return this.currentDimension("width")};e.prototype.currentHeight=function e(){return this.currentDimension("height")};e.prototype.focus=function e(){this.el_.focus()};e.prototype.blur=function e(){this.el_.blur()};e.prototype.emitTapEvents=function e(){var t=0;var r=null;var i=10;var n=200;var a=void 0;this.on("touchstart",(function(e){if(e.touches.length===1){r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY};t=(new Date).getTime();a=true}}));this.on("touchmove",(function(e){if(e.touches.length>1){a=false}else if(r){var t=e.touches[0].pageX-r.pageX;var n=e.touches[0].pageY-r.pageY;var s=Math.sqrt(t*t+n*n);if(s>i){a=false}}}));var s=function e(){a=false};this.on("touchleave",s);this.on("touchcancel",s);this.on("touchend",(function(e){r=null;if(a===true){var i=(new Date).getTime()-t;if(i<n){e.preventDefault();this.trigger("tap")}}}))};e.prototype.enableTouchActivity=function e(){if(!this.player()||!this.player().reportUserActivity){return}var t=Zu(this.player(),this.player().reportUserActivity);var r=void 0;this.on("touchstart",(function(){t();this.clearInterval(r);r=this.setInterval(t,250)}));var i=function e(i){t();this.clearInterval(r)};this.on("touchmove",t);this.on("touchend",i);this.on("touchcancel",i)};e.prototype.setTimeout=function e(t,r){var i=this;var n,a;t=Zu(this,t);n=f.setTimeout((function(){i.off("dispose",a);t()}),r);a=function e(){return i.clearTimeout(n)};a.guid="vjs-timeout-"+n;this.on("dispose",a);return n};e.prototype.clearTimeout=function e(t){f.clearTimeout(t);var r=function e(){};r.guid="vjs-timeout-"+t;this.off("dispose",r);return t};e.prototype.setInterval=function e(t,r){var i=this;t=Zu(this,t);var n=f.setInterval(t,r);var a=function e(){return i.clearInterval(n)};a.guid="vjs-interval-"+n;this.on("dispose",a);return n};e.prototype.clearInterval=function e(t){f.clearInterval(t);var r=function e(){};r.guid="vjs-interval-"+t;this.off("dispose",r);return t};e.prototype.requestAnimationFrame=function e(t){var r=this;var i,n;if(this.supportsRaf_){t=Zu(this,t);i=f.requestAnimationFrame((function(){r.off("dispose",n);t()}));n=function e(){return r.cancelAnimationFrame(i)};n.guid="vjs-raf-"+i;this.on("dispose",n);return i}return this.setTimeout(t,1e3/60)};e.prototype.cancelAnimationFrame=function e(t){if(this.supportsRaf_){f.cancelAnimationFrame(t);var r=function e(){};r.guid="vjs-raf-"+t;this.off("dispose",r);return t}return this.clearTimeout(t)};e.registerComponent=function t(r,i){if(typeof r!=="string"||!r){throw new Error('Illegal component name, "'+r+'"; must be a non-empty string.')}var n=e.getComponent("Tech");var a=n&&n.isTech(i);var s=e===i||e.prototype.isPrototypeOf(i.prototype);if(a||!s){var o=void 0;if(a){o="techs must be registered using Tech.registerTech()"}else{o="must be a Component subclass"}throw new Error('Illegal component, "'+r+'"; '+o+".")}r=ml(r);if(!e.components_){e.components_={}}var u=e.getComponent("Player");if(r==="Player"&&u&&u.players){var l=u.players;var f=Object.keys(l);if(l&&f.length>0&&f.map((function(e){return l[e]})).every(Boolean)){throw new Error("Can not register Player component after player has been created.")}}e.components_[r]=i;return i};e.getComponent=function t(r){if(!r){return}r=ml(r);if(e.components_&&e.components_[r]){return e.components_[r]}};return e}();yl.prototype.supportsRaf_=typeof f.requestAnimationFrame==="function"&&typeof f.cancelAnimationFrame==="function";yl.registerComponent("Component",yl);var _l=f.navigator&&f.navigator.userAgent||"";var bl=/AppleWebKit\/([\d.]+)/i.exec(_l);var Tl=bl?parseFloat(bl.pop()):null;var Sl=/iPad/i.test(_l);var wl=/iPhone/i.test(_l)&&!Sl;var kl=/iPod/i.test(_l);var El=wl||Sl||kl;var Cl=function(){var e=_l.match(/OS (\d+)_/i);if(e&&e[1]){return e[1]}return null}();var Al=/Android/i.test(_l);var Ol=function(){var e=_l.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e){return null}var t=e[1]&&parseFloat(e[1]);var r=e[2]&&parseFloat(e[2]);if(t&&r){return parseFloat(e[1]+"."+e[2])}else if(t){return t}return null}();var Pl=Al&&Ol<5&&Tl<537;var Il=/Firefox/i.test(_l);var Ll=/Edge/i.test(_l);var Dl=!Ll&&(/Chrome/i.test(_l)||/CriOS/i.test(_l));var Ul=function(){var e=_l.match(/(Chrome|CriOS)\/(\d+)/);if(e&&e[2]){return parseFloat(e[2])}return null}();var xl=function(){var e=/MSIE\s(\d+)\.\d/.exec(_l);var t=e&&parseFloat(e[1]);if(!t&&/Trident\/7.0/i.test(_l)&&/rv:11.0/.test(_l)){t=11}return t}();var Rl=/Safari/i.test(_l)&&!Dl&&!Al&&!Ll;var Ml=(Rl||El)&&!Dl;var Bl=eu()&&("ontouchstart"in f||f.navigator.maxTouchPoints||f.DocumentTouch&&f.document instanceof f.DocumentTouch);var Nl=Object.freeze({IS_IPAD:Sl,IS_IPHONE:wl,IS_IPOD:kl,IS_IOS:El,IOS_VERSION:Cl,IS_ANDROID:Al,ANDROID_VERSION:Ol,IS_NATIVE_ANDROID:Pl,IS_FIREFOX:Il,IS_EDGE:Ll,IS_CHROME:Dl,CHROME_VERSION:Ul,IE_VERSION:xl,IS_SAFARI:Rl,IS_ANY_SAFARI:Ml,TOUCH_ENABLED:Bl});function jl(e,t,r){if(typeof t!=="number"||t<0||t>r){throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+r+").")}}function Fl(e,t,r,i){jl(e,i,r.length-1);return r[i][t]}function Vl(e){if(e===undefined||e.length===0){return{length:0,start:function e(){throw new Error("This TimeRanges object is empty")},end:function e(){throw new Error("This TimeRanges object is empty")}}}return{length:e.length,start:Fl.bind(null,"start",0,e),end:Fl.bind(null,"end",1,e)}}function Hl(e,t){if(Array.isArray(e)){return Vl(e)}else if(e===undefined||t===undefined){return Vl()}return Vl([[e,t]])}function ql(e,t){var r=0;var i=void 0;var n=void 0;if(!t){return 0}if(!e||!e.length){e=Hl(0,0)}for(var a=0;a<e.length;a++){i=e.start(a);n=e.end(a);if(n>t){n=t}r+=n-i}return r/t}var Gl={};var Wl=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var zl=Wl[0];var $l=void 0;for(var Xl=0;Xl<Wl.length;Xl++){if(Wl[Xl][1]in v){$l=Wl[Xl];break}}if($l){for(var Yl=0;Yl<$l.length;Yl++){Gl[zl[Yl]]=$l[Yl]}}function Kl(e){if(e instanceof Kl){return e}if(typeof e==="number"){this.code=e}else if(typeof e==="string"){this.message=e}else if($o(e)){if(typeof e.code==="number"){this.code=e.code}zo(this,e)}if(!this.message){this.message=Kl.defaultMessages[this.code]||""}}Kl.prototype.code=0;Kl.prototype.message="";Kl.prototype.status=null;Kl.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Kl.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ql=0;Ql<Kl.errorTypes.length;Ql++){Kl[Kl.errorTypes[Ql]]=Ql;Kl.prototype[Kl.errorTypes[Ql]]=Ql}function Jl(e){return e!==undefined&&e!==null&&typeof e.then==="function"}function Zl(e){if(Jl(e)){e.then(null,(function(e){}))}}var ef=function e(t){var r=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(e,r,i){if(t[r]){e[r]=t[r]}return e}),{cues:t.cues&&Array.prototype.map.call(t.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))});return r};var tf=function e(t){var r=t.$$("track");var i=Array.prototype.map.call(r,(function(e){return e.track}));var n=Array.prototype.map.call(r,(function(e){var t=ef(e.track);if(e.src){t.src=e.src}return t}));return n.concat(Array.prototype.filter.call(t.textTracks(),(function(e){return i.indexOf(e)===-1})).map(ef))};var rf=function e(t,r){t.forEach((function(e){var t=r.addRemoteTextTrack(e).track;if(!e.src&&e.cues){e.cues.forEach((function(e){return t.addCue(e)}))}}));return r.textTracks()};var nf={textTracksToJson:tf,jsonToTextTracks:rf,trackToJson_:ef};var af="vjs-modal-dialog";var sf=27;var of=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=false;n.closeable(!n.options_.uncloseable);n.content(n.options_.content);n.contentEl_=nu("div",{className:af+"-content"},{role:"document"});n.descEl_=nu("p",{className:af+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")});au(n.descEl_,n.description());n.el_.appendChild(n.descEl_);n.el_.appendChild(n.contentEl_);return n}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};t.prototype.dispose=function t(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;e.prototype.dispose.call(this)};t.prototype.buildCSSClass=function t(){return af+" vjs-hidden "+e.prototype.buildCSSClass.call(this)};t.prototype.handleKeyPress=function e(t){if(t.which===sf&&this.closeable()){this.close()}};t.prototype.label=function e(){return this.localize(this.options_.label||"Modal Window")};t.prototype.description=function e(){var t=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")}return t};t.prototype.open=function e(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill()}this.wasPlaying_=!t.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){t.pause()}if(this.closeable()){this.on(this.el_.ownerDocument,"keydown",Zu(this,this.handleKeyPress))}this.hadControls_=t.controls();t.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true}};t.prototype.opened=function e(t){if(typeof t==="boolean"){this[t?"open":"close"]()}return this.opened_};t.prototype.close=function e(){if(!this.opened_){return}var t=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){t.play()}if(this.closeable()){this.off(this.el_.ownerDocument,"keydown",Zu(this,this.handleKeyPress))}if(this.hadControls_){t.controls(true)}this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();if(this.options_.temporary){this.dispose()}};t.prototype.closeable=function e(t){if(typeof t==="boolean"){var e=this.closeable_=!!t;var r=this.getChild("closeButton");if(e&&!r){var i=this.contentEl_;this.contentEl_=this.el_;r=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=i;this.on(r,"close",this.close)}if(!e&&r){this.off(r,"close",this.close);this.removeChild(r);r.dispose()}}return this.closeable_};t.prototype.fill=function e(){this.fillWith(this.content())};t.prototype.fillWith=function e(t){var r=this.contentEl();var i=r.parentNode;var n=r.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;i.removeChild(r);this.empty();Eu(r,t);this.trigger("modalfill");if(n){i.insertBefore(r,n)}else{i.appendChild(r)}var a=this.getChild("closeButton");if(a){i.appendChild(a.el_)}};t.prototype.empty=function e(){this.trigger("beforemodalempty");Su(this.contentEl());this.trigger("modalempty")};t.prototype.content=function e(t){if(typeof t!=="undefined"){this.content_=t}return this.content_};t.prototype.conditionalFocus_=function e(){var t=v.activeElement;var r=this.player_.el_;this.previouslyActiveEl_=null;if(r.contains(t)||r===t){this.previouslyActiveEl_=t;this.focus();this.on(v,"keydown",this.handleKeyDown)}};t.prototype.conditionalBlur_=function e(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null}this.off(v,"keydown",this.handleKeyDown)};t.prototype.handleKeyDown=function e(t){if(t.which!==9){return}var r=this.focusableEls_();var i=this.el_.querySelector(":focus");var n=void 0;for(var a=0;a<r.length;a++){if(i===r[a]){n=a;break}}if(v.activeElement===this.el_){n=0}if(t.shiftKey&&n===0){r[r.length-1].focus();t.preventDefault()}else if(!t.shiftKey&&n===r.length-1){r[0].focus();t.preventDefault()}};t.prototype.focusableEls_=function e(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,(function(e){return(e instanceof f.HTMLAnchorElement||e instanceof f.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof f.HTMLInputElement||e instanceof f.HTMLSelectElement||e instanceof f.HTMLTextAreaElement||e instanceof f.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof f.HTMLIFrameElement||e instanceof f.HTMLObjectElement||e instanceof f.HTMLEmbedElement||e.hasAttribute("tabindex")&&e.getAttribute("tabindex")!==-1||e.hasAttribute("contenteditable")}))};return t}(yl);of.prototype.options_={pauseOnOpen:true,temporary:true};yl.registerComponent("ModalDialog",of);var uf=function(e){jo(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];No(this,t);var i=Fo(this,e.call(this));i.tracks_=[];Object.defineProperty(i,"length",{get:function e(){return this.tracks_.length}});for(var n=0;n<r.length;n++){i.addTrack(r[n])}return i}t.prototype.addTrack=function e(t){var r=this.tracks_.length;if(!(""+r in this)){Object.defineProperty(this,r,{get:function e(){return this.tracks_[r]}})}if(this.tracks_.indexOf(t)===-1){this.tracks_.push(t);this.trigger({track:t,type:"addtrack"})}};t.prototype.removeTrack=function e(t){var r=void 0;for(var i=0,n=this.length;i<n;i++){if(this[i]===t){r=this[i];if(r.off){r.off()}this.tracks_.splice(i,1);break}}if(!r){return}this.trigger({track:r,type:"removetrack"})};t.prototype.getTrackById=function e(t){var r=null;for(var i=0,n=this.length;i<n;i++){var a=this[i];if(a.id===t){r=a;break}}return r};return t}(rl);uf.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var lf in uf.prototype.allowedEvents_){uf.prototype["on"+lf]=null}var ff=function e(t,r){for(var i=0;i<t.length;i++){if(!Object.keys(t[i]).length||r.id===t[i].id){continue}t[i].enabled=false}};var df=function(e){jo(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];No(this,t);for(var i=r.length-1;i>=0;i--){if(r[i].enabled){ff(r,r[i]);break}}var n=Fo(this,e.call(this,r));n.changing_=false;return n}t.prototype.addTrack=function t(r){var i=this;if(r.enabled){ff(this,r)}e.prototype.addTrack.call(this,r);if(!r.addEventListener){return}r.addEventListener("enabledchange",(function(){if(i.changing_){return}i.changing_=true;ff(i,r);i.changing_=false;i.trigger("change")}))};return t}(uf);var cf=function e(t,r){for(var i=0;i<t.length;i++){if(!Object.keys(t[i]).length||r.id===t[i].id){continue}t[i].selected=false}};var hf=function(e){jo(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];No(this,t);for(var i=r.length-1;i>=0;i--){if(r[i].selected){cf(r,r[i]);break}}var n=Fo(this,e.call(this,r));n.changing_=false;Object.defineProperty(n,"selectedIndex",{get:function e(){for(var t=0;t<this.length;t++){if(this[t].selected){return t}}return-1},set:function e(){}});return n}t.prototype.addTrack=function t(r){var i=this;if(r.selected){cf(this,r)}e.prototype.addTrack.call(this,r);if(!r.addEventListener){return}r.addEventListener("selectedchange",(function(){if(i.changing_){return}i.changing_=true;cf(i,r);i.changing_=false;i.trigger("change")}))};return t}(uf);var pf=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.addTrack=function t(r){e.prototype.addTrack.call(this,r);r.addEventListener("modechange",Zu(this,(function(){this.queueTrigger("change")})));var i=["metadata","chapters"];if(i.indexOf(r.kind)===-1){r.addEventListener("modechange",Zu(this,(function(){this.trigger("selectedlanguagechange")})))}};return t}(uf);var mf=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];No(this,e);this.trackElements_=[];Object.defineProperty(this,"length",{get:function e(){return this.trackElements_.length}});for(var r=0,i=t.length;r<i;r++){this.addTrackElement_(t[r])}}e.prototype.addTrackElement_=function e(t){var r=this.trackElements_.length;if(!(""+r in this)){Object.defineProperty(this,r,{get:function e(){return this.trackElements_[r]}})}if(this.trackElements_.indexOf(t)===-1){this.trackElements_.push(t)}};e.prototype.getTrackElementByTrack_=function e(t){var r=void 0;for(var i=0,n=this.trackElements_.length;i<n;i++){if(t===this.trackElements_[i].track){r=this.trackElements_[i];break}}return r};e.prototype.removeTrackElement_=function e(t){for(var r=0,i=this.trackElements_.length;r<i;r++){if(t===this.trackElements_[r]){this.trackElements_.splice(r,1);break}}};return e}();var vf=function(){function e(t){No(this,e);e.prototype.setCues_.call(this,t);Object.defineProperty(this,"length",{get:function e(){return this.length_}})}e.prototype.setCues_=function e(t){var r=this.length||0;var i=0;var n=t.length;this.cues_=t;this.length_=t.length;var a=function e(t){if(!(""+t in this)){Object.defineProperty(this,""+t,{get:function e(){return this.cues_[t]}})}};if(r<n){i=r;for(;i<n;i++){a.call(this,i)}}};e.prototype.getCueById=function e(t){var r=null;for(var i=0,n=this.length;i<n;i++){var a=this[i];if(a.id===t){r=a;break}}return r};return e}();var gf={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var yf={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"};var _f={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var bf={disabled:"disabled",hidden:"hidden",showing:"showing"};var Tf=function(e){jo(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};No(this,t);var i=Fo(this,e.call(this));var n={id:r.id||"vjs_track_"+Lu(),kind:r.kind||"",label:r.label||"",language:r.language||""};var a=function e(t){Object.defineProperty(i,t,{get:function e(){return n[t]},set:function e(){}})};for(var s in n){a(s)}return i}return t}(rl);var Sf=function e(t){var r=["protocol","hostname","port","pathname","search","hash","host"];var i=v.createElement("a");i.href=t;var n=i.host===""&&i.protocol!=="file:";var a=void 0;if(n){a=v.createElement("div");a.innerHTML='<a href="'+t+'"></a>';i=a.firstChild;a.setAttribute("style","display:none; position:absolute;");v.body.appendChild(a)}var s={};for(var o=0;o<r.length;o++){s[r[o]]=i[r[o]]}if(s.protocol==="http:"){s.host=s.host.replace(/:80$/,"")}if(s.protocol==="https:"){s.host=s.host.replace(/:443$/,"")}if(!s.protocol){s.protocol=f.location.protocol}if(n){v.body.removeChild(a)}return s};var wf=function e(t){if(!t.match(/^https?:\/\//)){var r=v.createElement("div");r.innerHTML='<a href="'+t+'">x</a>';t=r.firstChild.href}return t};var kf=function e(t){if(typeof t==="string"){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i;var i=r.exec(t);if(i){return i.pop().toLowerCase()}}return""};var Ef=function e(t){var r=f.location;var i=Sf(t);var n=i.protocol===":"?r.protocol:i.protocol;var a=n+i.host!==r.protocol+r.host;return a};var Cf=Object.freeze({parseUrl:Sf,getAbsoluteURL:wf,getFileExtension:kf,isCrossOrigin:Ef});var Af=function e(t,r){var i=new f.WebVTT.Parser(f,f.vttjs,f.WebVTT.StringDecoder());var n=[];i.oncue=function(e){r.addCue(e)};i.onparsingerror=function(e){n.push(e)};i.onflush=function(){r.trigger({type:"loadeddata",target:r})};i.parse(t);if(n.length>0){if(f.console&&f.console.groupCollapsed){f.console.groupCollapsed("Text Track parsing errors for "+r.src)}n.forEach((function(e){return Mo.error(e)}));if(f.console&&f.console.groupEnd){f.console.groupEnd()}}i.flush()};var Of=function e(t,r){var i={uri:t};var n=Ef(t);if(n){i.cors=n}qt(i,Zu(this,(function(e,t,i){if(e){return Mo.error(e,t)}r.loaded_=true;if(typeof f.WebVTT!=="function"){if(r.tech_){var n=function e(){return Af(i,r)};r.tech_.on("vttjsloaded",n);r.tech_.on("vttjserror",(function(){Mo.error("vttjs failed to load, stopping trying to process "+r.src);r.tech_.off("vttjsloaded",n)}))}}else{Af(i,r)}})))};var Pf=function(e){jo(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};No(this,t);if(!r.tech){throw new Error("A tech was not provided.")}var i=gl(r,{kind:_f[r.kind]||"subtitles",language:r.language||r.srclang||""});var n=bf[i.mode]||"disabled";var a=i.default;if(i.kind==="metadata"||i.kind==="chapters"){n="hidden"}var s=Fo(this,e.call(this,i));s.tech_=i.tech;s.cues_=[];s.activeCues_=[];var o=new vf(s.cues_);var u=new vf(s.activeCues_);var l=false;var f=Zu(s,(function(){this.activeCues=this.activeCues;if(l){this.trigger("cuechange");l=false}}));if(n!=="disabled"){s.tech_.ready((function(){s.tech_.on("timeupdate",f)}),true)}Object.defineProperties(s,{default:{get:function e(){return a},set:function e(){}},mode:{get:function e(){return n},set:function e(t){var r=this;if(!bf[t]){return}n=t;if(n==="showing"){this.tech_.ready((function(){r.tech_.on("timeupdate",f)}),true)}this.trigger("modechange")}},cues:{get:function e(){if(!this.loaded_){return null}return o},set:function e(){}},activeCues:{get:function e(){if(!this.loaded_){return null}if(this.cues.length===0){return u}var t=this.tech_.currentTime();var r=[];for(var i=0,n=this.cues.length;i<n;i++){var a=this.cues[i];if(a.startTime<=t&&a.endTime>=t){r.push(a)}else if(a.startTime===a.endTime&&a.startTime<=t&&a.startTime+.5>=t){r.push(a)}}l=false;if(r.length!==this.activeCues_.length){l=true}else{for(var s=0;s<r.length;s++){if(this.activeCues_.indexOf(r[s])===-1){l=true}}}this.activeCues_=r;u.setCues_(this.activeCues_);return u},set:function e(){}}});if(i.src){s.src=i.src;Of(i.src,s)}else{s.loaded_=true}return s}t.prototype.addCue=function e(t){var r=t;if(f.vttjs&&!(t instanceof f.vttjs.VTTCue)){r=new f.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(var i in t){if(!(i in r)){r[i]=t[i]}}r.id=t.id;r.originalCue_=t}var n=this.tech_.textTracks();for(var a=0;a<n.length;a++){if(n[a]!==this){n[a].removeCue(r)}}this.cues_.push(r);this.cues.setCues_(this.cues_)};t.prototype.removeCue=function e(t){var r=this.cues_.length;while(r--){var i=this.cues_[r];if(i===t||i.originalCue_&&i.originalCue_===t){this.cues_.splice(r,1);this.cues.setCues_(this.cues_);break}}};return t}(Tf);Pf.prototype.allowedEvents_={cuechange:"cuechange"};var If=function(e){jo(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};No(this,t);var i=gl(r,{kind:yf[r.kind]||""});var n=Fo(this,e.call(this,i));var a=false;Object.defineProperty(n,"enabled",{get:function e(){return a},set:function e(t){if(typeof t!=="boolean"||t===a){return}a=t;this.trigger("enabledchange")}});if(i.enabled){n.enabled=i.enabled}n.loaded_=true;return n}return t}(Tf);var Lf=function(e){jo(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};No(this,t);var i=gl(r,{kind:gf[r.kind]||""});var n=Fo(this,e.call(this,i));var a=false;Object.defineProperty(n,"selected",{get:function e(){return a},set:function e(t){if(typeof t!=="boolean"||t===a){return}a=t;this.trigger("selectedchange")}});if(i.selected){n.selected=i.selected}return n}return t}(Tf);var Df=0;var Uf=1;var xf=2;var Rf=3;var Mf=function(e){jo(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};No(this,t);var i=Fo(this,e.call(this));var n=void 0;var a=new Pf(r);i.kind=a.kind;i.src=a.src;i.srclang=a.language;i.label=a.label;i.default=a.default;Object.defineProperties(i,{readyState:{get:function e(){return n}},track:{get:function e(){return a}}});n=Df;a.addEventListener("loadeddata",(function(){n=xf;i.trigger({type:"load",target:i})}));return i}return t}(rl);Mf.prototype.allowedEvents_={load:"load"};Mf.NONE=Df;Mf.LOADING=Uf;Mf.LOADED=xf;Mf.ERROR=Rf;var Bf={audio:{ListClass:df,TrackClass:If,capitalName:"Audio"},video:{ListClass:hf,TrackClass:Lf,capitalName:"Video"},text:{ListClass:pf,TrackClass:Pf,capitalName:"Text"}};Object.keys(Bf).forEach((function(e){Bf[e].getterName=e+"Tracks";Bf[e].privateName=e+"Tracks_"}));var Nf={remoteText:{ListClass:pf,TrackClass:Pf,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:mf,TrackClass:Mf,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};var jf=gl(Bf,Nf);Nf.names=Object.keys(Nf);Bf.names=Object.keys(Bf);jf.names=[].concat(Nf.names).concat(Bf.names);function Ff(e,t,r,i){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var a=e.textTracks();n.kind=t;if(r){n.label=r}if(i){n.language=i}n.tech=e;var s=new jf.text.TrackClass(n);a.addTrack(s);return s}var Vf=function(e){jo(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};No(this,t);r.reportTouchActivity=false;var n=Fo(this,e.call(this,null,r,i));n.hasStarted_=false;n.on("playing",(function(){this.hasStarted_=true}));n.on("loadstart",(function(){this.hasStarted_=false}));jf.names.forEach((function(e){var t=jf[e];if(r&&r[t.getterName]){n[t.privateName]=r[t.getterName]}}));if(!n.featuresProgressEvents){n.manualProgressOn()}if(!n.featuresTimeupdateEvents){n.manualTimeUpdatesOn()}["Text","Audio","Video"].forEach((function(e){if(r["native"+e+"Tracks"]===false){n["featuresNative"+e+"Tracks"]=false}}));if(r.nativeCaptions===false||r.nativeTextTracks===false){n.featuresNativeTextTracks=false}else if(r.nativeCaptions===true||r.nativeTextTracks===true){n.featuresNativeTextTracks=true}if(!n.featuresNativeTextTracks){n.emulateTextTracks()}n.autoRemoteTextTracks_=new jf.text.ListClass;n.initTrackListeners();if(!r.nativeControlsForTouch){n.emitTapEvents()}if(n.constructor){n.name_=n.constructor.name||"Unknown Tech"}return n}t.prototype.triggerSourceset=function e(t){var r=this;if(!this.isReady_){this.one("ready",(function(){return r.setTimeout((function(){return r.triggerSourceset(t)}),1)}))}this.trigger({src:t,type:"sourceset"})};t.prototype.manualProgressOn=function e(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress)};t.prototype.manualProgressOff=function e(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};t.prototype.trackProgress=function e(t){this.stopTrackingProgress();this.progressInterval=this.setInterval(Zu(this,(function(){var e=this.bufferedPercent();if(this.bufferedPercent_!==e){this.trigger("progress")}this.bufferedPercent_=e;if(e===1){this.stopTrackingProgress()}})),500)};t.prototype.onDurationChange=function e(t){this.duration_=this.duration()};t.prototype.buffered=function e(){return Hl(0,0)};t.prototype.bufferedPercent=function e(){return ql(this.buffered(),this.duration_)};t.prototype.stopTrackingProgress=function e(){this.clearInterval(this.progressInterval)};t.prototype.manualTimeUpdatesOn=function e(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};t.prototype.manualTimeUpdatesOff=function e(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};t.prototype.trackCurrentTime=function e(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}),250)};t.prototype.stopTrackingCurrentTime=function e(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})};t.prototype.dispose=function t(){this.clearTracks(Bf.names);if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}e.prototype.dispose.call(this)};t.prototype.clearTracks=function e(t){var r=this;t=[].concat(t);t.forEach((function(e){var t=r[e+"Tracks"]()||[];var i=t.length;while(i--){var n=t[i];if(e==="text"){r.removeRemoteTextTrack(n)}t.removeTrack(n)}}))};t.prototype.cleanupAutoTextTracks=function e(){var t=this.autoRemoteTextTracks_||[];var r=t.length;while(r--){var i=t[r];this.removeRemoteTextTrack(i)}};t.prototype.reset=function e(){};t.prototype.error=function e(t){if(t!==undefined){this.error_=new Kl(t);this.trigger("error")}return this.error_};t.prototype.played=function e(){if(this.hasStarted_){return Hl(0,0)}return Hl()};t.prototype.setCurrentTime=function e(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}};t.prototype.initTrackListeners=function e(){var t=this;Bf.names.forEach((function(e){var r=Bf[e];var i=function r(){t.trigger(e+"trackchange")};var n=t[r.getterName]();n.addEventListener("removetrack",i);n.addEventListener("addtrack",i);t.on("dispose",(function(){n.removeEventListener("removetrack",i);n.removeEventListener("addtrack",i)}))}))};t.prototype.addWebVttScript_=function e(){var t=this;if(f.WebVTT){return}if(v.body.contains(this.el())){if(!this.options_["vtt.js"]&&Xo(Ur)&&Object.keys(Ur).length>0){this.trigger("vttjsloaded");return}var r=v.createElement("script");r.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";r.onload=function(){t.trigger("vttjsloaded")};r.onerror=function(){t.trigger("vttjserror")};this.on("dispose",(function(){r.onload=null;r.onerror=null}));f.WebVTT=true;this.el().parentNode.appendChild(r)}else{this.ready(this.addWebVttScript_)}};t.prototype.emulateTextTracks=function e(){var t=this;var r=this.textTracks();var i=this.remoteTextTracks();var n=function e(t){return r.addTrack(t.track)};var a=function e(t){return r.removeTrack(t.track)};i.on("addtrack",n);i.on("removetrack",a);this.addWebVttScript_();var s=function e(){return t.trigger("texttrackchange")};var o=function e(){s();for(var t=0;t<r.length;t++){var i=r[t];i.removeEventListener("cuechange",s);if(i.mode==="showing"){i.addEventListener("cuechange",s)}}};o();r.addEventListener("change",o);r.addEventListener("addtrack",o);r.addEventListener("removetrack",o);this.on("dispose",(function(){i.off("addtrack",n);i.off("removetrack",a);r.removeEventListener("change",o);r.removeEventListener("addtrack",o);r.removeEventListener("removetrack",o);for(var e=0;e<r.length;e++){var t=r[e];t.removeEventListener("cuechange",s)}}))};t.prototype.addTextTrack=function e(t,r,i){if(!t){throw new Error("TextTrack kind is required but was not provided")}return Ff(this,t,r,i)};t.prototype.createRemoteTextTrack=function e(t){var r=gl(t,{tech:this});return new Nf.remoteTextEl.TrackClass(r)};t.prototype.addRemoteTextTrack=function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=arguments[1];var n=this.createRemoteTextTrack(r);if(i!==true&&i!==false){Mo.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');i=true}this.remoteTextTrackEls().addTrackElement_(n);this.remoteTextTracks().addTrack(n.track);if(i!==true){this.ready((function(){return t.autoRemoteTextTracks_.addTrack(n.track)}))}return n};t.prototype.removeRemoteTextTrack=function e(t){var r=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(r);this.remoteTextTracks().removeTrack(t);this.autoRemoteTextTracks_.removeTrack(t)};t.prototype.getVideoPlaybackQuality=function e(){return{}};t.prototype.setPoster=function e(){};t.prototype.playsinline=function e(){};t.prototype.setPlaysinline=function e(){};t.prototype.overrideNativeAudioTracks=function e(){};t.prototype.overrideNativeVideoTracks=function e(){};t.prototype.canPlayType=function e(){return""};t.canPlayType=function e(){return""};t.canPlaySource=function e(r,i){return t.canPlayType(r.type)};t.isTech=function e(r){return r.prototype instanceof t||r instanceof t||r===t};t.registerTech=function e(r,i){if(!t.techs_){t.techs_={}}if(!t.isTech(i)){throw new Error("Tech "+r+" must be a Tech")}if(!t.canPlayType){throw new Error("Techs must have a static canPlayType method on them")}if(!t.canPlaySource){throw new Error("Techs must have a static canPlaySource method on them")}r=ml(r);t.techs_[r]=i;if(r!=="Tech"){t.defaultTechOrder_.push(r)}return i};t.getTech=function e(r){if(!r){return}r=ml(r);if(t.techs_&&t.techs_[r]){return t.techs_[r]}if(f&&f.videojs&&f.videojs[r]){Mo.warn("The "+r+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return f.videojs[r]}};return t}(yl);jf.names.forEach((function(e){var t=jf[e];Vf.prototype[t.getterName]=function(){this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}}));Vf.prototype.featuresVolumeControl=true;Vf.prototype.featuresMuteControl=true;Vf.prototype.featuresFullscreenResize=false;Vf.prototype.featuresPlaybackRate=false;Vf.prototype.featuresProgressEvents=false;Vf.prototype.featuresSourceset=false;Vf.prototype.featuresTimeupdateEvents=false;Vf.prototype.featuresNativeTextTracks=false;Vf.withSourceHandlers=function(e){e.registerSourceHandler=function(t,r){var i=e.sourceHandlers;if(!i){i=e.sourceHandlers=[]}if(r===undefined){r=i.length}i.splice(r,0,t)};e.canPlayType=function(t){var r=e.sourceHandlers||[];var i=void 0;for(var n=0;n<r.length;n++){i=r[n].canPlayType(t);if(i){return i}}return""};e.selectSourceHandler=function(t,r){var i=e.sourceHandlers||[];var n=void 0;for(var a=0;a<i.length;a++){n=i[a].canHandleSource(t,r);if(n){return i[a]}}return null};e.canPlaySource=function(t,r){var i=e.selectSourceHandler(t,r);if(i){return i.canHandleSource(t,r)}return""};var t=["seekable","seeking","duration"];t.forEach((function(e){var t=this[e];if(typeof t!=="function"){return}this[e]=function(){if(this.sourceHandler_&&this.sourceHandler_[e]){return this.sourceHandler_[e].apply(this.sourceHandler_,arguments)}return t.apply(this,arguments)}}),e.prototype);e.prototype.setSource=function(t){var r=e.selectSourceHandler(t,this.options_);if(!r){if(e.nativeSourceHandler){r=e.nativeSourceHandler}else{Mo.error("No source handler found for the current source.")}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);if(r!==e.nativeSourceHandler){this.currentSource_=t}this.sourceHandler_=r.handleSource(t,this,this.options_);this.on("dispose",this.disposeSourceHandler)};e.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null}this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose()}this.sourceHandler_=null}}};yl.registerComponent("Tech",Vf);Vf.registerTech("Tech",Vf);Vf.defaultTechOrder_=[];var Hf={};var qf={};var Gf={};function Wf(e,t){Hf[e]=Hf[e]||[];Hf[e].push(t)}function zf(e,t,r){e.setTimeout((function(){return nd(t,Hf[t.type],r,e)}),1)}function $f(e,t){e.forEach((function(e){return e.setTech&&e.setTech(t)}))}function Xf(e,t,r){return e.reduceRight(ed(r),t[r]())}function Yf(e,t,r,i){return t[r](e.reduce(ed(r),i))}function Kf(e,t,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var n="call"+ml(r);var a=e.reduce(ed(n),i);var s=a===Gf;var o=s?null:t[r](a);td(e,r,o,s);return o}var Qf={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1};var Jf={setCurrentTime:1};var Zf={play:1,pause:1};function ed(e){return function(t,r){if(t===Gf){return Gf}if(r[e]){return r[e](t)}return t}}function td(e,t,r,i){for(var n=e.length-1;n>=0;n--){var a=e[n];if(a[t]){a[t](i,r)}}}function rd(e){qf[e.id()]=null}function id(e,t){var r=qf[e.id()];var i=null;if(r===undefined||r===null){i=t(e);qf[e.id()]=[[t,i]];return i}for(var n=0;n<r.length;n++){var a=r[n],s=a[0],o=a[1];if(s!==t){continue}i=o}if(i===null){i=t(e);r.push([t,i])}return i}function nd(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var r=arguments[2];var i=arguments[3];var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var s=t[0],o=t.slice(1);if(typeof s==="string"){nd(e,Hf[s],r,i,n,a)}else if(s){var u=id(i,s);if(!u.setSource){n.push(u);return nd(e,o,r,i,n,a)}u.setSource(zo({},e),(function(t,s){if(t){return nd(e,o,r,i,n,a)}n.push(u);nd(s,e.type===s.type?o:Hf[s.type],r,i,n,a)}))}else if(o.length){nd(e,o,r,i,n,a)}else if(a){r(e,n)}else{nd(e,Hf["*"],r,i,n,true)}}var ad={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"};var sd=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=kf(t);var i=ad[r.toLowerCase()];return i||""};var od=function e(t,r){if(!r){return""}if(t.cache_.source.src===r&&t.cache_.source.type){return t.cache_.source.type}var i=t.cache_.sources.filter((function(e){return e.src===r}));if(i.length){return i[0].type}var n=t.$$("source");for(var a=0;a<n.length;a++){var s=n[a];if(s.type&&s.src&&s.src===r){return s.type}}return sd(r)};var ud=function e(t){if(Array.isArray(t)){var r=[];t.forEach((function(t){t=e(t);if(Array.isArray(t)){r=r.concat(t)}else if($o(t)){r.push(t)}}));t=r}else if(typeof t==="string"&&t.trim()){t=[ld({src:t})]}else if($o(t)&&typeof t.src==="string"&&t.src&&t.src.trim()){t=[ld(t)]}else{t=[]}return t};function ld(e){var t=sd(e.src);if(!e.type&&t){e.type=t}return e}var fd=function(e){jo(t,e);function t(r,i,n){No(this,t);var a=gl({createEl:false},i);var s=Fo(this,e.call(this,r,a,n));if(!i.playerOptions.sources||i.playerOptions.sources.length===0){for(var o=0,u=i.playerOptions.techOrder;o<u.length;o++){var l=ml(u[o]);var f=Vf.getTech(l);if(!l){f=yl.getComponent(l)}if(f&&f.isSupported()){r.loadTech_(l);break}}}else{r.src(i.playerOptions.sources)}return s}return t}(yl);yl.registerComponent("MediaLoader",fd);var dd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.emitTapEvents();n.enable();return n}t.prototype.createEl=function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div";var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};i=zo({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i);if(r==="button"){Mo.error("Creating a ClickableComponent with an HTML element of "+r+" is not supported; use a Button instead.")}n=zo({role:"button"},n);this.tabIndex_=i.tabIndex;var a=e.prototype.createEl.call(this,r,i,n);this.createControlTextEl(a);return a};t.prototype.dispose=function t(){this.controlTextEl_=null;e.prototype.dispose.call(this)};t.prototype.createControlTextEl=function e(t){this.controlTextEl_=nu("span",{className:"vjs-control-text"},{"aria-live":"polite"});if(t){t.appendChild(this.controlTextEl_)}this.controlText(this.controlText_,t);return this.controlTextEl_};t.prototype.controlText=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.el();if(t===undefined){return this.controlText_||"Need Text"}var i=this.localize(t);this.controlText_=t;au(this.controlTextEl_,i);if(!this.nonIconControl){r.setAttribute("title",i)}};t.prototype.buildCSSClass=function t(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)};t.prototype.enable=function e(){if(!this.enabled_){this.enabled_=true;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_)}this.on(["tap","click"],this.handleClick);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur)}};t.prototype.disable=function e(){this.enabled_=false;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex")}this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur)};t.prototype.handleClick=function e(t){};t.prototype.handleFocus=function e(t){Hu(v,"keydown",Zu(this,this.handleKeyPress))};t.prototype.handleKeyPress=function t(r){if(r.which===32||r.which===13){r.preventDefault();this.trigger("click")}else if(e.prototype.handleKeyPress){e.prototype.handleKeyPress.call(this,r)}};t.prototype.handleBlur=function e(t){qu(v,"keydown",Zu(this,this.handleKeyPress))};return t}(yl);yl.registerComponent("ClickableComponent",dd);var cd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.update();r.on("posterchange",Zu(n,n.update));return n}t.prototype.dispose=function t(){this.player().off("posterchange",this.update);e.prototype.dispose.call(this)};t.prototype.createEl=function e(){var t=nu("div",{className:"vjs-poster",tabIndex:-1});return t};t.prototype.update=function e(t){var r=this.player().poster();this.setSrc(r);if(r){this.show()}else{this.hide()}};t.prototype.setSrc=function e(t){var r="";if(t){r='url("'+t+'")'}this.el_.style.backgroundImage=r};t.prototype.handleClick=function e(t){if(!this.player_.controls()){return}if(this.player_.paused()){Zl(this.player_.play())}else{this.player_.pause()}};return t}(dd);yl.registerComponent("PosterImage",cd);var hd="#222";var pd="#ccc";var md={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function vd(e,t){var r=void 0;if(e.length===4){r=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}else if(e.length===7){r=e.slice(1)}else{throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.")}return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+t+")"}function gd(e,t,r){try{e.style[t]=r}catch(i){return}}var yd=function(e){jo(t,e);function t(r,i,n){No(this,t);var a=Fo(this,e.call(this,r,i,n));r.on("loadstart",Zu(a,a.toggleDisplay));r.on("texttrackchange",Zu(a,a.updateDisplay));r.on("loadstart",Zu(a,a.preselectTrack));r.ready(Zu(a,(function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return}r.on("fullscreenchange",Zu(this,this.updateDisplay));var e=this.options_.playerOptions.tracks||[];for(var t=0;t<e.length;t++){this.player_.addRemoteTextTrack(e[t],true)}this.preselectTrack()})));return a}t.prototype.preselectTrack=function e(){var t={captions:1,subtitles:1};var r=this.player_.textTracks();var i=this.player_.cache_.selectedLanguage;var n=void 0;var a=void 0;var s=void 0;for(var o=0;o<r.length;o++){var u=r[o];if(i&&i.enabled&&i.language===u.language){if(u.kind===i.kind){s=u}else if(!s){s=u}}else if(i&&!i.enabled){s=null;n=null;a=null}else if(u.default){if(u.kind==="descriptions"&&!n){n=u}else if(u.kind in t&&!a){a=u}}}if(s){s.mode="showing"}else if(a){a.mode="showing"}else if(n){n.mode="showing"}};t.prototype.toggleDisplay=function e(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide()}else{this.show()}};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};t.prototype.clearDisplay=function e(){if(typeof f.WebVTT==="function"){f.WebVTT.processCues(f,[],this.el_)}};t.prototype.updateDisplay=function e(){var t=this.player_.textTracks();this.clearDisplay();var r=null;var i=null;var n=t.length;while(n--){var a=t[n];if(a.mode==="showing"){if(a.kind==="descriptions"){r=a}else{i=a}}}if(i){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off")}this.updateForTrack(i)}else if(r){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive")}this.updateForTrack(r)}};t.prototype.updateForTrack=function e(t){if(typeof f.WebVTT!=="function"||!t.activeCues){return}var r=[];for(var i=0;i<t.activeCues.length;i++){r.push(t.activeCues[i])}f.WebVTT.processCues(f,r,this.el_);if(!this.player_.textTrackSettings){return}var n=this.player_.textTrackSettings.getValues();var a=r.length;while(a--){var s=r[a];if(!s){continue}var o=s.displayState;if(n.color){o.firstChild.style.color=n.color}if(n.textOpacity){gd(o.firstChild,"color",vd(n.color||"#fff",n.textOpacity))}if(n.backgroundColor){o.firstChild.style.backgroundColor=n.backgroundColor}if(n.backgroundOpacity){gd(o.firstChild,"backgroundColor",vd(n.backgroundColor||"#000",n.backgroundOpacity))}if(n.windowColor){if(n.windowOpacity){gd(o,"backgroundColor",vd(n.windowColor,n.windowOpacity))}else{o.style.backgroundColor=n.windowColor}}if(n.edgeStyle){if(n.edgeStyle==="dropshadow"){o.firstChild.style.textShadow="2px 2px 3px "+hd+", 2px 2px 4px "+hd+", 2px 2px 5px "+hd}else if(n.edgeStyle==="raised"){o.firstChild.style.textShadow="1px 1px "+hd+", 2px 2px "+hd+", 3px 3px "+hd}else if(n.edgeStyle==="depressed"){o.firstChild.style.textShadow="1px 1px "+pd+", 0 1px "+pd+", -1px -1px "+hd+", 0 -1px "+hd}else if(n.edgeStyle==="uniform"){o.firstChild.style.textShadow="0 0 4px "+hd+", 0 0 4px "+hd+", 0 0 4px "+hd+", 0 0 4px "+hd}}if(n.fontPercent&&n.fontPercent!==1){var u=f.parseFloat(o.style.fontSize);o.style.fontSize=u*n.fontPercent+"px";o.style.height="auto";o.style.top="auto";o.style.bottom="2px"}if(n.fontFamily&&n.fontFamily!=="default"){if(n.fontFamily==="small-caps"){o.firstChild.style.fontVariant="small-caps"}else{o.firstChild.style.fontFamily=md[n.fontFamily]}}}};return t}(yl);yl.registerComponent("TextTrackDisplay",yd);var _d=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.createEl=function t(){var r=this.player_.isAudio();var i=this.localize(r?"Audio Player":"Video Player");var n=nu("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])});var a=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});a.appendChild(n);return a};return t}(yl);yl.registerComponent("LoadingSpinner",_d);var bd=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.createEl=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};t="button";r=zo({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},r);i=zo({type:"button"},i);var n=yl.prototype.createEl.call(this,t,r,i);this.createControlTextEl(n);return n};t.prototype.addChild=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.constructor.name;Mo.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead.");return yl.prototype.addChild.call(this,t,r)};t.prototype.enable=function t(){e.prototype.enable.call(this);this.el_.removeAttribute("disabled")};t.prototype.disable=function t(){e.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};t.prototype.handleKeyPress=function t(r){if(r.which===32||r.which===13){return}e.prototype.handleKeyPress.call(this,r)};return t}(dd);yl.registerComponent("Button",bd);var Td=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.mouseused_=false;n.on("mousedown",n.handleMouseDown);return n}t.prototype.buildCSSClass=function e(){return"vjs-big-play-button"};t.prototype.handleClick=function e(t){var r=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){Zl(r);return}var i=this.player_.getChild("controlBar");var n=i&&i.getChild("playToggle");if(!n){this.player_.focus();return}var a=function e(){return n.focus()};if(Jl(r)){r.then(a,(function(){}))}else{this.setTimeout(a,1)}};t.prototype.handleKeyPress=function t(r){this.mouseused_=false;e.prototype.handleKeyPress.call(this,r)};t.prototype.handleMouseDown=function e(t){this.mouseused_=true};return t}(bd);Td.prototype.controlText_="Play Video";yl.registerComponent("BigPlayButton",Td);var Sd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.controlText(i&&i.controlText||n.localize("Close"));return n}t.prototype.buildCSSClass=function t(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)};t.prototype.handleClick=function e(t){this.trigger({type:"close",bubbles:false})};return t}(bd);yl.registerComponent("CloseButton",Sd);var wd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.on(r,"play",n.handlePlay);n.on(r,"pause",n.handlePause);n.on(r,"ended",n.handleEnded);return n}t.prototype.buildCSSClass=function t(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)};t.prototype.handleClick=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};t.prototype.handleSeeked=function e(t){this.removeClass("vjs-ended");if(this.player_.paused()){this.handlePause(t)}else{this.handlePlay(t)}};t.prototype.handlePlay=function e(t){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};t.prototype.handlePause=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};t.prototype.handleEnded=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return t}(bd);wd.prototype.controlText_="Play";yl.registerComponent("PlayToggle",wd);var kd=function e(t,r){t=t<0?0:t;var i=Math.floor(t%60);var n=Math.floor(t/60%60);var a=Math.floor(t/3600);var s=Math.floor(r/60%60);var o=Math.floor(r/3600);if(isNaN(t)||t===Infinity){a=n=i="-"}a=a>0||o>0?a+":":"";n=((a||s>=10)&&n<10?"0"+n:n)+":";i=i<10?"0"+i:i;return a+n+i};var Ed=kd;function Cd(e){Ed=e}function Ad(){Ed=kd}function Od(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:e;return Ed(e,t)}var Pd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.throttledUpdateContent=el(Zu(n,n.updateContent),25);n.on(r,"timeupdate",n.throttledUpdateContent);return n}t.prototype.createEl=function t(r){var i=this.buildCSSClass();var n=e.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});this.contentEl_=nu("span",{className:i+"-display"},{"aria-live":"off"});this.updateTextNode_();n.appendChild(this.contentEl_);return n};t.prototype.dispose=function t(){this.contentEl_=null;this.textNode_=null;e.prototype.dispose.call(this)};t.prototype.updateTextNode_=function e(){if(!this.contentEl_){return}while(this.contentEl_.firstChild){this.contentEl_.removeChild(this.contentEl_.firstChild)}this.textNode_=v.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)};t.prototype.formatTime_=function e(t){return Od(t)};t.prototype.updateFormattedTime_=function e(t){var r=this.formatTime_(t);if(r===this.formattedTime_){return}this.formattedTime_=r;this.requestAnimationFrame(this.updateTextNode_)};t.prototype.updateContent=function e(t){};return t}(yl);Pd.prototype.labelText_="Time";Pd.prototype.controlText_="Time";yl.registerComponent("TimeDisplay",Pd);var Id=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.on(r,"ended",n.handleEnded);return n}t.prototype.buildCSSClass=function e(){return"vjs-current-time"};t.prototype.updateContent=function e(t){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(r)};t.prototype.handleEnded=function e(t){if(!this.player_.duration()){return}this.updateFormattedTime_(this.player_.duration())};return t}(Pd);Id.prototype.labelText_="Current Time";Id.prototype.controlText_="Current Time";yl.registerComponent("CurrentTimeDisplay",Id);var Ld=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.on(r,"durationchange",n.updateContent);n.on(r,"loadedmetadata",n.throttledUpdateContent);return n}t.prototype.buildCSSClass=function e(){return"vjs-duration"};t.prototype.updateContent=function e(t){var r=this.player_.duration();if(r&&this.duration_!==r){this.duration_=r;this.updateFormattedTime_(r)}};return t}(Pd);Ld.prototype.labelText_="Duration";Ld.prototype.controlText_="Duration";yl.registerComponent("DurationDisplay",Ld);var Dd=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};return t}(yl);yl.registerComponent("TimeDivider",Dd);var Ud=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.on(r,"durationchange",n.throttledUpdateContent);n.on(r,"ended",n.handleEnded);return n}t.prototype.buildCSSClass=function e(){return"vjs-remaining-time"};t.prototype.formatTime_=function t(r){return"-"+e.prototype.formatTime_.call(this,r)};t.prototype.updateContent=function e(t){if(!this.player_.duration()){return}if(this.player_.remainingTimeDisplay){this.updateFormattedTime_(this.player_.remainingTimeDisplay())}else{this.updateFormattedTime_(this.player_.remainingTime())}};t.prototype.handleEnded=function e(t){if(!this.player_.duration()){return}this.updateFormattedTime_(0)};return t}(Pd);Ud.prototype.labelText_="Remaining Time";Ud.prototype.controlText_="Remaining Time";yl.registerComponent("RemainingTimeDisplay",Ud);var xd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.updateShowing();n.on(n.player(),"durationchange",n.updateShowing);return n}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=nu("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"});r.appendChild(this.contentEl_);return r};t.prototype.dispose=function t(){this.contentEl_=null;e.prototype.dispose.call(this)};t.prototype.updateShowing=function e(t){if(this.player().duration()===Infinity){this.show()}else{this.hide()}};return t}(yl);yl.registerComponent("LiveDisplay",xd);var Rd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.bar=n.getChild(n.options_.barName);n.vertical(!!n.options_.vertical);n.enable();return n}t.prototype.enabled=function e(){return this.enabled_};t.prototype.enable=function e(){if(this.enabled()){return}this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update)}this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=true};t.prototype.disable=function e(){if(!this.enabled()){return}var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update)}this.enabled_=false};t.prototype.createEl=function t(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};i.className=i.className+" vjs-slider";i=zo({tabIndex:0},i);n=zo({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n);return e.prototype.createEl.call(this,r,i,n)};t.prototype.handleMouseDown=function e(t){var r=this.bar.el_.ownerDocument;if(t.type==="mousedown"){t.preventDefault()}if(t.type==="touchstart"&&!Dl){t.preventDefault()}vu();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(r,"mousemove",this.handleMouseMove);this.on(r,"mouseup",this.handleMouseUp);this.on(r,"touchmove",this.handleMouseMove);this.on(r,"touchend",this.handleMouseUp);this.handleMouseMove(t)};t.prototype.handleMouseMove=function e(t){};t.prototype.handleMouseUp=function e(){var t=this.bar.el_.ownerDocument;gu();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.update()};t.prototype.update=function e(){if(!this.el_){return}var t=this.getPercent();var r=this.bar;if(!r){return}if(typeof t!=="number"||t!==t||t<0||t===Infinity){t=0}var i=(t*100).toFixed(2)+"%";var n=r.el().style;if(this.vertical()){n.height=i}else{n.width=i}return t};t.prototype.calculateDistance=function e(t){var r=bu(this.el_,t);if(this.vertical()){return r.y}return r.x};t.prototype.handleFocus=function e(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};t.prototype.handleKeyPress=function e(t){if(t.which===37||t.which===40){t.preventDefault();this.stepBack()}else if(t.which===38||t.which===39){t.preventDefault();this.stepForward()}};t.prototype.handleBlur=function e(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};t.prototype.handleClick=function e(t){t.stopImmediatePropagation();t.preventDefault()};t.prototype.vertical=function e(t){if(t===undefined){return this.vertical_||false}this.vertical_=!!t;if(this.vertical_){this.addClass("vjs-slider-vertical")}else{this.addClass("vjs-slider-horizontal")}};return t}(yl);yl.registerComponent("Slider",Rd);var Md=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.partEls_=[];n.on(r,"progress",n.update);return n}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})};t.prototype.dispose=function t(){this.partEls_=null;e.prototype.dispose.call(this)};t.prototype.update=function e(t){var r=this.player_.buffered();var i=this.player_.duration();var n=this.player_.bufferedEnd();var a=this.partEls_;var s=function e(t,r){var i=t/r||0;return(i>=1?1:i)*100+"%"};this.el_.style.width=s(n,i);for(var o=0;o<r.length;o++){var u=r.start(o);var l=r.end(o);var f=a[o];if(!f){f=this.el_.appendChild(nu());a[o]=f}f.style.left=s(u,n);f.style.width=s(l-u,n)}for(var d=a.length;d>r.length;d--){this.el_.removeChild(a[d-1])}a.length=r.length};return t}(yl);yl.registerComponent("LoadProgressBar",Md);var Bd=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})};t.prototype.update=function e(t,r,i){var n=yu(this.el_);var a=yu(this.player_.el());var s=t.width*r;if(!a||!n){return}var o=t.left-a.left+s;var u=t.width-s+(a.right-t.right);var l=n.width/2;if(o<l){l+=l-o}else if(u<l){l=u}if(l<0){l=0}else if(l>n.width){l=n.width}this.el_.style.right="-"+l+"px";au(this.el_,i)};return t}(yl);yl.registerComponent("TimeTooltip",Bd);var Nd=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})};t.prototype.update=function e(t,r){var i=this;if(this.rafId_){this.cancelAnimationFrame(this.rafId_)}this.rafId_=this.requestAnimationFrame((function(){var e=i.player_.scrubbing()?i.player_.getCache().currentTime:i.player_.currentTime();var n=Od(e,i.player_.duration());var a=i.getChild("timeTooltip");if(a){a.update(t,r,n)}}))};return t}(yl);Nd.prototype.options_={children:[]};if(!El&&!Al){Nd.prototype.options_.children.push("timeTooltip")}yl.registerComponent("PlayProgressBar",Nd);var jd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.update=el(Zu(n,n.update),25);return n}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};t.prototype.update=function e(t,r){var i=this;if(this.rafId_){this.cancelAnimationFrame(this.rafId_)}this.rafId_=this.requestAnimationFrame((function(){var e=i.player_.duration();var n=Od(r*e,e);i.el_.style.left=t.width*r+"px";i.getChild("timeTooltip").update(t,r,n)}))};return t}(yl);jd.prototype.options_={children:["timeTooltip"]};yl.registerComponent("MouseTimeDisplay",jd);var Fd=5;var Vd=30;var Hd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.setEventHandlers_();return n}t.prototype.setEventHandlers_=function e(){var t=this;this.update=el(Zu(this,this.update),Vd);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,"ended",this.handleEnded);this.updateInterval=null;this.on(this.player_,["playing"],(function(){t.clearInterval(t.updateInterval);t.updateInterval=t.setInterval((function(){t.requestAnimationFrame((function(){t.update()}))}),Vd)}));this.on(this.player_,["ended","pause","waiting"],(function(){t.clearInterval(t.updateInterval)}));this.on(this.player_,["timeupdate","ended"],this.update)};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};t.prototype.update_=function e(t,r){var i=this.player_.duration();this.el_.setAttribute("aria-valuenow",(r*100).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Od(t,i),Od(i,i)],"{1} of {2}"));this.bar.update(yu(this.el_),r)};t.prototype.update=function t(r){var i=e.prototype.update.call(this);this.update_(this.getCurrentTime_(),i);return i};t.prototype.getCurrentTime_=function e(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};t.prototype.handleEnded=function e(t){this.update_(this.player_.duration(),1)};t.prototype.getPercent=function e(){var t=this.getCurrentTime_()/this.player_.duration();return t>=1?1:t||0};t.prototype.handleMouseDown=function t(r){if(!Cu(r)){return}r.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();e.prototype.handleMouseDown.call(this,r)};t.prototype.handleMouseMove=function e(t){if(!Cu(t)){return}var r=this.calculateDistance(t)*this.player_.duration();if(r===this.player_.duration()){r=r-.1}this.player_.currentTime(r)};t.prototype.enable=function t(){e.prototype.enable.call(this);var r=this.getChild("mouseTimeDisplay");if(!r){return}r.show()};t.prototype.disable=function t(){e.prototype.disable.call(this);var r=this.getChild("mouseTimeDisplay");if(!r){return}r.hide()};t.prototype.handleMouseUp=function t(r){e.prototype.handleMouseUp.call(this,r);if(r){r.stopPropagation()}this.player_.scrubbing(false);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:true});if(this.videoWasPlaying){Zl(this.player_.play())}};t.prototype.stepForward=function e(){this.player_.currentTime(this.player_.currentTime()+Fd)};t.prototype.stepBack=function e(){this.player_.currentTime(this.player_.currentTime()-Fd)};t.prototype.handleAction=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};t.prototype.handleKeyPress=function t(r){if(r.which===32||r.which===13){r.preventDefault();this.handleAction(r)}else if(e.prototype.handleKeyPress){e.prototype.handleKeyPress.call(this,r)}};return t}(Rd);Hd.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};if(!El&&!Al){Hd.prototype.options_.children.splice(1,0,"mouseTimeDisplay")}Hd.prototype.playerEvent="timeupdate";yl.registerComponent("SeekBar",Hd);var qd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.handleMouseMove=el(Zu(n,n.handleMouseMove),25);n.throttledHandleMouseSeek=el(Zu(n,n.handleMouseSeek),25);n.enable();return n}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};t.prototype.handleMouseMove=function e(t){var r=this.getChild("seekBar");if(r){var i=r.getChild("mouseTimeDisplay");var n=r.el();var a=yu(n);var s=bu(n,t).x;if(s>1){s=1}else if(s<0){s=0}if(i){i.update(a,s)}}};t.prototype.handleMouseSeek=function e(t){var r=this.getChild("seekBar");if(r){r.handleMouseMove(t)}};t.prototype.enabled=function e(){return this.enabled_};t.prototype.disable=function e(){this.children().forEach((function(e){return e.disable&&e.disable()}));if(!this.enabled()){return}this.off(["mousedown","touchstart"],this.handleMouseDown);this.off(this.el_,"mousemove",this.handleMouseMove);this.handleMouseUp();this.addClass("disabled");this.enabled_=false};t.prototype.enable=function e(){this.children().forEach((function(e){return e.enable&&e.enable()}));if(this.enabled()){return}this.on(["mousedown","touchstart"],this.handleMouseDown);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=true};t.prototype.handleMouseDown=function e(t){var r=this.el_.ownerDocument;var i=this.getChild("seekBar");if(i){i.handleMouseDown(t)}this.on(r,"mousemove",this.throttledHandleMouseSeek);this.on(r,"touchmove",this.throttledHandleMouseSeek);this.on(r,"mouseup",this.handleMouseUp);this.on(r,"touchend",this.handleMouseUp)};t.prototype.handleMouseUp=function e(t){var r=this.el_.ownerDocument;var i=this.getChild("seekBar");if(i){i.handleMouseUp(t)}this.off(r,"mousemove",this.throttledHandleMouseSeek);this.off(r,"touchmove",this.throttledHandleMouseSeek);this.off(r,"mouseup",this.handleMouseUp);this.off(r,"touchend",this.handleMouseUp)};return t}(yl);qd.prototype.options_={children:["seekBar"]};yl.registerComponent("ProgressControl",qd);var Gd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.on(r,"fullscreenchange",n.handleFullscreenChange);if(v[Gl.fullscreenEnabled]===false){n.disable()}return n}t.prototype.buildCSSClass=function t(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)};t.prototype.handleFullscreenChange=function e(t){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen")}else{this.controlText("Fullscreen")}};t.prototype.handleClick=function e(t){if(!this.player_.isFullscreen()){this.player_.requestFullscreen()}else{this.player_.exitFullscreen()}};return t}(bd);Gd.prototype.controlText_="Fullscreen";yl.registerComponent("FullscreenToggle",Gd);var Wd=function e(t,r){if(r.tech_&&!r.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}t.on(r,"loadstart",(function(){if(!r.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}}))};var zd=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return t}(yl);yl.registerComponent("VolumeLevel",zd);var $d=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.on("slideractive",n.updateLastVolume_);n.on(r,"volumechange",n.updateARIAAttributes);r.ready((function(){return n.updateARIAAttributes()}));return n}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};t.prototype.handleMouseDown=function t(r){if(!Cu(r)){return}e.prototype.handleMouseDown.call(this,r)};t.prototype.handleMouseMove=function e(t){if(!Cu(t)){return}this.checkMuted();this.player_.volume(this.calculateDistance(t))};t.prototype.checkMuted=function e(){if(this.player_.muted()){this.player_.muted(false)}};t.prototype.getPercent=function e(){if(this.player_.muted()){return 0}return this.player_.volume()};t.prototype.stepForward=function e(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};t.prototype.stepBack=function e(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};t.prototype.updateARIAAttributes=function e(t){var r=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",r);this.el_.setAttribute("aria-valuetext",r+"%")};t.prototype.volumeAsPercentage_=function e(){return Math.round(this.player_.volume()*100)};t.prototype.updateLastVolume_=function e(){var t=this;var r=this.player_.volume();this.one("sliderinactive",(function(){if(t.player_.volume()===0){t.player_.lastVolume_(r)}}))};return t}(Rd);$d.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};$d.prototype.playerEvent="volumechange";yl.registerComponent("VolumeBar",$d);var Xd=function(e){jo(t,e);function t(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};No(this,t);i.vertical=i.vertical||false;if(typeof i.volumeBar==="undefined"||Xo(i.volumeBar)){i.volumeBar=i.volumeBar||{};i.volumeBar.vertical=i.vertical}var n=Fo(this,e.call(this,r,i));Wd(n,r);n.throttledHandleMouseMove=el(Zu(n,n.handleMouseMove),25);n.on("mousedown",n.handleMouseDown);n.on("touchstart",n.handleMouseDown);n.on(n.volumeBar,["focus","slideractive"],(function(){n.volumeBar.addClass("vjs-slider-active");n.addClass("vjs-slider-active");n.trigger("slideractive")}));n.on(n.volumeBar,["blur","sliderinactive"],(function(){n.volumeBar.removeClass("vjs-slider-active");n.removeClass("vjs-slider-active");n.trigger("sliderinactive")}));return n}t.prototype.createEl=function t(){var r="vjs-volume-horizontal";if(this.options_.vertical){r="vjs-volume-vertical"}return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+r})};t.prototype.handleMouseDown=function e(t){var r=this.el_.ownerDocument;this.on(r,"mousemove",this.throttledHandleMouseMove);this.on(r,"touchmove",this.throttledHandleMouseMove);this.on(r,"mouseup",this.handleMouseUp);this.on(r,"touchend",this.handleMouseUp)};t.prototype.handleMouseUp=function e(t){var r=this.el_.ownerDocument;this.off(r,"mousemove",this.throttledHandleMouseMove);this.off(r,"touchmove",this.throttledHandleMouseMove);this.off(r,"mouseup",this.handleMouseUp);this.off(r,"touchend",this.handleMouseUp)};t.prototype.handleMouseMove=function e(t){this.volumeBar.handleMouseMove(t)};return t}(yl);Xd.prototype.options_={children:["volumeBar"]};yl.registerComponent("VolumeControl",Xd);var Yd=function e(t,r){if(r.tech_&&!r.tech_.featuresMuteControl){t.addClass("vjs-hidden")}t.on(r,"loadstart",(function(){if(!r.tech_.featuresMuteControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}}))};var Kd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));Yd(n,r);n.on(r,["loadstart","volumechange"],n.update);return n}t.prototype.buildCSSClass=function t(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)};t.prototype.handleClick=function e(t){var r=this.player_.volume();var i=this.player_.lastVolume_();if(r===0){var n=i<.1?.1:i;this.player_.volume(n);this.player_.muted(false)}else{this.player_.muted(this.player_.muted()?false:true)}};t.prototype.update=function e(t){this.updateIcon_();this.updateControlText_()};t.prototype.updateIcon_=function e(){var t=this.player_.volume();var r=3;if(El){this.player_.muted(this.player_.tech_.el_.muted)}if(t===0||this.player_.muted()){r=0}else if(t<.33){r=1}else if(t<.67){r=2}for(var i=0;i<4;i++){lu(this.el_,"vjs-vol-"+i)}uu(this.el_,"vjs-vol-"+r)};t.prototype.updateControlText_=function e(){var t=this.player_.muted()||this.player_.volume()===0;var r=t?"Unmute":"Mute";if(this.controlText()!==r){this.controlText(r)}};return t}(bd);Kd.prototype.controlText_="Mute";yl.registerComponent("MuteToggle",Kd);var Qd=function(e){jo(t,e);function t(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};No(this,t);if(typeof i.inline!=="undefined"){i.inline=i.inline}else{i.inline=true}if(typeof i.volumeControl==="undefined"||Xo(i.volumeControl)){i.volumeControl=i.volumeControl||{};i.volumeControl.vertical=!i.inline}var n=Fo(this,e.call(this,r,i));n.on(r,["loadstart"],n.volumePanelState_);n.on(n.volumeControl,["slideractive"],n.sliderActive_);n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_);return n}t.prototype.sliderActive_=function e(){this.addClass("vjs-slider-active")};t.prototype.sliderInactive_=function e(){this.removeClass("vjs-slider-active")};t.prototype.volumePanelState_=function e(){if(this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-hidden")}if(this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-mute-toggle-only")}};t.prototype.createEl=function t(){var r="vjs-volume-panel-horizontal";if(!this.options_.inline){r="vjs-volume-panel-vertical"}return e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+r})};return t}(yl);Qd.prototype.options_={children:["muteToggle","volumeControl"]};yl.registerComponent("VolumePanel",Qd);var Jd=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));if(i){n.menuButton_=i.menuButton}n.focusedChild_=-1;n.on("keydown",n.handleKeyPress);return n}t.prototype.addItem=function e(t){this.addChild(t);t.on("click",Zu(this,(function(e){if(this.menuButton_){this.menuButton_.unpressButton();if(t.name()!=="CaptionSettingsMenuItem"){this.menuButton_.focus()}}})))};t.prototype.createEl=function t(){var r=this.options_.contentElType||"ul";this.contentEl_=nu(r,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});i.appendChild(this.contentEl_);Hu(i,"click",(function(e){e.preventDefault();e.stopImmediatePropagation()}));return i};t.prototype.dispose=function t(){this.contentEl_=null;e.prototype.dispose.call(this)};t.prototype.handleKeyPress=function e(t){if(t.which===37||t.which===40){t.preventDefault();this.stepForward()}else if(t.which===38||t.which===39){t.preventDefault();this.stepBack()}};t.prototype.stepForward=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_+1}this.focus(t)};t.prototype.stepBack=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_-1}this.focus(t)};t.prototype.focus=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=this.children().slice();var i=r.length&&r[0].className&&/vjs-menu-title/.test(r[0].className);if(i){r.shift()}if(r.length>0){if(t<0){t=0}else if(t>=r.length){t=r.length-1}this.focusedChild_=t;r[t].el_.focus()}};return t}(yl);yl.registerComponent("Menu",Jd);var Zd=function(e){jo(t,e);function t(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};No(this,t);var n=Fo(this,e.call(this,r,i));n.menuButton_=new bd(r,i);n.menuButton_.controlText(n.controlText_);n.menuButton_.el_.setAttribute("aria-haspopup","true");var a=bd.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+a;n.menuButton_.removeClass("vjs-control");n.addChild(n.menuButton_);n.update();n.enabled_=true;n.on(n.menuButton_,"tap",n.handleClick);n.on(n.menuButton_,"click",n.handleClick);n.on(n.menuButton_,"focus",n.handleFocus);n.on(n.menuButton_,"blur",n.handleBlur);n.on("keydown",n.handleSubmenuKeyPress);return n}t.prototype.update=function e(){var t=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu)}this.menu=t;this.addChild(t);this.buttonPressed_=false;this.menuButton_.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide()}else{this.show()}};t.prototype.createMenu=function e(){var t=new Jd(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var r=nu("li",{className:"vjs-menu-title",innerHTML:ml(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;t.children_.unshift(r);su(r,t.contentEl())}this.items=this.createItems();if(this.items){for(var i=0;i<this.items.length;i++){t.addItem(this.items[i])}}return t};t.prototype.createItems=function e(){};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};t.prototype.buildWrapperCSSClass=function t(){var r="vjs-menu-button";if(this.options_.inline===true){r+="-inline"}else{r+="-popup"}var i=bd.prototype.buildCSSClass();return"vjs-menu-button "+r+" "+i+" "+e.prototype.buildCSSClass.call(this)};t.prototype.buildCSSClass=function t(){var r="vjs-menu-button";if(this.options_.inline===true){r+="-inline"}else{r+="-popup"}return"vjs-menu-button "+r+" "+e.prototype.buildCSSClass.call(this)};t.prototype.controlText=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(t,r)};t.prototype.handleClick=function e(t){this.one(this.menu.contentEl(),"mouseleave",Zu(this,(function(e){this.unpressButton();this.el_.blur()})));if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};t.prototype.focus=function e(){this.menuButton_.focus()};t.prototype.blur=function e(){this.menuButton_.blur()};t.prototype.handleFocus=function e(){Hu(v,"keydown",Zu(this,this.handleKeyPress))};t.prototype.handleBlur=function e(){qu(v,"keydown",Zu(this,this.handleKeyPress))};t.prototype.handleKeyPress=function e(t){if(t.which===27||t.which===9){if(this.buttonPressed_){this.unpressButton()}if(t.which!==9){t.preventDefault();this.menuButton_.el_.focus()}}else if(t.which===38||t.which===40){if(!this.buttonPressed_){this.pressButton();t.preventDefault()}}};t.prototype.handleSubmenuKeyPress=function e(t){if(t.which===27||t.which===9){if(this.buttonPressed_){this.unpressButton()}if(t.which!==9){t.preventDefault();this.menuButton_.el_.focus()}}};t.prototype.pressButton=function e(){if(this.enabled_){this.buttonPressed_=true;this.menu.lockShowing();this.menuButton_.el_.setAttribute("aria-expanded","true");if(El&&ru()){return}this.menu.focus()}};t.prototype.unpressButton=function e(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menuButton_.el_.setAttribute("aria-expanded","false")}};t.prototype.disable=function e(){this.unpressButton();this.enabled_=false;this.addClass("vjs-disabled");this.menuButton_.disable()};t.prototype.enable=function e(){this.enabled_=true;this.removeClass("vjs-disabled");this.menuButton_.enable()};return t}(yl);yl.registerComponent("MenuButton",Zd);var ec=function(e){jo(t,e);function t(r,i){No(this,t);var n=i.tracks;var a=Fo(this,e.call(this,r,i));if(a.items.length<=1){a.hide()}if(!n){return Fo(a)}var s=Zu(a,a.update);n.addEventListener("removetrack",s);n.addEventListener("addtrack",s);a.player_.on("ready",s);a.player_.on("dispose",(function(){n.removeEventListener("removetrack",s);n.removeEventListener("addtrack",s)}));return a}return t}(Zd);yl.registerComponent("TrackButton",ec);var tc=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.selectable=i.selectable;n.isSelected_=i.selected||false;n.multiSelectable=i.multiSelectable;n.selected(n.isSelected_);if(n.selectable){if(n.multiSelectable){n.el_.setAttribute("role","menuitemcheckbox")}else{n.el_.setAttribute("role","menuitemradio")}}else{n.el_.setAttribute("role","menuitem")}return n}t.prototype.createEl=function t(r,i,n){this.nonIconControl=true;return e.prototype.createEl.call(this,"li",zo({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),n)};t.prototype.handleClick=function e(t){this.selected(true)};t.prototype.selected=function e(t){if(this.selectable){if(t){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");this.isSelected_=true}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText("");this.isSelected_=false}}};return t}(dd);yl.registerComponent("MenuItem",tc);var rc=function(e){jo(t,e);function t(r,i){No(this,t);var n=i.track;var a=r.textTracks();i.label=n.label||n.language||"Unknown";i.selected=n.mode==="showing";var s=Fo(this,e.call(this,r,i));s.track=n;var o=function e(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++){r[i]=arguments[i]}s.handleTracksChange.apply(s,r)};var u=function e(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++){r[i]=arguments[i]}s.handleSelectedLanguageChange.apply(s,r)};r.on(["loadstart","texttrackchange"],o);a.addEventListener("change",o);a.addEventListener("selectedlanguagechange",u);s.on("dispose",(function(){r.off(["loadstart","texttrackchange"],o);a.removeEventListener("change",o);a.removeEventListener("selectedlanguagechange",u)}));if(a.onchange===undefined){var l=void 0;s.on(["tap","click"],(function(){if(Bo(f.Event)!=="object"){try{l=new f.Event("change")}catch(e){}}if(!l){l=v.createEvent("Event");l.initEvent("change",true,true)}a.dispatchEvent(l)}))}s.handleTracksChange();return s}t.prototype.handleClick=function t(r){var i=this.track.kind;var n=this.track.kinds;var a=this.player_.textTracks();if(!n){n=[i]}e.prototype.handleClick.call(this,r);if(!a){return}for(var s=0;s<a.length;s++){var o=a[s];if(o===this.track&&n.indexOf(o.kind)>-1){if(o.mode!=="showing"){o.mode="showing"}}else if(o.mode!=="disabled"){o.mode="disabled"}}};t.prototype.handleTracksChange=function e(t){var r=this.track.mode==="showing";if(r!==this.isSelected_){this.selected(r)}};t.prototype.handleSelectedLanguageChange=function e(t){if(this.track.mode==="showing"){var r=this.player_.cache_.selectedLanguage;if(r&&r.enabled&&r.language===this.track.language&&r.kind!==this.track.kind){return}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind}}};t.prototype.dispose=function t(){this.track=null;e.prototype.dispose.call(this)};return t}(tc);yl.registerComponent("TextTrackMenuItem",rc);var ic=function(e){jo(t,e);function t(r,i){No(this,t);i.track={player:r,kind:i.kind,kinds:i.kinds,default:false,mode:"disabled"};if(!i.kinds){i.kinds=[i.kind]}if(i.label){i.track.label=i.label}else{i.track.label=i.kinds.join(" and ")+" off"}i.selectable=true;i.multiSelectable=false;return Fo(this,e.call(this,r,i))}t.prototype.handleTracksChange=function e(t){var r=this.player().textTracks();var i=true;for(var n=0,a=r.length;n<a;n++){var s=r[n];if(this.options_.kinds.indexOf(s.kind)>-1&&s.mode==="showing"){i=false;break}}if(i!==this.isSelected_){this.selected(i)}};t.prototype.handleSelectedLanguageChange=function e(t){var r=this.player().textTracks();var i=true;for(var n=0,a=r.length;n<a;n++){var s=r[n];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&s.mode==="showing"){i=false;break}}if(i){this.player_.cache_.selectedLanguage={enabled:false}}};return t}(rc);yl.registerComponent("OffTextTrackMenuItem",ic);var nc=function(e){jo(t,e);function t(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};No(this,t);i.tracks=r.textTracks();return Fo(this,e.call(this,r,i))}t.prototype.createItems=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:rc;var i=void 0;if(this.label_){i=this.label_+" off"}t.push(new ic(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i}));this.hideThreshold_+=1;var n=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_]}for(var a=0;a<n.length;a++){var s=n[a];if(this.kinds_.indexOf(s.kind)>-1){var o=new r(this.player_,{track:s,selectable:true,multiSelectable:false});o.addClass("vjs-"+s.kind+"-menu-item");t.push(o)}}return t};return t}(ec);yl.registerComponent("TextTrackButton",nc);var ac=function(e){jo(t,e);function t(r,i){No(this,t);var n=i.track;var a=i.cue;var s=r.currentTime();i.selectable=true;i.multiSelectable=false;i.label=a.text;i.selected=a.startTime<=s&&s<a.endTime;var o=Fo(this,e.call(this,r,i));o.track=n;o.cue=a;n.addEventListener("cuechange",Zu(o,o.update));return o}t.prototype.handleClick=function t(r){e.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};t.prototype.update=function e(t){var r=this.cue;var i=this.player_.currentTime();this.selected(r.startTime<=i&&i<r.endTime)};return t}(tc);yl.registerComponent("ChaptersTrackMenuItem",ac);var sc=function(e){jo(t,e);function t(r,i,n){No(this,t);return Fo(this,e.call(this,r,i,n))}t.prototype.buildCSSClass=function t(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)};t.prototype.buildWrapperCSSClass=function t(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)};t.prototype.update=function t(r){if(!this.track_||r&&(r.type==="addtrack"||r.type==="removetrack")){this.setTrack(this.findChaptersTrack())}e.prototype.update.call(this)};t.prototype.setTrack=function e(t){if(this.track_===t){return}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this)}if(this.track_){var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(r){r.removeEventListener("load",this.updateHandler_)}this.track_=null}this.track_=t;if(this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(i){i.addEventListener("load",this.updateHandler_)}}};t.prototype.findChaptersTrack=function e(){var t=this.player_.textTracks()||[];for(var r=t.length-1;r>=0;r--){var i=t[r];if(i.kind===this.kind_){return i}}};t.prototype.getMenuCaption=function e(){if(this.track_&&this.track_.label){return this.track_.label}return this.localize(ml(this.kind_))};t.prototype.createMenu=function t(){this.options_.title=this.getMenuCaption();return e.prototype.createMenu.call(this)};t.prototype.createItems=function e(){var t=[];if(!this.track_){return t}var r=this.track_.cues;if(!r){return t}for(var i=0,n=r.length;i<n;i++){var a=r[i];var s=new ac(this.player_,{track:this.track_,cue:a});t.push(s)}return t};return t}(nc);sc.prototype.kind_="chapters";sc.prototype.controlText_="Chapters";yl.registerComponent("ChaptersButton",sc);var oc=function(e){jo(t,e);function t(r,i,n){No(this,t);var a=Fo(this,e.call(this,r,i,n));var s=r.textTracks();var o=Zu(a,a.handleTracksChange);s.addEventListener("change",o);a.on("dispose",(function(){s.removeEventListener("change",o)}));return a}t.prototype.handleTracksChange=function e(t){var r=this.player().textTracks();var i=false;for(var n=0,a=r.length;n<a;n++){var s=r[n];if(s.kind!==this.kind_&&s.mode==="showing"){i=true;break}}if(i){this.disable()}else{this.enable()}};t.prototype.buildCSSClass=function t(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)};t.prototype.buildWrapperCSSClass=function t(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)};return t}(nc);oc.prototype.kind_="descriptions";oc.prototype.controlText_="Descriptions";yl.registerComponent("DescriptionsButton",oc);var uc=function(e){jo(t,e);function t(r,i,n){No(this,t);return Fo(this,e.call(this,r,i,n))}t.prototype.buildCSSClass=function t(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)};t.prototype.buildWrapperCSSClass=function t(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)};return t}(nc);uc.prototype.kind_="subtitles";uc.prototype.controlText_="Subtitles";yl.registerComponent("SubtitlesButton",uc);var lc=function(e){jo(t,e);function t(r,i){No(this,t);i.track={player:r,kind:i.kind,label:i.kind+" settings",selectable:false,default:false,mode:"disabled"};i.selectable=false;i.name="CaptionSettingsMenuItem";var n=Fo(this,e.call(this,r,i));n.addClass("vjs-texttrack-settings");n.controlText(", opens "+i.kind+" settings dialog");return n}t.prototype.handleClick=function e(t){this.player().getChild("textTrackSettings").open()};return t}(rc);yl.registerComponent("CaptionSettingsMenuItem",lc);var fc=function(e){jo(t,e);function t(r,i,n){No(this,t);return Fo(this,e.call(this,r,i,n))}t.prototype.buildCSSClass=function t(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)};t.prototype.buildWrapperCSSClass=function t(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)};t.prototype.createItems=function t(){var r=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){r.push(new lc(this.player_,{kind:this.kind_}));this.hideThreshold_+=1}return e.prototype.createItems.call(this,r)};return t}(nc);fc.prototype.kind_="captions";fc.prototype.controlText_="Captions";yl.registerComponent("CaptionsButton",fc);var dc=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.createEl=function t(r,i,n){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="captions"){a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "}a+="</span>";var s=e.prototype.createEl.call(this,r,zo({innerHTML:a},i),n);return s};return t}(rc);yl.registerComponent("SubsCapsMenuItem",dc);var cc=function(e){jo(t,e);function t(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};No(this,t);var n=Fo(this,e.call(this,r,i));n.label_="subtitles";if(["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1){n.label_="captions"}n.menuButton_.controlText(ml(n.label_));return n}t.prototype.buildCSSClass=function t(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)};t.prototype.buildWrapperCSSClass=function t(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)};t.prototype.createItems=function t(){var r=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){r.push(new lc(this.player_,{kind:this.label_}));this.hideThreshold_+=1}r=e.prototype.createItems.call(this,r,dc);return r};return t}(nc);cc.prototype.kinds_=["captions","subtitles"];cc.prototype.controlText_="Subtitles";yl.registerComponent("SubsCapsButton",cc);var hc=function(e){jo(t,e);function t(r,i){No(this,t);var n=i.track;var a=r.audioTracks();i.label=n.label||n.language||"Unknown";i.selected=n.enabled;var s=Fo(this,e.call(this,r,i));s.track=n;s.addClass("vjs-"+n.kind+"-menu-item");var o=function e(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++){r[i]=arguments[i]}s.handleTracksChange.apply(s,r)};a.addEventListener("change",o);s.on("dispose",(function(){a.removeEventListener("change",o)}));return s}t.prototype.createEl=function t(r,i,n){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="main-desc"){a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "}a+="</span>";var s=e.prototype.createEl.call(this,r,zo({innerHTML:a},i),n);return s};t.prototype.handleClick=function t(r){var i=this.player_.audioTracks();e.prototype.handleClick.call(this,r);for(var n=0;n<i.length;n++){var a=i[n];a.enabled=a===this.track}};t.prototype.handleTracksChange=function e(t){this.selected(this.track.enabled)};return t}(tc);yl.registerComponent("AudioTrackMenuItem",hc);var pc=function(e){jo(t,e);function t(r){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};No(this,t);i.tracks=r.audioTracks();return Fo(this,e.call(this,r,i))}t.prototype.buildCSSClass=function t(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)};t.prototype.buildWrapperCSSClass=function t(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)};t.prototype.createItems=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];this.hideThreshold_=1;var r=this.player_.audioTracks();for(var i=0;i<r.length;i++){var n=r[i];t.push(new hc(this.player_,{track:n,selectable:true,multiSelectable:false}))}return t};return t}(ec);pc.prototype.controlText_="Audio Track";yl.registerComponent("AudioTrackButton",pc);var mc=function(e){jo(t,e);function t(r,i){No(this,t);var n=i.rate;var a=parseFloat(n,10);i.label=n;i.selected=a===1;i.selectable=true;i.multiSelectable=false;var s=Fo(this,e.call(this,r,i));s.label=n;s.rate=a;s.on(r,"ratechange",s.update);return s}t.prototype.handleClick=function t(r){e.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};t.prototype.update=function e(t){this.selected(this.player().playbackRate()===this.rate)};return t}(tc);mc.prototype.contentElType="button";yl.registerComponent("PlaybackRateMenuItem",mc);var vc=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.updateVisibility();n.updateLabel();n.on(r,"loadstart",n.updateVisibility);n.on(r,"ratechange",n.updateLabel);return n}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this);this.labelEl_=nu("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});r.appendChild(this.labelEl_);return r};t.prototype.dispose=function t(){this.labelEl_=null;e.prototype.dispose.call(this)};t.prototype.buildCSSClass=function t(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)};t.prototype.buildWrapperCSSClass=function t(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)};t.prototype.createMenu=function e(){var t=new Jd(this.player());var r=this.playbackRates();if(r){for(var i=r.length-1;i>=0;i--){t.addChild(new mc(this.player(),{rate:r[i]+"x"}))}}return t};t.prototype.updateARIAAttributes=function e(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};t.prototype.handleClick=function e(t){var r=this.player().playbackRate();var i=this.playbackRates();var n=i[0];for(var a=0;a<i.length;a++){if(i[a]>r){n=i[a];break}}this.player().playbackRate(n)};t.prototype.playbackRates=function e(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};t.prototype.playbackRateSupported=function e(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0};t.prototype.updateVisibility=function e(t){if(this.playbackRateSupported()){this.removeClass("vjs-hidden")}else{this.addClass("vjs-hidden")}};t.prototype.updateLabel=function e(t){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x"}};return t}(Zd);vc.prototype.controlText_="Playback Rate";yl.registerComponent("PlaybackRateMenuButton",vc);var gc=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.buildCSSClass=function t(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return t}(yl);yl.registerComponent("Spacer",gc);var yc=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.buildCSSClass=function t(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)};t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,{className:this.buildCSSClass()});r.innerHTML=" ";return r};return t}(gc);yl.registerComponent("CustomControlSpacer",yc);var _c=function(e){jo(t,e);function t(){No(this,t);return Fo(this,e.apply(this,arguments))}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return t}(yl);_c.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};yl.registerComponent("ControlBar",_c);var bc=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));n.on(r,"error",n.open);return n}t.prototype.buildCSSClass=function t(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)};t.prototype.content=function e(){var t=this.player().error();return t?this.localize(t.message):""};return t}(of);bc.prototype.options_=gl(of.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});yl.registerComponent("ErrorDisplay",bc);var Tc="vjs-text-track-settings";var Sc=["#000","Black"];var wc=["#00F","Blue"];var kc=["#0FF","Cyan"];var Ec=["#0F0","Green"];var Cc=["#F0F","Magenta"];var Ac=["#F00","Red"];var Oc=["#FFF","White"];var Pc=["#FF0","Yellow"];var Ic=["1","Opaque"];var Lc=["0.5","Semi-Transparent"];var Dc=["0","Transparent"];var Uc={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Sc,Oc,Ac,Ec,wc,Pc,Cc,kc]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ic,Lc,Dc]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Oc,Sc,Ac,Ec,wc,Pc,Cc,kc]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function e(t){return t==="1.00"?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ic,Lc]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Dc,Lc,Ic]}};Uc.windowColor.options=Uc.backgroundColor.options;function xc(e,t){if(t){e=t(e)}if(e&&e!=="none"){return e}}function Rc(e,t){var r=e.options[e.options.selectedIndex].value;return xc(r,t)}function Mc(e,t,r){if(!t){return}for(var i=0;i<e.options.length;i++){if(xc(e.options[i].value,r)===t){e.selectedIndex=i;break}}}var Bc=function(e){jo(t,e);function t(r,i){No(this,t);i.temporary=false;var n=Fo(this,e.call(this,r,i));n.updateDisplay=Zu(n,n.updateDisplay);n.fill();n.hasBeenOpened_=n.hasBeenFilled_=true;n.endDialog=nu("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")});n.el().appendChild(n.endDialog);n.setDefaults();if(i.persistTextTrackSettings===undefined){n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings}n.on(n.$(".vjs-done-button"),"click",(function(){n.saveSettings();n.close()}));n.on(n.$(".vjs-default-button"),"click",(function(){n.setDefaults();n.updateDisplay()}));Go(Uc,(function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}));if(n.options_.persistTextTrackSettings){n.restoreSettings()}return n}t.prototype.dispose=function t(){this.endDialog=null;e.prototype.dispose.call(this)};t.prototype.createElSelect_=function e(t){var r=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"label";var a=Uc[t];var s=a.id.replace("%s",this.id_);var o=[i,s].join(" ").trim();return["<"+n+' id="'+s+'" class="'+(n==="label"?"vjs-label":"")+'">',this.localize(a.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(a.options.map((function(e){var t=s+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',r.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")};t.prototype.createElFgColor_=function e(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")};t.prototype.createElBgColor_=function e(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")};t.prototype.createElWinColor_=function e(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")};t.prototype.createElColors_=function e(){return nu("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};t.prototype.createElFont_=function e(){return nu("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};t.prototype.createElControls_=function e(){var t=this.localize("restore all settings to the default values");return nu("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};t.prototype.content=function e(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};t.prototype.label=function e(){return this.localize("Caption Settings Dialog")};t.prototype.description=function e(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};t.prototype.buildCSSClass=function t(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};t.prototype.getValues=function e(){var t=this;return Wo(Uc,(function(e,r,i){var n=Rc(t.$(r.selector),r.parser);if(n!==undefined){e[i]=n}return e}),{})};t.prototype.setValues=function e(t){var r=this;Go(Uc,(function(e,i){Mc(r.$(e.selector),t[i],e.parser)}))};t.prototype.setDefaults=function e(){var t=this;Go(Uc,(function(e){var r=e.hasOwnProperty("default")?e.default:0;t.$(e.selector).selectedIndex=r}))};t.prototype.restoreSettings=function e(){var t=void 0;try{t=JSON.parse(f.localStorage.getItem(Tc))}catch(r){Mo.warn(r)}if(t){this.setValues(t)}};t.prototype.saveSettings=function e(){if(!this.options_.persistTextTrackSettings){return}var t=this.getValues();try{if(Object.keys(t).length){f.localStorage.setItem(Tc,JSON.stringify(t))}else{f.localStorage.removeItem(Tc)}}catch(r){Mo.warn(r)}};t.prototype.updateDisplay=function e(){var t=this.player_.getChild("textTrackDisplay");if(t){t.updateDisplay()}};t.prototype.conditionalBlur_=function e(){this.previouslyActiveEl_=null;this.off(v,"keydown",this.handleKeyDown);var t=this.player_.controlBar;var r=t&&t.subsCapsButton;var i=t&&t.captionsButton;if(r){r.focus()}else if(i){i.focus()}};return t}(of);yl.registerComponent("TextTrackSettings",Bc);var Nc=function(e){jo(t,e);function t(r,i){No(this,t);var n=i.ResizeObserver||f.ResizeObserver;if(i.ResizeObserver===null){n=false}var a=gl({createEl:!n,reportTouchActivity:false},i);var s=Fo(this,e.call(this,r,a));s.ResizeObserver=i.ResizeObserver||f.ResizeObserver;s.loadListener_=null;s.resizeObserver_=null;s.debouncedHandler_=tl((function(){s.resizeHandler()}),100,false,s);if(n){s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_);s.resizeObserver_.observe(r.el())}else{s.loadListener_=function(){if(!s.el_||!s.el_.contentWindow){return}Hu(s.el_.contentWindow,"resize",s.debouncedHandler_)};s.one("load",s.loadListener_)}return s}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})};t.prototype.resizeHandler=function e(){if(!this.player_||!this.player_.trigger){return}this.player_.trigger("playerresize")};t.prototype.dispose=function e(){if(this.debouncedHandler_){this.debouncedHandler_.cancel()}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el())}this.resizeObserver_.disconnect()}if(this.el_&&this.el_.contentWindow){qu(this.el_.contentWindow,"resize",this.debouncedHandler_)}if(this.loadListener_){this.off("load",this.loadListener_)}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null};return t}(yl);yl.registerComponent("ResizeManager",Nc);var jc=function e(t){var r=t.el();if(r.hasAttribute("src")){t.triggerSourceset(r.src);return true}var i=t.$$("source");var n=[];var a="";if(!i.length){return false}for(var s=0;s<i.length;s++){var o=i[s].src;if(o&&n.indexOf(o)===-1){n.push(o)}}if(!n.length){return false}if(n.length===1){a=n[0]}t.triggerSourceset(a);return true};var Fc=Object.defineProperty({},"innerHTML",{get:function e(){return this.cloneNode(true).innerHTML},set:function e(t){var r=v.createElement(this.nodeName.toLowerCase());r.innerHTML=t;var i=v.createDocumentFragment();while(r.childNodes.length){i.appendChild(r.childNodes[0])}this.innerText="";f.Element.prototype.appendChild.call(this,i);return this.innerHTML}});var Vc=function e(t,r){var i={};for(var n=0;n<t.length;n++){i=Object.getOwnPropertyDescriptor(t[n],r);if(i&&i.set&&i.get){break}}i.enumerable=true;i.configurable=true;return i};var Hc=function e(t){return Vc([t.el(),f.HTMLMediaElement.prototype,f.Element.prototype,Fc],"innerHTML")};var qc=function e(t){var r=t.el();if(r.resetSourceWatch_){return}var i={};var n=Hc(t);var a=function e(i){return function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++){n[a]=arguments[a]}var s=i.apply(r,n);jc(t);return s}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){if(!r[e]){return}i[e]=r[e];r[e]=a(i[e])}));Object.defineProperty(r,"innerHTML",gl(n,{set:a(n.set)}));r.resetSourceWatch_=function(){r.resetSourceWatch_=null;Object.keys(i).forEach((function(e){r[e]=i[e]}));Object.defineProperty(r,"innerHTML",n)};t.one("sourceset",r.resetSourceWatch_)};var Gc=Object.defineProperty({},"src",{get:function e(){if(this.hasAttribute("src")){return wf(f.Element.prototype.getAttribute.call(this,"src"))}return""},set:function e(t){f.Element.prototype.setAttribute.call(this,"src",t);return t}});var Wc=function e(t){return Vc([t.el(),f.HTMLMediaElement.prototype,Gc],"src")};var zc=function e(t){if(!t.featuresSourceset){return}var r=t.el();if(r.resetSourceset_){return}var i=Wc(t);var n=r.setAttribute;var a=r.load;Object.defineProperty(r,"src",gl(i,{set:function e(n){var a=i.set.call(r,n);t.triggerSourceset(r.src);return a}}));r.setAttribute=function(e,i){var a=n.call(r,e,i);if(/src/i.test(e)){t.triggerSourceset(r.src)}return a};r.load=function(){var e=a.call(r);if(!jc(t)){t.triggerSourceset("");qc(t)}return e};if(r.currentSrc){t.triggerSourceset(r.currentSrc)}else if(!jc(t)){qc(t)}r.resetSourceset_=function(){r.resetSourceset_=null;r.load=a;r.setAttribute=n;Object.defineProperty(r,"src",i);if(r.resetSourceWatch_){r.resetSourceWatch_()}}};var $c=Vo(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);var Xc=function(e){jo(t,e);function t(r,i){No(this,t);var n=Fo(this,e.call(this,r,i));var a=r.source;var s=false;if(a&&(n.el_.currentSrc!==a.src||r.tag&&r.tag.initNetworkState_===3)){n.setSource(a)}else{n.handleLateInit_(n.el_)}if(r.enableSourceset){n.setupSourcesetHandling_()}if(n.el_.hasChildNodes()){var o=n.el_.childNodes;var u=o.length;var l=[];while(u--){var f=o[u];var d=f.nodeName.toLowerCase();if(d==="track"){if(!n.featuresNativeTextTracks){l.push(f)}else{n.remoteTextTrackEls().addTrackElement_(f);n.remoteTextTracks().addTrack(f.track);n.textTracks().addTrack(f.track);if(!s&&!n.el_.hasAttribute("crossorigin")&&Ef(f.src)){s=true}}}}for(var c=0;c<l.length;c++){n.el_.removeChild(l[c])}}n.proxyNativeTracks_();if(n.featuresNativeTextTracks&&s){Mo.warn(y($c))}n.restoreMetadataTracksInIOSNativePlayer_();if((Bl||wl||Pl)&&r.nativeControlsForTouch===true){n.setControls(true)}n.proxyWebkitFullscreen_();n.triggerReady();return n}t.prototype.dispose=function r(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_()}t.disposeMediaElement(this.el_);this.options_=null;e.prototype.dispose.call(this)};t.prototype.setupSourcesetHandling_=function e(){zc(this)};t.prototype.restoreMetadataTracksInIOSNativePlayer_=function e(){var t=this.textTracks();var r=void 0;var i=function e(){r=[];for(var i=0;i<t.length;i++){var n=t[i];if(n.kind==="metadata"){r.push({track:n,storedMode:n.mode})}}};i();t.addEventListener("change",i);this.on("dispose",(function(){return t.removeEventListener("change",i)}));var n=function e(){for(var i=0;i<r.length;i++){var n=r[i];if(n.track.mode==="disabled"&&n.track.mode!==n.storedMode){n.track.mode=n.storedMode}}t.removeEventListener("change",e)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",i);t.removeEventListener("change",n);t.addEventListener("change",n)}));this.on("webkitendfullscreen",(function(){t.removeEventListener("change",i);t.addEventListener("change",i);t.removeEventListener("change",n)}))};t.prototype.overrideNative_=function e(t,r){var i=this;if(r!==this["featuresNative"+t+"Tracks"]){return}var n=t.toLowerCase();if(this[n+"TracksListeners_"]){Object.keys(this[n+"TracksListeners_"]).forEach((function(e){var t=i.el()[n+"Tracks"];t.removeEventListener(e,i[n+"TracksListeners_"][e])}))}this["featuresNative"+t+"Tracks"]=!r;this[n+"TracksListeners_"]=null;this.proxyNativeTracksForType_(n)};t.prototype.overrideNativeAudioTracks=function e(t){this.overrideNative_("Audio",t)};t.prototype.overrideNativeVideoTracks=function e(t){this.overrideNative_("Video",t)};t.prototype.proxyNativeTracksForType_=function e(t){var r=this;var i=Bf[t];var n=this.el()[i.getterName];var a=this[i.getterName]();if(!this["featuresNative"+i.capitalName+"Tracks"]||!n||!n.addEventListener){return}var s={change:function e(t){a.trigger({type:"change",target:a,currentTarget:a,srcElement:a})},addtrack:function e(t){a.addTrack(t.track)},removetrack:function e(t){a.removeTrack(t.track)}};var o=function e(){var t=[];for(var r=0;r<a.length;r++){var i=false;for(var s=0;s<n.length;s++){if(n[s]===a[r]){i=true;break}}if(!i){t.push(a[r])}}while(t.length){a.removeTrack(t.shift())}};this[i.getterName+"Listeners_"]=s;Object.keys(s).forEach((function(e){var t=s[e];n.addEventListener(e,t);r.on("dispose",(function(r){return n.removeEventListener(e,t)}))}));this.on("loadstart",o);this.on("dispose",(function(e){return r.off("loadstart",o)}))};t.prototype.proxyNativeTracks_=function e(){var t=this;Bf.names.forEach((function(e){t.proxyNativeTracksForType_(e)}))};t.prototype.createEl=function e(){var r=this.options_.tag;if(!r||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(r){var i=r.cloneNode(true);if(r.parentNode){r.parentNode.insertBefore(i,r)}t.disposeMediaElement(r);r=i}else{r=v.createElement("video");var n=this.options_.tag&&cu(this.options_.tag);var a=gl({},n);if(!Bl||this.options_.nativeControlsForTouch!==true){delete a.controls}du(r,zo(a,{id:this.options_.techId,class:"vjs-tech"}))}r.playerId=this.options_.playerId}if(typeof this.options_.preload!=="undefined"){pu(r,"preload",this.options_.preload)}var s=["loop","muted","playsinline","autoplay"];for(var o=0;o<s.length;o++){var u=s[o];var l=this.options_[u];if(typeof l!=="undefined"){if(l){pu(r,u,u)}else{mu(r,u)}r[u]=l}}return r};t.prototype.handleLateInit_=function e(t){if(t.networkState===0||t.networkState===3){return}if(t.readyState===0){var r=false;var i=function e(){r=true};this.on("loadstart",i);var n=function e(){if(!r){this.trigger("loadstart")}};this.on("loadedmetadata",n);this.ready((function(){this.off("loadstart",i);this.off("loadedmetadata",n);if(!r){this.trigger("loadstart")}}));return}var a=["loadstart"];a.push("loadedmetadata");if(t.readyState>=2){a.push("loadeddata")}if(t.readyState>=3){a.push("canplay")}if(t.readyState>=4){a.push("canplaythrough")}this.ready((function(){a.forEach((function(e){this.trigger(e)}),this)}))};t.prototype.setCurrentTime=function e(t){try{this.el_.currentTime=t}catch(r){Mo(r,"Video is not ready. (Video.js)")}};t.prototype.duration=function e(){var t=this;if(this.el_.duration===Infinity&&Al&&Dl&&this.el_.currentTime===0){var r=function e(){if(t.el_.currentTime>0){if(t.el_.duration===Infinity){t.trigger("durationchange")}t.off("timeupdate",e)}};this.on("timeupdate",r);return NaN}return this.el_.duration||NaN};t.prototype.width=function e(){return this.el_.offsetWidth};t.prototype.height=function e(){return this.el_.offsetHeight};t.prototype.proxyWebkitFullscreen_=function e(){var t=this;if(!("webkitDisplayingFullscreen"in this.el_)){return}var r=function e(){this.trigger("fullscreenchange",{isFullscreen:false})};var i=function e(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",r);this.trigger("fullscreenchange",{isFullscreen:true})}};this.on("webkitbeginfullscreen",i);this.on("dispose",(function(){t.off("webkitbeginfullscreen",i);t.off("webkitendfullscreen",r)}))};t.prototype.supportsFullScreen=function e(){if(typeof this.el_.webkitEnterFullScreen==="function"){var t=f.navigator&&f.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t)){return true}}return false};t.prototype.enterFullScreen=function e(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA){this.el_.play();this.setTimeout((function(){t.pause();t.webkitEnterFullScreen()}),0)}else{t.webkitEnterFullScreen()}};t.prototype.exitFullScreen=function e(){this.el_.webkitExitFullScreen()};t.prototype.src=function e(t){if(t===undefined){return this.el_.src}this.setSrc(t)};t.prototype.reset=function e(){t.resetMediaElement(this.el_)};t.prototype.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src}return this.el_.currentSrc};t.prototype.setControls=function e(t){this.el_.controls=!!t};t.prototype.addTextTrack=function t(r,i,n){if(!this.featuresNativeTextTracks){return e.prototype.addTextTrack.call(this,r,i,n)}return this.el_.addTextTrack(r,i,n)};t.prototype.createRemoteTextTrack=function t(r){if(!this.featuresNativeTextTracks){return e.prototype.createRemoteTextTrack.call(this,r)}var i=v.createElement("track");if(r.kind){i.kind=r.kind}if(r.label){i.label=r.label}if(r.language||r.srclang){i.srclang=r.language||r.srclang}if(r.default){i.default=r.default}if(r.id){i.id=r.id}if(r.src){i.src=r.src}return i};t.prototype.addRemoteTextTrack=function t(r,i){var n=e.prototype.addRemoteTextTrack.call(this,r,i);if(this.featuresNativeTextTracks){this.el().appendChild(n)}return n};t.prototype.removeRemoteTextTrack=function t(r){e.prototype.removeRemoteTextTrack.call(this,r);if(this.featuresNativeTextTracks){var i=this.$$("track");var n=i.length;while(n--){if(r===i[n]||r===i[n].track){this.el().removeChild(i[n])}}}};t.prototype.getVideoPlaybackQuality=function e(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality()}var t={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){t.droppedVideoFrames=this.el().webkitDroppedFrameCount;t.totalVideoFrames=this.el().webkitDecodedFrameCount}if(f.performance&&typeof f.performance.now==="function"){t.creationTime=f.performance.now()}else if(f.performance&&f.performance.timing&&typeof f.performance.timing.navigationStart==="number"){t.creationTime=f.Date.now()-f.performance.timing.navigationStart}return t};return t}(Vf);if(eu()){Xc.TEST_VID=v.createElement("video");var Yc=v.createElement("track");Yc.kind="captions";Yc.srclang="en";Yc.label="English";Xc.TEST_VID.appendChild(Yc)}Xc.isSupported=function(){try{Xc.TEST_VID.volume=.5}catch(e){return false}return!!(Xc.TEST_VID&&Xc.TEST_VID.canPlayType)};Xc.canPlayType=function(e){return Xc.TEST_VID.canPlayType(e)};Xc.canPlaySource=function(e,t){return Xc.canPlayType(e.type)};Xc.canControlVolume=function(){try{var e=Xc.TEST_VID.volume;Xc.TEST_VID.volume=e/2+.1;return e!==Xc.TEST_VID.volume}catch(t){return false}};Xc.canMuteVolume=function(){try{var e=Xc.TEST_VID.muted;Xc.TEST_VID.muted=!e;if(Xc.TEST_VID.muted){pu(Xc.TEST_VID,"muted","muted")}else{mu(Xc.TEST_VID,"muted")}return e!==Xc.TEST_VID.muted}catch(t){return false}};Xc.canControlPlaybackRate=function(){if(Al&&Dl&&Ul<58){return false}try{var e=Xc.TEST_VID.playbackRate;Xc.TEST_VID.playbackRate=e/2+.1;return e!==Xc.TEST_VID.playbackRate}catch(t){return false}};Xc.canOverrideAttributes=function(){try{var e=function e(){};Object.defineProperty(v.createElement("video"),"src",{get:e,set:e});Object.defineProperty(v.createElement("audio"),"src",{get:e,set:e});Object.defineProperty(v.createElement("video"),"innerHTML",{get:e,set:e});Object.defineProperty(v.createElement("audio"),"innerHTML",{get:e,set:e})}catch(t){return false}return true};Xc.supportsNativeTextTracks=function(){return Ml||El&&Dl};Xc.supportsNativeVideoTracks=function(){return!!(Xc.TEST_VID&&Xc.TEST_VID.videoTracks)};Xc.supportsNativeAudioTracks=function(){return!!(Xc.TEST_VID&&Xc.TEST_VID.audioTracks)};Xc.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];Xc.prototype.featuresVolumeControl=Xc.canControlVolume();Xc.prototype.featuresMuteControl=Xc.canMuteVolume();Xc.prototype.featuresPlaybackRate=Xc.canControlPlaybackRate();Xc.prototype.featuresSourceset=Xc.canOverrideAttributes();Xc.prototype.movingMediaElementInDOM=!El;Xc.prototype.featuresFullscreenResize=true;Xc.prototype.featuresProgressEvents=true;Xc.prototype.featuresTimeupdateEvents=true;Xc.prototype.featuresNativeTextTracks=Xc.supportsNativeTextTracks();Xc.prototype.featuresNativeVideoTracks=Xc.supportsNativeVideoTracks();Xc.prototype.featuresNativeAudioTracks=Xc.supportsNativeAudioTracks();var Kc=Xc.TEST_VID&&Xc.TEST_VID.constructor.prototype.canPlayType;var Qc=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Xc.patchCanPlayType=function(){if(Ol>=4&&!Il&&!Dl){Xc.TEST_VID.constructor.prototype.canPlayType=function(e){if(e&&Qc.test(e)){return"maybe"}return Kc.call(this,e)}}};Xc.unpatchCanPlayType=function(){var e=Xc.TEST_VID.constructor.prototype.canPlayType;Xc.TEST_VID.constructor.prototype.canPlayType=Kc;return e};Xc.patchCanPlayType();Xc.disposeMediaElement=function(e){if(!e){return}if(e.parentNode){e.parentNode.removeChild(e)}while(e.hasChildNodes()){e.removeChild(e.firstChild)}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(t){}})()}};Xc.resetMediaElement=function(e){if(!e){return}var t=e.querySelectorAll("source");var r=t.length;while(r--){e.removeChild(t[r])}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(t){}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Xc.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}));["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Xc.prototype["set"+ml(e)]=function(t){this.el_[e]=t;if(t){this.el_.setAttribute(e,e)}else{this.el_.removeAttribute(e)}}}));["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach((function(e){Xc.prototype[e]=function(){return this.el_[e]}}));["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach((function(e){Xc.prototype["set"+ml(e)]=function(t){this.el_[e]=t}}));["pause","load","play"].forEach((function(e){Xc.prototype[e]=function(){return this.el_[e]()}}));Vf.withSourceHandlers(Xc);Xc.nativeSourceHandler={};Xc.nativeSourceHandler.canPlayType=function(e){try{return Xc.TEST_VID.canPlayType(e)}catch(t){return""}};Xc.nativeSourceHandler.canHandleSource=function(e,t){if(e.type){return Xc.nativeSourceHandler.canPlayType(e.type)}else if(e.src){var r=kf(e.src);return Xc.nativeSourceHandler.canPlayType("video/"+r)}return""};Xc.nativeSourceHandler.handleSource=function(e,t,r){t.setSrc(e.src)};Xc.nativeSourceHandler.dispose=function(){};Xc.registerSourceHandler(Xc.nativeSourceHandler);Vf.registerTech("Html5",Xc);var Jc=Vo(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);var Zc=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"];var eh={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"};var th=function(e){jo(t,e);function t(r,i,n){No(this,t);r.id=r.id||i.id||"vjs_video_"+Lu();i=zo(t.getTagSettings(r),i);i.initChildren=false;i.createEl=false;i.evented=false;i.reportTouchActivity=false;if(!i.language){if(typeof r.closest==="function"){var a=r.closest("[lang]");if(a&&a.getAttribute){i.language=a.getAttribute("lang")}}else{var s=r;while(s&&s.nodeType===1){if(cu(s).hasOwnProperty("lang")){i.language=s.getAttribute("lang");break}s=s.parentNode}}}var o=Fo(this,e.call(this,null,i,n));o.isPosterFromTech_=false;o.queuedCallbacks_=[];o.isReady_=false;o.hasStarted_=false;o.userActive_=false;if(!o.options_||!o.options_.techOrder||!o.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite "+"videojs.options instead of just changing the "+"properties you want to override?")}o.tag=r;o.tagAttributes=r&&cu(r);o.language(o.options_.language);if(i.languages){var u={};Object.getOwnPropertyNames(i.languages).forEach((function(e){u[e.toLowerCase()]=i.languages[e]}));o.languages_=u}else{o.languages_=t.prototype.options_.languages}o.cache_={};o.poster_=i.poster||"";o.controls_=!!i.controls;o.cache_.lastVolume=1;r.controls=false;r.removeAttribute("controls");if(r.hasAttribute("autoplay")){o.options_.autoplay=true}else{o.autoplay(o.options_.autoplay)}o.scrubbing_=false;o.el_=o.createEl();o.cache_.lastPlaybackRate=o.defaultPlaybackRate();cl(o,{eventBusKey:"el_"});var l=gl(o.options_);if(i.plugins){var f=i.plugins;Object.keys(f).forEach((function(e){if(typeof this[e]==="function"){this[e](f[e])}else{throw new Error('plugin "'+e+'" does not exist')}}),o)}o.options_.playerOptions=l;o.middleware_=[];o.initChildren();o.isAudio(r.nodeName.toLowerCase()==="audio");if(o.controls()){o.addClass("vjs-controls-enabled")}else{o.addClass("vjs-controls-disabled")}o.el_.setAttribute("role","region");if(o.isAudio()){o.el_.setAttribute("aria-label",o.localize("Audio Player"))}else{o.el_.setAttribute("aria-label",o.localize("Video Player"))}if(o.isAudio()){o.addClass("vjs-audio")}if(o.flexNotSupported_()){o.addClass("vjs-no-flex")}if(!El){o.addClass("vjs-workinghover")}t.players[o.id_]=o;var d=Lo.split(".")[0];o.addClass("vjs-v"+d);o.userActive(true);o.reportUserActivity();o.one("play",o.listenForUserActivity_);o.on("fullscreenchange",o.handleFullscreenChange_);o.on("stageclick",o.handleStageClick_);o.changingSrc_=false;o.playWaitingForReady_=false;o.playOnLoadstart_=null;return o}t.prototype.dispose=function r(){this.trigger("dispose");this.off("dispose");if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null}t.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null}if(this.el_&&this.el_.player){this.el_.player=null}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_=""}if(this.playerElIngest_){this.playerElIngest_=null}if(this.tag){this.tag=null}rd(this);e.prototype.dispose.call(this)};t.prototype.createEl=function t(){var r=this.tag;var i=void 0;var n=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player");var a=this.tag.tagName.toLowerCase()==="video-js";if(n){i=this.el_=r.parentNode}else if(!a){i=this.el_=e.prototype.createEl.call(this,"div")}var s=cu(r);if(a){i=this.el_=r;r=this.tag=v.createElement("video");while(i.children.length){r.appendChild(i.firstChild)}if(!ou(i,"video-js")){uu(i,"video-js")}i.appendChild(r);n=this.playerElIngest_=i;Object.keys(i).forEach((function(e){r[e]=i[e]}))}r.setAttribute("tabindex","-1");s.tabindex="-1";if(xl){r.setAttribute("role","application");s.role="application"}r.removeAttribute("width");r.removeAttribute("height");if("width"in s){delete s.width}if("height"in s){delete s.height}Object.getOwnPropertyNames(s).forEach((function(e){if(!(a&&e==="class")){i.setAttribute(e,s[e])}if(a){r.setAttribute(e,s[e])}}));r.playerId=r.id;r.id+="_html5_api";r.className="vjs-tech";r.player=i.player=this;this.addClass("vjs-paused");if(f.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=Qu("vjs-styles-dimensions");var o=Au(".vjs-styles-defaults");var u=Au("head");u.insertBefore(this.styleEl_,o?o.nextSibling:u.firstChild)}this.width(this.options_.width);this.height(this.options_.height);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);var l=r.getElementsByTagName("a");for(var d=0;d<l.length;d++){var c=l.item(d);uu(c,"vjs-hidden");c.setAttribute("hidden","hidden")}r.initNetworkState_=r.networkState;if(r.parentNode&&!n){r.parentNode.insertBefore(i,r)}su(r,i);this.children_.unshift(r);this.el_.setAttribute("lang",this.language_);this.el_=i;return i};t.prototype.width=function e(t){return this.dimension("width",t)};t.prototype.height=function e(t){return this.dimension("height",t)};t.prototype.dimension=function e(t,r){var i=t+"_";if(r===undefined){return this[i]||0}if(r===""){this[i]=undefined;this.updateStyleEl_();return}var n=parseFloat(r);if(isNaN(n)){Mo.error('Improper value "'+r+'" supplied for for '+t);return}this[i]=n;this.updateStyleEl_()};t.prototype.fluid=function e(t){if(t===undefined){return!!this.fluid_}this.fluid_=!!t;if(t){this.addClass("vjs-fluid")}else{this.removeClass("vjs-fluid")}this.updateStyleEl_()};t.prototype.aspectRatio=function e(t){if(t===undefined){return this.aspectRatio_}if(!/^\d+\:\d+$/.test(t)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.")}this.aspectRatio_=t;this.fluid(true);this.updateStyleEl_()};t.prototype.updateStyleEl_=function e(){if(f.VIDEOJS_NO_DYNAMIC_STYLE===true){var t=typeof this.width_==="number"?this.width_:this.options_.width;var r=typeof this.height_==="number"?this.height_:this.options_.height;var i=this.tech_&&this.tech_.el();if(i){if(t>=0){i.width=t}if(r>=0){i.height=r}}return}var n=void 0;var a=void 0;var s=void 0;var o=void 0;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){s=this.aspectRatio_}else if(this.videoWidth()>0){s=this.videoWidth()+":"+this.videoHeight()}else{s="16:9"}var u=s.split(":");var l=u[1]/u[0];if(this.width_!==undefined){n=this.width_}else if(this.height_!==undefined){n=this.height_/l}else{n=this.videoWidth()||300}if(this.height_!==undefined){a=this.height_}else{a=n*l}if(/^[^a-zA-Z]/.test(this.id())){o="dimensions-"+this.id()}else{o=this.id()+"-dimensions"}this.addClass(o);Ju(this.styleEl_,"\n      ."+o+" {\n        width: "+n+"px;\n        height: "+a+"px;\n      }\n\n      ."+o+".vjs-fluid {\n        padding-top: "+l*100+"%;\n      }\n    ")};t.prototype.loadTech_=function e(t,r){var i=this;if(this.tech_){this.unloadTech_()}var n=ml(t);var a=t.charAt(0).toLowerCase()+t.slice(1);if(n!=="Html5"&&this.tag){Vf.getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null}this.techName_=n;this.isReady_=false;var s=typeof this.autoplay()==="string"?false:this.autoplay();var o={source:r,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};jf.names.forEach((function(e){var t=jf[e];o[t.getterName]=i[t.privateName]}));zo(o,this.options_[n]);zo(o,this.options_[a]);zo(o,this.options_[t.toLowerCase()]);if(this.tag){o.tag=this.tag}if(r&&r.src===this.cache_.src&&this.cache_.currentTime>0){o.startTime=this.cache_.currentTime}var u=Vf.getTech(t);if(!u){throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'")}this.tech_=new u(o);this.tech_.ready(Zu(this,this.handleTechReady_),true);nf.jsonToTextTracks(this.textTracksJson_||[],this.tech_);Zc.forEach((function(e){i.on(i.tech_,e,i["handleTech"+ml(e)+"_"])}));Object.keys(eh).forEach((function(e){i.on(i.tech_,e,(function(t){if(i.tech_.playbackRate()===0&&i.tech_.seeking()){i.queuedCallbacks_.push({callback:i["handleTech"+eh[e]+"_"].bind(i),event:t});return}i["handleTech"+eh[e]+"_"](t)}))}));this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_()}if(this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)){su(this.tech_.el(),this.el())}if(this.tag){this.tag.player=null;this.tag=null}};t.prototype.unloadTech_=function e(){var t=this;jf.names.forEach((function(e){var r=jf[e];t[r.privateName]=t[r.getterName]()}));this.textTracksJson_=nf.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_="";this.trigger("posterchange")}this.isPosterFromTech_=false};t.prototype.tech=function e(t){if(t===undefined){Mo.warn(y(Jc))}return this.tech_};t.prototype.addTechControlsListeners_=function e(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};t.prototype.removeTechControlsListeners_=function e(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};t.prototype.handleTechReady_=function e(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume)}this.handleTechPosterChange_();this.handleTechDurationChange_()};t.prototype.handleTechLoadStart_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay")}else{this.hasStarted(false);this.trigger("loadstart")}this.manualAutoplay_(this.autoplay())};t.prototype.manualAutoplay_=function e(t){var r=this;if(!this.tech_||typeof t!=="string"){return}var i=function e(){var t=r.muted();r.muted(true);var i=r.play();if(!i||!i.then||!i.catch){return}return i.catch((function(e){r.muted(t)}))};var n=void 0;if(t==="any"){n=this.play();if(n&&n.then&&n.catch){n.catch((function(){return i()}))}}else if(t==="muted"){n=i()}else{n=this.play()}if(!n||!n.then||!n.catch){return}return n.then((function(){r.trigger({type:"autoplay-success",autoplay:t})})).catch((function(e){r.trigger({type:"autoplay-failure",autoplay:t})}))};t.prototype.updateSourceCaches_=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=t;var i="";if(typeof r!=="string"){r=t.src;i=t.type}if(/^blob:/.test(r)){return}this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(r&&!i){i=od(this,r)}this.cache_.source=gl({},t,{src:r,type:i});var n=this.cache_.sources.filter((function(e){return e.src&&e.src===r}));var a=[];var s=this.$$("source");var o=[];for(var u=0;u<s.length;u++){var l=cu(s[u]);a.push(l);if(l.src&&l.src===r){o.push(l.src)}}if(o.length&&!n.length){this.cache_.sources=a}else if(!n.length){this.cache_.sources=[this.cache_.source]}this.cache_.src=r};t.prototype.handleTechSourceset_=function e(t){var r=this;if(!this.changingSrc_){this.updateSourceCaches_(t.src);if(!t.src){var i=function e(t){if(t.type!=="sourceset"){r.updateSourceCaches_(r.techGet_("currentSrc"))}r.tech_.off(["sourceset","loadstart"],e)};this.tech_.one(["sourceset","loadstart"],i)}}this.trigger({src:t.src,type:"sourceset"})};t.prototype.hasStarted=function e(t){if(t===undefined){return this.hasStarted_}if(t===this.hasStarted_){return}this.hasStarted_=t;if(this.hasStarted_){this.addClass("vjs-has-started");this.trigger("firstplay")}else{this.removeClass("vjs-has-started")}};t.prototype.handleTechPlay_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play")};t.prototype.handleTechRateChange_=function e(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)}));this.queuedCallbacks_=[]}this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};t.prototype.handleTechWaiting_=function e(){var t=this;this.addClass("vjs-waiting");this.trigger("waiting");this.one("timeupdate",(function(){return t.removeClass("vjs-waiting")}))};t.prototype.handleTechCanPlay_=function e(){this.removeClass("vjs-waiting");this.trigger("canplay")};t.prototype.handleTechCanPlayThrough_=function e(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};t.prototype.handleTechPlaying_=function e(){this.removeClass("vjs-waiting");this.trigger("playing")};t.prototype.handleTechSeeking_=function e(){this.addClass("vjs-seeking");this.trigger("seeking")};t.prototype.handleTechSeeked_=function e(){this.removeClass("vjs-seeking");this.trigger("seeked")};t.prototype.handleTechFirstPlay_=function e(){if(this.options_.starttime){Mo.warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime)}this.addClass("vjs-has-started");this.trigger("firstplay")};t.prototype.handleTechPause_=function e(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};t.prototype.handleTechEnded_=function e(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play()}else if(!this.paused()){this.pause()}this.trigger("ended")};t.prototype.handleTechDurationChange_=function e(){this.duration(this.techGet_("duration"))};t.prototype.handleTechClick_=function e(t){if(!Cu(t)){return}if(!this.controls_){return}if(this.paused()){Zl(this.play())}else{this.pause()}};t.prototype.handleTechDoubleClick_=function e(t){if(!this.controls_){return}var r=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(e){return e.contains(t.target)}));if(!r){if(this.isFullscreen()){this.exitFullscreen()}else{this.requestFullscreen()}}};t.prototype.handleTechTap_=function e(){this.userActive(!this.userActive())};t.prototype.handleTechTouchStart_=function e(){this.userWasActive=this.userActive()};t.prototype.handleTechTouchMove_=function e(){if(this.userWasActive){this.reportUserActivity()}};t.prototype.handleTechTouchEnd_=function e(t){t.preventDefault()};t.prototype.handleFullscreenChange_=function e(){if(this.isFullscreen()){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};t.prototype.handleStageClick_=function e(){this.reportUserActivity()};t.prototype.handleTechFullscreenChange_=function e(t,r){if(r){this.isFullscreen(r.isFullscreen)}this.trigger("fullscreenchange")};t.prototype.handleTechError_=function e(){var t=this.tech_.error();this.error(t)};t.prototype.handleTechTextData_=function e(){var t=null;if(arguments.length>1){t=arguments[1]}this.trigger("textdata",t)};t.prototype.getCache=function e(){return this.cache_};t.prototype.techCall_=function e(t,r){this.ready((function(){if(t in Jf){return Yf(this.middleware_,this.tech_,t,r)}else if(t in Zf){return Kf(this.middleware_,this.tech_,t,r)}try{if(this.tech_){this.tech_[t](r)}}catch(e){Mo(e);throw e}}),true)};t.prototype.techGet_=function e(t){if(!this.tech_||!this.tech_.isReady_){return}if(t in Qf){return Xf(this.middleware_,this.tech_,t)}else if(t in Zf){return Kf(this.middleware_,this.tech_,t)}try{return this.tech_[t]()}catch(r){if(this.tech_[t]===undefined){Mo("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",r);throw r}if(r.name==="TypeError"){Mo("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",r);this.tech_.isReady_=false;throw r}Mo(r);throw r}};t.prototype.play=function e(){var t=this;var r=this.options_.Promise||f.Promise;if(r){return new r((function(e){t.play_(e)}))}return this.play_()};t.prototype.play_=function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Zl;if(this.playOnLoadstart_){this.off("loadstart",this.playOnLoadstart_)}if(!this.isReady_){if(this.playWaitingForReady_){return}this.playWaitingForReady_=true;this.ready((function(){t.playWaitingForReady_=false;r(t.play())}))}else if(!this.changingSrc_&&(this.src()||this.currentSrc())){r(this.techGet_("play"));return}else{this.playOnLoadstart_=function(){t.playOnLoadstart_=null;r(t.play())};this.one("loadstart",this.playOnLoadstart_)}};t.prototype.pause=function e(){this.techCall_("pause")};t.prototype.paused=function e(){return this.techGet_("paused")===false?false:true};t.prototype.played=function e(){return this.techGet_("played")||Hl(0,0)};t.prototype.scrubbing=function e(t){if(typeof t==="undefined"){return this.scrubbing_}this.scrubbing_=!!t;if(t){this.addClass("vjs-scrubbing")}else{this.removeClass("vjs-scrubbing")}};t.prototype.currentTime=function e(t){if(typeof t!=="undefined"){if(t<0){t=0}this.techCall_("setCurrentTime",t);return}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime};t.prototype.duration=function e(t){if(t===undefined){return this.cache_.duration!==undefined?this.cache_.duration:NaN}t=parseFloat(t);if(t<0){t=Infinity}if(t!==this.cache_.duration){this.cache_.duration=t;if(t===Infinity){this.addClass("vjs-live")}else{this.removeClass("vjs-live")}this.trigger("durationchange")}};t.prototype.remainingTime=function e(){return this.duration()-this.currentTime()};t.prototype.remainingTimeDisplay=function e(){return Math.floor(this.duration())-Math.floor(this.currentTime())};t.prototype.buffered=function e(){var e=this.techGet_("buffered");if(!e||!e.length){e=Hl(0,0)}return e};t.prototype.bufferedPercent=function e(){return ql(this.buffered(),this.duration())};t.prototype.bufferedEnd=function e(){var t=this.buffered();var r=this.duration();var i=t.end(t.length-1);if(i>r){i=r}return i};t.prototype.volume=function e(t){var r=void 0;if(t!==undefined){r=Math.max(0,Math.min(1,parseFloat(t)));this.cache_.volume=r;this.techCall_("setVolume",r);if(r>0){this.lastVolume_(r)}return}r=parseFloat(this.techGet_("volume"));return isNaN(r)?1:r};t.prototype.muted=function e(t){if(t!==undefined){this.techCall_("setMuted",t);return}return this.techGet_("muted")||false};t.prototype.defaultMuted=function e(t){if(t!==undefined){return this.techCall_("setDefaultMuted",t)}return this.techGet_("defaultMuted")||false};t.prototype.lastVolume_=function e(t){if(t!==undefined&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume};t.prototype.supportsFullScreen=function e(){return this.techGet_("supportsFullScreen")||false};t.prototype.isFullscreen=function e(t){if(t!==undefined){this.isFullscreen_=!!t;return}return!!this.isFullscreen_};t.prototype.requestFullscreen=function e(){var t=Gl;this.isFullscreen(true);if(t.requestFullscreen){Hu(v,t.fullscreenchange,Zu(this,(function e(r){this.isFullscreen(v[t.fullscreenElement]);if(this.isFullscreen()===false){qu(v,t.fullscreenchange,e)}this.trigger("fullscreenchange")})));this.el_[t.requestFullscreen]()}else if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen")}else{this.enterFullWindow();this.trigger("fullscreenchange")}};t.prototype.exitFullscreen=function e(){var t=Gl;this.isFullscreen(false);if(t.requestFullscreen){v[t.exitFullscreen]()}else if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen")}else{this.exitFullWindow();this.trigger("fullscreenchange")}};t.prototype.enterFullWindow=function e(){this.isFullWindow=true;this.docOrigOverflow=v.documentElement.style.overflow;Hu(v,"keydown",Zu(this,this.fullWindowOnEscKey));v.documentElement.style.overflow="hidden";uu(v.body,"vjs-full-window");this.trigger("enterFullWindow")};t.prototype.fullWindowOnEscKey=function e(t){if(t.keyCode===27){if(this.isFullscreen()===true){this.exitFullscreen()}else{this.exitFullWindow()}}};t.prototype.exitFullWindow=function e(){this.isFullWindow=false;qu(v,"keydown",this.fullWindowOnEscKey);v.documentElement.style.overflow=this.docOrigOverflow;lu(v.body,"vjs-full-window");this.trigger("exitFullWindow")};t.prototype.canPlayType=function e(t){var r=void 0;for(var i=0,n=this.options_.techOrder;i<n.length;i++){var a=n[i];var s=Vf.getTech(a);if(!s){s=yl.getComponent(a)}if(!s){Mo.error('The "'+a+'" tech is undefined. Skipped browser support check for that tech.');continue}if(s.isSupported()){r=s.canPlayType(t);if(r){return r}}}return""};t.prototype.selectSource=function e(t){var r=this;var i=this.options_.techOrder.map((function(e){return[e,Vf.getTech(e)]})).filter((function(e){var t=e[0],r=e[1];if(r){return r.isSupported()}Mo.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.');return false}));var n=function e(t,r,i){var n=void 0;t.some((function(e){return r.some((function(t){n=i(e,t);if(n){return true}}))}));return n};var a=void 0;var s=function e(t){return function(e,r){return t(r,e)}};var o=function e(t,i){var n=t[0],a=t[1];if(a.canPlaySource(i,r.options_[n.toLowerCase()])){return{source:i,tech:n}}};if(this.options_.sourceOrder){a=n(t,i,s(o))}else{a=n(i,t,o)}return a||false};t.prototype.src=function e(t){var r=this;if(typeof t==="undefined"){return this.cache_.src||""}var i=ud(t);if(!i.length){this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0);return}this.changingSrc_=true;this.cache_.sources=i;this.updateSourceCaches_(i[0]);zf(this,i[0],(function(e,t){r.middleware_=t;r.cache_.sources=i;r.updateSourceCaches_(e);var n=r.src_(e);if(n){if(i.length>1){return r.src(i.slice(1))}r.changingSrc_=false;r.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0);r.triggerReady();return}$f(t,r.tech_)}))};t.prototype.src_=function e(t){var r=this;var i=this.selectSource([t]);if(!i){return true}if(!vl(i.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(i.tech,i.source);this.tech_.ready((function(){r.changingSrc_=false}));return false}this.ready((function(){if(this.tech_.constructor.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",t)}else{this.techCall_("src",t.src)}this.changingSrc_=false}),true);return false};t.prototype.load=function e(){this.techCall_("load")};t.prototype.reset=function e(){if(this.tech_){this.tech_.clearTracks("text")}this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset")};t.prototype.currentSources=function e(){var t=this.currentSource();var r=[];if(Object.keys(t).length!==0){r.push(t)}return this.cache_.sources||r};t.prototype.currentSource=function e(){return this.cache_.source||{}};t.prototype.currentSrc=function e(){return this.currentSource()&&this.currentSource().src||""};t.prototype.currentType=function e(){return this.currentSource()&&this.currentSource().type||""};t.prototype.preload=function e(t){if(t!==undefined){this.techCall_("setPreload",t);this.options_.preload=t;return}return this.techGet_("preload")};t.prototype.autoplay=function e(t){if(t===undefined){return this.options_.autoplay||false}var r=void 0;if(typeof t==="string"&&/(any|play|muted)/.test(t)){this.options_.autoplay=t;this.manualAutoplay_(t);r=false}else if(!t){this.options_.autoplay=false}else{this.options_.autoplay=true}r=r||this.options_.autoplay;if(this.tech_){this.techCall_("setAutoplay",r)}};t.prototype.playsinline=function e(t){if(t!==undefined){this.techCall_("setPlaysinline",t);this.options_.playsinline=t;return this}return this.techGet_("playsinline")};t.prototype.loop=function e(t){if(t!==undefined){this.techCall_("setLoop",t);this.options_.loop=t;return}return this.techGet_("loop")};t.prototype.poster=function e(t){if(t===undefined){return this.poster_}if(!t){t=""}if(t===this.poster_){return}this.poster_=t;this.techCall_("setPoster",t);this.isPosterFromTech_=false;this.trigger("posterchange")};t.prototype.handleTechPosterChange_=function e(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";if(t!==this.poster_){this.poster_=t;this.isPosterFromTech_=true;this.trigger("posterchange")}}};t.prototype.controls=function e(t){if(t===undefined){return!!this.controls_}t=!!t;if(this.controls_===t){return}this.controls_=t;if(this.usingNativeControls()){this.techCall_("setControls",t)}if(this.controls_){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_()}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_()}}};t.prototype.usingNativeControls=function e(t){if(t===undefined){return!!this.usingNativeControls_}t=!!t;if(this.usingNativeControls_===t){return}this.usingNativeControls_=t;if(this.usingNativeControls_){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}};t.prototype.error=function e(t){if(t===undefined){return this.error_||null}if(t===null){this.error_=t;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close()}return}this.error_=new Kl(t);this.addClass("vjs-error");Mo.error("(CODE:"+this.error_.code+" "+Kl.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return};t.prototype.reportUserActivity=function e(t){this.userActivity_=true};t.prototype.userActive=function e(t){if(t===undefined){return this.userActive_}t=!!t;if(t===this.userActive_){return}this.userActive_=t;if(this.userActive_){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return}if(this.tech_){this.tech_.one("mousemove",(function(e){e.stopPropagation();e.preventDefault()}))}this.userActivity_=false;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")};t.prototype.listenForUserActivity_=function e(){var t=void 0;var r=void 0;var i=void 0;var n=Zu(this,this.reportUserActivity);var a=function e(t){if(t.screenX!==r||t.screenY!==i){r=t.screenX;i=t.screenY;n()}};var s=function e(){n();this.clearInterval(t);t=this.setInterval(n,250)};var o=function e(r){n();this.clearInterval(t)};this.on("mousedown",s);this.on("mousemove",a);this.on("mouseup",o);this.on("keydown",n);this.on("keyup",n);var u=void 0;this.setInterval((function(){if(!this.userActivity_){return}this.userActivity_=false;this.userActive(true);this.clearTimeout(u);var e=this.options_.inactivityTimeout;if(e<=0){return}u=this.setTimeout((function(){if(!this.userActivity_){this.userActive(false)}}),e)}),250)};t.prototype.playbackRate=function e(t){if(t!==undefined){this.techCall_("setPlaybackRate",t);return}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_("playbackRate")}return 1};t.prototype.defaultPlaybackRate=function e(t){if(t!==undefined){return this.techCall_("setDefaultPlaybackRate",t)}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("defaultPlaybackRate")}return 1};t.prototype.isAudio=function e(t){if(t!==undefined){this.isAudio_=!!t;return}return!!this.isAudio_};t.prototype.addTextTrack=function e(t,r,i){if(this.tech_){return this.tech_.addTextTrack(t,r,i)}};t.prototype.addRemoteTextTrack=function e(t,r){if(this.tech_){return this.tech_.addRemoteTextTrack(t,r)}};t.prototype.removeRemoteTextTrack=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=t.track,i=r===undefined?arguments[0]:r;if(this.tech_){return this.tech_.removeRemoteTextTrack(i)}};t.prototype.getVideoPlaybackQuality=function e(){return this.techGet_("getVideoPlaybackQuality")};t.prototype.videoWidth=function e(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};t.prototype.videoHeight=function e(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};t.prototype.language=function e(t){if(t===undefined){return this.language_}this.language_=String(t).toLowerCase()};t.prototype.languages=function e(){return gl(t.prototype.options_.languages,this.languages_)};t.prototype.toJSON=function e(){var t=gl(this.options_);var r=t.tracks;t.tracks=[];for(var i=0;i<r.length;i++){var n=r[i];n=gl(n);n.player=undefined;t.tracks[i]=n}return t};t.prototype.createModal=function e(t,r){var i=this;r=r||{};r.content=t||"";var n=new of(this,r);this.addChild(n);n.on("dispose",(function(){i.removeChild(n)}));n.open();return n};t.getTagSettings=function e(t){var r={sources:[],tracks:[]};var i=cu(t);var n=i["data-setup"];if(ou(t,"vjs-fluid")){i.fluid=true}if(n!==null){var a=xr(n||"{}"),s=a[0],o=a[1];if(s){Mo.error(s)}zo(i,o)}zo(r,i);if(t.hasChildNodes()){var u=t.childNodes;for(var l=0,f=u.length;l<f;l++){var d=u[l];var c=d.nodeName.toLowerCase();if(c==="source"){r.sources.push(cu(d))}else if(c==="track"){r.tracks.push(cu(d))}}}return r};t.prototype.flexNotSupported_=function e(){var t=v.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)};return t}(yl);jf.names.forEach((function(e){var t=jf[e];th.prototype[t.getterName]=function(){if(this.tech_){return this.tech_[t.getterName]()}this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}}));th.players={};var rh=f.navigator;th.prototype.options_={techOrder:Vf.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:rh&&(rh.languages&&rh.languages[0]||rh.userLanguage||rh.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};["ended","seeking","seekable","networkState","readyState"].forEach((function(e){th.prototype[e]=function(){return this.techGet_(e)}}));Zc.forEach((function(e){th.prototype["handleTech"+ml(e)+"_"]=function(){return this.trigger(e)}}));yl.registerComponent("Player",th);var ih="plugin";var nh="activePlugins_";var ah={};var sh=function e(t){return ah.hasOwnProperty(t)};var oh=function e(t){return sh(t)?ah[t]:undefined};var uh=function e(t,r){t[nh]=t[nh]||{};t[nh][r]=true};var lh=function e(t,r,i){var n=(i?"before":"")+"pluginsetup";t.trigger(n,r);t.trigger(n+":"+r.name,r)};var fh=function e(t,r){var i=function e(){lh(this,{name:t,plugin:r,instance:null},true);var i=r.apply(this,arguments);uh(this,t);lh(this,{name:t,plugin:r,instance:i});return i};Object.keys(r).forEach((function(e){i[e]=r[e]}));return i};var dh=function e(t,r){r.prototype.name=t;return function(){lh(this,{name:t,plugin:r,instance:null},true);for(var e=arguments.length,i=Array(e),n=0;n<e;n++){i[n]=arguments[n]}var a=new(Function.prototype.bind.apply(r,[null].concat([this].concat(i))));this[t]=function(){return a};lh(this,a.getEventHash());return a}};var ch=function(){function e(t){No(this,e);if(this.constructor===e){throw new Error("Plugin must be sub-classed; not directly instantiated.")}this.player=t;cl(this);delete this.trigger;pl(this,this.constructor.defaultState);uh(t,this.name);this.dispose=Zu(this,this.dispose);t.on("dispose",this.dispose)}e.prototype.version=function e(){return this.constructor.VERSION};e.prototype.getEventHash=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};t.name=this.name;t.plugin=this.constructor;t.instance=this;return t};e.prototype.trigger=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return Gu(this.eventBusEl_,t,this.getEventHash(r))};e.prototype.handleStateChanged=function e(t){};e.prototype.dispose=function e(){var t=this.name,r=this.player;this.trigger("dispose");this.off();r.off("dispose",this.dispose);r[nh][t]=false;this.player=this.state=null;r[t]=dh(t,ah[t])};e.isBasic=function t(r){var i=typeof r==="string"?oh(r):r;return typeof i==="function"&&!e.prototype.isPrototypeOf(i.prototype)};e.registerPlugin=function t(r,i){if(typeof r!=="string"){throw new Error('Illegal plugin name, "'+r+'", must be a string, was '+(typeof r==="undefined"?"undefined":Bo(r))+".")}if(sh(r)){Mo.warn('A plugin named "'+r+'" already exists. You may want to avoid re-registering plugins!')}else if(th.prototype.hasOwnProperty(r)){throw new Error('Illegal plugin name, "'+r+'", cannot share a name with an existing player method!')}if(typeof i!=="function"){throw new Error('Illegal plugin for "'+r+'", must be a function, was '+(typeof i==="undefined"?"undefined":Bo(i))+".")}ah[r]=i;if(r!==ih){if(e.isBasic(i)){th.prototype[r]=fh(r,i)}else{th.prototype[r]=dh(r,i)}}return i};e.deregisterPlugin=function e(t){if(t===ih){throw new Error("Cannot de-register base plugin.")}if(sh(t)){delete ah[t];delete th.prototype[t]}};e.getPlugins=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Object.keys(ah);var r=void 0;t.forEach((function(e){var t=oh(e);if(t){r=r||{};r[e]=t}}));return r};e.getPluginVersion=function e(t){var r=oh(t);return r&&r.VERSION||""};return e}();ch.getPlugin=oh;ch.BASE_PLUGIN_NAME=ih;ch.registerPlugin(ih,ch);th.prototype.usingPlugin=function(e){return!!this[nh]&&this[nh][e]===true};th.prototype.hasPlugin=function(e){return!!sh(e)};var hh=function e(t,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof r==="undefined"?"undefined":Bo(r)))}t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(r){t.super_=r}};var ph=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=function e(){t.apply(this,arguments)};var n={};if((typeof r==="undefined"?"undefined":Bo(r))==="object"){if(r.constructor!==Object.prototype.constructor){i=r.constructor}n=r}else if(typeof r==="function"){i=r}hh(i,t);for(var a in n){if(n.hasOwnProperty(a)){i.prototype[a]=n[a]}}return i};var mh=function e(t){return t.indexOf("#")===0?t.slice(1):t};function vh(e,t,r){var i=vh.getPlayer(e);if(i){if(t){Mo.warn('Player "'+e+'" is already initialised. Options will not be applied.')}if(r){i.ready(r)}return i}var n=typeof e==="string"?Au("#"+mh(e)):e;if(!tu(n)){throw new TypeError("The element or ID supplied is not valid. (videojs)")}if(!v.body.contains(n)){Mo.warn("The element supplied is not included in the DOM")}t=t||{};vh.hooks("beforesetup").forEach((function(e){var r=e(n,gl(t));if(!$o(r)||Array.isArray(r)){Mo.error("please return an object in beforesetup hooks");return}t=gl(t,r)}));var a=yl.getComponent("Player");i=new a(n,t,r);vh.hooks("setup").forEach((function(e){return e(i)}));return i}vh.hooks_={};vh.hooks=function(e,t){vh.hooks_[e]=vh.hooks_[e]||[];if(t){vh.hooks_[e]=vh.hooks_[e].concat(t)}return vh.hooks_[e]};vh.hook=function(e,t){vh.hooks(e,t)};vh.hookOnce=function(e,t){vh.hooks(e,[].concat(t).map((function(t){var r=function r(){vh.removeHook(e,r);return t.apply(undefined,arguments)};return r})))};vh.removeHook=function(e,t){var r=vh.hooks(e).indexOf(t);if(r<=-1){return false}vh.hooks_[e]=vh.hooks_[e].slice();vh.hooks_[e].splice(r,1);return true};if(f.VIDEOJS_NO_DYNAMIC_STYLE!==true&&eu()){var gh=Au(".vjs-styles-defaults");if(!gh){gh=Qu("vjs-styles-defaults");var yh=Au("head");if(yh){yh.insertBefore(gh,yh.firstChild)}Ju(gh,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Ku(1,vh);vh.VERSION=Lo;vh.options=th.prototype.options_;vh.getPlayers=function(){return th.players};vh.getPlayer=function(e){var t=th.players;var r=void 0;if(typeof e==="string"){var i=mh(e);var n=t[i];if(n){return n}r=Au("#"+i)}else{r=e}if(tu(r)){var a=r,s=a.player,o=a.playerId;if(s||t[o]){return s||t[o]}}};vh.getAllPlayers=function(){return Object.keys(th.players).map((function(e){return th.players[e]})).filter(Boolean)};vh.players=th.players;vh.getComponent=yl.getComponent;vh.registerComponent=function(e,t){if(Vf.isTech(t)){Mo.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")}yl.registerComponent.call(yl,e,t)};vh.getTech=Vf.getTech;vh.registerTech=Vf.registerTech;vh.use=Wf;Object.defineProperty(vh,"middleware",{value:{},writeable:false,enumerable:true});Object.defineProperty(vh.middleware,"TERMINATOR",{value:Gf,writeable:false,enumerable:true});vh.browser=Nl;vh.TOUCH_ENABLED=Bl;vh.extend=ph;vh.mergeOptions=gl;vh.bind=Zu;vh.registerPlugin=ch.registerPlugin;vh.deregisterPlugin=ch.deregisterPlugin;vh.plugin=function(e,t){Mo.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return ch.registerPlugin(e,t)};vh.getPlugins=ch.getPlugins;vh.getPlugin=ch.getPlugin;vh.getPluginVersion=ch.getPluginVersion;vh.addLanguage=function(e,t){var r;e=(""+e).toLowerCase();vh.options.languages=gl(vh.options.languages,(r={},r[e]=t,r));return vh.options.languages[e]};vh.log=Mo;vh.createTimeRange=vh.createTimeRanges=Hl;vh.formatTime=Od;vh.setFormatTime=Cd;vh.resetFormatTime=Ad;vh.parseUrl=Sf;vh.isCrossOrigin=Ef;vh.EventTarget=rl;vh.on=Hu;vh.one=Wu;vh.off=qu;vh.trigger=Gu;vh.xhr=qt;vh.TextTrack=Pf;vh.AudioTrack=If;vh.VideoTrack=Lf;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){vh[e]=function(){Mo.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead");return Pu[e].apply(null,arguments)}}));vh.computedStyle=Yo;vh.dom=Pu;vh.url=Cf;
/**
             * @videojs/http-streaming
             * @version 1.2.5
             * @copyright 2018 Brightcove, Inc
             * @license Apache-2.0
             */var _h=function e(t,r){if(/^[a-z]+:/i.test(r)){return r}if(!/\/\//i.test(t)){t=Mr.buildAbsoluteURL(f.location.href,t)}return Mr.buildAbsoluteURL(t,r)};var bh=function e(t,r){if(!(t instanceof r)){throw new TypeError("Cannot call a class as a function")}};var Th=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var Sh=function e(t,r,i){if(t===null)t=Function.prototype;var n=Object.getOwnPropertyDescriptor(t,r);if(n===undefined){var a=Object.getPrototypeOf(t);if(a===null){return undefined}else{return e(a,r,i)}}else if("value"in n){return n.value}else{var s=n.get;if(s===undefined){return undefined}return s.call(i)}};var wh=function e(t,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof r==="undefined"?"undefined":Bo(r)))}t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(r)Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r};var kh=function e(t,r){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return r&&((typeof r==="undefined"?"undefined":Bo(r))==="object"||typeof r==="function")?r:t};var Eh=function(){function e(e,t){var r=[];var i=true;var n=false;var a=undefined;try{for(var s=e[Symbol.iterator](),o;!(i=(o=s.next()).done);i=true){r.push(o.value);if(t&&r.length===t)break}}catch(u){n=true;a=u}finally{try{if(!i&&s["return"])s["return"]()}finally{if(n)throw a}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var Ch=vh.mergeOptions,Ah=vh.EventTarget,Oh=vh.log;var Ph=function e(t,r){["AUDIO","SUBTITLES"].forEach((function(e){for(var i in t.mediaGroups[e]){for(var n in t.mediaGroups[e][i]){var a=t.mediaGroups[e][i][n];r(a,e,i,n)}}}))};var Ih=function e(t,r,i){var n=r.slice();i=i||0;var a=Math.min(t.length,r.length+i);for(var s=i;s<a;s++){n[s-i]=Ch(t[s],n[s-i])}return n};var Lh=function e(t,r){if(!t.resolvedUri){t.resolvedUri=_h(r,t.uri)}if(t.key&&!t.key.resolvedUri){t.key.resolvedUri=_h(r,t.key.uri)}if(t.map&&!t.map.resolvedUri){t.map.resolvedUri=_h(r,t.map.uri)}};var Dh=function e(t,r){var i=Ch(t,{});var n=i.playlists[r.uri];if(!n){return null}if(n.segments&&r.segments&&n.segments.length===r.segments.length&&n.mediaSequence===r.mediaSequence){return null}var a=Ch(n,r);if(n.segments){a.segments=Ih(n.segments,r.segments,r.mediaSequence-n.mediaSequence)}a.segments.forEach((function(e){Lh(e,a.resolvedUri)}));for(var s=0;s<i.playlists.length;s++){if(i.playlists[s].uri===r.uri){i.playlists[s]=a}}i.playlists[r.uri]=a;return i};var Uh=function e(t){var r=t.playlists.length;while(r--){var i=t.playlists[r];t.playlists[i.uri]=i;i.resolvedUri=_h(t.uri,i.uri);i.id=r;if(!i.attributes){i.attributes={};Oh.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}};var xh=function e(t){Ph(t,(function(e){if(e.uri){e.resolvedUri=_h(t.uri,e.uri)}}))};var Rh=function e(t,r){var i=t.segments[t.segments.length-1];var n=void 0;if(r&&i&&i.duration){n=i.duration*1e3}else{n=(t.targetDuration||10)*500}return n};var Mh=function(e){wh(t,e);function t(e,r,i){bh(this,t);var n=kh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.srcUrl=e;n.hls_=r;n.withCredentials=i;if(!n.srcUrl){throw new Error("A non-empty playlist URL is required")}n.state="HAVE_NOTHING";n.on("mediaupdatetimeout",(function(){if(n.state!=="HAVE_METADATA"){return}n.state="HAVE_CURRENT_METADATA";n.request=n.hls_.xhr({uri:_h(n.master.uri,n.media().uri),withCredentials:n.withCredentials},(function(e,t){if(!n.request){return}if(e){return n.playlistRequestError(n.request,n.media().uri,"HAVE_METADATA")}n.haveMetadata(n.request,n.media().uri)}))}));return n}Th(t,[{key:"playlistRequestError",value:function e(t,r,i){this.request=null;if(i){this.state=i}this.error={playlist:this.master.playlists[r],status:t.status,message:"HLS playlist request error at URL: "+r,responseText:t.responseText,code:t.status>=500?4:2};this.trigger("error")}},{key:"haveMetadata",value:function e(t,r){var i=this;this.request=null;this.state="HAVE_METADATA";var n=new zr;n.push(t.responseText);n.end();n.manifest.uri=r;n.manifest.attributes=n.manifest.attributes||{};var a=Dh(this.master,n.manifest);this.targetDuration=n.manifest.targetDuration;if(a){this.master=a;this.media_=this.master.playlists[n.manifest.uri]}else{this.trigger("playlistunchanged")}if(!this.media().endList){f.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=f.setTimeout((function(){i.trigger("mediaupdatetimeout")}),Rh(this.media(),!!a))}this.trigger("loadedplaylist")}},{key:"dispose",value:function e(){this.stopRequest();f.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function e(){if(this.request){var t=this.request;this.request=null;t.onreadystatechange=null;t.abort()}}},{key:"media",value:function e(t){var r=this;if(!t){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var i=this.state;if(typeof t==="string"){if(!this.master.playlists[t]){throw new Error("Unknown playlist URI: "+t)}t=this.master.playlists[t]}var n=!this.media_||t.uri!==this.media_.uri;if(this.master.playlists[t.uri].endList){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null}this.state="HAVE_METADATA";this.media_=t;if(n){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!n){return}this.state="SWITCHING_MEDIA";if(this.request){if(_h(this.master.uri,t.uri)===this.request.url){return}this.request.onreadystatechange=null;this.request.abort();this.request=null}if(this.media_){this.trigger("mediachanging")}this.request=this.hls_.xhr({uri:_h(this.master.uri,t.uri),withCredentials:this.withCredentials},(function(e,n){if(!r.request){return}if(e){return r.playlistRequestError(r.request,t.uri,i)}r.haveMetadata(n,t.uri);if(i==="HAVE_MASTER"){r.trigger("loadedmetadata")}else{r.trigger("mediachange")}}))}},{key:"pause",value:function e(){this.stopRequest();f.clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA"}else{this.state="HAVE_MASTER"}}else if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA"}}},{key:"load",value:function e(t){var r=this;f.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(t){var n=i?i.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=f.setTimeout((function(){return r.load()}),n);return}if(!this.started){this.start();return}if(i&&!i.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}}},{key:"start",value:function e(){var t=this;this.started=true;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(e,r){if(!t.request){return}t.request=null;if(e){t.error={status:r.status,message:"HLS playlist request error at URL: "+t.srcUrl,responseText:r.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}var i=new zr;i.push(r.responseText);i.end();t.state="HAVE_MASTER";i.manifest.uri=t.srcUrl;if(i.manifest.playlists){t.master=i.manifest;Uh(t.master);xh(t.master);t.trigger("loadedplaylist");if(!t.request){t.media(i.manifest.playlists[0])}return}t.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:f.location.href,playlists:[{uri:t.srcUrl,id:0}]};t.master.playlists[t.srcUrl]=t.master.playlists[0];t.master.playlists[0].resolvedUri=t.srcUrl;t.master.playlists[0].attributes=t.master.playlists[0].attributes||{};t.haveMetadata(r,t.srcUrl);return t.trigger("loadedmetadata")}))}}]);return t}(Ah);var Bh=vh.createTimeRange;var Nh=function e(t,r){var i=0;var n=r-t.mediaSequence;var a=t.segments[n];if(a){if(typeof a.start!=="undefined"){return{result:a.start,precise:true}}if(typeof a.end!=="undefined"){return{result:a.end-a.duration,precise:true}}}while(n--){a=t.segments[n];if(typeof a.end!=="undefined"){return{result:i+a.end,precise:true}}i+=a.duration;if(typeof a.start!=="undefined"){return{result:i+a.start,precise:true}}}return{result:i,precise:false}};var jh=function e(t,r){var i=0;var n=void 0;var a=r-t.mediaSequence;for(;a<t.segments.length;a++){n=t.segments[a];if(typeof n.start!=="undefined"){return{result:n.start-i,precise:true}}i+=n.duration;if(typeof n.end!=="undefined"){return{result:n.end-i,precise:true}}}return{result:-1,precise:false}};var Fh=function e(t,r,i){var n=void 0;var a=void 0;if(typeof r==="undefined"){r=t.mediaSequence+t.segments.length}if(r<t.mediaSequence){return 0}n=Nh(t,r);if(n.precise){return n.result}a=jh(t,r);if(a.precise){return a.result}return n.result+i};var Vh=function e(t,r,i){if(!t){return 0}if(typeof i!=="number"){i=0}if(typeof r==="undefined"){if(t.totalDuration){return t.totalDuration}if(!t.endList){return f.Infinity}}return Fh(t,r,i)};var Hh=function e(t,r,i){var n=0;if(r>i){var a=[i,r];r=a[0];i=a[1]}if(r<0){for(var s=r;s<Math.min(0,i);s++){n+=t.targetDuration}r=0}for(var o=r;o<i;o++){n+=t.segments[o].duration}return n};var qh=function e(t){if(!t.segments.length){return 0}var r=t.segments.length-1;var i=t.segments[r].duration||t.targetDuration;var n=i+t.targetDuration*2;while(r--){i+=t.segments[r].duration;if(i>=n){break}}return Math.max(0,r)};var Gh=function e(t,r,i){if(!t||!t.segments){return null}if(t.endList){return Vh(t)}if(r===null){return null}r=r||0;var n=i?qh(t):t.segments.length;return Fh(t,t.mediaSequence+n,r)};var Wh=function e(t,r){var i=true;var n=r||0;var a=Gh(t,r,i);if(a===null){return Bh()}return Bh(n,a)};var zh=function e(t){return t-Math.floor(t)===0};var $h=function e(t,r){if(zh(r)){return r+t*.1}var i=r.toString().split(".")[1].length;for(var n=1;n<=i;n++){var a=Math.pow(10,n);var s=r*a;if(zh(s)||n===i){return(s+t)/a}}};var Xh=$h.bind(null,1);var Yh=$h.bind(null,-1);var Kh=function e(t,r,i,n){var a=void 0;var s=void 0;var o=t.segments.length;var u=r-n;if(u<0){if(i>0){for(a=i-1;a>=0;a--){s=t.segments[a];u+=Yh(s.duration);if(u>0){return{mediaIndex:a,startTime:n-Hh(t,i,a)}}}}return{mediaIndex:0,startTime:r}}if(i<0){for(a=i;a<0;a++){u-=t.targetDuration;if(u<0){return{mediaIndex:0,startTime:r}}}i=0}for(a=i;a<o;a++){s=t.segments[a];u-=Xh(s.duration);if(u<0){return{mediaIndex:a,startTime:n+Hh(t,i,a)}}}return{mediaIndex:o-1,startTime:r}};var Qh=function e(t){return t.excludeUntil&&t.excludeUntil>Date.now()};var Jh=function e(t){return t.excludeUntil&&t.excludeUntil===Infinity};var Zh=function e(t){var r=Qh(t);return!t.disabled&&!r};var ep=function e(t){return t.disabled};var tp=function e(t){for(var r=0;r<t.segments.length;r++){if(t.segments[r].key){return true}}return false};var rp=function e(t){for(var r=0;r<t.segments.length;r++){if(t.segments[r].map){return true}}return false};var ip=function e(t,r){return r.attributes&&r.attributes[t]};var np=function e(t,r,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(!ip("BANDWIDTH",i)){return NaN}var a=t*i.attributes.BANDWIDTH;return(a-n*8)/r};var ap=function e(t,r){if(t.playlists.length===1){return true}var i=r.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter((function(e){if(!Zh(e)){return false}return(e.attributes.BANDWIDTH||0)<i})).length===0};var sp={duration:Vh,seekable:Wh,safeLiveIndex:qh,getMediaInfoForTime:Kh,isEnabled:Zh,isDisabled:ep,isBlacklisted:Qh,isIncompatible:Jh,playlistEnd:Gh,isAes:tp,isFmp4:rp,hasAttribute:ip,estimateSegmentRequestTime:np,isLowestEnabledRendition:ap};var op=vh.xhr,up=vh.mergeOptions;var lp=function e(){var t=function e(t,r){t=up({timeout:45e3},t);var i=e.beforeRequest||vh.Hls.xhr.beforeRequest;if(i&&typeof i==="function"){var n=i(t);if(n){t=n}}var a=op(t,(function(e,t){var i=a.response;if(!e&&i){a.responseTime=Date.now();a.roundTripTime=a.responseTime-a.requestTime;a.bytesReceived=i.byteLength||i.length;if(!a.bandwidth){a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3)}}if(t.headers){a.responseHeaders=t.headers}if(e&&e.code==="ETIMEDOUT"){a.timedout=true}if(!e&&!a.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0){e=new Error("XHR Failed with a response of: "+(a&&(i||a.responseText)))}r(e,a)}));var s=a.abort;a.abort=function(){a.aborted=true;return s.apply(a,arguments)};a.uri=t.uri;a.requestTime=Date.now();return a};return t};var fp=function e(t,r){return t.start(r)+"-"+t.end(r)};var dp=function e(t,r){var i=t.toString(16);return"00".substring(0,2-i.length)+i+(r%2?" ":"")};var cp=function e(t){if(t>=32&&t<126){return String.fromCharCode(t)}return"."};var hp=function e(t){var r={};Object.keys(t).forEach((function(e){var i=t[e];if(ArrayBuffer.isView(i)){r[e]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}}else{r[e]=i}}));return r};var pp=function e(t){var r=t.byterange||{length:Infinity,offset:0};return[r.length,r.offset,t.resolvedUri].join(",")};var mp=function e(t){var r=Array.prototype.slice.call(t);var i=16;var n="";var a=void 0;var s=void 0;for(var o=0;o<r.length/i;o++){a=r.slice(o*i,o*i+i).map(dp).join("");s=r.slice(o*i,o*i+i).map(cp).join("");n+=a+" "+s+"\n"}return n};var vp=function e(t){var r=t.bytes;return mp(r)};var gp=function e(t){var r="";var i=void 0;for(i=0;i<t.length;i++){r+=fp(t,i)+" "}return r};var yp=Object.freeze({createTransferableMessage:hp,initSegmentId:pp,hexDump:mp,tagDump:vp,textRanges:gp});var _p=1/30;var bp=_p*3;var Tp=function e(t,r){var i=[];var n=void 0;if(t&&t.length){for(n=0;n<t.length;n++){if(r(t.start(n),t.end(n))){i.push([t.start(n),t.end(n)])}}}return vh.createTimeRanges(i)};var Sp=function e(t,r){return Tp(t,(function(e,t){return e-_p<=r&&t+_p>=r}))};var wp=function e(t,r){return Tp(t,(function(e){return e-_p>=r}))};var kp=function e(t){if(t.length<2){return vh.createTimeRanges()}var r=[];for(var i=1;i<t.length;i++){var n=t.end(i-1);var a=t.start(i);r.push([n,a])}return vh.createTimeRanges(r)};var Ep=function e(t){var r=[];if(!t||!t.length){return""}for(var i=0;i<t.length;i++){r.push(t.start(i)+" => "+t.end(i))}return r.join(", ")};var Cp=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var n=t.length?t.end(t.length-1):0;return(n-r)/i};var Ap=function e(t){var r=[];for(var i=0;i<t.length;i++){r.push({start:t.start(i),end:t.end(i)})}return r};var Op=function e(t,r,i){var n=r.player_;if(i.captions&&i.captions.length){if(!t.inbandTextTracks_){t.inbandTextTracks_={}}for(var a in i.captionStreams){if(!t.inbandTextTracks_[a]){n.tech_.trigger({type:"usage",name:"hls-608"});var s=n.textTracks().getTrackById(a);if(s){t.inbandTextTracks_[a]=s}else{t.inbandTextTracks_[a]=n.addRemoteTextTrack({kind:"captions",id:a,label:a},false).track}}}}if(i.metadata&&i.metadata.length&&!t.metadataTrack_){t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;t.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType}};var Pp=function e(t,r,i){var n=void 0;var a=void 0;if(!i){return}if(!i.cues){return}n=i.cues.length;while(n--){a=i.cues[n];if(a.startTime<=r&&a.endTime>=t){i.removeCue(a)}}};var Ip=function e(t){Object.defineProperties(t.frame,{id:{get:function e(){vh.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return t.value.key}},value:{get:function e(){vh.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return t.value.data}},privateData:{get:function e(){vh.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return t.value.data}}})};var Lp=function e(t){var r=void 0;if(isNaN(t)||Math.abs(t)===Infinity){r=Number.MAX_VALUE}else{r=t}return r};var Dp=function e(t,r,i){var n=f.WebKitDataCue||f.VTTCue;if(r){r.forEach((function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new n(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))}),t)}if(i){var a=Lp(t.mediaSource_.duration);i.forEach((function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach((function(e){var r=new n(t,t,e.value||e.url||e.data||"");r.frame=e;r.value=e;Ip(r);this.metadataTrack_.addCue(r)}),this)}),t);if(t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){var s=t.metadataTrack_.cues;var o=[];for(var u=0;u<s.length;u++){if(s[u]){o.push(s[u])}}var l=o.reduce((function(e,t){var r=e[t.startTime]||[];r.push(t);e[t.startTime]=r;return e}),{});var d=Object.keys(l).sort((function(e,t){return Number(e)-Number(t)}));d.forEach((function(e,t){var r=l[e];var i=Number(d[t+1])||a;r.forEach((function(e){e.endTime=i}))}))}}};var Up=typeof window!=="undefined"?window:{},xp=typeof Symbol==="undefined"?"__target":Symbol(),Rp="application/javascript",Mp=Up.BlobBuilder||Up.WebKitBlobBuilder||Up.MozBlobBuilder||Up.MSBlobBuilder,Bp=Up.URL||Up.webkitURL||Bp&&Bp.msURL,Np=Up.Worker;function jp(e,t){return function r(i){var n=this;if(!t){return new Np(e)}else if(Np&&!i){var a=t.toString().replace(/^function.+?{/,"").slice(0,-1),s=qp(a);this[xp]=new Np(s);Gp(this[xp],s);return this[xp]}else{var o={postMessage:function e(t){if(n.onmessage){setTimeout((function(){n.onmessage({data:t,target:o})}))}}};t.call(o);this.postMessage=function(e){setTimeout((function(){o.onmessage({data:e,target:n})}))};this.isThisThread=true}}}if(Np){var Fp,Vp=qp("self.onmessage = function () {}"),Hp=new Uint8Array(1);try{Fp=new Np(Vp);Fp.postMessage(Hp,[Hp.buffer])}catch(Qv){Np=null}finally{Bp.revokeObjectURL(Vp);if(Fp){Fp.terminate()}}}function qp(e){try{return Bp.createObjectURL(new Blob([e],{type:Rp}))}catch(Qv){var t=new Mp;t.append(e);return Bp.createObjectURL(t.getBlob(type))}}function Gp(e,t){if(!e||!t)return;var r=e.terminate;e.objURL=t;e.terminate=function(){if(e.objURL)Bp.revokeObjectURL(e.objURL);r.call(e)}}var Wp=new jp("./transmuxer-worker.worker.js",(function(e,t){var r=this;var i=function(){var e=Math.pow(2,32)-1;var t,i,n,a,s,o,u,l,f,d,c,h,p,m,v,g,y,_,b,T,S,w,k,E,C,A,O,P,I,L,D,U,x,R,M,B;(function(){var e;k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(e in k){if(k.hasOwnProperty(e)){k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]}}E=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);C=new Uint8Array([0,0,0,1]);O=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);I={video:O,audio:P};U=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);D=new Uint8Array([0,0,0,0,0,0,0,0]);x=new Uint8Array([0,0,0,0,0,0,0,0]);R=x;M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);B=x;L=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();t=function e(t){var r=[],i=0,n,a,s;for(n=1;n<arguments.length;n++){r.push(arguments[n])}n=r.length;while(n--){i+=r[n].byteLength}a=new Uint8Array(i+8);s=new DataView(a.buffer,a.byteOffset,a.byteLength);s.setUint32(0,a.byteLength);a.set(t,4);for(n=0,i=8;n<r.length;n++){a.set(r[n],i);i+=r[n].byteLength}return a};i=function e(){return t(k.dinf,t(k.dref,U))};n=function e(r){return t(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,r.audioobjecttype<<3|r.samplingfrequencyindex>>>1,r.samplingfrequencyindex<<7|r.channelcount<<3,6,1,2]))};a=function e(){return t(k.ftyp,E,C,E,A)};g=function e(r){return t(k.hdlr,I[r])};s=function e(r){return t(k.mdat,r)};v=function e(r){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,r.duration>>>24&255,r.duration>>>16&255,r.duration>>>8&255,r.duration&255,85,196,0,0]);if(r.samplerate){i[12]=r.samplerate>>>24&255;i[13]=r.samplerate>>>16&255;i[14]=r.samplerate>>>8&255;i[15]=r.samplerate&255}return t(k.mdhd,i)};m=function e(r){return t(k.mdia,v(r),g(r.type),u(r))};o=function e(r){return t(k.mfhd,new Uint8Array([0,0,0,0,(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255]))};u=function e(r){return t(k.minf,r.type==="video"?t(k.vmhd,L):t(k.smhd,D),i(),_(r))};l=function e(r,i){var n=[],a=i.length;while(a--){n[a]=T(i[a])}return t.apply(null,[k.moof,o(r)].concat(n))};f=function e(r){var i=r.length,n=[];while(i--){n[i]=h(r[i])}return t.apply(null,[k.moov,c(4294967295)].concat(n).concat(d(r)))};d=function e(r){var i=r.length,n=[];while(i--){n[i]=S(r[i])}return t.apply(null,[k.mvex].concat(n))};c=function e(r){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(k.mvhd,i)};y=function e(r){var i=r.samples||[],n=new Uint8Array(4+i.length),a,s;for(s=0;s<i.length;s++){a=i[s].flags;n[s+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return t(k.sdtp,n)};_=function e(r){return t(k.stbl,b(r),t(k.stts,B),t(k.stsc,R),t(k.stsz,M),t(k.stco,x))};(function(){var e,r;b=function i(n){return t(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),n.type==="video"?e(n):r(n))};e=function e(r){var i=r.sps||[],n=r.pps||[],a=[],s=[],o;for(o=0;o<i.length;o++){a.push((i[o].byteLength&65280)>>>8);a.push(i[o].byteLength&255);a=a.concat(Array.prototype.slice.call(i[o]))}for(o=0;o<n.length;o++){s.push((n[o].byteLength&65280)>>>8);s.push(n[o].byteLength&255);s=s.concat(Array.prototype.slice.call(n[o]))}return t(k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(r.width&65280)>>8,r.width&255,(r.height&65280)>>8,r.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(k.avcC,new Uint8Array([1,r.profileIdc,r.profileCompatibility,r.levelIdc,255].concat([i.length]).concat(a).concat([n.length]).concat(s))),t(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};r=function e(r){return t(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(r.channelcount&65280)>>8,r.channelcount&255,(r.samplesize&65280)>>8,r.samplesize&255,0,0,0,0,(r.samplerate&65280)>>8,r.samplerate&255,0,0]),n(r))}})();p=function e(r){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(r.id&4278190080)>>24,(r.id&16711680)>>16,(r.id&65280)>>8,r.id&255,0,0,0,0,(r.duration&4278190080)>>24,(r.duration&16711680)>>16,(r.duration&65280)>>8,r.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(r.width&65280)>>8,r.width&255,0,0,(r.height&65280)>>8,r.height&255,0,0]);return t(k.tkhd,i)};T=function r(i){var n,a,s,o,u,l,f;n=t(k.tfhd,new Uint8Array([0,0,0,58,(i.id&4278190080)>>24,(i.id&16711680)>>16,(i.id&65280)>>8,i.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));l=Math.floor(i.baseMediaDecodeTime/(e+1));f=Math.floor(i.baseMediaDecodeTime%(e+1));a=t(k.tfdt,new Uint8Array([1,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,l&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255]));u=32+20+8+16+8+8;if(i.type==="audio"){s=w(i,u);return t(k.traf,n,a,s)}o=y(i);s=w(i,o.length+u);return t(k.traf,n,a,s,o)};h=function e(r){r.duration=r.duration||4294967295;return t(k.trak,p(r),m(r))};S=function e(r){var i=new Uint8Array([0,0,0,0,(r.id&4278190080)>>24,(r.id&16711680)>>16,(r.id&65280)>>8,r.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(r.type!=="video"){i[i.length-1]=0}return t(k.trex,i)};(function(){var e,r,i;i=function e(t,r){var i=0,n=0,a=0,s=0;if(t.length){if(t[0].duration!==undefined){i=1}if(t[0].size!==undefined){n=2}if(t[0].flags!==undefined){a=4}if(t[0].compositionTimeOffset!==undefined){s=8}}return[0,0,i|n|a|s,1,(t.length&4278190080)>>>24,(t.length&16711680)>>>16,(t.length&65280)>>>8,t.length&255,(r&4278190080)>>>24,(r&16711680)>>>16,(r&65280)>>>8,r&255]};r=function e(r,n){var a,s,o,u;s=r.samples||[];n+=8+12+16*s.length;a=i(s,n);for(u=0;u<s.length;u++){o=s[u];a=a.concat([(o.duration&4278190080)>>>24,(o.duration&16711680)>>>16,(o.duration&65280)>>>8,o.duration&255,(o.size&4278190080)>>>24,(o.size&16711680)>>>16,(o.size&65280)>>>8,o.size&255,o.flags.isLeading<<2|o.flags.dependsOn,o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,o.flags.degradationPriority&240<<8,o.flags.degradationPriority&15,(o.compositionTimeOffset&4278190080)>>>24,(o.compositionTimeOffset&16711680)>>>16,(o.compositionTimeOffset&65280)>>>8,o.compositionTimeOffset&255])}return t(k.trun,new Uint8Array(a))};e=function e(r,n){var a,s,o,u;s=r.samples||[];n+=8+12+8*s.length;a=i(s,n);for(u=0;u<s.length;u++){o=s[u];a=a.concat([(o.duration&4278190080)>>>24,(o.duration&16711680)>>>16,(o.duration&65280)>>>8,o.duration&255,(o.size&4278190080)>>>24,(o.size&16711680)>>>16,(o.size&65280)>>>8,o.size&255])}return t(k.trun,new Uint8Array(a))};w=function t(i,n){if(i.type==="audio"){return e(i,n)}return r(i,n)}})();var N={ftyp:a,mdat:s,moof:l,moov:f,initSegment:function e(t){var r=a(),i=f(t),n;n=new Uint8Array(r.byteLength+i.byteLength);n.set(r);n.set(i,r.byteLength);return n}};var j=function e(t){return t>>>0};var F={toUnsigned:j};var V=F.toUnsigned;var H,q,G,W,z;H=function e(t,r){var i=[],n,a,s,o,u;if(!r.length){return null}for(n=0;n<t.byteLength;){a=V(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);s=q(t.subarray(n+4,n+8));o=a>1?n+a:t.byteLength;if(s===r[0]){if(r.length===1){i.push(t.subarray(n+8,o))}else{u=H(t.subarray(n+8,o),r.slice(1));if(u.length){i=i.concat(u)}}}n=o}return i};q=function e(t){var r="";r+=String.fromCharCode(t[0]);r+=String.fromCharCode(t[1]);r+=String.fromCharCode(t[2]);r+=String.fromCharCode(t[3]);return r};G=function e(t){var r={},i=H(t,["moov","trak"]);return i.reduce((function(e,t){var r,i,n,a,s;r=H(t,["tkhd"])[0];if(!r){return null}i=r[0];n=i===0?12:20;a=V(r[n]<<24|r[n+1]<<16|r[n+2]<<8|r[n+3]);s=H(t,["mdia","mdhd"])[0];if(!s){return null}i=s[0];n=i===0?12:20;e[a]=V(s[n]<<24|s[n+1]<<16|s[n+2]<<8|s[n+3]);return e}),r)};W=function e(t,r){var i,n,a;i=H(r,["moof","traf"]);n=[].concat.apply([],i.map((function(e){return H(e,["tfhd"]).map((function(r){var i,n,a;i=V(r[4]<<24|r[5]<<16|r[6]<<8|r[7]);n=t[i]||9e4;a=H(e,["tfdt"]).map((function(e){var t,r;t=e[0];r=V(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);if(t===1){r*=Math.pow(2,32);r+=V(e[8]<<24|e[9]<<16|e[10]<<8|e[11])}return r}))[0];a=a||Infinity;return a/n}))})));a=Math.min.apply(null,n);return isFinite(a)?a:0};z=function e(t){var r=H(t,["moov","trak"]);var i=[];r.forEach((function(e){var t=H(e,["mdia","hdlr"]);var r=H(e,["tkhd"]);t.forEach((function(e,t){var n=q(e.subarray(8,12));var a=r[t];var s;var o;var u;if(n==="vide"){s=new DataView(a.buffer,a.byteOffset,a.byteLength);o=s.getUint8(0);u=o===0?s.getUint32(12):s.getUint32(20);i.push(u)}}))}));return i};var $={findBox:H,parseType:q,timescale:G,startTime:W,videoTrackIds:z};var X=function e(){this.init=function(){var e={};this.on=function(t,r){if(!e[t]){e[t]=[]}e[t]=e[t].concat(r)};this.off=function(t,r){var i;if(!e[t]){return false}i=e[t].indexOf(r);e[t]=e[t].slice();e[t].splice(i,1);return i>-1};this.trigger=function(t){var r,i,n,a;r=e[t];if(!r){return}if(arguments.length===2){n=r.length;for(i=0;i<n;++i){r[i].call(this,arguments[1])}}else{a=[];i=arguments.length;for(i=1;i<arguments.length;++i){a.push(arguments[i])}n=r.length;for(i=0;i<n;++i){r[i].apply(this,a)}}};this.dispose=function(){e={}}}};X.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}));this.on("done",(function(t){e.flush(t)}));return e};X.prototype.push=function(e){this.trigger("data",e)};X.prototype.flush=function(e){this.trigger("done",e)};var Y=X;var K=function e(t){var r,i,n=[],a=[];n.byteLength=0;for(r=0;r<t.length;r++){i=t[r];if(i.nalUnitType==="access_unit_delimiter_rbsp"){if(n.length){n.duration=i.dts-n.dts;a.push(n)}n=[i];n.byteLength=i.data.byteLength;n.pts=i.pts;n.dts=i.dts}else{if(i.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){n.keyFrame=true}n.duration=i.dts-n.dts;n.byteLength+=i.data.byteLength;n.push(i)}}if(a.length&&(!n.duration||n.duration<=0)){n.duration=a[a.length-1].duration}a.push(n);return a};var Q=function e(t){var r,i,n=[],a=[];n.byteLength=0;n.nalCount=0;n.duration=0;n.pts=t[0].pts;n.dts=t[0].dts;a.byteLength=0;a.nalCount=0;a.duration=0;a.pts=t[0].pts;a.dts=t[0].dts;for(r=0;r<t.length;r++){i=t[r];if(i.keyFrame){if(n.length){a.push(n);a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration}n=[i];n.nalCount=i.length;n.byteLength=i.byteLength;n.pts=i.pts;n.dts=i.dts;n.duration=i.duration}else{n.duration+=i.duration;n.nalCount+=i.length;n.byteLength+=i.byteLength;n.push(i)}}if(a.length&&n.duration<=0){n.duration=a[a.length-1].duration}a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration;a.push(n);return a};var J=function e(t){var r;if(!t[0][0].keyFrame&&t.length>1){r=t.shift();t.byteLength-=r.byteLength;t.nalCount-=r.nalCount;t[0][0].dts=r.dts;t[0][0].pts=r.pts;t[0][0].duration+=r.duration}return t};var Z=function e(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};var ee=function e(t,r){var i=Z();i.dataOffset=r;i.compositionTimeOffset=t.pts-t.dts;i.duration=t.duration;i.size=4*t.length;i.size+=t.byteLength;if(t.keyFrame){i.flags.dependsOn=2;i.flags.isNonSyncSample=0}return i};var te=function e(t,r){var i,n,a,s,o,u=r||0,l=[];for(i=0;i<t.length;i++){s=t[i];for(n=0;n<s.length;n++){o=s[n];a=ee(o,u);u+=a.size;l.push(a)}}return l};var re=function e(t){var r,i,n,a,s,o,u=0,l=t.byteLength,f=t.nalCount,d=l+4*f,c=new Uint8Array(d),h=new DataView(c.buffer);for(r=0;r<t.length;r++){a=t[r];for(i=0;i<a.length;i++){s=a[i];for(n=0;n<s.length;n++){o=s[n];h.setUint32(u,o.data.byteLength);u+=4;c.set(o.data,u);u+=o.data.byteLength}}}return c};var ie={groupNalsIntoFrames:K,groupFramesIntoGops:Q,extendFirstKeyFrame:J,generateSampleTable:te,concatenateNalData:re};var ne=9e4;var ae=function e(t,r){if(typeof r.pts==="number"){if(t.timelineStartInfo.pts===undefined){t.timelineStartInfo.pts=r.pts}if(t.minSegmentPts===undefined){t.minSegmentPts=r.pts}else{t.minSegmentPts=Math.min(t.minSegmentPts,r.pts)}if(t.maxSegmentPts===undefined){t.maxSegmentPts=r.pts}else{t.maxSegmentPts=Math.max(t.maxSegmentPts,r.pts)}}if(typeof r.dts==="number"){if(t.timelineStartInfo.dts===undefined){t.timelineStartInfo.dts=r.dts}if(t.minSegmentDts===undefined){t.minSegmentDts=r.dts}else{t.minSegmentDts=Math.min(t.minSegmentDts,r.dts)}if(t.maxSegmentDts===undefined){t.maxSegmentDts=r.dts}else{t.maxSegmentDts=Math.max(t.maxSegmentDts,r.dts)}}};var se=function e(t){delete t.minSegmentDts;delete t.maxSegmentDts;delete t.minSegmentPts;delete t.maxSegmentPts};var oe=function e(t,r){var i,n,a=t.minSegmentDts;if(!r){a-=t.timelineStartInfo.dts}i=t.timelineStartInfo.baseMediaDecodeTime;i+=a;i=Math.max(0,i);if(t.type==="audio"){n=t.samplerate/ne;i*=n;i=Math.floor(i)}return i};var ue={clearDtsInfo:se,calculateTrackBaseMediaDecodeTime:oe,collectDtsInfo:ae};var le=4,fe=128;var de=function e(t){var r=0,i={payloadType:-1,payloadSize:0},n=0,a=0;while(r<t.byteLength){if(t[r]===fe){break}while(t[r]===255){n+=255;r++}n+=t[r++];while(t[r]===255){a+=255;r++}a+=t[r++];if(!i.payload&&n===le){i.payloadType=n;i.payloadSize=a;i.payload=t.subarray(r,r+a);break}r+=a;n=0;a=0}return i};var ce=function e(t){if(t.payload[0]!==181){return null}if((t.payload[1]<<8|t.payload[2])!==49){return null}if(String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])!=="GA94"){return null}if(t.payload[7]!==3){return null}return t.payload.subarray(8,t.payload.length-1)};var he=function e(t,r){var i=[],n,a,s,o;if(!(r[0]&64)){return i}a=r[0]&31;for(n=0;n<a;n++){s=n*3;o={type:r[s+2]&3,pts:t};if(r[s+2]&4){o.ccData=r[s+3]<<8|r[s+4];i.push(o)}}return i};var pe=function e(t){var r=t.byteLength,i=[],n=1,a,s;while(n<r-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){i.push(n+2);n+=2}else{n++}}if(i.length===0){return t}a=r-i.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===i[0]){o++;i.shift()}s[n]=t[o]}return s};var me={parseSei:de,parseUserData:ce,parseCaptionPackets:he,discardEmulationPreventionBytes:pe,USER_DATA_REGISTERED_ITU_T_T35:le};var ve=function e(){e.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Se(0,0),new Se(0,1),new Se(1,0),new Se(1,1)];this.reset();this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data"));e.on("done",this.trigger.bind(this,"done"))}),this)};ve.prototype=new Y;ve.prototype.push=function(e){var t,r,i;if(e.nalUnitType!=="sei_rbsp"){return}t=me.parseSei(e.escapedRBSP);if(t.payloadType!==me.USER_DATA_REGISTERED_ITU_T_T35){return}r=me.parseUserData(t);if(!r){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}i=me.parseCaptionPackets(e.pts,r);this.captionPackets_=this.captionPackets_.concat(i);if(this.latestDts_!==e.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=e.dts};ve.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach((function(e){e.flush()}),this);return}this.captionPackets_.forEach((function(e,t){e.presortIndex=t}));this.captionPackets_.sort((function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts}));this.captionPackets_.forEach((function(e){if(e.type<2){this.dispatchCea608Packet(e)}}),this);this.captionPackets_.length=0;this.ccStreams_.forEach((function(e){e.flush()}),this);return};ve.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach((function(e){e.reset()}))};ve.prototype.dispatchCea608Packet=function(e){if(this.setsChannel1Active(e)){this.activeCea608Channel_[e.type]=0}else if(this.setsChannel2Active(e)){this.activeCea608Channel_[e.type]=1}if(this.activeCea608Channel_[e.type]===null){return}this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};ve.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};ve.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};var ge={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var ye=function e(t){if(t===null){return""}t=ge[t]||t;return String.fromCharCode(t)};var _e=14;var be=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var Te=function e(){var t=[],r=_e+1;while(r--){t.push("")}return t};var Se=function e(t,r){e.prototype.init.call(this);this.field_=t||0;this.dataChannel_=r||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,r,i,n,a;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}i=t>>>8;n=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(e.pts);this.flushDisplayed(e.pts);r=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=r;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(e.pts)}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=Te()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=Te()}else if(t===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(e.pts);this.displayed_=Te()}this.mode_="paintOn";this.startPts_=e.pts}else if(this.isSpecialCharacter(i,n)){i=(i&3)<<8;a=ye(i|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isExtCharacter(i,n)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}i=(i&3)<<8;a=ye(i|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isMidRowCode(i,n)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((n&14)===14){this.addFormatting(e.pts,["i"])}if((n&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(i,n)){this.column_+=n&3}else if(this.isPAC(i,n)){var s=be.indexOf(t&7968);if(this.mode_==="rollUp"){this.setRollUp(e.pts,s)}if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(n&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(n)){if((n&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(i)){if(n===0){n=null}a=ye(i);a+=ye(n);this[this.mode_](e.pts,a);this.column_+=a.length}}};Se.prototype=new Y;Se.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){return e.trim()})).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};Se.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=Te();this.nonDisplayed_=Te();this.lastControlCode_=null;this.column_=0;this.row_=_e;this.rollUpRows_=2;this.formatting_=[]};Se.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Se.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};Se.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63};Se.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47};Se.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35};Se.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127};Se.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};Se.prototype.isNormalChar=function(e){return e>=32&&e<=127};Se.prototype.setRollUp=function(e,t){if(this.mode_!=="rollUp"){this.row_=_e;this.mode_="rollUp";this.flushDisplayed(e);this.nonDisplayed_=Te();this.displayed_=Te()}if(t!==undefined&&t!==this.row_){for(var r=0;r<this.rollUpRows_;r++){this.displayed_[t-r]=this.displayed_[this.row_-r];this.displayed_[this.row_-r]=""}}if(t===undefined){t=this.row_}this.topRow_=t-this.rollUpRows_+1};Se.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var r=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,r)};Se.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[];this[this.mode_](e,t)};Se.prototype.popOn=function(e,t){var r=this.nonDisplayed_[this.row_];r+=t;this.nonDisplayed_[this.row_]=r};Se.prototype.rollUp=function(e,t){var r=this.displayed_[this.row_];r+=t;this.displayed_[this.row_]=r};Se.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.row_+1;e<_e+1;e++){this.displayed_[e]=""}for(e=this.topRow_;e<this.row_;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[this.row_]=""};Se.prototype.paintOn=function(e,t){var r=this.displayed_[this.row_];r+=t;this.displayed_[this.row_]=r};var we={CaptionStream:ve,Cea608Stream:Se};var ke={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var Ee=8589934592;var Ce=4294967296;var Ae=function e(t,r){var i=1;if(t>r){i=-1}while(Math.abs(r-t)>Ce){t+=i*Ee}return t};var Oe=function e(t){var r,i;e.prototype.init.call(this);this.type_=t;this.push=function(e){if(e.type!==this.type_){return}if(i===undefined){i=e.dts}e.dts=Ae(e.dts,i);e.pts=Ae(e.pts,i);r=e.dts;this.trigger("data",e)};this.flush=function(){i=r;this.trigger("done")};this.discontinuity=function(){i=void 0;r=void 0}};Oe.prototype=new Y;var Pe={TimestampRolloverStream:Oe,handleRollover:Ae};var Ie=function e(t,r,i){var n,a="";for(n=r;n<i;n++){a+="%"+("00"+t[n].toString(16)).slice(-2)}return a},Le=function e(t,r,i){return decodeURIComponent(Ie(t,r,i))},De=function e(t,r,i){return unescape(Ie(t,r,i))},Ue=function e(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},xe={TXXX:function e(t){var r;if(t.data[0]!==3){return}for(r=1;r<t.data.length;r++){if(t.data[r]===0){t.description=Le(t.data,1,r);t.value=Le(t.data,r+1,t.data.length).replace(/\0*$/,"");break}}t.data=t.value},WXXX:function e(t){var r;if(t.data[0]!==3){return}for(r=1;r<t.data.length;r++){if(t.data[r]===0){t.description=Le(t.data,1,r);t.url=Le(t.data,r+1,t.data.length);break}}},PRIV:function e(t){var r;for(r=0;r<t.data.length;r++){if(t.data[r]===0){t.owner=De(t.data,0,r);break}}t.privateData=t.data.subarray(r+1);t.data=t.privateData}},Re;Re=function e(t){var r={debug:!!(t&&t.debug),descriptor:t&&t.descriptor},i=0,n=[],a=0,s;Re.prototype.init.call(this);this.dispatchType=ke.METADATA_STREAM_TYPE.toString(16);if(r.descriptor){for(s=0;s<r.descriptor.length;s++){this.dispatchType+=("00"+r.descriptor[s].toString(16)).slice(-2)}}this.push=function(e){var t,s,o,u,l,f;if(e.type!=="timed-metadata"){return}if(e.dataAlignmentIndicator){a=0;n.length=0}if(n.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){if(r.debug){console.log("Skipping unrecognized metadata packet")}return}n.push(e);a+=e.data.byteLength;if(n.length===1){i=Ue(e.data.subarray(6,10));i+=10}if(a<i){return}t={data:new Uint8Array(i),frames:[],pts:n[0].pts,dts:n[0].dts};for(l=0;l<i;){t.data.set(n[0].data.subarray(0,i-l),l);l+=n[0].data.byteLength;a-=n[0].data.byteLength;n.shift()}s=10;if(t.data[5]&64){s+=4;s+=Ue(t.data.subarray(10,14));i-=Ue(t.data.subarray(16,20))}do{o=Ue(t.data.subarray(s+4,s+8));if(o<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}f=String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]);u={id:f,data:t.data.subarray(s+10,s+o+10)};u.key=u.id;if(xe[u.id]){xe[u.id](u);if(u.owner==="com.apple.streaming.transportStreamTimestamp"){var d=u.data,c=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;c*=4;c+=d[7]&3;u.timeStamp=c;if(t.pts===undefined&&t.dts===undefined){t.pts=u.timeStamp;t.dts=u.timeStamp}this.trigger("timestamp",u)}}t.frames.push(u);s+=10;s+=o}while(s<i);this.trigger("data",t)}};Re.prototype=new Y;var Me=Re;var Be=Pe.TimestampRolloverStream;var Ne,je,Fe;var Ve=188,He=71;Ne=function e(){var t=new Uint8Array(Ve),r=0;Ne.prototype.init.call(this);this.push=function(e){var i=0,n=Ve,a;if(r){a=new Uint8Array(e.byteLength+r);a.set(t.subarray(0,r));a.set(e,r);r=0}else{a=e}while(n<a.byteLength){if(a[i]===He&&a[n]===He){this.trigger("data",a.subarray(i,n));i+=Ve;n+=Ve;continue}i++;n++}if(i<a.byteLength){t.set(a.subarray(i),0);r=a.byteLength-i}};this.flush=function(){if(r===Ve&&t[0]===He){this.trigger("data",t);r=0}this.trigger("done")}};Ne.prototype=new Y;je=function e(){var t,r,i,n;je.prototype.init.call(this);n=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;t=function e(t,n){var a=0;if(n.payloadUnitStartIndicator){a+=t[a]+1}if(n.type==="pat"){r(t.subarray(a),n)}else{i(t.subarray(a),n)}};r=function e(t,r){r.section_number=t[7];r.last_section_number=t[8];n.pmtPid=(t[10]&31)<<8|t[11];r.pmtPid=n.pmtPid};i=function e(t,r){var i,a,s,o;if(!(t[5]&1)){return}n.programMapTable={video:null,audio:null,"timed-metadata":{}};i=(t[1]&15)<<8|t[2];a=3+i-4;s=(t[10]&15)<<8|t[11];o=12+s;while(o<a){var u=t[o];var l=(t[o+1]&31)<<8|t[o+2];if(u===ke.H264_STREAM_TYPE&&n.programMapTable.video===null){n.programMapTable.video=l}else if(u===ke.ADTS_STREAM_TYPE&&n.programMapTable.audio===null){n.programMapTable.audio=l}else if(u===ke.METADATA_STREAM_TYPE){n.programMapTable["timed-metadata"][l]=u}o+=((t[o+3]&15)<<8|t[o+4])+5}r.programMapTable=n.programMapTable};this.push=function(e){var r={},i=4;r.payloadUnitStartIndicator=!!(e[1]&64);r.pid=e[1]&31;r.pid<<=8;r.pid|=e[2];if((e[3]&48)>>>4>1){i+=e[i]+1}if(r.pid===0){r.type="pat";t(e.subarray(i),r);this.trigger("data",r)}else if(r.pid===this.pmtPid){r.type="pmt";t(e.subarray(i),r);this.trigger("data",r);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([e,i,r])}else{this.processPes_(e,i,r)}};this.processPes_=function(e,t,r){if(r.pid===this.programMapTable.video){r.streamType=ke.H264_STREAM_TYPE}else if(r.pid===this.programMapTable.audio){r.streamType=ke.ADTS_STREAM_TYPE}else{r.streamType=this.programMapTable["timed-metadata"][r.pid]}r.type="pes";r.data=e.subarray(t);this.trigger("data",r)}};je.prototype=new Y;je.STREAM_TYPES={h264:27,adts:15};Fe=function e(){var t=this,r={data:[],size:0},i={data:[],size:0},n={data:[],size:0},a=function e(t,r){var i;r.packetLength=6+(t[4]<<8|t[5]);r.dataAlignmentIndicator=(t[6]&4)!==0;i=t[7];if(i&192){r.pts=(t[9]&14)<<27|(t[10]&255)<<20|(t[11]&254)<<12|(t[12]&255)<<5|(t[13]&254)>>>3;r.pts*=4;r.pts+=(t[13]&6)>>>1;r.dts=r.pts;if(i&64){r.dts=(t[14]&14)<<27|(t[15]&255)<<20|(t[16]&254)<<12|(t[17]&255)<<5|(t[18]&254)>>>3;r.dts*=4;r.dts+=(t[18]&6)>>>1}}r.data=t.subarray(9+t[8])},s=function e(r,i,n){var s=new Uint8Array(r.size),o={type:i},u=0,l=0,f=false,d;if(!r.data.length||r.size<9){return}o.trackId=r.data[0].pid;for(u=0;u<r.data.length;u++){d=r.data[u];s.set(d.data,l);l+=d.data.byteLength}a(s,o);f=i==="video"||o.packetLength<=r.size;if(n||f){r.size=0;r.data.length=0}if(f){t.trigger("data",o)}};Fe.prototype.init.call(this);this.push=function(e){({pat:function e(){},pes:function t(){var a,o;switch(e.streamType){case ke.H264_STREAM_TYPE:case ke.H264_STREAM_TYPE:a=r;o="video";break;case ke.ADTS_STREAM_TYPE:a=i;o="audio";break;case ke.METADATA_STREAM_TYPE:a=n;o="timed-metadata";break;default:return}if(e.payloadUnitStartIndicator){s(a,o,true)}a.data.push(e);a.size+=e.data.byteLength},pmt:function r(){var i={type:"metadata",tracks:[]},n=e.programMapTable;if(n.video!==null){i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"})}if(n.audio!==null){i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"})}t.trigger("data",i)}})[e.type]()};this.flush=function(){s(r,"video");s(i,"audio");s(n,"timed-metadata");this.trigger("done")}};Fe.prototype=new Y;var qe={PAT_PID:0,MP2T_PACKET_LENGTH:Ve,TransportPacketStream:Ne,TransportParseStream:je,ElementaryStream:Fe,TimestampRolloverStream:Be,CaptionStream:we.CaptionStream,Cea608Stream:we.Cea608Stream,MetadataStream:Me};for(var Ge in ke){if(ke.hasOwnProperty(Ge)){qe[Ge]=ke[Ge]}}var We=qe;var ze;var $e=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ze=function e(){var t;ze.prototype.init.call(this);this.push=function(e){var r=0,i=0,n,a,s,o,u,l;if(e.type!=="audio"){return}if(t){o=t;t=new Uint8Array(o.byteLength+e.data.byteLength);t.set(o);t.set(e.data,o.byteLength)}else{t=e.data}while(r+5<t.length){if(t[r]!==255||(t[r+1]&246)!==240){r++;continue}a=(~t[r+1]&1)*2;n=(t[r+3]&3)<<11|t[r+4]<<3|(t[r+5]&224)>>5;u=((t[r+6]&3)+1)*1024;l=u*9e4/$e[(t[r+2]&60)>>>2];s=r+n;if(t.byteLength<s){return}this.trigger("data",{pts:e.pts+i*l,dts:e.dts+i*l,sampleCount:u,audioobjecttype:(t[r+2]>>>6&3)+1,channelcount:(t[r+2]&1)<<2|(t[r+3]&192)>>>6,samplerate:$e[(t[r+2]&60)>>>2],samplingfrequencyindex:(t[r+2]&60)>>>2,samplesize:16,data:t.subarray(r+7+a,s)});if(t.byteLength===s){t=undefined;return}i++;t=t.subarray(s)}};this.flush=function(){this.trigger("done")}};ze.prototype=new Y;var Xe=ze;var Ye;Ye=function e(t){var r=t.byteLength,i=0,n=0;this.length=function(){return 8*r};this.bitsAvailable=function(){return 8*r+n};this.loadWord=function(){var e=t.byteLength-r,a=new Uint8Array(4),s=Math.min(4,r);if(s===0){throw new Error("no bytes available")}a.set(t.subarray(e,e+s));i=new DataView(a.buffer).getUint32(0);n=s*8;r-=s};this.skipBits=function(e){var t;if(n>e){i<<=e;n-=e}else{e-=n;t=Math.floor(e/8);e-=t*8;r-=t;this.loadWord();i<<=e;n-=e}};this.readBits=function(e){var t=Math.min(n,e),a=i>>>32-t;n-=t;if(n>0){i<<=t}else if(r>0){this.loadWord()}t=e-t;if(t>0){return a<<t|this.readBits(t)}return a};this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e){if((i&2147483648>>>e)!==0){i<<=e;n-=e;return e}}this.loadWord();return e+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1};this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();if(1&e){return 1+e>>>1}return-1*(e>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var Ke=Ye;var Qe,Je;var Ze;Je=function e(){var t=0,r,i;Je.prototype.init.call(this);this.push=function(e){var n;if(!i){i=e.data}else{n=new Uint8Array(i.byteLength+e.data.byteLength);n.set(i);n.set(e.data,i.byteLength);i=n}for(;t<i.byteLength-3;t++){if(i[t+2]===1){r=t+5;break}}while(r<i.byteLength){switch(i[r]){case 0:if(i[r-1]!==0){r+=2;break}else if(i[r-2]!==0){r++;break}if(t+3!==r-2){this.trigger("data",i.subarray(t+3,r-2))}do{r++}while(i[r]!==1&&r<i.length);t=r-2;r+=3;break;case 1:if(i[r-1]!==0||i[r-2]!==0){r+=3;break}this.trigger("data",i.subarray(t+3,r-2));t=r-2;r+=3;break;default:r+=3;break}}i=i.subarray(t);r-=t;t=0};this.flush=function(){if(i&&i.byteLength>3){this.trigger("data",i.subarray(t+3))}i=null;t=0;this.trigger("done")}};Je.prototype=new Y;Ze={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};Qe=function e(){var t=new Je,r,i,n,a,s,o,u;Qe.prototype.init.call(this);r=this;this.push=function(e){if(e.type!=="video"){return}i=e.trackId;n=e.pts;a=e.dts;t.push(e)};t.on("data",(function(e){var t={trackId:i,pts:n,dts:a,data:e};switch(e[0]&31){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp";t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp";t.escapedRBSP=s(e.subarray(1));t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp";break;default:break}r.trigger("data",t)}));t.on("done",(function(){r.trigger("done")}));this.flush=function(){t.flush()};u=function e(t,r){var i=8,n=8,a,s;for(a=0;a<t;a++){if(n!==0){s=r.readExpGolomb();n=(i+s+256)%256}i=n===0?i:n}};s=function e(t){var r=t.byteLength,i=[],n=1,a,s;while(n<r-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){i.push(n+2);n+=2}else{n++}}if(i.length===0){return t}a=r-i.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===i[0]){o++;i.shift()}s[n]=t[o]}return s};o=function e(t){var r=0,i=0,n=0,a=0,s=1,o,l,f,d,c,h,p,m,v,g,y,_,b,T;o=new Ke(t);l=o.readUnsignedByte();d=o.readUnsignedByte();f=o.readUnsignedByte();o.skipUnsignedExpGolomb();if(Ze[l]){c=o.readUnsignedExpGolomb();if(c===3){o.skipBits(1)}o.skipUnsignedExpGolomb();o.skipUnsignedExpGolomb();o.skipBits(1);if(o.readBoolean()){y=c!==3?8:12;for(T=0;T<y;T++){if(o.readBoolean()){if(T<6){u(16,o)}else{u(64,o)}}}}}o.skipUnsignedExpGolomb();h=o.readUnsignedExpGolomb();if(h===0){o.readUnsignedExpGolomb()}else if(h===1){o.skipBits(1);o.skipExpGolomb();o.skipExpGolomb();p=o.readUnsignedExpGolomb();for(T=0;T<p;T++){o.skipExpGolomb()}}o.skipUnsignedExpGolomb();o.skipBits(1);m=o.readUnsignedExpGolomb();v=o.readUnsignedExpGolomb();g=o.readBits(1);if(g===0){o.skipBits(1)}o.skipBits(1);if(o.readBoolean()){r=o.readUnsignedExpGolomb();i=o.readUnsignedExpGolomb();n=o.readUnsignedExpGolomb();a=o.readUnsignedExpGolomb()}if(o.readBoolean()){if(o.readBoolean()){b=o.readUnsignedByte();switch(b){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:{_=[o.readUnsignedByte()<<8|o.readUnsignedByte(),o.readUnsignedByte()<<8|o.readUnsignedByte()];break}}if(_){s=_[0]/_[1]}}}return{profileIdc:l,levelIdc:f,profileCompatibility:d,width:Math.ceil(((m+1)*16-r*2-i*2)*s),height:(2-g)*(v+1)*16-n*2-a*2}}};Qe.prototype=new Y;var et={H264Stream:Qe,NalByteStream:Je};var tt;tt=function e(){var t=new Uint8Array,r=0;tt.prototype.init.call(this);this.setTimestamp=function(e){r=e};this.parseId3TagSize=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],n=(i&16)>>4;if(n){return r+20}return r+10};this.parseAdtsSize=function(e,t){var r=(e[t+5]&224)>>5,i=e[t+4]<<3,n=e[t+3]&3<<11;return n|i|r};this.push=function(e){var i=0,n=0,a,s,o,u;if(t.length){u=t.length;t=new Uint8Array(e.byteLength+u);t.set(t.subarray(0,u));t.set(e,u)}else{t=e}while(t.length-n>=3){if(t[n]==="I".charCodeAt(0)&&t[n+1]==="D".charCodeAt(0)&&t[n+2]==="3".charCodeAt(0)){if(t.length-n<10){break}i=this.parseId3TagSize(t,n);if(i>t.length){break}s={type:"timed-metadata",data:t.subarray(n,n+i)};this.trigger("data",s);n+=i;continue}else if(t[n]&255===255&&(t[n+1]&240)===240){if(t.length-n<7){break}i=this.parseAdtsSize(t,n);if(i>t.length){break}o={type:"audio",data:t.subarray(n,n+i),pts:r,dts:r};this.trigger("data",o);n+=i;continue}n++}a=t.length-n;if(a>0){t=t.subarray(n)}else{t=new Uint8Array}}};tt.prototype=new Y;var rt=tt;var it=[33,16,5,32,164,27];var nt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var at=function e(t){var r=[];while(t--){r.push(0)}return r};var st=function e(t){return Object.keys(t).reduce((function(e,r){e[r]=new Uint8Array(t[r].reduce((function(e,t){return e.concat(t)}),[]));return e}),{})};var ot={96e3:[it,[227,64],at(154),[56]],88200:[it,[231],at(170),[56]],64e3:[it,[248,192],at(240),[56]],48e3:[it,[255,192],at(268),[55,148,128],at(54),[112]],44100:[it,[255,192],at(268),[55,163,128],at(84),[112]],32e3:[it,[255,192],at(268),[55,234],at(226),[112]],24e3:[it,[255,192],at(268),[55,255,128],at(268),[111,112],at(126),[224]],16e3:[it,[255,192],at(268),[55,255,128],at(268),[111,255],at(269),[223,108],at(195),[1,192]],12e3:[nt,at(268),[3,127,248],at(268),[6,255,240],at(268),[13,255,224],at(268),[27,253,128],at(259),[56]],11025:[nt,at(268),[3,127,248],at(268),[6,255,240],at(268),[13,255,224],at(268),[27,255,192],at(268),[55,175,128],at(108),[112]],8e3:[nt,at(268),[3,121,16],at(47),[7]]};var ut=st(ot);var lt=9e4,ft,dt,ct,ht,pt,mt;ft=function e(t){return t*lt};dt=function e(t,r){return t*r};ct=function e(t){return t/lt};ht=function e(t,r){return t/r};pt=function e(t,r){return ft(ht(t,r))};mt=function e(t,r){return dt(ct(t),r)};var vt={secondsToVideoTs:ft,secondsToAudioTs:dt,videoTsToSeconds:ct,audioTsToSeconds:ht,audioTsToVideoTs:pt,videoTsToAudioTs:mt};var gt=et.H264Stream;var yt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var _t=["width","height","profileIdc","levelIdc","profileCompatibility"];var bt=9e4;var Tt,St,wt,kt;var Et,Ct,At;Et=function e(t){if(t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)){return true}return false};Ct=function e(t,r){var i;if(t.length!==r.length){return false}for(i=0;i<t.length;i++){if(t[i]!==r[i]){return false}}return true};At=function e(t){var r,i,n=0;for(r=0;r<t.length;r++){i=t[r];n+=i.data.byteLength}return n};St=function e(t,r){var i=[],n=0,a=0,s=0,o=Infinity;r=r||{};St.prototype.init.call(this);this.push=function(e){ue.collectDtsInfo(t,e);if(t){yt.forEach((function(r){t[r]=e[r]}))}i.push(e)};this.setEarliestDts=function(e){a=e-t.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(e){o=e};this.setAudioAppendStart=function(e){s=e};this.flush=function(){var e,a,s,o;if(i.length===0){this.trigger("done","AudioSegmentStream");return}e=this.trimAdtsFramesByEarliestDts_(i);t.baseMediaDecodeTime=ue.calculateTrackBaseMediaDecodeTime(t,r.keepOriginalTimestamps);this.prefixWithSilence_(t,e);t.samples=this.generateSampleTable_(e);s=N.mdat(this.concatenateFrameData_(e));i=[];a=N.moof(n,[t]);o=new Uint8Array(a.byteLength+s.byteLength);n++;o.set(a);o.set(s,a.byteLength);ue.clearDtsInfo(t);this.trigger("data",{track:t,boxes:o});this.trigger("done","AudioSegmentStream")};this.prefixWithSilence_=function(e,t){var r,i=0,n=0,a=0,u=0,l,f;if(!t.length){return}r=vt.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate);i=Math.ceil(bt/(e.samplerate/1024));if(s&&o){n=r-Math.max(s,o);a=Math.floor(n/i);u=a*i}if(a<1||u>bt/2){return}l=ut[e.samplerate];if(!l){l=t[0].data}for(f=0;f<a;f++){t.splice(f,0,{data:l})}e.baseMediaDecodeTime-=Math.floor(vt.videoTsToAudioTs(u,e.samplerate))};this.trimAdtsFramesByEarliestDts_=function(e){if(t.minSegmentDts>=a){return e}t.minSegmentDts=Infinity;return e.filter((function(e){if(e.dts>=a){t.minSegmentDts=Math.min(t.minSegmentDts,e.dts);t.minSegmentPts=t.minSegmentDts;return true}return false}))};this.generateSampleTable_=function(e){var t,r,i=[];for(t=0;t<e.length;t++){r=e[t];i.push({size:r.data.byteLength,duration:1024})}return i};this.concatenateFrameData_=function(e){var t,r,i=0,n=new Uint8Array(At(e));for(t=0;t<e.length;t++){r=e[t];n.set(r.data,i);i+=r.data.byteLength}return n}};St.prototype=new Y;Tt=function e(t,r){var i=0,n=[],a=[],s,o;r=r||{};Tt.prototype.init.call(this);delete t.minPTS;this.gopCache_=[];this.push=function(e){ue.collectDtsInfo(t,e);if(e.nalUnitType==="seq_parameter_set_rbsp"&&!s){s=e.config;t.sps=[e.data];_t.forEach((function(e){t[e]=s[e]}),this)}if(e.nalUnitType==="pic_parameter_set_rbsp"&&!o){o=e.data;t.pps=[e.data]}n.push(e)};this.flush=function(){var e,s,o,u,l,f;while(n.length){if(n[0].nalUnitType==="access_unit_delimiter_rbsp"){break}n.shift()}if(n.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}e=ie.groupNalsIntoFrames(n);o=ie.groupFramesIntoGops(e);if(!o[0][0].keyFrame){s=this.getGopForFusion_(n[0],t);if(s){o.unshift(s);o.byteLength+=s.byteLength;o.nalCount+=s.nalCount;o.pts=s.pts;o.dts=s.dts;o.duration+=s.duration}else{o=ie.extendFirstKeyFrame(o)}}if(a.length){var d;if(r.alignGopsAtEnd){d=this.alignGopsAtEnd_(o)}else{d=this.alignGopsAtStart_(o)}if(!d){this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);n=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}ue.clearDtsInfo(t);o=d}ue.collectDtsInfo(t,o);t.samples=ie.generateSampleTable(o);l=N.mdat(ie.concatenateNalData(o));t.baseMediaDecodeTime=ue.calculateTrackBaseMediaDecodeTime(t,r.keepOriginalTimestamps);this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})));this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);n=[];this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime);this.trigger("timelineStartInfo",t.timelineStartInfo);u=N.moof(i,[t]);f=new Uint8Array(u.byteLength+l.byteLength);i++;f.set(u);f.set(l,u.byteLength);this.trigger("data",{track:t,boxes:f});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){ue.clearDtsInfo(t);s=undefined;o=undefined};this.getGopForFusion_=function(e){var r=45e3,i=1e4,n=Infinity,a,s,o,u,l;for(l=0;l<this.gopCache_.length;l++){u=this.gopCache_[l];o=u.gop;if(!(t.pps&&Ct(t.pps[0],u.pps[0]))||!(t.sps&&Ct(t.sps[0],u.sps[0]))){continue}if(o.dts<t.timelineStartInfo.dts){continue}a=e.dts-o.dts-o.duration;if(a>=-i&&a<=r){if(!s||n>a){s=u;n=a}}}if(s){return s.gop}return null};this.alignGopsAtStart_=function(e){var t,r,i,n,s,o,u,l;s=e.byteLength;o=e.nalCount;u=e.duration;t=r=0;while(t<a.length&&r<e.length){i=a[t];n=e[r];if(i.pts===n.pts){break}if(n.pts>i.pts){t++;continue}r++;s-=n.byteLength;o-=n.nalCount;u-=n.duration}if(r===0){return e}if(r===e.length){return null}l=e.slice(r);l.byteLength=s;l.duration=u;l.nalCount=o;l.pts=l[0].pts;l.dts=l[0].dts;return l};this.alignGopsAtEnd_=function(e){var t,r,i,n,s,o;t=a.length-1;r=e.length-1;s=null;o=false;while(t>=0&&r>=0){i=a[t];n=e[r];if(i.pts===n.pts){o=true;break}if(i.pts>n.pts){t--;continue}if(t===a.length-1){s=r}r--}if(!o&&s===null){return null}var u;if(o){u=r}else{u=s}if(u===0){return e}var l=e.slice(u);var f=l.reduce((function(e,t){e.byteLength+=t.byteLength;e.duration+=t.duration;e.nalCount+=t.nalCount;return e}),{byteLength:0,duration:0,nalCount:0});l.byteLength=f.byteLength;l.duration=f.duration;l.nalCount=f.nalCount;l.pts=l[0].pts;l.dts=l[0].dts;return l};this.alignGopsWith=function(e){a=e}};Tt.prototype=new Y;kt=function e(t,r){this.numberOfTracks=0;this.metadataStream=r;if(typeof t.remux!=="undefined"){this.remuxTracks=!!t.remux}else{this.remuxTracks=true}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;kt.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}this.pendingTracks.push(e.track);this.pendingBoxes.push(e.boxes);this.pendingBytes+=e.boxes.byteLength;if(e.track.type==="video"){this.videoTrack=e.track}if(e.track.type==="audio"){this.audioTrack=e.track}}};kt.prototype=new Y;kt.prototype.flush=function(e){var t=0,r={captions:[],captionStreams:{},metadata:[],info:{}},i,n,a,s=0,o;if(this.pendingTracks.length<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){s=this.videoTrack.timelineStartInfo.pts;_t.forEach((function(e){r.info[e]=this.videoTrack[e]}),this)}else if(this.audioTrack){s=this.audioTrack.timelineStartInfo.pts;yt.forEach((function(e){r.info[e]=this.audioTrack[e]}),this)}if(this.pendingTracks.length===1){r.type=this.pendingTracks[0].type}else{r.type="combined"}this.emittedTracks+=this.pendingTracks.length;a=N.initSegment(this.pendingTracks);r.initSegment=new Uint8Array(a.byteLength);r.initSegment.set(a);r.data=new Uint8Array(this.pendingBytes);for(o=0;o<this.pendingBoxes.length;o++){r.data.set(this.pendingBoxes[o],t);t+=this.pendingBoxes[o].byteLength}for(o=0;o<this.pendingCaptions.length;o++){i=this.pendingCaptions[o];i.startTime=i.startPts-s;i.startTime/=9e4;i.endTime=i.endPts-s;i.endTime/=9e4;r.captionStreams[i.stream]=true;r.captions.push(i)}for(o=0;o<this.pendingMetadata.length;o++){n=this.pendingMetadata[o];n.cueTime=n.pts-s;n.cueTime/=9e4;r.metadata.push(n)}r.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",r);if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};wt=function e(t){var r=this,i=true,n,a;wt.prototype.init.call(this);t=t||{};this.baseMediaDecodeTime=t.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e;e.type="aac";e.metadataStream=new We.MetadataStream;e.aacStream=new rt;e.audioTimestampRolloverStream=new We.TimestampRolloverStream("audio");e.timedMetadataTimestampRolloverStream=new We.TimestampRolloverStream("timed-metadata");e.adtsStream=new Xe;e.coalesceStream=new kt(t,e.metadataStream);e.headOfPipeline=e.aacStream;e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream);e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream);e.metadataStream.on("timestamp",(function(t){e.aacStream.setTimestamp(t.timeStamp)}));e.aacStream.on("data",(function(i){if(i.type==="timed-metadata"&&!e.audioSegmentStream){a=a||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"};e.coalesceStream.numberOfTracks++;e.audioSegmentStream=new St(a,t);e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)}}));e.coalesceStream.on("data",this.trigger.bind(this,"data"));e.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e;e.type="ts";e.metadataStream=new We.MetadataStream;e.packetStream=new We.TransportPacketStream;e.parseStream=new We.TransportParseStream;e.elementaryStream=new We.ElementaryStream;e.videoTimestampRolloverStream=new We.TimestampRolloverStream("video");e.audioTimestampRolloverStream=new We.TimestampRolloverStream("audio");e.timedMetadataTimestampRolloverStream=new We.TimestampRolloverStream("timed-metadata");e.adtsStream=new Xe;e.h264Stream=new gt;e.captionStream=new We.CaptionStream;e.coalesceStream=new kt(t,e.metadataStream);e.headOfPipeline=e.packetStream;e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream);e.elementaryStream.pipe(e.videoTimestampRolloverStream).pipe(e.h264Stream);e.elementaryStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream);e.elementaryStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream);e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream);e.elementaryStream.on("data",(function(i){var s;if(i.type==="metadata"){s=i.tracks.length;while(s--){if(!n&&i.tracks[s].type==="video"){n=i.tracks[s];n.timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime}else if(!a&&i.tracks[s].type==="audio"){a=i.tracks[s];a.timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime}}if(n&&!e.videoSegmentStream){e.coalesceStream.numberOfTracks++;e.videoSegmentStream=new Tt(n,t);e.videoSegmentStream.on("timelineStartInfo",(function(t){if(a){a.timelineStartInfo=t;e.audioSegmentStream.setEarliestDts(t.dts)}}));e.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo"));e.videoSegmentStream.on("baseMediaDecodeTime",(function(t){if(a){e.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}}));e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)}if(a&&!e.audioSegmentStream){e.coalesceStream.numberOfTracks++;e.audioSegmentStream=new St(a,t);e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)}}}));e.coalesceStream.on("data",this.trigger.bind(this,"data"));e.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e;if(a){a.timelineStartInfo.dts=undefined;a.timelineStartInfo.pts=undefined;ue.clearDtsInfo(a);a.timelineStartInfo.baseMediaDecodeTime=e;if(t.audioTimestampRolloverStream){t.audioTimestampRolloverStream.discontinuity()}}if(n){if(t.videoSegmentStream){t.videoSegmentStream.gopCache_=[];t.videoTimestampRolloverStream.discontinuity()}n.timelineStartInfo.dts=undefined;n.timelineStartInfo.pts=undefined;ue.clearDtsInfo(n);t.captionStream.reset();n.timelineStartInfo.baseMediaDecodeTime=e}if(t.timedMetadataTimestampRolloverStream){t.timedMetadataTimestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(e){if(a){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)}};this.alignGopsWith=function(e){if(n&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)}};this.push=function(e){if(i){var t=Et(e);if(t&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!t&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}i=false}this.transmuxPipeline_.headOfPipeline.push(e)};this.flush=function(){i=true;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};wt.prototype=new Y;var Ot={Transmuxer:wt,VideoSegmentStream:Tt,AudioSegmentStream:St,AUDIO_PROPERTIES:yt,VIDEO_PROPERTIES:_t};var Pt,It,Lt=$.parseType,Dt=function e(t){return new Date(t*1e3-20828448e5)},Ut=function e(t){return{isLeading:(t[0]&12)>>>2,dependsOn:t[0]&3,isDependedOn:(t[1]&192)>>>6,hasRedundancy:(t[1]&48)>>>4,paddingValue:(t[1]&14)>>>1,isNonSyncSample:t[1]&1,degradationPriority:t[2]<<8|t[3]}},xt=function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=[],n,a;for(n=0;n+4<t.length;n+=a){a=r.getUint32(n);n+=4;if(a<=0){i.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(t[n]&31){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+t[n]&31);break}}return i},Rt={avc1:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:r.getUint16(6),width:r.getUint16(24),height:r.getUint16(26),horizresolution:r.getUint16(28)+r.getUint16(30)/16,vertresolution:r.getUint16(32)+r.getUint16(34)/16,frameCount:r.getUint16(40),depth:r.getUint16(74),config:Pt(t.subarray(78,t.byteLength))}},avcC:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:t[4]&3,sps:[],pps:[]},n=t[5]&31,a,s,o,u;o=6;for(u=0;u<n;u++){s=r.getUint16(o);o+=2;i.sps.push(new Uint8Array(t.subarray(o,o+s)));o+=s}a=t[o];o++;for(u=0;u<a;u++){s=r.getUint16(o);o+=2;i.pps.push(new Uint8Array(t.subarray(o,o+s)));o+=s}return i},btrt:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:r.getUint32(0),maxBitrate:r.getUint32(4),avgBitrate:r.getUint32(8)}},esds:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:t[8]&31,decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(t[26]&7)<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={majorBrand:Lt(t.subarray(0,4)),minorVersion:r.getUint32(4),compatibleBrands:[]},n=8;while(n<t.byteLength){i.compatibleBrands.push(Lt(t.subarray(n,n+4)));n+=4}return i},dinf:function e(t){return{boxes:Pt(t)}},dref:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:Pt(t.subarray(8))}},hdlr:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:r.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:Lt(t.subarray(8,12)),name:""},n=8;for(n=24;n<t.byteLength;n++){if(t[n]===0){n++;break}i.name+=String.fromCharCode(t[n])}i.name=decodeURIComponent(escape(i.name));return i},mdat:function e(t){return{byteLength:t.byteLength,nals:xt(t)}},mdhd:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=4,n,a={version:r.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};if(a.version===1){i+=4;a.creationTime=Dt(r.getUint32(i));i+=8;a.modificationTime=Dt(r.getUint32(i));i+=4;a.timescale=r.getUint32(i);i+=8;a.duration=r.getUint32(i)}else{a.creationTime=Dt(r.getUint32(i));i+=4;a.modificationTime=Dt(r.getUint32(i));i+=4;a.timescale=r.getUint32(i);i+=4;a.duration=r.getUint32(i)}i+=4;n=r.getUint16(i);a.language+=String.fromCharCode((n>>10)+96);a.language+=String.fromCharCode(((n&992)>>5)+96);a.language+=String.fromCharCode((n&31)+96);return a},mdia:function e(t){return{boxes:Pt(t)}},mfhd:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function e(t){return{boxes:Pt(t)}},mp4a:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={dataReferenceIndex:r.getUint16(6),channelcount:r.getUint16(16),samplesize:r.getUint16(18),samplerate:r.getUint16(24)+r.getUint16(26)/65536};if(t.byteLength>28){i.streamDescriptor=Pt(t.subarray(28))[0]}return i},moof:function e(t){return{boxes:Pt(t)}},moov:function e(t){return{boxes:Pt(t)}},mvex:function e(t){return{boxes:Pt(t)}},mvhd:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=4,n={version:r.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};if(n.version===1){i+=4;n.creationTime=Dt(r.getUint32(i));i+=8;n.modificationTime=Dt(r.getUint32(i));i+=4;n.timescale=r.getUint32(i);i+=8;n.duration=r.getUint32(i)}else{n.creationTime=Dt(r.getUint32(i));i+=4;n.modificationTime=Dt(r.getUint32(i));i+=4;n.timescale=r.getUint32(i);i+=4;n.duration=r.getUint32(i)}i+=4;n.rate=r.getUint16(i)+r.getUint16(i+2)/16;i+=4;n.volume=r.getUint8(i)+r.getUint8(i+1)/8;i+=2;i+=2;i+=2*4;n.matrix=new Uint32Array(t.subarray(i,i+9*4));i+=9*4;i+=6*4;n.nextTrackId=r.getUint32(i);return n},pdin:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:r.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:r.getUint32(4),initialDelay:r.getUint32(8)}},sdtp:function e(t){var r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},i;for(i=4;i<t.byteLength;i++){r.samples.push({dependsOn:(t[i]&48)>>4,isDependedOn:(t[i]&12)>>2,hasRedundancy:t[i]&3})}return r},sidx:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:r.getUint32(4),timescale:r.getUint32(8),earliestPresentationTime:r.getUint32(12),firstOffset:r.getUint32(16)},n=r.getUint16(22),a;for(a=24;n;a+=12,n--){i.references.push({referenceType:(t[a]&128)>>>7,referencedSize:r.getUint32(a)&2147483647,subsegmentDuration:r.getUint32(a+4),startsWithSap:!!(t[a+8]&128),sapType:(t[a+8]&112)>>>4,sapDeltaTime:r.getUint32(a+8)&268435455})}return i},smhd:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function e(t){return{boxes:Pt(t)}},stco:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},n=r.getUint32(4),a;for(a=8;n;a+=4,n--){i.chunkOffsets.push(r.getUint32(a))}return i},stsc:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=r.getUint32(4),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]},a;for(a=8;i;a+=12,i--){n.sampleToChunks.push({firstChunk:r.getUint32(a),samplesPerChunk:r.getUint32(a+4),sampleDescriptionIndex:r.getUint32(a+8)})}return n},stsd:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:Pt(t.subarray(8))}},stsz:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:r.getUint32(4),entries:[]},n;for(n=12;n<t.byteLength;n+=4){i.entries.push(r.getUint32(n))}return i},stts:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},n=r.getUint32(4),a;for(a=8;n;a+=8,n--){i.timeToSamples.push({sampleCount:r.getUint32(a),sampleDelta:r.getUint32(a+4)})}return i},styp:function e(t){return Rt.ftyp(t)},tfdt:function e(t){var r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]};if(r.version===1){r.baseMediaDecodeTime*=Math.pow(2,32);r.baseMediaDecodeTime+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]}return r},tfhd:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:r.getUint32(4)},n=i.flags[2]&1,a=i.flags[2]&2,s=i.flags[2]&8,o=i.flags[2]&16,u=i.flags[2]&32,l=i.flags[0]&65536,f=i.flags[0]&131072,d;d=8;if(n){d+=4;i.baseDataOffset=r.getUint32(12);d+=4}if(a){i.sampleDescriptionIndex=r.getUint32(d);d+=4}if(s){i.defaultSampleDuration=r.getUint32(d);d+=4}if(o){i.defaultSampleSize=r.getUint32(d);d+=4}if(u){i.defaultSampleFlags=r.getUint32(d)}if(l){i.durationIsEmpty=true}if(!n&&f){i.baseDataOffsetIsMoof=true}return i},tkhd:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=4,n={version:r.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};if(n.version===1){i+=4;n.creationTime=Dt(r.getUint32(i));i+=8;n.modificationTime=Dt(r.getUint32(i));i+=4;n.trackId=r.getUint32(i);i+=4;i+=8;n.duration=r.getUint32(i)}else{n.creationTime=Dt(r.getUint32(i));i+=4;n.modificationTime=Dt(r.getUint32(i));i+=4;n.trackId=r.getUint32(i);i+=4;i+=4;n.duration=r.getUint32(i)}i+=4;i+=2*4;n.layer=r.getUint16(i);i+=2;n.alternateGroup=r.getUint16(i);i+=2;n.volume=r.getUint8(i)+r.getUint8(i+1)/8;i+=2;i+=2;n.matrix=new Uint32Array(t.subarray(i,i+9*4));i+=9*4;n.width=r.getUint16(i)+r.getUint16(i+2)/16;i+=4;n.height=r.getUint16(i)+r.getUint16(i+2)/16;return n},traf:function e(t){return{boxes:Pt(t)}},trak:function e(t){return{boxes:Pt(t)}},trex:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:r.getUint32(4),defaultSampleDescriptionIndex:r.getUint32(8),defaultSampleDuration:r.getUint32(12),defaultSampleSize:r.getUint32(16),sampleDependsOn:t[20]&3,sampleIsDependedOn:(t[21]&192)>>6,sampleHasRedundancy:(t[21]&48)>>4,samplePaddingValue:(t[21]&14)>>1,sampleIsDifferenceSample:!!(t[21]&1),sampleDegradationPriority:r.getUint16(22)}},trun:function e(t){var r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},i=new DataView(t.buffer,t.byteOffset,t.byteLength),n=r.flags[2]&1,a=r.flags[2]&4,s=r.flags[1]&1,o=r.flags[1]&2,u=r.flags[1]&4,l=r.flags[1]&8,f=i.getUint32(4),d=8,c;if(n){r.dataOffset=i.getInt32(d);d+=4}if(a&&f){c={flags:Ut(t.subarray(d,d+4))};d+=4;if(s){c.duration=i.getUint32(d);d+=4}if(o){c.size=i.getUint32(d);d+=4}if(l){c.compositionTimeOffset=i.getUint32(d);d+=4}r.samples.push(c);f--}while(f--){c={};if(s){c.duration=i.getUint32(d);d+=4}if(o){c.size=i.getUint32(d);d+=4}if(u){c.flags=Ut(t.subarray(d,d+4));d+=4}if(l){c.compositionTimeOffset=i.getUint32(d);d+=4}r.samples.push(c)}return r},"url ":function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function e(t){var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:r.getUint16(4),opcolor:new Uint16Array([r.getUint16(6),r.getUint16(8),r.getUint16(10)])}}};Pt=function e(t){var r=0,i=[],n,a,s,o,u;var l=new ArrayBuffer(t.length);var f=new Uint8Array(l);for(var d=0;d<t.length;++d){f[d]=t[d]}n=new DataView(l);while(r<t.byteLength){a=n.getUint32(r);s=Lt(t.subarray(r+4,r+8));o=a>1?r+a:t.byteLength;u=(Rt[s]||function(e){return{data:e}})(t.subarray(r+8,o));u.size=a;u.type=s;i.push(u);r=o}return i};It=function e(t,r){var i;r=r||0;i=new Array(r*2+1).join(" ");return t.map((function(e,t){return i+e.type+"\n"+Object.keys(e).filter((function(e){return e!=="type"&&e!=="boxes"})).map((function(t){var r=i+"  "+t+": ",n=e[t];if(n instanceof Uint8Array||n instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);if(!a){return r+"<>"}if(a.length===1){return r+"<"+a.join("").slice(1)+">"}return r+"<\n"+a.map((function(e){return i+"  "+e})).join("\n")+"\n"+i+"  >"}return r+JSON.stringify(n,null,2).split("\n").map((function(e,t){if(t===0){return e}return i+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+It(e.boxes,r+1):"")})).join("\n")};var Mt={inspect:Pt,textify:It,parseTfdt:Rt.tfdt,parseHdlr:Rt.hdlr,parseTfhd:Rt.tfhd,parseTrun:Rt.trun};var Bt=me.discardEmulationPreventionBytes;var Nt=we.CaptionStream;var jt=function e(t,r){var i=t;for(var n=0;n<r.length;n++){var a=r[n];if(i<a.size){return a}i-=a.size}return null};var Ft=function e(t,r,i){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),a=[],s,o,u,l;for(o=0;o+4<t.length;o+=u){u=n.getUint32(o);o+=4;if(u<=0){continue}switch(t[o]&31){case 6:var f=t.subarray(o+1,o+1+u);var d=jt(o,r);s={nalUnitType:"sei_rbsp",size:u,data:f,escapedRBSP:Bt(f),trackId:i};if(d){s.pts=d.pts;s.dts=d.dts;l=d}else{s.pts=l.pts;s.dts=l.dts}a.push(s);break;default:break}}return a};var Vt=function e(t,r,i){var n=r;var a=i.defaultSampleDuration||0;var s=i.defaultSampleSize||0;var o=i.trackId;var u=[];t.forEach((function(e){var t=Mt.parseTrun(e);var r=t.samples;r.forEach((function(e){if(e.duration===undefined){e.duration=a}if(e.size===undefined){e.size=s}e.trackId=o;e.dts=n;if(e.compositionTimeOffset===undefined){e.compositionTimeOffset=0}e.pts=n+e.compositionTimeOffset;n+=e.duration}));u=u.concat(r)}));return u};var Ht=function e(t,r){var i=$.findBox(t,["moof","traf"]);var n=$.findBox(t,["mdat"]);var a={};var s=[];n.forEach((function(e,t){var r=i[t];s.push({mdat:e,traf:r})}));s.forEach((function(e){var t=e.mdat;var i=e.traf;var n=$.findBox(i,["tfhd"]);var s=Mt.parseTfhd(n[0]);var o=s.trackId;var u=$.findBox(i,["tfdt"]);var l=u.length>0?Mt.parseTfdt(u[0]).baseMediaDecodeTime:0;var f=$.findBox(i,["trun"]);var d;var c;if(r===o&&f.length>0){d=Vt(f,l,s);c=Ft(t,d,o);if(!a[o]){a[o]=[]}a[o]=a[o].concat(c)}}));return a};var qt=function e(t,r,i){var n;if(!r){return null}n=Ht(t,r);return{seiNals:n[r],timescale:i}};var Gt=function e(){var t=false;var r;var i;var n;var a;var s;this.isInitialized=function(){return t};this.init=function(){r=new Nt;t=true;r.on("data",(function(e){e.startTime=e.startPts/a;e.endTime=e.endPts/a;s.captions.push(e);s.captionStreams[e.stream]=true}))};this.isNewInit=function(e,t){if(e&&e.length===0||t&&(typeof t==="undefined"?"undefined":Bo(t))==="object"&&Object.keys(t).length===0){return false}return n!==e[0]||a!==t[n]};this.parse=function(e,t,r){var o;if(!this.isInitialized()){return null}else if(!t||!r){return null}else if(this.isNewInit(t,r)){n=t[0];a=r[n]}else if(!n||!a){i.push(e);return null}while(i.length>0){var u=i.shift();this.parse(u,t,r)}o=qt(e,n,a);if(o===null||!o.seiNals){return null}this.pushNals(o.seiNals);this.flushStream();return s};this.pushNals=function(e){if(!this.isInitialized()||!e||e.length===0){return null}e.forEach((function(e){r.push(e)}))};this.flushStream=function(){if(!this.isInitialized()){return null}r.flush()};this.clearParsedCaptions=function(){s.captions=[];s.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized()){return null}r.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){i=[];n=null;a=null;if(!s){s={captions:[],captionStreams:{}}}else{this.clearParsedCaptions()}this.resetCaptionStream()};this.reset()};var Wt=Gt;var zt={generator:N,probe:$,Transmuxer:Ot.Transmuxer,AudioSegmentStream:Ot.AudioSegmentStream,VideoSegmentStream:Ot.VideoSegmentStream,CaptionParser:Wt};var $t=function e(t,r){if(!(t instanceof r)){throw new TypeError("Cannot call a class as a function")}};var Xt=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var Yt=function e(t,r){r.on("data",(function(e){var r=e.initSegment;e.initSegment={data:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength};var i=e.data;e.data=i.buffer;t.postMessage({action:"data",segment:e,byteOffset:i.byteOffset,byteLength:i.byteLength},[e.data])}));if(r.captionStream){r.captionStream.on("data",(function(e){t.postMessage({action:"caption",data:e})}))}r.on("done",(function(e){t.postMessage({action:"done"})}));r.on("gopInfo",(function(e){t.postMessage({action:"gopInfo",gopInfo:e})}))};var Kt=function(){function e(t,r){$t(this,e);this.options=r||{};this.self=t;this.init()}Xt(e,[{key:"init",value:function e(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new zt.Transmuxer(this.options);Yt(this.self,this.transmuxer)}},{key:"push",value:function e(t){var r=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(r)}},{key:"reset",value:function e(){this.init()}},{key:"setTimestampOffset",value:function e(t){var r=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(r*9e4))}},{key:"setAudioAppendStart",value:function e(t){this.transmuxer.setAudioAppendStart(Math.ceil(t.appendStart*9e4))}},{key:"flush",value:function e(t){this.transmuxer.flush()}},{key:"resetCaptions",value:function e(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function e(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]);return e}();var Qt=function e(t){t.onmessage=function(e){if(e.data.action==="init"&&e.data.options){this.messageHandlers=new Kt(t,e.data.options);return}if(!this.messageHandlers){this.messageHandlers=new Kt(t)}if(e.data&&e.data.action&&e.data.action!=="init"){if(this.messageHandlers[e.data.action]){this.messageHandlers[e.data.action](e.data)}}}};var Jt=new Qt(r);return Jt}()}));var zp={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"};var $p=function e(t){return t.map((function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,r){var i=("00"+Number(t).toString(16)).slice(-2);var n=("00"+Number(r).toString(16)).slice(-2);return"avc1."+i+"00"+n}))}))};var Xp=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r={codecCount:0};var i=void 0;r.codecCount=t.split(",").length;r.codecCount=r.codecCount||2;i=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t);if(i){r.videoCodec=i[2];r.videoObjectTypeIndicator=i[3]}r.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t);r.audioProfile=r.audioProfile&&r.audioProfile[2];return r};var Yp=function e(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,(function(e){return $p([e])[0]}))};var Kp=function e(t,r,i){return t+"/"+r+'; codecs="'+i.filter((function(e){return!!e})).join(", ")+'"'};var Qp=function e(t){if(t.segments&&t.segments.length&&t.segments[0].map){return"mp4"}return"mp2t"};var Jp=function e(t){var r=t.attributes||{};if(r.CODECS){return Xp(r.CODECS)}return zp};var Zp=function e(t,r){if(!t.mediaGroups.AUDIO||!r){return null}var i=t.mediaGroups.AUDIO[r];if(!i){return null}for(var n in i){var a=i[n];if(a.default&&a.playlists){return Xp(a.playlists[0].attributes.CODECS).audioProfile}}return null};var em=function e(t,r){var i=Qp(r);var n=Jp(r);var a=r.attributes||{};var s=true;var o=false;if(!r){return[]}if(t.mediaGroups.AUDIO&&a.AUDIO){var u=t.mediaGroups.AUDIO[a.AUDIO];if(u){o=true;s=false;for(var l in u){if(!u[l].uri&&!u[l].playlists){s=true;break}}}}if(o&&!n.audioProfile){if(!s){n.audioProfile=Zp(t,a.AUDIO)}if(!n.audioProfile){vh.log.warn("Multiple audio tracks present but no audio codec string is specified. "+"Attempting to use the default audio codec (mp4a.40.2)");n.audioProfile=zp.audioProfile}}var f={};if(n.videoCodec){f.video=""+n.videoCodec+n.videoObjectTypeIndicator}if(n.audioProfile){f.audio="mp4a.40."+n.audioProfile}var d=Kp("audio",i,[f.audio]);var c=Kp("video",i,[f.video]);var h=Kp("video",i,[f.video,f.audio]);if(o){if(!s&&f.video){return[c,d]}if(!s&&!f.video){return[d,d]}return[h,d]}if(!f.video){return[d]}return[h]};var tm=function e(t){var r={type:"",parameters:{}};var i=t.trim().split(";");r.type=i.shift().trim();i.forEach((function(e){var t=e.trim().split("=");if(t.length>1){var i=t[0].replace(/"/g,"").trim();var n=t[1].replace(/"/g,"").trim();r.parameters[i]=n}}));return r};var rm=function e(t){return/mp4a\.\d+.\d+/i.test(t)};var im=function e(t){return/avc1\.[\da-f]+/i.test(t)};var nm=function e(t,r,i){if(typeof r==="undefined"||r===null||!t.length){return[]}var n=Math.ceil((r-i+3)*9e4);var a=void 0;for(a=0;a<t.length;a++){if(t[a].pts>n){break}}return t.slice(a)};var am=function e(t,r,i){if(!r.length){return t}if(i){return r.slice()}var n=r[0].pts;var a=0;for(a;a<t.length;a++){if(t[a].pts>=n){break}}return t.slice(0,a).concat(r)};var sm=function e(t,r,i,n){var a=Math.ceil((r-n)*9e4);var s=Math.ceil((i-n)*9e4);var o=t.slice();var u=t.length;while(u--){if(t[u].pts<=s){break}}if(u===-1){return o}var l=u+1;while(l--){if(t[l].pts<=a){break}}l=Math.max(l,0);o.splice(l,u-l+1);return o};var om=function e(t,r,i){var n=null;var a=null;var s=0;var o=[];var u=[];if(!t&&!r){return vh.createTimeRange()}if(!t){return r.buffered}if(!r){return t.buffered}if(i){return t.buffered}if(t.buffered.length===0&&r.buffered.length===0){return vh.createTimeRange()}var l=t.buffered;var f=r.buffered;var d=l.length;while(d--){o.push({time:l.start(d),type:"start"});o.push({time:l.end(d),type:"end"})}d=f.length;while(d--){o.push({time:f.start(d),type:"start"});o.push({time:f.end(d),type:"end"})}o.sort((function(e,t){return e.time-t.time}));for(d=0;d<o.length;d++){if(o[d].type==="start"){s++;if(s===2){n=o[d].time}}else if(o[d].type==="end"){s--;if(s===1){a=o[d].time}}if(n!==null&&a!==null){u.push([n,a]);n=null;a=null}}return vh.createTimeRanges(u)};var um=function e(t,r){var i=t.addSourceBuffer(r);var n=Object.create(null);n.updating=false;n.realBuffer_=i;var a=function e(t){if(typeof i[t]==="function"){n[t]=function(){return i[t].apply(i,arguments)}}else if(typeof n[t]==="undefined"){Object.defineProperty(n,t,{get:function e(){return i[t]},set:function e(r){return i[t]=r}})}};for(var s in i){a(s)}return n};var lm=function(e){wh(t,e);function t(e,r){bh(this,t);var i=kh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,vh.EventTarget));i.timestampOffset_=0;i.pendingBuffers_=[];i.bufferUpdating_=false;i.mediaSource_=e;i.codecs_=r;i.audioCodec_=null;i.videoCodec_=null;i.audioDisabled_=false;i.appendAudioInitSegment_=true;i.gopBuffer_=[];i.timeMapping_=0;i.safeAppend_=vh.browser.IE_VERSION>=11;var n={remux:false,alignGopsAtEnd:i.safeAppend_};i.codecs_.forEach((function(e){if(rm(e)){i.audioCodec_=e}else if(im(e)){i.videoCodec_=e}}));i.transmuxer_=new Wp;i.transmuxer_.postMessage({action:"init",options:n});i.transmuxer_.onmessage=function(e){if(e.data.action==="data"){return i.data_(e)}if(e.data.action==="done"){return i.done_(e)}if(e.data.action==="gopInfo"){return i.appendGopInfo_(e)}};Object.defineProperty(i,"timestampOffset",{get:function e(){return this.timestampOffset_},set:function e(t){if(typeof t==="number"&&t>=0){this.timestampOffset_=t;this.appendAudioInitSegment_=true;this.gopBuffer_.length=0;this.timeMapping_=0;this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t})}}});Object.defineProperty(i,"appendWindowStart",{get:function e(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function e(t){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=t}if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=t}}});Object.defineProperty(i,"updating",{get:function e(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(i,"buffered",{get:function e(){return om(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return i}Th(t,[{key:"data_",value:function e(t){var r=t.data.segment;r.data=new Uint8Array(r.data,t.data.byteOffset,t.data.byteLength);r.initSegment=new Uint8Array(r.initSegment.data,r.initSegment.byteOffset,r.initSegment.byteLength);Op(this,this.mediaSource_,r);this.pendingBuffers_.push(r);return}},{key:"done_",value:function e(t){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_();return}},{key:"createRealSourceBuffers_",value:function e(){var t=this;var r=["audio","video"];r.forEach((function(e){if(!t[e+"Codec_"]){return}if(t[e+"Buffer_"]){return}var i=null;if(t.mediaSource_[e+"Buffer_"]){i=t.mediaSource_[e+"Buffer_"];i.updating=false}else{var n=e+"Codec_";var a=e+'/mp4;codecs="'+t[n]+'"';i=um(t.mediaSource_.nativeMediaSource_,a);t.mediaSource_[e+"Buffer_"]=i}t[e+"Buffer_"]=i;["update","updatestart","updateend"].forEach((function(n){i.addEventListener(n,(function(){if(e==="audio"&&t.audioDisabled_){return}if(n==="updateend"){t[e+"Buffer_"].updating=false}var i=r.every((function(r){if(r==="audio"&&t.audioDisabled_){return true}if(e!==r&&t[r+"Buffer_"]&&t[r+"Buffer_"].updating){return false}return true}));if(i){return t.trigger(n)}}))}))}))}},{key:"appendBuffer",value:function e(t){this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var r=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:r.end(r.length-1)})}if(this.videoBuffer_){this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:nm(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)})}this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function e(t){this.gopBuffer_=am(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function e(t,r){if(this.videoBuffer_){this.videoBuffer_.updating=true;this.videoBuffer_.remove(t,r);this.gopBuffer_=sm(this.gopBuffer_,t,r,this.timeMapping_)}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.updating=true;this.audioBuffer_.remove(t,r)}Pp(t,r,this.metadataTrack_);if(this.inbandTextTracks_){for(var i in this.inbandTextTracks_){Pp(t,r,this.inbandTextTracks_[i])}}}},{key:"processPendingSegments_",value:function e(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};t=this.pendingBuffers_.reduce((function(e,t){var r=t.type;var i=t.data;var n=t.initSegment;e[r].segments.push(i);e[r].bytes+=i.byteLength;e[r].initSegment=n;if(t.captions){e.captions=e.captions.concat(t.captions)}if(t.info){e[r].info=t.info}if(t.metadata){e.metadata=e.metadata.concat(t.metadata)}return e}),t);if(!this.videoBuffer_&&!this.audioBuffer_){if(t.video.bytes===0){this.videoCodec_=null}if(t.audio.bytes===0){this.audioCodec_=null}this.createRealSourceBuffers_()}if(t.audio.info){this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info})}if(t.video.info){this.mediaSource_.trigger({type:"videoinfo",info:t.video.info})}if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){t.audio.segments.unshift(t.audio.initSegment);t.audio.bytes+=t.audio.initSegment.byteLength}this.appendAudioInitSegment_=false}var r=false;if(this.videoBuffer_&&t.video.bytes){t.video.segments.unshift(t.video.initSegment);t.video.bytes+=t.video.initSegment.byteLength;this.concatAndAppendSegments_(t.video,this.videoBuffer_);Dp(this,t.captions,t.metadata)}else if(this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)){r=true}if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(t.audio,this.audioBuffer_)}this.pendingBuffers_.length=0;if(r){this.trigger("updateend")}this.bufferUpdating_=false}},{key:"concatAndAppendSegments_",value:function e(t,r){var i=0;var n=void 0;if(t.bytes){n=new Uint8Array(t.bytes);t.segments.forEach((function(e){n.set(e,i);i+=e.byteLength}));try{r.updating=true;r.appendBuffer(n)}catch(a){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:a.message,originalError:a})}}}}},{key:"abort",value:function e(){if(this.videoBuffer_){this.videoBuffer_.abort()}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.abort()}if(this.transmuxer_){this.transmuxer_.postMessage({action:"reset"})}this.pendingBuffers_.length=0;this.bufferUpdating_=false}}]);return t}(vh.EventTarget);var fm=function(e){wh(t,e);function t(){bh(this,t);var e=kh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var r=void 0;e.nativeMediaSource_=new f.MediaSource;for(r in e.nativeMediaSource_){if(!(r in t.prototype)&&typeof e.nativeMediaSource_[r]==="function"){e[r]=e.nativeMediaSource_[r].bind(e.nativeMediaSource_)}}e.duration_=NaN;Object.defineProperty(e,"duration",{get:function e(){if(this.duration_===Infinity){return this.duration_}return this.nativeMediaSource_.duration},set:function e(t){this.duration_=t;if(t!==Infinity){this.nativeMediaSource_.duration=t;return}}});Object.defineProperty(e,"seekable",{get:function e(){if(this.duration_===Infinity){return vh.createTimeRanges([[0,this.nativeMediaSource_.duration]])}return this.nativeMediaSource_.seekable}});Object.defineProperty(e,"readyState",{get:function e(){return this.nativeMediaSource_.readyState}});Object.defineProperty(e,"activeSourceBuffers",{get:function e(){return this.activeSourceBuffers_}});e.sourceBuffers=[];e.activeSourceBuffers_=[];e.updateActiveSourceBuffers_=function(){e.activeSourceBuffers_.length=0;if(e.sourceBuffers.length===1){var t=e.sourceBuffers[0];t.appendAudioInitSegment_=true;t.audioDisabled_=!t.audioCodec_;e.activeSourceBuffers_.push(t);return}var r=false;var i=true;for(var n=0;n<e.player_.audioTracks().length;n++){var a=e.player_.audioTracks()[n];if(a.enabled&&a.kind!=="main"){r=true;i=false;break}}e.sourceBuffers.forEach((function(t,n){t.appendAudioInitSegment_=true;if(t.videoCodec_&&t.audioCodec_){t.audioDisabled_=r}else if(t.videoCodec_&&!t.audioCodec_){t.audioDisabled_=true;i=false}else if(!t.videoCodec_&&t.audioCodec_){t.audioDisabled_=n?i:!i;if(t.audioDisabled_){return}}e.activeSourceBuffers_.push(t)}))};e.onPlayerMediachange_=function(){e.sourceBuffers.forEach((function(e){e.appendAudioInitSegment_=true}))};e.onHlsReset_=function(){e.sourceBuffers.forEach((function(e){if(e.transmuxer_){e.transmuxer_.postMessage({action:"resetCaptions"})}}))};e.onHlsSegmentTimeMapping_=function(t){e.sourceBuffers.forEach((function(e){return e.timeMapping_=t.mapping}))};["sourceopen","sourceclose","sourceended"].forEach((function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))}),e);e.on("sourceopen",(function(t){var r=v.querySelector('[src="'+e.url_+'"]');if(!r){return}e.player_=vh(r.parentNode);e.player_.tech_.on("hls-reset",e.onHlsReset_);e.player_.tech_.on("hls-segment-time-mapping",e.onHlsSegmentTimeMapping_);if(e.player_.audioTracks&&e.player_.audioTracks()){e.player_.audioTracks().on("change",e.updateActiveSourceBuffers_);e.player_.audioTracks().on("addtrack",e.updateActiveSourceBuffers_);e.player_.audioTracks().on("removetrack",e.updateActiveSourceBuffers_)}e.player_.on("mediachange",e.onPlayerMediachange_)}));e.on("sourceended",(function(t){var r=Lp(e.duration);for(var i=0;i<e.sourceBuffers.length;i++){var n=e.sourceBuffers[i];var a=n.metadataTrack_&&n.metadataTrack_.cues;if(a&&a.length){a[a.length-1].endTime=r}}}));e.on("sourceclose",(function(e){this.sourceBuffers.forEach((function(e){if(e.transmuxer_){e.transmuxer_.terminate()}}));this.sourceBuffers.length=0;if(!this.player_){return}if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)}if(this.player_.el_){this.player_.off("mediachange",this.onPlayerMediachange_);this.player_.tech_.off("hls-reset",this.onHlsReset_);this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)}}));return e}Th(t,[{key:"addSeekableRange_",value:function e(t,r){var i=void 0;if(this.duration!==Infinity){i=new Error("MediaSource.addSeekableRange() can only be invoked "+"when the duration is Infinity");i.name="InvalidStateError";i.code=11;throw i}if(r>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=r}}},{key:"addSourceBuffer",value:function e(t){var r=void 0;var i=tm(t);if(/^(video|audio)\/mp2t$/i.test(i.type)){var n=[];if(i.parameters&&i.parameters.codecs){n=i.parameters.codecs.split(",");n=$p(n);n=n.filter((function(e){return rm(e)||im(e)}))}if(n.length===0){n=["avc1.4d400d","mp4a.40.2"]}r=new lm(this,n);if(this.sourceBuffers.length!==0){this.sourceBuffers[0].createRealSourceBuffers_();r.createRealSourceBuffers_();this.sourceBuffers[0].audioDisabled_=true}}else{r=this.nativeMediaSource_.addSourceBuffer(t)}this.sourceBuffers.push(r);return r}}]);return t}(vh.EventTarget);var dm=0;vh.mediaSources={};var cm=function e(t,r){var i=vh.mediaSources[t];if(i){i.trigger({type:"sourceopen",swfId:r})}else{throw new Error("Media Source not found (Video.js)")}};var hm=function e(){return!!f.MediaSource&&!!f.MediaSource.isTypeSupported&&f.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};var pm=function e(){this.MediaSource={open:cm,supportsNativeMediaSources:hm};if(hm()){return new fm}throw new Error("Cannot use create a virtual MediaSource for this video")};pm.open=cm;pm.supportsNativeMediaSources=hm;var mm={createObjectURL:function e(t){var r="blob:vjs-media-source/";var i=void 0;if(t instanceof fm){i=f.URL.createObjectURL(t.nativeMediaSource_);t.url_=i;return i}if(!(t instanceof fm)){i=f.URL.createObjectURL(t);t.url_=i;return i}i=r+dm;dm++;vh.mediaSources[i]=t;return i}};vh.MediaSource=pm;vh.URL=mm;var vm=vh.EventTarget,gm=vh.mergeOptions;var ym=function e(t,r){var i=gm(t,{duration:r.duration,minimumUpdatePeriod:r.minimumUpdatePeriod});for(var n=0;n<r.playlists.length;n++){var a=Dh(i,r.playlists[n]);if(a){i=a}}Ph(r,(function(e,t,r,n){if(e.playlists&&e.playlists.length){var a=e.playlists[0].uri;var s=Dh(i,e.playlists[0]);if(s){i=s;i.mediaGroups[t][r][n].playlists[0]=i.playlists[a]}}}));return i};var _m=function(e){wh(t,e);function t(e,r,i,n){bh(this,t);var a=kh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.hls_=r;a.withCredentials=i;if(!e){throw new Error("A non-empty playlist URL or playlist is required")}a.on("minimumUpdatePeriod",(function(){a.refreshXml_()}));a.on("mediaupdatetimeout",(function(){a.refreshMedia_()}));if(typeof e==="string"){a.srcUrl=e;a.state="HAVE_NOTHING";return kh(a)}a.masterPlaylistLoader_=n;a.state="HAVE_METADATA";a.started=true;a.media(e);f.setTimeout((function(){a.trigger("loadedmetadata")}),0);return a}Th(t,[{key:"dispose",value:function e(){this.stopRequest();f.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function e(){if(this.request){var t=this.request;this.request=null;t.onreadystatechange=null;t.abort()}}},{key:"media",value:function e(t){if(!t){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var r=this.state;if(typeof t==="string"){if(!this.master.playlists[t]){throw new Error("Unknown playlist URI: "+t)}t=this.master.playlists[t]}var i=!this.media_||t.uri!==this.media_.uri;this.state="HAVE_METADATA";if(!i){return}if(this.media_){this.trigger("mediachanging")}this.media_=t;this.refreshMedia_();if(r!=="HAVE_MASTER"){this.trigger("mediachange")}}},{key:"pause",value:function e(){this.stopRequest();if(this.state==="HAVE_NOTHING"){this.started=false}}},{key:"load",value:function e(){if(!this.started){this.start();return}this.trigger("loadedplaylist")}},{key:"parseMasterXml",value:function e(){var t=Fi(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});t.uri=this.srcUrl;for(var r=0;r<t.playlists.length;r++){var i="placeholder-uri-"+r;t.playlists[r].uri=i;t.playlists[i]=t.playlists[r]}Ph(t,(function(e,r,i,n){if(e.playlists&&e.playlists.length){var a="placeholder-uri-"+r+"-"+i+"-"+n;e.playlists[0].uri=a;t.playlists[a]=e.playlists[0]}}));Uh(t);xh(t);return t}},{key:"start",value:function e(){var t=this;this.started=true;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(e,r){if(!t.request){return}t.request=null;if(e){t.error={status:r.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:r.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}t.masterXml_=r.responseText;if(r.responseHeaders&&r.responseHeaders.date){t.masterLoaded_=Date.parse(r.responseHeaders.date)}else{t.masterLoaded_=Date.now()}t.syncClientServerClock_(t.onClientServerClockSync_.bind(t))}))}},{key:"syncClientServerClock_",value:function e(t){var r=this;var i=Vi(this.masterXml_);if(i===null){this.clientOffset_=this.masterLoaded_-Date.now();return t()}if(i.method==="DIRECT"){this.clientOffset_=i.value-Date.now();return t()}this.request=this.hls_.xhr({uri:_h(this.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},(function(e,n){if(!r.request){return}if(e){r.clientOffset_=r.masterLoaded_-Date.now();return t()}var a=void 0;if(i.method==="HEAD"){if(!n.responseHeaders||!n.responseHeaders.date){a=r.masterLoaded_}else{a=Date.parse(n.responseHeaders.date)}}else{a=Date.parse(n.responseText)}r.clientOffset_=a-Date.now();t()}))}},{key:"onClientServerClockSync_",value:function e(){var t=this;this.master=this.parseMasterXml();this.state="HAVE_MASTER";this.trigger("loadedplaylist");if(!this.media_){this.media(this.master.playlists[0])}f.setTimeout((function(){t.trigger("loadedmetadata")}),0);if(this.master.minimumUpdatePeriod){f.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),this.master.minimumUpdatePeriod)}}},{key:"refreshXml_",value:function e(){var t=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(e,r){if(!t.request){return}t.request=null;if(e){t.error={status:r.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:r.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}t.masterXml_=r.responseText;var i=t.parseMasterXml();t.master=ym(t.master,i);f.setTimeout((function(){t.trigger("minimumUpdatePeriod")}),t.master.minimumUpdatePeriod)}))}},{key:"refreshMedia_",value:function e(){var t=this;var r=void 0;var i=void 0;if(this.masterPlaylistLoader_){r=this.masterPlaylistLoader_.master;i=this.masterPlaylistLoader_.parseMasterXml()}else{r=this.master;i=this.parseMasterXml()}var n=ym(r,i);if(n){if(this.masterPlaylistLoader_){this.masterPlaylistLoader_.master=n}else{this.master=n}this.media_=n.playlists[this.media_.uri]}else{this.trigger("playlistunchanged")}if(!this.media().endList){this.mediaUpdateTimeout=f.setTimeout((function(){t.trigger("mediaupdatetimeout")}),Rh(this.media(),!!n))}this.trigger("loadedplaylist")}}]);return t}(vm);var bm=function e(t){if(vh.log.debug){return vh.log.debug.bind(vh,"VHS:",t+" >")}return function(){}};function Tm(){}var Sm=function(){function e(t,r,i,n){bh(this,e);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=t;this.processedAppend_=false;this.type_=i;this.mimeType_=r;this.logger_=bm("SourceUpdater["+i+"]["+r+"]");if(t.readyState==="closed"){t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,r,n))}else{this.createSourceBuffer_(r,n)}}Th(e,[{key:"createSourceBuffer_",value:function e(t,r){var i=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(t);this.logger_("created SourceBuffer");if(r){r.trigger("sourcebufferadded");if(this.mediaSource.sourceBuffers.length<2){r.on("sourcebufferadded",(function(){i.start_()}));return}}this.start_()}},{key:"start_",value:function e(){var t=this;this.started_=true;this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null;t.logger_("buffered ["+Ep(t.buffered())+"]");if(e){e()}t.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function e(t){var r=this;if(this.processedAppend_){this.queueCallback_((function(){r.sourceBuffer_.abort()}),t)}}},{key:"appendBuffer",value:function e(t,r){var i=this;this.processedAppend_=true;this.queueCallback_((function(){i.sourceBuffer_.appendBuffer(t)}),r)}},{key:"buffered",value:function e(){if(!this.sourceBuffer_){return vh.createTimeRanges()}return this.sourceBuffer_.buffered}},{key:"remove",value:function e(t,r){var i=this;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Tm;if(this.processedAppend_){this.queueCallback_((function(){i.logger_("remove ["+t+" => "+r+"]");i.sourceBuffer_.remove(t,r)}),n)}}},{key:"updating",value:function e(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function e(t){var r=this;if(typeof t!=="undefined"){this.queueCallback_((function(){r.sourceBuffer_.timestampOffset=t}));this.timestampOffset_=t}return this.timestampOffset_}},{key:"queueCallback_",value:function e(t,r){this.callbacks_.push([t.bind(this),r]);this.runCallback_()}},{key:"runCallback_",value:function e(){var t=void 0;if(!this.updating()&&this.callbacks_.length&&this.started_){t=this.callbacks_.shift();this.pendingCallback_=t[1];t[0]()}}},{key:"dispose",value:function e(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);if(this.sourceBuffer_&&this.mediaSource.readyState==="open"){this.sourceBuffer_.abort()}}}]);return e}();var wm={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};var km={FAILURE:2,TIMEOUT:-101,ABORTED:-102};var Em=function e(t){var r=void 0;var i=void 0;i=t.offset+t.length-1;r=t.offset;return"bytes="+r+"-"+i};var Cm=function e(t){var r={};if(t.byterange){r.Range=Em(t.byterange)}return r};var Am=function e(t){t.forEach((function(e){e.abort()}))};var Om=function e(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}};var Pm=function e(t){var r=t.target;var i=Date.now()-r.requestTime;var n={bandwidth:Infinity,bytesReceived:0,roundTripTime:i||0};n.bytesReceived=t.loaded;n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3);return n};var Im=function e(t,r){if(r.timedout){return{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:km.TIMEOUT,xhr:r}}if(r.aborted){return{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:km.ABORTED,xhr:r}}if(t){return{status:r.status,message:"HLS request errored at URL: "+r.uri,code:km.FAILURE,xhr:r}}return null};var Lm=function e(t,r){return function(e,i){var n=i.response;var a=Im(e,i);if(a){return r(a,t)}if(n.byteLength!==16){return r({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:km.FAILURE,xhr:i},t)}var s=new DataView(n);t.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]);return r(null,t)}};var Dm=function e(t,r,i){return function(e,n){var a=n.response;var s=Im(e,n);if(s){return i(s,t)}if(a.byteLength===0){return i({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:km.FAILURE,xhr:n},t)}t.map.bytes=new Uint8Array(n.response);if(!r.isInitialized()){r.init()}t.map.timescales=Ki.timescale(t.map.bytes);t.map.videoTrackIds=Ki.videoTrackIds(t.map.bytes);return i(null,t)}};var Um=function e(t,r,i){return function(e,n){var a=n.response;var s=Im(e,n);var o=void 0;if(s){return i(s,t)}if(a.byteLength===0){return i({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:km.FAILURE,xhr:n},t)}t.stats=Om(n);if(t.key){t.encryptedBytes=new Uint8Array(n.response)}else{t.bytes=new Uint8Array(n.response)}if(t.map&&t.map.bytes){if(!r.isInitialized()){r.init()}o=r.parse(t.bytes,t.map.videoTrackIds,t.map.timescales);if(o&&o.captions){t.captionStreams=o.captionStreams;t.fmp4Captions=o.captions}}return i(null,t)}};var xm=function e(t,r,i){var n=function e(n){if(n.data.source===r.requestId){t.removeEventListener("message",e);var a=n.data.decrypted;r.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength);return i(null,r)}};t.addEventListener("message",n);t.postMessage(hp({source:r.requestId,encrypted:r.encryptedBytes,key:r.key.bytes,iv:r.key.iv}),[r.encryptedBytes.buffer,r.key.bytes.buffer])};var Rm=function e(t){return t.reduce((function(e,t){return t.code>e.code?t:e}))};var Mm=function e(t,r,i){var n=[];var a=0;return function(e,s){if(e){Am(t);n.push(e)}a+=1;if(a===t.length){s.endOfAllRequests=Date.now();if(n.length>0){var o=Rm(n);return i(o,s)}if(s.encryptedBytes){return xm(r,s,i)}return i(null,s)}}};var Bm=function e(t,r){return function(e){t.stats=vh.mergeOptions(t.stats,Pm(e));if(!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived){t.stats.firstBytesReceivedAt=Date.now()}return r(e,t)}};var Nm=function e(t,r,i,n,a,s,o){var u=[];var l=Mm(u,i,o);if(a.key){var f=vh.mergeOptions(r,{uri:a.key.resolvedUri,responseType:"arraybuffer"});var d=Lm(a,l);var c=t(f,d);u.push(c)}if(a.map&&!a.map.bytes){var h=vh.mergeOptions(r,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:Cm(a.map)});var p=Dm(a,n,l);var m=t(h,p);u.push(m)}var v=vh.mergeOptions(r,{uri:a.resolvedUri,responseType:"arraybuffer",headers:Cm(a)});var g=Um(a,n,l);var y=t(v,g);y.addEventListener("progress",Bm(a,s));u.push(y);return function(){return Am(u)}};var jm=function e(t,r){var i=void 0;if(!t){return""}i=f.getComputedStyle(t);if(!i){return""}return i[r]};var Fm=function e(t,r){var i=t.slice();t.sort((function(e,t){var n=r(e,t);if(n===0){return i.indexOf(e)-i.indexOf(t)}return n}))};var Vm=function e(t,r){var i=void 0;var n=void 0;if(t.attributes.BANDWIDTH){i=t.attributes.BANDWIDTH}i=i||f.Number.MAX_VALUE;if(r.attributes.BANDWIDTH){n=r.attributes.BANDWIDTH}n=n||f.Number.MAX_VALUE;return i-n};var Hm=function e(t,r){var i=void 0;var n=void 0;if(t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width){i=t.attributes.RESOLUTION.width}i=i||f.Number.MAX_VALUE;if(r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width){n=r.attributes.RESOLUTION.width}n=n||f.Number.MAX_VALUE;if(i===n&&t.attributes.BANDWIDTH&&r.attributes.BANDWIDTH){return t.attributes.BANDWIDTH-r.attributes.BANDWIDTH}return i-n};var qm=function e(t,r,i,n){var a=t.playlists.map((function(e){var t=void 0;var r=void 0;var i=void 0;t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width;r=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;i=e.attributes.BANDWIDTH;i=i||f.Number.MAX_VALUE;return{bandwidth:i,width:t,height:r,playlist:e}}));Fm(a,(function(e,t){return e.bandwidth-t.bandwidth}));a=a.filter((function(e){return!sp.isIncompatible(e.playlist)}));var s=a.filter((function(e){return sp.isEnabled(e.playlist)}));if(!s.length){s=a.filter((function(e){return!sp.isDisabled(e.playlist)}))}var o=s.filter((function(e){return e.bandwidth*wm.BANDWIDTH_VARIANCE<r}));var u=o[o.length-1];var l=o.filter((function(e){return e.bandwidth===u.bandwidth}))[0];var d=o.filter((function(e){return e.width&&e.height}));Fm(d,(function(e,t){return e.width-t.width}));var c=d.filter((function(e){return e.width===i&&e.height===n}));u=c[c.length-1];var h=c.filter((function(e){return e.bandwidth===u.bandwidth}))[0];var p=void 0;var m=void 0;var v=void 0;if(!h){p=d.filter((function(e){return e.width>i||e.height>n}));m=p.filter((function(e){return e.width===p[0].width&&e.height===p[0].height}));u=m[m.length-1];v=m.filter((function(e){return e.bandwidth===u.bandwidth}))[0]}var g=v||h||l||s[0]||a[0];return g?g.playlist:null};var Gm=function e(){return qm(this.playlists.master,this.systemBandwidth,parseInt(jm(this.tech_.el(),"width"),10),parseInt(jm(this.tech_.el(),"height"),10))};var Wm=function e(t){var r=t.master,i=t.currentTime,n=t.bandwidth,a=t.duration,s=t.segmentDuration,o=t.timeUntilRebuffer,u=t.currentTimeline,l=t.syncController;var f=r.playlists.filter((function(e){return!sp.isIncompatible(e)}));var d=f.filter(sp.isEnabled);if(!d.length){d=f.filter((function(e){return!sp.isDisabled(e)}))}var c=d.filter(sp.hasAttribute.bind(null,"BANDWIDTH"));var h=c.map((function(e){var t=l.getSyncPoint(e,a,u,i);var r=t?1:2;var f=sp.estimateSegmentRequestTime(s,n,e);var d=f*r-o;return{playlist:e,rebufferingImpact:d}}));var p=h.filter((function(e){return e.rebufferingImpact<=0}));Fm(p,(function(e,t){return Vm(t.playlist,e.playlist)}));if(p.length){return p[0]}Fm(h,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact}));return h[0]||null};var zm=function e(){var t=this.playlists.master.playlists.filter(sp.isEnabled);Fm(t,(function(e,t){return Vm(e,t)}));var r=t.filter((function(e){return Xp(e.attributes.CODECS).videoCodec}));return r[0]||null};var $m=function e(t,r,i){for(var n in i){if(!t[n]){r.trigger({type:"usage",name:"hls-608"});var a=r.textTracks().getTrackById(n);if(a){t[n]=a}else{t[n]=r.addRemoteTextTrack({kind:"captions",id:n,label:n},false).track}}}};var Xm=function e(t){var r=t.inbandTextTracks,i=t.captionArray,n=t.timestampOffset;if(!i){return}var a=window.WebKitDataCue||window.VTTCue;i.forEach((function(e){var t=e.stream;var i=e.startTime;var s=e.endTime;if(!r[t]){return}i+=n;s+=n;r[t].addCue(new a(i,s,e.text))}))};var Ym=500;var Km=function e(t,r,i){if(!t||!r){return false}var n=t.segments;var a=i===n.length;return t.endList&&r.readyState==="open"&&a};var Qm=function e(t){return typeof t==="number"&&isFinite(t)};var Jm=function e(t,r,i){if(t!=="main"||!r||!i){return null}if(!i.containsAudio&&!i.containsVideo){return"Neither audio nor video found in segment."}if(r.containsVideo&&!i.containsVideo){return"Only audio found in segment when we expected video."+" We can't switch to audio only from a stream that had video."+" To get rid of this message, please add codec information to the manifest."}if(!r.containsVideo&&i.containsVideo){return"Video found in segment when we expected only audio."+" We can't switch to a stream with video from an audio only stream."+" To get rid of this message, please add codec information to the manifest."}return null};var Zm=function e(t,r,i){var n=void 0;if(t.length&&t.start(0)>0&&t.start(0)<r){n=t.start(0)}else{n=r-30}return Math.min(n,r-i)};var ev=function e(t){var r=t.segment,i=r.start,n=r.end,a=t.playlist,s=a.mediaSequence,o=a.id,u=a.segments,l=u===undefined?[]:u,f=t.mediaIndex,d=t.timeline;return["appending ["+f+"] of ["+s+", "+(s+l.length)+"] from playlist ["+o+"]","["+i+" => "+n+"] in timeline ["+d+"]"].join(" ")};var tv=function(e){wh(t,e);function t(e){bh(this,t);var r=kh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e){throw new TypeError("Initialization settings are required")}if(typeof e.currentTime!=="function"){throw new TypeError("No currentTime getter specified")}if(!e.mediaSource){throw new TypeError("No MediaSource specified")}r.bandwidth=e.bandwidth;r.throughput={rate:0,count:0};r.roundTrip=NaN;r.resetStats_();r.mediaIndex=null;r.hasPlayed_=e.hasPlayed;r.currentTime_=e.currentTime;r.seekable_=e.seekable;r.seeking_=e.seeking;r.duration_=e.duration;r.mediaSource_=e.mediaSource;r.hls_=e.hls;r.loaderType_=e.loaderType;r.startingMedia_=void 0;r.segmentMetadataTrack_=e.segmentMetadataTrack;r.goalBufferLength_=e.goalBufferLength;r.sourceType_=e.sourceType;r.inbandTextTracks_=e.inbandTextTracks;r.state_="INIT";r.checkBufferTimeout_=null;r.error_=void 0;r.currentTimeline_=-1;r.pendingSegment_=null;r.mimeType_=null;r.sourceUpdater_=null;r.xhrOptions_=null;r.activeInitSegmentId_=null;r.initSegments_={};r.captionParser_=new Rs;r.decrypter_=e.decrypter;r.syncController_=e.syncController;r.syncPoint_={segmentIndex:0,time:0};r.syncController_.on("syncinfoupdate",(function(){return r.trigger("syncinfoupdate")}));r.mediaSource_.addEventListener("sourceopen",(function(){return r.ended_=false}));r.fetchAtBuffer_=false;r.logger_=bm("SegmentLoader["+r.loaderType_+"]");Object.defineProperty(r,"state",{get:function e(){return this.state_},set:function e(t){if(t!==this.state_){this.logger_(this.state_+" -> "+t);this.state_=t}}});return r}Th(t,[{key:"resetStats_",value:function e(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0}},{key:"dispose",value:function e(){this.state="DISPOSED";this.pause();this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose()}this.resetStats_();this.captionParser_.reset()}},{key:"abort",value:function e(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null}return}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_()}}},{key:"abort_",value:function e(){if(this.pendingSegment_){this.pendingSegment_.abortRequests()}this.pendingSegment_=null}},{key:"error",value:function e(t){if(typeof t!=="undefined"){this.error_=t}this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function e(){this.ended_=true;this.pause();this.trigger("ended")}},{key:"buffered_",value:function e(){if(!this.sourceUpdater_){return vh.createTimeRanges()}return this.sourceUpdater_.buffered()}},{key:"initSegment",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!t){return null}var i=pp(t);var n=this.initSegments_[i];if(r&&!n&&t.bytes){this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,timescales:t.timescales,videoTrackIds:t.videoTrackIds}}return n||t}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function e(){this.monitorBuffer_();if(!this.playlist_){return}this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return}this.state="READY"}},{key:"init_",value:function e(){this.state="READY";this.sourceUpdater_=new Sm(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!t){return}var i=this.playlist_;var n=this.pendingSegment_;this.playlist_=t;this.xhrOptions_=r;if(!this.hasPlayed_()){t.syncInfo={mediaSequence:t.mediaSequence,time:0}}var a=i?i.id:null;this.logger_("playlist update ["+a+" => "+t.id+"]");this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!i||i.uri!==t.uri){if(this.mediaIndex!==null){this.resyncLoader()}return}var s=t.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+s+"]");if(this.mediaIndex!==null){this.mediaIndex-=s}if(n){n.mediaIndex-=s;if(n.mediaIndex>=0){n.segment=t.segments[n.mediaIndex]}}this.syncController_.saveExpiredSegmentInfo(i,t)}},{key:"pause",value:function e(){if(this.checkBufferTimeout_){f.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null}}},{key:"paused",value:function e(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function e(t,r){if(this.mimeType_){return}this.mimeType_=t;this.sourceBufferEmitter_=r;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}}},{key:"resetEverything",value:function e(t){this.ended_=false;this.resetLoader();this.remove(0,this.duration_(),t);this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function e(){this.fetchAtBuffer_=false;this.resyncLoader()}},{key:"resyncLoader",value:function e(){this.mediaIndex=null;this.syncPoint_=null;this.abort()}},{key:"remove",value:function e(t,r,i){if(this.sourceUpdater_){this.sourceUpdater_.remove(t,r,i)}Pp(t,r,this.segmentMetadataTrack_);if(this.inbandTextTracks_){for(var n in this.inbandTextTracks_){Pp(t,r,this.inbandTextTracks_[n])}}}},{key:"monitorBuffer_",value:function e(){if(this.checkBufferTimeout_){f.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=f.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function e(){if(this.state==="READY"){this.fillBuffer_()}if(this.checkBufferTimeout_){f.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=f.setTimeout(this.monitorBufferTick_.bind(this),Ym)}},{key:"fillBuffer_",value:function e(){if(this.sourceUpdater_.updating()){return}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!t){return}var r=Km(this.playlist_,this.mediaSource_,t.mediaIndex);if(r){this.endOfStream();return}if(t.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()){return}if(t.timeline!==this.currentTimeline_||t.startOfSegment!==null&&t.startOfSegment<this.sourceUpdater_.timestampOffset()){this.syncController_.reset();t.timestampOffset=t.startOfSegment;this.captionParser_.clearAllCaptions()}this.loadSegment_(t)}},{key:"checkBuffer_",value:function e(t,r,i,n,a,s){var o=0;var u=void 0;if(t.length){o=t.end(t.length-1)}var l=Math.max(0,o-a);if(!r.segments.length){return null}if(l>=this.goalBufferLength_()){return null}if(!n&&l>=1){return null}if(s===null){i=this.getSyncSegmentCandidate_(r);return this.generateSegmentInfo_(r,i,null,true)}if(i!==null){var f=r.segments[i];if(f&&f.end){u=f.end}else{u=o}return this.generateSegmentInfo_(r,i+1,u,false)}if(this.fetchAtBuffer_){var d=sp.getMediaInfoForTime(r,o,s.segmentIndex,s.time);i=d.mediaIndex;u=d.startTime}else{var c=sp.getMediaInfoForTime(r,a,s.segmentIndex,s.time);i=c.mediaIndex;u=c.startTime}return this.generateSegmentInfo_(r,i,u,false)}},{key:"getSyncSegmentCandidate_",value:function e(t){var r=this;if(this.currentTimeline_===-1){return 0}var i=t.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===r.currentTimeline_}));if(i.length){return i[Math.min(i.length-1,1)].segmentIndex}return Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function e(t,r,i,n){if(r<0||r>=t.segments.length){return null}var a=t.segments[r];return{requestId:"segment-loader-"+Math.random(),uri:a.resolvedUri,mediaIndex:r,isSyncRequest:n,startOfSegment:i,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:a.timeline,duration:a.duration,segment:a}}},{key:"abortRequestEarly_",value:function e(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return false}if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3){return false}var r=this.currentTime_();var i=t.bandwidth;var n=this.pendingSegment_.duration;var a=sp.estimateSegmentRequestTime(n,i,this.playlist_,t.bytesReceived);var s=Cp(this.buffered_(),r,this.hls_.tech_.playbackRate())-1;if(a<=s){return false}var o=Wm({master:this.hls_.playlists.master,currentTime:r,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o){return}var u=a-s;var l=u-o.rebufferingImpact;var f=.5;if(s<=_p){f=1}if(!o.playlist||o.playlist.uri===this.playlist_.uri||l<f){return false}this.bandwidth=o.playlist.attributes.BANDWIDTH*wm.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return true}},{key:"handleProgress_",value:function e(t,r){if(!this.pendingSegment_||r.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(r.stats)){return}this.trigger("progress")}},{key:"loadSegment_",value:function e(t){this.state="WAITING";this.pendingSegment_=t;this.trimBackBuffer_(t);t.abortRequests=Nm(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function e(t){var r=Zm(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);if(r>0){this.remove(0,r)}}},{key:"createSimplifiedSegmentObj_",value:function e(t){var r=t.segment;var i={resolvedUri:r.resolvedUri,byterange:r.byterange,requestId:t.requestId};if(r.key){var n=r.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);i.key={resolvedUri:r.key.resolvedUri,iv:n}}if(r.map){i.map=this.initSegment(r.map)}return i}},{key:"segmentRequestFinished_",value:function e(t,r){this.mediaRequests+=1;if(r.stats){this.mediaBytesTransferred+=r.stats.bytesReceived;this.mediaTransferDuration+=r.stats.roundTripTime}if(!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(r.requestId!==this.pendingSegment_.requestId){return}if(t){this.pendingSegment_=null;this.state="READY";if(t.code===km.ABORTED){this.mediaRequestsAborted+=1;return}this.pause();if(t.code===km.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1;this.error(t);this.trigger("error");return}this.bandwidth=r.stats.bandwidth;this.roundTrip=r.stats.roundTripTime;if(r.map){r.map=this.initSegment(r.map,true)}this.processSegmentResponse_(r)}},{key:"processSegmentResponse_",value:function e(t){var r=this.pendingSegment_;r.bytes=t.bytes;if(t.map){r.segment.map.bytes=t.map.bytes}r.endOfAllRequests=t.endOfAllRequests;if(t.fmp4Captions){$m(this.inbandTextTracks_,this.hls_.tech_,t.captionStreams);Xm({inbandTextTracks:this.inbandTextTracks_,captionArray:t.fmp4Captions,timestampOffset:0});this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_){this.state="READY";return}var r=this.pendingSegment_;var i=r.segment;var n=this.syncController_.probeSegmentInfo(r);if(typeof this.startingMedia_==="undefined"&&n&&(n.containsAudio||n.containsVideo)){this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo}}var a=Jm(this.loaderType_,this.startingMedia_,n);if(a){this.error({message:a,blacklistDuration:Infinity});this.trigger("error");return}if(r.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}if(r.timestampOffset!==null&&r.timestampOffset!==this.sourceUpdater_.timestampOffset()){this.sourceUpdater_.timestampOffset(r.timestampOffset);this.trigger("timestampoffset")}var s=this.syncController_.mappingForTimeline(r.timeline);if(s!==null){this.trigger({type:"segmenttimemapping",mapping:s})}this.state="APPENDING";if(i.map){var o=pp(i.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==o){var u=this.initSegment(i.map);this.sourceUpdater_.appendBuffer(u.bytes,(function(){t.activeInitSegmentId_=o}))}}r.byteLength=r.bytes.byteLength;if(typeof i.start==="number"&&typeof i.end==="number"){this.mediaSecondsLoaded+=i.end-i.start}else{this.mediaSecondsLoaded+=i.duration}this.logger_(ev(r));this.sourceUpdater_.appendBuffer(r.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function e(){if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_()}return}var t=this.pendingSegment_;var r=t.segment;var i=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(t);this.addSegmentMetadataCue_(t);this.state="READY";this.mediaIndex=t.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=t.timeline;this.trigger("syncinfoupdate");if(r.end&&this.currentTime_()-r.end>t.playlist.targetDuration*3){this.resetEverything();return}if(i){this.trigger("bandwidthupdate")}this.trigger("progress");var n=Km(t.playlist,this.mediaSource_,t.mediaIndex+1);if(n){this.endOfStream()}if(!this.paused()){this.monitorBuffer_()}}},{key:"recordThroughput_",value:function e(t){var r=this.throughput.rate;var i=Date.now()-t.endOfAllRequests+1;var n=Math.floor(t.byteLength/i*8*1e3);this.throughput.rate+=(n-r)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function e(t){if(!this.segmentMetadataTrack_){return}var r=t.segment;var i=r.start;var n=r.end;if(!Qm(i)||!Qm(n)){return}Pp(i,n,this.segmentMetadataTrack_);var a=f.WebKitDataCue||f.VTTCue;var s={bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:i,end:n};var o=JSON.stringify(s);var u=new a(i,n,o);u.value=s;this.segmentMetadataTrack_.addCue(u)}}]);return t}(vh.EventTarget);var rv=function e(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))};var iv=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)})));var nv=function(e){wh(t,e);function t(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};bh(this,t);var i=kh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));i.mediaSource_=null;i.subtitlesTrack_=null;return i}Th(t,[{key:"buffered_",value:function e(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return vh.createTimeRanges()}var t=this.subtitlesTrack_.cues;var r=t[0].startTime;var i=t[t.length-1].startTime;return vh.createTimeRanges([[r,i]])}},{key:"initSegment",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!t){return null}var i=pp(t);var n=this.initSegments_[i];if(r&&!n&&t.bytes){var a=iv.byteLength+t.bytes.byteLength;var s=new Uint8Array(a);s.set(t.bytes);s.set(iv,t.bytes.byteLength);this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:s}}return n||t}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function e(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function e(t){if(typeof t==="undefined"){return this.subtitlesTrack_}this.subtitlesTrack_=t;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}return this.subtitlesTrack_}},{key:"remove",value:function e(t,r){Pp(t,r,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function e(){var t=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var r=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);r=this.skipEmptySegments_(r);if(!r){return}if(this.syncController_.timestampOffsetForTimeline(r.timeline)===null){var i=function e(){t.state="READY";if(!t.paused()){t.monitorBuffer_()}};this.syncController_.one("timestampoffset",i);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(r)}},{key:"skipEmptySegments_",value:function e(t){while(t&&t.segment.empty){t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest)}return t}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var r=this.pendingSegment_;var i=r.segment;if(typeof f.WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=function e(){t.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",n);this.subtitlesTrack_.tech_.one("vttjserror",(function(){t.subtitlesTrack_.tech_.off("vttjsloaded",n);t.error({message:"Error loading vtt.js"});t.state="READY";t.pause();t.trigger("error")}));return}i.requested=true;try{this.parseVTTCues_(r)}catch(Qv){this.error({message:Qv.message});this.state="READY";this.pause();return this.trigger("error")}this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_);if(r.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}r.byteLength=r.bytes.byteLength;this.mediaSecondsLoaded+=i.duration;if(r.cues.length){this.remove(r.cues[0].endTime,r.cues[r.cues.length-1].endTime)}r.cues.forEach((function(e){t.subtitlesTrack_.addCue(e)}));this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function e(t){var r=void 0;var i=false;if(typeof f.TextDecoder==="function"){r=new f.TextDecoder("utf8")}else{r=f.WebVTT.StringDecoder();i=true}var n=new f.WebVTT.Parser(f,f.vttjs,r);t.cues=[];t.timestampmap={MPEGTS:0,LOCAL:0};n.oncue=t.cues.push.bind(t.cues);n.ontimestampmap=function(e){return t.timestampmap=e};n.onparsingerror=function(e){vh.log.warn("Error encountered when parsing cues: "+e.message)};if(t.segment.map){var a=t.segment.map.bytes;if(i){a=rv(a)}n.parse(a)}var s=t.bytes;if(i){s=rv(s)}n.parse(s);n.flush()}},{key:"updateTimeMapping_",value:function e(t,r,i){var n=t.segment;if(!r){return}if(!t.cues.length){n.empty=true;return}var a=t.timestampmap;var s=a.MPEGTS/9e4-a.LOCAL+r.mapping;t.cues.forEach((function(e){e.startTime+=s;e.endTime+=s}));if(!i.syncInfo){var o=t.cues[0].startTime;var u=t.cues[t.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:Math.min(o,u-n.duration)}}}}]);return t}(tv);var av=function e(t,r){var i=t.cues;for(var n=0;n<i.length;n++){var a=i[n];if(r>=a.adStartTime&&r<=a.adEndTime){return a}}return null};var sv=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!t.segments){return}var n=i;var a=void 0;for(var s=0;s<t.segments.length;s++){var o=t.segments[s];if(!a){a=av(r,n+o.duration/2)}if(a){if("cueIn"in o){a.endTime=n;a.adEndTime=n;n+=o.duration;a=null;continue}if(n<a.endTime){n+=o.duration;continue}a.endTime+=o.duration}else{if("cueOut"in o){a=new f.VTTCue(n,n+o.duration,o.cueOut);a.adStartTime=n;a.adEndTime=n+parseFloat(o.cueOut);r.addCue(a)}if("cueOutCont"in o){var u=void 0;var l=void 0;var d=o.cueOutCont.split("/").map(parseFloat);var c=Eh(d,2);u=c[0];l=c[1];a=new f.VTTCue(n,n+o.duration,"");a.adStartTime=n-u;a.adEndTime=a.adStartTime+l;r.addCue(a)}}n+=o.duration}};var ov=go.inspect;var uv=[{name:"VOD",run:function e(t,r,i,n,a){if(i!==Infinity){var s={time:0,segmentIndex:0};return s}return null}},{name:"ProgramDateTime",run:function e(t,r,i,n,a){if(!t.datetimeToDisplayTime){return null}var s=r.segments||[];var o=null;var u=null;a=a||0;for(var l=0;l<s.length;l++){var f=s[l];if(f.dateTimeObject){var d=f.dateTimeObject.getTime()/1e3;var c=d+t.datetimeToDisplayTime;var h=Math.abs(a-c);if(u!==null&&u<h){break}u=h;o={time:c,segmentIndex:l}}}return o}},{name:"Segment",run:function e(t,r,i,n,a){var s=r.segments||[];var o=null;var u=null;a=a||0;for(var l=0;l<s.length;l++){var f=s[l];if(f.timeline===n&&typeof f.start!=="undefined"){var d=Math.abs(a-f.start);if(u!==null&&u<d){break}if(!o||u===null||u>=d){u=d;o={time:f.start,segmentIndex:l}}}}return o}},{name:"Discontinuity",run:function e(t,r,i,n,a){var s=null;a=a||0;if(r.discontinuityStarts&&r.discontinuityStarts.length){var o=null;for(var u=0;u<r.discontinuityStarts.length;u++){var l=r.discontinuityStarts[u];var f=r.discontinuitySequence+u+1;var d=t.discontinuities[f];if(d){var c=Math.abs(a-d.time);if(o!==null&&o<c){break}if(!s||o===null||o>=c){o=c;s={time:d.time,segmentIndex:l}}}}}return s}},{name:"Playlist",run:function e(t,r,i,n,a){if(r.syncInfo){var s={time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence};return s}return null}}];var lv=function(e){wh(t,e);function t(){bh(this,t);var e=kh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.inspectCache_=undefined;e.timelines=[];e.discontinuities=[];e.datetimeToDisplayTime=null;e.logger_=bm("SyncController");return e}Th(t,[{key:"getSyncPoint",value:function e(t,r,i,n){var a=this.runStrategies_(t,r,i,n);if(!a.length){return null}return this.selectSyncPoint_(a,{key:"time",value:n})}},{key:"getExpiredTime",value:function e(t,r){if(!t||!t.segments){return null}var i=this.runStrategies_(t,r,t.discontinuitySequence,0);if(!i.length){return null}var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});if(n.segmentIndex>0){n.time*=-1}return Math.abs(n.time+Hh(t,n.segmentIndex,0))}},{key:"runStrategies_",value:function e(t,r,i,n){var a=[];for(var s=0;s<uv.length;s++){var o=uv[s];var u=o.run(this,t,r,i,n);if(u){u.strategy=o.name;a.push({strategy:o.name,syncPoint:u})}}return a}},{key:"selectSyncPoint_",value:function e(t,r){var i=t[0].syncPoint;var n=Math.abs(t[0].syncPoint[r.key]-r.value);var a=t[0].strategy;for(var s=1;s<t.length;s++){var o=Math.abs(t[s].syncPoint[r.key]-r.value);if(o<n){n=o;i=t[s].syncPoint;a=t[s].strategy}}this.logger_("syncPoint for ["+r.key+": "+r.value+"] chosen with strategy"+(" ["+a+"]: [time:"+i.time+",")+(" segmentIndex:"+i.segmentIndex+"]"));return i}},{key:"saveExpiredSegmentInfo",value:function e(t,r){var i=r.mediaSequence-t.mediaSequence;for(var n=i-1;n>=0;n--){var a=t.segments[n];if(a&&typeof a.start!=="undefined"){r.syncInfo={mediaSequence:t.mediaSequence+n,time:a.start};this.logger_("playlist refresh sync: [time:"+r.syncInfo.time+","+(" mediaSequence: "+r.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function e(t){if(!this.datetimeToDisplayTime&&t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var r=t.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-r}}},{key:"reset",value:function e(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function e(t){var r=t.segment;var i=t.playlist;var n=void 0;if(r.map){n=this.probeMp4Segment_(t)}else{n=this.probeTsSegment_(t)}if(n){if(this.calculateSegmentTimeMapping_(t,n)){this.saveDiscontinuitySyncInfo_(t);if(!i.syncInfo){i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:r.start}}}}return n}},{key:"probeMp4Segment_",value:function e(t){var r=t.segment;var i=Ki.timescale(r.map.bytes);var n=Ki.startTime(i,t.bytes);if(t.timestampOffset!==null){t.timestampOffset-=n}return{start:n,end:n+r.duration}}},{key:"probeTsSegment_",value:function e(t){var r=ov(t.bytes,this.inspectCache_);var i=void 0;var n=void 0;if(!r){return null}if(r.video&&r.video.length===2){this.inspectCache_=r.video[1].dts;i=r.video[0].dtsTime;n=r.video[1].dtsTime}else if(r.audio&&r.audio.length===2){this.inspectCache_=r.audio[1].dts;i=r.audio[0].dtsTime;n=r.audio[1].dtsTime}return{start:i,end:n,containsVideo:r.video&&r.video.length===2,containsAudio:r.audio&&r.audio.length===2}}},{key:"timestampOffsetForTimeline",value:function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].time}},{key:"mappingForTimeline",value:function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function e(t,r){var i=t.segment;var n=this.timelines[t.timeline];if(t.timestampOffset!==null){n={time:t.startOfSegment,mapping:t.startOfSegment-r.start};this.timelines[t.timeline]=n;this.trigger("timestampoffset");this.logger_("time mapping for timeline "+t.timeline+": "+("[time: "+n.time+"] [mapping: "+n.mapping+"]"));i.start=t.startOfSegment;i.end=r.end+n.mapping}else if(n){i.start=r.start+n.mapping;i.end=r.end+n.mapping}else{return false}return true}},{key:"saveDiscontinuitySyncInfo_",value:function e(t){var r=t.playlist;var i=t.segment;if(i.discontinuity){this.discontinuities[i.timeline]={time:i.start,accuracy:0}}else if(r.discontinuityStarts&&r.discontinuityStarts.length){for(var n=0;n<r.discontinuityStarts.length;n++){var a=r.discontinuityStarts[n];var s=r.discontinuitySequence+n+1;var o=a-t.mediaIndex;var u=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>u){var l=void 0;if(o<0){l=i.start-Hh(r,t.mediaIndex,a)}else{l=i.end+Hh(r,t.mediaIndex+1,a)}this.discontinuities[s]={time:l,accuracy:u}}}}}}]);return t}(vh.EventTarget);var fv=new jp("./decrypter-worker.worker.js",(function(e,t){var r=this;var i=function(){function e(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var t=function e(t,r){if(!(t instanceof r)){throw new TypeError("Cannot call a class as a function")}};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var n=function e(t,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof r==="undefined"?"undefined":Bo(r)))}t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(r)Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r};var a=function e(t,r){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return r&&((typeof r==="undefined"?"undefined":Bo(r))==="object"||typeof r==="function")?r:t};var s=function e(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]];var r=t[0];var i=t[1];var n=r[4];var a=i[4];var s=void 0;var o=void 0;var u=void 0;var l=[];var f=[];var d=void 0;var c=void 0;var h=void 0;var p=void 0;var m=void 0;var v=void 0;for(s=0;s<256;s++){f[(l[s]=s<<1^(s>>7)*283)^s]=s}for(o=u=0;!n[o];o^=d||1,u=f[u]||1){p=u^u<<1^u<<2^u<<3^u<<4;p=p>>8^p&255^99;n[o]=p;a[p]=o;h=l[c=l[d=l[o]]];v=h*16843009^c*65537^d*257^o*16843008;m=l[p]*257^p*16843008;for(s=0;s<4;s++){r[s][o]=m=m<<24^m>>>8;i[s][p]=v=v<<24^v>>>8}}for(s=0;s<5;s++){r[s]=r[s].slice(0);i[s]=i[s].slice(0)}return t};var o=null;var u=function(){function e(r){t(this,e);if(!o){o=s()}this._tables=[[o[0][0].slice(),o[0][1].slice(),o[0][2].slice(),o[0][3].slice(),o[0][4].slice()],[o[1][0].slice(),o[1][1].slice(),o[1][2].slice(),o[1][3].slice(),o[1][4].slice()]];var i=void 0;var n=void 0;var a=void 0;var u=void 0;var l=void 0;var f=this._tables[0][4];var d=this._tables[1];var c=r.length;var h=1;if(c!==4&&c!==6&&c!==8){throw new Error("Invalid aes key size")}u=r.slice(0);l=[];this._key=[u,l];for(i=c;i<4*c+28;i++){a=u[i-1];if(i%c===0||c===8&&i%c===4){a=f[a>>>24]<<24^f[a>>16&255]<<16^f[a>>8&255]<<8^f[a&255];if(i%c===0){a=a<<8^a>>>24^h<<24;h=h<<1^(h>>7)*283}}u[i]=u[i-c]^a}for(n=0;i;n++,i--){a=u[n&3?i:i-4];if(i<=4||n<4){l[n]=a}else{l[n]=d[0][f[a>>>24]]^d[1][f[a>>16&255]]^d[2][f[a>>8&255]]^d[3][f[a&255]]}}}e.prototype.decrypt=function e(t,r,i,n,a,s){var o=this._key[1];var u=t^o[0];var l=n^o[1];var f=i^o[2];var d=r^o[3];var c=void 0;var h=void 0;var p=void 0;var m=o.length/4-2;var v=void 0;var g=4;var y=this._tables[1];var _=y[0];var b=y[1];var T=y[2];var S=y[3];var w=y[4];for(v=0;v<m;v++){c=_[u>>>24]^b[l>>16&255]^T[f>>8&255]^S[d&255]^o[g];h=_[l>>>24]^b[f>>16&255]^T[d>>8&255]^S[u&255]^o[g+1];p=_[f>>>24]^b[d>>16&255]^T[u>>8&255]^S[l&255]^o[g+2];d=_[d>>>24]^b[u>>16&255]^T[l>>8&255]^S[f&255]^o[g+3];g+=4;u=c;l=h;f=p}for(v=0;v<4;v++){a[(3&-v)+s]=w[u>>>24]<<24^w[l>>16&255]<<16^w[f>>8&255]<<8^w[d&255]^o[g++];c=u;u=l;l=f;f=d;d=c}};return e}();var l=function(){function e(){t(this,e);this.listeners={}}e.prototype.on=function e(t,r){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(r)};e.prototype.off=function e(t,r){if(!this.listeners[t]){return false}var i=this.listeners[t].indexOf(r);this.listeners[t].splice(i,1);return i>-1};e.prototype.trigger=function e(t){var r=this.listeners[t];if(!r){return}if(arguments.length===2){var i=r.length;for(var n=0;n<i;++n){r[n].call(this,arguments[1])}}else{var a=Array.prototype.slice.call(arguments,1);var s=r.length;for(var o=0;o<s;++o){r[o].apply(this,a)}}};e.prototype.dispose=function e(){this.listeners={}};e.prototype.pipe=function e(t){this.on("data",(function(e){t.push(e)}))};return e}();var f=function(e){n(r,e);function r(){t(this,r);var i=a(this,e.call(this,l));i.jobs=[];i.delay=1;i.timeout_=null;return i}r.prototype.processJob_=function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};r.prototype.push=function e(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return r}(l);var d=function e(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};var c=function e(t,r,i){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2);var a=new u(Array.prototype.slice.call(r));var s=new Uint8Array(t.byteLength);var o=new Int32Array(s.buffer);var l=void 0;var f=void 0;var c=void 0;var h=void 0;var p=void 0;var m=void 0;var v=void 0;var g=void 0;var y=void 0;l=i[0];f=i[1];c=i[2];h=i[3];for(y=0;y<n.length;y+=4){p=d(n[y]);m=d(n[y+1]);v=d(n[y+2]);g=d(n[y+3]);a.decrypt(p,m,v,g,o,y);o[y]=d(o[y]^l);o[y+1]=d(o[y+1]^f);o[y+2]=d(o[y+2]^c);o[y+3]=d(o[y+3]^h);l=p;f=m;c=v;h=g}return s};var h=function(){function r(i,n,a,s){t(this,r);var o=r.STEP;var u=new Int32Array(i.buffer);var l=new Uint8Array(i.byteLength);var c=0;this.asyncStream_=new f;this.asyncStream_.push(this.decryptChunk_(u.subarray(c,c+o),n,a,l));for(c=o;c<u.length;c+=o){a=new Uint32Array([d(u[c-4]),d(u[c-3]),d(u[c-2]),d(u[c-1])]);this.asyncStream_.push(this.decryptChunk_(u.subarray(c,c+o),n,a,l))}this.asyncStream_.push((function(){s(null,e(l))}))}r.prototype.decryptChunk_=function e(t,r,i,n){return function(){var e=c(t,r,i);n.set(e,t.byteOffset)}};i(r,null,[{key:"STEP",get:function e(){return 32e3}}]);return r}();var p=function e(t){var r={};Object.keys(t).forEach((function(e){var i=t[e];if(ArrayBuffer.isView(i)){r[e]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}}else{r[e]=i}}));return r};var m=function e(t){t.onmessage=function(e){var r=e.data;var i=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength);var n=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4);var a=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new h(i,n,a,(function(e,i){t.postMessage(p({source:r.source,decrypted:i}),[i.buffer])}))}};var v=new m(r);return v}()}));var dv=function e(t){var r=t.default?"main":"alternative";if(t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0){r="main-desc"}return r};var cv=function e(t,r){t.abort();t.pause();if(r&&r.activePlaylistLoader){r.activePlaylistLoader.pause();r.activePlaylistLoader=null}};var hv=function e(t,r){r.activePlaylistLoader=t;t.load()};var pv=function e(t,r){return function(){var e=r.segmentLoaders,i=e[t],n=e.main,a=r.mediaTypes[t];var s=a.activeTrack();var o=a.activeGroup(s);var u=a.activePlaylistLoader;cv(i,a);if(!o){return}if(!o.playlistLoader){if(u){n.resetEverything()}return}i.resyncLoader();hv(o.playlistLoader,a)}};var mv=function e(t,r){return function(){var e=r.segmentLoaders,i=e[t],n=e.main,a=r.mediaTypes[t];var s=a.activeTrack();var o=a.activeGroup(s);var u=a.activePlaylistLoader;cv(i,a);if(!o){return}if(!o.playlistLoader){n.resetEverything();return}if(u===o.playlistLoader){hv(o.playlistLoader,a);return}if(i.track){i.track(s)}i.resetEverything();hv(o.playlistLoader,a)}};var vv={AUDIO:function e(t,r){return function(){var e=r.segmentLoaders[t],i=r.mediaTypes[t],n=r.blacklistCurrentPlaylist;cv(e,i);var a=i.activeTrack();var s=i.activeGroup();var o=(s.filter((function(e){return e.default}))[0]||s[0]).id;var u=i.tracks[o];if(a===u){n({message:"Problem encountered loading the default audio track."});return}vh.log.warn("Problem encountered loading the alternate audio track."+"Switching back to default.");for(var l in i.tracks){i.tracks[l].enabled=i.tracks[l]===u}i.onTrackChanged()}},SUBTITLES:function e(t,r){return function(){var e=r.segmentLoaders[t],i=r.mediaTypes[t];vh.log.warn("Problem encountered loading the subtitle track."+"Disabling subtitle track.");cv(e,i);var n=i.activeTrack();if(n){n.mode="disabled"}i.onTrackChanged()}}};var gv={AUDIO:function e(t,r,i){if(!r){return}var n=i.tech,a=i.requestOptions,s=i.segmentLoaders[t];r.on("loadedmetadata",(function(){var e=r.media();s.playlist(e,a);if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}}));r.on("loadedplaylist",(function(){s.playlist(r.media(),a);if(!n.paused()){s.load()}}));r.on("error",vv[t](t,i))},SUBTITLES:function e(t,r,i){var n=i.tech,a=i.requestOptions,s=i.segmentLoaders[t],o=i.mediaTypes[t];r.on("loadedmetadata",(function(){var e=r.media();s.playlist(e,a);s.track(o.activeTrack());if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}}));r.on("loadedplaylist",(function(){s.playlist(r.media(),a);if(!n.paused()){s.load()}}));r.on("error",vv[t](t,i))}};var yv=function e(t,r){return function(e){return e.attributes[t]===r}};var _v=function e(t){return function(e){return e.resolvedUri===t}};var bv={AUDIO:function e(t,r){var i=r.hls,n=r.sourceType,a=r.segmentLoaders[t],s=r.requestOptions.withCredentials,o=r.master,u=o.mediaGroups,l=o.playlists,f=r.mediaTypes[t],d=f.groups,c=f.tracks,h=r.masterPlaylistLoader;if(!u[t]||Object.keys(u[t]).length===0){u[t]={main:{default:{default:true}}}}for(var p in u[t]){if(!d[p]){d[p]=[]}var m=l.filter(yv(t,p));for(var v in u[t][p]){var g=u[t][p][v];var y=m.filter(_v(g.resolvedUri));if(y.length){delete g.resolvedUri}var _=void 0;if(g.resolvedUri){_=new Mh(g.resolvedUri,i,s)}else if(g.playlists&&n==="dash"){_=new _m(g.playlists[0],i,s,h)}else{_=null}g=vh.mergeOptions({id:v,playlistLoader:_},g);gv[t](t,g.playlistLoader,r);d[p].push(g);if(typeof c[v]==="undefined"){var b=new vh.AudioTrack({id:v,kind:dv(g),enabled:false,language:g.language,default:g.default,label:v});c[v]=b}}}a.on("error",vv[t](t,r))},SUBTITLES:function e(t,r){var i=r.tech,n=r.hls,a=r.sourceType,s=r.segmentLoaders[t],o=r.requestOptions.withCredentials,u=r.master.mediaGroups,l=r.mediaTypes[t],f=l.groups,d=l.tracks,c=r.masterPlaylistLoader;for(var h in u[t]){if(!f[h]){f[h]=[]}for(var p in u[t][h]){if(u[t][h][p].forced){continue}var m=u[t][h][p];var v=void 0;if(a==="hls"){v=new Mh(m.resolvedUri,n,o)}else if(a==="dash"){v=new _m(m.playlists[0],n,o,c)}m=vh.mergeOptions({id:p,playlistLoader:v},m);gv[t](t,m.playlistLoader,r);f[h].push(m);if(typeof d[p]==="undefined"){var g=i.addRemoteTextTrack({id:p,kind:"subtitles",enabled:false,language:m.language,label:p},false).track;d[p]=g}}}s.on("error",vv[t](t,r))},"CLOSED-CAPTIONS":function e(t,r){var i=r.tech,n=r.master.mediaGroups,a=r.mediaTypes[t],s=a.groups,o=a.tracks;for(var u in n[t]){if(!s[u]){s[u]=[]}for(var l in n[t][u]){var f=n[t][u][l];if(!f.instreamId.match(/CC\d/)){continue}s[u].push(vh.mergeOptions({id:l},f));if(typeof o[l]==="undefined"){var d=i.addRemoteTextTrack({id:f.instreamId,kind:"captions",enabled:false,language:f.language,label:l},false).track;o[l]=d}}}}};var Tv=function e(t,r){return function(e){var i=r.masterPlaylistLoader,n=r.mediaTypes[t].groups;var a=i.media();if(!a){return null}var s=null;if(a.attributes[t]){s=n[a.attributes[t]]}s=s||n.main;if(typeof e==="undefined"){return s}if(e===null){return null}return s.filter((function(t){return t.id===e.id}))[0]||null}};var Sv={AUDIO:function e(t,r){return function(){var e=r.mediaTypes[t].tracks;for(var i in e){if(e[i].enabled){return e[i]}}return null}},SUBTITLES:function e(t,r){return function(){var e=r.mediaTypes[t].tracks;for(var i in e){if(e[i].mode==="showing"){return e[i]}}return null}}};var wv=function e(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){bv[e](e,t)}));var r=t.mediaTypes,i=t.masterPlaylistLoader,n=t.tech,a=t.hls;["AUDIO","SUBTITLES"].forEach((function(e){r[e].activeGroup=Tv(e,t);r[e].activeTrack=Sv[e](e,t);r[e].onGroupChanged=pv(e,t);r[e].onTrackChanged=mv(e,t)}));var s=r.AUDIO.activeGroup();var o=(s.filter((function(e){return e.default}))[0]||s[0]).id;r.AUDIO.tracks[o].enabled=true;r.AUDIO.onTrackChanged();i.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return r[e].onGroupChanged()}))}));var u=function e(){r.AUDIO.onTrackChanged();n.trigger({type:"usage",name:"hls-audio-change"})};n.audioTracks().addEventListener("change",u);n.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged);a.on("dispose",(function(){n.audioTracks().removeEventListener("change",u);n.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}));n.clearTracks("audio");for(var l in r.AUDIO.tracks){n.audioTracks().addTrack(r.AUDIO.tracks[l])}};var kv=function e(){var t={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Tm,activeTrack:Tm,onGroupChanged:Tm,onTrackChanged:Tm}}));return t};var Ev=60*2;var Cv=void 0;var Av=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];var Ov=function e(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]};var Pv=function(e){wh(t,e);function t(e){bh(this,t);var r=kh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var i=e.url,n=e.withCredentials,a=e.tech,s=e.bandwidth,o=e.externHls,u=e.useCueTags,l=e.blacklistDuration,f=e.enableLowInitialPlaylist,d=e.sourceType,c=e.seekTo;if(!i){throw new Error("A non-empty playlist URL is required")}Cv=o;r.withCredentials=n;r.tech_=a;r.hls_=a.hls;r.seekTo_=c;r.sourceType_=d;r.useCueTags_=u;r.blacklistDuration=l;r.enableLowInitialPlaylist=f;if(r.useCueTags_){r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues");r.cueTagsTrack_.inBandMetadataTrackDispatchType=""}r.requestOptions_={withCredentials:r.withCredentials,timeout:null};r.mediaTypes_=kv();r.mediaSource=new vh.MediaSource;r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_.bind(r));r.seekable_=vh.createTimeRanges();r.hasPlayed_=function(){return false};r.syncController_=new lv(e);r.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;r.decrypter_=new fv;r.inbandTextTracks_={};var h={hls:r.hls_,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function e(){return r.seekable()},seeking:function e(){return r.tech_.seeking()},duration:function e(){return r.mediaSource.duration},hasPlayed:function e(){return r.hasPlayed_()},goalBufferLength:function e(){return r.goalBufferLength()},bandwidth:s,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_,inbandTextTracks:r.inbandTextTracks_};r.masterPlaylistLoader_=r.sourceType_==="dash"?new _m(i,r.hls_,r.withCredentials):new Mh(i,r.hls_,r.withCredentials);r.setupMasterPlaylistLoaderListeners_();r.mainSegmentLoader_=new tv(vh.mergeOptions(h,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),e);r.audioSegmentLoader_=new tv(vh.mergeOptions(h,{loaderType:"audio"}),e);r.subtitleSegmentLoader_=new nv(vh.mergeOptions(h,{loaderType:"vtt"}),e);r.setupSegmentLoaderListeners_();Av.forEach((function(e){r[e+"_"]=Ov.bind(r,e)}));r.logger_=bm("MPC");r.masterPlaylistLoader_.load();return r}Th(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function e(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var e=t.masterPlaylistLoader_.media();var r=t.masterPlaylistLoader_.targetDuration*1.5*1e3;if(ap(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=r}if(e.endList&&t.tech_.preload()!=="none"){t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load()}wv({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,hls:t.hls_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)});t.triggerPresenceUsage_(t.master(),e);try{t.setupSourceBuffers_()}catch(Qv){vh.log.warn("Failed to create SourceBuffers",Qv);return t.mediaSource.endOfStream("decode")}t.setupFirstPlay();t.trigger("selectedinitialmedia")}));this.masterPlaylistLoader_.on("loadedplaylist",(function(){var e=t.masterPlaylistLoader_.media();if(!e){t.excludeUnsupportedVariants_();var r=void 0;if(t.enableLowInitialPlaylist){r=t.selectInitialPlaylist()}if(!r){r=t.selectPlaylist()}t.initialMedia_=r;t.masterPlaylistLoader_.media(t.initialMedia_);return}if(t.useCueTags_){t.updateAdCues_(e)}t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.updateDuration();if(!t.tech_.paused()){t.mainSegmentLoader_.load();if(t.audioSegmentLoader_){t.audioSegmentLoader_.load()}}if(!e.endList){var i=function e(){var r=t.seekable();if(r.length!==0){t.mediaSource.addSeekableRange_(r.start(0),r.end(0))}};if(t.duration()!==Infinity){var n=function e(){if(t.duration()===Infinity){i()}else{t.tech_.one("durationchange",e)}};t.tech_.one("durationchange",n)}else{i()}}}));this.masterPlaylistLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}));this.masterPlaylistLoader_.on("mediachanging",(function(){t.mainSegmentLoader_.abort();t.mainSegmentLoader_.pause()}));this.masterPlaylistLoader_.on("mediachange",(function(){var e=t.masterPlaylistLoader_.media();var r=t.masterPlaylistLoader_.targetDuration*1.5*1e3;if(ap(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=r}t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load();t.tech_.trigger({type:"mediachange",bubbles:true})}));this.masterPlaylistLoader_.on("playlistunchanged",(function(){var e=t.masterPlaylistLoader_.media();var r=t.stuckAtPlaylistEnd_(e);if(r){t.blacklistCurrentPlaylist({message:"Playlist no longer updating."});t.tech_.trigger("playliststuck")}}));this.masterPlaylistLoader_.on("renditiondisabled",(function(){t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}));this.masterPlaylistLoader_.on("renditionenabled",(function(){t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))}},{key:"triggerPresenceUsage_",value:function e(t,r){var i=t.mediaGroups||{};var n=true;var a=Object.keys(i.AUDIO);for(var s in i.AUDIO){for(var o in i.AUDIO[s]){var u=i.AUDIO[s][o];if(!u.uri){n=false}}}if(n){this.tech_.trigger({type:"usage",name:"hls-demuxed"})}if(Object.keys(i.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"hls-webvtt"})}if(Cv.Playlist.isAes(r)){this.tech_.trigger({type:"usage",name:"hls-aes"})}if(Cv.Playlist.isFmp4(r)){this.tech_.trigger({type:"usage",name:"hls-fmp4"})}if(a.length&&Object.keys(i.AUDIO[a[0]]).length>1){this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}}},{key:"setupSegmentLoaderListeners_",value:function e(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var e=t.selectPlaylist();var r=t.masterPlaylistLoader_.media();var i=t.tech_.buffered();var n=i.length?i.end(i.length-1)-t.tech_.currentTime():0;var a=t.bufferLowWaterLine();if(!r.endList||t.duration()<wm.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<r.attributes.BANDWIDTH||n>=a){t.masterPlaylistLoader_.media(e)}t.tech_.trigger("bandwidthupdate")}));this.mainSegmentLoader_.on("progress",(function(){t.trigger("progress")}));this.mainSegmentLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}));this.mainSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()}));this.mainSegmentLoader_.on("timestampoffset",(function(){t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}));this.audioSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()}));this.mainSegmentLoader_.on("ended",(function(){t.onEndOfStream()}));this.mainSegmentLoader_.on("earlyabort",(function(){t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the "+"request without rebuffering."},Ev)}));this.mainSegmentLoader_.on("reseteverything",(function(){t.tech_.trigger("hls-reset")}));this.mainSegmentLoader_.on("segmenttimemapping",(function(e){t.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}));this.audioSegmentLoader_.on("ended",(function(){t.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function e(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function e(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load()}}},{key:"smoothQualityChange_",value:function e(){var t=this.selectPlaylist();if(t!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(t);this.mainSegmentLoader_.resetLoader()}}},{key:"fastQualityChange_",value:function e(){var t=this;var r=this.selectPlaylist();if(r===this.masterPlaylistLoader_.media()){return}this.masterPlaylistLoader_.media(r);this.mainSegmentLoader_.resetEverything((function(){t.tech_.setCurrentTime(t.tech_.currentTime())}))}},{key:"play",value:function e(){if(this.setupFirstPlay()){return}if(this.tech_.ended()){this.seekTo_(0)}if(this.hasPlayed_()){this.load()}var t=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<t.start(0)){return this.seekTo_(t.end(t.length-1))}}}},{key:"setupFirstPlay",value:function e(){var t=this;var r=this.masterPlaylistLoader_.media();if(!r||this.tech_.paused()||this.hasPlayed_()){return false}if(!r.endList){var i=this.seekable();if(!i.length){return false}if(vh.browser.IE_VERSION&&this.tech_.readyState()===0){this.tech_.one("loadedmetadata",(function(){t.trigger("firstplay");t.seekTo_(i.end(0));t.hasPlayed_=function(){return true}}));return false}this.trigger("firstplay");this.seekTo_(i.end(0))}this.hasPlayed_=function(){return true};this.load();return true}},{key:"handleSourceOpen_",value:function e(){try{this.setupSourceBuffers_()}catch(Qv){vh.log.warn("Failed to create Source Buffers",Qv);return this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var t=this.tech_.play();if(typeof t!=="undefined"&&typeof t.then==="function"){t.then(null,(function(e){}))}}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function e(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo){t=t&&this.audioSegmentLoader_.ended_}else{t=this.audioSegmentLoader_.ended_}}if(t){this.mediaSource.endOfStream()}}},{key:"stuckAtPlaylistEnd_",value:function e(t){var r=this.seekable();if(!r.length){return false}var i=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(i===null){return false}var n=Cv.Playlist.playlistEnd(t,i);var a=this.tech_.currentTime();var s=this.tech_.buffered();if(!s.length){return n-a<=bp}var o=s.end(s.length-1);return o-a<=bp&&n-o<=bp}},{key:"blacklistCurrentPlaylist",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments[1];var i=void 0;var n=void 0;i=t.playlist||this.masterPlaylistLoader_.media();r=r||t.blacklistDuration||this.blacklistDuration;if(!i){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(Qv){return this.trigger("error")}}var a=this.masterPlaylistLoader_.master.playlists.filter(Zh).length===1;if(a){vh.log.warn("Problem encountered with the current "+"HLS playlist. Trying again since it is the final playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(a)}i.excludeUntil=Date.now()+r*1e3;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});n=this.selectPlaylist();vh.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(n)}},{key:"pauseLoading",value:function e(){this.mainSegmentLoader_.pause();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.pause()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.pause()}}},{key:"setCurrentTime",value:function e(t){var r=Sp(this.tech_.buffered(),t);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0}if(!this.masterPlaylistLoader_.media().segments){return 0}if(r&&r.length){return t}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort()}this.load()}},{key:"duration",value:function e(){if(!this.masterPlaylistLoader_){return 0}if(this.mediaSource){return this.mediaSource.duration}return Cv.Playlist.duration(this.masterPlaylistLoader_.media())}},{key:"seekable",value:function e(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function e(){var t=void 0;var r=void 0;if(!this.masterPlaylistLoader_){return}var i=this.masterPlaylistLoader_.media();if(!i){return}var n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(n===null){return}t=Cv.Playlist.seekable(i,n);if(t.length===0){return}if(this.mediaTypes_.AUDIO.activePlaylistLoader){i=this.mediaTypes_.AUDIO.activePlaylistLoader.media();n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(n===null){return}r=Cv.Playlist.seekable(i,n);if(r.length===0){return}}if(!r){this.seekable_=t}else if(r.start(0)>t.end(0)||t.start(0)>r.end(0)){this.seekable_=t}else{this.seekable_=vh.createTimeRanges([[r.start(0)>t.start(0)?r.start(0):t.start(0),r.end(0)<t.end(0)?r.end(0):t.end(0)]])}this.logger_("seekable updated ["+Ep(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}},{key:"updateDuration",value:function e(){var t=this;var r=this.mediaSource.duration;var i=Cv.Playlist.duration(this.masterPlaylistLoader_.media());var n=this.tech_.buffered();var a=function e(){t.mediaSource.duration=i;t.tech_.trigger("durationchange");t.mediaSource.removeEventListener("sourceopen",e)};if(n.length>0){i=Math.max(i,n.end(n.length-1))}if(r!==i){if(this.mediaSource.readyState!=="open"){this.mediaSource.addEventListener("sourceopen",a)}else{a()}}}},{key:"dispose",value:function e(){var t=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach((function(e){var r=t.mediaTypes_[e].groups;for(var i in r){r[i].forEach((function(e){if(e.playlistLoader){e.playlistLoader.dispose()}}))}}));this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function e(){return this.masterPlaylistLoader_.master}},{key:"media",value:function e(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function e(){var t=this.masterPlaylistLoader_.media();var r=void 0;if(!t||this.mediaSource.readyState!=="open"){return}r=em(this.masterPlaylistLoader_.master,t);if(r.length<1){this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri;return this.mediaSource.endOfStream("decode")}this.configureLoaderMimeTypes_(r);this.excludeIncompatibleVariants_(t)}},{key:"configureLoaderMimeTypes_",value:function e(t){var r=t.length>1&&t[0].indexOf(",")===-1&&t[0]!==t[1]?new vh.EventTarget:null;this.mainSegmentLoader_.mimeType(t[0],r);if(t[1]){this.audioSegmentLoader_.mimeType(t[1],r)}}},{key:"excludeUnsupportedVariants_",value:function e(){this.master().playlists.forEach((function(e){if(e.attributes.CODECS&&f.MediaSource&&f.MediaSource.isTypeSupported&&!f.MediaSource.isTypeSupported('video/mp4; codecs="'+Yp(e.attributes.CODECS)+'"')){e.excludeUntil=Infinity}}))}},{key:"excludeIncompatibleVariants_",value:function e(t){var r=2;var i=null;var n=void 0;if(t.attributes.CODECS){n=Xp(t.attributes.CODECS);i=n.videoCodec;r=n.codecCount}this.master().playlists.forEach((function(e){var t={codecCount:2,videoCodec:null};if(e.attributes.CODECS){t=Xp(e.attributes.CODECS)}if(t.codecCount!==r){e.excludeUntil=Infinity}if(t.videoCodec!==i){e.excludeUntil=Infinity}}))}},{key:"updateAdCues_",value:function e(t){var r=0;var i=this.seekable();if(i.length){r=i.start(0)}sv(t,this.cueTagsTrack_,r)}},{key:"goalBufferLength",value:function e(){var t=this.tech_.currentTime();var r=wm.GOAL_BUFFER_LENGTH;var i=wm.GOAL_BUFFER_LENGTH_RATE;var n=Math.max(r,wm.MAX_GOAL_BUFFER_LENGTH);return Math.min(r+t*i,n)}},{key:"bufferLowWaterLine",value:function e(){var t=this.tech_.currentTime();var r=wm.BUFFER_LOW_WATER_LINE;var i=wm.BUFFER_LOW_WATER_LINE_RATE;var n=Math.max(r,wm.MAX_BUFFER_LOW_WATER_LINE);return Math.min(r+t*i,n)}}]);return t}(vh.EventTarget);var Iv=function e(t,r,i){return function(e){var n=t.master.playlists[r];var a=Jh(n);var s=Zh(n);if(typeof e==="undefined"){return s}if(e){delete n.disabled}else{n.disabled=true}if(e!==s&&!a){i();if(e){t.trigger("renditionenabled")}else{t.trigger("renditiondisabled")}}return e}};var Lv=function e(t,r,i){bh(this,e);var n=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(r.attributes.RESOLUTION){var a=r.attributes.RESOLUTION;this.width=a.width;this.height=a.height}this.bandwidth=r.attributes.BANDWIDTH;this.id=i;this.enabled=Iv(t.playlists,r.uri,n)};var Dv=function e(t){var r=t.playlists;t.representations=function(){return r.master.playlists.filter((function(e){return!Jh(e)})).map((function(e,r){return new Lv(t,e,e.uri)}))}};var Uv=["seeking","seeked","pause","playing","error"];var xv=function(){function e(t){var r=this;bh(this,e);this.tech_=t.tech;this.seekable=t.seekable;this.seekTo=t.seekTo;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;this.logger_=bm("PlaybackWatcher");this.logger_("initialize");var i=function e(){return r.monitorCurrentTime_()};var n=function e(){return r.techWaiting_()};var a=function e(){return r.cancelTimer_()};var s=function e(){return r.fixesBadSeeks_()};this.tech_.on("seekablechanged",s);this.tech_.on("waiting",n);this.tech_.on(Uv,a);this.tech_.on("canplay",i);this.dispose=function(){r.logger_("dispose");r.tech_.off("seekablechanged",s);r.tech_.off("waiting",n);r.tech_.off(Uv,a);r.tech_.off("canplay",i);if(r.checkCurrentTimeTimeout_){f.clearTimeout(r.checkCurrentTimeTimeout_)}r.cancelTimer_()}}Th(e,[{key:"monitorCurrentTime_",value:function e(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){f.clearTimeout(this.checkCurrentTimeTimeout_)}this.checkCurrentTimeTimeout_=f.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function e(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(this.tech_.paused()||this.tech_.seeking()){return}var t=this.tech_.currentTime();var r=this.tech_.buffered();if(this.lastRecordedTime===t&&(!r.length||t+bp>=r.end(r.length-1))){return this.techWaiting_()}if(this.consecutiveUpdates>=5&&t===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_()}else if(t===this.lastRecordedTime){this.consecutiveUpdates++}else{this.consecutiveUpdates=0;this.lastRecordedTime=t}}},{key:"cancelTimer_",value:function e(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_)}this.timer_=null}},{key:"fixesBadSeeks_",value:function e(){var t=this.tech_.seeking();var r=this.seekable();var i=this.tech_.currentTime();var n=void 0;if(t&&this.afterSeekableWindow_(r,i)){var a=r.end(r.length-1);n=a}if(t&&this.beforeSeekableWindow_(r,i)){var s=r.start(0);n=s+bp}if(typeof n!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+i+" with "+("seekable range "+Ep(r)+". Seeking to ")+(n+"."));this.seekTo(n);return true}return false}},{key:"waiting_",value:function e(){if(this.techWaiting_()){return}var t=this.tech_.currentTime();var r=this.tech_.buffered();var i=Sp(r,t);if(i.length&&t+3<=i.end(0)){this.cancelTimer_();this.seekTo(t);this.logger_("Stopped at "+t+" while inside a buffered region "+("["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},{key:"techWaiting_",value:function e(){var t=this.seekable();var r=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return true}if(this.tech_.seeking()||this.timer_!==null){return true}if(this.beforeSeekableWindow_(t,r)){var i=t.end(t.length-1);this.logger_("Fell out of live window at time "+r+". Seeking to "+("live point (seekable end) "+i));this.cancelTimer_();this.seekTo(i);this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true}var n=this.tech_.buffered();var a=wp(n,r);if(this.videoUnderflow_(a,n,r)){this.cancelTimer_();this.seekTo(r);this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true}if(a.length>0){var s=a.start(0)-r;this.logger_("Stopped at "+r+", setting timer for "+s+", seeking "+("to "+a.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),s*1e3,r);return true}return false}},{key:"afterSeekableWindow_",value:function e(t,r){if(!t.length){return false}if(r>t.end(t.length-1)+bp){return true}return false}},{key:"beforeSeekableWindow_",value:function e(t,r){if(t.length&&t.start(0)>0&&r<t.start(0)-bp){return true}return false}},{key:"videoUnderflow_",value:function e(t,r,i){if(t.length===0){var n=this.gapFromVideoUnderflow_(r,i);if(n){this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". "+("Seeking to current time "+i));return true}}return false}},{key:"skipTheGap_",value:function e(t){var r=this.tech_.buffered();var i=this.tech_.currentTime();var n=wp(r,i);this.cancelTimer_();if(n.length===0||i!==t){return}this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",n.start(0));this.seekTo(n.start(0)+_p);this.tech_.trigger({type:"usage",name:"hls-gap-skip"})}},{key:"gapFromVideoUnderflow_",value:function e(t,r){var i=kp(t);for(var n=0;n<i.length;n++){var a=i.start(n);var s=i.end(n);if(r-a<4&&r-a>2){return{start:a,end:s}}}return null}}]);return e}();var Rv={errorInterval:30,getSource:function e(t){var r=this.tech({IWillNotUseThisInPlugins:true});var i=r.currentSource_;return t(i)}};var Mv=function e(t,r){var i=0;var n=0;var a=vh.mergeOptions(Rv,r);t.ready((function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var s=function e(){if(n){t.currentTime(n)}};var o=function e(r){if(r===null||r===undefined){return}n=t.duration()!==Infinity&&t.currentTime()||0;t.one("loadedmetadata",s);t.src(r);t.trigger({type:"usage",name:"hls-error-reload"});t.play()};var u=function e(){if(Date.now()-i<a.errorInterval*1e3){t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!=="function"){vh.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}i=Date.now();return a.getSource.call(t,o)};var l=function e(){t.off("loadedmetadata",s);t.off("error",u);t.off("dispose",e)};var f=function r(i){l();e(t,i)};t.on("error",u);t.on("dispose",l);t.reloadSourceOnError=f};var Bv=function e(t){Mv(this,t)};var Nv="1.2.5";vh.use("*",(function(e){return{setSource:function e(t,r){r(null,t)},setCurrentTime:function t(r){if(e.vhs&&e.currentSource().src===e.vhs.source_.src){e.vhs.setCurrentTime(r)}return r},play:function t(){if(e.vhs&&e.currentSource().src===e.vhs.source_.src){e.vhs.setCurrentTime(e.currentTime())}}}}));var jv={PlaylistLoader:Mh,Playlist:sp,Decrypter:Io,AsyncStream:Ao,decrypt:Po,utils:yp,STANDARD_PLAYLIST_SELECTOR:Gm,INITIAL_PLAYLIST_SELECTOR:zm,comparePlaylistBandwidth:Vm,comparePlaylistResolution:Hm,xhr:lp()};var Fv=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(jv,e,{get:function t(){vh.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing");return wm[e]},set:function t(r){vh.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing");if(typeof r!=="number"||r<0){vh.log.warn("value of Hls."+e+" must be greater than or equal to 0");return}wm[e]=r}})}));var Vv=function e(t){var r=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(r.test(t)){return"hls"}var i=/^application\/dash\+xml/i;if(i.test(t)){return"dash"}return null};var Hv=function e(t,r){var i=r.media();var n=-1;for(var a=0;a<t.length;a++){if(t[a].id===i.uri){n=a;break}}t.selectedIndex_=n;t.trigger({selectedIndex:n,type:"change"})};var qv=function e(t,r){r.representations().forEach((function(e){t.addQualityLevel(e)}));Hv(t,r.playlists)};jv.canPlaySource=function(){return vh.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var Gv=function e(t,r,i){if(!t){return t}var n={};for(var a in t){n[a]={audioContentType:'audio/mp4; codecs="'+i.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+r.attributes.CODECS+'"'};if(r.contentProtection&&r.contentProtection[a]&&r.contentProtection[a].pssh){n[a].pssh=r.contentProtection[a].pssh}if(typeof t[a]==="string"){n[a].url=t[a]}}return vh.mergeOptions(t,n)};var Wv=function e(t){if(t.options_.sourceType!=="dash"){return}var r=vh.players[t.tech_.options_.playerId];if(r.eme){var i=Gv(t.source_.keySystems,t.playlists.media(),t.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());if(i){r.currentSource().keySystems=i}}};jv.supportsNativeHls=function(){var e=v.createElement("video");if(!vh.getTech("Html5").isSupported()){return false}var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}();jv.supportsNativeDash=function(){if(!vh.getTech("Html5").isSupported()){return false}return/maybe|probably/i.test(v.createElement("video").canPlayType("application/dash+xml"))}();jv.supportsTypeNatively=function(e){if(e==="hls"){return jv.supportsNativeHls}if(e==="dash"){return jv.supportsNativeDash}return false};jv.isSupported=function(){return vh.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var zv=vh.getComponent("Component");var $v=function(e){wh(t,e);function t(e,r,i){bh(this,t);var n=kh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,i.hls));if(r.options_&&r.options_.playerId){var a=vh(r.options_.playerId);if(!a.hasOwnProperty("hls")){Object.defineProperty(a,"hls",{get:function e(){vh.log.warn("player.hls is deprecated. Use player.tech().hls instead.");r.trigger({type:"usage",name:"hls-player-access"});return n}})}a.vhs=n;a.dash=n}n.tech_=r;n.source_=e;n.stats={};n.setOptions_();if(n.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks){r.overrideNativeAudioTracks(true);r.overrideNativeVideoTracks(true)}else if(n.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. "+"See https://git.io/vMpjB")}n.on(v,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=v.fullscreenElement||v.webkitFullscreenElement||v.mozFullScreenElement||v.msFullscreenElement;if(t&&t.contains(n.tech_.el())){n.masterPlaylistController_.smoothQualityChange_()}}));n.on(n.tech_,"error",(function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading()}}));n.on(n.tech_,"play",n.play);return n}Th(t,[{key:"setOptions_",value:function e(){var t=this;this.options_.withCredentials=this.options_.withCredentials||false;if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=Fv}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Fv;["withCredentials","bandwidth"].forEach((function(e){if(typeof t.source_[e]!=="undefined"){t.options_[e]=t.source_[e]}}));this.bandwidth=this.options_.bandwidth}},{key:"src",value:function e(t,r){var i=this;if(!t){return}this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=jv;this.options_.sourceType=Vv(r);this.options_.seekTo=function(e){i.tech_.setCurrentTime(e);i.setCurrentTime(e)};this.masterPlaylistController_=new Pv(this.options_);this.playbackWatcher_=new xv(vh.mergeOptions(this.options_,{seekable:function e(){return i.seekable()}}));this.masterPlaylistController_.on("error",(function(){var e=vh.players[i.tech_.options_.playerId];e.error(i.masterPlaylistController_.error)}));this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):jv.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=jv.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function e(){return this.masterPlaylistController_.selectPlaylist},set:function e(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function e(){var t=1/(this.bandwidth||1);var r=void 0;if(this.throughput>0){r=1/this.throughput}else{r=0}var i=Math.floor(1/(t+r));return i},set:function e(){vh.log.error('The "systemBandwidth" property is read-only')}}});Object.defineProperties(this.stats,{bandwidth:{get:function e(){return i.bandwidth||0},enumerable:true},mediaRequests:{get:function e(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:true},mediaRequestsAborted:{get:function e(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:true},mediaRequestsTimedout:{get:function e(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:true},mediaRequestsErrored:{get:function e(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:true},mediaTransferDuration:{get:function e(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:true},mediaBytesTransferred:{get:function e(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:true},mediaSecondsLoaded:{get:function e(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:true},buffered:{get:function e(){return Ap(i.tech_.buffered())},enumerable:true},currentTime:{get:function e(){return i.tech_.currentTime()},enumerable:true},currentSource:{get:function e(){return i.tech_.currentSource_},enumerable:true},currentTech:{get:function e(){return i.tech_.name_},enumerable:true},duration:{get:function e(){return i.tech_.duration()},enumerable:true},master:{get:function e(){return i.playlists.master},enumerable:true},playerDimensions:{get:function e(){return i.tech_.currentDimensions()},enumerable:true},seekable:{get:function e(){return Ap(i.tech_.seekable())},enumerable:true},timestamp:{get:function e(){return Date.now()},enumerable:true},videoPlaybackQuality:{get:function e(){return i.tech_.getVideoPlaybackQuality()},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.masterPlaylistController_.on("selectedinitialmedia",(function(){Dv(i);Wv(i)}));this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")}));this.tech_.ready((function(){return i.setupQualityLevels_()}));if(!this.tech_.el()){return}this.tech_.src(vh.URL.createObjectURL(this.masterPlaylistController_.mediaSource))}},{key:"setupQualityLevels_",value:function e(){var t=this;var r=vh.players[this.tech_.options_.playerId];if(r&&r.qualityLevels){this.qualityLevels_=r.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",(function(){qv(t.qualityLevels_,t)}));this.playlists.on("mediachange",(function(){Hv(t.qualityLevels_,t.playlists)}))}}},{key:"play",value:function e(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function e(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function e(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function e(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function e(){if(this.playbackWatcher_){this.playbackWatcher_.dispose()}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose()}if(this.qualityLevels_){this.qualityLevels_.dispose()}Sh(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]);return t}(zv);var Xv={name:"videojs-http-streaming",VERSION:Nv,canHandleSource:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=vh.mergeOptions(vh.options,r);return Xv.canPlayType(t.type,i)},handleSource:function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=vh.mergeOptions(vh.options,i);r.hls=new $v(t,r,n);r.hls.xhr=lp();r.hls.src(t.src,t.type);return r.hls},canPlayType:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=vh.mergeOptions(vh.options,r),n=i.hls.overrideNative;var a=Vv(t);var s=a&&(!jv.supportsTypeNatively(a)||n);return s?"maybe":""}};if(typeof vh.MediaSource==="undefined"||typeof vh.URL==="undefined"){vh.MediaSource=pm;vh.URL=mm}if(pm.supportsNativeMediaSources()){vh.getTech("Html5").registerSourceHandler(Xv,0)}vh.HlsHandler=$v;vh.HlsSourceHandler=Xv;vh.Hls=jv;if(!vh.use){vh.registerComponent("Hls",jv)}vh.options.hls=vh.options.hls||{};if(vh.registerPlugin){vh.registerPlugin("reloadSourceOnError",Bv)}else{vh.plugin("reloadSourceOnError",Bv)}function Yv(){
/**
             * videojs-contrib-hls
             * @version 5.11.0
             * @copyright 2017 Brightcove, Inc
             * @license Apache-2.0
             */
(function(t){if(typeof e==="object"&&typeof module!=="undefined"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{var r;if(typeof window!=="undefined"){r=window}else if(typeof global!=="undefined"){r=global}else if(typeof self!=="undefined"){r=self}else{r=this}r.videojsContribHls=t()}})((function(){return function e(t,r,i){function n(s,o){if(!r[s]){if(!t[s]){var u=typeof require=="function"&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};t[s][0].call(f.exports,(function(e){var r=t[s][1][e];return n(r?r:e)}),f,f.exports,e,t,r,i)}return r[s].exports}var a=typeof require=="function"&&require;for(var s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){var r=[];var i=true;var n=false;var a=undefined;try{for(var s=e[Symbol.iterator](),o;!(i=(o=s.next()).done);i=true){r.push(o.value);if(t&&r.length===t)break}}catch(u){n=true;a=u}finally{try{if(!i&&s["return"])s["return"]()}finally{if(n)throw a}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function n(e){return e&&e.__esModule?e:{default:e}}var a=e("global/window");var s=n(a);var o=function e(t,r){var i=t.cues;for(var n=0;n<i.length;n++){var a=i[n];if(r>=a.adStartTime&&r<=a.adEndTime){return a}}return null};var u=function e(t,r){var n=arguments.length<=2||arguments[2]===undefined?0:arguments[2];if(!t.segments){return}var a=n;var u=undefined;for(var l=0;l<t.segments.length;l++){var f=t.segments[l];if(!u){u=o(r,a+f.duration/2)}if(u){if("cueIn"in f){u.endTime=a;u.adEndTime=a;a+=f.duration;u=null;continue}if(a<u.endTime){a+=f.duration;continue}u.endTime+=f.duration}else{if("cueOut"in f){u=new s["default"].VTTCue(a,a+f.duration,f.cueOut);u.adStartTime=a;u.adEndTime=a+parseFloat(f.cueOut);r.addCue(u)}if("cueOutCont"in f){var d=undefined;var c=undefined;var h=f.cueOutCont.split("/").map(parseFloat);var p=i(h,2);d=p[0];c=p[1];u=new s["default"].VTTCue(a,a+f.duration,"");u.adStartTime=a-d;u.adEndTime=u.adStartTime+c;r.addCue(u)}}a+=f.duration}};r["default"]={updateAdCues:u,findAdCue:o};t.exports=r["default"]},{"global/window":32}],2:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function e(t,r){return t.start(r)+"-"+t.end(r)};var n=function e(t,r){var i=t.toString(16);return"00".substring(0,2-i.length)+i+(r%2?" ":"")};var a=function e(t){if(t>=32&&t<126){return String.fromCharCode(t)}return"."};var s=function e(t){var r={};Object.keys(t).forEach((function(e){var i=t[e];if(ArrayBuffer.isView(i)){r[e]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}}else{r[e]=i}}));return r};var o=function e(t){var r=t.byterange||{length:Infinity,offset:0};return[r.length,r.offset,t.resolvedUri].join(",")};var u={hexDump:function e(t){var r=Array.prototype.slice.call(t);var i=16;var s="";var o=undefined;var u=undefined;for(var l=0;l<r.length/i;l++){o=r.slice(l*i,l*i+i).map(n).join("");u=r.slice(l*i,l*i+i).map(a).join("");s+=o+" "+u+"\n"}return s},tagDump:function e(t){return u.hexDump(t.bytes)},textRanges:function e(t){var r="";var n=undefined;for(n=0;n<t.length;n++){r+=i(t,n)+" "}return r},createTransferableMessage:s,initSegmentId:o};r["default"]=u;t.exports=r["default"]},{}],3:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});r["default"]={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};t.exports=r["default"]},{}],4:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=e("global/window");var a=i(n);var s=e("aes-decrypter");var o=e("./bin-utils");var u=function e(t){t.onmessage=function(e){var t=e.data;var r=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength);var i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4);var n=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new s.Decrypter(r,i,n,(function(e,r){a["default"].postMessage((0,o.createTransferableMessage)({source:t.source,decrypted:r}),[r.buffer])}))}};r["default"]=function(e){return new u(e)};t.exports=r["default"]},{"./bin-utils":2,"aes-decrypter":25,"global/window":32}],5:[function(e,t,r){(function(t){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var n=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e("./playlist-loader");var l=a(u);var f=e("./segment-loader");var d=a(f);var c=e("./vtt-segment-loader");var h=a(c);var p=e("./ranges");var m=a(p);var v=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var g=a(v);var y=e("./ad-cue-tags");var _=a(y);var b=e("./sync-controller");var T=a(b);var S=e("videojs-contrib-media-sources/es5/codec-utils");var w=e("webworkify");var k=a(w);var E=e("./decrypter-worker");var C=a(E);var A=e("./config");var O=a(A);var P=e("./util/codecs.js");var I=e("./media-groups");var L=60*2;var D=undefined;var U={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"};var x=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];var R=function e(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]};var M=function e(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,(function(e){return(0,S.translateLegacyCodecs)([e])[0]}))};r.mapLegacyAvcCodecs_=M;var B=function e(t,r,i){return t+"/"+r+'; codecs="'+i.filter((function(e){return!!e})).join(", ")+'"'};var N=function e(t){if(t.segments&&t.segments.length&&t.segments[0].map){return"mp4"}return"mp2t"};var j=function e(t){var r=t.attributes||{};if(r.CODECS){return(0,P.parseCodecs)(r.CODECS)}return U};var F=function e(t,r){var i=N(r);var n=j(r);var a=r.attributes||{};var s=true;var o=false;if(!r){return[]}if(t.mediaGroups.AUDIO&&a.AUDIO){var u=t.mediaGroups.AUDIO[a.AUDIO];if(u){o=true;s=false;for(var l in u){if(!u[l].uri){s=true;break}}}}if(o&&!n.audioProfile){g["default"].log.warn("Multiple audio tracks present but no audio codec string is specified. "+"Attempting to use the default audio codec (mp4a.40.2)");n.audioProfile=U.audioProfile}var f={};if(n.videoCodec){f.video=""+n.videoCodec+n.videoObjectTypeIndicator}if(n.audioProfile){f.audio="mp4a.40."+n.audioProfile}var d=B("audio",i,[f.audio]);var c=B("video",i,[f.video]);var h=B("video",i,[f.video,f.audio]);if(o){if(!s&&f.video){return[c,d]}return[h,d]}if(!f.video){return[d]}return[h]};r.mimeTypesForPlaylist_=F;var V=function(e){o(t,e);function t(e){var r=this;s(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var i=e.url;var a=e.withCredentials;var o=e.mode;var u=e.tech;var f=e.bandwidth;var c=e.externHls;var p=e.useCueTags;var m=e.blacklistDuration;var v=e.enableLowInitialPlaylist;if(!i){throw new Error("A non-empty playlist URL is required")}D=c;this.withCredentials=a;this.tech_=u;this.hls_=u.hls;this.mode_=o;this.useCueTags_=p;this.blacklistDuration=m;this.enableLowInitialPlaylist=v;if(this.useCueTags_){this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues");this.cueTagsTrack_.inBandMetadataTrackDispatchType=""}this.requestOptions_={withCredentials:this.withCredentials,timeout:null};this.mediaTypes_=(0,I.createMediaTypes)();this.mediaSource=new g["default"].MediaSource({mode:o});this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this));this.seekable_=g["default"].createTimeRanges();this.hasPlayed_=function(){return false};this.syncController_=new T["default"](e);this.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;this.decrypter_=(0,k["default"])(C["default"]);var y={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function e(){return r.seekable()},seeking:function e(){return r.tech_.seeking()},duration:function e(){return r.mediaSource.duration},hasPlayed:function e(){return r.hasPlayed_()},goalBufferLength:function e(){return r.goalBufferLength()},bandwidth:f,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new l["default"](i,this.hls_,this.withCredentials);this.setupMasterPlaylistLoaderListeners_();this.mainSegmentLoader_=new d["default"](g["default"].mergeOptions(y,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e);this.audioSegmentLoader_=new d["default"](g["default"].mergeOptions(y,{loaderType:"audio"}),e);this.subtitleSegmentLoader_=new h["default"](g["default"].mergeOptions(y,{loaderType:"vtt"}),e);this.setupSegmentLoaderListeners_();x.forEach((function(e){r[e+"_"]=R.bind(r,e)}));this.masterPlaylistLoader_.load()}i(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function e(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var e=t.masterPlaylistLoader_.media();var r=t.masterPlaylistLoader_.targetDuration*1.5*1e3;if(t.masterPlaylistLoader_.isLowestEnabledRendition_()){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=r}if(e.endList&&t.tech_.preload()!=="none"){t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load()}(0,I.setupMediaGroups)({segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,mode:t.mode_,hls:t.hls_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)});t.triggerPresenceUsage_(t.master(),e);try{t.setupSourceBuffers_()}catch(Qv){g["default"].log.warn("Failed to create SourceBuffers",Qv);return t.mediaSource.endOfStream("decode")}t.setupFirstPlay();t.trigger("selectedinitialmedia")}));this.masterPlaylistLoader_.on("loadedplaylist",(function(){var e=t.masterPlaylistLoader_.media();if(!e){var r=undefined;if(t.enableLowInitialPlaylist){r=t.selectInitialPlaylist()}if(!r){r=t.selectPlaylist()}t.initialMedia_=r;t.masterPlaylistLoader_.media(t.initialMedia_);return}if(t.useCueTags_){t.updateAdCues_(e)}t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.updateDuration();if(!t.tech_.paused()){t.mainSegmentLoader_.load()}if(!e.endList){(function(){var e=function e(){var r=t.seekable();if(r.length!==0){t.mediaSource.addSeekableRange_(r.start(0),r.end(0))}};if(t.duration()!==Infinity){(function(){var r=function r(){if(t.duration()===Infinity){e()}else{t.tech_.one("durationchange",r)}};t.tech_.one("durationchange",r)})()}else{e()}})()}}));this.masterPlaylistLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}));this.masterPlaylistLoader_.on("mediachanging",(function(){t.mainSegmentLoader_.abort();t.mainSegmentLoader_.pause()}));this.masterPlaylistLoader_.on("mediachange",(function(){var e=t.masterPlaylistLoader_.media();var r=t.masterPlaylistLoader_.targetDuration*1.5*1e3;if(t.masterPlaylistLoader_.isLowestEnabledRendition_()){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=r}t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load();t.tech_.trigger({type:"mediachange",bubbles:true})}));this.masterPlaylistLoader_.on("playlistunchanged",(function(){var e=t.masterPlaylistLoader_.media();var r=t.stuckAtPlaylistEnd_(e);if(r){t.blacklistCurrentPlaylist({message:"Playlist no longer updating."});t.tech_.trigger("playliststuck")}}));this.masterPlaylistLoader_.on("renditiondisabled",(function(){t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}));this.masterPlaylistLoader_.on("renditionenabled",(function(){t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))}},{key:"triggerPresenceUsage_",value:function e(t,r){var i=t.mediaGroups||{};var n=true;var a=Object.keys(i.AUDIO);for(var s in i.AUDIO){for(var o in i.AUDIO[s]){var u=i.AUDIO[s][o];if(!u.uri){n=false}}}if(n){this.tech_.trigger({type:"usage",name:"hls-demuxed"})}if(Object.keys(i.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"hls-webvtt"})}if(D.Playlist.isAes(r)){this.tech_.trigger({type:"usage",name:"hls-aes"})}if(D.Playlist.isFmp4(r)){this.tech_.trigger({type:"usage",name:"hls-fmp4"})}if(a.length&&Object.keys(i.AUDIO[a[0]]).length>1){this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}}},{key:"setupSegmentLoaderListeners_",value:function e(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var e=t.selectPlaylist();var r=t.masterPlaylistLoader_.media();var i=t.tech_.buffered();var n=i.length?i.end(i.length-1)-t.tech_.currentTime():0;var a=t.bufferLowWaterLine();if(!r.endList||t.duration()<O["default"].MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<r.attributes.BANDWIDTH||n>=a){t.masterPlaylistLoader_.media(e)}t.tech_.trigger("bandwidthupdate")}));this.mainSegmentLoader_.on("progress",(function(){t.trigger("progress")}));this.mainSegmentLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}));this.mainSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()}));this.mainSegmentLoader_.on("timestampoffset",(function(){t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}));this.audioSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()}));this.mainSegmentLoader_.on("ended",(function(){t.onEndOfStream()}));this.mainSegmentLoader_.on("earlyabort",(function(){t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the "+"request without rebuffering."},L)}));this.mainSegmentLoader_.on("reseteverything",(function(){t.tech_.trigger("hls-reset")}));this.audioSegmentLoader_.on("ended",(function(){t.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function e(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function e(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load()}}},{key:"fastQualityChange_",value:function e(){var t=this.selectPlaylist();if(t!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(t);this.mainSegmentLoader_.resetLoader()}}},{key:"play",value:function e(){if(this.setupFirstPlay()){return}if(this.tech_.ended()){this.tech_.setCurrentTime(0)}if(this.hasPlayed_()){this.load()}var t=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<t.start(0)){return this.tech_.setCurrentTime(t.end(t.length-1))}}}},{key:"setupFirstPlay",value:function e(){var t=undefined;var r=this.masterPlaylistLoader_.media();if(r&&!this.tech_.paused()&&!this.hasPlayed_()){if(!r.endList){this.trigger("firstplay");t=this.seekable();if(t.length){this.tech_.setCurrentTime(t.end(0))}}this.hasPlayed_=function(){return true};this.load();return true}return false}},{key:"handleSourceOpen_",value:function e(){try{this.setupSourceBuffers_()}catch(Qv){g["default"].log.warn("Failed to create Source Buffers",Qv);return this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){this.tech_.play()}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function e(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){t=t&&this.audioSegmentLoader_.ended_}if(t){this.mediaSource.endOfStream()}}},{key:"stuckAtPlaylistEnd_",value:function e(t){var r=this.seekable();if(!r.length){return false}var i=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(i===null){return false}var n=D.Playlist.playlistEnd(t,i);var a=this.tech_.currentTime();var s=this.tech_.buffered();if(!s.length){return n-a<=m["default"].TIME_FUDGE_FACTOR}var o=s.end(s.length-1);return o-a<=m["default"].TIME_FUDGE_FACTOR&&n-o<=m["default"].TIME_FUDGE_FACTOR}},{key:"blacklistCurrentPlaylist",value:function e(t,r){if(t===undefined)t={};var i=undefined;var n=undefined;i=t.playlist||this.masterPlaylistLoader_.media();if(!i){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(Qv){return this.trigger("error")}}var a=this.masterPlaylistLoader_.isFinalRendition_();if(a){g["default"].log.warn("Problem encountered with the current "+"HLS playlist. Trying again since it is the final playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(a)}i.excludeUntil=Date.now()+(r?r:this.blacklistDuration)*1e3;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});n=this.selectPlaylist();g["default"].log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(n)}},{key:"pauseLoading",value:function e(){this.mainSegmentLoader_.pause();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.pause()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.pause()}}},{key:"setCurrentTime",value:function e(t){var r=m["default"].findRange(this.tech_.buffered(),t);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0}if(!this.masterPlaylistLoader_.media().segments){return 0}var i=this.mode_==="flash"||this.mode_==="auto"&&!g["default"].MediaSource.supportsNativeMediaSources();if(r&&r.length&&!i){return t}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort()}this.load()}},{key:"duration",value:function e(){if(!this.masterPlaylistLoader_){return 0}if(this.mediaSource){return this.mediaSource.duration}return D.Playlist.duration(this.masterPlaylistLoader_.media())}},{key:"seekable",value:function e(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function e(){var t=undefined;var r=undefined;if(!this.masterPlaylistLoader_){return}var i=this.masterPlaylistLoader_.media();if(!i){return}var n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(n===null){return}t=D.Playlist.seekable(i,n);if(t.length===0){return}if(this.mediaTypes_.AUDIO.activePlaylistLoader){i=this.mediaTypes_.AUDIO.activePlaylistLoader.media();n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(n===null){return}r=D.Playlist.seekable(i,n);if(r.length===0){return}}if(!r){this.seekable_=t}else if(r.start(0)>t.end(0)||t.start(0)>r.end(0)){this.seekable_=t}else{this.seekable_=g["default"].createTimeRanges([[r.start(0)>t.start(0)?r.start(0):t.start(0),r.end(0)<t.end(0)?r.end(0):t.end(0)]])}this.tech_.trigger("seekablechanged")}},{key:"updateDuration",value:function e(){var t=this;var r=this.mediaSource.duration;var i=D.Playlist.duration(this.masterPlaylistLoader_.media());var n=this.tech_.buffered();var a=function e(){t.mediaSource.duration=i;t.tech_.trigger("durationchange");t.mediaSource.removeEventListener("sourceopen",e)};if(n.length>0){i=Math.max(i,n.end(n.length-1))}if(r!==i){if(this.mediaSource.readyState!=="open"){this.mediaSource.addEventListener("sourceopen",a)}else{a()}}}},{key:"dispose",value:function e(){var t=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach((function(e){var r=t.mediaTypes_[e].groups;for(var i in r){r[i].forEach((function(e){if(e.playlistLoader){e.playlistLoader.dispose()}}))}}));this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function e(){return this.masterPlaylistLoader_.master}},{key:"media",value:function e(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function e(){var t=this.masterPlaylistLoader_.media();var r=undefined;if(!t||this.mediaSource.readyState!=="open"){return}r=F(this.masterPlaylistLoader_.master,t);if(r.length<1){this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri;return this.mediaSource.endOfStream("decode")}this.mainSegmentLoader_.mimeType(r[0]);if(r[1]){this.audioSegmentLoader_.mimeType(r[1])}this.excludeIncompatibleVariants_(t)}},{key:"excludeIncompatibleVariants_",value:function e(t){var r=this.masterPlaylistLoader_.master;var i=2;var n=null;var a=undefined;if(t.attributes.CODECS){a=(0,P.parseCodecs)(t.attributes.CODECS);n=a.videoCodec;i=a.codecCount}r.playlists.forEach((function(e){var t={codecCount:2,videoCodec:null};if(e.attributes.CODECS){var r=e.attributes.CODECS;t=(0,P.parseCodecs)(r);if(window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+M(r)+'"')){e.excludeUntil=Infinity}}if(t.codecCount!==i){e.excludeUntil=Infinity}if(t.videoCodec!==n){e.excludeUntil=Infinity}}))}},{key:"updateAdCues_",value:function e(t){var r=0;var i=this.seekable();if(i.length){r=i.start(0)}_["default"].updateAdCues(t,this.cueTagsTrack_,r)}},{key:"goalBufferLength",value:function e(){var t=this.tech_.currentTime();var r=O["default"].GOAL_BUFFER_LENGTH;var i=O["default"].GOAL_BUFFER_LENGTH_RATE;var n=Math.max(r,O["default"].MAX_GOAL_BUFFER_LENGTH);return Math.min(r+t*i,n)}},{key:"bufferLowWaterLine",value:function e(){var t=this.tech_.currentTime();var r=O["default"].BUFFER_LOW_WATER_LINE;var i=O["default"].BUFFER_LOW_WATER_LINE_RATE;var n=Math.max(r,O["default"].MAX_BUFFER_LOW_WATER_LINE);return Math.min(r+t*i,n)}}]);return t}(g["default"].EventTarget);r.MasterPlaylistController=V}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./ad-cue-tags":1,"./config":3,"./decrypter-worker":4,"./media-groups":6,"./playlist-loader":9,"./ranges":12,"./segment-loader":16,"./sync-controller":18,"./util/codecs.js":19,"./vtt-segment-loader":20,"videojs-contrib-media-sources/es5/codec-utils":65,webworkify:76}],6:[function(e,t,r){(function(t){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var a=i(n);var s=e("./playlist-loader");var o=i(s);var u=function e(){};var l=function e(t){var r=t["default"]?"main":"alternative";if(t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0){r="main-desc"}return r};var f=function e(t,r){t.abort();t.pause();if(r&&r.activePlaylistLoader){r.activePlaylistLoader.pause();r.activePlaylistLoader=null}};r.stopLoaders=f;var d=function e(t,r){r.activePlaylistLoader=t;t.load()};r.startLoaders=d;var c=function e(t,r){return function(){var e=r.segmentLoaders;var i=e[t];var n=e.main;var a=r.mediaTypes[t];var s=a.activeTrack();var o=a.activeGroup(s);var u=a.activePlaylistLoader;f(i,a);if(!o){return}if(!o.playlistLoader){if(u){n.resetEverything()}return}i.resyncLoader();d(o.playlistLoader,a)}};r.onGroupChanged=c;var h=function e(t,r){return function(){var e=r.segmentLoaders;var i=e[t];var n=e.main;var a=r.mediaTypes[t];var s=a.activeTrack();var o=a.activeGroup(s);var u=a.activePlaylistLoader;f(i,a);if(!o){return}if(!o.playlistLoader){n.resetEverything();return}if(u===o.playlistLoader){d(o.playlistLoader,a);return}if(i.track){i.track(s)}i.resetEverything();d(o.playlistLoader,a)}};r.onTrackChanged=h;var p={AUDIO:function e(t,r){return function(){var e=r.segmentLoaders[t];var i=r.mediaTypes[t];var n=r.blacklistCurrentPlaylist;f(e,i);var s=i.activeTrack();var o=i.activeGroup();var u=(o.filter((function(e){return e["default"]}))[0]||o[0]).id;var l=i.tracks[u];if(s===l){n({message:"Problem encountered loading the default audio track."});return}a["default"].log.warn("Problem encountered loading the alternate audio track."+"Switching back to default.");for(var d in i.tracks){i.tracks[d].enabled=i.tracks[d]===l}i.onTrackChanged()}},SUBTITLES:function e(t,r){return function(){var e=r.segmentLoaders[t];var i=r.mediaTypes[t];a["default"].log.warn("Problem encountered loading the subtitle track."+"Disabling subtitle track.");f(e,i);var n=i.activeTrack();if(n){n.mode="disabled"}i.onTrackChanged()}}};r.onError=p;var m={AUDIO:function e(t,r,i){if(!r){return}var n=i.tech;var a=i.requestOptions;var s=i.segmentLoaders[t];r.on("loadedmetadata",(function(){var e=r.media();s.playlist(e,a);if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}}));r.on("loadedplaylist",(function(){s.playlist(r.media(),a);if(!n.paused()){s.load()}}));r.on("error",p[t](t,i))},SUBTITLES:function e(t,r,i){var n=i.tech;var a=i.requestOptions;var s=i.segmentLoaders[t];var o=i.mediaTypes[t];r.on("loadedmetadata",(function(){var e=r.media();s.playlist(e,a);s.track(o.activeTrack());if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}}));r.on("loadedplaylist",(function(){s.playlist(r.media(),a);if(!n.paused()){s.load()}}));r.on("error",p[t](t,i))}};r.setupListeners=m;var v={AUDIO:function e(t,r){var i=r.mode;var n=r.hls;var s=r.segmentLoaders[t];var u=r.requestOptions.withCredentials;var f=r.master.mediaGroups;var d=r.mediaTypes[t];var c=d.groups;var h=d.tracks;if(!f[t]||Object.keys(f[t]).length===0||i!=="html5"){f[t]={main:{default:{default:true}}}}for(var v in f[t]){if(!c[v]){c[v]=[]}for(var g in f[t][v]){var y=f[t][v][g];var _=undefined;if(y.resolvedUri){_=new o["default"](y.resolvedUri,n,u)}else{_=null}y=a["default"].mergeOptions({id:g,playlistLoader:_},y);m[t](t,y.playlistLoader,r);c[v].push(y);if(typeof h[g]==="undefined"){var b=new a["default"].AudioTrack({id:g,kind:l(y),enabled:false,language:y.language,default:y["default"],label:g});h[g]=b}}}s.on("error",p[t](t,r))},SUBTITLES:function e(t,r){var i=r.tech;var n=r.hls;var s=r.segmentLoaders[t];var u=r.requestOptions.withCredentials;var l=r.master.mediaGroups;var f=r.mediaTypes[t];var d=f.groups;var c=f.tracks;for(var h in l[t]){if(!d[h]){d[h]=[]}for(var v in l[t][h]){if(l[t][h][v].forced){continue}var g=l[t][h][v];g=a["default"].mergeOptions({id:v,playlistLoader:new o["default"](g.resolvedUri,n,u)},g);m[t](t,g.playlistLoader,r);d[h].push(g);if(typeof c[v]==="undefined"){var y=i.addRemoteTextTrack({id:v,kind:"subtitles",enabled:false,language:g.language,label:v},false).track;c[v]=y}}}s.on("error",p[t](t,r))},"CLOSED-CAPTIONS":function e(t,r){var i=r.tech;var n=r.master.mediaGroups;var s=r.mediaTypes[t];var o=s.groups;var u=s.tracks;for(var l in n[t]){if(!o[l]){o[l]=[]}for(var f in n[t][l]){var d=n[t][l][f];if(!d.instreamId.match(/CC\d/)){continue}o[l].push(a["default"].mergeOptions({id:f},d));if(typeof u[f]==="undefined"){var c=i.addRemoteTextTrack({id:d.instreamId,kind:"captions",enabled:false,language:d.language,label:f},false).track;u[f]=c}}}}};r.initialize=v;var g=function e(t,r){return function(e){var i=r.masterPlaylistLoader;var n=r.mediaTypes[t].groups;var a=i.media();if(!a){return null}var s=null;if(a.attributes[t]){s=n[a.attributes[t]]}s=s||n.main;if(typeof e==="undefined"){return s}if(e===null){return null}return s.filter((function(t){return t.id===e.id}))[0]||null}};r.activeGroup=g;var y={AUDIO:function e(t,r){return function(){var e=r.mediaTypes[t].tracks;for(var i in e){if(e[i].enabled){return e[i]}}return null}},SUBTITLES:function e(t,r){return function(){var e=r.mediaTypes[t].tracks;for(var i in e){if(e[i].mode==="showing"){return e[i]}}return null}}};r.activeTrack=y;var _=function e(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){v[e](e,t)}));var r=t.mediaTypes;var i=t.masterPlaylistLoader;var n=t.tech;var a=t.hls;["AUDIO","SUBTITLES"].forEach((function(e){r[e].activeGroup=g(e,t);r[e].activeTrack=y[e](e,t);r[e].onGroupChanged=c(e,t);r[e].onTrackChanged=h(e,t)}));var s=r.AUDIO.activeGroup();var o=(s.filter((function(e){return e["default"]}))[0]||s[0]).id;r.AUDIO.tracks[o].enabled=true;r.AUDIO.onTrackChanged();i.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return r[e].onGroupChanged()}))}));var u=function e(){r.AUDIO.onTrackChanged();n.trigger({type:"usage",name:"hls-audio-change"})};n.audioTracks().addEventListener("change",u);n.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged);a.on("dispose",(function(){n.audioTracks().removeEventListener("change",u);n.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}));n.clearTracks("audio");for(var l in r.AUDIO.tracks){n.audioTracks().addTrack(r.AUDIO.tracks[l])}};r.setupMediaGroups=_;var b=function e(){var t={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:u,activeTrack:u,onGroupChanged:u,onTrackChanged:u}}));return t};r.createMediaTypes=b}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./playlist-loader":9}],7:[function(e,t,r){(function(t){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var a=i(n);var s=e("./bin-utils");var o={FAILURE:2,TIMEOUT:-101,ABORTED:-102};r.REQUEST_ERRORS=o;var u=function e(t){var r=undefined;var i=undefined;i=t.offset+t.length-1;r=t.offset;return"bytes="+r+"-"+i};var l=function e(t){var r={};if(t.byterange){r.Range=u(t.byterange)}return r};var f=function e(t){t.forEach((function(e){e.abort()}))};var d=function e(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}};var c=function e(t){var r=t.target;var i=Date.now()-r.requestTime;var n={bandwidth:Infinity,bytesReceived:0,roundTripTime:i||0};n.bytesReceived=t.loaded;n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3);return n};var h=function e(t,r){if(r.timedout){return{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:o.TIMEOUT,xhr:r}}if(r.aborted){return{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:o.ABORTED,xhr:r}}if(t){return{status:r.status,message:"HLS request errored at URL: "+r.uri,code:o.FAILURE,xhr:r}}return null};var p=function e(t,r){return function(e,i){var n=i.response;var a=h(e,i);if(a){return r(a,t)}if(n.byteLength!==16){return r({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:o.FAILURE,xhr:i},t)}var s=new DataView(n);t.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]);return r(null,t)}};var m=function e(t,r){return function(e,i){var n=i.response;var a=h(e,i);if(a){return r(a,t)}if(n.byteLength===0){return r({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:o.FAILURE,xhr:i},t)}t.map.bytes=new Uint8Array(i.response);return r(null,t)}};var v=function e(t,r){return function(e,i){var n=i.response;var a=h(e,i);if(a){return r(a,t)}if(n.byteLength===0){return r({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:o.FAILURE,xhr:i},t)}t.stats=d(i);if(t.key){t.encryptedBytes=new Uint8Array(i.response)}else{t.bytes=new Uint8Array(i.response)}return r(null,t)}};var g=function e(t,r,i){var n=function e(n){if(n.data.source===r.requestId){t.removeEventListener("message",e);var a=n.data.decrypted;r.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength);return i(null,r)}};t.addEventListener("message",n);t.postMessage((0,s.createTransferableMessage)({source:r.requestId,encrypted:r.encryptedBytes,key:r.key.bytes,iv:r.key.iv}),[r.encryptedBytes.buffer,r.key.bytes.buffer])};var y=function e(t){return t.reduce((function(e,t){return t.code>e.code?t:e}))};var _=function e(t,r,i){var n=[];var a=0;return function(e,s){if(e){f(t);n.push(e)}a+=1;if(a===t.length){s.endOfAllRequests=Date.now();if(n.length>0){var o=y(n);return i(o,s)}if(s.encryptedBytes){return g(r,s,i)}return i(null,s)}}};var b=function e(t,r){return function(e){t.stats=a["default"].mergeOptions(t.stats,c(e));if(!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived){t.stats.firstBytesReceivedAt=Date.now()}return r(e,t)}};var T=function e(t,r,i,n,s,o){var u=[];var d=_(u,i,o);if(n.key){var c=a["default"].mergeOptions(r,{uri:n.key.resolvedUri,responseType:"arraybuffer"});var h=p(n,d);var g=t(c,h);u.push(g)}if(n.map&&!n.map.bytes){var y=a["default"].mergeOptions(r,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:l(n.map)});var T=m(n,d);var S=t(y,T);u.push(S)}var w=a["default"].mergeOptions(r,{uri:n.resolvedUri,responseType:"arraybuffer",headers:l(n)});var k=v(n,d);var E=t(w,k);E.addEventListener("progress",b(n,s));u.push(E);return function(){return f(u)}};r.mediaSegmentRequest=T}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./bin-utils":2}],8:[function(e,t,r){(function(i){Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=e("global/window");var u=a(o);var l=e("./ranges");var f=a(l);var d=typeof window!=="undefined"?window["videojs"]:typeof i!=="undefined"?i["videojs"]:null;var c=a(d);var h=["seeking","seeked","pause","playing","error"];var p=function(){function e(t){var r=this;s(this,e);this.tech_=t.tech;this.seekable=t.seekable;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;if(t.debug){this.logger_=c["default"].log.bind(c["default"],"playback-watcher ->")}this.logger_("initialize");var i=function e(){return r.monitorCurrentTime_()};var n=function e(){return r.techWaiting_()};var a=function e(){return r.cancelTimer_()};var o=function e(){return r.fixesBadSeeks_()};this.tech_.on("seekablechanged",o);this.tech_.on("waiting",n);this.tech_.on(h,a);this.tech_.on("canplay",i);this.dispose=function(){r.logger_("dispose");r.tech_.off("seekablechanged",o);r.tech_.off("waiting",n);r.tech_.off(h,a);r.tech_.off("canplay",i);if(r.checkCurrentTimeTimeout_){u["default"].clearTimeout(r.checkCurrentTimeTimeout_)}r.cancelTimer_()}}n(e,[{key:"monitorCurrentTime_",value:function e(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){u["default"].clearTimeout(this.checkCurrentTimeTimeout_)}this.checkCurrentTimeTimeout_=u["default"].setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function e(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(this.tech_.paused()||this.tech_.seeking()){return}var t=this.tech_.currentTime();var r=this.tech_.buffered();if(this.lastRecordedTime===t&&(!r.length||t+.1>=r.end(r.length-1))){return this.techWaiting_()}if(this.consecutiveUpdates>=5&&t===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_()}else if(t===this.lastRecordedTime){this.consecutiveUpdates++}else{this.consecutiveUpdates=0;this.lastRecordedTime=t}}},{key:"cancelTimer_",value:function e(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_)}this.timer_=null}},{key:"fixesBadSeeks_",value:function e(){var t=this.tech_.seeking();var r=this.seekable();var i=this.tech_.currentTime();var n=undefined;if(t&&this.afterSeekableWindow_(r,i)){var a=r.end(r.length-1);n=a}if(t&&this.beforeSeekableWindow_(r,i)){var s=r.start(0);n=s+.1}if(typeof n!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+i+" with "+("seekable range "+f["default"].printableRange(r)+". Seeking to ")+(n+"."));this.tech_.setCurrentTime(n);return true}return false}},{key:"waiting_",value:function e(){if(this.techWaiting_()){return}var t=this.tech_.currentTime();var r=this.tech_.buffered();var i=f["default"].findRange(r,t);if(i.length&&t+3<=i.end(0)){this.cancelTimer_();this.tech_.setCurrentTime(t);this.logger_("Stopped at "+t+" while inside a buffered region "+("["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},{key:"techWaiting_",value:function e(){var t=this.seekable();var r=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return true}if(this.tech_.seeking()||this.timer_!==null){return true}if(this.beforeSeekableWindow_(t,r)){var i=t.end(t.length-1);this.logger_("Fell out of live window at time "+r+". Seeking to "+("live point (seekable end) "+i));this.cancelTimer_();this.tech_.setCurrentTime(i);this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true}var n=this.tech_.buffered();var a=f["default"].findNextRange(n,r);if(this.videoUnderflow_(a,n,r)){this.cancelTimer_();this.tech_.setCurrentTime(r);this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true}if(a.length>0){var s=a.start(0)-r;this.logger_("Stopped at "+r+", setting timer for "+s+", seeking "+("to "+a.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),s*1e3,r);return true}return false}},{key:"afterSeekableWindow_",value:function e(t,r){if(!t.length){return false}if(r>t.end(t.length-1)+.1){return true}return false}},{key:"beforeSeekableWindow_",value:function e(t,r){if(t.length&&t.start(0)>0&&r<t.start(0)-.1){return true}return false}},{key:"videoUnderflow_",value:function e(t,r,i){if(t.length===0){var n=this.gapFromVideoUnderflow_(r,i);if(n){this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". "+("Seeking to current time "+i));return true}}return false}},{key:"skipTheGap_",value:function e(t){var r=this.tech_.buffered();var i=this.tech_.currentTime();var n=f["default"].findNextRange(r,i);this.cancelTimer_();if(n.length===0||i!==t){return}this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",n.start(0));this.tech_.setCurrentTime(n.start(0)+f["default"].TIME_FUDGE_FACTOR);this.tech_.trigger({type:"usage",name:"hls-gap-skip"})}},{key:"gapFromVideoUnderflow_",value:function e(t,r){var i=f["default"].findGaps(t);for(var n=0;n<i.length;n++){var a=i.start(n);var s=i.end(n);if(r-a<4&&r-a>2){return{start:a,end:s}}}return null}},{key:"logger_",value:function e(){}}]);return e}();r["default"]=p;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./ranges":12,"global/window":32}],9:[function(e,t,r){(function(i){Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var a=e("./resolve-url");var s=n(a);var o=typeof window!=="undefined"?window["videojs"]:typeof i!=="undefined"?i["videojs"]:null;var u=e("./playlist.js");var l=e("m3u8-parser");var f=n(l);var d=e("global/window");var c=n(d);var h=function e(t,r,i){var n=r.slice();var a=undefined;var s=undefined;i=i||0;a=Math.min(t.length,r.length+i);for(s=i;s<a;s++){n[s-i]=(0,o.mergeOptions)(t[s],n[s-i])}return n};var p=function e(t,r){var i=false;var n=(0,o.mergeOptions)(t,{});var a=t.playlists.length;var u=undefined;var l=undefined;var f=undefined;while(a--){u=n.playlists[a];if(u.uri===r.uri){if(u.segments&&r.segments&&u.segments.length===r.segments.length&&u.mediaSequence===r.mediaSequence){continue}n.playlists[a]=(0,o.mergeOptions)(u,r);n.playlists[r.uri]=n.playlists[a];if(u.segments){n.playlists[a].segments=h(u.segments,r.segments,r.mediaSequence-u.mediaSequence)}f=0;if(n.playlists[a].segments){f=n.playlists[a].segments.length}while(f--){l=n.playlists[a].segments[f];if(!l.resolvedUri){l.resolvedUri=(0,s["default"])(u.resolvedUri,l.uri)}if(l.key&&!l.key.resolvedUri){l.key.resolvedUri=(0,s["default"])(u.resolvedUri,l.key.uri)}if(l.map&&!l.map.resolvedUri){l.map.resolvedUri=(0,s["default"])(u.resolvedUri,l.map.uri)}}i=true}}return i?n:null};var m=function e(t,r,i){var n=this;var a=this;var l=undefined;var d=undefined;var h=undefined;var m=undefined;e.prototype.constructor.call(this);this.hls_=r;if(!t){throw new Error("A non-empty playlist URL is required")}h=function(e,t,r){a.setBandwidth(d||e);d=null;if(r){a.state=r}a.error={playlist:a.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:e.status>=500?4:2};a.trigger("error")};m=function(e,t){var r=undefined;var i=undefined;var n=undefined;a.setBandwidth(d||e);d=null;a.state="HAVE_METADATA";r=new f["default"].Parser;r.push(e.responseText);r.end();r.manifest.uri=t;r.manifest.attributes=r.manifest.attributes||{};n=p(a.master,r.manifest);i=(r.manifest.targetDuration||10)*1e3;a.targetDuration=r.manifest.targetDuration;if(n){a.master=n;a.media_=a.master.playlists[r.manifest.uri]}else{i/=2;a.trigger("playlistunchanged")}if(!a.media().endList){c["default"].clearTimeout(l);l=c["default"].setTimeout((function(){a.trigger("mediaupdatetimeout")}),i)}a.trigger("loadedplaylist")};a.state="HAVE_NOTHING";a.dispose=function(){a.stopRequest();c["default"].clearTimeout(l);a.off()};a.stopRequest=function(){if(d){var e=d;d=null;e.onreadystatechange=null;e.abort()}};a.enabledPlaylists_=function(){return a.master.playlists.filter(u.isEnabled).length};a.isLowestEnabledRendition_=function(){if(a.master.playlists.length===1){return true}var e=a.media();var t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return a.master.playlists.filter((function(e){var r=(0,u.isEnabled)(e);if(!r){return false}return(e.attributes.BANDWIDTH||0)<t})).length===0};a.isFinalRendition_=function(){return a.master.playlists.filter(u.isEnabled).length===1};a.media=function(e){var t=a.state;var r=undefined;if(!e){return a.media_}if(a.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+a.state)}if(typeof e==="string"){if(!a.master.playlists[e]){throw new Error("Unknown playlist URI: "+e)}e=a.master.playlists[e]}r=!a.media_||e.uri!==a.media_.uri;if(a.master.playlists[e.uri].endList){if(d){d.onreadystatechange=null;d.abort();d=null}a.state="HAVE_METADATA";a.media_=e;if(r){a.trigger("mediachanging");a.trigger("mediachange")}return}if(!r){return}a.state="SWITCHING_MEDIA";if(d){if((0,s["default"])(a.master.uri,e.uri)===d.url){return}d.onreadystatechange=null;d.abort();d=null}if(this.media_){this.trigger("mediachanging")}d=this.hls_.xhr({uri:(0,s["default"])(a.master.uri,e.uri),withCredentials:i},(function(r,i){if(!d){return}if(r){return h(d,e.uri,t)}m(i,e.uri);if(t==="HAVE_MASTER"){a.trigger("loadedmetadata")}else{a.trigger("mediachange")}}))};a.setBandwidth=function(e){a.bandwidth=e.bandwidth};a.on("mediaupdatetimeout",(function(){if(a.state!=="HAVE_METADATA"){return}a.state="HAVE_CURRENT_METADATA";d=this.hls_.xhr({uri:(0,s["default"])(a.master.uri,a.media().uri),withCredentials:i},(function(e,t){if(!d){return}if(e){return h(d,a.media().uri,"HAVE_METADATA")}m(d,a.media().uri)}))}));a.pause=function(){a.stopRequest();c["default"].clearTimeout(l);if(a.state==="HAVE_NOTHING"){a.started=false}if(a.state==="SWITCHING_MEDIA"){if(a.media_){a.state="HAVE_METADATA"}else{a.state="HAVE_MASTER"}}else if(a.state==="HAVE_CURRENT_METADATA"){a.state="HAVE_METADATA"}};a.load=function(e){var t=a.media();c["default"].clearTimeout(l);if(e){var r=t?t.targetDuration/2*1e3:5*1e3;l=c["default"].setTimeout(a.load.bind(null,false),r);return}if(!a.started){a.start();return}if(t&&!t.endList){a.trigger("mediaupdatetimeout")}else{a.trigger("loadedplaylist")}};a.start=function(){a.started=true;d=n.hls_.xhr({uri:t,withCredentials:i},(function(e,r){var i=undefined;var n=undefined;var u=undefined;if(!d){return}d=null;if(e){a.error={status:r.status,message:"HLS playlist request error at URL: "+t,responseText:r.responseText,code:2};if(a.state==="HAVE_NOTHING"){a.started=false}return a.trigger("error")}i=new f["default"].Parser;i.push(r.responseText);i.end();a.state="HAVE_MASTER";i.manifest.uri=t;if(i.manifest.playlists){a.master=i.manifest;u=a.master.playlists.length;while(u--){n=a.master.playlists[u];a.master.playlists[n.uri]=n;n.resolvedUri=(0,s["default"])(a.master.uri,n.uri);if(!n.attributes){n.attributes={};o.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}["AUDIO","SUBTITLES"].forEach((function(e){for(var t in a.master.mediaGroups[e]){for(var r in a.master.mediaGroups[e][t]){var i=a.master.mediaGroups[e][t][r];if(i.uri){i.resolvedUri=(0,s["default"])(a.master.uri,i.uri)}}}}));a.trigger("loadedplaylist");if(!d){a.media(i.manifest.playlists[0])}return}a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:c["default"].location.href,playlists:[{uri:t}]};a.master.playlists[t]=a.master.playlists[0];a.master.playlists[0].resolvedUri=t;a.master.playlists[0].attributes=a.master.playlists[0].attributes||{};m(r,t);return a.trigger("loadedmetadata")}))}};m.prototype=new o.EventTarget;r["default"]=m;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./playlist.js":11,"./resolve-url":15,"global/window":32,"m3u8-parser":33}],10:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=e("./config");var a=i(n);var s=e("./playlist");var o=i(s);var u=e("./util/codecs.js");var l=function e(t,r){var i=undefined;if(!t){return""}i=window.getComputedStyle(t);if(!i){return""}return i[r]};var f=function e(t,r){var i=t.slice();t.sort((function(e,t){var n=r(e,t);if(n===0){return i.indexOf(e)-i.indexOf(t)}return n}))};var d=function e(t,r){var i=undefined;var n=undefined;if(t.attributes.BANDWIDTH){i=t.attributes.BANDWIDTH}i=i||window.Number.MAX_VALUE;if(r.attributes.BANDWIDTH){n=r.attributes.BANDWIDTH}n=n||window.Number.MAX_VALUE;return i-n};r.comparePlaylistBandwidth=d;var c=function e(t,r){var i=undefined;var n=undefined;if(t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width){i=t.attributes.RESOLUTION.width}i=i||window.Number.MAX_VALUE;if(r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width){n=r.attributes.RESOLUTION.width}n=n||window.Number.MAX_VALUE;if(i===n&&t.attributes.BANDWIDTH&&r.attributes.BANDWIDTH){return t.attributes.BANDWIDTH-r.attributes.BANDWIDTH}return i-n};r.comparePlaylistResolution=c;var h=function e(t,r,i,n){var s=t.playlists.map((function(e){var t=undefined;var r=undefined;var i=undefined;t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width;r=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;i=e.attributes.BANDWIDTH;i=i||window.Number.MAX_VALUE;return{bandwidth:i,width:t,height:r,playlist:e}}));f(s,(function(e,t){return e.bandwidth-t.bandwidth}));s=s.filter((function(e){return o["default"].isEnabled(e.playlist)}));var u=s.filter((function(e){return e.bandwidth*a["default"].BANDWIDTH_VARIANCE<r}));var l=u[u.length-1];var d=u.filter((function(e){return e.bandwidth===l.bandwidth}))[0];var c=u.filter((function(e){return e.width&&e.height}));f(c,(function(e,t){return e.width-t.width}));var h=c.filter((function(e){return e.width===i&&e.height===n}));l=h[h.length-1];var p=h.filter((function(e){return e.bandwidth===l.bandwidth}))[0];var m=undefined;var v=undefined;var g=undefined;if(!p){m=c.filter((function(e){return e.width>i||e.height>n}));v=m.filter((function(e){return e.width===m[0].width&&e.height===m[0].height}));l=v[v.length-1];g=v.filter((function(e){return e.bandwidth===l.bandwidth}))[0]}return(g||p||d||s[0]).playlist};r.simpleSelector=h;var p=function e(){return h(this.playlists.master,this.systemBandwidth,parseInt(l(this.tech_.el(),"width"),10),parseInt(l(this.tech_.el(),"height"),10))};r.lastBandwidthSelector=p;var m=function e(t){var r=-1;if(t<0||t>1){throw new Error("Moving average bandwidth decay must be between 0 and 1.")}return function(){if(r<0){r=this.systemBandwidth}r=t*this.systemBandwidth+(1-t)*r;return h(this.playlists.master,r,parseInt(l(this.tech_.el(),"width"),10),parseInt(l(this.tech_.el(),"height"),10))}};r.movingAverageBandwidthSelector=m;var v=function e(t){var r=t.master;var i=t.currentTime;var n=t.bandwidth;var a=t.duration;var s=t.segmentDuration;var u=t.timeUntilRebuffer;var l=t.currentTimeline;var c=t.syncController;var h=r.playlists.filter((function(e){return o["default"].isEnabled(e)&&o["default"].hasAttribute("BANDWIDTH",e)}));var p=h.map((function(e){var t=c.getSyncPoint(e,a,l,i);var r=t?1:2;var f=o["default"].estimateSegmentRequestTime(s,n,e);var d=f*r-u;return{playlist:e,rebufferingImpact:d}}));var m=p.filter((function(e){return e.rebufferingImpact<=0}));f(m,(function(e,t){return d(t.playlist,e.playlist)}));if(m.length){return m[0]}f(p,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact}));return p[0]||null};r.minRebufferMaxBandwidthSelector=v;var g=function e(){var t=this.playlists.master.playlists.filter(o["default"].isEnabled);f(t,(function(e,t){return d(e,t)}));var r=t.filter((function(e){return(0,u.parseCodecs)(e.attributes.CODECS).videoCodec}));return r[0]||null};r.lowestBitrateCompatibleVariantSelector=g},{"./config":3,"./playlist":11,"./util/codecs.js":19}],11:[function(e,t,r){(function(t){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var a=e("global/window");var s=i(a);var o={UNSAFE_LIVE_SEGMENTS:3};var u=function e(t,r){var i=0;var n=r-t.mediaSequence;var a=t.segments[n];if(a){if(typeof a.start!=="undefined"){return{result:a.start,precise:true}}if(typeof a.end!=="undefined"){return{result:a.end-a.duration,precise:true}}}while(n--){a=t.segments[n];if(typeof a.end!=="undefined"){return{result:i+a.end,precise:true}}i+=a.duration;if(typeof a.start!=="undefined"){return{result:i+a.start,precise:true}}}return{result:i,precise:false}};var l=function e(t,r){var i=0;var n=undefined;var a=r-t.mediaSequence;for(;a<t.segments.length;a++){n=t.segments[a];if(typeof n.start!=="undefined"){return{result:n.start-i,precise:true}}i+=n.duration;if(typeof n.end!=="undefined"){return{result:n.end-i,precise:true}}}return{result:-1,precise:false}};var f=function e(t,r,i){var n=undefined;var a=undefined;if(typeof r==="undefined"){r=t.mediaSequence+t.segments.length}if(r<t.mediaSequence){return 0}n=u(t,r);if(n.precise){return n.result}a=l(t,r);if(a.precise){return a.result}return n.result+i};var d=function e(t,r,i){if(!t){return 0}if(typeof i!=="number"){i=0}if(typeof r==="undefined"){if(t.totalDuration){return t.totalDuration}if(!t.endList){return s["default"].Infinity}}return f(t,r,i)};r.duration=d;var c=function e(t,r,i){var n=0;if(r>i){var a=[i,r];r=a[0];i=a[1]}if(r<0){for(var s=r;s<Math.min(0,i);s++){n+=t.targetDuration}r=0}for(var s=r;s<i;s++){n+=t.segments[s].duration}return n};r.sumDurations=c;var h=function e(t,r,i){if(!t||!t.segments){return null}if(t.endList){return d(t)}if(r===null){return null}r=r||0;var n=i?Math.max(0,t.segments.length-o.UNSAFE_LIVE_SEGMENTS):Math.max(0,t.segments.length);return f(t,t.mediaSequence+n,r)};r.playlistEnd=h;var p=function e(t,r){var i=true;var a=r||0;var s=h(t,r,i);if(s===null){return(0,n.createTimeRange)()}return(0,n.createTimeRange)(a,s)};r.seekable=p;var m=function e(t){return t-Math.floor(t)===0};var v=function e(t,r){if(m(r)){return r+t*.1}var i=r.toString().split(".")[1].length;for(var n=1;n<=i;n++){var a=Math.pow(10,n);var s=r*a;if(m(s)||n===i){return(s+t)/a}}};var g=v.bind(null,1);var y=v.bind(null,-1);var _=function e(t,r,i,n){var a=undefined;var s=undefined;var o=t.segments.length;var u=r-n;if(u<0){if(i>0){for(a=i-1;a>=0;a--){s=t.segments[a];u+=y(s.duration);if(u>0){return{mediaIndex:a,startTime:n-c(t,i,a)}}}}return{mediaIndex:0,startTime:r}}if(i<0){for(a=i;a<0;a++){u-=t.targetDuration;if(u<0){return{mediaIndex:0,startTime:r}}}i=0}for(a=i;a<o;a++){s=t.segments[a];u-=g(s.duration);if(u<0){return{mediaIndex:a,startTime:n+c(t,i,a)}}}return{mediaIndex:o-1,startTime:r}};r.getMediaInfoForTime=_;var b=function e(t){return t.excludeUntil&&t.excludeUntil>Date.now()};r.isBlacklisted=b;var T=function e(t){var r=b(t);return!t.disabled&&!r};r.isEnabled=T;var S=function e(t){for(var r=0;r<t.segments.length;r++){if(t.segments[r].key){return true}}return false};r.isAes=S;var w=function e(t){for(var r=0;r<t.segments.length;r++){if(t.segments[r].map){return true}}return false};r.isFmp4=w;var k=function e(t,r){return r.attributes&&r.attributes[t]};r.hasAttribute=k;var E=function e(t,r,i){var n=arguments.length<=3||arguments[3]===undefined?0:arguments[3];if(!k("BANDWIDTH",i)){return NaN}var a=t*i.attributes.BANDWIDTH;return(a-n*8)/r};r.estimateSegmentRequestTime=E;o.duration=d;o.seekable=p;o.getMediaInfoForTime=_;o.isEnabled=T;o.isBlacklisted=b;o.playlistEnd=h;o.isAes=S;o.isFmp4=w;o.hasAttribute=k;o.estimateSegmentRequestTime=E;r["default"]=o}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"global/window":32}],12:[function(e,t,r){(function(e){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){var r=[];var i=true;var n=false;var a=undefined;try{for(var s=e[Symbol.iterator](),o;!(i=(o=s.next()).done);i=true){r.push(o.value);if(t&&r.length===t)break}}catch(u){n=true;a=u}finally{try{if(!i&&s["return"])s["return"]()}finally{if(n)throw a}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function n(e){return e&&e.__esModule?e:{default:e}}var a=typeof window!=="undefined"?window["videojs"]:typeof e!=="undefined"?e["videojs"]:null;var s=n(a);var o=1/30;var u=function e(t,r){var n=i(r,2);var a=n[0];var s=n[1];return Math.min(Math.max(a,t),s)};var l=function e(t,r){var i=[];var n=undefined;if(t&&t.length){for(n=0;n<t.length;n++){if(r(t.start(n),t.end(n))){i.push([t.start(n),t.end(n)])}}}return s["default"].createTimeRanges(i)};var f=function e(t,r){return l(t,(function(e,t){return e-o<=r&&t+o>=r}))};var d=function e(t,r){return l(t,(function(e){return e-o>=r}))};var c=function e(t){if(t.length<2){return s["default"].createTimeRanges()}var r=[];for(var i=1;i<t.length;i++){var n=t.end(i-1);var a=t.start(i);r.push([n,a])}return s["default"].createTimeRanges(r)};var h=function e(t,r){var i=undefined;var n=undefined;var a=undefined;var s=[];var o=[];var u=function e(t){return t[0]<=a&&t[1]>=a};if(t){for(i=0;i<t.length;i++){n=t.start(i);a=t.end(i);o.push([n,a])}}if(r){for(i=0;i<r.length;i++){n=r.start(i);a=r.end(i);if(o.some(u)){continue}s.push(a)}}if(s.length!==1){return null}return s[0]};var p=function e(t,r){var i=null;var n=null;var a=0;var o=[];var u=[];if(!t||!t.length||!r||!r.length){return s["default"].createTimeRange()}var l=t.length;while(l--){o.push({time:t.start(l),type:"start"});o.push({time:t.end(l),type:"end"})}l=r.length;while(l--){o.push({time:r.start(l),type:"start"});o.push({time:r.end(l),type:"end"})}o.sort((function(e,t){return e.time-t.time}));for(l=0;l<o.length;l++){if(o[l].type==="start"){a++;if(a===2){i=o[l].time}}else if(o[l].type==="end"){a--;if(a===1){n=o[l].time}}if(i!==null&&n!==null){u.push([i,n]);i=null;n=null}}return s["default"].createTimeRanges(u)};var m=function e(t,r,i,n){var a=r.end(0)-r.start(0);var s=t.end(0)-t.start(0);var o=a-s;var u=p(t,n);var l=p(r,n);var f=0;var d=0;var c=u.length;while(c--){f+=u.end(c)-u.start(c);if(u.start(c)===i){f+=o}}c=l.length;while(c--){d+=l.end(c)-l.start(c)}return Math.max(f,d)/a*100};var v=function e(t,r,i,n){var a=t+r;var o=s["default"].createTimeRanges([[t,a]]);var l=s["default"].createTimeRanges([[u(t,[i,a]),a]]);if(l.start(0)===l.end(0)){return 0}var f=m(l,o,i,n);if(isNaN(f)||f===Infinity||f===-Infinity){return 0}return f};var g=function e(t){var r=[];if(!t||!t.length){return""}for(var i=0;i<t.length;i++){r.push(t.start(i)+" => "+t.end(i))}return r.join(", ")};var y=function e(t,r){var i=arguments.length<=2||arguments[2]===undefined?1:arguments[2];var n=t.length?t.end(t.length-1):0;return(n-r)/i};r["default"]={findRange:f,findNextRange:d,findGaps:c,findSoleUncommonTimeRangesEnd:h,getSegmentBufferedPercent:v,TIME_FUDGE_FACTOR:o,printableRange:g,timeUntilRebuffer:y};t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],13:[function(e,t,r){(function(e){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=typeof window!=="undefined"?window["videojs"]:typeof e!=="undefined"?e["videojs"]:null;var a=i(n);var s={errorInterval:30,getSource:function e(t){var r=this.tech({IWillNotUseThisInPlugins:true});var i=r.currentSource_;return t(i)}};var o=function e(t,r){var i=0;var n=0;var o=a["default"].mergeOptions(s,r);t.ready((function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var u=function e(){if(n){t.currentTime(n)}};var l=function e(r){if(r===null||r===undefined){return}n=t.duration()!==Infinity&&t.currentTime()||0;t.one("loadedmetadata",u);t.src(r);t.trigger({type:"usage",name:"hls-error-reload"});t.play()};var f=function e(){if(Date.now()-i<o.errorInterval*1e3){t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!o.getSource||typeof o.getSource!=="function"){a["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}i=Date.now();return o.getSource.call(t,l)};var d=function e(){t.off("loadedmetadata",u);t.off("error",f);t.off("dispose",e)};var c=function r(i){d();e(t,i)};t.on("error",f);t.on("dispose",d);t.reloadSourceOnError=c};var u=function e(t){o(this,t)};r["default"]=u;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],14:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=e("./playlist.js");var a=function e(t,r,i,a){var s=t.master.playlists[r];var o=(0,n.isBlacklisted)(s);var u=(0,n.isEnabled)(s);if(typeof a==="undefined"){return u}if(a){delete s.disabled}else{s.disabled=true}if(a!==u&&!o){i();if(a){t.trigger("renditionenabled")}else{t.trigger("renditiondisabled")}}return a};var s=function e(t,r,n){i(this,e);var s=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(r.attributes.RESOLUTION){var o=r.attributes.RESOLUTION;this.width=o.width;this.height=o.height}this.bandwidth=r.attributes.BANDWIDTH;this.id=n;this.enabled=a.bind(this,t.playlists,r.uri,s)};var o=function e(t){var r=t.playlists;t.representations=function(){return r.master.playlists.filter((function(e){return!(0,n.isBlacklisted)(e)})).map((function(e,r){return new s(t,e,e.uri)}))}};r["default"]=o;t.exports=r["default"]},{"./playlist.js":11}],15:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=e("url-toolkit");var a=i(n);var s=e("global/window");var o=i(s);var u=function e(t,r){if(/^[a-z]+:/i.test(r)){return r}if(!/\/\//i.test(t)){t=a["default"].buildAbsoluteURL(o["default"].location.href,t)}return a["default"].buildAbsoluteURL(t,r)};r["default"]=u;t.exports=r["default"]},{"global/window":32,"url-toolkit":63}],16:[function(e,t,r){(function(t){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var n=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e("./playlist");var l=a(u);var f=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var d=a(f);var c=e("./source-updater");var h=a(c);var p=e("./config");var m=a(p);var v=e("global/window");var g=a(v);var y=e("videojs-contrib-media-sources/es5/remove-cues-from-track.js");var _=a(y);var b=e("./bin-utils");var T=e("./media-segment-request");var S=e("./ranges");var w=e("./playlist-selectors");var k=500;var E=function e(t,r,i){if(!t||!r){return false}var n=t.segments;var a=i===n.length;return t.endList&&r.readyState==="open"&&a};var C=function e(t){return typeof t==="number"&&isFinite(t)};var A=function e(t,r,i){if(t!=="main"||!r||!i){return null}if(!i.containsAudio&&!i.containsVideo){return"Neither audio nor video found in segment."}if(r.containsVideo&&!i.containsVideo){return"Only audio found in segment when we expected video."+" We can't switch to audio only from a stream that had video."+" To get rid of this message, please add codec information to the manifest."}if(!r.containsVideo&&i.containsVideo){return"Video found in segment when we expected only audio."+" We can't switch to a stream with video from an audio only stream."+" To get rid of this message, please add codec information to the manifest."}return null};r.illegalMediaSwitch=A;var O=function(e){o(t,e);function t(e){var r=this;var i=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];s(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);if(!e){throw new TypeError("Initialization settings are required")}if(typeof e.currentTime!=="function"){throw new TypeError("No currentTime getter specified")}if(!e.mediaSource){throw new TypeError("No MediaSource specified")}this.state="INIT";this.bandwidth=e.bandwidth;this.throughput={rate:0,count:0};this.roundTrip=NaN;this.resetStats_();this.mediaIndex=null;this.hasPlayed_=e.hasPlayed;this.currentTime_=e.currentTime;this.seekable_=e.seekable;this.seeking_=e.seeking;this.duration_=e.duration;this.mediaSource_=e.mediaSource;this.hls_=e.hls;this.loaderType_=e.loaderType;this.startingMedia_=void 0;this.segmentMetadataTrack_=e.segmentMetadataTrack;this.goalBufferLength_=e.goalBufferLength;this.checkBufferTimeout_=null;this.error_=void 0;this.currentTimeline_=-1;this.pendingSegment_=null;this.mimeType_=null;this.sourceUpdater_=null;this.xhrOptions_=null;this.activeInitSegmentId_=null;this.initSegments_={};this.decrypter_=e.decrypter;this.syncController_=e.syncController;this.syncPoint_={segmentIndex:0,time:0};this.syncController_.on("syncinfoupdate",(function(){return r.trigger("syncinfoupdate")}));this.mediaSource_.addEventListener("sourceopen",(function(){return r.ended_=false}));this.fetchAtBuffer_=false;if(i.debug){this.logger_=d["default"].log.bind(d["default"],"segment-loader",this.loaderType_,"->")}}i(t,[{key:"resetStats_",value:function e(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0}},{key:"dispose",value:function e(){this.state="DISPOSED";this.pause();this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose()}this.resetStats_()}},{key:"abort",value:function e(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null}return}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_()}}},{key:"abort_",value:function e(){if(this.pendingSegment_){this.pendingSegment_.abortRequests()}this.pendingSegment_=null}},{key:"error",value:function e(t){if(typeof t!=="undefined"){this.error_=t}this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function e(){this.ended_=true;this.pause();this.trigger("ended")}},{key:"buffered_",value:function e(){if(!this.sourceUpdater_){return d["default"].createTimeRanges()}return this.sourceUpdater_.buffered()}},{key:"initSegment",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(!t){return null}var i=(0,b.initSegmentId)(t);var n=this.initSegments_[i];if(r&&!n&&t.bytes){this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes}}return n||t}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function e(){this.monitorBuffer_();if(!this.playlist_){return}this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return}this.state="READY"}},{key:"init_",value:function e(){this.state="READY";this.sourceUpdater_=new h["default"](this.mediaSource_,this.mimeType_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!t){return}var i=this.playlist_;var n=this.pendingSegment_;this.playlist_=t;this.xhrOptions_=r;if(!this.hasPlayed_()){t.syncInfo={mediaSequence:t.mediaSequence,time:0}}this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!i||i.uri!==t.uri){if(this.mediaIndex!==null){this.resyncLoader()}return}var a=t.mediaSequence-i.mediaSequence;this.logger_("mediaSequenceDiff",a);if(this.mediaIndex!==null){this.mediaIndex-=a}if(n){n.mediaIndex-=a;if(n.mediaIndex>=0){n.segment=t.segments[n.mediaIndex]}}this.syncController_.saveExpiredSegmentInfo(i,t)}},{key:"pause",value:function e(){if(this.checkBufferTimeout_){g["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null}}},{key:"paused",value:function e(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function e(t){if(this.mimeType_){return}this.mimeType_=t;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}}},{key:"resetEverything",value:function e(){this.ended_=false;this.resetLoader();this.remove(0,this.duration_());this.trigger("reseteverything")}},{key:"resetLoader",value:function e(){this.fetchAtBuffer_=false;this.resyncLoader()}},{key:"resyncLoader",value:function e(){this.mediaIndex=null;this.syncPoint_=null;this.abort()}},{key:"remove",value:function e(t,r){if(this.sourceUpdater_){this.sourceUpdater_.remove(t,r)}(0,_["default"])(t,r,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function e(){if(this.checkBufferTimeout_){g["default"].clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=g["default"].setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function e(){if(this.state==="READY"){this.fillBuffer_()}if(this.checkBufferTimeout_){g["default"].clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=g["default"].setTimeout(this.monitorBufferTick_.bind(this),k)}},{key:"fillBuffer_",value:function e(){if(this.sourceUpdater_.updating()){return}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!t){return}var r=E(this.playlist_,this.mediaSource_,t.mediaIndex);if(r){this.endOfStream();return}if(t.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()){return}if(t.timeline!==this.currentTimeline_||t.startOfSegment!==null&&t.startOfSegment<this.sourceUpdater_.timestampOffset()){this.syncController_.reset();t.timestampOffset=t.startOfSegment}this.loadSegment_(t)}},{key:"checkBuffer_",value:function e(t,r,i,n,a,s){var o=0;var u=undefined;if(t.length){o=t.end(t.length-1)}var f=Math.max(0,o-a);if(!r.segments.length){return null}if(f>=this.goalBufferLength_()){return null}if(!n&&f>=1){return null}this.logger_("checkBuffer_","mediaIndex:",i,"hasPlayed:",n,"currentTime:",a,"syncPoint:",s,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",f);if(s===null){i=this.getSyncSegmentCandidate_(r);this.logger_("getSync","mediaIndex:",i);return this.generateSegmentInfo_(r,i,null,true)}if(i!==null){this.logger_("walkForward","mediaIndex:",i+1);var d=r.segments[i];if(d&&d.end){u=d.end}else{u=o}return this.generateSegmentInfo_(r,i+1,u,false)}if(this.fetchAtBuffer_){var c=l["default"].getMediaInfoForTime(r,o,s.segmentIndex,s.time);i=c.mediaIndex;u=c.startTime}else{var c=l["default"].getMediaInfoForTime(r,a,s.segmentIndex,s.time);i=c.mediaIndex;u=c.startTime}this.logger_("getMediaIndexForTime","mediaIndex:",i,"startOfSegment:",u);return this.generateSegmentInfo_(r,i,u,false)}},{key:"getSyncSegmentCandidate_",value:function e(t){var r=this;if(this.currentTimeline_===-1){return 0}var i=t.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===r.currentTimeline_}));if(i.length){return i[Math.min(i.length-1,1)].segmentIndex}return Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function e(t,r,i,n){if(r<0||r>=t.segments.length){return null}var a=t.segments[r];return{requestId:"segment-loader-"+Math.random(),uri:a.resolvedUri,mediaIndex:r,isSyncRequest:n,startOfSegment:i,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:a.timeline,duration:a.duration,segment:a}}},{key:"abortRequestEarly_",value:function e(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return false}if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3){return false}var r=this.currentTime_();var i=t.bandwidth;var n=this.pendingSegment_.duration;var a=l["default"].estimateSegmentRequestTime(n,i,this.playlist_,t.bytesReceived);var s=(0,S.timeUntilRebuffer)(this.buffered_(),r,this.hls_.tech_.playbackRate())-1;if(a<=s){return false}var o=(0,w.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:r,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o){return}var u=a-s;var f=u-o.rebufferingImpact;var d=.5;if(s<=S.TIME_FUDGE_FACTOR){d=1}if(!o.playlist||o.playlist.uri===this.playlist_.uri||f<d){return false}this.bandwidth=o.playlist.attributes.BANDWIDTH*m["default"].BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return true}},{key:"handleProgress_",value:function e(t,r){if(!this.pendingSegment_||r.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(r.stats)){return}this.trigger("progress")}},{key:"loadSegment_",value:function e(t){this.state="WAITING";this.pendingSegment_=t;this.trimBackBuffer_(t);t.abortRequests=(0,T.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function e(t){var r=this.seekable_();var i=this.currentTime_();var n=0;if(r.length&&r.start(0)>0&&r.start(0)<i){n=r.start(0)}else{n=i-30}if(n>0){this.remove(0,n)}}},{key:"createSimplifiedSegmentObj_",value:function e(t){var r=t.segment;var i={resolvedUri:r.resolvedUri,byterange:r.byterange,requestId:t.requestId};if(r.key){var n=r.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);i.key={resolvedUri:r.key.resolvedUri,iv:n}}if(r.map){i.map=this.initSegment(r.map)}return i}},{key:"segmentRequestFinished_",value:function e(t,r){this.mediaRequests+=1;if(r.stats){this.mediaBytesTransferred+=r.stats.bytesReceived;this.mediaTransferDuration+=r.stats.roundTripTime}if(!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(r.requestId!==this.pendingSegment_.requestId){return}if(t){this.pendingSegment_=null;this.state="READY";if(t.code===T.REQUEST_ERRORS.ABORTED){this.mediaRequestsAborted+=1;return}this.pause();if(t.code===T.REQUEST_ERRORS.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1;this.error(t);this.trigger("error");return}this.bandwidth=r.stats.bandwidth;this.roundTrip=r.stats.roundTripTime;if(r.map){r.map=this.initSegment(r.map,true)}this.processSegmentResponse_(r)}},{key:"processSegmentResponse_",value:function e(t){var r=this.pendingSegment_;r.bytes=t.bytes;if(t.map){r.segment.map.bytes=t.map.bytes}r.endOfAllRequests=t.endOfAllRequests;this.handleSegment_()}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_){this.state="READY";return}var r=this.pendingSegment_;var i=r.segment;var n=this.syncController_.probeSegmentInfo(r);if(typeof this.startingMedia_==="undefined"&&n&&(n.containsAudio||n.containsVideo)){this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo}}var a=A(this.loaderType_,this.startingMedia_,n);if(a){this.error({message:a});this.trigger("error");return}this.state="APPENDING";if(r.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}if(r.timestampOffset!==null&&r.timestampOffset!==this.sourceUpdater_.timestampOffset()){this.sourceUpdater_.timestampOffset(r.timestampOffset);this.trigger("timestampoffset")}if(i.map){(function(){var e=(0,b.initSegmentId)(i.map);if(!t.activeInitSegmentId_||t.activeInitSegmentId_!==e){var r=t.initSegment(i.map);t.sourceUpdater_.appendBuffer(r.bytes,(function(){t.activeInitSegmentId_=e}))}})()}r.byteLength=r.bytes.byteLength;if(typeof i.start==="number"&&typeof i.end==="number"){this.mediaSecondsLoaded+=i.end-i.start}else{this.mediaSecondsLoaded+=i.duration}this.sourceUpdater_.appendBuffer(r.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function e(){this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_);if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_()}return}var t=this.pendingSegment_;var r=t.segment;var i=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(t);this.addSegmentMetadataCue_(t);this.state="READY";this.mediaIndex=t.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=t.timeline;this.trigger("syncinfoupdate");if(r.end&&this.currentTime_()-r.end>t.playlist.targetDuration*3){this.resetEverything();return}if(i){this.trigger("bandwidthupdate")}this.trigger("progress");var n=E(t.playlist,this.mediaSource_,t.mediaIndex+1);if(n){this.endOfStream()}if(!this.paused()){this.monitorBuffer_()}}},{key:"recordThroughput_",value:function e(t){var r=this.throughput.rate;var i=Date.now()-t.endOfAllRequests+1;var n=Math.floor(t.byteLength/i*8*1e3);this.throughput.rate+=(n-r)/++this.throughput.count}},{key:"logger_",value:function e(){}},{key:"addSegmentMetadataCue_",value:function e(t){if(!this.segmentMetadataTrack_){return}var r=t.segment;var i=r.start;var n=r.end;if(!C(i)||!C(n)){return}(0,_["default"])(i,n,this.segmentMetadataTrack_);var a=g["default"].WebKitDataCue||g["default"].VTTCue;var s={uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:i,end:n};var o=JSON.stringify(s);var u=new a(i,n,o);u.value=s;this.segmentMetadataTrack_.addCue(u)}}]);return t}(d["default"].EventTarget);r["default"]=O}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./bin-utils":2,"./config":3,"./media-segment-request":7,"./playlist":11,"./playlist-selectors":10,"./ranges":12,"./source-updater":17,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],17:[function(e,t,r){(function(e){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=typeof window!=="undefined"?window["videojs"]:typeof e!=="undefined"?e["videojs"]:null;var o=n(s);var u=function e(){};var l=function(){function e(t,r){var i=this;a(this,e);var n=function e(){i.sourceBuffer_=t.addSourceBuffer(r);i.onUpdateendCallback_=function(){var e=i.pendingCallback_;i.pendingCallback_=null;if(e){e()}i.runCallback_()};i.sourceBuffer_.addEventListener("updateend",i.onUpdateendCallback_);i.runCallback_()};this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=t;this.processedAppend_=false;if(t.readyState==="closed"){t.addEventListener("sourceopen",n)}else{n()}}i(e,[{key:"abort",value:function e(t){var r=this;if(this.processedAppend_){this.queueCallback_((function(){r.sourceBuffer_.abort()}),t)}}},{key:"appendBuffer",value:function e(t,r){var i=this;this.processedAppend_=true;this.queueCallback_((function(){i.sourceBuffer_.appendBuffer(t)}),r)}},{key:"buffered",value:function e(){if(!this.sourceBuffer_){return o["default"].createTimeRanges()}return this.sourceBuffer_.buffered}},{key:"remove",value:function e(t,r){var i=this;if(this.processedAppend_){this.queueCallback_((function(){i.sourceBuffer_.remove(t,r)}),u)}}},{key:"updating",value:function e(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function e(t){var r=this;if(typeof t!=="undefined"){this.queueCallback_((function(){r.sourceBuffer_.timestampOffset=t}));this.timestampOffset_=t}return this.timestampOffset_}},{key:"queueCallback_",value:function e(t,r){this.callbacks_.push([t.bind(this),r]);this.runCallback_()}},{key:"runCallback_",value:function e(){var t=undefined;if(!this.updating()&&this.callbacks_.length){t=this.callbacks_.shift();this.pendingCallback_=t[1];t[0]()}}},{key:"dispose",value:function e(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);if(this.sourceBuffer_&&this.mediaSource.readyState==="open"){this.sourceBuffer_.abort()}}}]);return e}();r["default"]=l;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],18:[function(e,t,r){(function(t){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var n=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e("mux.js/lib/mp4/probe");var l=a(u);var f=e("mux.js/lib/tools/ts-inspector.js");var d=e("./playlist");var c=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var h=a(c);var p=[{name:"VOD",run:function e(t,r,i,n,a){if(i!==Infinity){var s={time:0,segmentIndex:0};return s}return null}},{name:"ProgramDateTime",run:function e(t,r,i,n,a){if(t.datetimeToDisplayTime&&r.dateTimeObject){var s=r.dateTimeObject.getTime()/1e3;var o=s+t.datetimeToDisplayTime;var u={time:o,segmentIndex:0};return u}return null}},{name:"Segment",run:function e(t,r,i,n,a){var s=r.segments||[];var o=null;var u=null;a=a||0;for(var l=0;l<s.length;l++){var f=s[l];if(f.timeline===n&&typeof f.start!=="undefined"){var d=Math.abs(a-f.start);if(u!==null&&u<d){break}if(!o||u===null||u>=d){u=d;o={time:f.start,segmentIndex:l}}}}return o}},{name:"Discontinuity",run:function e(t,r,i,n,a){var s=null;a=a||0;if(r.discontinuityStarts&&r.discontinuityStarts.length){var o=null;for(var u=0;u<r.discontinuityStarts.length;u++){var l=r.discontinuityStarts[u];var f=r.discontinuitySequence+u+1;var d=t.discontinuities[f];if(d){var c=Math.abs(a-d.time);if(o!==null&&o<c){break}if(!s||o===null||o>=c){o=c;s={time:d.time,segmentIndex:l}}}}}return s}},{name:"Playlist",run:function e(t,r,i,n,a){if(r.syncInfo){var s={time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence};return s}return null}}];r.syncPointStrategies=p;var m=function(e){o(t,e);function t(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];s(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.inspectCache_=undefined;this.timelines=[];this.discontinuities=[];this.datetimeToDisplayTime=null;if(e.debug){this.logger_=h["default"].log.bind(h["default"],"sync-controller ->")}}i(t,[{key:"getSyncPoint",value:function e(t,r,i,n){var a=this.runStrategies_(t,r,i,n);if(!a.length){return null}return this.selectSyncPoint_(a,{key:"time",value:n})}},{key:"getExpiredTime",value:function e(t,r){if(!t||!t.segments){return null}var i=this.runStrategies_(t,r,t.discontinuitySequence,0);if(!i.length){return null}var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});if(n.segmentIndex>0){n.time*=-1}return Math.abs(n.time+(0,d.sumDurations)(t,n.segmentIndex,0))}},{key:"runStrategies_",value:function e(t,r,i,n){var a=[];for(var s=0;s<p.length;s++){var o=p[s];var u=o.run(this,t,r,i,n);if(u){u.strategy=o.name;a.push({strategy:o.name,syncPoint:u});this.logger_("syncPoint found via <"+o.name+">:",u)}}return a}},{key:"selectSyncPoint_",value:function e(t,r){var i=t[0].syncPoint;var n=Math.abs(t[0].syncPoint[r.key]-r.value);var a=t[0].strategy;for(var s=1;s<t.length;s++){var o=Math.abs(t[s].syncPoint[r.key]-r.value);if(o<n){n=o;i=t[s].syncPoint;a=t[s].strategy}}this.logger_("syncPoint with strategy <"+a+"> chosen: ",i);return i}},{key:"saveExpiredSegmentInfo",value:function e(t,r){var i=r.mediaSequence-t.mediaSequence;for(var n=i-1;n>=0;n--){var a=t.segments[n];if(a&&typeof a.start!=="undefined"){r.syncInfo={mediaSequence:t.mediaSequence+n,time:a.start};this.logger_("playlist sync:",r.syncInfo);this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function e(t){if(!this.datetimeToDisplayTime&&t.dateTimeObject){var r=t.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-r}}},{key:"reset",value:function e(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function e(t){var r=t.segment;var i=t.playlist;var n=undefined;if(r.map){n=this.probeMp4Segment_(t)}else{n=this.probeTsSegment_(t)}if(n){if(this.calculateSegmentTimeMapping_(t,n)){this.saveDiscontinuitySyncInfo_(t);if(!i.syncInfo){i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:r.start}}}}return n}},{key:"probeMp4Segment_",value:function e(t){var r=t.segment;var i=l["default"].timescale(r.map.bytes);var n=l["default"].startTime(i,t.bytes);if(t.timestampOffset!==null){t.timestampOffset-=n}return{start:n,end:n+r.duration}}},{key:"probeTsSegment_",value:function e(t){var r=(0,f.inspect)(t.bytes,this.inspectCache_);var i=undefined;var n=undefined;if(!r){return null}if(r.video&&r.video.length===2){this.inspectCache_=r.video[1].dts;i=r.video[0].dtsTime;n=r.video[1].dtsTime}else if(r.audio&&r.audio.length===2){this.inspectCache_=r.audio[1].dts;i=r.audio[0].dtsTime;n=r.audio[1].dtsTime}return{start:i,end:n,containsVideo:r.video&&r.video.length===2,containsAudio:r.audio&&r.audio.length===2}}},{key:"timestampOffsetForTimeline",value:function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].time}},{key:"calculateSegmentTimeMapping_",value:function e(t,r){var i=t.segment;var n=this.timelines[t.timeline];if(t.timestampOffset!==null){this.logger_("tsO:",t.timestampOffset);n={time:t.startOfSegment,mapping:t.startOfSegment-r.start};this.timelines[t.timeline]=n;this.trigger("timestampoffset");i.start=t.startOfSegment;i.end=r.end+n.mapping}else if(n){i.start=r.start+n.mapping;i.end=r.end+n.mapping}else{return false}return true}},{key:"saveDiscontinuitySyncInfo_",value:function e(t){var r=t.playlist;var i=t.segment;if(i.discontinuity){this.discontinuities[i.timeline]={time:i.start,accuracy:0}}else if(r.discontinuityStarts.length){for(var n=0;n<r.discontinuityStarts.length;n++){var a=r.discontinuityStarts[n];var s=r.discontinuitySequence+n+1;var o=a-t.mediaIndex;var u=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>u){var l=undefined;if(o<0){l=i.start-(0,d.sumDurations)(r,t.mediaIndex,a)}else{l=i.end+(0,d.sumDurations)(r,t.mediaIndex+1,a)}this.discontinuities[s]={time:l,accuracy:u}}}}}},{key:"logger_",value:function e(){}}]);return t}(h["default"].EventTarget);r["default"]=m}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./playlist":11,"mux.js/lib/mp4/probe":57,"mux.js/lib/tools/ts-inspector.js":59}],19:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function e(){var t=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var r={codecCount:0};var i=undefined;r.codecCount=t.split(",").length;r.codecCount=r.codecCount||2;i=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(t);if(i){r.videoCodec=i[2];r.videoObjectTypeIndicator=i[3]}r.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t);r.audioProfile=r.audioProfile&&r.audioProfile[2];return r};r.parseCodecs=i},{}],20:[function(e,t,r){(function(i){Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var a=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("./segment-loader");var f=s(l);var d=typeof window!=="undefined"?window["videojs"]:typeof i!=="undefined"?i["videojs"]:null;var c=s(d);var h=e("global/window");var p=s(h);var m=e("videojs-contrib-media-sources/es5/remove-cues-from-track.js");var v=s(m);var g=e("./bin-utils");var y=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)})));var _=function e(t){return String.fromCharCode.apply(null,t)};var b=function(e){u(t,e);function t(e){var r=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.mediaSource_=null;this.subtitlesTrack_=null}n(t,[{key:"buffered_",value:function e(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return c["default"].createTimeRanges()}var t=this.subtitlesTrack_.cues;var r=t[0].startTime;var i=t[t.length-1].startTime;return c["default"].createTimeRanges([[r,i]])}},{key:"initSegment",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(!t){return null}var i=(0,g.initSegmentId)(t);var n=this.initSegments_[i];if(r&&!n&&t.bytes){var a=y.byteLength+t.bytes.byteLength;var s=new Uint8Array(a);s.set(t.bytes);s.set(y,t.bytes.byteLength);this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:s}}return n||t}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function e(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function e(t){if(typeof t==="undefined"){return this.subtitlesTrack_}this.subtitlesTrack_=t;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}return this.subtitlesTrack_}},{key:"remove",value:function e(t,r){(0,v["default"])(t,r,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function e(){var t=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var r=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);r=this.skipEmptySegments_(r);if(!r){return}if(this.syncController_.timestampOffsetForTimeline(r.timeline)===null){var i=function e(){t.state="READY";if(!t.paused()){t.monitorBuffer_()}};this.syncController_.one("timestampoffset",i);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(r)}},{key:"skipEmptySegments_",value:function e(t){while(t&&t.segment.empty){t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest)}return t}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var r=this.pendingSegment_;var i=r.segment;if(typeof p["default"].WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=function(){var e=function e(){t.handleSegment_()};t.state="WAITING_ON_VTTJS";t.subtitlesTrack_.tech_.one("vttjsloaded",e);t.subtitlesTrack_.tech_.one("vttjserror",(function(){t.subtitlesTrack_.tech_.off("vttjsloaded",e);t.error({message:"Error loading vtt.js"});t.state="READY";t.pause();t.trigger("error")}));return{v:undefined}}();if(typeof n==="object")return n.v}i.requested=true;try{this.parseVTTCues_(r)}catch(Qv){this.error({message:Qv.message});this.state="READY";this.pause();return this.trigger("error")}this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_);if(r.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}r.byteLength=r.bytes.byteLength;this.mediaSecondsLoaded+=i.duration;if(r.cues.length){this.remove(r.cues[0].endTime,r.cues[r.cues.length-1].endTime)}r.cues.forEach((function(e){t.subtitlesTrack_.addCue(e)}));this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function e(t){var r=undefined;var i=false;if(typeof p["default"].TextDecoder==="function"){r=new p["default"].TextDecoder("utf8")}else{r=p["default"].WebVTT.StringDecoder();i=true}var n=new p["default"].WebVTT.Parser(p["default"],p["default"].vttjs,r);t.cues=[];t.timestampmap={MPEGTS:0,LOCAL:0};n.oncue=t.cues.push.bind(t.cues);n.ontimestampmap=function(e){return t.timestampmap=e};n.onparsingerror=function(e){c["default"].log.warn("Error encountered when parsing cues: "+e.message)};if(t.segment.map){var a=t.segment.map.bytes;if(i){a=_(a)}n.parse(a)}var s=t.bytes;if(i){s=_(s)}n.parse(s);n.flush()}},{key:"updateTimeMapping_",value:function e(t,r,i){var n=t.segment;if(!r){return}if(!t.cues.length){n.empty=true;return}var a=t.timestampmap;var s=a.MPEGTS/9e4-a.LOCAL+r.mapping;t.cues.forEach((function(e){e.startTime+=s;e.endTime+=s}));if(!i.syncInfo){var o=t.cues[0].startTime;var u=t.cues[t.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:Math.min(o,u-n.duration)}}}}]);return t}(f["default"]);r["default"]=b;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./bin-utils":2,"./segment-loader":16,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],21:[function(e,t,r){(function(e){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=typeof window!=="undefined"?window["videojs"]:typeof e!=="undefined"?e["videojs"]:null;var a=i(n);var s=function e(){var t=function e(t,r){t=(0,n.mergeOptions)({timeout:45e3},t);var i=e.beforeRequest||a["default"].Hls.xhr.beforeRequest;if(i&&typeof i==="function"){var s=i(t);if(s){t=s}}var o=(0,n.xhr)(t,(function(e,t){var i=o.response;if(!e&&i){o.responseTime=Date.now();o.roundTripTime=o.responseTime-o.requestTime;o.bytesReceived=i.byteLength||i.length;if(!o.bandwidth){o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3)}}if(e&&e.code==="ETIMEDOUT"){o.timedout=true}if(!e&&!o.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0){e=new Error("XHR Failed with a response of: "+(o&&(i||o.responseText)))}r(e,o)}));var u=o.abort;o.abort=function(){o.aborted=true;return u.apply(o,arguments)};o.uri=t.uri;o.requestTime=Date.now();return o};return t};r["default"]=s;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],22:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function e(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]];var r=t[0];var i=t[1];var n=r[4];var a=i[4];var s=undefined;var o=undefined;var u=undefined;var l=[];var f=[];var d=undefined;var c=undefined;var h=undefined;var p=undefined;var m=undefined;var v=undefined;for(s=0;s<256;s++){f[(l[s]=s<<1^(s>>7)*283)^s]=s}for(o=u=0;!n[o];o^=d||1,u=f[u]||1){p=u^u<<1^u<<2^u<<3^u<<4;p=p>>8^p&255^99;n[o]=p;a[p]=o;h=l[c=l[d=l[o]]];v=h*16843009^c*65537^d*257^o*16843008;m=l[p]*257^p*16843008;for(s=0;s<4;s++){r[s][o]=m=m<<24^m>>>8;i[s][p]=v=v<<24^v>>>8}}for(s=0;s<5;s++){r[s]=r[s].slice(0);i[s]=i[s].slice(0)}return t};var s=null;var o=function(){function e(t){n(this,e);if(!s){s=a()}this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var r=undefined;var i=undefined;var o=undefined;var u=undefined;var l=undefined;var f=this._tables[0][4];var d=this._tables[1];var c=t.length;var h=1;if(c!==4&&c!==6&&c!==8){throw new Error("Invalid aes key size")}u=t.slice(0);l=[];this._key=[u,l];for(r=c;r<4*c+28;r++){o=u[r-1];if(r%c===0||c===8&&r%c===4){o=f[o>>>24]<<24^f[o>>16&255]<<16^f[o>>8&255]<<8^f[o&255];if(r%c===0){o=o<<8^o>>>24^h<<24;h=h<<1^(h>>7)*283}}u[r]=u[r-c]^o}for(i=0;r;i++,r--){o=u[i&3?r:r-4];if(r<=4||i<4){l[i]=o}else{l[i]=d[0][f[o>>>24]]^d[1][f[o>>16&255]]^d[2][f[o>>8&255]]^d[3][f[o&255]]}}}i(e,[{key:"decrypt",value:function e(t,r,i,n,a,s){var o=this._key[1];var u=t^o[0];var l=n^o[1];var f=i^o[2];var d=r^o[3];var c=undefined;var h=undefined;var p=undefined;var m=o.length/4-2;var v=undefined;var g=4;var y=this._tables[1];var _=y[0];var b=y[1];var T=y[2];var S=y[3];var w=y[4];for(v=0;v<m;v++){c=_[u>>>24]^b[l>>16&255]^T[f>>8&255]^S[d&255]^o[g];h=_[l>>>24]^b[f>>16&255]^T[d>>8&255]^S[u&255]^o[g+1];p=_[f>>>24]^b[d>>16&255]^T[u>>8&255]^S[l&255]^o[g+2];d=_[d>>>24]^b[u>>16&255]^T[l>>8&255]^S[f&255]^o[g+3];g+=4;u=c;l=h;f=p}for(v=0;v<4;v++){a[(3&-v)+s]=w[u>>>24]<<24^w[l>>16&255]<<16^w[f>>8&255]<<8^w[d&255]^o[g++];c=u;u=l;l=f;f=d;d=c}}}]);return e}();r["default"]=o;t.exports=r["default"]},{}],23:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var n=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e("./stream");var l=a(u);var f=function(e){o(t,e);function t(){s(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"]);this.jobs=[];this.delay=1;this.timeout_=null}i(t,[{key:"processJob_",value:function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}}},{key:"push",value:function e(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}}}]);return t}(l["default"]);r["default"]=f;t.exports=r["default"]},{"./stream":26}],24:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=e("./aes");var o=n(s);var u=e("./async-stream");var l=n(u);var f=e("pkcs7");var d=function e(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};var c=function e(t,r,i){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2);var a=new o["default"](Array.prototype.slice.call(r));var s=new Uint8Array(t.byteLength);var u=new Int32Array(s.buffer);var l=undefined;var f=undefined;var c=undefined;var h=undefined;var p=undefined;var m=undefined;var v=undefined;var g=undefined;var y=undefined;l=i[0];f=i[1];c=i[2];h=i[3];for(y=0;y<n.length;y+=4){p=d(n[y]);m=d(n[y+1]);v=d(n[y+2]);g=d(n[y+3]);a.decrypt(p,m,v,g,u,y);u[y]=d(u[y]^l);u[y+1]=d(u[y+1]^f);u[y+2]=d(u[y+2]^c);u[y+3]=d(u[y+3]^h);l=p;f=m;c=v;h=g}return s};r.decrypt=c;var h=function(){function e(t,r,i,n){a(this,e);var s=e.STEP;var o=new Int32Array(t.buffer);var u=new Uint8Array(t.byteLength);var c=0;this.asyncStream_=new l["default"];this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+s),r,i,u));for(c=s;c<o.length;c+=s){i=new Uint32Array([d(o[c-4]),d(o[c-3]),d(o[c-2]),d(o[c-1])]);this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+s),r,i,u))}this.asyncStream_.push((function(){n(null,(0,f.unpad)(u))}))}i(e,[{key:"decryptChunk_",value:function e(t,r,i,n){return function(){var e=c(t,r,i);n.set(e,t.byteOffset)}}}],[{key:"STEP",get:function e(){return 32e3}}]);return e}();r.Decrypter=h;r["default"]={Decrypter:h,decrypt:c}},{"./aes":22,"./async-stream":23,pkcs7:28}],25:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=e("./decrypter");var a=e("./async-stream");var s=i(a);r["default"]={decrypt:n.decrypt,Decrypter:n.Decrypter,AsyncStream:s["default"]};t.exports=r["default"]},{"./async-stream":23,"./decrypter":24}],26:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){n(this,e);this.listeners={}}i(e,[{key:"on",value:function e(t,r){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(r)}},{key:"off",value:function e(t,r){var i=undefined;if(!this.listeners[t]){return false}i=this.listeners[t].indexOf(r);this.listeners[t].splice(i,1);return i>-1}},{key:"trigger",value:function e(t){var r=undefined;var i=undefined;var n=undefined;var a=undefined;r=this.listeners[t];if(!r){return}if(arguments.length===2){n=r.length;for(i=0;i<n;++i){r[i].call(this,arguments[1])}}else{a=Array.prototype.slice.call(arguments,1);n=r.length;for(i=0;i<n;++i){r[i].apply(this,a)}}}},{key:"dispose",value:function e(){this.listeners={}}},{key:"pipe",value:function e(t){this.on("data",(function(e){t.push(e)}))}}]);return e}();r["default"]=a;t.exports=r["default"]},{}],27:[function(e,t,r){var i;t.exports=function e(t){var r=i[t.byteLength%16||0],n=new Uint8Array(t.byteLength+r.length);n.set(t);n.set(r,t.byteLength);return n};i=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],28:[function(e,t,r){r.pad=e("./pad.js");r.unpad=e("./unpad.js")},{"./pad.js":27,"./unpad.js":29}],29:[function(e,t,r){t.exports=function e(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}},{}],30:[function(e,t,r){},{}],31:[function(e,t,r){(function(r){var i=typeof r!=="undefined"?r:typeof window!=="undefined"?window:{};var n=e("min-document");var a;if(typeof document!=="undefined"){a=document}else{a=i["__GLOBAL_DOCUMENT_CACHE@4"];if(!a){a=i["__GLOBAL_DOCUMENT_CACHE@4"]=n}}t.exports=a}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"min-document":30}],32:[function(e,t,r){(function(e){var r;if(typeof window!=="undefined"){r=window}else if(typeof e!=="undefined"){r=e}else if(typeof self!=="undefined"){r=self}else{r={}}t.exports=r}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],33:[function(e,t,r){var i=e("./line-stream");var n=l(i);var a=e("./parse-stream");var s=l(a);var o=e("./parser");var u=l(o);function l(e){return e&&e.__esModule?e:{default:e}}t.exports={LineStream:n["default"],ParseStream:s["default"],Parser:u["default"]}},{"./line-stream":34,"./parse-stream":35,"./parser":36}],34:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var n=e("./stream");var a=s(n);function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(e){l(t,e);function t(){o(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.buffer="";return e}i(t,[{key:"push",value:function e(t){var r=void 0;this.buffer+=t;r=this.buffer.indexOf("\n");for(;r>-1;r=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,r));this.buffer=this.buffer.substring(r+1)}}}]);return t}(a["default"]);r["default"]=f},{"./stream":37}],35:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){var r=[];var i=true;var n=false;var a=undefined;try{for(var s=e[Symbol.iterator](),o;!(i=(o=s.next()).done);i=true){r.push(o.value);if(t&&r.length===t)break}}catch(u){n=true;a=u}finally{try{if(!i&&s["return"])s["return"]()}finally{if(n)throw a}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var a=e("./stream");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=function e(){var t="[^=]*";var r='"[^"]*"|[^,]*';var i="(?:"+t+")=(?:"+r+")";return new RegExp("(?:^|,)("+i+")")};var c=function e(t){var r=t.split(d());var i={};var n=r.length;var a=void 0;while(n--){if(r[n]===""){continue}a=/([^=]*)=(.*)/.exec(r[n]).slice(1);a[0]=a[0].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1");i[a[0]]=a[1]}return i};var h=function(e){f(t,e);function t(){u(this,t);return l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}n(t,[{key:"push",value:function e(t){var r=void 0;var n=void 0;t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(t.length===0){return}if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}if(t.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:t.slice(1)});return}t=t.replace("\r","");r=/^#EXTM3U/.exec(t);if(r){this.trigger("data",{type:"tag",tagType:"m3u"});return}r=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t);if(r){n={type:"tag",tagType:"inf"};if(r[1]){n.duration=parseFloat(r[1])}if(r[2]){n.title=r[2]}this.trigger("data",n);return}r=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t);if(r){n={type:"tag",tagType:"targetduration"};if(r[1]){n.duration=parseInt(r[1],10)}this.trigger("data",n);return}r=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t);if(r){n={type:"tag",tagType:"totalduration"};if(r[1]){n.duration=parseInt(r[1],10)}this.trigger("data",n);return}r=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t);if(r){n={type:"tag",tagType:"version"};if(r[1]){n.version=parseInt(r[1],10)}this.trigger("data",n);return}r=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t);if(r){n={type:"tag",tagType:"media-sequence"};if(r[1]){n.number=parseInt(r[1],10)}this.trigger("data",n);return}r=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t);if(r){n={type:"tag",tagType:"discontinuity-sequence"};if(r[1]){n.number=parseInt(r[1],10)}this.trigger("data",n);return}r=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t);if(r){n={type:"tag",tagType:"playlist-type"};if(r[1]){n.playlistType=r[1]}this.trigger("data",n);return}r=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t);if(r){n={type:"tag",tagType:"byterange"};if(r[1]){n.length=parseInt(r[1],10)}if(r[2]){n.offset=parseInt(r[2],10)}this.trigger("data",n);return}r=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t);if(r){n={type:"tag",tagType:"allow-cache"};if(r[1]){n.allowed=!/NO/.test(r[1])}this.trigger("data",n);return}r=/^#EXT-X-MAP:?(.*)$/.exec(t);if(r){n={type:"tag",tagType:"map"};if(r[1]){var a=c(r[1]);if(a.URI){n.uri=a.URI}if(a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=i(s,2),u=o[0],l=o[1];n.byterange={};if(u){n.byterange.length=parseInt(u,10)}if(l){n.byterange.offset=parseInt(l,10)}}}this.trigger("data",n);return}r=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t);if(r){n={type:"tag",tagType:"stream-inf"};if(r[1]){n.attributes=c(r[1]);if(n.attributes.RESOLUTION){var f=n.attributes.RESOLUTION.split("x");var d={};if(f[0]){d.width=parseInt(f[0],10)}if(f[1]){d.height=parseInt(f[1],10)}n.attributes.RESOLUTION=d}if(n.attributes.BANDWIDTH){n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)}if(n.attributes["PROGRAM-ID"]){n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10)}}this.trigger("data",n);return}r=/^#EXT-X-MEDIA:?(.*)$/.exec(t);if(r){n={type:"tag",tagType:"media"};if(r[1]){n.attributes=c(r[1])}this.trigger("data",n);return}r=/^#EXT-X-ENDLIST/.exec(t);if(r){this.trigger("data",{type:"tag",tagType:"endlist"});return}r=/^#EXT-X-DISCONTINUITY/.exec(t);if(r){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}r=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t);if(r){n={type:"tag",tagType:"program-date-time"};if(r[1]){n.dateTimeString=r[1];n.dateTimeObject=new Date(r[1])}this.trigger("data",n);return}r=/^#EXT-X-KEY:?(.*)$/.exec(t);if(r){n={type:"tag",tagType:"key"};if(r[1]){n.attributes=c(r[1]);if(n.attributes.IV){if(n.attributes.IV.substring(0,2).toLowerCase()==="0x"){n.attributes.IV=n.attributes.IV.substring(2)}n.attributes.IV=n.attributes.IV.match(/.{8}/g);n.attributes.IV[0]=parseInt(n.attributes.IV[0],16);n.attributes.IV[1]=parseInt(n.attributes.IV[1],16);n.attributes.IV[2]=parseInt(n.attributes.IV[2],16);n.attributes.IV[3]=parseInt(n.attributes.IV[3],16);n.attributes.IV=new Uint32Array(n.attributes.IV)}}this.trigger("data",n);return}r=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t);if(r){n={type:"tag",tagType:"cue-out-cont"};if(r[1]){n.data=r[1]}else{n.data=""}this.trigger("data",n);return}r=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t);if(r){n={type:"tag",tagType:"cue-out"};if(r[1]){n.data=r[1]}else{n.data=""}this.trigger("data",n);return}r=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t);if(r){n={type:"tag",tagType:"cue-in"};if(r[1]){n.data=r[1]}else{n.data=""}this.trigger("data",n);return}this.trigger("data",{type:"tag",data:t.slice(4)})}}]);return t}(s["default"]);r["default"]=h},{"./stream":37}],36:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var a=e("./stream");var s=d(a);var o=e("./line-stream");var u=d(o);var l=e("./parse-stream");var f=d(l);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var m=function(e){p(t,e);function t(){c(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.lineStream=new u["default"];e.parseStream=new f["default"];e.lineStream.pipe(e.parseStream);var r=e;var n=[];var a={};var s=void 0;var o=void 0;var l=function e(){};var d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var p=0;e.manifest={allowCache:true,discontinuityStarts:[],segments:[]};e.parseStream.on("data",(function(e){var t=void 0;var u=void 0;({tag:function f(){({"allow-cache":function t(){this.manifest.allowCache=e.allowed;if(!("allowed"in e)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function t(){var t={};if("length"in e){a.byterange=t;t.length=e.length;if(!("offset"in e)){this.trigger("info",{message:"defaulting offset to zero"});e.offset=0}}if("offset"in e){a.byterange=t;t.offset=e.offset}},endlist:function e(){this.manifest.endList=true},inf:function t(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(e.duration>0){a.duration=e.duration}if(e.duration===0){a.duration=.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=n},key:function t(){if(!e.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(e.attributes.METHOD==="NONE"){o=null;return}if(!e.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(!e.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}o={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI};if(typeof e.attributes.IV!=="undefined"){o.iv=e.attributes.IV}},"media-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number});return}this.manifest.mediaSequence=e.number},"discontinuity-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number});return}this.manifest.discontinuitySequence=e.number;p=e.number},"playlist-type":function t(){if(!/VOD|EVENT/.test(e.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist});return}this.manifest.playlistType=e.playlistType},map:function t(){s={};if(e.uri){s.uri=e.uri}if(e.byterange){s.byterange=e.byterange}},"stream-inf":function t(){this.manifest.playlists=n;this.manifest.mediaGroups=this.manifest.mediaGroups||d;if(!e.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!a.attributes){a.attributes={}}i(a.attributes,e.attributes)},media:function r(){this.manifest.mediaGroups=this.manifest.mediaGroups||d;if(!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var i=this.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes["GROUP-ID"]]=i[e.attributes["GROUP-ID"]]||{};t=i[e.attributes["GROUP-ID"]];u={default:/yes/i.test(e.attributes.DEFAULT)};if(u["default"]){u.autoselect=true}else{u.autoselect=/yes/i.test(e.attributes.AUTOSELECT)}if(e.attributes.LANGUAGE){u.language=e.attributes.LANGUAGE}if(e.attributes.URI){u.uri=e.attributes.URI}if(e.attributes["INSTREAM-ID"]){u.instreamId=e.attributes["INSTREAM-ID"]}if(e.attributes.CHARACTERISTICS){u.characteristics=e.attributes.CHARACTERISTICS}if(e.attributes.FORCED){u.forced=/yes/i.test(e.attributes.FORCED)}t[e.attributes.NAME]=u},discontinuity:function e(){p+=1;a.discontinuity=true;this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function t(){this.manifest.dateTimeString=e.dateTimeString;this.manifest.dateTimeObject=e.dateTimeObject},targetduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration});return}this.manifest.targetDuration=e.duration},totalduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration});return}this.manifest.totalDuration=e.duration},"cue-out":function t(){a.cueOut=e.data},"cue-out-cont":function t(){a.cueOutCont=e.data},"cue-in":function t(){a.cueIn=e.data}}[e.tagType]||l).call(r)},uri:function t(){a.uri=e.uri;n.push(a);if(this.manifest.targetDuration&&!("duration"in a)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});a.duration=this.manifest.targetDuration}if(o){a.key=o}a.timeline=p;if(s){a.map=s}a={}},comment:function e(){}})[e.type].call(r)}));return e}n(t,[{key:"push",value:function e(t){this.lineStream.push(t)}},{key:"end",value:function e(){this.lineStream.push("\n")}}]);return t}(s["default"]);r["default"]=m},{"./line-stream":34,"./parse-stream":35,"./stream":37}],37:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){n(this,e);this.listeners={}}i(e,[{key:"on",value:function e(t,r){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(r)}},{key:"off",value:function e(t,r){if(!this.listeners[t]){return false}var i=this.listeners[t].indexOf(r);this.listeners[t].splice(i,1);return i>-1}},{key:"trigger",value:function e(t){var r=this.listeners[t];var i=void 0;var n=void 0;var a=void 0;if(!r){return}if(arguments.length===2){n=r.length;for(i=0;i<n;++i){r[i].call(this,arguments[1])}}else{a=Array.prototype.slice.call(arguments,1);n=r.length;for(i=0;i<n;++i){r[i].apply(this,a)}}}},{key:"dispose",value:function e(){this.listeners={}}},{key:"pipe",value:function e(t){this.on("data",(function(e){t.push(e)}))}}]);return e}();r["default"]=a},{}],38:[function(e,t,r){var i=e("../utils/stream.js");var n;n=function(){var e=new Uint8Array,t=0;n.prototype.init.call(this);this.setTimestamp=function(e){t=e};this.parseId3TagSize=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],n=(i&16)>>4;if(n){return r+20}return r+10};this.parseAdtsSize=function(e,t){var r=(e[t+5]&224)>>5,i=e[t+4]<<3,n=e[t+3]&3<<11;return n|i|r};this.push=function(r){var i=0,n=0,a,s,o,u;if(e.length){u=e.length;e=new Uint8Array(r.byteLength+u);e.set(e.subarray(0,u));e.set(r,u)}else{e=r}while(e.length-n>=3){if(e[n]==="I".charCodeAt(0)&&e[n+1]==="D".charCodeAt(0)&&e[n+2]==="3".charCodeAt(0)){if(e.length-n<10){break}i=this.parseId3TagSize(e,n);if(i>e.length){break}s={type:"timed-metadata",data:e.subarray(n,n+i)};this.trigger("data",s);n+=i;continue}else if(e[n]&255===255&&(e[n+1]&240)===240){if(e.length-n<7){break}i=this.parseAdtsSize(e,n);if(i>e.length){break}o={type:"audio",data:e.subarray(n,n+i),pts:t,dts:t};this.trigger("data",o);n+=i;continue}n++}a=e.length-n;if(a>0){e=e.subarray(n)}else{e=new Uint8Array}}};n.prototype=new i;t.exports=n},{"../utils/stream.js":62}],39:[function(e,t,r){var i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var n=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};var a=function(e,t,r){var i,n="";for(i=t;i<r;i++){n+="%"+("00"+e[i].toString(16)).slice(-2)}return n};var s=function(e,t,r){return unescape(a(e,t,r))};var o=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],n=(i&16)>>4;if(n){return r+20}return r+10};var u=function(e,t){var r=(e[t+5]&224)>>5,i=e[t+4]<<3,n=e[t+3]&3<<11;return n|i|r};var l=function(e,t){if(e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(e[t]&255===255&&(e[t+1]&240)===240){return"audio"}return null};var f=function(e){var t=0;while(t+5<e.length){if(e[t]!==255||(e[t+1]&246)!==240){t++;continue}return i[(e[t+2]&60)>>>2]}return null};var d=function(e){var t,r,i,a;t=10;if(e[5]&64){t+=4;t+=n(e.subarray(10,14))}do{r=n(e.subarray(t+4,t+8));if(r<1){return null}a=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]);if(a==="PRIV"){i=e.subarray(t+10,t+r+10);for(var o=0;o<i.byteLength;o++){if(i[o]===0){var u=s(i,0,o);if(u==="com.apple.streaming.transportStreamTimestamp"){var l=i.subarray(o+1);var f=(l[3]&1)<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;f*=4;f+=l[7]&3;return f}break}}}t+=10;t+=r}while(t<e.byteLength);return null};t.exports={parseId3TagSize:o,parseAdtsSize:u,parseType:l,parseSampleRate:f,parseAacTimestamp:d}},{}],40:[function(e,t,r){var i=e("../utils/stream.js");var n;var a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=function(){var e;n.prototype.init.call(this);this.push=function(t){var r=0,i=0,n,s,o,u,l,f;if(t.type!=="audio"){return}if(e){u=e;e=new Uint8Array(u.byteLength+t.data.byteLength);e.set(u);e.set(t.data,u.byteLength)}else{e=t.data}while(r+5<e.length){if(e[r]!==255||(e[r+1]&246)!==240){r++;continue}s=(~e[r+1]&1)*2;n=(e[r+3]&3)<<11|e[r+4]<<3|(e[r+5]&224)>>5;l=((e[r+6]&3)+1)*1024;f=l*9e4/a[(e[r+2]&60)>>>2];o=r+n;if(e.byteLength<o){return}this.trigger("data",{pts:t.pts+i*f,dts:t.dts+i*f,sampleCount:l,audioobjecttype:(e[r+2]>>>6&3)+1,channelcount:(e[r+2]&1)<<2|(e[r+3]&192)>>>6,samplerate:a[(e[r+2]&60)>>>2],samplingfrequencyindex:(e[r+2]&60)>>>2,samplesize:16,data:e.subarray(r+7+s,o)});if(e.byteLength===o){e=undefined;return}i++;e=e.subarray(o)}};this.flush=function(){this.trigger("done")}};n.prototype=new i;t.exports=n},{"../utils/stream.js":62}],41:[function(e,t,r){var i=e("../utils/stream.js");var n=e("../utils/exp-golomb.js");var a,s;var o;s=function(){var e=0,t,r;s.prototype.init.call(this);this.push=function(i){var n;if(!r){r=i.data}else{n=new Uint8Array(r.byteLength+i.data.byteLength);n.set(r);n.set(i.data,r.byteLength);r=n}for(;e<r.byteLength-3;e++){if(r[e+2]===1){t=e+5;break}}while(t<r.byteLength){switch(r[t]){case 0:if(r[t-1]!==0){t+=2;break}else if(r[t-2]!==0){t++;break}if(e+3!==t-2){this.trigger("data",r.subarray(e+3,t-2))}do{t++}while(r[t]!==1&&t<r.length);e=t-2;t+=3;break;case 1:if(r[t-1]!==0||r[t-2]!==0){t+=3;break}this.trigger("data",r.subarray(e+3,t-2));e=t-2;t+=3;break;default:t+=3;break}}r=r.subarray(e);t-=e;e=0};this.flush=function(){if(r&&r.byteLength>3){this.trigger("data",r.subarray(e+3))}r=null;e=0;this.trigger("done")}};s.prototype=new i;o={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};a=function(){var e=new s,t,r,i,u,l,f,d;a.prototype.init.call(this);t=this;this.push=function(t){if(t.type!=="video"){return}r=t.trackId;i=t.pts;u=t.dts;e.push(t)};e.on("data",(function(e){var n={trackId:r,pts:i,dts:u,data:e};switch(e[0]&31){case 5:n.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:n.nalUnitType="sei_rbsp";n.escapedRBSP=l(e.subarray(1));break;case 7:n.nalUnitType="seq_parameter_set_rbsp";n.escapedRBSP=l(e.subarray(1));n.config=f(n.escapedRBSP);break;case 8:n.nalUnitType="pic_parameter_set_rbsp";break;case 9:n.nalUnitType="access_unit_delimiter_rbsp";break;default:break}t.trigger("data",n)}));e.on("done",(function(){t.trigger("done")}));this.flush=function(){e.flush()};d=function(e,t){var r=8,i=8,n,a;for(n=0;n<e;n++){if(i!==0){a=t.readExpGolomb();i=(r+a+256)%256}r=i===0?r:i}};l=function(e){var t=e.byteLength,r=[],i=1,n,a;while(i<t-2){if(e[i]===0&&e[i+1]===0&&e[i+2]===3){r.push(i+2);i+=2}else{i++}}if(r.length===0){return e}n=t-r.length;a=new Uint8Array(n);var s=0;for(i=0;i<n;s++,i++){if(s===r[0]){s++;r.shift()}a[i]=e[s]}return a};f=function(e){var t=0,r=0,i=0,a=0,s=1,u,l,f,c,h,p,m,v,g,y,_,b,T,S;u=new n(e);l=u.readUnsignedByte();c=u.readUnsignedByte();f=u.readUnsignedByte();u.skipUnsignedExpGolomb();if(o[l]){h=u.readUnsignedExpGolomb();if(h===3){u.skipBits(1)}u.skipUnsignedExpGolomb();u.skipUnsignedExpGolomb();u.skipBits(1);if(u.readBoolean()){_=h!==3?8:12;for(S=0;S<_;S++){if(u.readBoolean()){if(S<6){d(16,u)}else{d(64,u)}}}}}u.skipUnsignedExpGolomb();p=u.readUnsignedExpGolomb();if(p===0){u.readUnsignedExpGolomb()}else if(p===1){u.skipBits(1);u.skipExpGolomb();u.skipExpGolomb();m=u.readUnsignedExpGolomb();for(S=0;S<m;S++){u.skipExpGolomb()}}u.skipUnsignedExpGolomb();u.skipBits(1);v=u.readUnsignedExpGolomb();g=u.readUnsignedExpGolomb();y=u.readBits(1);if(y===0){u.skipBits(1)}u.skipBits(1);if(u.readBoolean()){t=u.readUnsignedExpGolomb();r=u.readUnsignedExpGolomb();i=u.readUnsignedExpGolomb();a=u.readUnsignedExpGolomb()}if(u.readBoolean()){if(u.readBoolean()){T=u.readUnsignedByte();switch(T){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:{b=[u.readUnsignedByte()<<8|u.readUnsignedByte(),u.readUnsignedByte()<<8|u.readUnsignedByte()];break}}if(b){s=b[0]/b[1]}}}return{profileIdc:l,levelIdc:f,profileCompatibility:c,width:Math.ceil(((v+1)*16-t*2-r*2)*s),height:(2-y)*(g+1)*16-i*2-a*2}}};a.prototype=new i;t.exports={H264Stream:a,NalByteStream:s}},{"../utils/exp-golomb.js":61,"../utils/stream.js":62}],42:[function(e,t,r){var i=[33,16,5,32,164,27];var n=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var a=function(e){var t=[];while(e--){t.push(0)}return t};var s=function(e){return Object.keys(e).reduce((function(t,r){t[r]=new Uint8Array(e[r].reduce((function(e,t){return e.concat(t)}),[]));return t}),{})};var o={96e3:[i,[227,64],a(154),[56]],88200:[i,[231],a(170),[56]],64e3:[i,[248,192],a(240),[56]],48e3:[i,[255,192],a(268),[55,148,128],a(54),[112]],44100:[i,[255,192],a(268),[55,163,128],a(84),[112]],32e3:[i,[255,192],a(268),[55,234],a(226),[112]],24e3:[i,[255,192],a(268),[55,255,128],a(268),[111,112],a(126),[224]],16e3:[i,[255,192],a(268),[55,255,128],a(268),[111,255],a(269),[223,108],a(195),[1,192]],12e3:[n,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,253,128],a(259),[56]],11025:[n,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,255,192],a(268),[55,175,128],a(108),[112]],8e3:[n,a(268),[3,121,16],a(47),[7]]};t.exports=s(o)},{}],43:[function(e,t,r){var i=e("../utils/stream.js");var n=function(e){this.numberOfTracks=0;this.metadataStream=e.metadataStream;this.videoTags=[];this.audioTags=[];this.videoTrack=null;this.audioTrack=null;this.pendingCaptions=[];this.pendingMetadata=[];this.pendingTracks=0;this.processedTracks=0;n.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}if(e.track.type==="video"){this.videoTrack=e.track;this.videoTags=e.tags;this.pendingTracks++}if(e.track.type==="audio"){this.audioTrack=e.track;this.audioTags=e.tags;this.pendingTracks++}}};n.prototype=new i;n.prototype.flush=function(e){var t,r,i,n,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.pendingTracks===0){this.processedTracks++;if(this.processedTracks<this.numberOfTracks){return}}}this.processedTracks+=this.pendingTracks;this.pendingTracks=0;if(this.processedTracks<this.numberOfTracks){return}if(this.videoTrack){n=this.videoTrack.timelineStartInfo.pts}else if(this.audioTrack){n=this.audioTrack.timelineStartInfo.pts}a.tags.videoTags=this.videoTags;a.tags.audioTags=this.audioTags;for(i=0;i<this.pendingCaptions.length;i++){r=this.pendingCaptions[i];r.startTime=r.startPts-n;r.startTime/=9e4;r.endTime=r.endPts-n;r.endTime/=9e4;a.captionStreams[r.stream]=true;a.captions.push(r)}for(i=0;i<this.pendingMetadata.length;i++){t=this.pendingMetadata[i];t.cueTime=t.pts-n;t.cueTime/=9e4;a.metadata.push(t)}a.metadata.dispatchType=this.metadataStream.dispatchType;this.videoTrack=null;this.audioTrack=null;this.videoTags=[];this.audioTags=[];this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.pendingTracks=0;this.processedTracks=0;this.trigger("data",a);this.trigger("done")};t.exports=n},{"../utils/stream.js":62}],44:[function(e,t,r){var i=e("./flv-tag.js");var n=function(e,t,r){var n=new Uint8Array(3+1+1+4),a=new DataView(n.buffer),s,o,u;e=e||0;t=t===undefined?true:t;r=r===undefined?true:r;a.setUint8(0,70);a.setUint8(1,76);a.setUint8(2,86);a.setUint8(3,1);a.setUint8(4,(t?4:0)|(r?1:0));a.setUint32(5,n.byteLength);if(e<=0){o=new Uint8Array(n.byteLength+4);o.set(n);o.set([0,0,0,0],n.byteLength);return o}s=new i(i.METADATA_TAG);s.pts=s.dts=0;s.writeMetaDataDouble("duration",e);u=s.finalize().length;o=new Uint8Array(n.byteLength+u);o.set(n);o.set(a.byteLength,u);return o};t.exports=n},{"./flv-tag.js":45}],45:[function(e,t,r){var i;i=function(e,t){var r=0,n=16384,a=function(e,t){var r,i=e.position+t;if(i<e.bytes.byteLength){return}r=new Uint8Array(i*2);r.set(e.bytes.subarray(0,e.position),0);e.bytes=r;e.view=new DataView(e.bytes.buffer)},s=i.widthBytes||new Uint8Array("width".length),o=i.heightBytes||new Uint8Array("height".length),u=i.videocodecidBytes||new Uint8Array("videocodecid".length),l;if(!i.widthBytes){for(l=0;l<"width".length;l++){s[l]="width".charCodeAt(l)}for(l=0;l<"height".length;l++){o[l]="height".charCodeAt(l)}for(l=0;l<"videocodecid".length;l++){u[l]="videocodecid".charCodeAt(l)}i.widthBytes=s;i.heightBytes=o;i.videocodecidBytes=u}this.keyFrame=false;switch(e){case i.VIDEO_TAG:this.length=16;n*=6;break;case i.AUDIO_TAG:this.length=13;this.keyFrame=true;break;case i.METADATA_TAG:this.length=29;this.keyFrame=true;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(n);this.view=new DataView(this.bytes.buffer);this.bytes[0]=e;this.position=this.length;this.keyFrame=t;this.pts=0;this.dts=0;this.writeBytes=function(e,t,r){var i=t||0,n;r=r||e.byteLength;n=i+r;a(this,r);this.bytes.set(e.subarray(i,n),this.position);this.position+=r;this.length=Math.max(this.length,this.position)};this.writeByte=function(e){a(this,1);this.bytes[this.position]=e;this.position++;this.length=Math.max(this.length,this.position)};this.writeShort=function(e){a(this,2);this.view.setUint16(this.position,e);this.position+=2;this.length=Math.max(this.length,this.position)};this.negIndex=function(e){return this.bytes[this.length-e]};this.nalUnitSize=function(){if(r===0){return 0}return this.length-(r+4)};this.startNalUnit=function(){if(r>0){throw new Error("Attempted to create new NAL wihout closing the old one")}r=this.length;this.length+=4;this.position=this.length};this.endNalUnit=function(e){var t,i;if(this.length===r+4){this.length-=4}else if(r>0){t=r+4;i=this.length-t;this.position=r;this.view.setUint32(this.position,i);this.position=this.length;if(e){e.push(this.bytes.subarray(t,t+i))}}r=0};this.writeMetaDataDouble=function(e,t){var i;a(this,2+e.length+9);this.view.setUint16(this.position,e.length);this.position+=2;if(e==="width"){this.bytes.set(s,this.position);this.position+=5}else if(e==="height"){this.bytes.set(o,this.position);this.position+=6}else if(e==="videocodecid"){this.bytes.set(u,this.position);this.position+=12}else{for(i=0;i<e.length;i++){this.bytes[this.position]=e.charCodeAt(i);this.position++}}this.position++;this.view.setFloat64(this.position,t);this.position+=8;this.length=Math.max(this.length,this.position);++r};this.writeMetaDataBoolean=function(e,t){var i;a(this,2);this.view.setUint16(this.position,e.length);this.position+=2;for(i=0;i<e.length;i++){a(this,1);this.bytes[this.position]=e.charCodeAt(i);this.position++}a(this,2);this.view.setUint8(this.position,1);this.position++;this.view.setUint8(this.position,t?1:0);this.position++;this.length=Math.max(this.length,this.position);++r};this.finalize=function(){var e,n;switch(this.bytes[0]){case i.VIDEO_TAG:this.bytes[11]=(this.keyFrame||t?16:32)|7;this.bytes[12]=t?0:1;e=this.pts-this.dts;this.bytes[13]=(e&16711680)>>>16;this.bytes[14]=(e&65280)>>>8;this.bytes[15]=(e&255)>>>0;break;case i.AUDIO_TAG:this.bytes[11]=175;this.bytes[12]=t?0:1;break;case i.METADATA_TAG:this.position=11;this.view.setUint8(this.position,2);this.position++;this.view.setUint16(this.position,10);this.position+=2;this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position);this.position+=10;this.bytes[this.position]=8;this.position++;this.view.setUint32(this.position,r);this.position=this.length;this.bytes.set([0,0,9],this.position);this.position+=3;this.length=this.position;break}n=this.length-11;this.bytes[1]=(n&16711680)>>>16;this.bytes[2]=(n&65280)>>>8;this.bytes[3]=(n&255)>>>0;this.bytes[4]=(this.dts&16711680)>>>16;this.bytes[5]=(this.dts&65280)>>>8;this.bytes[6]=(this.dts&255)>>>0;this.bytes[7]=(this.dts&4278190080)>>>24;this.bytes[8]=0;this.bytes[9]=0;this.bytes[10]=0;a(this,4);this.view.setUint32(this.length,this.length);this.length+=4;this.position+=4;this.bytes=this.bytes.subarray(0,this.length);this.frameTime=i.frameTime(this.bytes);return this}};i.AUDIO_TAG=8;i.VIDEO_TAG=9;i.METADATA_TAG=18;i.isAudioFrame=function(e){return i.AUDIO_TAG===e[0]};i.isVideoFrame=function(e){return i.VIDEO_TAG===e[0]};i.isMetaData=function(e){return i.METADATA_TAG===e[0]};i.isKeyFrame=function(e){if(i.isVideoFrame(e)){return e[11]===23}if(i.isAudioFrame(e)){return true}if(i.isMetaData(e)){return true}return false};i.frameTime=function(e){var t=e[4]<<16;t|=e[5]<<8;t|=e[6]<<0;t|=e[7]<<24;return t};t.exports=i},{}],46:[function(e,t,r){t.exports={tag:e("./flv-tag"),Transmuxer:e("./transmuxer"),getFlvHeader:e("./flv-header")}},{"./flv-header":44,"./flv-tag":45,"./transmuxer":48}],47:[function(e,t,r){var i=function(){var e=this;this.list=[];this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})};Object.defineProperty(this,"length",{get:function(){return e.list.length}})};t.exports=i},{}],48:[function(e,t,r){var i=e("../utils/stream.js");var n=e("./flv-tag.js");var a=e("../m2ts/m2ts.js");var s=e("../codecs/adts.js");var o=e("../codecs/h264").H264Stream;var u=e("./coalesce-stream.js");var l=e("./tag-list.js");var f,d,c,h,p,m;h=function(e,t){if(typeof t.pts==="number"){if(e.timelineStartInfo.pts===undefined){e.timelineStartInfo.pts=t.pts}else{e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)}}if(typeof t.dts==="number"){if(e.timelineStartInfo.dts===undefined){e.timelineStartInfo.dts=t.dts}else{e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts)}}};p=function(e,t){var r=new n(n.METADATA_TAG);r.dts=t;r.pts=t;r.writeMetaDataDouble("videocodecid",7);r.writeMetaDataDouble("width",e.width);r.writeMetaDataDouble("height",e.height);return r};m=function(e,t){var r,i=new n(n.VIDEO_TAG,true);i.dts=t;i.pts=t;i.writeByte(1);i.writeByte(e.profileIdc);i.writeByte(e.profileCompatibility);i.writeByte(e.levelIdc);i.writeByte(252|3);i.writeByte(224|1);i.writeShort(e.sps[0].length);i.writeBytes(e.sps[0]);i.writeByte(e.pps.length);for(r=0;r<e.pps.length;++r){i.writeShort(e.pps[r].length);i.writeBytes(e.pps[r])}return i};c=function(e){var t=[],r=[],i;c.prototype.init.call(this);this.push=function(r){h(e,r);if(e){e.audioobjecttype=r.audioobjecttype;e.channelcount=r.channelcount;e.samplerate=r.samplerate;e.samplingfrequencyindex=r.samplingfrequencyindex;e.samplesize=r.samplesize;e.extraData=e.audioobjecttype<<11|e.samplingfrequencyindex<<7|e.channelcount<<3}r.pts=Math.round(r.pts/90);r.dts=Math.round(r.dts/90);t.push(r)};this.flush=function(){var a,s,o,u=new l;if(t.length===0){this.trigger("done","AudioSegmentStream");return}o=-Infinity;while(t.length){a=t.shift();if(r.length&&a.pts>=r[0]){o=r.shift();this.writeMetaDataTags(u,o)}if(e.extraData!==i||a.pts-o>=1e3){this.writeMetaDataTags(u,a.pts);i=e.extraData;o=a.pts}s=new n(n.AUDIO_TAG);s.pts=a.pts;s.dts=a.dts;s.writeBytes(a.data);u.push(s.finalize())}r.length=0;i=null;this.trigger("data",{track:e,tags:u.list});this.trigger("done","AudioSegmentStream")};this.writeMetaDataTags=function(t,r){var i;i=new n(n.METADATA_TAG);i.pts=r;i.dts=r;i.writeMetaDataDouble("audiocodecid",10);i.writeMetaDataBoolean("stereo",e.channelcount===2);i.writeMetaDataDouble("audiosamplerate",e.samplerate);i.writeMetaDataDouble("audiosamplesize",16);t.push(i.finalize());i=new n(n.AUDIO_TAG,true);i.pts=r;i.dts=r;i.view.setUint16(i.position,e.extraData);i.position+=2;i.length=Math.max(i.length,i.position);t.push(i.finalize())};this.onVideoKeyFrame=function(e){r.push(e)}};c.prototype=new i;d=function(e){var t=[],r,i;d.prototype.init.call(this);this.finishFrame=function(t,n){if(!n){return}if(r&&e&&e.newMetadata&&(n.keyFrame||t.length===0)){var a=p(r,n.dts).finalize();var s=m(e,n.dts).finalize();a.metaDataTag=s.metaDataTag=true;t.push(a);t.push(s);e.newMetadata=false;this.trigger("keyframe",n.dts)}n.endNalUnit();t.push(n.finalize());i=null};this.push=function(r){h(e,r);r.pts=Math.round(r.pts/90);r.dts=Math.round(r.dts/90);t.push(r)};this.flush=function(){var a,s=new l;while(t.length){if(t[0].nalUnitType==="access_unit_delimiter_rbsp"){break}t.shift()}if(t.length===0){this.trigger("done","VideoSegmentStream");return}while(t.length){a=t.shift();if(a.nalUnitType==="seq_parameter_set_rbsp"){e.newMetadata=true;r=a.config;e.width=r.width;e.height=r.height;e.sps=[a.data];e.profileIdc=r.profileIdc;e.levelIdc=r.levelIdc;e.profileCompatibility=r.profileCompatibility;i.endNalUnit()}else if(a.nalUnitType==="pic_parameter_set_rbsp"){e.newMetadata=true;e.pps=[a.data];i.endNalUnit()}else if(a.nalUnitType==="access_unit_delimiter_rbsp"){if(i){this.finishFrame(s,i)}i=new n(n.VIDEO_TAG);i.pts=a.pts;i.dts=a.dts}else{if(a.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){i.keyFrame=true}i.endNalUnit()}i.startNalUnit();i.writeBytes(a.data)}if(i){this.finishFrame(s,i)}this.trigger("data",{track:e,tags:s.list});this.trigger("done","VideoSegmentStream")}};d.prototype=new i;f=function(e){var t=this,r,i,n,l,h,p,m,v,g,y,_,b;f.prototype.init.call(this);e=e||{};this.metadataStream=new a.MetadataStream;e.metadataStream=this.metadataStream;r=new a.TransportPacketStream;i=new a.TransportParseStream;n=new a.ElementaryStream;l=new a.TimestampRolloverStream("video");h=new a.TimestampRolloverStream("audio");p=new a.TimestampRolloverStream("timed-metadata");m=new s;v=new o;b=new u(e);r.pipe(i).pipe(n);n.pipe(l).pipe(v);n.pipe(h).pipe(m);n.pipe(p).pipe(this.metadataStream).pipe(b);_=new a.CaptionStream;v.pipe(_).pipe(b);n.on("data",(function(e){var t,r,i;if(e.type==="metadata"){t=e.tracks.length;while(t--){if(e.tracks[t].type==="video"){r=e.tracks[t]}else if(e.tracks[t].type==="audio"){i=e.tracks[t]}}if(r&&!g){b.numberOfTracks++;g=new d(r);v.pipe(g).pipe(b)}if(i&&!y){b.numberOfTracks++;y=new c(i);m.pipe(y).pipe(b);if(g){g.on("keyframe",y.onVideoKeyFrame)}}}}));this.push=function(e){r.push(e)};this.flush=function(){r.flush()};this.resetCaptions=function(){_.reset()};b.on("data",(function(e){t.trigger("data",e)}));b.on("done",(function(){t.trigger("done")}))};f.prototype=new i;t.exports=f},{"../codecs/adts.js":40,"../codecs/h264":41,"../m2ts/m2ts.js":50,"../utils/stream.js":62,"./coalesce-stream.js":43,"./flv-tag.js":45,"./tag-list.js":47}],49:[function(e,t,r){var i=4,n=128,a=e("../utils/stream");var s=function(e){var t=0,r={payloadType:-1,payloadSize:0},a=0,s=0;while(t<e.byteLength){if(e[t]===n){break}while(e[t]===255){a+=255;t++}a+=e[t++];while(e[t]===255){s+=255;t++}s+=e[t++];if(!r.payload&&a===i){r.payloadType=a;r.payloadSize=s;r.payload=e.subarray(t,t+s);break}t+=s;a=0;s=0}return r};var o=function(e){if(e.payload[0]!==181){return null}if((e.payload[1]<<8|e.payload[2])!==49){return null}if(String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])!=="GA94"){return null}if(e.payload[7]!==3){return null}return e.payload.subarray(8,e.payload.length-1)};var u=function(e,t){var r=[],i,n,a,s;if(!(t[0]&64)){return r}n=t[0]&31;for(i=0;i<n;i++){a=i*3;s={type:t[a+2]&3,pts:e};if(t[a+2]&4){s.ccData=t[a+3]<<8|t[a+4];r.push(s)}}return r};var l={push:function(){}};var f=function(){f.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new v(0,0),new v(0,1),new v(1,0),new v(1,1)];this.reset();this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data"));e.on("done",this.trigger.bind(this,"done"))}),this)};f.prototype=new a;f.prototype.push=function(e){var t,r;if(e.nalUnitType!=="sei_rbsp"){return}t=s(e.escapedRBSP);if(t.payloadType!==i){return}r=o(t);if(!r){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.ignoreNextEqualDts_=false;return}this.captionPackets_=this.captionPackets_.concat(u(e.pts,r));this.latestDts_=e.dts};f.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach((function(e){e.flush()}),this);return}this.captionPackets_.forEach((function(e,t){e.presortIndex=t}));this.captionPackets_.sort((function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts}));this.captionPackets_.forEach((function(e){if(e.type<2){this.dispatchCea608Packet(e)}}),this);this.captionPackets_.length=0;this.ccStreams_.forEach((function(e){e.flush()}),this);return};f.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.activeCea608Channel_=null;this.activeCea608Streams_=[l,l];this.ccStreams_.forEach((function(e){e.reset()}))};f.prototype.dispatchCea608Packet=function(e){if(this.setsChannel1Active(e)&&this.activeCea608Channel_!==1){this.activeCea608Channel_=1;this.activeCea608Streams_=[this.ccStreams_[0],this.ccStreams_[2]]}else if(this.setsChannel2Active(e)&&this.activeCea608Channel_!==2){this.activeCea608Channel_=2;this.activeCea608Streams_=[this.ccStreams_[1],this.ccStreams_[3]]}this.activeCea608Streams_[e.type].push(e)};f.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};f.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};var d={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var c=function(e){if(e===null){return""}e=d[e]||e;return String.fromCharCode(e)};var h=14;var p=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var m=function(){var e=[],t=h+1;while(t--){e.push("")}return e};var v=function(e,t){v.prototype.init.call(this);this.field_=e||0;this.dataChannel_=t||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,r,i,n,a;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}i=t>>>8;n=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);r=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=r;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.topRow_=h-1;this.mode_="rollUp"}else if(t===this.ROLL_UP_3_ROWS_){this.topRow_=h-2;this.mode_="rollUp"}else if(t===this.ROLL_UP_4_ROWS_){this.topRow_=h-3;this.mode_="rollUp"}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[h]=this.nonDisplayed_[h].slice(0,-1)}else{this.displayed_[h]=this.displayed_[h].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=m()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=m()}else if(t===this.RESUME_DIRECT_CAPTIONING_){this.mode_="paintOn"}else if(this.isSpecialCharacter(i,n)){i=(i&3)<<8;a=c(i|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isExtCharacter(i,n)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[h]=this.displayed_[h].slice(0,-1)}i=(i&3)<<8;a=c(i|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isMidRowCode(i,n)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((n&14)===14){this.addFormatting(e.pts,["i"])}if((n&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(i,n)){this.column_+=n&3}else if(this.isPAC(i,n)){var s=p.indexOf(t&7968);if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(n&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(n)){if((n&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(i)){if(n===0){n=null}a=c(i);a+=c(n);this[this.mode_](e.pts,a);this.column_+=a.length}}};v.prototype=new a;v.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){return e.trim()})).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};v.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=m();this.nonDisplayed_=m();this.lastControlCode_=null;this.column_=0;this.row_=h;this.formatting_=[]};v.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};v.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};v.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&(t>=32&&t<=63)};v.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&(t>=32&&t<=47)};v.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&(t>=33&&t<=35)};v.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&(t>=64&&t<=127)};v.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};v.prototype.isNormalChar=function(e){return e>=32&&e<=127};v.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var r=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,r)};v.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[];this[this.mode_](e,t)};v.prototype.popOn=function(e,t){var r=this.nonDisplayed_[this.row_];r+=t;this.nonDisplayed_[this.row_]=r};v.prototype.rollUp=function(e,t){var r=this.displayed_[h];r+=t;this.displayed_[h]=r};v.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.topRow_;e<h;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[h]=""};v.prototype.paintOn=function(){};t.exports={CaptionStream:f,Cea608Stream:v}},{"../utils/stream":62}],50:[function(e,t,r){var i=e("../utils/stream.js"),n=e("./caption-stream"),a=e("./stream-types"),s=e("./timestamp-rollover-stream").TimestampRolloverStream;var o=e("./stream-types.js");var u,l,f;var d=188,c=71;u=function(){var e=new Uint8Array(d),t=0;u.prototype.init.call(this);this.push=function(r){var i=0,n=d,a;if(t){a=new Uint8Array(r.byteLength+t);a.set(e.subarray(0,t));a.set(r,t);t=0}else{a=r}while(n<a.byteLength){if(a[i]===c&&a[n]===c){this.trigger("data",a.subarray(i,n));i+=d;n+=d;continue}i++;n++}if(i<a.byteLength){e.set(a.subarray(i),0);t=a.byteLength-i}};this.flush=function(){if(t===d&&e[0]===c){this.trigger("data",e);t=0}this.trigger("done")}};u.prototype=new i;l=function(){var e,t,r,i;l.prototype.init.call(this);i=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;e=function(e,i){var n=0;if(i.payloadUnitStartIndicator){n+=e[n]+1}if(i.type==="pat"){t(e.subarray(n),i)}else{r(e.subarray(n),i)}};t=function(e,t){t.section_number=e[7];t.last_section_number=e[8];i.pmtPid=(e[10]&31)<<8|e[11];t.pmtPid=i.pmtPid};r=function(e,t){var r,n,a,s;if(!(e[5]&1)){return}i.programMapTable={};r=(e[1]&15)<<8|e[2];n=3+r-4;a=(e[10]&15)<<8|e[11];s=12+a;while(s<n){i.programMapTable[(e[s+1]&31)<<8|e[s+2]]=e[s];s+=((e[s+3]&15)<<8|e[s+4])+5}t.programMapTable=i.programMapTable;while(i.packetsWaitingForPmt.length){i.processPes_.apply(i,i.packetsWaitingForPmt.shift())}};this.push=function(t){var r={},i=4;r.payloadUnitStartIndicator=!!(t[1]&64);r.pid=t[1]&31;r.pid<<=8;r.pid|=t[2];if((t[3]&48)>>>4>1){i+=t[i]+1}if(r.pid===0){r.type="pat";e(t.subarray(i),r);this.trigger("data",r)}else if(r.pid===this.pmtPid){r.type="pmt";e(t.subarray(i),r);this.trigger("data",r)}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([t,i,r])}else{this.processPes_(t,i,r)}};this.processPes_=function(e,t,r){r.streamType=this.programMapTable[r.pid];r.type="pes";r.data=e.subarray(t);this.trigger("data",r)}};l.prototype=new i;l.STREAM_TYPES={h264:27,adts:15};f=function(){var e=this,t={data:[],size:0},r={data:[],size:0},i={data:[],size:0},n=function(e,t){var r;t.packetLength=6+(e[4]<<8|e[5]);t.dataAlignmentIndicator=(e[6]&4)!==0;r=e[7];if(r&192){t.pts=(e[9]&14)<<27|(e[10]&255)<<20|(e[11]&254)<<12|(e[12]&255)<<5|(e[13]&254)>>>3;t.pts*=4;t.pts+=(e[13]&6)>>>1;t.dts=t.pts;if(r&64){t.dts=(e[14]&14)<<27|(e[15]&255)<<20|(e[16]&254)<<12|(e[17]&255)<<5|(e[18]&254)>>>3;t.dts*=4;t.dts+=(e[18]&6)>>>1}}t.data=e.subarray(9+e[8])},s=function(t,r,i){var a=new Uint8Array(t.size),s={type:r},o=0,u=0,l=false,f;if(!t.data.length||t.size<9){return}s.trackId=t.data[0].pid;for(o=0;o<t.data.length;o++){f=t.data[o];a.set(f.data,u);u+=f.data.byteLength}n(a,s);l=r==="video"||s.packetLength===t.size;if(i||l){t.size=0;t.data.length=0}if(l){e.trigger("data",s)}};f.prototype.init.call(this);this.push=function(n){({pat:function(){},pes:function(){var e,u;switch(n.streamType){case a.H264_STREAM_TYPE:case o.H264_STREAM_TYPE:e=t;u="video";break;case a.ADTS_STREAM_TYPE:e=r;u="audio";break;case a.METADATA_STREAM_TYPE:e=i;u="timed-metadata";break;default:return}if(n.payloadUnitStartIndicator){s(e,u,true)}e.data.push(n);e.size+=n.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},r=n.programMapTable,i,a;for(i in r){if(r.hasOwnProperty(i)){a={timelineStartInfo:{baseMediaDecodeTime:0}};a.id=+i;if(r[i]===o.H264_STREAM_TYPE){a.codec="avc";a.type="video"}else if(r[i]===o.ADTS_STREAM_TYPE){a.codec="adts";a.type="audio"}t.tracks.push(a)}}e.trigger("data",t)}})[n.type]()};this.flush=function(){s(t,"video");s(r,"audio");s(i,"timed-metadata");this.trigger("done")}};f.prototype=new i;var h={PAT_PID:0,MP2T_PACKET_LENGTH:d,TransportPacketStream:u,TransportParseStream:l,ElementaryStream:f,TimestampRolloverStream:s,CaptionStream:n.CaptionStream,Cea608Stream:n.Cea608Stream,MetadataStream:e("./metadata-stream")};for(var p in a){if(a.hasOwnProperty(p)){h[p]=a[p]}}t.exports=h},{"../utils/stream.js":62,"./caption-stream":49,"./metadata-stream":51,"./stream-types":53,"./stream-types.js":53,"./timestamp-rollover-stream":54}],51:[function(e,t,r){var i=e("../utils/stream"),n=e("./stream-types"),a=function(e,t,r){var i,n="";for(i=t;i<r;i++){n+="%"+("00"+e[i].toString(16)).slice(-2)}return n},s=function(e,t,r){return decodeURIComponent(a(e,t,r))},o=function(e,t,r){return unescape(a(e,t,r))},u=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},l={TXXX:function(e){var t;if(e.data[0]!==3){return}for(t=1;t<e.data.length;t++){if(e.data[t]===0){e.description=s(e.data,1,t);e.value=s(e.data,t+1,e.data.length).replace(/\0*$/,"");break}}e.data=e.value},WXXX:function(e){var t;if(e.data[0]!==3){return}for(t=1;t<e.data.length;t++){if(e.data[t]===0){e.description=s(e.data,1,t);e.url=s(e.data,t+1,e.data.length);break}}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++){if(e.data[t]===0){e.owner=o(e.data,0,t);break}}e.privateData=e.data.subarray(t+1);e.data=e.privateData}},f;f=function(e){var t={debug:!!(e&&e.debug),descriptor:e&&e.descriptor},r=0,i=[],a=0,s;f.prototype.init.call(this);this.dispatchType=n.METADATA_STREAM_TYPE.toString(16);if(t.descriptor){for(s=0;s<t.descriptor.length;s++){this.dispatchType+=("00"+t.descriptor[s].toString(16)).slice(-2)}}this.push=function(e){var n,s,o,f,d,c;if(e.type!=="timed-metadata"){return}if(e.dataAlignmentIndicator){a=0;i.length=0}if(i.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){if(t.debug){console.log("Skipping unrecognized metadata packet")}return}i.push(e);a+=e.data.byteLength;if(i.length===1){r=u(e.data.subarray(6,10));r+=10}if(a<r){return}n={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts};for(d=0;d<r;){n.data.set(i[0].data.subarray(0,r-d),d);d+=i[0].data.byteLength;a-=i[0].data.byteLength;i.shift()}s=10;if(n.data[5]&64){s+=4;s+=u(n.data.subarray(10,14));r-=u(n.data.subarray(16,20))}do{o=u(n.data.subarray(s+4,s+8));if(o<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}c=String.fromCharCode(n.data[s],n.data[s+1],n.data[s+2],n.data[s+3]);f={id:c,data:n.data.subarray(s+10,s+o+10)};f.key=f.id;if(l[f.id]){l[f.id](f);if(f.owner==="com.apple.streaming.transportStreamTimestamp"){var h=f.data,p=(h[3]&1)<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;p*=4;p+=h[7]&3;f.timeStamp=p;if(n.pts===undefined&&n.dts===undefined){n.pts=f.timeStamp;n.dts=f.timeStamp}this.trigger("timestamp",f)}}n.frames.push(f);s+=10;s+=o}while(s<r);this.trigger("data",n)}};f.prototype=new i;t.exports=f},{"../utils/stream":62,"./stream-types":53}],52:[function(e,t,r){var i=e("./stream-types.js");var n=function(e){var t=e[1]&31;t<<=8;t|=e[2];return t};var a=function(e){return!!(e[1]&64)};var s=function(e){var t=0;if((e[3]&48)>>>4>1){t+=e[4]+1}return t};var o=function(e,t){var r=n(e);if(r===0){return"pat"}else if(r===t){return"pmt"}else if(t){return"pes"}return null};var u=function(e){var t=a(e);var r=4+s(e);if(t){r+=e[r]+1}return(e[r+10]&31)<<8|e[r+11]};var l=function(e){var t={};var r=a(e);var i=4+s(e);if(r){i+=e[i]+1}if(!(e[i+5]&1)){return}var n,o,u;n=(e[i+1]&15)<<8|e[i+2];o=3+n-4;u=(e[i+10]&15)<<8|e[i+11];var l=12+u;while(l<o){var f=i+l;t[(e[f+1]&31)<<8|e[f+2]]=e[f];l+=((e[f+3]&15)<<8|e[f+4])+5}return t};var f=function(e,t){var r=n(e);var a=t[r];switch(a){case i.H264_STREAM_TYPE:return"video";case i.ADTS_STREAM_TYPE:return"audio";case i.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}};var d=function(e){var t=a(e);if(!t){return null}var r=4+s(e);if(r>=e.byteLength){return null}var i=null;var n;n=e[r+7];if(n&192){i={};i.pts=(e[r+9]&14)<<27|(e[r+10]&255)<<20|(e[r+11]&254)<<12|(e[r+12]&255)<<5|(e[r+13]&254)>>>3;i.pts*=4;i.pts+=(e[r+13]&6)>>>1;i.dts=i.pts;if(n&64){i.dts=(e[r+14]&14)<<27|(e[r+15]&255)<<20|(e[r+16]&254)<<12|(e[r+17]&255)<<5|(e[r+18]&254)>>>3;i.dts*=4;i.dts+=(e[r+18]&6)>>>1}}return i};var c=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var h=function(e){var t=4+s(e);var r=e.subarray(t);var i=0;var n=0;var a=false;var o;for(;n<r.byteLength-3;n++){if(r[n+2]===1){i=n+5;break}}while(i<r.byteLength){switch(r[i]){case 0:if(r[i-1]!==0){i+=2;break}else if(r[i-2]!==0){i++;break}if(n+3!==i-2){o=c(r[n+3]&31);if(o==="slice_layer_without_partitioning_rbsp_idr"){a=true}}do{i++}while(r[i]!==1&&i<r.length);n=i-2;i+=3;break;case 1:if(r[i-1]!==0||r[i-2]!==0){i+=3;break}o=c(r[n+3]&31);if(o==="slice_layer_without_partitioning_rbsp_idr"){a=true}n=i-2;i+=3;break;default:i+=3;break}}r=r.subarray(n);i-=n;n=0;if(r&&r.byteLength>3){o=c(r[n+3]&31);if(o==="slice_layer_without_partitioning_rbsp_idr"){a=true}}return a};t.exports={parseType:o,parsePat:u,parsePmt:l,parsePayloadUnitStartIndicator:a,parsePesType:f,parsePesTime:d,videoPacketContainsKeyFrame:h}},{"./stream-types.js":53}],53:[function(e,t,r){t.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],54:[function(e,t,r){var i=e("../utils/stream");var n=8589934592;var a=4294967296;var s=function(e,t){var r=1;if(e>t){r=-1}while(Math.abs(t-e)>a){e+=r*n}return e};var o=function(e){var t,r;o.prototype.init.call(this);this.type_=e;this.push=function(e){if(e.type!==this.type_){return}if(r===undefined){r=e.dts}e.dts=s(e.dts,r);e.pts=s(e.pts,r);t=e.dts;this.trigger("data",e)};this.flush=function(){r=t;this.trigger("done")};this.discontinuity=function(){r=void 0;t=void 0}};o.prototype=new i;t.exports={TimestampRolloverStream:o,handleRollover:s}},{"../utils/stream":62}],55:[function(e,t,r){t.exports={generator:e("./mp4-generator"),Transmuxer:e("./transmuxer").Transmuxer,AudioSegmentStream:e("./transmuxer").AudioSegmentStream,VideoSegmentStream:e("./transmuxer").VideoSegmentStream}},{"./mp4-generator":56,"./transmuxer":58}],56:[function(e,t,r){var i=Math.pow(2,32)-1;var n,a,s,o,u,l,f,d,c,h,p,m,v,g,y,_,b,T,S,w,k,E,C,A,O,P,I,L,D,U,x,R,M,B,N,j;(function(){var e;C={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(e in C){if(C.hasOwnProperty(e)){C[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]}}A=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);P=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);O=new Uint8Array([0,0,0,1]);I=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);D={video:I,audio:L};R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);x=new Uint8Array([0,0,0,0,0,0,0,0]);M=new Uint8Array([0,0,0,0,0,0,0,0]);B=M;N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);j=M;U=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();n=function(e){var t=[],r=0,i,n,a;for(i=1;i<arguments.length;i++){t.push(arguments[i])}i=t.length;while(i--){r+=t[i].byteLength}n=new Uint8Array(r+8);a=new DataView(n.buffer,n.byteOffset,n.byteLength);a.setUint32(0,n.byteLength);n.set(e,4);for(i=0,r=8;i<t.length;i++){n.set(t[i],r);r+=t[i].byteLength}return n};a=function(){return n(C.dinf,n(C.dref,R))};s=function(e){return n(C.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))};o=function(){return n(C.ftyp,A,O,A,P)};_=function(e){return n(C.hdlr,D[e])};u=function(e){return n(C.mdat,e)};y=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,e.duration&255,85,196,0,0]);if(e.samplerate){t[12]=e.samplerate>>>24&255;t[13]=e.samplerate>>>16&255;t[14]=e.samplerate>>>8&255;t[15]=e.samplerate&255}return n(C.mdhd,t)};g=function(e){return n(C.mdia,y(e),_(e.type),f(e))};l=function(e){return n(C.mfhd,new Uint8Array([0,0,0,0,(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255]))};f=function(e){return n(C.minf,e.type==="video"?n(C.vmhd,U):n(C.smhd,x),a(),T(e))};d=function(e,t){var r=[],i=t.length;while(i--){r[i]=w(t[i])}return n.apply(null,[C.moof,l(e)].concat(r))};c=function(e){var t=e.length,r=[];while(t--){r[t]=m(e[t])}return n.apply(null,[C.moov,p(4294967295)].concat(r).concat(h(e)))};h=function(e){var t=e.length,r=[];while(t--){r[t]=k(e[t])}return n.apply(null,[C.mvex].concat(r))};p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(C.mvhd,t)};b=function(e){var t=e.samples||[],r=new Uint8Array(4+t.length),i,a;for(a=0;a<t.length;a++){i=t[a].flags;r[a+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy}return n(C.sdtp,r)};T=function(e){return n(C.stbl,S(e),n(C.stts,j),n(C.stsc,B),n(C.stsz,N),n(C.stco,M))};(function(){var e,t;S=function(r){return n(C.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),r.type==="video"?e(r):t(r))};e=function(e){var t=e.sps||[],r=e.pps||[],i=[],a=[],s;for(s=0;s<t.length;s++){i.push((t[s].byteLength&65280)>>>8);i.push(t[s].byteLength&255);i=i.concat(Array.prototype.slice.call(t[s]))}for(s=0;s<r.length;s++){a.push((r[s].byteLength&65280)>>>8);a.push(r[s].byteLength&255);a=a.concat(Array.prototype.slice.call(r[s]))}return n(C.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(e.width&65280)>>8,e.width&255,(e.height&65280)>>8,e.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(C.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([t.length]).concat(i).concat([r.length]).concat(a))),n(C.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};t=function(e){return n(C.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(e.channelcount&65280)>>8,e.channelcount&255,(e.samplesize&65280)>>8,e.samplesize&255,0,0,0,0,(e.samplerate&65280)>>8,e.samplerate&255,0,0]),s(e))}})();v=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(e.id&4278190080)>>24,(e.id&16711680)>>16,(e.id&65280)>>8,e.id&255,0,0,0,0,(e.duration&4278190080)>>24,(e.duration&16711680)>>16,(e.duration&65280)>>8,e.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(e.width&65280)>>8,e.width&255,0,0,(e.height&65280)>>8,e.height&255,0,0]);return n(C.tkhd,t)};w=function(e){var t,r,a,s,o,u,l;t=n(C.tfhd,new Uint8Array([0,0,0,58,(e.id&4278190080)>>24,(e.id&16711680)>>16,(e.id&65280)>>8,e.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));u=Math.floor(e.baseMediaDecodeTime/(i+1));l=Math.floor(e.baseMediaDecodeTime%(i+1));r=n(C.tfdt,new Uint8Array([1,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,u&255,l>>>24&255,l>>>16&255,l>>>8&255,l&255]));o=32+20+8+16+8+8;if(e.type==="audio"){a=E(e,o);return n(C.traf,t,r,a)}s=b(e);a=E(e,s.length+o);return n(C.traf,t,r,a,s)};m=function(e){e.duration=e.duration||4294967295;return n(C.trak,v(e),g(e))};k=function(e){var t=new Uint8Array([0,0,0,0,(e.id&4278190080)>>24,(e.id&16711680)>>16,(e.id&65280)>>8,e.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(e.type!=="video"){t[t.length-1]=0}return n(C.trex,t)};(function(){var e,t,r;r=function(e,t){var r=0,i=0,n=0,a=0;if(e.length){if(e[0].duration!==undefined){r=1}if(e[0].size!==undefined){i=2}if(e[0].flags!==undefined){n=4}if(e[0].compositionTimeOffset!==undefined){a=8}}return[0,0,r|i|n|a,1,(e.length&4278190080)>>>24,(e.length&16711680)>>>16,(e.length&65280)>>>8,e.length&255,(t&4278190080)>>>24,(t&16711680)>>>16,(t&65280)>>>8,t&255]};t=function(e,t){var i,a,s,o;a=e.samples||[];t+=8+12+16*a.length;i=r(a,t);for(o=0;o<a.length;o++){s=a[o];i=i.concat([(s.duration&4278190080)>>>24,(s.duration&16711680)>>>16,(s.duration&65280)>>>8,s.duration&255,(s.size&4278190080)>>>24,(s.size&16711680)>>>16,(s.size&65280)>>>8,s.size&255,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,s.flags.degradationPriority&240<<8,s.flags.degradationPriority&15,(s.compositionTimeOffset&4278190080)>>>24,(s.compositionTimeOffset&16711680)>>>16,(s.compositionTimeOffset&65280)>>>8,s.compositionTimeOffset&255])}return n(C.trun,new Uint8Array(i))};e=function(e,t){var i,a,s,o;a=e.samples||[];t+=8+12+8*a.length;i=r(a,t);for(o=0;o<a.length;o++){s=a[o];i=i.concat([(s.duration&4278190080)>>>24,(s.duration&16711680)>>>16,(s.duration&65280)>>>8,s.duration&255,(s.size&4278190080)>>>24,(s.size&16711680)>>>16,(s.size&65280)>>>8,s.size&255])}return n(C.trun,new Uint8Array(i))};E=function(r,i){if(r.type==="audio"){return e(r,i)}return t(r,i)}})();t.exports={ftyp:o,mdat:u,moof:d,moov:c,initSegment:function(e){var t=o(),r=c(e),i;i=new Uint8Array(t.byteLength+r.byteLength);i.set(t);i.set(r,t.byteLength);return i}}},{}],57:[function(e,t,r){var i,n,a,s;i=function(e,t){var r=[],a,s,o,u,l;if(!t.length){return null}for(a=0;a<e.byteLength;){s=e[a]<<24;s|=e[a+1]<<16;s|=e[a+2]<<8;s|=e[a+3];o=n(e.subarray(a+4,a+8));u=s>1?a+s:e.byteLength;if(o===t[0]){if(t.length===1){r.push(e.subarray(a+8,u))}else{l=i(e.subarray(a+8,u),t.slice(1));if(l.length){r=r.concat(l)}}}a=u}return r};n=function(e){var t="";t+=String.fromCharCode(e[0]);t+=String.fromCharCode(e[1]);t+=String.fromCharCode(e[2]);t+=String.fromCharCode(e[3]);return t};a=function(e){var t={},r=i(e,["moov","trak"]);return r.reduce((function(e,t){var r,n,a,s,o;r=i(t,["tkhd"])[0];if(!r){return null}n=r[0];a=n===0?12:20;s=r[a]<<24|r[a+1]<<16|r[a+2]<<8|r[a+3];o=i(t,["mdia","mdhd"])[0];if(!o){return null}n=o[0];a=n===0?12:20;e[s]=o[a]<<24|o[a+1]<<16|o[a+2]<<8|o[a+3];return e}),t)};s=function(e,t){var r,n,a;r=i(t,["moof","traf"]);n=[].concat.apply([],r.map((function(t){return i(t,["tfhd"]).map((function(r){var n,a,s;n=r[4]<<24|r[5]<<16|r[6]<<8|r[7];a=e[n]||9e4;s=i(t,["tfdt"]).map((function(e){var t,r;t=e[0];r=e[4]<<24|e[5]<<16|e[6]<<8|e[7];if(t===1){r*=Math.pow(2,32);r+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]}return r}))[0];s=s||Infinity;return s/a}))})));a=Math.min.apply(null,n);return isFinite(a)?a:0};t.exports={parseType:n,timescale:a,startTime:s}},{}],58:[function(e,t,r){var i=e("../utils/stream.js");var n=e("./mp4-generator.js");var a=e("../m2ts/m2ts.js");var s=e("../codecs/adts.js");var o=e("../codecs/h264").H264Stream;var u=e("../aac");var l=e("../data/silence");var f=e("../utils/clock");var d=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var c=["width","height","profileIdc","levelIdc","profileCompatibility"];var h=9e4;var p,m,v,g;var y,_,b,T,S,w,k;y=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}};_=function(e){if(e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)){return true}return false};w=function(e,t){var r;if(e.length!==t.length){return false}for(r=0;r<e.length;r++){if(e[r]!==t[r]){return false}}return true};k=function(e){var t,r,i=0;for(t=0;t<e.length;t++){r=e[t];i+=r.data.byteLength}return i};m=function(e){var t=[],r=0,i=0,a=0,s=Infinity;m.prototype.init.call(this);this.push=function(r){b(e,r);if(e){d.forEach((function(t){e[t]=r[t]}))}t.push(r)};this.setEarliestDts=function(t){i=t-e.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(e){s=e};this.setAudioAppendStart=function(e){a=e};this.flush=function(){var i,a,s,o;if(t.length===0){this.trigger("done","AudioSegmentStream");return}i=this.trimAdtsFramesByEarliestDts_(t);e.baseMediaDecodeTime=S(e);this.prefixWithSilence_(e,i);e.samples=this.generateSampleTable_(i);s=n.mdat(this.concatenateFrameData_(i));t=[];a=n.moof(r,[e]);o=new Uint8Array(a.byteLength+s.byteLength);r++;o.set(a);o.set(s,a.byteLength);T(e);this.trigger("data",{track:e,boxes:o});this.trigger("done","AudioSegmentStream")};this.prefixWithSilence_=function(e,t){var r,i=0,n=0,o=0,u=0,d,c;if(!t.length){return}r=f.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate);i=Math.ceil(h/(e.samplerate/1024));if(a&&s){n=r-Math.max(a,s);o=Math.floor(n/i);u=o*i}if(o<1||u>h/2){return}d=l[e.samplerate];if(!d){d=t[0].data}for(c=0;c<o;c++){t.splice(c,0,{data:d})}e.baseMediaDecodeTime-=Math.floor(f.videoTsToAudioTs(u,e.samplerate))};this.trimAdtsFramesByEarliestDts_=function(t){if(e.minSegmentDts>=i){return t}e.minSegmentDts=Infinity;return t.filter((function(t){if(t.dts>=i){e.minSegmentDts=Math.min(e.minSegmentDts,t.dts);e.minSegmentPts=e.minSegmentDts;return true}return false}))};this.generateSampleTable_=function(e){var t,r,i=[];for(t=0;t<e.length;t++){r=e[t];i.push({size:r.data.byteLength,duration:1024})}return i};this.concatenateFrameData_=function(e){var t,r,i=0,n=new Uint8Array(k(e));for(t=0;t<e.length;t++){r=e[t];n.set(r.data,i);i+=r.data.byteLength}return n}};m.prototype=new i;p=function(e){var t=0,r=[],i,a;p.prototype.init.call(this);delete e.minPTS;this.gopCache_=[];this.push=function(t){b(e,t);if(t.nalUnitType==="seq_parameter_set_rbsp"&&!i){i=t.config;e.sps=[t.data];c.forEach((function(t){e[t]=i[t]}),this)}if(t.nalUnitType==="pic_parameter_set_rbsp"&&!a){a=t.data;e.pps=[t.data]}r.push(t)};this.flush=function(){var i,a,s,o,u,l;while(r.length){if(r[0].nalUnitType==="access_unit_delimiter_rbsp"){break}r.shift()}if(r.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}i=this.groupNalsIntoFrames_(r);s=this.groupFramesIntoGops_(i);if(!s[0][0].keyFrame){a=this.getGopForFusion_(r[0],e);if(a){s.unshift(a);s.byteLength+=a.byteLength;s.nalCount+=a.nalCount;s.pts=a.pts;s.dts=a.dts;s.duration+=a.duration}else{s=this.extendFirstKeyFrame_(s)}}b(e,s);e.samples=this.generateSampleTable_(s);u=n.mdat(this.concatenateNalData_(s));this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);r=[];e.baseMediaDecodeTime=S(e);this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime);this.trigger("timelineStartInfo",e.timelineStartInfo);o=n.moof(t,[e]);l=new Uint8Array(o.byteLength+u.byteLength);t++;l.set(o);l.set(u,o.byteLength);this.trigger("data",{track:e,boxes:l});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){T(e);i=undefined;a=undefined};this.getGopForFusion_=function(t){var r=45e3,i=1e4,n=Infinity,a,s,o,u,l;for(l=0;l<this.gopCache_.length;l++){u=this.gopCache_[l];o=u.gop;if(!(e.pps&&w(e.pps[0],u.pps[0]))||!(e.sps&&w(e.sps[0],u.sps[0]))){continue}if(o.dts<e.timelineStartInfo.dts){continue}a=t.dts-o.dts-o.duration;if(a>=-i&&a<=r){if(!s||n>a){s=u;n=a}}}if(s){return s.gop}return null};this.extendFirstKeyFrame_=function(e){var t;if(!e[0][0].keyFrame&&e.length>1){t=e.shift();e.byteLength-=t.byteLength;e.nalCount-=t.nalCount;e[0][0].dts=t.dts;e[0][0].pts=t.pts;e[0][0].duration+=t.duration}return e};this.groupNalsIntoFrames_=function(e){var t,r,i=[],n=[];i.byteLength=0;for(t=0;t<e.length;t++){r=e[t];if(r.nalUnitType==="access_unit_delimiter_rbsp"){if(i.length){i.duration=r.dts-i.dts;n.push(i)}i=[r];i.byteLength=r.data.byteLength;i.pts=r.pts;i.dts=r.dts}else{if(r.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){i.keyFrame=true}i.duration=r.dts-i.dts;i.byteLength+=r.data.byteLength;i.push(r)}}if(n.length&&(!i.duration||i.duration<=0)){i.duration=n[n.length-1].duration}n.push(i);return n};this.groupFramesIntoGops_=function(e){var t,r,i=[],n=[];i.byteLength=0;i.nalCount=0;i.duration=0;i.pts=e[0].pts;i.dts=e[0].dts;n.byteLength=0;n.nalCount=0;n.duration=0;n.pts=e[0].pts;n.dts=e[0].dts;for(t=0;t<e.length;t++){r=e[t];if(r.keyFrame){if(i.length){n.push(i);n.byteLength+=i.byteLength;n.nalCount+=i.nalCount;n.duration+=i.duration}i=[r];i.nalCount=r.length;i.byteLength=r.byteLength;i.pts=r.pts;i.dts=r.dts;i.duration=r.duration}else{i.duration+=r.duration;i.nalCount+=r.length;i.byteLength+=r.byteLength;i.push(r)}}if(n.length&&i.duration<=0){i.duration=n[n.length-1].duration}n.byteLength+=i.byteLength;n.nalCount+=i.nalCount;n.duration+=i.duration;n.push(i);return n};this.generateSampleTable_=function(e,t){var r,i,n,a,s,o=t||0,u=[];for(r=0;r<e.length;r++){a=e[r];for(i=0;i<a.length;i++){s=a[i];n=y();n.dataOffset=o;n.compositionTimeOffset=s.pts-s.dts;n.duration=s.duration;n.size=4*s.length;n.size+=s.byteLength;if(s.keyFrame){n.flags.dependsOn=2}o+=n.size;u.push(n)}}return u};this.concatenateNalData_=function(e){var t,r,i,n,a,s,o=0,u=e.byteLength,l=e.nalCount,f=u+4*l,d=new Uint8Array(f),c=new DataView(d.buffer);for(t=0;t<e.length;t++){n=e[t];for(r=0;r<n.length;r++){a=n[r];for(i=0;i<a.length;i++){s=a[i];c.setUint32(o,s.data.byteLength);o+=4;d.set(s.data,o);o+=s.data.byteLength}}}return d}};p.prototype=new i;b=function(e,t){if(typeof t.pts==="number"){if(e.timelineStartInfo.pts===undefined){e.timelineStartInfo.pts=t.pts}if(e.minSegmentPts===undefined){e.minSegmentPts=t.pts}else{e.minSegmentPts=Math.min(e.minSegmentPts,t.pts)}if(e.maxSegmentPts===undefined){e.maxSegmentPts=t.pts}else{e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)}}if(typeof t.dts==="number"){if(e.timelineStartInfo.dts===undefined){e.timelineStartInfo.dts=t.dts}if(e.minSegmentDts===undefined){e.minSegmentDts=t.dts}else{e.minSegmentDts=Math.min(e.minSegmentDts,t.dts)}if(e.maxSegmentDts===undefined){e.maxSegmentDts=t.dts}else{e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts)}}};T=function(e){delete e.minSegmentDts;delete e.maxSegmentDts;delete e.minSegmentPts;delete e.maxSegmentPts};S=function(e){var t,r,i=e.minSegmentDts-e.timelineStartInfo.dts;t=e.timelineStartInfo.baseMediaDecodeTime;t+=i;t=Math.max(0,t);if(e.type==="audio"){r=e.samplerate/h;t*=r;t=Math.floor(t)}return t};g=function(e,t){this.numberOfTracks=0;this.metadataStream=t;if(typeof e.remux!=="undefined"){this.remuxTracks=!!e.remux}else{this.remuxTracks=true}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;g.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}this.pendingTracks.push(e.track);this.pendingBoxes.push(e.boxes);this.pendingBytes+=e.boxes.byteLength;if(e.track.type==="video"){this.videoTrack=e.track}if(e.track.type==="audio"){this.audioTrack=e.track}}};g.prototype=new i;g.prototype.flush=function(e){var t=0,r={captions:[],captionStreams:{},metadata:[],info:{}},i,a,s,o=0,u;if(this.pendingTracks.length<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){o=this.videoTrack.timelineStartInfo.pts;c.forEach((function(e){r.info[e]=this.videoTrack[e]}),this)}else if(this.audioTrack){o=this.audioTrack.timelineStartInfo.pts;d.forEach((function(e){r.info[e]=this.audioTrack[e]}),this)}if(this.pendingTracks.length===1){r.type=this.pendingTracks[0].type}else{r.type="combined"}this.emittedTracks+=this.pendingTracks.length;s=n.initSegment(this.pendingTracks);r.initSegment=new Uint8Array(s.byteLength);r.initSegment.set(s);r.data=new Uint8Array(this.pendingBytes);for(u=0;u<this.pendingBoxes.length;u++){r.data.set(this.pendingBoxes[u],t);t+=this.pendingBoxes[u].byteLength}for(u=0;u<this.pendingCaptions.length;u++){i=this.pendingCaptions[u];i.startTime=i.startPts-o;i.startTime/=9e4;i.endTime=i.endPts-o;i.endTime/=9e4;r.captionStreams[i.stream]=true;r.captions.push(i)}for(u=0;u<this.pendingMetadata.length;u++){a=this.pendingMetadata[u];a.cueTime=a.pts-o;a.cueTime/=9e4;r.metadata.push(a)}r.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",r);if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};v=function(e){var t=this,r=true,i,n;v.prototype.init.call(this);e=e||{};this.baseMediaDecodeTime=e.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r;r.type="aac";r.metadataStream=new a.MetadataStream;r.aacStream=new u;r.audioTimestampRolloverStream=new a.TimestampRolloverStream("audio");r.timedMetadataTimestampRolloverStream=new a.TimestampRolloverStream("timed-metadata");r.adtsStream=new s;r.coalesceStream=new g(e,r.metadataStream);r.headOfPipeline=r.aacStream;r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream);r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream);r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)}));r.aacStream.on("data",(function(e){if(e.type==="timed-metadata"&&!r.audioSegmentStream){n=n||{timelineStartInfo:{baseMediaDecodeTime:t.baseMediaDecodeTime},codec:"adts",type:"audio"};r.coalesceStream.numberOfTracks++;r.audioSegmentStream=new m(n);r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)}}));r.coalesceStream.on("data",this.trigger.bind(this,"data"));r.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r;r.type="ts";r.metadataStream=new a.MetadataStream;r.packetStream=new a.TransportPacketStream;r.parseStream=new a.TransportParseStream;r.elementaryStream=new a.ElementaryStream;r.videoTimestampRolloverStream=new a.TimestampRolloverStream("video");r.audioTimestampRolloverStream=new a.TimestampRolloverStream("audio");r.timedMetadataTimestampRolloverStream=new a.TimestampRolloverStream("timed-metadata");r.adtsStream=new s;r.h264Stream=new o;r.captionStream=new a.CaptionStream;r.coalesceStream=new g(e,r.metadataStream);r.headOfPipeline=r.packetStream;r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream);r.elementaryStream.pipe(r.videoTimestampRolloverStream).pipe(r.h264Stream);r.elementaryStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream);r.elementaryStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream);r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream);r.elementaryStream.on("data",(function(e){var a;if(e.type==="metadata"){a=e.tracks.length;while(a--){if(!i&&e.tracks[a].type==="video"){i=e.tracks[a];i.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}else if(!n&&e.tracks[a].type==="audio"){n=e.tracks[a];n.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}}if(i&&!r.videoSegmentStream){r.coalesceStream.numberOfTracks++;r.videoSegmentStream=new p(i);r.videoSegmentStream.on("timelineStartInfo",(function(e){if(n){n.timelineStartInfo=e;r.audioSegmentStream.setEarliestDts(e.dts)}}));r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){if(n){r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}}));r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)}if(n&&!r.audioSegmentStream){r.coalesceStream.numberOfTracks++;r.audioSegmentStream=new m(n);r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)}}}));r.coalesceStream.on("data",this.trigger.bind(this,"data"));r.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e;if(n){n.timelineStartInfo.dts=undefined;n.timelineStartInfo.pts=undefined;T(n);n.timelineStartInfo.baseMediaDecodeTime=e;if(t.audioTimestampRolloverStream){t.audioTimestampRolloverStream.discontinuity()}}if(i){if(t.videoSegmentStream){t.videoSegmentStream.gopCache_=[];t.videoTimestampRolloverStream.discontinuity()}i.timelineStartInfo.dts=undefined;i.timelineStartInfo.pts=undefined;T(i);t.captionStream.reset();i.timelineStartInfo.baseMediaDecodeTime=e}if(t.timedMetadataTimestampRolloverStream){t.timedMetadataTimestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(e){if(n){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)}};this.push=function(e){if(r){var t=_(e);if(t&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!t&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}r=false}this.transmuxPipeline_.headOfPipeline.push(e)};this.flush=function(){r=true;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};v.prototype=new i;t.exports={Transmuxer:v,VideoSegmentStream:p,AudioSegmentStream:m,AUDIO_PROPERTIES:d,VIDEO_PROPERTIES:c}},{"../aac":38,"../codecs/adts.js":40,"../codecs/h264":41,"../data/silence":42,"../m2ts/m2ts.js":50,"../utils/clock":60,"../utils/stream.js":62,"./mp4-generator.js":56}],59:[function(e,t,r){var i=e("../m2ts/stream-types.js");var n=e("../m2ts/timestamp-rollover-stream.js").handleRollover;var a={};a.ts=e("../m2ts/probe.js");a.aac=e("../aac/probe.js");var s=9e4,o=188,u=71;var l=function(e){if(e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)){return true}return false};var f=function(e,t){var r=0,i=o,n,s;while(i<e.byteLength){if(e[r]===u&&e[i]===u){n=e.subarray(r,i);s=a.ts.parseType(n,t.pid);switch(s){case"pat":if(!t.pid){t.pid=a.ts.parsePat(n)}break;case"pmt":if(!t.table){t.table=a.ts.parsePmt(n)}break;default:break}if(t.pid&&t.table){return}r+=o;i+=o;continue}r++;i++}};var d=function(e,t,r){var i=0,n=o,s,l,f,d,c;var h=false;while(n<e.byteLength){if(e[i]===u&&e[n]===u){s=e.subarray(i,n);l=a.ts.parseType(s,t.pid);switch(l){case"pes":f=a.ts.parsePesType(s,t.table);d=a.ts.parsePayloadUnitStartIndicator(s);if(f==="audio"&&d){c=a.ts.parsePesTime(s);if(c){c.type="audio";r.audio.push(c);h=true}}break;default:break}if(h){break}i+=o;n+=o;continue}i++;n++}n=e.byteLength;i=n-o;h=false;while(i>=0){if(e[i]===u&&e[n]===u){s=e.subarray(i,n);l=a.ts.parseType(s,t.pid);switch(l){case"pes":f=a.ts.parsePesType(s,t.table);d=a.ts.parsePayloadUnitStartIndicator(s);if(f==="audio"&&d){c=a.ts.parsePesTime(s);if(c){c.type="audio";r.audio.push(c);h=true}}break;default:break}if(h){break}i-=o;n-=o;continue}i--;n--}};var c=function(e,t,r){var i=0,n=o,s,l,f,d,c,h,p,m;var v=false;var g={data:[],size:0};while(n<e.byteLength){if(e[i]===u&&e[n]===u){s=e.subarray(i,n);l=a.ts.parseType(s,t.pid);switch(l){case"pes":f=a.ts.parsePesType(s,t.table);d=a.ts.parsePayloadUnitStartIndicator(s);if(f==="video"){if(d&&!v){c=a.ts.parsePesTime(s);if(c){c.type="video";r.video.push(c);v=true}}if(!r.firstKeyFrame){if(d){if(g.size!==0){h=new Uint8Array(g.size);p=0;while(g.data.length){m=g.data.shift();h.set(m,p);p+=m.byteLength}if(a.ts.videoPacketContainsKeyFrame(h)){r.firstKeyFrame=a.ts.parsePesTime(h);r.firstKeyFrame.type="video"}g.size=0}}g.data.push(s);g.size+=s.byteLength}}break;default:break}if(v&&r.firstKeyFrame){break}i+=o;n+=o;continue}i++;n++}n=e.byteLength;i=n-o;v=false;while(i>=0){if(e[i]===u&&e[n]===u){s=e.subarray(i,n);l=a.ts.parseType(s,t.pid);switch(l){case"pes":f=a.ts.parsePesType(s,t.table);d=a.ts.parsePayloadUnitStartIndicator(s);if(f==="video"&&d){c=a.ts.parsePesTime(s);if(c){c.type="video";r.video.push(c);v=true}}break;default:break}if(v){break}i-=o;n-=o;continue}i--;n--}};var h=function(e,t){if(e.audio&&e.audio.length){var r=t;if(typeof r==="undefined"){r=e.audio[0].dts}e.audio.forEach((function(e){e.dts=n(e.dts,r);e.pts=n(e.pts,r);e.dtsTime=e.dts/s;e.ptsTime=e.pts/s}))}if(e.video&&e.video.length){var i=t;if(typeof i==="undefined"){i=e.video[0].dts}e.video.forEach((function(e){e.dts=n(e.dts,i);e.pts=n(e.pts,i);e.dtsTime=e.dts/s;e.ptsTime=e.pts/s}));if(e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=n(a.dts,i);a.pts=n(a.pts,i);a.dtsTime=a.dts/s;a.ptsTime=a.dts/s}}};var p=function(e){var t=false,r=0,i=null,n=null,o=0,u=0,l;while(e.length-u>=3){var f=a.aac.parseType(e,u);switch(f){case"timed-metadata":if(e.length-u<10){t=true;break}o=a.aac.parseId3TagSize(e,u);if(o>e.length){t=true;break}if(n===null){l=e.subarray(u,u+o);n=a.aac.parseAacTimestamp(l)}u+=o;break;case"audio":if(e.length-u<7){t=true;break}o=a.aac.parseAdtsSize(e,u);if(o>e.length){t=true;break}if(i===null){l=e.subarray(u,u+o);i=a.aac.parseSampleRate(l)}r++;u+=o;break;default:u++;break}if(t){return null}}if(i===null||n===null){return null}var d=s/i;var c={audio:[{type:"audio",dts:n,pts:n},{type:"audio",dts:n+r*1024*d,pts:n+r*1024*d}]};return c};var m=function(e){var t={pid:null,table:null};var r={};f(e,t);for(var n in t.table){if(t.table.hasOwnProperty(n)){var a=t.table[n];switch(a){case i.H264_STREAM_TYPE:r.video=[];c(e,t,r);if(r.video.length===0){delete r.video}break;case i.ADTS_STREAM_TYPE:r.audio=[];d(e,t,r);if(r.audio.length===0){delete r.audio}break;default:break}}}return r};var v=function(e,t){var r=l(e);var i;if(r){i=p(e)}else{i=m(e)}if(!i||!i.audio&&!i.video){return null}h(i,t);return i};t.exports={inspect:v}},{"../aac/probe.js":39,"../m2ts/probe.js":52,"../m2ts/stream-types.js":53,"../m2ts/timestamp-rollover-stream.js":54}],60:[function(e,t,r){var i=9e4,n,a,s,o,u,l;n=function(e){return e*i};a=function(e,t){return e*t};s=function(e){return e/i};o=function(e,t){return e/t};u=function(e,t){return n(o(e,t))};l=function(e,t){return a(s(e),t)};t.exports={secondsToVideoTs:n,secondsToAudioTs:a,videoTsToSeconds:s,audioTsToSeconds:o,audioTsToVideoTs:u,videoTsToAudioTs:l}},{}],61:[function(e,t,r){var i;i=function(e){var t=e.byteLength,r=0,i=0;this.length=function(){return 8*t};this.bitsAvailable=function(){return 8*t+i};this.loadWord=function(){var n=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(s===0){throw new Error("no bytes available")}a.set(e.subarray(n,n+s));r=new DataView(a.buffer).getUint32(0);i=s*8;t-=s};this.skipBits=function(e){var n;if(i>e){r<<=e;i-=e}else{e-=i;n=Math.floor(e/8);e-=n*8;t-=n;this.loadWord();r<<=e;i-=e}};this.readBits=function(e){var n=Math.min(i,e),a=r>>>32-n;i-=n;if(i>0){r<<=n}else if(t>0){this.loadWord()}n=e-n;if(n>0){return a<<n|this.readBits(n)}return a};this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e){if((r&2147483648>>>e)!==0){r<<=e;i-=e;return e}}this.loadWord();return e+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1};this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();if(1&e){return 1+e>>>1}return-1*(e>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};t.exports=i},{}],62:[function(e,t,r){var i=function(){this.init=function(){var e={};this.on=function(t,r){if(!e[t]){e[t]=[]}e[t]=e[t].concat(r)};this.off=function(t,r){var i;if(!e[t]){return false}i=e[t].indexOf(r);e[t]=e[t].slice();e[t].splice(i,1);return i>-1};this.trigger=function(t){var r,i,n,a;r=e[t];if(!r){return}if(arguments.length===2){n=r.length;for(i=0;i<n;++i){r[i].call(this,arguments[1])}}else{a=[];i=arguments.length;for(i=1;i<arguments.length;++i){a.push(arguments[i])}n=r.length;for(i=0;i<n;++i){r[i].apply(this,a)}}};this.dispose=function(){e={}}}};i.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}));this.on("done",(function(t){e.flush(t)}));return e};i.prototype.push=function(e){this.trigger("data",e)};i.prototype.flush=function(e){this.trigger("done",e)};t.exports=i},{}],63:[function(e,t,r){(function(e){var i={buildAbsoluteURL:function(e,t){t=t.trim();if(/^[a-z]+:/i.test(t)){return t}var r=null;var n=null;var a=/^([^#]*)(.*)$/.exec(t);if(a){n=a[2];t=a[1]}var s=/^([^\?]*)(.*)$/.exec(t);if(s){r=s[2];t=s[1]}var o=/^([^#]*)(.*)$/.exec(e);if(o){e=o[1]}var u=/^([^\?]*)(.*)$/.exec(e);if(u){e=u[1]}var l=/^(([a-z]+:)?\/\/[^:\/]+(:[0-9]+)?)?(\/?.*)$/i.exec(e);if(!l){throw new Error("Error trying to parse base URL.")}var f=l[2]||"";var d=l[1]||"";var c=l[4];if(c.indexOf("/")!==0&&d!==""){c="/"+c}var h=null;if(/^\/\//.test(t)){h=f+"//"+i.buildAbsolutePath("",t.substring(2))}else if(/^\//.test(t)){h=d+"/"+i.buildAbsolutePath("",t.substring(1))}else{h=i.buildAbsolutePath(d+c,t)}if(r){h+=r}if(n){h+=n}return h},buildAbsolutePath:function(e,t){var r=t;var i,n="",a=e.replace(/[^\/]*$/,r.replace(/(\/|^)(?:\.?\/+)+/g,"$1"));for(var s,o=0;s=a.indexOf("/../",o),s>-1;o=s+i){i=/^\/(?:\.\.\/)*/.exec(a.slice(s))[0].length;n=(n+a.substring(o,s)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(i-1)/3+"}$"),"/")}return n+a.substr(o)}};if(typeof r==="object"&&typeof t==="object")t.exports=i;else if(typeof r==="object")r["URLToolkit"]=i;else e["URLToolkit"]=i})(this)},{}],64:[function(e,t,r){(function(i){Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var a=e("global/window");var s=n(a);var o=typeof window!=="undefined"?window["videojs"]:typeof i!=="undefined"?i["videojs"]:null;var u=n(o);var l=function e(t){Object.defineProperties(t.frame,{id:{get:function e(){u["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return t.value.key}},value:{get:function e(){u["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return t.value.data}},privateData:{get:function e(){u["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return t.value.data}}})};var f=function e(t){var r=undefined;if(isNaN(t)||Math.abs(t)===Infinity){r=Number.MAX_VALUE}else{r=t}return r};var d=function e(t,r,i){var n=s["default"].WebKitDataCue||s["default"].VTTCue;if(r){r.forEach((function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new n(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))}),t)}if(i){(function(){var e=f(t.mediaSource_.duration);i.forEach((function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach((function(e){var r=new n(t,t,e.value||e.url||e.data||"");r.frame=e;r.value=e;l(r);this.metadataTrack_.addCue(r)}),this)}),t);if(t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){(function(){var r=t.metadataTrack_.cues;var i=[];for(var n=0;n<r.length;n++){if(r[n]){i.push(r[n])}}var a=i.reduce((function(e,t){var r=e[t.startTime]||[];r.push(t);e[t.startTime]=r;return e}),{});var s=Object.keys(a).sort((function(e,t){return Number(e)-Number(t)}));s.forEach((function(t,r){var i=a[t];var n=Number(s[r+1])||e;i.forEach((function(e){e.endTime=n}))}))})()}})()}};r["default"]={addTextTrackData:d,durationOfVideo:f};t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"global/window":32}],65:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function e(t){return/mp4a\.\d+.\d+/i.test(t)};var n=function e(t){return/avc1\.[\da-f]+/i.test(t)};var a=function e(t){var r={type:"",parameters:{}};var i=t.trim().split(";");r.type=i.shift().trim();i.forEach((function(e){var t=e.trim().split("=");if(t.length>1){var i=t[0].replace(/"/g,"").trim();var n=t[1].replace(/"/g,"").trim();r.parameters[i]=n}}));return r};var s=function e(t){return t.map((function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,r){var i=("00"+Number(t).toString(16)).slice(-2);var n=("00"+Number(r).toString(16)).slice(-2);return"avc1."+i+"00"+n}))}))};r["default"]={isAudioCodec:i,parseContentType:a,isVideoCodec:n,translateLegacyCodecs:s};t.exports=r["default"]},{}],66:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function e(t,r,i){var n=r.player_;if(i.captions&&i.captions.length){if(!t.inbandTextTracks_){t.inbandTextTracks_={}}for(var a in i.captionStreams){if(!t.inbandTextTracks_[a]){n.tech_.trigger({type:"usage",name:"hls-608"});var s=n.textTracks().getTrackById(a);if(s){t.inbandTextTracks_[a]=s}else{t.inbandTextTracks_[a]=n.addRemoteTextTrack({kind:"captions",id:a,label:a},false).track}}}}if(i.metadata&&i.metadata.length&&!t.metadataTrack_){t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;t.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType}};r["default"]=i;t.exports=r["default"]},{}],67:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:1024*32};r["default"]=i;t.exports=r["default"]},{}],68:[function(e,t,r){(function(i){Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var a=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("global/document");var f=s(l);var d=typeof window!=="undefined"?window["videojs"]:typeof i!=="undefined"?i["videojs"]:null;var c=s(d);var h=e("./flash-source-buffer");var p=s(h);var m=e("./flash-constants");var v=s(m);var g=e("./codec-utils");var y=function(e){u(t,e);function t(){var e=this;o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.sourceBuffers=[];this.readyState="closed";this.on(["sourceopen","webkitsourceopen"],(function(t){e.swfObj=f["default"].getElementById(t.swfId);e.player_=(0,c["default"])(e.swfObj.parentNode);e.tech_=e.swfObj.tech;e.readyState="open";e.tech_.on("seeking",(function(){var t=e.sourceBuffers.length;while(t--){e.sourceBuffers[t].abort()}}));if(e.swfObj){e.swfObj.vjs_load()}}))}n(t,[{key:"addSeekableRange_",value:function e(){}},{key:"addSourceBuffer",value:function e(t){var r=(0,g.parseContentType)(t);var i=undefined;if(r.type==="video/mp2t"||r.type==="audio/mp2t"){i=new p["default"](this)}else{throw new Error("NotSupportedError (Video.js)")}this.sourceBuffers.push(i);return i}},{key:"endOfStream",value:function e(t){if(t==="network"){this.tech_.error(2)}else if(t==="decode"){this.tech_.error(3)}if(this.readyState!=="ended"){this.readyState="ended";this.swfObj.vjs_endOfStream()}}}]);return t}(c["default"].EventTarget);r["default"]=y;try{Object.defineProperty(y.prototype,"duration",{get:function e(){if(!this.swfObj){return NaN}return this.swfObj.vjs_getProperty("duration")},set:function e(t){var r=undefined;var i=this.swfObj.vjs_getProperty("duration");this.swfObj.vjs_setProperty("duration",t);if(t<i){for(r=0;r<this.sourceBuffers.length;r++){this.sourceBuffers[r].remove(t,i)}}return t}})}catch(Qv){y.prototype.duration=NaN}for(var _ in v["default"]){y[_]=v["default"][_]}t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./codec-utils":65,"./flash-constants":67,"./flash-source-buffer":69,"global/document":31}],69:[function(e,t,r){(function(i){Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var a=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("global/window");var f=s(l);var d=typeof window!=="undefined"?window["videojs"]:typeof i!=="undefined"?i["videojs"]:null;var c=s(d);var h=e("mux.js/lib/flv");var p=s(h);var m=e("./remove-cues-from-track");var v=s(m);var g=e("./create-text-tracks-if-necessary");var y=s(g);var _=e("./add-text-track-data");var b=e("./flash-transmuxer-worker");var T=s(b);var S=e("webworkify");var w=s(S);var k=e("./flash-constants");var E=s(k);var C=function e(t){f["default"].setTimeout(t,E["default"].TIME_BETWEEN_CHUNKS)};var A=function e(){return Math.random().toString(36).slice(2,8)};var O=function e(t,r){if(typeof r!=="number"||r<0){r=0}var i=Math.pow(10,r);return Math.round(t*i)/i};var P=function(e){u(t,e);function t(e){var r=this;o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var i=undefined;this.chunkSize_=E["default"].BYTES_PER_CHUNK;this.buffer_=[];this.bufferSize_=0;this.basePtsOffset_=NaN;this.mediaSource_=e;this.audioBufferEnd_=NaN;this.videoBufferEnd_=NaN;this.updating=false;this.timestampOffset_=0;i=f["default"].btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(p["default"].getFlvHeader())));var n=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+n+A();this.flashEncodedDataName_="vjs_flashEncodedData_"+n+A();f["default"][this.flashEncodedHeaderName_]=function(){delete f["default"][r.flashEncodedHeaderName_];return i};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_);this.transmuxer_=(0,w["default"])(T["default"]);this.transmuxer_.postMessage({action:"init",options:{}});this.transmuxer_.onmessage=function(e){if(e.data.action==="data"){r.receiveBuffer_(e.data.segment)}};this.one("updateend",(function(){r.mediaSource_.tech_.trigger("loadedmetadata")}));Object.defineProperty(this,"timestampOffset",{get:function e(){return this.timestampOffset_},set:function e(t){if(typeof t==="number"&&t>=0){this.timestampOffset_=t;this.mediaSource_.swfObj.vjs_discontinuity();this.basePtsOffset_=NaN;this.audioBufferEnd_=NaN;this.videoBufferEnd_=NaN;this.transmuxer_.postMessage({action:"reset"})}}});Object.defineProperty(this,"buffered",{get:function e(){if(!this.mediaSource_||!this.mediaSource_.swfObj||!("vjs_getProperty"in this.mediaSource_.swfObj)){return c["default"].createTimeRange()}var t=this.mediaSource_.swfObj.vjs_getProperty("buffered");if(t&&t.length){t[0][0]=O(t[0][0],3);t[0][1]=O(t[0][1],3)}return c["default"].createTimeRanges(t)}});this.mediaSource_.player_.on("seeked",(function(){(0,v["default"])(0,Infinity,r.metadataTrack_);if(r.inbandTextTracks_){for(var e in r.inbandTextTracks_){(0,v["default"])(0,Infinity,r.inbandTextTracks_[e])}}}));var s=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",s);this.mediaSource_.player_.tech_.hls.on("dispose",(function(){r.transmuxer_.terminate();r.mediaSource_.player_.tech_.off("hls-reset",s)}))}n(t,[{key:"appendBuffer",value:function e(t){var r=undefined;if(this.updating){r=new Error("SourceBuffer.append() cannot be called "+"while an update is in progress");r.name="InvalidStateError";r.code=11;throw r}this.updating=true;this.mediaSource_.readyState="open";this.trigger({type:"update"});this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function e(){this.buffer_=[];this.bufferSize_=0;this.mediaSource_.swfObj.vjs_abort();if(this.updating){this.updating=false;this.trigger({type:"updateend"})}}},{key:"remove",value:function e(t,r){(0,v["default"])(t,r,this.metadataTrack_);if(this.inbandTextTracks_){for(var i in this.inbandTextTracks_){(0,v["default"])(t,r,this.inbandTextTracks_[i])}}this.trigger({type:"update"});this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function e(t){var r=this;(0,y["default"])(this,this.mediaSource_,t);(0,_.addTextTrackData)(this,t.captions,t.metadata);C((function(){var e=r.convertTagsToData_(t);if(r.buffer_.length===0){C(r.processBuffer_.bind(r))}if(e){r.buffer_.push(e);r.bufferSize_+=e.byteLength}}))}},{key:"processBuffer_",value:function e(){var t=this;var r=E["default"].BYTES_PER_CHUNK;if(!this.buffer_.length){if(this.updating!==false){this.updating=false;this.trigger({type:"updateend"})}return}var i=this.buffer_[0].subarray(0,r);if(i.byteLength<r||this.buffer_[0].byteLength===r){this.buffer_.shift()}else{this.buffer_[0]=this.buffer_[0].subarray(r)}this.bufferSize_-=i.byteLength;var n=[];var a=i.byteLength;for(var s=0;s<a;s++){n.push(String.fromCharCode(i[s]))}var o=f["default"].btoa(n.join(""));f["default"][this.flashEncodedDataName_]=function(){C(t.processBuffer_.bind(t));delete f["default"][t.flashEncodedDataName_];return o};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}},{key:"convertTagsToData_",value:function e(t){var r=0;var i=this.mediaSource_.tech_;var n=0;var a=undefined;var s=t.tags.videoTags;var o=t.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(s.length||o.length)){var u=s[0]||{pts:Infinity};var l=o[0]||{pts:Infinity};this.basePtsOffset_=Math.min(l.pts,u.pts)}if(i.seeking()){this.videoBufferEnd_=NaN;this.audioBufferEnd_=NaN}if(isNaN(this.videoBufferEnd_)){if(i.buffered().length){n=i.buffered().end(0)-this.timestampOffset}if(i.seeking()){n=Math.max(n,i.currentTime()-this.timestampOffset)}n*=1e3;n+=this.basePtsOffset_}else{n=this.videoBufferEnd_+.1}var f=s.length;if(f&&s[f-1].pts>=n){while(--f){var d=s[f];if(d.pts>n){continue}if(d.keyFrame||d.metaDataTag){break}}while(f){var c=s[f-1];if(!c.metaDataTag){break}f--}}var h=s.slice(f);var p=undefined;if(isNaN(this.audioBufferEnd_)){p=n}else{p=this.audioBufferEnd_+.1}if(h.length){p=Math.min(p,h[0].pts)}f=0;while(f<o.length){if(o[f].pts>=p){break}f++}var m=o.slice(f);if(m.length){this.audioBufferEnd_=m[m.length-1].pts}if(h.length){this.videoBufferEnd_=h[h.length-1].pts}var v=this.getOrderedTags_(h,m);if(v.length===0){return}if(v[0].pts<n&&i.seeking()){var g=1/30;var y=i.currentTime();var _=(n-v[0].pts)/1e3;var b=y-_;if(b<g){b=0}try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(b)}catch(Qv){}}for(var T=0;T<v.length;T++){r+=v[T].bytes.byteLength}a=new Uint8Array(r);for(var T=0,S=0;T<v.length;T++){a.set(v[T].bytes,S);S+=v[T].bytes.byteLength}return a}},{key:"getOrderedTags_",value:function e(t,r){var i=undefined;var n=[];while(t.length||r.length){if(!t.length){i=r.shift()}else if(!r.length){i=t.shift()}else if(r[0].dts<t[0].dts){i=r.shift()}else{i=t.shift()}n.push(i)}return n}},{key:"onHlsReset_",value:function e(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]);return t}(c["default"].EventTarget);r["default"]=P;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./add-text-track-data":64,"./create-text-tracks-if-necessary":66,"./flash-constants":67,"./flash-transmuxer-worker":70,"./remove-cues-from-track":72,"global/window":32,"mux.js/lib/flv":46,webworkify:76}],70:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=e("global/window");var o=n(s);var u=e("mux.js/lib/flv");var l=n(u);var f=function e(t){t.on("data",(function(e){o["default"].postMessage({action:"data",segment:e})}));t.on("done",(function(e){o["default"].postMessage({action:"done"})}))};var d=function(){function e(t){a(this,e);this.options=t||{};this.init()}i(e,[{key:"init",value:function e(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new l["default"].Transmuxer(this.options);f(this.transmuxer)}},{key:"push",value:function e(t){var r=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(r)}},{key:"reset",value:function e(){this.init()}},{key:"flush",value:function e(){this.transmuxer.flush()}},{key:"resetCaptions",value:function e(){this.transmuxer.resetCaptions()}}]);return e}();var c=function e(t){t.onmessage=function(e){if(e.data.action==="init"&&e.data.options){this.messageHandlers=new d(e.data.options);return}if(!this.messageHandlers){this.messageHandlers=new d}if(e.data&&e.data.action&&e.data.action!=="init"){if(this.messageHandlers[e.data.action]){this.messageHandlers[e.data.action](e.data)}}}};r["default"]=function(e){return new c(e)};t.exports=r["default"]},{"global/window":32,"mux.js/lib/flv":46}],71:[function(e,t,r){(function(i){Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var a=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=e("global/window");var f=s(l);var d=e("global/document");var c=s(d);var h=typeof window!=="undefined"?window["videojs"]:typeof i!=="undefined"?i["videojs"]:null;var p=s(h);var m=e("./virtual-source-buffer");var v=s(m);var g=e("./add-text-track-data");var y=e("./codec-utils");var _=function(e){u(t,e);function t(){var e=this;o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var r=undefined;this.nativeMediaSource_=new f["default"].MediaSource;for(r in this.nativeMediaSource_){if(!(r in t.prototype)&&typeof this.nativeMediaSource_[r]==="function"){this[r]=this.nativeMediaSource_[r].bind(this.nativeMediaSource_)}}this.duration_=NaN;Object.defineProperty(this,"duration",{get:function e(){if(this.duration_===Infinity){return this.duration_}return this.nativeMediaSource_.duration},set:function e(t){this.duration_=t;if(t!==Infinity){this.nativeMediaSource_.duration=t;return}}});Object.defineProperty(this,"seekable",{get:function e(){if(this.duration_===Infinity){return p["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]])}return this.nativeMediaSource_.seekable}});Object.defineProperty(this,"readyState",{get:function e(){return this.nativeMediaSource_.readyState}});Object.defineProperty(this,"activeSourceBuffers",{get:function e(){return this.activeSourceBuffers_}});this.sourceBuffers=[];this.activeSourceBuffers_=[];this.updateActiveSourceBuffers_=function(){e.activeSourceBuffers_.length=0;if(e.sourceBuffers.length===1){var t=e.sourceBuffers[0];t.appendAudioInitSegment_=true;t.audioDisabled_=!t.audioCodec_;e.activeSourceBuffers_.push(t);return}var r=false;var i=true;for(var n=0;n<e.player_.audioTracks().length;n++){var a=e.player_.audioTracks()[n];if(a.enabled&&a.kind!=="main"){r=true;i=false;break}}e.sourceBuffers.forEach((function(t){t.appendAudioInitSegment_=true;if(t.videoCodec_&&t.audioCodec_){t.audioDisabled_=r}else if(t.videoCodec_&&!t.audioCodec_){t.audioDisabled_=true;i=false}else if(!t.videoCodec_&&t.audioCodec_){t.audioDisabled_=i;if(i){return}}e.activeSourceBuffers_.push(t)}))};this.onPlayerMediachange_=function(){e.sourceBuffers.forEach((function(e){e.appendAudioInitSegment_=true}))};this.onHlsReset_=function(){e.sourceBuffers.forEach((function(e){if(e.transmuxer_){e.transmuxer_.postMessage({action:"resetCaptions"})}}))};["sourceopen","sourceclose","sourceended"].forEach((function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))}),this);this.on("sourceopen",(function(t){var r=c["default"].querySelector('[src="'+e.url_+'"]');if(!r){return}e.player_=(0,p["default"])(r.parentNode);e.player_.tech_.on("hls-reset",e.onHlsReset_);if(e.player_.audioTracks&&e.player_.audioTracks()){e.player_.audioTracks().on("change",e.updateActiveSourceBuffers_);e.player_.audioTracks().on("addtrack",e.updateActiveSourceBuffers_);e.player_.audioTracks().on("removetrack",e.updateActiveSourceBuffers_)}e.player_.on("mediachange",e.onPlayerMediachange_)}));this.on("sourceended",(function(t){var r=(0,g.durationOfVideo)(e.duration);for(var i=0;i<e.sourceBuffers.length;i++){var n=e.sourceBuffers[i];var a=n.metadataTrack_&&n.metadataTrack_.cues;if(a&&a.length){a[a.length-1].endTime=r}}}));this.on("sourceclose",(function(e){this.sourceBuffers.forEach((function(e){if(e.transmuxer_){e.transmuxer_.terminate()}}));this.sourceBuffers.length=0;if(!this.player_){return}if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)}if(this.player_.el_){this.player_.off("mediachange",this.onPlayerMediachange_);this.player_.tech_.off("hls-reset",this.onHlsReset_)}}))}n(t,[{key:"addSeekableRange_",value:function e(t,r){var i=undefined;if(this.duration!==Infinity){i=new Error("MediaSource.addSeekableRange() can only be invoked "+"when the duration is Infinity");i.name="InvalidStateError";i.code=11;throw i}if(r>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=r}}},{key:"addSourceBuffer",value:function e(t){var r=undefined;var i=(0,y.parseContentType)(t);if(/^(video|audio)\/mp2t$/i.test(i.type)){var n=[];if(i.parameters&&i.parameters.codecs){n=i.parameters.codecs.split(",");n=(0,y.translateLegacyCodecs)(n);n=n.filter((function(e){return(0,y.isAudioCodec)(e)||(0,y.isVideoCodec)(e)}))}if(n.length===0){n=["avc1.4d400d","mp4a.40.2"]}r=new v["default"](this,n);if(this.sourceBuffers.length!==0){this.sourceBuffers[0].createRealSourceBuffers_();r.createRealSourceBuffers_();this.sourceBuffers[0].audioDisabled_=true}}else{r=this.nativeMediaSource_.addSourceBuffer(t)}this.sourceBuffers.push(r);return r}}]);return t}(p["default"].EventTarget);r["default"]=_;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./virtual-source-buffer":75,"global/document":31,"global/window":32}],72:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function e(t,r,i){var n=undefined;var a=undefined;if(!i){return}if(!i.cues){return}n=i.cues.length;while(n--){a=i.cues[n];if(a.startTime<=r&&a.endTime>=t){i.removeCue(a)}}};r["default"]=i;t.exports=r["default"]},{}],73:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=e("global/window");var o=n(s);var u=e("mux.js/lib/mp4");var l=n(u);var f=function e(t){t.on("data",(function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var r=e.data;e.data=r.buffer;o["default"].postMessage({action:"data",segment:e,byteOffset:r.byteOffset,byteLength:r.byteLength},[e.data])}));if(t.captionStream){t.captionStream.on("data",(function(e){o["default"].postMessage({action:"caption",data:e})}))}t.on("done",(function(e){o["default"].postMessage({action:"done"})}))};var d=function(){function e(t){a(this,e);this.options=t||{};this.init()}i(e,[{key:"init",value:function e(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new l["default"].Transmuxer(this.options);f(this.transmuxer)}},{key:"push",value:function e(t){var r=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(r)}},{key:"reset",value:function e(){this.init()}},{key:"setTimestampOffset",value:function e(t){var r=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(r*9e4))}},{key:"setAudioAppendStart",value:function e(t){this.transmuxer.setAudioAppendStart(Math.ceil(t.appendStart*9e4))}},{key:"flush",value:function e(t){this.transmuxer.flush()}},{key:"resetCaptions",value:function e(){this.transmuxer.resetCaptions()}}]);return e}();var c=function e(t){t.onmessage=function(e){if(e.data.action==="init"&&e.data.options){this.messageHandlers=new d(e.data.options);return}if(!this.messageHandlers){this.messageHandlers=new d}if(e.data&&e.data.action&&e.data.action!=="init"){if(this.messageHandlers[e.data.action]){this.messageHandlers[e.data.action](e.data)}}}};r["default"]=function(e){return new c(e)};t.exports=r["default"]},{"global/window":32,"mux.js/lib/mp4":55}],74:[function(e,t,r){(function(t){Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var n=e("global/window");var a=i(n);var s=e("./flash-media-source");var o=i(s);var u=e("./html-media-source");var l=i(u);var f=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var d=i(f);var c=0;var h={mode:"auto"};d["default"].mediaSources={};var p=function e(t,r){var i=d["default"].mediaSources[t];if(i){i.trigger({type:"sourceopen",swfId:r})}else{throw new Error("Media Source not found (Video.js)")}};var m=function e(){return!!a["default"].MediaSource&&!!a["default"].MediaSource.isTypeSupported&&a["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};var v=function e(t){var r=d["default"].mergeOptions(h,t);this.MediaSource={open:p,supportsNativeMediaSources:m};if(r.mode==="html5"||r.mode==="auto"&&m()){return new l["default"]}else if(d["default"].getTech("Flash")){return new o["default"]}throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")};r.MediaSource=v;v.open=p;v.supportsNativeMediaSources=m;var g={createObjectURL:function e(t){var r="blob:vjs-media-source/";var i=undefined;if(t instanceof l["default"]){i=a["default"].URL.createObjectURL(t.nativeMediaSource_);t.url_=i;return i}if(!(t instanceof o["default"])){i=a["default"].URL.createObjectURL(t);t.url_=i;return i}i=r+c;c++;d["default"].mediaSources[i]=t;return i}};r.URL=g;d["default"].MediaSource=v;d["default"].URL=g}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./flash-media-source":68,"./html-media-source":71,"global/window":32}],75:[function(e,t,r){(function(i){Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var a=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=typeof window!=="undefined"?window["videojs"]:typeof i!=="undefined"?i["videojs"]:null;var f=s(l);var d=e("./create-text-tracks-if-necessary");var c=s(d);var h=e("./remove-cues-from-track");var p=s(h);var m=e("./add-text-track-data");var v=e("webworkify");var g=s(v);var y=e("./transmuxer-worker");var _=s(y);var b=e("./codec-utils");var T=function e(t,r){var i=t.addSourceBuffer(r);var n=Object.create(null);n.updating=false;n.realBuffer_=i;var a=function(e){if(typeof i[e]==="function"){n[e]=function(){return i[e].apply(i,arguments)}}else if(typeof n[e]==="undefined"){Object.defineProperty(n,e,{get:function t(){return i[e]},set:function t(r){return i[e]=r}})}};for(var s in i){a(s)}return n};var S=function(e){u(t,e);function t(e,r){var i=this;o(this,t);a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,f["default"].EventTarget);this.timestampOffset_=0;this.pendingBuffers_=[];this.bufferUpdating_=false;this.mediaSource_=e;this.codecs_=r;this.audioCodec_=null;this.videoCodec_=null;this.audioDisabled_=false;this.appendAudioInitSegment_=true;var n={remux:false};this.codecs_.forEach((function(e){if((0,b.isAudioCodec)(e)){i.audioCodec_=e}else if((0,b.isVideoCodec)(e)){i.videoCodec_=e}}));this.transmuxer_=(0,g["default"])(_["default"]);this.transmuxer_.postMessage({action:"init",options:n});this.transmuxer_.onmessage=function(e){if(e.data.action==="data"){return i.data_(e)}if(e.data.action==="done"){return i.done_(e)}};Object.defineProperty(this,"timestampOffset",{get:function e(){return this.timestampOffset_},set:function e(t){if(typeof t==="number"&&t>=0){this.timestampOffset_=t;this.appendAudioInitSegment_=true;this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t})}}});Object.defineProperty(this,"appendWindowStart",{get:function e(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function e(t){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=t}if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=t}}});Object.defineProperty(this,"updating",{get:function e(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(this,"buffered",{get:function e(){var t=null;var r=null;var i=0;var n=[];var a=[];if(!this.videoBuffer_&&!this.audioBuffer_){return f["default"].createTimeRange()}if(!this.videoBuffer_){return this.audioBuffer_.buffered}if(!this.audioBuffer_){return this.videoBuffer_.buffered}if(this.audioDisabled_){return this.videoBuffer_.buffered}if(this.videoBuffer_.buffered.length===0&&this.audioBuffer_.buffered.length===0){return f["default"].createTimeRange()}var s=this.videoBuffer_.buffered;var o=this.audioBuffer_.buffered;var u=s.length;while(u--){n.push({time:s.start(u),type:"start"});n.push({time:s.end(u),type:"end"})}u=o.length;while(u--){n.push({time:o.start(u),type:"start"});n.push({time:o.end(u),type:"end"})}n.sort((function(e,t){return e.time-t.time}));for(u=0;u<n.length;u++){if(n[u].type==="start"){i++;if(i===2){t=n[u].time}}else if(n[u].type==="end"){i--;if(i===1){r=n[u].time}}if(t!==null&&r!==null){a.push([t,r]);t=null;r=null}}return f["default"].createTimeRanges(a)}})}n(t,[{key:"data_",value:function e(t){var r=t.data.segment;r.data=new Uint8Array(r.data,t.data.byteOffset,t.data.byteLength);r.initSegment=new Uint8Array(r.initSegment.data,r.initSegment.byteOffset,r.initSegment.byteLength);(0,c["default"])(this,this.mediaSource_,r);this.pendingBuffers_.push(r);return}},{key:"done_",value:function e(t){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_();return}},{key:"createRealSourceBuffers_",value:function e(){var t=this;var r=["audio","video"];r.forEach((function(e){if(!t[e+"Codec_"]){return}if(t[e+"Buffer_"]){return}var i=null;if(t.mediaSource_[e+"Buffer_"]){i=t.mediaSource_[e+"Buffer_"];i.updating=false}else{var n=e+"Codec_";var a=e+'/mp4;codecs="'+t[n]+'"';i=T(t.mediaSource_.nativeMediaSource_,a);t.mediaSource_[e+"Buffer_"]=i}t[e+"Buffer_"]=i;["update","updatestart","updateend"].forEach((function(n){i.addEventListener(n,(function(){if(e==="audio"&&t.audioDisabled_){return}if(n==="updateend"){t[e+"Buffer_"].updating=false}var i=r.every((function(r){if(r==="audio"&&t.audioDisabled_){return true}if(e!==r&&t[r+"Buffer_"]&&t[r+"Buffer_"].updating){return false}return true}));if(i){return t.trigger(n)}}))}))}))}},{key:"appendBuffer",value:function e(t){this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var r=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:r.end(r.length-1)})}this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function e(t,r){if(this.videoBuffer_){this.videoBuffer_.updating=true;this.videoBuffer_.remove(t,r)}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.updating=true;this.audioBuffer_.remove(t,r)}(0,p["default"])(t,r,this.metadataTrack_);if(this.inbandTextTracks_){for(var i in this.inbandTextTracks_){(0,p["default"])(t,r,this.inbandTextTracks_[i])}}}},{key:"processPendingSegments_",value:function e(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};t=this.pendingBuffers_.reduce((function(e,t){var r=t.type;var i=t.data;var n=t.initSegment;e[r].segments.push(i);e[r].bytes+=i.byteLength;e[r].initSegment=n;if(t.captions){e.captions=e.captions.concat(t.captions)}if(t.info){e[r].info=t.info}if(t.metadata){e.metadata=e.metadata.concat(t.metadata)}return e}),t);if(!this.videoBuffer_&&!this.audioBuffer_){if(t.video.bytes===0){this.videoCodec_=null}if(t.audio.bytes===0){this.audioCodec_=null}this.createRealSourceBuffers_()}if(t.audio.info){this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info})}if(t.video.info){this.mediaSource_.trigger({type:"videoinfo",info:t.video.info})}if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){t.audio.segments.unshift(t.audio.initSegment);t.audio.bytes+=t.audio.initSegment.byteLength}this.appendAudioInitSegment_=false}if(this.videoBuffer_){t.video.segments.unshift(t.video.initSegment);t.video.bytes+=t.video.initSegment.byteLength;this.concatAndAppendSegments_(t.video,this.videoBuffer_);(0,m.addTextTrackData)(this,t.captions,t.metadata)}if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(t.audio,this.audioBuffer_)}this.pendingBuffers_.length=0;this.bufferUpdating_=false}},{key:"concatAndAppendSegments_",value:function e(t,r){var i=0;var n=undefined;if(t.bytes){n=new Uint8Array(t.bytes);t.segments.forEach((function(e){n.set(e,i);i+=e.byteLength}));try{r.updating=true;r.appendBuffer(n)}catch(a){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:a.message,originalError:a})}}}}},{key:"abort",value:function e(){if(this.videoBuffer_){this.videoBuffer_.abort()}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.abort()}if(this.transmuxer_){this.transmuxer_.postMessage({action:"reset"})}this.pendingBuffers_.length=0;this.bufferUpdating_=false}}]);return t}(f["default"].EventTarget);r["default"]=S;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./create-text-tracks-if-necessary":66,"./remove-cues-from-track":72,"./transmuxer-worker":73,webworkify:76}],76:[function(e,t,r){var i=arguments[3];var n=arguments[4];var a=arguments[5];var s=JSON.stringify;t.exports=function(e){var t;var r=Object.keys(a);for(var o=0,u=r.length;o<u;o++){var l=r[o];if(a[l].exports===e){t=l;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var f={};for(var o=0,u=r.length;o<u;o++){var l=r[o];f[l]=l}n[t]=[Function(["require","module","exports"],"("+e+")(self)"),f]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var c={};c[t]=t;n[d]=[Function(["require"],"require("+s(t)+")(self)"),c];var h="("+i+")({"+Object.keys(n).map((function(e){return s(e)+":["+n[e][0]+","+s(n[e][1])+"]"})).join(",")+"},{},["+s(d)+"])";var p=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(p.createObjectURL(new Blob([h],{type:"text/javascript"})))}},{}],77:[function(e,t,r){(function(r){var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();var n=function e(t,r,i){var n=true;e:while(n){var a=t,s=r,o=i;n=false;if(a===null)a=Function.prototype;var u=Object.getOwnPropertyDescriptor(a,s);if(u===undefined){var l=Object.getPrototypeOf(a);if(l===null){return undefined}else{t=l;r=s;i=o;n=true;u=l=undefined;continue e}}else if("value"in u){return u.value}else{var f=u.get;if(f===undefined){return undefined}return f.call(o)}}};function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e("global/document");var l=a(u);var f=e("./playlist-loader");var d=a(f);var c=e("./playlist");var h=a(c);var p=e("./xhr");var m=a(p);var v=e("aes-decrypter");var g=e("./bin-utils");var y=a(g);var _=e("videojs-contrib-media-sources");var b=e("m3u8-parser");var T=a(b);var S=typeof window!=="undefined"?window["videojs"]:typeof r!=="undefined"?r["videojs"]:null;var w=a(S);var k=e("./master-playlist-controller");var E=e("./config");var C=a(E);var A=e("./rendition-mixin");var O=a(A);var P=e("global/window");var I=a(P);var L=e("./playback-watcher");var D=a(L);var U=e("./reload-source-on-error");var x=a(U);var R=e("./playlist-selectors.js");var M={PlaylistLoader:d["default"],Playlist:h["default"],Decrypter:v.Decrypter,AsyncStream:v.AsyncStream,decrypt:v.decrypt,utils:y["default"],STANDARD_PLAYLIST_SELECTOR:R.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:R.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:R.comparePlaylistBandwidth,comparePlaylistResolution:R.comparePlaylistResolution,xhr:(0,m["default"])()};var B=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(M,e,{get:function t(){w["default"].log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing");return C["default"][e]},set:function t(r){w["default"].log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing");if(typeof r!=="number"||r<0){w["default"].log.warn("value of Hls."+e+" must be greater than or equal to 0");return}C["default"][e]=r}})}));var N=function e(t,r){var i=r.media();var n=-1;for(var a=0;a<t.length;a++){if(t[a].id===i.uri){n=a;break}}t.selectedIndex_=n;t.trigger({selectedIndex:n,type:"change"})};var j=function e(t,r){r.representations().forEach((function(e){t.addQualityLevel(e)}));N(t,r.playlists)};M.canPlaySource=function(){return w["default"].log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};M.supportsNativeHls=function(){var e=l["default"].createElement("video");if(!w["default"].getTech("Html5").isSupported()){return false}var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}();M.isSupported=function(){return w["default"].log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var F=w["default"].getComponent("Component");var V=function(e){o(t,e);function t(e,r,i){var a=this;s(this,t);n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,r,i.hls);if(r.options_&&r.options_.playerId){var o=(0,w["default"])(r.options_.playerId);if(!o.hasOwnProperty("hls")){Object.defineProperty(o,"hls",{get:function e(){w["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead.");r.trigger({type:"usage",name:"hls-player-access"});return a}})}}this.tech_=r;this.source_=e;this.stats={};this.ignoreNextSeekingEvent_=false;this.setOptions_();if(this.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. "+"See https://git.io/vMpjB")}this.on(l["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=l["default"].fullscreenElement||l["default"].webkitFullscreenElement||l["default"].mozFullScreenElement||l["default"].msFullscreenElement;if(t&&t.contains(a.tech_.el())){a.masterPlaylistController_.fastQualityChange_()}}));this.on(this.tech_,"seeking",(function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=false;return}this.setCurrentTime(this.tech_.currentTime())}));this.on(this.tech_,"error",(function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading()}}));this.on(this.tech_,"play",this.play)}i(t,[{key:"setOptions_",value:function e(){var t=this;this.options_.withCredentials=this.options_.withCredentials||false;if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=B}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===B;["withCredentials","bandwidth"].forEach((function(e){if(typeof t.source_[e]!=="undefined"){t.options_[e]=t.source_[e]}}));this.bandwidth=this.options_.bandwidth}},{key:"src",value:function e(t){var r=this;if(!t){return}this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=M;this.masterPlaylistController_=new k.MasterPlaylistController(this.options_);this.playbackWatcher_=new D["default"](w["default"].mergeOptions(this.options_,{seekable:function e(){return r.seekable()}}));this.masterPlaylistController_.on("error",(function(){var e=w["default"].players[r.tech_.options_.playerId];e.error(r.masterPlaylistController_.error)}));this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):M.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=M.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function e(){return this.masterPlaylistController_.selectPlaylist},set:function e(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function e(){var t=1/(this.bandwidth||1);var r=undefined;if(this.throughput>0){r=1/this.throughput}else{r=0}var i=Math.floor(1/(t+r));return i},set:function e(){w["default"].log.error('The "systemBandwidth" property is read-only')}}});Object.defineProperties(this.stats,{bandwidth:{get:function e(){return r.bandwidth||0},enumerable:true},mediaRequests:{get:function e(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:true},mediaRequestsAborted:{get:function e(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:true},mediaRequestsTimedout:{get:function e(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:true},mediaRequestsErrored:{get:function e(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:true},mediaTransferDuration:{get:function e(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:true},mediaBytesTransferred:{get:function e(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:true},mediaSecondsLoaded:{get:function e(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.masterPlaylistController_.on("selectedinitialmedia",(function(){(0,O["default"])(r)}));this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")}));this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=true}));this.tech_.ready((function(){return r.setupQualityLevels_()}));if(!this.tech_.el()){return}this.tech_.src(w["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource))}},{key:"setupQualityLevels_",value:function e(){var t=this;var r=w["default"].players[this.tech_.options_.playerId];if(r&&r.qualityLevels){this.qualityLevels_=r.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",(function(){j(t.qualityLevels_,t)}));this.playlists.on("mediachange",(function(){N(t.qualityLevels_,t.playlists)}))}}},{key:"play",value:function e(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function e(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function e(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function e(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function e(){if(this.playbackWatcher_){this.playbackWatcher_.dispose()}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose()}if(this.qualityLevels_){this.qualityLevels_.dispose()}n(Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]);return t}(F);var H=function e(t){return{canHandleSource:function r(i){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var a=w["default"].mergeOptions(w["default"].options,n);if(a.hls&&a.hls.mode&&a.hls.mode!==t){return false}return e.canPlayType(i.type,a)},handleSource:function e(r,i){var n=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var a=w["default"].mergeOptions(w["default"].options,n,{hls:{mode:t}});if(t==="flash"){i.setTimeout((function(){i.trigger("loadstart")}),1)}i.hls=new V(r,i,a);i.hls.xhr=(0,m["default"])();i.hls.src(r.src);return i.hls},canPlayType:function t(r){var i=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var n=w["default"].mergeOptions(w["default"].options,i);if(e.canPlayType(r,n)){return"maybe"}return""}}};H.canPlayType=function(e,t){if(w["default"].browser.IE_VERSION&&w["default"].browser.IE_VERSION<=10){return false}var r=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(!t.hls.overrideNative&&M.supportsNativeHls){return false}return r.test(e)};if(typeof w["default"].MediaSource==="undefined"||typeof w["default"].URL==="undefined"){w["default"].MediaSource=_.MediaSource;w["default"].URL=_.URL}var q=w["default"].getTech("Flash");if(_.MediaSource.supportsNativeMediaSources()){w["default"].getTech("Html5").registerSourceHandler(H("html5"),0)}if(I["default"].Uint8Array&&q){q.registerSourceHandler(H("flash"))}w["default"].HlsHandler=V;w["default"].HlsSourceHandler=H;w["default"].Hls=M;if(!w["default"].use){w["default"].registerComponent("Hls",M)}w["default"].m3u8=T["default"];w["default"].options.hls=w["default"].options.hls||{};if(w["default"].registerPlugin){w["default"].registerPlugin("reloadSourceOnError",x["default"])}else{w["default"].plugin("reloadSourceOnError",x["default"])}t.exports={Hls:M,HlsHandler:V,HlsSourceHandler:H}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./bin-utils":2,"./config":3,"./master-playlist-controller":5,"./playback-watcher":8,"./playlist":11,"./playlist-loader":9,"./playlist-selectors.js":10,"./reload-source-on-error":13,"./rendition-mixin":14,"./xhr":21,"aes-decrypter":25,"global/document":31,"global/window":32,"m3u8-parser":33,"videojs-contrib-media-sources":74}]},{},[77])(77)}))}var Kv=e("nb_videoplayer",function(){function e(e){t(this,e);this.marks=[];this.hideClose=false;this.hold=false;this.videotitle="";this.videotype="";this.videosrc="";this.postersrc="";this.width=730;this.height=500;this.minWidth=400;this.minHeight=315;this.maxWidth=1280;this.maxHeight=810;this.canResize=true;this.canDrag=true;this.subjectskin="phy";this.viewstyle="panel";this.localmode=false;this.autocenter=false;this.isOpen=false;this.volumeNum="50%";this.volumeType=2;this.videoBtnType=0;this.isLoaded=false;this.isFullScreen=false;this.chemPlayer=null;this.currentSrc=this.videosrc;this.speedNum=40;this.curSpeed=1;this.panelX=0;this.panelY=0;this.close=r(this,"close",7);this.download=r(this,"download",7)}e.prototype.tapDownloadHander=function(e){this.download.emit({data:e.detail})};e.prototype.changeSrc=function(e){if(e&&e.length){this.pause();this.currentSrc=e;try{this.chemPlayer.src({src:this.currentSrc,type:this.videotype,overrideNative:true});this.chemPlayer.src(this.currentSrc)}catch(Qv){}}else{this.chemPlayer.src({src:"",type:this.videotype,overrideNative:true});this.chemPlayer.src("")}};e.prototype.moveToCenter=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r;return __generator(this,(function(i){e=a.domQuerySelector(this.ele,"nb-panel");t=document.body.clientWidth;r=document.body.clientHeight;e.moveToXY((t-this.width)/2,(r-this.height)/2);return[2]}))}))};e.prototype.resetPosition=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){e=a.domQuerySelector(this.ele,"nb-panel");e.moveToXY(0,0);return[2]}))}))};e.prototype.pause=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(this.chemPlayer){this.chemPlayer.pause()}return[2]}))}))};e.prototype.destroy=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.pause();this.changeSrc("");return[2]}))}))};Object.defineProperty(e.prototype,"documentIsFullScreen",{get:function(){return document.isFullScreen||document.mozIsFullScreen||document.webkitIsFullScreen},enumerable:true,configurable:true});e.prototype.exitFullscreen=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(!this.isFullScreen){return[2]}try{if(this.documentIsFullScreen){if(document.exitFullscreen){document.exitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}catch(Qv){}this.isFullScreen=false;return[2]}))}))};e.prototype.componentWillLoad=function(){window.videojs=vh;Yv();if(!this.videotype){if(/\.m3u8$/.test(this.videosrc)){this.videotype="application/x-mpegURL"}else{this.videotype="video/mp4"}}if(this.autocenter){var e=document.body.clientWidth;var t=document.body.clientHeight;this.panelX=(e-this.width)/2;this.panelY=(t-this.height)/2}};e.prototype.componentDidLoad=function(){this.initVideo();this.getDom(".vjs-control-bar").appendChild(this.getDom("#chem-video-volume"));this.getDom(".vjs-control-bar").appendChild(this.getDom("#chem-video-speed"));this.getDom(".vjs-control-bar").appendChild(this.getDom("#chem-video-down"));this.getDom(".vjs-progress-holder").appendChild(this.getDom("#chem-video-masks"));this.getDom("div#nb-chem-video").appendChild(this.getDom("#nb-chem-video-header"));if(!this.canDrag){this.getDom("nb-panel").setRect({x:0,y:0,width:this.width,height:this.height})}};e.prototype.initVideo=function(){var e=this;vh.addLanguage("zh",{Play:"播放",Pause:"暂停",Replay:"重播","Current Time":"当前时间",Duration:"时长","Remaining Time":"剩余时间","Stream Type":"媒体流类型",LIVE:"直播",Loaded:"加载完毕",Progress:"进度",Fullscreen:"全屏","Non-Fullscreen":"退出全屏",Mute:"静音",Unmute:"取消静音","Playback Rate":"播放速度"});var t={controls:true,preload:"false",width:900,language:"zh",children:["controlBar"],controlBar:{volumePanel:false,playbackRateMenuButton:false,fullscreenToggle:!this.localmode,liveDisplay:false,customControlSpacer:false,chaptersButton:false,subsCapsButton:false,audioTrackButton:false,descriptionsButton:false,remainingTimeDisplay:false}};this.chemPlayer=vh(a.domQuerySelector(this.ele,"#nb-chem-video"),t);if(this.currentSrc&&this.currentSrc.length){this.changeSrc(this.currentSrc)}this.chemPlayer.load();this.chemPlayer.on("loadedmetadata",(function(){e.isLoaded=true}));this.chemPlayer.on("fullscreenchange",(function(t){if(!t.currentTarget){return}e.chemPlayer.isFullscreen(e.isFullScreen=e.chemPlayer.isFullscreen());console.log(e.isFullScreen)}));this.chemPlayer.on("ended",(function(t){var r=e.currentSrc;e.changeSrc("");e.changeSrc(r)}));document.addEventListener("fullscreenchange",(function(){e.isFullScreen=e.documentIsFullScreen}));document.addEventListener("webkitfullscreenchange",(function(){e.isFullScreen=e.documentIsFullScreen}));document.addEventListener("mozfullscreenchange",(function(){e.isFullScreen=e.documentIsFullScreen}));document.addEventListener("MSFullscreenChange",(function(){e.isFullScreen=e.documentIsFullScreen}))};e.prototype.startDrag=function(e){if(this.canDrag&&!this.isFullScreen){if(e.touches){var t=e.touches[0];e.clientX=t.clientX;e.clientY=t.clientY}this.getDom("nb-panel").startDrag(e);this.videoBtnType=0}};e.prototype.getDom=function(e){return a.domQuerySelector(this.ele,e)};e.prototype.setVolume=function(e){if(e>.7){this.volumeType=3}else if(e>.35){this.volumeType=2}else if(e>0){this.volumeType=1}else{this.volumeType=0}this.chemPlayer.volume(e)};e.prototype.setPlaybackRate=function(e){this.chemPlayer.playbackRate(e)};e.prototype.changeVolBtnType=function(e){if(this.videoBtnType===e){this.videoBtnType=0}else{this.videoBtnType=e}if(e===3){this.download.emit({data:"MP4"})}};e.prototype.closeView=function(){this.close.emit();this.exitFullscreen()};e.prototype.getVolumeIcon=function(){var e=["chem-volume-0","chem-volume-low","chem-volume-mid","chem-volume-high"];return e[this.volumeType]};e.prototype.checkDomHasClass=function(e,t){var r=e.classList;var i=r.length;for(var n=0;n<i;n++){if(r[n]===t){return true}}return false};e.prototype.getLan=function(e){return e};e.prototype.panelCloseHandle=function(e){this.close.emit({target:this})};e.prototype.render=function(){var e=this;{return i("nb-panel",{hold:this.hold,x:this.panelX,y:this.panelY,width:this.width,height:this.height,minWidth:this.minWidth,minHeight:this.minHeight,maxWidth:this.maxWidth,maxHeight:this.maxHeight,onClosed:function(t){return e.panelCloseHandle(t)},closeVisible:false,canResize:this.canResize,onSizeChange:function(){e.videoBtnType=0}},i("div",{slot:"panel-body",id:"panel-body",class:this.localmode?"panelbody local":"panelbody"},i("div",{class:"chem-video-container video-"+this.subjectskin+" view-style-"+this.viewstyle},i("div",{class:"chem-video-box"},i("div",{id:"nb-chem-video-header",onMouseDown:function(t){e.startDrag(t)},onTouchStart:function(t){e.startDrag(t)}},this.videotitle,i("div",{id:"nb-chem-video-close",style:{display:!this.isFullScreen&&!this.hideClose?"block":"none"},onClick:function(){e.closeView()}},i("div",{class:"nb-chem-video-close-ico small_close_in"}))),i("video",{id:"nb-chem-video",class:"video-js vjs-default-skin",controls:false,preload:"true",width:"900",onClick:function(){e.videoBtnType=0}},i("source",{src:this.currentSrc,type:this.videotype})),i("div",{id:"chem-video-volume",class:"chem-self-btn",style:{display:this.localmode?"none":"block"}},i("div",{class:"chem-volume-ico "+this.getVolumeIcon(),onClick:function(){e.changeVolBtnType(1)}}),i("nb-videoplayer-volume",{style:{display:this.videoBtnType===1?"block":"none"},onVideoVolumechange:function(t){e.setVolume(t.detail)}})),i("div",{id:"chem-video-speed",style:{display:this.localmode?"none":"block"}},i("div",{class:"chem-speed-ico",onClick:function(){e.changeVolBtnType(2)}},this.getLan("倍速")),i("nb-videoplayer-speed",{style:{display:this.videoBtnType===2?"block":"none"},onSpeedchange:function(t){e.setPlaybackRate(t.detail)}})),i("div",{id:"chem-video-down",style:{display:!this.localmode?"none":"block"}},i("div",{class:"chem-down-ico",onClick:function(){e.changeVolBtnType(3)}})),i("div",{id:"chem-video-masks",style:{display:this.isLoaded&&!this.localmode?"block":"none"}},this.getMaskDom())),i("div",{class:"loadingBox",style:{display:!this.isLoaded?"flex":"none"}},i("div",{class:"loading"}),i("div",null,"资源加载中，请稍候。。。")))))}};e.prototype.getMaskDom=function(){if(this.chemPlayer&&this.marks){var e=this.chemPlayer.duration()/60;return this.marks.map((function(t){var r=t.time,n=t.title;var a=r>>0;var s=r-a;var o=(a+Math.min(1,s/.6))/e;if(o<1){return i("nb-videoplayer-mark",{style:{left:o*100+"%"},marktitle:n})}}))}};Object.defineProperty(e.prototype,"ele",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{videosrc:["changeSrc"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"\@charset \"UTF-8\";.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.vjs-modal-dialog .vjs-modal-dialog-content{position:absolute;top:0;left:0;width:100%;height:100%}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.vjs-button>.vjs-icon-placeholder:before{text-align:center}\@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABBIAAsAAAAAGoQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3RY21hcAAAAYQAAADQAAADIjn098ZnbHlmAAACVAAACv4AABEIAwnSw2hlYWQAAA1UAAAAKgAAADYUHzoRaGhlYQAADYAAAAAbAAAAJA4DByFobXR4AAANnAAAAA8AAACE4AAAAGxvY2EAAA2sAAAARAAAAEQ9NEHGbWF4cAAADfAAAAAfAAAAIAEyAIFuYW1lAAAOEAAAASUAAAIK1cf1oHBvc3QAAA84AAABDwAAAZ5AAl/0eJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGQ7xTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGBHcRdyA4RZgQRAC4HCwEAAHic7dFprsIgAEXhg8U61XmeWcBb1FuQP4w7ZQXK5boMm3yclFDSANAHmuKviBBeBPQ8ymyo8w3jOh/5r2ui5nN6v8sYNJb3WMdeWRvLji0DhozKdxM6psyYs2DJijUbtuzYc+DIiTMXrty4k8oGLb+n0xCe37ekM7Z66j1DbUy3l6PpHnLfdLO5NdSBoQ4NdWSoY9ON54mhdqa/y1NDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUJORPqkhTd54nJ1YDXBU1RV+576/JBs2bPYPkrDZt5vsJrv53V/I5mclhGDCTwgGBQQSTEji4hCkYIAGd4TGIWFAhV0RQTpWmQp1xv6hA4OTOlNr2zFANbHUYbq2OtNCpViRqsk+e+7bTQAhzti8vPfuPffcc88959zznbcMMPjHD/KDDGEY0ABpYX384NhlomIYlo4JISGEY9mMh2FSidYiqkEUphtNYDSY/dXg9023l4DdxlqUl0chuZRhncJKrsCQHIwcGuwfnhMIzBnuH4Sym+1D2zaGjheXlhYfD238z80mKYMmvJ5XeOTzd8z9eujbMxJNhu4C9xPE/bCMiDuSNIWgkTQwBE55hLSAE7ZwhrHLnAHZOGV/kmBGTiNjZxzI77Hb7Hqjz68TjT6vh+5JT/cCIkqS0D6CqPf5jX4Qjdx5j6vlDfZM4aZFdbVXIxtOlJaP/WottMnH6CJQ3bTiue3PrY23HjnChtuamxwvvzFjxkPrNj3z0tG9T561HDYf6OgmRWvlY3JQHoQb8ltV2Yet7YfWctEjR1AtxS/cSX6U4alf6NJEBQ7YKg9wrXQKd0IeZCb2ux75Uhh1Un+Nz+9LTOE7PK777nN5xqdTneTBhCbx446mZrhnUkrCz2YhA9dSMxaG0SYmT8hi9ZPu1E94PJYQSH6LRmhxec7Q7ZeXntgQuVpbh+a4qWNsckVyTdn0P7o7DpgPW84+uRcq0BITflBikGdUjAZ9wYBVI3mtrNvr9kpg1UsaK6t3690aoorC1lg0GpMH2HAMtkZjsSi5Ig9ESVosOh7GQfLjKNLvKpMKkLSKNFAka710GdgSi8oDMSoNhqjkKBXTgn3swtaxyzGkUzIzae9RtLdWkSlZ1KDX6EzgllzV4NV4SoDFSOGD4+HCeQUF8wrZ5Hs8zIb5EaVxy8DYFTbMCJPnLIWZxugZE2NlivC0gc1qEQUR8jEKgZcAXeH18BiCgl5nlHh0CrjB4Hb5fX4gb0J7c9PuHVsfgkx2n/vTY/JV8kn8PGxf7faOZ8qX8JVByuIf4whk9sqXli2hvPJV9hrp0hY7l8r2x37ydaVsb4xvXv/47v2NjfCl8m5oRDJclFMoE1yk0Uh1Te4/m8lFXe9qBZD0EkheicebXvzI2PLCuoKCukLuhPIeKwaHPEouxw3kMqaIUXDQ1p0mip+MyCORSCQaoUsnY1VZ38nUTrG21WvVo4f1OsEJFhvSfAFwGfT8VHRMeAVUpwLOoLzjT/REIj3O3FhuURE+nERF+0pTId5Fyxv5sfwGyg4O+my4vZv0sZm7oeQlFZORiB+tG0MweVNraeitl7yxiPIHTk4/diVxs94o5lEYishB2iAtkchEnsActoEpx44Fo8XnsQMaA22BlqC20RmhBKzYojZyYaxg+JggMc4HHY2m+L9EkWSYljirOisrO7d3VorxzyZ6Vc4lJqITAu1b2wOBdrLElAP+bFc2eGaZFVbkmJktv5uT6Jlz5D/MnBFor6ig/JPnRViBsV3LNKGGqB1ChJ0tgQywlVLFJIuQgTFttwkiKxhyQdAZMdMYtSaoAewqfvXVYPAbDT6/1mez85YS8FSDywQ6NfAnef6FNEGMilnppyvn5rB6tTyq1pOceRWnp2WJEZFXHeX5oyoem1nTTgdqc4heDY7bOeKz63vnz+/dRx+s31Ht2JGanQ5seirfWJL9tjozU/12TnEjn5oux9OzU3ckGbBzBwNOyk69JykKH0n/0LM9A72tuwM3zQpIRu4AxiToseEpgPOmbROyFe9/X2yeUvoUsCyEvjcgs7fpWP3/aKlFN0+6HFUe6D9HFz/XPwBlN9tTqNyZjFJ8UO2RUT5/h4CptCctEyeisnOyXjALEp7dXKaQKf6O7IMnGjNNACRMLxqdYJX8eMLvmmd68D+ayBLyKKYZwYxDt/GNhzETDJ05Qxlyi3pi3/Z93ndYVSumgj0V/KkIFlO6+1K3fF2+3g0q+YtuSIf0bvmLqV09nnobI6hwcjIP8aPCKayjsF5JBY3LaKAeRLSyYB1h81oTwe9SlPMkXB7G0mfL9q71gaqqwPqu67QRKS1+ObTx+sbQy9QV2OQHEScGkdFBeT7v7qisqqrs6N52i78/R+6S0qQONVj26agOVoswCyQWIV5D86vH53bxNUeXV0K+XZaHv/nm/KsHhOvylwsWnJX/HE8l/4WCv5x+l5n08z6UU8bUMa3MBpSmM7F63AxntdC9eBCKEZW9Hr+ABNqtxgAQrSbMtmrW7lKQuoSgBhSrTazWVU2QAKWY8wiiuhqFmQgWJBgoXiuWIm42N7hqZbBsgXz52O5P5uSvaNgFGnOuvsRw8I8Laha91wMvDuxqWFheN7/8GVtTltdS83DQsXRmqc5ZtcJXEVrlV2doTWk5+Yunm71dG5f55m/qY0MjI93vv9/NfpxXV9sUXrxy2fbNy1or65cOlDRnOoKFeeXcbw42H/bNDT5Qs3flgs31gWC1lD1nfUV/X7NdCnSUdHY2e8afzfKsqZ5ZljfDqjLOmk3UebNXB+aHArPYDRs+/HDDxeT5DiP+sFg7OpRaVQMGBV89PpeBdj22hCE0Uub0UqwLrNWsG0cuyadgLXTeR5rbO4+3c/vl15cur2nRq+TXCQDcS3SO+s6ak+e5/eMS+1dw3btu3YG2tvFL8XdIZvdjdW6TO/4B7IdrZWVPmctm5/59AgsPItTSbCiIBr2OqIGzmu20SMKAS7yqwGBUfGfgjDYlLLDeF0SfcLB2LSx8flT+08/kzz6yOj96rft4rpTjdPQcmLd47uKibbDq7ZSz/XtbH2nN717Nd62rU+c8Icevvv7I09wA6WvjVcafb+FsbNG+ZQ80Rn6ZZsvrP7teP2dzTdoETvNhjCmsr8FID2sJ69VYvdUcxk4AzYRlKcaE38eXNRlfW9H1as9i6acLHp1XpuNB5K7DIvkX08y1ZYvh3KfWaiCzH+ztrSDmD7LuX73x/mJelB8Yj39t8nhNQJJ2CAthpoFGLsGgtSOCJooCGoaJAMTjSWHVZ08YAa1Fg9lPI5U6DOsGVjDasJeZZ+YyhfCwfOzCxlBA69M9XLXtza7H/rav+9Tjq5xNi0wpKQIRNO4Lrzz7yp5QVYM6Jd/oc1Uvn/mQhhuWh6ENXoS2YTZ8QT42bF5d/559zp5r0Uff2VnR2tdf2/WCOd2cO0Mw6qpWPnvxpV0nrt5fZd2yItc199GWe8vlNfNDq+CH/7yAAnB9hn7T4QO4c1g9ScxsZgmzntnE/IDGndtHMw69lFwoCnYsMGx+rBp8JSBqdLzBr9QRPq/PbhWMWFtQZp1xguy/haw3TEHm3TWAnxFWQQWgt7M5OV0lCz1VRYucpWliy7z6Zd4urwPIyeZQqli2Lgg7szJV09PysATbOQtYIrB2YzbkJYkGgJ0m4AjPUap1pvYu1K9qr97z0Yl3p332b2LYB78ncYIlRkau/8GObSsOlZancACE5d5ily+c2+7h5Yj4lqhVmXXB+iXLfvdqSgqfKtQvfHDV0OnvQR1qhw42XS/vkvsh/hXcrDFP0a+SJNIomEfD1nsrYGO+1bgTOJhM8Hv6ek+7vVglxuSRwoKn17S937bm6YJCeSSG0Op1n+7tE37tcZ/p7dsTv4EUrGpDbWueKigsLHhqTVsoEj+JU0kaSjnj9tz8/gryQWwJ9BcJXBC/7smO+I/IFURJetFPrdt5WcoL6DbEJaygI8CTHfQTjf40ofD+DwalTqIAAHicY2BkYGAA4uByr8R4fpuvDNzsDCBw7f/3LmSanREszsHABKIAKi0J7gAAeJxjYGRgYGcAARD5/z87IwMjAypQBAAtgwI4AHicY2BgYGAfYAwAOkQA4QAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhHicY2BkYGBQZChlYGcAASYg5gJCBob/YD4DABfTAbQAeJxdkE1qg0AYhl8Tk9AIoVDaVSmzahcF87PMARLIMoFAl0ZHY1BHdBJIT9AT9AQ9RQ9Qeqy+yteNMzDzfM+88w0K4BY/cNAMB6N2bUaPPBLukybCLvleeAAPj8JD+hfhMV7hC3u4wxs7OO4NzQSZcI/8Ltwnfwi75E/hAR7wJTyk/xYeY49fYQ/PztM+jbTZ7LY6OWdBJdX/pqs6NYWa+zMxa13oKrA6Uoerqi/JwtpYxZXJ1coUVmeZUWVlTjq0/tHacjmdxuL90OR8O0UEDYMNdtiSEpz5XQGqzlm30kzUdAYFFOb8R7NOZk0q2lwAyz1i7oAr1xoXvrOgtYhZx8wY5KRV269JZ5yGpmzPTjQhvY9je6vEElPOuJP3mWKnP5M3V+YAAAB4nG2PyXLCMBBE3YCNDWEL2ffk7o8S8oCnkCVHC5C/jzBQlUP6IHVPzYyekl5y0iL5X5/ooY8BUmQYIkeBEca4wgRTzDDHAtdY4ga3uMM9HvCIJzzjBa94wzs+8ImvZNAq8TM+HqVkKxWlrQiOxjujQkNlEzyNzl6Z/cU2XF06at7U83VQyklLpEvSnuzsb+HAPnPfQVgaupa1Jlu4sPLsFblcitaz0dHU0ZF1qatjZ1+aTXYCmp6u0gSvWNPyHLtFZ+ZeXWVSaEkqs3T8S74WklbGbNNNq4LL4+CWKtZDv2cfX8l8aFbKFhEnJnJ+IULFpqwoQnNHlHaVQtPBl+ypmbSWdmyC61KS/AKZC3Y+AA==) format(\"woff\");font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder,.vjs-icon-play{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-play:before{content:\"\\f101\"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:\"\\f102\"}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder,.vjs-icon-pause{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before,.vjs-icon-pause:before{content:\"\\f103\"}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder,.vjs-icon-volume-mute{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before,.vjs-icon-volume-mute:before{content:\"\\f104\"}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder,.vjs-icon-volume-low{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before,.vjs-icon-volume-low:before{content:\"\\f105\"}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder,.vjs-icon-volume-mid{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before,.vjs-icon-volume-mid:before{content:\"\\f106\"}.video-js .vjs-mute-control .vjs-icon-placeholder,.vjs-icon-volume-high{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control .vjs-icon-placeholder:before,.vjs-icon-volume-high:before{content:\"\\f107\"}.video-js .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-enter:before{content:\"\\f108\"}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-exit:before{content:\"\\f109\"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:\"\\f10a\"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:\"\\f10b\"}.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder,.vjs-icon-subtitles{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before,.vjs-icon-subtitles:before{content:\"\\f10c\"}.video-js .vjs-captions-button .vjs-icon-placeholder,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-captions{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-captions-button .vjs-icon-placeholder:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-captions:before{content:\"\\f10d\"}.video-js .vjs-chapters-button .vjs-icon-placeholder,.vjs-icon-chapters{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-chapters-button .vjs-icon-placeholder:before,.vjs-icon-chapters:before{content:\"\\f10e\"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:\"\\f10f\"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:\"\\f110\"}.video-js .vjs-play-progress,.video-js .vjs-volume-level,.vjs-icon-circle{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-progress:before,.video-js .vjs-volume-level:before,.vjs-icon-circle:before{content:\"\\f111\"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:\"\\f112\"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:\"\\f113\"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:\"\\f114\"}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder,.vjs-icon-cancel{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before,.vjs-icon-cancel:before{content:\"\\f115\"}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder,.vjs-icon-replay{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before,.vjs-icon-replay:before{content:\"\\f116\"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:\"\\f117\"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:\"\\f118\"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:\"\\f119\"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:\"\\f11a\"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:\"\\f11b\"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:\"\\f11c\"}.video-js .vjs-descriptions-button .vjs-icon-placeholder,.vjs-icon-audio-description{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-descriptions-button .vjs-icon-placeholder:before,.vjs-icon-audio-description:before{content:\"\\f11d\"}.video-js .vjs-audio-button .vjs-icon-placeholder,.vjs-icon-audio{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-audio-button .vjs-icon-placeholder:before,.vjs-icon-audio:before{content:\"\\f11e\"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:\"\\f11f\"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:\"\\f120\"}.video-js{display:block;vertical-align:top;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:normal}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex=\"-1\"]{outline:0}.video-js *,.video-js :after,.video-js :before{-webkit-box-sizing:inherit;box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.video-js.vjs-4-3,.video-js.vjs-16-9,.video-js.vjs-fluid{width:100%;max-width:100%;height:0}.video-js.vjs-16-9{padding-top:56.25%}.video-js.vjs-4-3{padding-top:75%}.video-js.vjs-fill{width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;height:100%}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen{width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1;visibility:visible}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.5em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:rgba(43,51,63,.7);border-radius:.3em;-webkit-transition:all .4s;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.75em;margin-left:-1.5em}.video-js .vjs-big-play-button:focus,.video-js:hover .vjs-big-play-button{border-color:#fff;background-color:#73859f;background-color:rgba(115,133,159,.5);-webkit-transition:all 0s;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-error .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:0 0;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;-webkit-transition:none;transition:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.8)),to(hsla(0,0%,100%,0)));background:linear-gradient(180deg,rgba(0,0,0,.8),hsla(0,0%,100%,0));overflow:auto}.video-js .vjs-modal-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{-webkit-box-sizing:border-box;box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:rgba(115,133,159,.5)}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em 0;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0;margin-bottom:1.5em;border-top-color:rgba(43,51,63,.7)}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:rgba(43,51,63,.7);position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-menu-button-popup .vjs-menu.vjs-lock-showing,.vjs-workinghover .vjs-menu-button-popup:hover .vjs-menu{display:block}.video-js .vjs-menu-button-inline{-webkit-transition:all .4s;transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline:hover,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;-webkit-transition:all .4s;transition:all .4s}.vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline:hover .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:rgba(43,51,63,.7)}.vjs-has-started .vjs-control-bar{display:-ms-flexbox;display:flex;visibility:visible;opacity:1;-webkit-transition:visibility .1s,opacity .1s;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;-webkit-transition:visibility 1s,opacity 1s;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-error .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;-ms-flex:none;flex:none}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.video-js .vjs-control:focus,.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before{text-shadow:0 0 1em #fff}.video-js .vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;-ms-flex:auto;flex:auto;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;min-width:4em;-ms-touch-action:none;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{-ms-flex:auto;flex:auto;-webkit-transition:all .2s;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div,.video-js .vjs-progress-holder .vjs-play-progress{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.333333333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:hsla(0,0%,100%,.8);border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;-webkit-transition:visibility 1s,opacity 1s;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:rgba(0,0,0,.8)}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em 0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#73859f;background-color:rgba(115,133,159,.5)}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0 0 1em #fff;-webkit-box-shadow:0 0 1em #fff;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;-ms-flex:none;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:-ms-flexbox;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{-webkit-transition:width 1s;transition:width 1s}.video-js .vjs-volume-panel .vjs-mute-control:hover~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel .vjs-volume-control:hover,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel:hover .vjs-volume-control{visibility:visible;opacity:1;position:relative;-webkit-transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel .vjs-mute-control:hover~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:hover.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:hover{width:9em;-webkit-transition:width .1s;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3.5em;-webkit-transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{-webkit-transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;-webkit-transition:none;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:-ms-flexbox;display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:rgba(43,51,63,.7)}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster{display:block}.vjs-using-native-controls .vjs-poster{display:none}.video-js .vjs-live-control{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex:auto;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js .vjs-time-control{-ms-flex:none;flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.video-js .vjs-current-time,.video-js .vjs-duration,.vjs-live .vjs-time-control,.vjs-no-flex .vjs-current-time,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control .vjs-icon-placeholder{cursor:pointer;-ms-flex:none;flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{-webkit-transform:translateY(-3em);transform:translateY(-3em)}.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{-webkit-transform:translateY(-1.5em);transform:translateY(-1.5em)}.video-js .vjs-fullscreen-control{cursor:pointer;-ms-flex:none;flex:none}.vjs-playback-rate .vjs-playback-rate-value,.vjs-playback-rate>.vjs-menu-button{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:\"X\";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);-webkit-box-sizing:border-box;box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;-webkit-animation:vjs-spinner-show 0s linear .3s forwards;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:after,.vjs-loading-spinner:before{content:\"\";position:absolute;margin:-6px;-webkit-box-sizing:inherit;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before{-webkit-animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite;animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;-webkit-animation-delay:.44s;animation-delay:.44s}\@keyframes vjs-spinner-show{to{visibility:visible}}\@-webkit-keyframes vjs-spinner-show{to{visibility:visible}}\@keyframes vjs-spinner-spin{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}\@-webkit-keyframes vjs-spinner-spin{to{-webkit-transform:rotate(1turn)}}\@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}\@-webkit-keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:\"\\f10d\";font-size:1.5em;line-height:inherit}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:\" \\f11d\";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-custom-control-spacer{-ms-flex:auto;flex:auto}.video-js.vjs-layout-tiny:not(.vjs-fullscreen).vjs-no-flex .vjs-custom-control-spacer{width:auto}.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-captions-button,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-chapters-button,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-current-time,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-descriptions-button,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-duration,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-mute-control,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-playback-rate,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-remaining-time,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-subtitles-button .vjs-audio-button,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-time-divider,.video-js.vjs-layout-small:not(.vjs-fullscreen) .vjs-volume-control,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-audio-button,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-captions-button,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-chapters-button,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-current-time,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-descriptions-button,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-duration,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-mute-control,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-playback-rate,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-progress-control,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-remaining-time,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-subtitles-button,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-time-divider,.video-js.vjs-layout-tiny:not(.vjs-fullscreen) .vjs-volume-control,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-audio-button,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-captions-button,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-chapters-button,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-current-time,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-descriptions-button,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-duration,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-mute-control,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-playback-rate,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-remaining-time,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-subtitles-button,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-time-divider,.video-js.vjs-layout-x-small:not(.vjs-fullscreen) .vjs-volume-control{display:none}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:rgba(43,51,63,.75);color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-controls,.vjs-text-track-settings .vjs-track-settings-font{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}\@supports (display:grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr auto}.vjs-text-track-settings .vjs-track-settings-colors{display:block;grid-column:1;grid-row:1}.vjs-text-track-settings .vjs-track-settings-font{grid-column:2;grid-row:1}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:2;grid-row:2}}.vjs-track-setting>select{margin-right:5px}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px 0}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px 0;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:active,.vjs-track-settings-controls button:focus{outline-style:solid;outline-width:medium;background-image:-webkit-gradient(linear,left bottom,left top,color-stop(88%,#fff),to(#73859f));background-image:linear-gradient(0deg,#fff 88%,#73859f)}.vjs-track-settings-controls button:hover{color:rgba(43,51,63,.75)}.vjs-track-settings-controls button{background-color:#fff;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(88%,#fff),to(#73859f));background-image:linear-gradient(-180deg,#fff 88%,#73859f);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}\@media print{.video-js>:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;visibility:hidden}.che_video_all_def,.video-js .vjs-fullscreen-control[title=全屏] .vjs-icon-placeholder:before{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -225px;width:15px;height:14px}.che_video_all_hov,.video-js .vjs-fullscreen-control[title=全屏] .vjs-icon-placeholder:before:hover{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -206px;width:15px;height:14px}.che_video_all_pre,.video-js .vjs-fullscreen-control[title=全屏] .vjs-icon-placeholder:before:active{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -244px;width:15px;height:14px}#chem-video-down .chem-down-ico,.che_video_down_def{background-position:0 -386px}#chem-video-down .chem-down-ico,.che_video_down_def,.che_video_down_hov{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;width:18px;height:17px}.che_video_down_hov{background-position:0 -364px}.che_video_down_pre{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -342px;width:18px;height:17px}.che_video_huanyuan_def,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -111px;width:14px;height:14px}.che_video_huanyuan_hov,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before:hover{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -130px;width:14px;height:14px}.che_video_huanyuan_pre,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before:active{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -149px;width:14px;height:14px}#chem-video-volume .chem-volume-ico.chem-volume-0:before,.che_video_silence_def{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -168px;width:19px;height:14px}#chem-video-volume .chem-volume-ico.chem-volume-0:before:hover,.che_video_silence_hov{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -187px;width:19px;height:14px}#chem-video-volume .chem-volume-ico.chem-volume-0:before:active,.che_video_silence_pre{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -54px;width:19px;height:14px}.che_video_start_def,.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-play:before{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 0;width:11px;height:13px}.che_video_start_hov,.video-js .vjs-play-control .vjs-icon-placeholder:before:hover,.vjs-icon-play:before:hover{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -18px;width:11px;height:13px}.che_video_start_pre,.video-js .vjs-play-control .vjs-icon-placeholder:before:active,.vjs-icon-play:before:active{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -36px;width:11px;height:13px}.che_video_stop_def,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before,.vjs-icon-pause:before{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -282px;width:13px;height:15px}.che_video_stop_hov,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before:hover,.vjs-icon-pause:before:hover{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -302px;width:13px;height:15px}.che_video_stop_pre,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before:active,.vjs-icon-pause:before:active{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;background-position:0 -322px;width:13px;height:15px}#chem-video-volume .chem-volume-ico:before,.che_video_voice_def{background-position:0 -92px}#chem-video-volume .chem-volume-ico:before,.che_video_voice_def,.che_video_voice_hov{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;width:18px;height:14px}.che_video_voice_hov{background-position:0 -73px}.che_video_voice_pre{background-position:0 -263px;height:14px}.che_video_voice_pre,.chem-video-container .chem-video-box #nb-chem-video-header #nb-chem-video-close .small_close_in,.small_close{background-image:url(assets/imgs/nbk/nbk_nb-videoplayer_sprite.png);background-size:19px 426px;background-repeat:no-repeat;width:18px}.chem-video-container .chem-video-box #nb-chem-video-header #nb-chem-video-close .small_close_in,.small_close{background-position:0 -408px;height:18px}.panelbody{height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.loadingBox{position:absolute;top:0;left:0;width:100%;height:100%;z-index:5;pointer-events:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;color:#ccc;font-size:18px;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.loadingBox .loading{background:url(assets/imgs/busy.gif);width:31px;height:31px;margin-bottom:16px}.chem-video-container{-webkit-transition:1s;transition:1s;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.chem-video-container .close-video-btn{position:absolute;top:50%;left:50%;margin-left:458px;margin-top:-325px;width:50px;height:50px;border-radius:50%;background:rgba(74,74,74,.6);line-height:50px;padding-left:8px}.chem-video-container .close-video-btn .chem-video-close-ico{display:inline-block;width:34px;height:2px;background:#fff;font-size:0;vertical-align:middle;transform:rotate(45deg);-webkit-transform:rotate(45deg)}.chem-video-container .close-video-btn .chem-video-close-ico:after{content:\"/\";display:block;width:34px;height:2px;background:#fff;transform:rotate(-90deg);-webkit-transform:rotate(-90deg)}.chem-video-container .close-video-btn:hover{background:#ff7351}.chem-video-container .chem-video-box{width:100%;height:100%;z-index:2;-webkit-box-shadow:0 6px 20px 0 rgba(0,0,0,.2);box-shadow:0 6px 20px 0 rgba(0,0,0,.2);border-radius:6px}.chem-video-container .chem-video-box #nb-chem-video-header{height:40px;line-height:40px;text-align:center;background:-webkit-gradient(linear,left top,left bottom,from(#3f444c),color-stop(48%,#3a3f46),to(#343940));background:linear-gradient(180deg,#3f444c,#3a3f46 48%,#343940);font-size:16px;font-weight:700;color:#fff;border-radius:6px 6px 0 0}.chem-video-container .chem-video-box #nb-chem-video-header #nb-chem-video-close{position:absolute;right:10px;top:8px;width:30px;height:23px;border-radius:2px;-webkit-transition:all .5s;transition:all .5s;cursor:pointer}.chem-video-container .chem-video-box #nb-chem-video-header #nb-chem-video-close .nb-chem-video-close-ico{position:relative;-webkit-transform:scale(.85);transform:scale(.85);opacity:.8;left:-9px;top:-12px;margin-left:50%;margin-top:50%}.chem-video-container .chem-video-box #nb-chem-video-header #nb-chem-video-close .small_close_in{display:block}.chem-video-container .chem-video-box #nb-chem-video{height:100%;width:100%}.chem-video-container .chem-video-box nb-videoplayer-volume{position:absolute;top:-160px;left:-65px}.chem-video-container .chem-video-box nb-videoplayer-speed{position:absolute;top:-190px;left:-35px}.chem-video-container .chem-video-box nb-videoplayer-download{position:absolute;top:-75px;left:-18px}.chem-video-container .chem-video-box #chem-video-masks{position:absolute;width:100%;height:100%}.chem-video-container .chem-video-box nb-videoplayer-mark{position:absolute;top:2px}.chem-video-container .chem-video-bg{position:fixed;top:0;bottom:0;left:0;right:0;z-index:-1;opacity:0}.video-js{background-color:transparent}.video-js video{background-color:#000}.video-js .vjs-tech{top:40px;height:calc(100% - 90px);width:100%;outline:none}.video-js .vjs-control-bar{border-radius:0 0 6px 6px}.vjs-control-bar{visibility:visible!important;opacity:1!important;display:block!important;height:50px!important;background:#3d4454!important}.vjs-control-bar .vjs-play-control{border:none!important;outline:none!important;width:auto!important;left:20px!important;z-index:2}.vjs-control-bar .vjs-button>.vjs-icon-placeholder:before{font-size:24px!important;line-height:50px!important}.vjs-control-bar .vjs-current-time,.vjs-control-bar .vjs-duration,.vjs-control-bar .vjs-time-divider{position:absolute!important;top:0!important;left:48px!important;display:block!important;font-size:14px!important;line-height:50px!important;color:#9b9b9b}.vjs-control-bar .vjs-time-divider{left:82px!important}.vjs-control-bar .vjs-duration{left:94px!important}.vjs-control-bar .vjs-progress-control{position:absolute;height:25px;top:12.5px;width:calc(100% - 320px);left:160px;z-index:1000;opacity:.8}.vjs-control-bar .vjs-progress-control .vjs-progress-holder{height:4px;margin:0 5px}.vjs-control-bar .vjs-progress-control .vjs-progress-holder .vjs-play-progress{background:rgba(255,115,81,.8)}.vjs-control-bar .vjs-progress-control .vjs-progress-holder .vjs-play-progress:before{content:\"\";display:block;width:10px;height:20px;position:absolute;right:-5px;top:-8px;background:#ff7351;border-radius:5px}.vjs-control-bar .vjs-progress-control .vjs-progress-holder .vjs-load-progress{background:hsla(0,0%,60.8%,.3)}.vjs-control-bar .vjs-fullscreen-control{position:absolute;top:0;right:15px;border:none!important;outline:none!important}.local .vjs-progress-control{width:calc(100% - 240px)}#chem-video-volume{right:59px;font-family:VideoJS}#chem-video-down,#chem-video-volume{position:absolute;top:0;height:50px;font-size:24px}#chem-video-down{right:55px}#chem-video-down .chem-down-ico{cursor:pointer;position:absolute;top:calc(50% - 8px)}#chem-video-speed{position:absolute;right:104px;top:0;height:50px;font-family:Microsoft YaHei,Helvetica,Arial,sans-serif;font-size:16px}#chem-video-speed .chem-speed-ico{height:100%;line-height:50px;padding:0 8px;cursor:pointer}#chem-video-volume .chem-volume-mid:before,.chem-down-ico:before,.chem-volume-0:before,.chem-volume-ico:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-enter:before,.vjs-icon-play:before{content:\"\"!important;-webkit-transform:scale(1.2);transform:scale(1.2);top:18px}.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-enter:before{left:15px}.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-play:before{left:10px}#chem-video-volume .chem-volume-ico:before{position:absolute;left:-30px}.video-chem .mask-point .inner-point,.video-chem .mask-point .mask-title-box,.video-chem .vjs-control-bar .vjs-progress-control .vjs-progress-holder .vjs-play-progress,.video-chem .vjs-control-bar .vjs-progress-control .vjs-progress-holder .vjs-play-progress:before{background:#2f8cea!important}.video-chem .chem-speed-box .chem-speed-cur-progress,.video-chem .chem-volume-box .chem-volume-progress .chem-volume-cur-progress{background-color:#2f8cea!important}.video-chem .mask-point .mask-title-box .title-arrow{border:8px solid #2f8cea!important;border-color:#2f8cea transparent transparent!important}.video-chem .chem-speed-box .chem-speed-cur-num,.video-chem .chem-volume-box .chem-volume-num{color:#2f8cea!important}.view-style-alert #nb-chem-video-close{top:-30px!important;right:-60px!important;width:50px!important;height:50px!important;border-radius:50%!important;background:rgba(74,74,74,.6);border:none!important}.view-style-alert #nb-chem-video-close .nb-chem-video-close-ico{top:-9px!important;-webkit-transform:scale(1)!important;transform:scale(1)!important}.vjs-controls-disabled .vjs-control-bar,.vjs-error .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar{display:block!important}"},enumerable:true,configurable:true});return e}())}}}));