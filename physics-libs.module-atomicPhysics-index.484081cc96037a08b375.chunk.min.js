/*!
 * Copyright (c) 2017 Nobook inc.
 * 
 * (TBD)
 * 
 * Version: 0.6.57
 * Date: Mon Apr 27 2020 08:22:33 GMT+0800 (CST)
 */
webpackJsonpPhysicsCanvas([4],{437:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=i(813),r=n(o),a=i(461),s=n(a),l=i(820),h=n(l),u=i(816),c=n(u),d=i(823),p=n(d),f=i(819),y=n(f),m=i(825),g=n(m),v=i(649),b=n(v),_=i(828),x=n(_),w=i(833),C=n(w),P=i(827),k=n(P),T=i(832),O=n(T),M=i(826),A=n(M),I=i(829),S=n(I),E=i(821),B=n(E),D=i(814),R=n(D),N=i(824),L=n(N),j=i(835),G=n(j),F=i(834),U=n(F),H=i(817),X=n(H),V=i(818),W=n(V),z=i(831),Y=n(z),q=i(830),Z=n(q),$=i(598),K=n($),Q=i(599),J=n(Q),tt=i(600),et=n(tt),it=i(596),nt=n(it),ot=i(593),rt=n(ot),at=i(595),st=n(at),lt=i(594),ht=n(lt);r["default"].classList={AtomicBase:s["default"],ElectronDiffraction:h["default"],CathodeRayTube:c["default"],HighVoltageInductionCoil:p["default"],DCHighVoltagePower:y["default"],Magnet:g["default"],DoubleDeckEquipment:b["default"],MillikanOilDrop:x["default"],SpectralTubeGroup:C["default"],MetalRodWithInsulatingHandle:k["default"],Phototube:O["default"],MetalPlates:A["default"],MultifunctionLightSource:S["default"],HollowBallElectroscope:K["default"],InlandVoltmeter:J["default"],SensitivityGalvanometer:et["default"],ElecSlideRheostat:nt["default"],ElecPowerStudent:rt["default"],ElecSinglePloeSingleThrowSwitch:st["default"],ElectronicInterference:B["default"],AlphaParticleScattering:R["default"],HydrogenAtomicEnergyLevel:L["default"],XRay:G["default"],WilsonCloudChamber:U["default"],ComptonEffect:X["default"],ElecWire:n(i(597))["default"],CosmicRays:W["default"],NuclearReactor:Y["default"],NuclearFission:Z["default"],ElecSinglePloeDoubleThrowSwitch:ht["default"],GunAtomicBomb:n(i(822))["default"],AtomicBombImplosion:n(i(815))["default"]},e["default"]=r["default"]},448:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);t.length>e;e++)i[e]=t[e];return i}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function m(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:m(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},u=i(1),c=i(502),d=n(c),p=i(503),f=n(p),y=function(t){function e(t){r(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.iElecInter=t.iElecInter,i.magnet=null,i.terminalL=null,i.terminalR=null,i.canMagReversal=!1,i.hasMagReversal=!1,i.ratedV=0,i.ratedP=0,i.isZuHe||(i.bposter0=new f["default"]("bposter0",i),i.bposter1=new f["default"]("bposter1",i),u.M.setSPPointXY(i.bposter0,-5e3,-5e3),u.M.setSPPointXY(i.bposter1,-5e3,-5e3)),i}return s(e,t),l(e,[{key:"addedFore",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){if(h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addTisi(),this.bp0&&u.M.setSPPointXY(this.bposter0,this.bp0.x+this.bp0.width/2,this.bp0.y),this.bp1&&u.M.setSPPointXY(this.bposter1,this.bp1.x+this.bp1.width/2,this.bp1.y),!this.globalConfig.DEBUG){var t=void 0;for(t=0;8>t;t++){var i=this["bp"+t];i&&this.removeChild(i)}}this.updateTerminal(),this.updateMagnet()}},{key:"addTisi",value:function(){var t=this;if(this.proSet){this.tisi=new this.HoverButton({"default":"skin/icon_repair_default",hover:"skin/icon_repair_hover",pressed:"skin/icon_repair_pressed",tab:function(){t.repair()}}),this.tisi.pivot.x=this.tisi.width/2,this.tisi.pivot.y=this.tisi.height;var e=new u.Point(this.proSet.x+this.proSet.width/2,this.proSet.y+this.proSet.height);this.tisiBox=new PIXI.Sprite,this.tisiBox.addChild(this.tisi),this.tisi.scale.x=.9,this.tisi.scale.y=.9,this.main.skinview.add(this.tisiBox,function(){return{p:e,fromTar:t}}),TweenMax.to(this.tisi,1,{y:-50,yoyo:!0,repeat:-1}),this.globalConfig.DEBUG||(this.removeChild(this.proSet),this.proSet=null),this.tisi.visible=!1,this.addCursor(this.tisi,"hand")}}},{key:"addedEnd",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this),this.freshGlow()}},{key:"freshGlow",value:function(){if(this.canReversal){this.showGlowIndex(this.hasReversal?1:0)}else h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshGlow",this).call(this)}},{key:"addedEnd",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"rotateChange",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t),this._fresh_from_componentBox_rotation()}},{key:"_fresh_from_componentBox_rotation",value:function(){if(this.canRotate&&this.bp0&&this.bp1){this.bposter0.oriPosition||(this.bposter0.oriPosition=this.bposter0.position.clone(),this.bposter1.oriPosition=this.bposter1.position.clone());var t=u.M.rotaPointFromP(this.bposter0.oriPosition,this.componentBox,this.componentBox.rotation),e=u.M.rotaPointFromP(this.bposter1.oriPosition,this.componentBox,this.componentBox.rotation);u.M.setSPPoint(this.bposter0,t),u.M.setSPPoint(this.bposter1,e),this.updateBinds(),this.globalConfig.DEBUG&&(this.bp0.x=t.x-this.bp0.width/2,this.bp0.y=t.y,this.bp1.x=e.x-this.bp1.width/2,this.bp1.y=e.y)}}},{key:"rotatedConf",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotatedConf",this).call(this,t),this._fresh_from_componentBox_rotation()}},{key:"repair",value:function(){var t=this;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this),this.tisi&&(this.tisi.visible=!1),this.freshLibPan(),setTimeout(function(){t.freshLibPan()},100)}},{key:"break",value:function(){var t=this;this.isBreak||(h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this),setTimeout(function(){t.hadDestory||(t.tisi&&t.globalConfig.SHOWTIPPAO&&(t.tisi.gotoDefault(),t.tisi.visible=!0,t.globalConfig.SoundTool.registAndPlay("ElecLampAndHolder"===t.classname||"ElecLampAndHolderRes"===t.classname?t.SoundStr.LAMP_BURN_OUT:t.SoundStr.BURN_OUT)),t.diyChanged())},0))}},{key:"set_bposter",value:function(t,e,i){this.bposter0=t,this.bposter1=e,this.Resistance=i,this.bposter0.bindinger.set_myroad(this.bposter1.bindinger,this.Resistance)}},{key:"setWorkPower",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"setWorkElec",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t)}},{key:"updateMagnet",value:function(){this.magnet&&this.magnet.gotoAndStop(this.hasMagReversal?1:0)}},{key:"magReversal",value:function(){this.updateMagnet()}},{key:"updateTerminal",value:function(){this.hasReversal?(this.terminalL&&this.terminalL.gotoAndStop(1),this.terminalR&&this.terminalR.gotoAndStop(0)):(this.terminalL&&this.terminalL.gotoAndStop(0),this.terminalR&&this.terminalR.gotoAndStop(1))}},{key:"reversal",value:function(t,e){if(this.canReversal){t||(this.hasReversal=!this.hasReversal);var i=u.M.getSPPoint(this.bposter0),n=u.M.getSPPoint(this.bposter1);u.M.setSPPoint(this.bposter0,n),u.M.setSPPoint(this.bposter1,i),this.hasReversal?(this.bposter0.bindinger.linkWireType=2,this.bposter1.bindinger.linkWireType=1):(this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2),e||this.reversalBposter01(),this.updateBinds(!0),this.freshGlow()}this.branchChange=!0,this.updateTerminal()}},{key:"reversalBposter01",value:function(){var t,e,i=this,n=this.bposter0.bindinger.friendPostersArr.slice(),r=this.bposter1.bindinger.friendPostersArr.slice();(t=this.bposter0.bindinger.friendPostersArr).splice.apply(t,[0,this.bposter0.bindinger.friendPostersArr.length].concat(o(r))),(e=this.bposter1.bindinger.friendPostersArr).splice.apply(e,[0,this.bposter1.bindinger.friendPostersArr.length].concat(o(n))),this.bposter0.bindinger.friendPostersArr.forEach(function(t){u.ArrayUtil.removeValueFromArray(t.friendPostersArr,i.bposter1.bindinger),t.friendPostersArr.push(i.bposter0.bindinger),t.BindMC.wire_h_mc.linkBposter=i.bposter0.bindinger}),this.bposter1.bindinger.friendPostersArr.forEach(function(t){u.ArrayUtil.removeValueFromArray(t.friendPostersArr,i.bposter0.bindinger),t.friendPostersArr.push(i.bposter1.bindinger),t.BindMC.wire_h_mc.linkBposter=i.bposter1.bindinger})}},{key:"getData",value:function(){var t=h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.hasReversal=this.hasReversal,t.hasMagReversal=this.hasMagReversal,t}},{key:"setData",value:function(t){this.hasReversal=!!t.hasReversal,this.hasMagReversal=!!t.hasMagReversal,t.isBreak&&this.tisi&&(this.tisi.visible=this.globalConfig.SHOWTIPPAO,this.tisi.gotoDefault()),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this._fresh_from_componentBox_rotation(),this.hasReversal&&this.reversal(!0),this.updateTerminal(),this.updateMagnet()}},{key:"setDataOver",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),!this.canReversal&&this.canRotate&&this._fresh_from_componentBox_rotation()}},{key:"loopHandle",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"loopHandle",this).call(this)}},{key:"initZuhe",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this)}},{key:"caculateOver",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"caculateOver",this).call(this)}},{key:"revokeOver",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revokeOver",this).call(this)}},{key:"beginFore",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t)}},{key:"moveFore",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t)}},{key:"endFore",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t)}},{key:"getConfEnd",value:function(t){return t=h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConfEnd",this).call(this,t)}},{key:"checkIsInOneHui",value:function(){return this.elecUtil.checkBindMCInElec([this.bposter0,this.bposter1])}},{key:"removed",value:function(){this.tisiBox&&this.main.skinview.remove(this.tisiBox),this.label&&this.main.skinview.remove(this.label),this.flabel12Box&&this.main.skinview.remove(this.flabel12Box),this.tisi&&(TweenMax.killTweensOf(this.tisi),this.tisi.dispose(),this.tisi=null),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"freshTxtSize",value:function(){}},{key:"viewZoomComplete",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"viewZoomComplete",this).call(this),this.freshTxtSize()}},{key:"defaultSettingChanged",value:function(){this.branchChange=!0}}]),e}(d["default"]);y.elecNumLabel=0,e["default"]=y},450:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function r(){n(this,r)};o.MIN_DRAW_ELEC_NUM=5e-4,o.BINDMC_POTISON_CHANGED="bindMCPotisonChanged",o.ELEC_WIRE_THICK_ALPHA=10,o.ELEC__GUAI_DIS_THICK=o.ELEC_WIRE_THICK_ALPHA,o.ELEC_BREAK_BEI=1.1,o.ELEC_BREAK_BEI2=1.25,o.MIN_RESISTANCE=1e-8,o.MAX_RESISTANCE=-1,o.DAMAGE_A=50,e["default"]=o},453:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:g(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(498),c=n(u),d=i(481),p=n(d),f=i(469),y=n(f),m=function(t){function e(t){o(this,e),t.magType=2;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i._leftMagNum=isNaN(t.leftMagNum)?0:t.leftMagNum,i._rightMagNum=isNaN(t.rightMagNum)?0:t.rightMagNum,i.is_hitPoints_debug=!1,i.isYuan=!0,i.isLock=!1,i.allCompArr=[],i.staCompArr=[],i.friendArr=[],i.thisObj=null,i.magPoint=new h.Point,i.gan_magPoint=null,i.gan_magPointSP=null,i.isZuHeMag=!1,i.zuheCompArrMag=[],i.hitRect=null,i.hitPoints=null,i._magDotBMDArr_=[],i._magDotRadius=null,i.hitSP=null,i.canCreateGanYingMag=!1,i.txtNum=0,i.ciji=1,i.has_initFirst=!1,i.magNumTxt=new PIXI.Text("0",{font:"30px 微软雅黑",fill:0,align:"left"}),i.GAN_VALID_MAXDIS=120,i.GAN_VALID_MINDIS=40,i.shiDis_=50,i.xiItemArr=new h.HashMap,i.xiPareObj=null,i.xiPareP=new h.Point,i.QU_DUI_NUM=5,i._shiDis=50,i._ganNum=0,i._magNum=0,i.showMagLine=!0,i.coilArr=[],i.I=1,i.hasIronCore=!1,i}return a(e,t),s(e,[{key:"initFirst",value:function(){}},{key:"init",value:function(t,e,i,n,o,r){this.initFirst(),this.ciji=r,this.ciji||(this.ciji=0!==e?e/Math.abs(e):1),this.canRotate=i,this.magNum=e,this.hitPoints=t,this.hitRect=h.M.getPArrRect(t),this.add_hitSP(),this.is_hitPoints_debug&&this.add_magNumTxt(),this.gan_magPoint_&&this.add_gan_magPointSP(this.gan_magPoint_),this.freshDotFrom_magNum(),this.fresh_magPoint()}},{key:"add_hitSP",value:function(){var t=0;this.is_hitPoints_debug&&(t=.4);var e=new PIXI.Graphics;e.beginFill(65280,t),e.drawRect(0,0,this.hitRect.width,this.hitRect.height),e.endFill(),e.beginFill(16711680,t),e.drawCircle(this.hitRect.width/2,this.hitRect.height/2,4),e.endFill(),this.hitSP=new PIXI.Sprite,this.hitSP.addChild(e),this.hitSP.x=this.hitRect.x,this.hitSP.y=this.hitRect.y,this.componentBox.addChild(this.hitSP)}},{key:"freshDotFrom_magNum",value:function(){}},{key:"txtNumChanged",value:function(){}},{key:"getRandPoint",value:function(){}},{key:"add_magNumTxt",value:function(){}},{key:"add_gan_magPointSP",value:function(t){}},{key:"diyChangedMag",value:function(){this.hadDestory||(this.elecUtil.magneticField_Update.checkAllChanged(),this.globalConfig.main.dispatchEvent("magElecChanged2",this))}},{key:"setMagNumOnly",value:function(){}},{key:"setGanYingMag",value:function(t){}},{key:"fresh_magPoint",value:function(){this.left&&this.right&&(this.left._fresh_magPointTar(this.left),this.right._fresh_magPointTar(this.right))}},{key:"_fresh_magPointTar",value:function(t){var e=new h.Point(t.hitRect.x+t.hitRect.width/2,t.hitRect.y+t.hitRect.height/2);e=this.toGlobalView(e,t.hitSP),h.M.setSPPoint(t.magPoint,e)}},{key:"addedFore",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.lr0&&this.lr1&&(this.removeChild(this.lr0),this.removeChild(this.lr1),this.addLR01(this._leftMagNum,this._rightMagNum))}},{key:"addedEnd",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this),setTimeout(function(){t.hadDestory||t.endFore()})}},{key:"removed",value:function(){h.ArrayUtil.removeValueFromArray(this.allCompArr,this),h.ArrayUtil.removeValueFromArray(this.staCompArr,this),this.allCompArr=null,this.staCompArr=null,this.left&&this.left.removed(),this.right&&this.right.removed(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"caculateBegin",value:function(){}},{key:"caculateOver",value:function(){var t=this;this.zuheCompArrMag.length>0&&$.each(this.zuheCompArrMag,function(e,i){t._shifang(i)})}},{key:"_shifang",value:function(t){var e=this,i=Math.floor(Math.abs(t.magNum)/this.QU_DUI_NUM);if(t.xiItemArr.length()>i){var n=t.xiItemArr.length()-i,o=t.xiItemArr.getKeyValyeArray(),r=o.splice(t.xiItemArr.length()-n,n);t.xiItemArr.clear(),$.each(o,function(e,i){t.xiItemArr.put(i.key,i.value)}),$.each(r,function(t,i){var n=i.value,o=h.M.getSPPoint(n.parent),r=o.clone();r.x+=e._shiDis;var a=2*Math.PI*Math.random(),s=h.M.rotaPointFromP(r,o,a);h.M.setSPPoint(n.parent,s)})}}},{key:"addLR01",value:function(t,i){var n=e.zhClassMap.BaseMagLR;t=t||0,i=i||0,this.left=new n(this.paramObj),this.left.initLRData(t,this.lr0.width,this.lr0.height),this.left.x=this.lr0.x,this.left.y=this.lr0.y,this.left.lrname="left",this.left.thisObj=this,this.right=new n(this.paramObj),this.right.initLRData(i,this.lr1.width,this.lr1.height),this.right.x=this.lr1.x,this.right.y=this.lr1.y,this.right.lrname="right",this.right.thisObj=this,this.isZuHeMag=!0,this.zuheCompArrMag.push(this.left),this.zuheCompArrMag.push(this.right),this.add2component(this.left),this.add2component(this.right)}},{key:"rotateChange",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t),this.rotate_xiItem_change(t),this.move_xiItem_change(),this.fresh_magPoint(),this.diyChangedMag()}},{key:"updateMagnet",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateMagnet",this).call(this),this.updateMagNum()}},{key:"updateMagNum",value:function(){this.hasMagReversal?(this.left&&(this.left.magNum=this._rightMagNum),this.right&&(this.right.magNum=this._leftMagNum)):(this.left&&(this.left.magNum=this._leftMagNum),this.right&&(this.right.magNum=this._rightMagNum)),this.diyChangedMag(),this.diyChanged()}},{key:"isFull",value:function(){var t=Math.floor(Math.abs(this.magNum)/this.QU_DUI_NUM);return this.xiItemArr.length()>=t}},{key:"toXiItem",value:function(t){this.xiPareObj=t,this.xiPareObj.xiItemArr.put(this.UID,this)}},{key:"removeXi",value:function(t){this.xiItemArr.remove(t.UID)}},{key:"clearXi",value:function(t){this.xiItemArr.clear()}},{key:"hasXi",value:function(t){return this.xiItemArr.containsKey(t.UID)}},{key:"fresh_xiItem_move_Arr",value:function(){this.left.xiItemArr.forEach(function(t,e){this.fresh_xiItem_move_A_Item(t,e)},this),this.right.xiItemArr.forEach(function(t,e){this.fresh_xiItem_move_A_Item(t,e)},this)}},{key:"fresh_xiItem_move_A_Item",value:function(t,e){if(t.parent&&t.parent.parent){t.parent.parent.updateTransform();var i=t.parent.parent.toLocal(t.xiPareP,t.xiPareObj);h.M.setSPPoint(t.parent,i),t.fresh_magPoint()}}},{key:"fresh_xiItem_rotate_Arr",value:function(t){this.left.xiItemArr.forEach(function(e,i){e.componentBox.rotation+=t},this),this.right.xiItemArr.forEach(function(e,i){e.componentBox.rotation+=t},this)}},{key:"rotate_xiItem_change",value:function(t){this.left&&this.right&&0!==t&&this.fresh_xiItem_rotate_Arr(t)}},{key:"move_xiItem_change",value:function(){this.left&&this.right&&this.fresh_xiItem_move_Arr()}},{key:"beginFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t)}},{key:"moveFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t),this.fresh_magPoint(),this.move_xiItem_change(),this.diyChangedMag()}},{key:"endFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t),this.fresh_magPoint(),this.move_xiItem_change(),this.diyChangedMag()}},{key:"setWorkPower",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t)}},{key:"showMagLineCallBack",value:function(t){this.showMagLine=t.checked}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.showMagLine=this.showMagLine,t.hasIronCore=this.hasIronCore,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.hasIronCore=!!t.hasIronCore,this.showMagLine=!!t.showMagLine}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return this.hasMagLine&&t.confArr.push(this.ComponentProperty.getSwitch(this.language.getLocaleStr("magnetic_field"),this.showMagLine,this.showMagLineCallBack,this)),t}},{key:"getElecs",value:function(){if(!this.lr0||!this.lr1)return[];var t=new h.Point(this.lr0.x+this.lr0.width/2,this.lr0.y+this.lr0.height/2);t=this.toGlobalView(t,this.componentBox);var e=new h.Point(this.lr1.x+this.lr1.width/2,this.lr1.y+this.lr1.height/2);return e=this.toGlobalView(e,this.componentBox),[{elecNum:this.left.magNum,elecPoint:t},{elecNum:this.right.magNum,elecPoint:e}]}},{key:"getComps",value:function(){if(!this.lr0||!this.lr1)return[];var t=new h.Point(this.lr0.x+this.lr0.width/2,this.lr0.y+this.lr0.height/2);t=this.toGlobalView(t,this.componentBox);var e=new h.Point(this.lr1.x+this.lr1.width/2,this.lr1.y+this.lr1.height/2);e=this.toGlobalView(e,this.componentBox);var i=this._magDotRadius||20,n=this.getMagLineStartAngle(),o=y["default"].getTotalElecLineNum(this.left.magNum,2),r=y["default"].getTotalElecLineNum(this.right.magNum,2);return[this.pointComp(this.left.magNum,o,t,i,p["default"].TYPE_NORMAL,n),this.pointComp(this.right.magNum,r,e,i,p["default"].TYPE_NORMAL,n+Math.PI)]}},{key:"createMagComp3D",value:function(t,e,i,n){return{p:{x:t,y:e},dir:i,I:n}}},{key:"getMagComps3D",value:function(){if(!this.showMagLine)return[];for(var t=[],e=this.hasIronCore?1.6:1,i=this.hasMagReversal?-1:1,n=this.I*i*e,o=0;this.coilArr.length>o;o++){var r=this.coilArr[o],a=this.toParentP(new PIXI.Point(r.x,r.y));t.push(this.createMagComp3D(a.x,a.y,r.dir,n))}return t}},{key:"getBarArr",value:function(t,e,i,n,o,r){r=r||0;for(var a=[],s=t/(e-1),l=(e-1)/2,h=0;e>h;h++){var u=void 0,c=void 0,d=void 0,p=void 0;0===r?(d=u=(h-l)*s+n,c=o+i,p=o-i):(u=n+i,d=n-i,p=c=(h-l)*s+o),a.push({x:u,y:c,dir:1},{x:d,y:p,dir:-1})}return a}},{key:"getUArr",value:function(t,e,i,n,o,r,a,s){a=a||0,s=s||0,r=r||0;for(var l=[],h=2*e/n,u=0;n>=u;u++){var c=s-e+h*u,d=a+t,p=a-t;l.push({x:d+i,y:c,dir:-1},{x:d-i,y:c,dir:1},{x:p+i,y:c,dir:1},{x:p-i,y:c,dir:-1})}for(var f=Math.PI/(o+1),y=t-i,m=t+i,g=1;o>=g;g++){var v=f*g,b=Math.cos(v),_=Math.sin(v);l.push({x:a+y*b,y:s+e+y*_,dir:1},{x:a+m*b,y:s+e+m*_,dir:-1})}var x=Math.cos(r),w=Math.sin(r);return l.forEach(function(t){var e=t.x*x+t.y*w,i=-t.x*w+t.y*x;t.x=e,t.y=i}),l}},{key:"toParentP",value:function(t){var e=this.parent.x,i=this.parent.y,n=-this.componentBox.rotation,o=Math.cos(n),r=Math.sin(n);return new PIXI.Point(e+t.x*o+t.y*r,i-t.x*r+t.y*o)}},{key:"getMagLineStartAngle",value:function(){return this.componentBox.rotation}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return this.hasMagLine&&(t.showMagLine=this.showMagLine),t}},{key:"setDefaultOrigin",value:function(){this.hasMagLine&&(this.showMagLine=!0)}},{key:"ganNum",get:function(){return this.canCreateGanYingMag?this._ganNum:0},set:function(t){this._ganNum=this.isLock?0:this.canCreateGanYingMag?t:0}},{key:"magNum",get:function(){return this._magNum},set:function(t){this._magNum=t,this._magNum=Math.max(-100,this._magNum),this._magNum=Math.min(100,this._magNum),this.freshDotFrom_magNum()}}]),e}(c["default"]);!function(){Promise.all([i.e(11).then(i.bind(null,587))]).then(function(t){m.zhClassMap={BaseMagLR:t[0]["default"]}})}(),e["default"]=m},458:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(50),s=n(a),l=i(472),h=n(l),u=void 0,c=function(){function t(e){o(this,t),this.config=Object.assign({},e),this.config.moduleMain=this,u=this,this.moduleType=-1,this.active=!1,this.hasInit=!1,this.cachePool=new h["default"],this.looplist=[]}return r(t,[{key:"getModuleType",value:function(){return this.constructor.MODULE_TYPE}},{key:"init",value:function(){this.hasInit=!0}},{key:"addPhysicsCanvasListeners",value:function(){var t=this.config.main;this.onRemoveEquipmentProx||(this.onRemoveEquipmentProx=this.onRemoveEquipment.bind(this),this.onCanvasDomClickProx=this.onCanvasDomClick.bind(this),this.onSetDataCompleteProx=this.onSetDataComplete.bind(this)),t.addEventListener(s["default"].REMOVE_EQUIPMENT,this.onRemoveEquipmentProx),t.addEventListener(s["default"].CANVAS_DOM_CLICK,this.onCanvasDomClickProx),t.addEventListener(s["default"].SET_DATA_COMPLETE,this.onSetDataCompleteProx)}},{key:"removePhysicsCanvasListeners",value:function(){var t=this.config.main;t.removeEventListener(s["default"].REMOVE_EQUIPMENT,this.onRemoveEquipmentProx),t.removeEventListener(s["default"].CANVAS_DOM_CLICK,this.onCanvasDomClickProx),t.removeEventListener(s["default"].SET_DATA_COMPLETE,this.onSetDataCompleteProx)}},{key:"canvasLock",value:function(t){}},{key:"onRemoveEquipment",value:function(){}},{key:"onCanvasDomClick",value:function(t){}},{key:"onSetDataComplete",value:function(){}},{key:"onShowAllEquip",value:function(){}},{key:"setActive",value:function(t){this.active=t,8===this.moduleType?t?(PIXI.settings.RESOLUTION=1,this.forceAndMotion.resize()):PIXI.settings.RESOLUTION=this.globalConfig.RESOLUTION:PIXI.settings.RESOLUTION!==this.globalConfig.RESOLUTION&&(PIXI.settings.RESOLUTION=this.globalConfig.RESOLUTION),t?this.addPhysicsCanvasListeners():this.removePhysicsCanvasListeners()}},{key:"enterModule",value:function(t){return Promise.resolve()}},{key:"destroy",value:function(){this.removePhysicsCanvasListeners(),this.config.moduleMain=null,this.config=null,this.onRemoveEquipmentProx=null,this.onCanvasDomClickProx=null,this.onSetDataCompleteProx=null,this.hasInit=null,this.active=null}},{key:"updateEqu",value:function(){for(var t=this.main.getEquipmentArr(!0),e=0;t.length>e;e++){var i=t[e];if(i.update)try{i.update()}catch(n){}}}},{key:"getData",value:function(){return{}}},{key:"setData",value:function(t){}},{key:"startRecoverEqu",value:function(){}},{key:"completeRecoverEqu",value:function(){}},{key:"setDataBefore",value:function(){return Promise.resolve()}},{key:"requestAnimationLoop",value:function(){this.updateEqu(),this.main&&this.main.disComp&&this.main.disComp.update(),this.foreachLooplist()}},{key:"foreachLooplist",value:function(){for(var t=0;this.looplist.length>t;t++){var e=this.looplist[t];e.update&&e.update()}}},{key:"main",get:function(){return this.config?this.config.main:null}},{key:"equipmentUtil",get:function(){return this.main.equipmentUtil}},{key:"globalConfig",get:function(){return this.main.globalConfig}},{key:"language",get:function(){return this.main.language}},{key:"SoundTool",get:function(){return this.main.globalConfig.SoundTool}},{key:"phy",get:function(){return this.main.phy}},{key:"ParticleUtil",get:function(){return this.config.ParticleUtil}},{key:"SoundStr",get:function(){return this.config.SoundStr}},{key:"Button",get:function(){return this.config.Button}},{key:"HoverButton",get:function(){return this.config.HoverButton}},{key:"ComponentProperty",get:function(){return this.config.ComponentProperty}},{key:"NBCommand",get:function(){return this.config.NBCommand}},{key:"MouseManager",get:function(){return this.config.MouseManager}},{key:"NBDrag",get:function(){return this.config.NBDrag}},{key:"UploadSkinTool",get:function(){return this.config.UploadSkinTool}},{key:"NBEvent",get:function(){return this.config.NBEvent}}],[{key:"getInstance",value:function(){return u}}]),t}();window.each=function(t,e,i){var n=void 0;for(n=0;t&&t.length>n;n++){if(!1===(i?e.call(i,n,t[n]):e.call(t[n],n,t[n])))break}},e["default"]=c},461:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function u(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:u(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(649),h=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.level=5,i.isOptical=!1,i.isAtomic=!0,i.AtomicUtil=t.moduleMain.atomicUtil,i}return r(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.elecChanged(),this.opticalChanged()}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this),this.AtomicUtil=null}},{key:"opticalChanged",value:function(){this.AtomicUtil&&this.AtomicUtil.opticalChanged()}},{key:"elecChanged",value:function(){this.branchChange=!0}},{key:"getData",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.elecChanged(),this.opticalChanged()}},{key:"getConf",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}}]),e}(h["default"])},462:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function m(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:m(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(498),c=n(u),d=i(469),p=n(d),f=i(481),y=n(f);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=-2,t.magType=1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.DEBUG=!1,i.isLock=!1,i.allCompArr=[],i.staCompArr=[],i.friendArr=[],i.thisObj=null,i.elecPoint=new h.Point,i.isZuHeFiled=!1,i.zuheFiledCompArr=[],i.hitRect=null,i.ganP=new h.Point,i.elecDotBox=new PIXI.Sprite,i.txtNum=0,i._hasInit=!1,i.canCreateGanYingElec=!1,i._particle=null,i._ganNum=0,i.isShowElecNumTxt=!1,i.shiDis_=50,i.xiItemArr=new h.HashMap,i.xiPareObj=null,i.xiPareP=new h.Point,i.QU_DUI_NUM=5,i._shiDis=50,i.startPRadius=20,i._elecNum=0,i.inCage=!1,i.cage=null,i.elecInside=null,i.hitRectSP=null,i.canHit=!0,i.op=new h.Point,i.lp=new h.Point,i.moveDir=new h.Point,i.elecsParticlesColor={zheng:13416714,fu:638425},i}return a(e,t),s(e,[{key:"init",value:function(t){var e=this;this._hasInit||(this._hasInit=!0,this._elecNum=t,this.elecAre&&(this.elecAre&&(this.hitRectSP=new PIXI.Sprite,this.hitRectSP.x=this.elecAre.x+this.elecAre.width/2,this.hitRectSP.y=this.elecAre.y+this.elecAre.height/2,this.add2component(this.hitRectSP)),this.ganPP&&this.ganPP.visible&&(this.ganPP.visible=!1,this.add2component(this.ganPP)),this.fresh_elecPoint(),this.debugRefresh(),this.isShowElecNumTxt&&this.add_elecNumTxt(),setTimeout(function(){if(!e.hadDestory){var t=e.componentBox.rotation;e.componentBox.rotation=0,e.createElecDots(),setTimeout(function(){e.hadDestory||(e.componentBox.rotation=t)},0),e.freshDotFrom_elecNum(),e.fresh_elecPoint(),e.diyChanged()}},0)))}},{key:"debugRefresh",value:function(){if(this.DEBUG){this.gg_||(this.gg_=new PIXI.Graphics,this.add2component(this.gg_));var t=this.gg_;t.clear(),t.beginFill(255,.3),t.drawRect(this.hitRect.x,this.hitRect.y,this.hitRect.width,this.hitRect.height),t.endFill(),t.beginFill(16711680),t.drawCircle(this.ganP.x,this.ganP.y,5),t.endFill()}}},{key:"checkHitRect",value:function(t){return!!t.canHit&&(!this.inCage&&!t.inCage&&(!!(t&&this.UID!==t.UID&&t.hitRect&&this.hitRect)&&this.getGlobalHitRect().intersects(t.getGlobalHitRect())))}},{key:"_checkHitPoint",value:function(t,e){return this.hitRect.containsPoint(this.componentBox.toLocal(e,t.componentBox))}},{key:"getGlobalHitRect",value:function(){var t=this.toGlobal(this.hitRect),e=this.hitRect.clone();return h.M.setSPPoint(e,t),e}},{key:"createElecDots",value:function(){var t=this;this._particle=this.ParticleUtil.getParticle(this.ParticleUtil.particles.elecs),this.add2component(this._particle),this._particle._this=this,this._particle.completeFunc=function(){t.freshParticleRect(),t.freshDotFrom_elecNum(),t._particle.particle.maxParticles=Math.abs(t.txtNum)}}},{key:"freshParticleRect",value:function(){this._particle&&this._particle.particle&&(h.M.setSPPoint(this._particle,this.hitRect),this._particle.particle.spawnRect.width=this.hitRect.width,this._particle.particle.spawnRect.height=this.hitRect.height)}},{key:"add_elecNumTxt",value:function(){this.elecNumTxt=new PIXI.Text("100",{font:"30px 微软雅黑",fill:0,align:"left"}),this.add2component(this.elecNumTxt),h.M.setSPPoint(this.elecNumTxt,this.elecAre)}},{key:"freshDotFrom_elecNum",value:function(t){if(this.txtNum=this.canCreateGanYingElec&&Math.abs(this.ganNum)>Math.abs(this._elecNum)?this._elecNum+(this.ganNum-this._elecNum):this._elecNum,this.txtNum=Math.round(this.txtNum),this.txtNum=Math.min(100,this.txtNum),this.txtNum=Math.max(-100,this.txtNum),this.elecNumTxt&&(this.elecNumTxt.text=""+this.txtNum),this._particle&&this._particle.particle){this._particle.particle.maxParticles=Math.abs(this.txtNum);this._particle.particle.startColor=h.M.retrieveRGBComponent(0>this.txtNum?this.elecsParticlesColor.fu:this.elecsParticlesColor.zheng)}t||this.txtNumChanged()}},{key:"fresh_elecPoint",value:function(){if(this.isZuHeFiled)this.left.fresh_elecPoint(),this.right.fresh_elecPoint();else{if("WastPaper"===this.classname&&h.M.setSPPointXY(this.elecPoint,this.parent.x,this.parent.y),!this.elecAre)return;var t=this.toLocal(this.hitRectSP,this.componentBox);if(this.refreshHitAreaRect(),this.parent){var e=new h.Point(t.x,t.y);e=this.toGlobalView(e,this),h.M.setSPPoint(this.elecPoint,e)}}}},{key:"refreshHitAreaRect",value:function(){this.hitRect=this.getHitAreaRect()}},{key:"getHitAreaRect",value:function(){var t=this.toLocal(this.hitRectSP,this.componentBox);return t?new h.Rectangle(t.x-this.elecAre.width/2,t.y-this.elecAre.height/2,this.elecAre.width,this.elecAre.height):new h.Rectangle}},{key:"txtNumChanged",value:function(){}},{key:"addedFore",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.elecAre&&this.elecAre.parent&&(this.elecAre.alpha=0)}},{key:"addedEnd",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"removed",value:function(){h.ArrayUtil.removeValueFromArray(this.allCompArr,this),h.ArrayUtil.removeValueFromArray(this.staCompArr,this),h.ArrayUtil.removeValueFromArray(this.zuheFiledCompArr,this),this.allCompArr=null,this.staCompArr=null,this.zuheFiledCompArr=null,h.ArrayUtil.clear(this.friendArr),this.friendArr=null,this.elecUtil.electricField_Update.removeElec(this),this.__elecAreTouchID&&h.M.removeTouch(this.elecAre,this.__elecAreTouchID),this._particle&&this._particle.destroy.call(this._particle),this.globalConfig.main.dispatchEvent("magElecChanged",this),this.inCage&&this.cage.cancelLockItem(this),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"diyChanged",value:function(){this.elecUtil.electricField_Update.checkAllChanged(),this.globalConfig.main.dispatchEvent("magElecChanged",this)}},{key:"caculateBegin",value:function(){}},{key:"caculateOver",value:function(t){"mag"===t&&this.caculateOverStatic(),this.isZuHeFiled?(this.left&&this.left._shifang(this.left),this.right&&this.right._shifang(this.right)):this._shifang(this)}},{key:"caculateOverStatic",value:function(){}},{key:"setGanYingElec",value:function(t){this.canCreateGanYingElec&&(this.ganNum=-t.ganNum,this.ganNum=Math.floor(10*this.ganNum)/10,this.freshDotFrom_elecNum())}},{key:"beginFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t)}},{key:"moveFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t),this.move_xiItem_change()}},{key:"endFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t),this.move_xiItem_change()}},{key:"beginEnd",value:function(t){this.lp=this.getMouseXY(t),this.op=this.lp.clone()}},{key:"moveEnd",value:function(t){var i=this.getMouseXY(t);this.moveDir=new h.Point(i.x-this.lp.x,i.y-this.lp.y),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.fresh_elecPoint.call(this),this.diyChanged(),this.lp=i}},{key:"endEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.fresh_elecPoint.call(this),this.diyChanged(),this.moveDir=new h.Point}},{key:"freshControl",value:function(t){var e=void 0,i=void 0,n=this.staCompArr.length;for(e=0;n>e;e++)for(i=0;n>i;i++){var o=this.staCompArr[e],r=this.staCompArr[i];if("SilkHandKerchief"===o.classname&&"GlassRob"===r.classname){var a=o.onTurnPoint(o),s=r.onTurnPoint(r);250>Math.abs(a.x-s.x)&&100>Math.abs(a.y-s.y)&&(r.left.elecNum+=1,r.right.elecNum=r.left.elecNum,o.elecNum=-r.left.elecNum)}else if("Fur"===o.classname&&"RubberRod"===r.classname){var l=o.onTurnPoint(o),u=r.onTurnPoint(r);200>Math.abs(l.x-u.x)&&60>Math.abs(l.y-u.y)&&(r.left.elecNum-=1,r.right.elecNum=r.left.elecNum,o.elecNum=-r.left.elecNum)}else if("SMStent"===o.classname&&"SMBall"===r.classname&&(r.host||(h.M.getPointLen(o.onTurnPoint(o.ballP1),new h.Point(r.parent.x,r.parent.y))>50?h.M.getPointLen(o.onTurnPoint(o.ballP2),new h.Point(r.parent.x,r.parent.y))>50?h.M.getPointLen(o.onTurnPoint(o.ballP3),new h.Point(r.parent.x,r.parent.y))>50?(r.host=null,r.hostFlag=0):(r.host=o.ballP3,r.hostFlag=3):(r.host=o.ballP2,r.hostFlag=2):(r.host=o.ballP1,r.hostFlag=1)),r.host&&r.canBind)){var c=r.onTurnPoint(r.host);h.M.setSPPoint(r.parent,c),r.fresh_elecPoint.call(r)}}}},{key:"onTurnPoint",value:function(t){return this.toGlobalView(new h.Point(0,0),t)}},{key:"setElectricField",value:function(t){}},{key:"_shifang",value:function(t){var e=Math.floor(Math.abs(t.txtNum)/this.QU_DUI_NUM);if(t.xiItemArr.length()>e){var i=t.xiItemArr.length()-e,n=t.xiItemArr.getKeyValyeArray(),o=n.splice(t.xiItemArr.length()-i,i);t.xiItemArr.clear(),$.each(n,function(e,i){t.xiItemArr.put(i.key,i.value)});var r=this;$.each(o,function(t,e){var i=e.value,n=h.M.getSPPoint(i.parent),o=n.clone();o.x+=r._shiDis;var a=2*Math.PI*Math.random(),s=h.M.rotaPointFromP(o,n,a);h.M.setSPPoint(i.parent,s)})}}},{key:"rotateChange",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t),this.fresh_elecPoint.call(this),this.rotate_xiItem_change(t),this.move_xiItem_change()}},{key:"isFull",value:function(){var t=Math.floor(Math.abs(this.txtNum)/this.QU_DUI_NUM);return this.xiItemArr.length()>=t}},{key:"toXiItem",value:function(t){this.xiPareObj=t,this.xiPareObj.xiItemArr.put(this.UID,this)}},{key:"removeXi",value:function(t){this.xiItemArr.remove(t.UID)}},{key:"clearXi",value:function(t){this.xiItemArr.clear()}},{key:"hasXi",value:function(t){return this.xiItemArr.containsKey(t.UID)}},{key:"fresh_xiItem_move_Arr",value:function(){this.isZuHeFiled?(this.left.xiItemArr.forEach(function(t,e){this.left.fresh_xiItem_move_A_Item.call(this.left,t,e)},this),this.right.xiItemArr.forEach(function(t,e){this.right.fresh_xiItem_move_A_Item.call(this.right,t,e)},this)):this.xiItemArr.forEach(function(t,e){this.fresh_xiItem_move_A_Item(t,e)},this)}},{key:"fresh_xiItem_move_A_Item",value:function(t,e){t.parent.parent.updateTransform();var i=t.parent.parent.toLocal(t.xiPareP,t.xiPareObj.componentBox);h.M.setSPPoint(t.parent,i)}},{key:"fresh_xiItem_rotate_Arr",value:function(t){this.isZuHeFiled?(this.left.xiItemArr.forEach(function(e,i){e.componentBox.rotation+=t},this),this.right.xiItemArr.forEach(function(e,i){e.componentBox.rotation+=t},this)):this.xiItemArr.forEach(function(e,i){e.componentBox.rotation+=t},this)}},{key:"rotate_xiItem_change",value:function(t){this.isZuHeFiled?(this.left.fresh_xiItem_rotate_Arr.call(this.left,t),this.right.fresh_xiItem_rotate_Arr.call(this.right,t),this.left.fresh_xiItem_move_Arr.call(this.left),this.right.fresh_xiItem_move_Arr.call(this.right)):(this.fresh_xiItem_rotate_Arr(t),this.fresh_xiItem_move_Arr())}},{key:"move_xiItem_change",value:function(){this.isZuHeFiled?(this.left.fresh_xiItem_move_Arr.call(this.left),this.right.fresh_xiItem_move_Arr.call(this.right)):this.fresh_xiItem_move_Arr()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.elecNum=this._elecNum,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this._elecNum=t.elecNum,this.freshDotFrom_elecNum()}},{key:"getElecs",value:function(){return[{elecNum:this.elecNum,elecPoint:this.elecPoint.clone(),showFlag:this.showElecMagLine}]}},{key:"getComps",value:function(){var t=p["default"].getTotalElecLineNum(this.elecNum,1),e=this.startPRadius,i=this.componentBox.rotation;return[this.pointComp(this.elecNum,t,this.elecPoint.clone(),e,y["default"].TYPE_NORMAL,i)]}},{key:"getComps3D",value:function(){return[{type:1,name:this.classname,UID:this.UID,elecNum:this.elecNum,elecPoint:this.elecPoint.clone()}]}},{key:"selectRenderChild",value:function(){return this.bg?this.bg.getBounds():null}},{key:"defaultSettingChanged",value:function(){this.elecNum=this._elecNum}},{key:"ganNum",get:function(){return this.canCreateGanYingElec?this._ganNum:0},set:function(t){this._ganNum=this.isLock?0:this.canCreateGanYingElec?t:0}},{key:"elecNum",get:function(){return this._elecNum},set:function(t){t=Math.max(-100,t),t=Math.min(100,t),this._elecNum!==t&&(this._elecNum=t,this.freshDotFrom_elecNum())}}]),e}(c["default"])},469:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);e["default"]=new(function(){function t(){n(this,t),this.k=1,this.ki=1,this.type=1,this.currentArr=[],this.elecArr=[],this.magArr=[],this.wireArr=[],this.elecArr3D=[],this.magArr3D=[],this.eleLineNumSca=1.1,this.magLineNumSca=1.1,this.gridE={sx:0,ex:100,stepx:1,sy:0,ey:100,stepy:1,mm:100,nn:100,data:[]},this.gridU={sx:0,ex:100,stepx:1,sy:0,ey:100,stepy:1,mm:100,nn:100,data:[]},this.useMag3D=!1}return o(t,[{key:"setType",value:function(t){1==t?(this.type=1,this.currentArr=this.elecArr):2==t&&(this.type=2,this.currentArr=this.magArr)}},{key:"getTotalElecLineNum",value:function(t,e){var i=e||this.type,n=5;return n=1==i?Math.round(5*this.eleLineNumSca*Math.sqrt(Math.abs(t/10))):Math.abs(Math.round(this.magLineNumSca*this.k*t*.6)),n>30&&(n=30),n}},{key:"getTotalElecNum",value:function(){var t=0;return this.currentArr.forEach(function(e){t+=e.elecNum},this),t}},{key:"removeEmptyObject",value:function(t,e){for(var i=t.length,n=i-1;n>=0;n--){0==t[n][e]&&t.splice(n,1)}}},{key:"getTotalU",value:function(t){for(var e=this.elecArr.length,i=0,n=0;e>n;n++){var o=this.elecArr[n],a=o.elecPoint,s=r.Point.distance(a,t);if(0==s)return Infinity;i+=this.k*o.elecNum/s}return i}},{key:"getWireTotalForce",value:function(t){for(var e=this.wireArr.length,i=new r.Point(0,0),n=0;e>n;n++){var o=this.wireArr[n],a=o.p1,s=o.p2,l=this.getDistanceToLine(t,a,s),h=this.getVerticalVec(t,a,s);if(0>=l.x){var u=-this.ki*o.I/l.y;i.x+=u*h.x,i.y+=u*h.y}}return i}},{key:"getTotalForce",value:function(t){for(var e=this.currentArr.length,i=new r.Point(0,0),n=0;e>n;n++){var o=this.currentArr[n],a=o.elecPoint,s=r.Point.distance(a,t);if(0==s){i.x=i.y=0;break}var l=this.k*o.elecNum/(s*s*s),h=(t.x-a.x)*l,u=(t.y-a.y)*l;i.x+=h,i.y+=u}var c=this.getWireTotalForce(t);return i.x+=c.x,i.y+=c.y,i}},{key:"getZeroEPoint",value:function(t,e){var i=t.elecPoint,n=e.elecPoint,o=t.elecNum,a=e.elecNum,s=r.Point.distance(i,n),l=o+a,h=2*s*o,u=s*s*o,c=h*h-4*l*u,d=void 0;if(c>=0&&0!=l){var p=(-h+Math.sqrt(c))/(2*l),f=(-h-Math.sqrt(c))/(2*l),y=void 0;y=(s+p)*p>0?p:f;var m=i.sub(n);m.normalize(y),d=i.add(m)}return d}},{key:"getMagTotalForce",value:function(t){return this.useMag3D?this.getMagTotalForce3D(t):this.getTotalForce(t)}},{key:"getMagTotalForce3D",value:function(t){for(var e=this.magArr3D,i=e.length,n=new r.Point(0,0),o=0;i>o;o++){var a=e[o],s=a.p,l=a.I,h=a.dir,u=r.Point.distance(s,t),c=h*l/(u*u*u),d=(t.x-s.x)*c;n.x+=-((t.y-s.y)*c),n.y+=d}return n}},{key:"getDir",value:function(t){var e=t.elecNum;return e>0?1:0>e?-1:0}},{key:"isEqualU",value:function(t,e,i){return Math.abs(t-e)<Math.abs(i)}},{key:"getTotalForceByGrid",value:function(t){var e=this.gridE.sx,i=this.gridE.stepx,n=this.gridE.sy,o=this.gridE.stepy,a=this.gridE.mm,s=this.gridE.nn,l=this.gridE.data,h=(t.x-e)/i,u=(t.y-n)/o,c=parseInt(h),d=parseInt(u);if(0>c||0>d||c>=a||d>=s)return{x:0,y:0};var p=c==a-1?c:c+1,f=d==s-1?d:d+1,y=l[c][d],m=l[p][d],g=l[c][f],v=l[p][f],b=h-c,_=u-d,x=r.Point.interpolate(y,m,b),w=r.Point.interpolate(g,v,b);return r.Point.interpolate(x,w,_)}},{key:"updateGridE",value:function(t,e){this.gridE.sx=t.left,this.gridE.ex=t.right,this.gridE.stepx=e,this.gridE.sy=t.top,this.gridE.ey=t.bottom,this.gridE.stepy=e,this.gridE.mm=parseInt((this.gridE.ex-this.gridE.sx)/this.gridE.stepx),this.gridE.nn=parseInt((this.gridE.ey-this.gridE.sy)/this.gridE.stepy),this.gridE.data=this.getMeshGridE(this.gridE.sx,this.gridE.ex,this.gridE.stepx,this.gridE.sy,this.gridE.ey,this.gridE.stepy)}},{key:"getMeshGridE",value:function(t,e,i,n,o,a){for(var s=[];e>=t;){for(var l=n,h=[];o>=l;){h.push(this.getTotalForce(new r.Point(t,l))),l+=a}s.push(h),t+=i}return s}},{key:"updateGridU",value:function(t,e){this.gridU.sx=t.left,this.gridU.ex=t.right,this.gridU.stepx=e,this.gridU.sy=t.top,this.gridU.ey=t.bottom,this.gridU.stepy=e,this.gridU.mm=parseInt((this.gridU.ex-this.gridU.sx)/this.gridU.stepx),this.gridU.nn=parseInt((this.gridU.ey-this.gridU.sy)/this.gridU.stepy),this.gridU.data=this.getMeshGridU(this.gridU.sx,this.gridU.ex,this.gridU.stepx,this.gridU.sy,this.gridU.ey,this.gridU.stepy)}},{key:"getMeshGridU",value:function(t,e,i,n,o,a){for(var s=[];e>=t;){for(var l=n,h=[];o>=l;){h.push(this.getTotalU(new r.Point(t,l))),l+=a}s.push(h),t+=i}return s}},{key:"getPointInLineByU",value:function(t,e,i,n,o,a){if(this.isEqualU(o,i,n))return t.clone();if(this.isEqualU(a,i,n))return e.clone();var s=(i-o)/(a-o);if(0>s||s>1)return null;var l=r.Point.interpolate(t,e,s);if(1>r.Point.distance(t,e))return l.clone();var h=this.getTotalU(l);return(h-i)*(a-i)>0?this.getPointInLineByU.call(this,t,l,i,n,o,h):this.getPointInLineByU.call(this,e,l,i,n,a,h)}},{key:"getpInEdge",value:function(t,e,i,n,o,r){if(0>=(t-o)*(e-o)){return this.getPointInLineByU(i,n,o,r,t,e)}return null}},{key:"getForce",value:function(t,e,i){var n=r.Point.distance(e,t);if(0==n)return 0;var o=this.k*i/(n*n*n);return new r.Point((t.x-e.x)*o,(t.y-e.y)*o)}},{key:"identity",value:function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return new r.Point(t.x/e,t.y/e)}},{key:"getAngle",value:function(t){return Math.atan2(t.y,t.x)}},{key:"getAngle2",value:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},{key:"checkBiheTo",value:function(t,e,i){return i>=r.Point.distance(t,e)}},{key:"distance",value:function(t,e){return Math.sqrt(t*t+e*e)}},{key:"getDistanceToLine",value:function(t,e,i){var n=new r.Point(i.x-e.x,i.y-e.y);n.normalize(1);var o=new r.Point(-n.y,n.x),a=new r.Point(t.x-e.x,t.y-e.y),s=new r.Point(t.x-i.x,t.y-i.y),l=a.x*o.x+a.y*o.y;return new r.Point(0>(a.x*n.x+a.y*n.y)*(s.x*n.x+s.y*n.y)?-1:1,l)}},{key:"getVerticalLine",value:function(t,e,i){var n=new r.Point(i.x-e.x,i.y-e.y);n.normalize(1);var o=new r.Point(-n.y,n.x),a=new r.Point(t.x-e.x,t.y-e.y),s=a.x*o.x+a.y*o.y;return{p:new r.Point(t.x-o.x*s,t.y-o.y*s),len:s,dir:o}}},{key:"getVerticalVec",value:function(t,e,i){var n=new r.Point(i.x-e.x,i.y-e.y);n.normalize(1);var o=new r.Point(-n.y,n.x),a=new r.Point(t.x-e.x,t.y-e.y);return 0>a.x*o.x+a.y*o.y&&(o.x*=-1,o.y*=-1),o}},{key:"dotProduct",value:function(t,e){return t.x*e.x+t.y+e.y}},{key:"gradient",value:function(t,e,i){for(var n=[],o=0;e>o;o++){n[o]=[];for(var a=0;i>a;a++){var s=new r.Point;s.x=0==o?t[1][a]-t[0][a]:o==e-1?t[o][a]-t[o-1][a]:(t[o+1][a]-t[o-1][a])/2,s.y=0==a?t[o][1]-t[o][0]:a==i-1?t[o][a]-t[o][a-1]:(t[o][a+1]-t[o][a-1])/2,n[o][a]=s}}return n}},{key:"getIntCountableSet",value:function(t,e){if(t=t||0,0==(t=parseInt(t)))return[];if(1==t)return[0];e=e||-1;for(var i=[0],n=1,o=1,r=0;t>n;)i[n]=e*o,n++,r++,2==r&&(r=0,o++),e=-e;return i}},{key:"interpolate",value:function(t,e,i,n,o){var a=new r.Point(t,e),s=new r.Point(i,n);return r.Point.interpolate(a,s,(o-t)/(i-t)).y}}]),t}())},472:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(){n(this,t),this.graphicsList=[],this.textList=[],this.elecWiredots=[],this.threeList={}}return o(t,[{key:"disposeAll",value:function(){this.graphicsList.length=0,this.textList.length=0,this.elecWiredots.length=0;for(var t=Object.keys(this.threeList),e=0;t.length>e;e++)for(var i=this.threeList[t[e]],n=0;i.length>n;n++)try{var o=i[n];o.removed&&o.removed()}catch(r){}this.threeList={}}},{key:"resetAll",value:function(t){t.x=0,t.y=0,t.pivot.x=0,t.pivot.y=0,t.scale.x=1,t.scale.y=1,t.rotation=0}},{key:"pushGraphic",value:function(t){t.clear(),this.resetAll(t),this.graphicsList.push(t)}},{key:"popGraphic",value:function(){var t=this.graphicsList.pop();return t&&t.transform||(t=new PIXI.Graphics),t}},{key:"pushText",value:function(t){t.text="",this.resetAll(t),this.textList.push(t)}},{key:"popText",value:function(t,e){var i=this.textList.pop();return i||(t=t||"",e=e||"",i=new PIXI.Text(t,e)),i}},{key:"pushElecDot",value:function(t){this.elecWiredots.push(t)}},{key:"popElecDot",value:function(){return this.elecWiredots.pop()}},{key:"pushThreeClass",value:function(t,e){var i=this.threeList[t];i||(i=[],this.threeList[t]=i),this.resetAll(e),i.push(e)}},{key:"popThreeClass",value:function(t,e,i){var n=this.threeList[t],o=null;return n&&(o=n.pop()),o||(o=new e(i)),o}}]),t}()},477:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);e["default"]=function(){function t(e,i,o,a,s,l,h){n(this,t),this.sp=e,this.openIndex=o,this.closeIndex=a,this.eabase=i,this.callBack=s,this.eabase.addCursor(this.sp,"hand"),this.isOpen=l||!1,this.bindSpArr=h,this.isOpen?this.open():this.close(),this.clickId=r.M.addTouch(this.sp,{tab:this.onClick},this)}return o(t,[{key:"onClick",value:function(t){this.isOpen?this.close():this.open(),this.callBack&&this.canCallBack()&&this.callBack.call(this.eabase,this.sp,this.isOpen)}},{key:"destroy",value:function(){r.M.removeTouch(this.sp,this.clickId),this.eabase.removedCursor(this.sp),this.sp=null,this.eabase=null,this.callBack=null,this.bindSpArr=null}},{key:"canCallBack",value:function(){return!0}},{key:"open",value:function(){var t=this;this.isOpen=!0,this.sp.gotoAndStop(this.openIndex),this.bindSpArr&&this.bindSpArr.forEach(function(e){e.gotoAndStop(t.openIndex)})}},{key:"close",value:function(){var t=this;this.isOpen=!1,this.sp.gotoAndStop(this.closeIndex),this.bindSpArr&&this.bindSpArr.forEach(function(e){e.gotoAndStop(t.closeIndex)})}},{key:"setState",value:function(t){t?this.open():this.close()}}]),t}()},480:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(448),l=function(t){return t&&t.__esModule?t:{"default":t}}(s),h=function(t){function e(t){n(this,e),t.iElecInter=1;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.Resistance=0,i.classname="BaseElecWire",i}return r(e,t),a(e,[{key:"linkTwoBindMC",value:function(t,e){this.elecUtil.linkWireBindMC(this.bposter0,t),this.elecUtil.linkWireBindMC(this.bposter1,e)}},{key:"unLink",value:function(t){t&&t.bindinger&&t.bindinger.breakBinding.call(t.bindinger)}}]),e}(l["default"]);h.UPDATE_POSTER_POSITION="update_poster_position",e["default"]=h},481:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=i(469),s=function(t){return t&&t.__esModule?t:{"default":t}}(a),l=function(){function t(e){n(this,t);i(458);this.classname="MagElecPoint",this.points=[],this.angles=[],this.startAngle=0,this.r=20,this.symmetric=!1,this.showFlag=e,this.oppsite=null}return o(t,[{key:"init",value:function(e,i){var n=(this.id=e.id||0,this.elecNum=e.elecNum,this.elecPoint=new r.Point(e.elecPoint.x,e.elecPoint.y),this.type=e.type||t.TYPE_NORMAL),o=(this.n=e.n,e.angle||0);this.r=e.r||20,this.symmetric=i||!1,this.dir=s["default"].getDir(this),this.angles=[],(i&&this.n%2!=0&&n==t.TYPE_LEFT||n==t.TYPE_RIGHT)&&(this.n+=1),this.step=2*Math.PI/this.n,this.startAngle=o-Math.PI/2+this.step/2,e.notHalfStep&&(this.startAngle-=this.step/2);for(var a=0;this.n>a;a++)this.angles.push({angle:this.startAngle+a*this.step,flag:!1});switch(n){case t.TYPE_NORMAL:break;case t.TYPE_LEFT:for(var l=parseInt(this.n/2),h=0;l>h;h++)this.angles[h].flag=!0;break;case t.TYPE_RIGHT:for(var u=parseInt(this.n/2),c=u;this.n>c;c++)this.angles[c].flag=!0;break;default:this.type=t.TYPE_NORMAL}}},{key:"getPoints",value:function(){for(var t=[],e=0;this.n>e;e++){var i=this.angles[e];if(!i.flag){var n=new r.Point;n.x=this.elecPoint.x+this.r*Math.cos(i.angle),n.y=this.elecPoint.y+this.r*Math.sin(i.angle),n.index=e,t.push(n)}}return t}},{key:"closeByIndex",value:function(t){var e=this.angles[t];e&&(e.flag=!0)}},{key:"getOppositeIndex",value:function(t){var e=parseInt(this.n/2);return e>t?e-1-t:this.n-1+e-t}},{key:"checkSimpleClose",value:function(t,e){return e=Math.max(this.r,e),!!new r.Rectangle(this.elecPoint.x-e,this.elecPoint.y-e,2*e,2*e).containsPoint(t)}},{key:"checkClose",value:function(t,e,i){if(r.Point.distance(this.elecPoint,t)<this.r){var n=this.n,o=s["default"].getAngle(e)+Math.PI,a=Math.round((o-this.startAngle)/this.step);for(a%=n;0>a;)a+=n;for(var l=s["default"].getIntCountableSet(n,-1),h=0;n>h;h++){var u=a+l[h];u=(u+n)%n;var c=this.angles[u];if(!c.flag)return c.flag=!0,1}return 2}return 0}}]),t}();l.TYPE_NORMAL=1,l.TYPE_LEFT=2,l.TYPE_RIGHT=3,e["default"]=l},486:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(e,i,o,r,a,s,l){var h=this;n(this,t),this.sp=e,this.eabase=i,this.step=o||0,this.min=r||0===r?r:-Infinity,this.max=a||0===a?a:Infinity,this.dir=s||0,this.callBack=l,this.addAngle=0,this.angle0=0,this.openAngle=-Infinity,this.rotation=this.sp.rotation,this.updateOpen(),this.eabase.addCursor(this.sp,"hand"),this.centerP=function(){return i.toGlobal(h.sp)},this.downCallBack=function(t){h.downHandleFunc(t)},this.upCallBack=function(t){h.upHandleFunc(t)},this.rotCallBack=function(t,e){h.rotateHandleFunc(t,e)},this.sp.rotateData={pareComp:i,cenP:this.centerP,rotateHandleFunc:this.rotCallBack,downHandleFunc:this.downCallBack,upHandleFunc:this.upCallBack},i.phy.addRotateTool(this.sp)}return o(t,[{key:"setValueRange",value:function(t,e){return this.minV=t,this.maxV=e,this.valueFlag=!0,this}},{key:"getValue",value:function(){return this.valueFlag?this.rotation2value(this.rotation):null}},{key:"setValue",value:function(t){if(this.valueFlag){this.setRotation(this.value2rotation(t))}return this}},{key:"setLevel0Angle",value:function(t){return this.angle0=t,this}},{key:"setLevel",value:function(t){var e=this.angle0+this.step*t;return this.rotation=e,this.sp.rotation=e,this.updateOpen(),this}},{key:"rotation2value",value:function(t){return this.linearMapping([this.min,this.max],[this.minV,this.maxV],t)}},{key:"value2rotation",value:function(t){return this.linearMapping([this.minV,this.maxV],[this.min,this.max],t)}},{key:"setRotation",value:function(t,e){return this.rotation=t,this.sp.rotation=t,this.updateOpen(),e&&this.callBack.call(this.eabase,this.sp,this.rotation,0,0,this),this}},{key:"getLevel",value:function(t){return(t=t||Math.round)((this.rotation-this.angle0)/this.step)}},{key:"setOpenAngle",value:function(t){return this.openAngle=t,this.updateOpen(),this}},{key:"updateOpen",value:function(){this.isOpen=this.rotation>this.openAngle}},{key:"destroy",value:function(){this.eabase.removedCursor(this.sp),this.eabase.phy.removeRotateTool(this.sp),this.downCallBack=null,this.upCallBack=null,this.rotCallBack=null,this.centerP=null,this.sp=null,this.callBack=null,this.eabase=null}},{key:"downHandleFunc",value:function(t){this.addAngle=0,this.eabase.cannotSystemDrag=!0}},{key:"upHandleFunc",value:function(t){this.eabase.cannotSystemDrag=!1,this.updateOpen(),this.isOpen||(this.rotation=this.angle0,this.sp.rotation=this.angle0)}},{key:"rotateHandleFunc",value:function(t,e){if(this.addAngle+=e,this.dir*this.addAngle>=0&&Math.abs(this.addAngle)>Math.abs(this.step)){var i=this.addAngle%this.step||0,n=this.rotation+this.addAngle-i;if(this.min>n?(i-=this.min-n,n=this.min):n>this.max&&(i+=this.max-n,n=this.max),this.rotation===n)return;this.rotation=n,this.sp.rotation=n;var o=this.addAngle;this.addAngle=i;var r=this.isOpen;this.updateOpen(),r=r||this.isOpen,r&&this.callBack.call(this.eabase,this.sp,this.rotation,i,o,this)}}},{key:"linearMapping",value:function(t,e,i,n){var o=t.length,r=0,a=1;n=n||1;for(var s=1;o>s;s++)1===n?i>t[s]&&(r++,a++):t[s]>i&&(r++,a++);return(e[r]-e[a])*(i-t[r])/(t[r]-t[a])+e[r]}}]),t}()},487:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function u(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:u(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(226),h=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.useBottom=!1,i.useTop=!1,i.bottomCon=null,i.topCon=null,i.pinP={x:0,y:0},i}return r(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.useBottom&&(this.bottomCon=this._addCon(this.main.view.viewBottomStack)),this.useTop&&(this.topCon=this._addCon(this.main.view.viewTopStack)),this.updatePosition()}},{key:"removed",value:function(){this._removeCon(this.bottomCon),this._removeCon(this.topCon),this.bottomCon=null,this.topCon=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"updatePosition",value:function(){this.getPinView();var t=this.pinP,e=this.getRotInView();this.bottomCon&&(this.bottomCon.x=t.x,this.bottomCon.y=t.y,this.bottomCon.rotation=e),this.topCon&&(this.topCon.x=t.x,this.topCon.y=t.y,this.topCon.rotation=e)}},{key:"getRotInView",value:function(){return this.rotation}},{key:"getPinView",value:function(){this.pinP.x=this.x,this.pinP.y=this.y}},{key:"moveEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.updatePosition()}},{key:"_addCon",value:function(t){var e=new PIXI.Container;return t.addChild(e),e.interactive=!1,e.interactiveChildren=!1,e}},{key:"_removeCon",value:function(t){t&&t.parent&&t.parent.removeChild(t)}}]),e}(h["default"])},488:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:f(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(450),c=n(u),d=i(448),p=n(d);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=2;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resArr=[],i.defaultName="E",i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,1]],wire:[[[1,1],[2,0]]],res:[[1,0],[2,c["default"].MIN_RESISTANCE]]}),this.bar1.iElecInter=2}},{key:"overStep",value:function(){Math.abs(this.bar2.curElec)>c["default"].DAMAGE_A?(this.delayBreak(),this.branchChange=!0):this.breakInterval&&(clearTimeout(this.breakInterval),this.breakInterval=null)}},{key:"delayBreak",value:function(){var t=this;this.bar1.isBreak||this.breakInterval||(this.breakInterval=setTimeout(function(){t["break"]()},10))}},{key:"break",value:function(){this.bar1.isBreak=!0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this)}},{key:"repair",value:function(){this.bar1.isBreak=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.Resistance=this.bar2.Resistance,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.bar2.Resistance=t.Resistance}},{key:"getShowValue",value:function(){return this.bar2.Resistance===c["default"].MIN_RESISTANCE?"0Ω":this.bar2.Resistance+"Ω"}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.getShowValue();return this.resArr.length&&i.confArr.push({type:this.ComponentProperty.SELECT,name:this.getLocaleStr("inResistance","内阻"),canEnter:!0,enterUnit:"Ω",maxValue:1e3,minValue:.1,showValue:n,value:this.resArr,callBack:function(e){var i=e.showValue,n=h.M.getNumStr(i)-0;0===n&&(n=c["default"].MIN_RESISTANCE),t.bar2.Resistance=n,t.diyChanged()}}),i}},{key:"Power",get:function(){return this.bar1?this.bar1.Power:0},set:function(t){this.bar1&&(this.bar1.Power=t)}}]),e}(p["default"])},491:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e["default"]=function o(t,e){n(this,o),this.fl=t||0,this.re=e||0}},494:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(t){function e(t,i){n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),a=r.__createCanvas(t,i),s=a.getContext("2d"),l=PIXI.Texture.fromCanvas(a,PIXI.SCALE_MODES.DEFAULT);return r.texture=l,r.context=s,r.canvas=a,r.W=t,r.H=i,r.defaulColor="black",l.baseTexture.resolution=1,l.baseTexture.mipmap=!1,r}return r(e,t),a(e,[{key:"setFrame",value:function(t,e,i){var n=PIXI.Texture.fromFrame(e),o=new PIXI.Sprite(n),r=t.extract.canvas(o,1);i&&this.clearCanvas(),this.context.drawImage(r,0,0,r.width,r.height,0,0,this.W,this.H),this.updateTexture()}},{key:"clearCanvas",value:function(){this.context.fillStyle=this.defaulColor,this.context.fillRect(0,0,this.W,this.H)}},{key:"setImg",value:function(t,e){e&&this.clearCanvas(),this.context.drawImage(t,0,0,t.width,t.height,0,0,this.W,this.H),this.updateTexture()}},{key:"destroy",value:function(){}},{key:"updateTexture",value:function(){this.texture.update()}},{key:"__createCanvas",value:function(t,e){var i=document.createElement("div");return i.innerHTML="<canvas width='"+t+"px' height='"+e+"px' style='width:"+t+"px;height:"+e+"px;background:#cc0000;'></canvas>",i.childNodes[0]}}]),e}(PIXI.Sprite)},497:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:f(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(448),c=n(u),d=i(450),p=n(d);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.zhen=null,i.oriAngle=0,i.unit="V",i.validNum=2,i.rotPower=0,i.curPower=0,i.vScale=1,i.angleP=1,i.minStep=i.getMinStep(),i.MIN_POWER=-.2,i.MAX_POWER=.6,i}return a(e,t),s(e,[{key:"getMinStep",value:function(){return.01/this.angleP}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.minStep=this.getMinStep(),this.ticker=h.M.addTicker(this.update,this,!0)}},{key:"removed",value:function(){h.M.removeTicker(this.ticker),this.ticker=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){if(this.curPower!==this.rotPower){var t=this.curPower-this.rotPower;Math.abs(t)<this.minStep?this.rotPower=this.curPower:this.rotPower+=.2*t,this.updateLabel();var e=!1;this.rotPower>this.MIN_POWER*p["default"].ELEC_BREAK_BEI?this.MAX_POWER*p["default"].ELEC_BREAK_BEI>this.rotPower||(this.rotPower=this.MAX_POWER*p["default"].ELEC_BREAK_BEI,e=!0):(this.rotPower=this.MIN_POWER*p["default"].ELEC_BREAK_BEI,e=!0),e&&(this.curPower=0,this["break"]()),this.updatePointerRotation()}}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),0===t&&this.updatePointerRotation(),this.updateLabel()}},{key:"updatePointerRotation",value:function(){this.zhen.rotation=this.power2angle(this.isBreak?0:this.rotPower)}},{key:"updateLabel",value:function(){this.freshLabel(h.M.getNumJie(this.rotPower*this.vScale,this.validNum)+this.unit)}},{key:"power2angle",value:function(t){return this.oriAngle+t*this.angleP}},{key:"getData",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t)}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}}]),e}(c["default"])},498:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(1),h=i(481),u=n(h),c=i(469),d=n(c),p=i(448),f=n(p);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.magType=t.magType,i.startPRadius=20,i.showElecMagLine=0,i}return a(e,t),s(e,[{key:"getElecs",value:function(){return[]}},{key:"getComps",value:function(){return[]}},{key:"getComps3D",value:function(){return[]}},{key:"getComp01",value:function(t,e,i,n){var o=this.startPRadius,r=new l.Point(e.x-i/2+o,e.y);r=this.toGlobalView(r,this.componentBox);var a=new l.Point(e.x+i/2-o,e.y);a=this.toGlobalView(a,this.componentBox);var s=d["default"].getTotalElecLineNum(t,1),h=this.getPointCompStartAngle()+n;return[this.pointComp(t/2,Math.ceil(s/2),r,o,u["default"].TYPE_LEFT,h),this.rodComp(t/2,Math.ceil(s/2),r,a,o),this.pointComp(t/2,Math.ceil(s/2),a,o,u["default"].TYPE_RIGHT,h)]}},{key:"getComp3D",value:function(t,e,i,n){return{type:2,name:this.classname,UID:this.UID,elecNum:t,angle:n,elecPoint:this.toGlobalView(e,this.componentBox),length:i}}},{key:"getPointCompStartAngle",value:function(){return this.componentBox.rotation}},{key:"rodComp",value:function(t,e,i,n,o,r){return{type:2,data:{id:r||0,elecNum:t,n:e,p1:i.clone(),p2:n.clone(),d:o}}}},{key:"pointComp",value:function(t,e,i,n,o,r,a){return{type:1,data:{id:a||0,elecNum:t,n:e,elecPoint:i.clone(),r:n,type:o,angle:r}}}},{key:"createElecs",value:function(t,e,i,n,o,r,a){for(var s=[],h=(e-2*n)/(i-1),u=0;i>u;u++){var c=void 0;c=1===a?new l.Point(o+n+h*u,r):new l.Point(o,r+n+h*u),c=this.toGlobalView(c,this.componentBox);s.push({elecNum:t/i,elecPoint:c,showFlag:this.showElecMagLine})}return s}},{key:"selectRenderChild",value:function(){return this.bg?this.bg.getBounds():null}}]),e}(f["default"])},502:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function x(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:x(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(49),c=i(504),d=n(c),p=i(450),f=n(p),y=i(13),m=i(448),g=n(m),v=i(487),b=n(v),_=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.iElecInter=0,i.flagLabel="",i.loop=!1,i.curPower=0,i.curElec=0,i._Resistance=f["default"].MIN_RESISTANCE,i.Power=0,i.Source=0,i.huiUID="0",i.allCompArrT=[],i.staCompArrT=[],i.huiArr=[],i.bPsArr=[],i.isLock=!1,i.isZuHe=!1,i.zuheBox=null,i.zuheCompArr=[],i.ratedV=0,i.ratedP=0,i.ratedI=0,i.valid=!1,i._isBreak=!1,i.isShortCircuit=!1,i.elecConnect=!0,i.drawDis=37,i.branchChange=!1,i.isReLoopElec=!1,i}return a(e,t),s(e,[{key:"_addJnjection",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_addJnjection",this).call(this,t),this.elecUtil=t?this.moduleMain.elecUtil:null}},{key:"reLoop",value:function(){return!1}},{key:"moveDragHandle",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveDragHandle",this).call(this,t),this.updateBinds()}},{key:"configBPosters",value:function(t){var e=this;h.ArrayUtil.clear(this.bPsArr),h.ArrayUtil.clear(this.owenBindingers),$.each(t,function(t,i){h.StringUtil.contains(t,"bposter")&&(e[t]=i,i.bodyBposterName=t,e.addBinPoster(i,i.bindinger.body))})}},{key:"createZuhe",value:function(t){var e=this;if(!this.hadDestory){this.isZuHe=!0;var i=[],n=[],o=[],r=void 0,a=t.bar||0,s=t.inductor||0,l=t.capacitance||0;for(r=1;a>=r;r++)i.push("bar"+r);for(this.createBRes(i),r=a+1;a+s>=r;r++)n.push("bar"+r);for(this.createBInductor(n),r=a+s+1;a+s+l>=r;r++)o.push("bar"+r);this.createBCapacitance(o);var h={};$.each(t.pos,function(t,i){h["bposter"+t]=e["bar"+i[0]]["bposter"+i[1]]}),this.configBPosters(h),t.wire&&$.each(t.wire,function(t,i){e["wire"+(t+1)]=e.createBWire(e["bar"+i[0][0]]["bposter"+i[0][1]],e["bar"+i[1][0]]["bposter"+i[1][1]])}),t.res&&$.each(t.res,function(t,i){e["bar"+i[0]].Resistance=i[1]}),$.each(t.pos,function(t,i){e.elecUtil.setBindXY(e["bposter"+t],e["bp"+t]),e["bposter"+t].ind=t})}}},{key:"createBRes",value:function(t){var i=this;$.each(t,function(t,n){var o=(0,u.extend)({name:n,zuheBox:i},i.paramObj),r=new e.zhClassMap.BaseElecResistance(o);i[n]=r,r.bposter0.x=r.bposter0.y=-5e4,r.bposter1.x=r.bposter1.y=-5e4,i.zuheCompArr.push(r)})}},{key:"createBInductor",value:function(t){var i=this;$.each(t,function(t,n){var o=(0,u.extend)({name:n,zuheBox:i},i.paramObj),r=new e.zhClassMap.BaseInductor(o);i[n]=r,r.bposter0.x=r.bposter0.y=-5e4,r.bposter1.x=r.bposter1.y=-5e4,i.zuheCompArr.push(r)})}},{key:"createBCapacitance",value:function(t){var i=this;$.each(t,function(t,n){var o=(0,u.extend)({name:n,zuheBox:i},i.paramObj),r=new e.zhClassMap.BaseCapacitance(o);i[n]=r,r.bposter0.x=r.bposter0.y=-5e4,r.bposter1.x=r.bposter1.y=-5e4,i.zuheCompArr.push(r)})}},{key:"createBWire",value:function(t,i){var n=(0,u.extend)({zuheBox:this},this.paramObj),o=new e.zhClassMap.BaseElecWire(n);return o.linkTwoBindMC(t,i),this.zuheCompArr.push(o),o.zuheBox=this,o}},{key:"addBinPoster",value:function(t,e){e||(e=this);var i=new d["default"](e,t,t.name);return this.bPsArr.push(i),null!==t&&(t.alpha=0),i}},{key:"addBinWirePoster",value:function(t){var e=new d["default"](this,t,t.name);return this.bPsArr.push(e),e}},{key:"diyChanged",value:function(){this.elecUtil&&this.elecUtil.diyChanged()}},{key:"initZuhe",value:function(){}},{key:"addedFore",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.initZuhe()}},{key:"freshDp",value:function(){var t=this;if(!this.elecUtil.checkIsWire(this))for(var e=0;this.bPsArr.length>e;e++){var i=this["bposter"+e];if(!i)break;var n=i.position;if(!n)break;if(n=n.add(i.dp),!i.dpSP&&i.bindinger.canStartDrawElecWire){var o=new PIXI.Graphics,r=this.globalConfig.DEBUG_DP?.5:0;o.beginFill(16711680,r),o.drawCircle(0,0,this.drawDis),o.endFill(),this.canRotate?this.componentBox.addChild(o):this.addChild(o),i.dpSP=o,o.poster=i,o.name=i.name+"_dpSP",i.dpSP.touchId=h.M.addTouch(o,{begin:function(e){if((0,u.get)(e,"target.poster.bindinger.canStartDrawElecWire")&&1!==t.iElecInter)if(t.ori_cannotSystemDrag=t.cannotSystemDrag,t.cannotSystemDrag=!0,-3===t.iElecInter)t.main.dispatchEvent(y.PHY_EVENTS.BPOSTER_DPSP_DOWN,e);else{t.main.viewStack.parent.updateTransform();var i=t.main.viewStack.toLocal(new h.Point,e.target);t.moduleMain.drawLineComp.startDrawElecWire.call(t.moduleMain.drawLineComp,i,e)}},move:function(e){t.main.dispatchEvent(y.PHY_EVENTS.BPOSTER_DPSP_MOVE,e)}}),this.globalConfig.DEBUG_GLOW&&(o.visible=!1)}i.dpSP&&h.M.setSPPoint(i.dpSP,n)}}},{key:"addBposterMouseStatus",value:function(t){if(t){if(!this._hasAddBposterMouseStatus){this._hasAddBposterMouseStatus=!0;for(var e=0;this.bPsArr.length>e;e++){var i=this["bposter"+e];i.dpSP&&this.addCursor(i.dpSP,"huizhi")}}}else if(this._hasAddBposterMouseStatus){this._hasAddBposterMouseStatus=!1;for(var n=0;this.bPsArr.length>n;n++){var o=this["bposter"+n];this.removedCursor(o.dpSP)}}}},{key:"addedEnd",value:function(){if(this.freshDp(),this.globalConfig.DEBUG_SHOW_UNNODE&&!this.elecUtil.checkIsWire(this)){for(var t=0;this.bPsArr.length>t;t++){var e=this["bposter"+t],i=new PIXI.Sprite;this.addChild(i),e.unNodeSP=i,h.M.setSPPointXY(i,e.dpSP.x,e.dpSP.y+20);var n=new PIXI.Text("0",{font:'30px "Microsoft Yahei"',fill:13421568,align:"left"});i.addChild(n),i.unLabel=n,n.y=30*t;var o=new PIXI.Text("",{font:'30px "Microsoft Yahei"',fill:16737792,align:"left"});i.addChild(o),i.numberLabel=o,o.y=n.y+30;var r=new PIXI.Text("",{font:'30px "Microsoft Yahei"',fill:16711680,align:"left"});i.addChild(r),i.wangLabel=r,r.y=o.y+30,r.visible=this.globalConfig.DEBUG_SHOW_UNNODE_WANG}var a=new PIXI.Text("",{font:'34px "Microsoft Yahei"',fill:10027008,align:"left"});this.addChild(a),this.elecNumLabel=a,a.text="编号: "+g["default"].elecNumLabel++;var s=this.getLocalBounds();a.x=s.x+s.width/2,a.y=s.y-30}this.elecUtil.checkIsWire(this)||this.addBposterMouseStatus(!0)}},{key:"removed",value:function(){var t=this;if(this.elecUtil.deleteEqUID(this.UID),this.addBposterMouseStatus(!1),this.isZuHe&&each(this.zuheCompArr,function(t,e){e.removed.call(e),e.zuheBox=null}),this.zuheCompArr=null,this.elecUtil.checkIsWire(this))for(var i=this.bPsArr.length,n=0;i>n;n++){var o=this.bPsArr[n];o.clear_friend.call(o)}var r=this.elecUtil.getAllElecWires(this);this.bPsArr&&$.each(this.bPsArr,function(e,i){i.body&&(i.BindMC&&(i.BindMC.body=null,i.BindMC.dpSP&&(h.M.removeTouch(i.BindMC.dpSP,i.BindMC.dpSP.touchId),i.BindMC.dpSP=null)),each(i.friendPostersArr,function(t,e){"ElecWire"===e.body.classname&&(e.BindMC.wire_h_mc.linkBposter=null)}),i.desdroy.call(i),t["bposter"+e]&&(t["bposter"+e]=null))}),each(r,function(t,e){e.freshTouDirect.call(e),e.show_h_mc.call(e,!0)}),this.bPsArr=null,h.ArrayUtil.removeValueFromArray(this.allCompArrT,this),h.ArrayUtil.removeValueFromArray(this.staCompArrT,this),this.allCompArrT=null,this.staCompArrT=null,this.huiArr=null,this.elecUtil=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"repair",value:function(){this.isBreak=!1,this.diyChanged(),this.dispatchEvent(y.PHY_EVENTS.SET_WORK_POWER_REPAIR)}},{key:"break",value:function(){this.isBreak=!0,this.dispatchEvent(y.PHY_EVENTS.SET_WORK_POWER_BREAK)}},{key:"bindWire",value:function(t,e){}},{key:"setWorkElec",value:function(t){}},{key:"setWorkPower",value:function(t){}},{key:"setWorkElecDel",value:function(t){}},{key:"setWorkPowerDel",value:function(t){}},{key:"caculateOver",value:function(){}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.uid=this.UID,t.isBreak=this.isBreak,t.flagLabel=this.flagLabel,t.Resistance=this.Resistance,t.Power=this.Power,t.posts=[],this.bPsArr.forEach(function(e,i){t.posts[i]={UID:e.UID}}),t}},{key:"setData",value:function(t){this.UID=t.uid,this.isBreak=t.isBreak,this.flagLabel=t.flagLabel,this.Resistance=t.Resistance,this.Power=t.Power,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),t.posts&&this.bPsArr.forEach(function(e,i){t.posts[i]&&(e.UID=t.posts[i].UID)})}},{key:"setDataOver",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.freshDp()}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}},{key:"loopHandle",value:function(){}},{key:"rotateChange",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t)}},{key:"checkHasPower",value:function(t){if(t&&t.huiArr){t=t||this;var e=void 0,i=t.huiArr.length;for(e=0;i>e;e++){var n=t.huiArr[e];if("ElecNo"!==n.classname&&n.Power>0)return!0}}return!1}},{key:"revokeOver",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revokeOver",this).call(this),setTimeout(function(){t.hadDestory||t.updateBinds()},50)}},{key:"moveFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t)}},{key:"endFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t),1!==this.iElecInter&&"ElecWire"!==this.classname&&this.ori_cannotSystemDrag!==undefined&&(this.cannotSystemDrag=this.ori_cannotSystemDrag,delete this.ori_cannotSystemDrag)}},{key:"getLocalBoundsElecs",value:function(){return this.canRotate?[this.componentBox]:this.bg?[this.bg]:[this]}},{key:"freshEquipShows",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshEquipShows",this).call(this,t),this.label&&(this.label.visible=t)}},{key:"updateBinds",value:function(t,e){if(!this.elecUtil.checkIsWire(this)){for(var i=0;this.bPsArr.length>i;i++)this.bPsArr[i].bindingFllowIng(t);e&&this.elecUtil.getAllElecWires(this).forEach(function(t){t.freshTouDirect.call(t)})}}},{key:"beginEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginEnd",this).call(this,t),this.main.dispatchEvent(y.PHY_EVENTS.TIP_TOP_BEGIN,{target:this.bPsArr,type:2})}},{key:"endEnd",value:function(t){var i=this;if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),"ElecWire"!==this.classname){var n=!1;this.bPsArr.forEach(function(t){var e=i.elecUtil.getNearWireBinding(t);e.forEach(function(e){e.body.linkWireBindMC.call(e.body,e.BindMC,t.BindMC)}),e.length&&(n=!0)}),n&&this.diyChanged()}}},{key:"startStep",value:function(){}},{key:"endStep",value:function(){}},{key:"overStep",value:function(){this.caculateOver()}},{key:"Resistance",set:function(t){this._Resistance=t},get:function(){return this._Resistance}},{key:"UID",get:function(){return this._UID},set:function(t){this.elecUtil.setEqUID(this,t),this._UID=t}},{key:"elecType",get:function(){var t=void 0;switch(this.iElecInter){case 2:t=3;break;case 11:t=2;break;case 9:case 10:t=this.iElecInter;break;case 12:t=12;break;default:t=1}return t}},{key:"elect_Update",get:function(){return this.elecUtil.elect_Update}},{key:"electricField_Update",get:function(){return this.elecUtil.electricField_Update}},{key:"magneticField_Update",get:function(){return this.elecUtil.magneticField_Update}},{key:"isBreak",get:function(){return this._isBreak},set:function(t){this._isBreak=t}},{key:"numLabel",get:function(){return this.elecNumLabel.text}}]),e}(b["default"]);!function(){Promise.all([i.e(11).then(i.bind(null,480)),i.e(11).then(i.bind(null,522)),i.e(11).then(i.bind(null,586)),i.e(11).then(i.bind(null,585))]).then(function(t){_.zhClassMap={BaseElecWire:t[0]["default"],BaseElecResistance:t[1]["default"],BaseInductor:t[2]["default"],BaseCapacitance:t[3]["default"]}})}(),e["default"]=_},503:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1),l=i(450),h=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t,i){n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.body=i,i&&(r.moduleMain=i.moduleMain),r.UID=s.M.getUniqueID(),r.position=new s.Point(0,0),r.dp=new s.Point(0,0),r.isWireBind=!1,r.downFunc=null,r.upHandleFunc=null,r.wire_h_mc=null,r.name=t,r.initBindinger(),r}return r(e,t),a(e,[{key:"initBindinger",value:function(){this.body&&(this.moduleMain.elecUtil.checkIsWire(this.body)?(this.bindinger=this.body.addBinWirePoster(this),this.isWireBind=!0):(this.bindinger=this.body.addBinPoster(this),this.isWireBind=!1))}},{key:"freshPosition",value:function(t,e){this.position.x=t,this.position.y=e,this.isWireBind&&this.dispatchEvent(h["default"].BINDMC_POTISON_CHANGED)}},{key:"toGlobal",value:function(){var t=null;return this.bindinger&&this.bindinger.body?("BaseElecResistance"===this.bindinger.body.classname||"BaseInductor"===this.bindinger.body.classname||"BaseCapacitance"===this.bindinger.body.classname?(this.bindinger.body.zuheBox.parent.updateTransform(),t=this.bindinger.body.zuheBox.toGlobal(this.position)):(this.bindinger.body.parent.updateTransform(),t=this.bindinger.body.toGlobal(this.position)),t):null}},{key:"getGlobalBp",value:function(){var t=this.position.add(this.dp),e=null;return this.bindinger&&this.bindinger.body?("BaseElecResistance"===this.bindinger.body.classname?(this.bindinger.body.zuheBox.parent.updateTransform(),e=this.bindinger.body.zuheBox.toGlobal(t)):(this.bindinger.body.parent.updateTransform(),e=this.bindinger.body.toGlobal(t)),e):null}},{key:"x",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y=t}},{key:"alpha",get:function(){return this.isWireBind&&this.wire_h_mc?this.wire_h_mc.alpha:1},set:function(t){this.isWireBind&&this.wire_h_mc&&(this.wire_h_mc.alpha=t)}}]),e}(PIXI.Container)},504:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);e["default"]=function(){function t(e,i,o){if(n(this,t),this.UID=r.M.getUniqueID(),this.name="",this.myroad_arr=[],this._Un=0,this.unNode=null,this.body=e,this.canStartDrawElecWire=!0,e&&(this.globalConfig=e.moduleMain.globalConfig,this.elecUtil=e.elecUtil),this.BindMC=i,this.BindMC.bindinger&&this.BindMC.bindinger.body){this.BindMC.bindinger.body.bPsArr.splice(r.ArrayUtil.getIndexFromValue(this.BindMC.bindinger.body.bPsArr,this.BindMC.bindinger),1,this)}this.BindMC.bindinger=this,this.name=o,this.friendPostersArr=[],this.linkPostersArr=[],this.linkWireType=0}return o(t,[{key:"clear_friend",value:function(){for(var t=this.friendPostersArr.length,e=0;t>e;e++){var i=this.friendPostersArr[e],n=0;if(i){for(var o=i.friendPostersArr.length,a=0;o>a;a++){if(i.friendPostersArr[a]===this){i.friendPostersArr.splice(n,1);break}n++}this.elecUtil.checkIsWire(i.body)&&(i.BindMC.alpha=1)}}r.ArrayUtil.clear(this.friendPostersArr)}},{key:"desdroy",value:function(){$.each(this.friendPostersArr,function(t,e){r.ArrayUtil.clear(e.friendPostersArr)}),this.friendPostersArr=null,this.BindMC.bindinger=null,this.BindMC.wire_h_mc=null,this.BindMC=null,this.body=null,r.ArrayUtil.clear(this.myroad_arr),this.myroad_arr=null}},{key:"set_myroad",value:function(t,e){void 0===e&&(e=1e-6);var i=void 0,n=this.myroad_arr.length,o=!1;for(i=0;n>i;i++){if(this.myroad_arr[i].to==t){o=!0;break}}if(!o){this.myroad_arr.push({to:t,zu:e});t.myroad_arr.push({to:this,zu:e})}}},{key:"clear_myroad",value:function(){var t=void 0,e=void 0,i=void 0,n=void 0;for(i=this.myroad_arr.length,t=0;i>t;t++){var o=this.myroad_arr[t],a=0;for(n=o.to.myroad_arr.length,e=0;n>e;e++){if(o.to.myroad_arr[e].to==this){o.to.myroad_arr.splice(a,1);break}a++}}r.ArrayUtil.clear(this.myroad_arr)}},{key:"nearToBinding",value:function(){this.globalConfig.main.view.updateTransform();var t=this.globalConfig.main.view.toLocal(new r.Point,this.BindMC),e=void 0,i=void 0,n=void 0,o=[],a=this.globalConfig.main.getEquipmentArr(),s=a.length;for(i=0;s>i;i++)if((e=a[i].component)&&!this.elecUtil.checkIsWire(e)&&e.bPsArr&&(!e.showLineType||1===e.showLineType)){var l=e.bPsArr.length;for(n=0;l>n;n++){var h=e.bPsArr[n];if(!h.body.isZuHe&&(!h.BindMC.cannotBindWire&&h.canStartDrawElecWire)){var u=this.globalConfig.main.view.toLocal(new r.Point,h.BindMC);if(0!==u.x||0!==u.y){var c=r.M.getPointLen(t,u);c>this.globalConfig.connectMinDistanceNumber||o.push({distance:c,component:h.body,bPsIt:h})}}}}var d=!1;return o.length&&(o.sort(function(t,e){return e.distance>t.distance?-1:1}),d=this.nearToBinding__0(o[0])),d}},{key:"nearToBinding__0",value:function(t){var e=t.component,i=t.bPsIt,n=i;if(this.elecUtil.getWireLinkBposter("bposter0"===this.BindMC.name?this.BindMC.body.bposter1:this.BindMC.body.bposter0)===i)return!1;this.elecUtil.linkWireBindMC(this.BindMC,i.BindMC);var o=this.body.toLocal(n.BindMC.position,n.BindMC);return this.BindMC.freshPosition(o.x,o.y),e.bindWire(i,this.BindMC),this.body._drawLine.call(this.body),!0}},{key:"breakBinding",value:function(){var t=this.elecUtil.checkIsWire(this.body),e=this.UID;$.each(this.friendPostersArr,function(i,n){n&&n.friendPostersArr&&$.each(n.friendPostersArr,function(i,o){if(o.UID===e)return r.ArrayUtil.removeValueFromIndex(n.friendPostersArr,i),t||(n.BindMC.alpha=1),!1})}),r.ArrayUtil.clear(this.friendPostersArr),t||(this.BindMC.alpha=1)}},{key:"bindingFllowIng",value:function(t){if(this.BindMC){new r.Point(this.BindMC.x,this.BindMC.y);if(this.body){var e=void 0,i=void 0;for(i=0;this.friendPostersArr.length>i;i++)if(e=this.friendPostersArr[i],"ElecWire"===e.body.classname||"ElecFamilyWire"===e.body.classname){var n=e.body.toLocal(this.BindMC.position,this.BindMC);e.BindMC.freshPosition(n.x,n.y),e.body._drawLine.call(e.body,!1,t)}else"SElecWire"===e.body.classname?(r.M.setSPPoint(e.BindMC.position,this.BindMC.position),e.body.caculateAndDraw.call(e.body)):"BaseElecWire"===e.body.classname&&e.body.dispatchEvent(e.body.constructor.UPDATE_POSTER_POSITION)}}}},{key:"Un",set:function(t){this._Un=t,this.BindMC.unNodeSP&&(this.BindMC.unNodeSP.unLabel.text=t)},get:function(){return this._Un}},{key:"UID",get:function(){return this._UID},set:function(t){this.elecUtil&&this.elecUtil.setEqUID(this,t),this._UID=t}}]),t}()},517:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(){n(this,t)}return o(t,null,[{key:"getArr",value:function(t){for(var e=[],i=t.length,n=0,o=0;i>o;o+=4){e[n]=.299*t[o]+.587*t[o+1]+.114*t[o+2],n++}return e}},{key:"getArr2",value:function(e){for(var i=[],n=e.length,o=0,r=0;n>r;r+=4){i[o]=255*t.rgb2hsv(e[r],e[r+1],e[r+2]).v,o++}return i}},{key:"abs",value:function(t,e,i){for(var n=[],o=0;i>o;o++){var r=t[o],a=e[o];n[o]=Math.sqrt(r*r+a*a)}return n}},{key:"center",value:function(t,e,i){for(var n=[],o=e>>1,r=i>>1,a=0;e>a;a++)for(var s=0;i>s;s++){var l=a,h=s;l=o>a?a+o:a-o,h=r>s?s+r:s-r,n[a*e+s]=t[l*e+h]}return n}},{key:"setArr",value:function(t,e,i){for(var n=0;i>n;n++)t[n]=e[n]}},{key:"setArr1",value:function(t,e,i){for(var n=0,o=0;i>o;o+=4){var r=e[n];t[o]=r,t[o+1]=r,t[o+2]=r,t[o+3]=255,n++}}},{key:"setArr2",value:function(e,i,n,o){for(var r=0,a=t.getRGB(o),s=t.rgb2hsv(a.r,a.g,a.b),l=0;n>l;l+=4){var h=i[r];s.v=Math.min(h/255,1);var u=t.hsv2rgb(s.h,s.s,s.v);e[l]=u.r,e[l+1]=u.g,e[l+2]=u.b,e[l+3]=255,r++}}},{key:"setArr3",value:function(t,e){for(var i=t.length,n=0,o=0;i>o;o+=4){var r=e[n];t[o]=r>>16&255,t[o+1]=r>>8&255,t[o+2]=255&r,t[o+3]=255,n++}}},{key:"scale",value:function(t,e,i,n){for(var o=e/2<<0,r=i/2<<0,a=[],s=0;e>s;s++)for(var l=0;i>l;l++){var h=(s-o)/n+o,u=(l-r)/n+r;h=Math.floor(h),u=Math.floor(u),a[s*e+l]=e>h&&i>u?t[h*e+u]:0}return a}},{key:"color",value:function(e,i,n){for(var o=[],r=0,a=t.getRGB(n),s=t.rgb2hsv(a.r,a.g,a.b),l=0;i>l;l+=4){var h=e[r];s.v=Math.min(h/255,1);var u=t.hsv2rgb(s.h,s.s,s.v);o[l]=u.r,o[l+1]=u.g,o[l+2]=u.b,o[l+3]=255,r++}return o}},{key:"blend",value:function(t,e,i){for(var n=0;i>n;n++){t[n]=t[n]+e[n]}}},{key:"rgb2color",value:function(t,e,i){return t>255&&(t=255),e>255&&(e=255),i>255&&(i=255),0>t&&(t=0),0>e&&(e=0),0>i&&(i=0),t&=255,e&=255,i&=255,t<<16|e<<8|i}},{key:"getRGB",value:function(t){return{r:t>>16&255,g:t>>8&255,b:255&t}}},{key:"getData0",value:function(t,e){for(var i=t*e,n=[],o=0;i>o;o++)n[o]=0;return n}},{key:"rgb2hsv",value:function(t,e,i){var n=void 0,o=void 0,r=void 0,a=Math.max(t,e,i),s=Math.min(t,e,i);return t==a&&(n=(e-i)/(a-s)),e==a&&(n=2+(i-t)/(a-s)),i==a&&(n=4+(t-e)/(a-s)),n*=60,0>n&&(n+=360),r=Math.max(t,e,i)/255,o=(a-s)/a,{h:n,s:o,v:r}}},{key:"hsv2rgb",value:function(t,e,i){var n=void 0,o=void 0,r=void 0;if(0==e)n=o=r=255*i<<0;else{t/=60;var a=t<<0,s=t-a,l=i*(1-e),h=i*(1-e*s),u=i*(1-e*(1-s));switch(a){case 0:n=i,o=u,r=l;break;case 1:n=h,o=i,r=l;break;case 2:n=l,o=i,r=u;break;case 3:n=l,o=h,r=i;break;case 4:n=u,o=l,r=i;break;case 5:n=i,o=l,r=h}n=255*n<<0,o=255*o<<0,r=255*r<<0}return{r:n,g:o,b:r}}},{key:"convV",value:function(t,e,i,n){for(var o=[],r=Math.floor(n/2),a=0;e>a;a++)for(var s=0;i>s;s++){for(var l=0,h=0,u=0;n>u;u++){var c=a+u-r;if(c>=0&&e>c){var d=c*e+s;l+=t[d],h++}}o[a*e+s]=l/h}return o}},{key:"fftshift",value:function(t,e,i){for(var n=[],o=[],r=t.re,a=t.im,s=e>>1,l=i>>1,h=0;e>h;h++)for(var u=0;i>u;u++){var c=h,d=u;c=s>h?h+s:h-s,d=l>u?u+l:u-l;var p=h*e+u,f=c*e+d;n[p]=r[f],o[p]=a[f]}return{re:n,im:o}}},{key:"setColor",value:function(t,e,i){var n=4*e;t.data[n]=i,t.data[n+1]=i,t.data[n+2]=i,t.data[n+3]=255}},{key:"complexMul",value:function(t,e,i){for(var n=[],o=[],r=t.re,a=t.im,s=e.re,l=e.im,h=0;i>h;h++){var t=r[h],e=a[h],u=s[h],c=l[h];n[h]=t*u-e*c,o[h]=t*c+e*u}return{re:n,im:o}}},{key:"complexMul0",value:function(t,e,i){for(var n=[],o=[],r=t.re,a=t.im,s=e.re,l=e.im,h=0;i>h;h++){var t=r[h],u=a[h];n[h]=t*s-u*l,o[h]=t*l+u*s}return{re:n,im:o}}},{key:"mul",value:function(t,e,i){for(var n=[],o=0;i>o;o++){n[o]=t[o]*e}return n}},{key:"maxData",value:function(t,e){for(var i=-Infinity,n=0;e>n;n++){var o=t[n];o>i&&(i=o)}return i}}]),t}()},523:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1),s=i(535),l=n(s),h=i(534),u=n(h),c=i(450),d=n(c);e["default"]=function(){function t(e){o(this,t),this.INPUT_ELEC_NAME_DEBUG=!1,this.SHOW_UNNODES_DEBUG=!1,this.moduleMain=e,this.globalConfig=e.globalConfig,this.main=this.globalConfig.main,this.NBEvent=this.main.constructor.NBEvent,this.ZERO_RESISTANCE=d["default"].MIN_RESISTANCE,this.allCompArr=[],this.staCompArr=[],this.zuheCompArr=[],this.huiArr=[],this.isChangeTrue=!1,this.time=0,this.timeStep=5e-6,this.stepLoopStepTime=0,this.addLoopInit()}return r(t,[{key:"checkAllChanged",value:function(){this.isChangeTrue=!0,this.updateCircuit()}},{key:"updateCircuit",value:function(){this.freshEquipmentArr(),this.checkNodeChange()&&(this.setChangeFalse(),this.runCircuit())}},{key:"checkNodeChange",value:function(){if(this.isChangeTrue)return!0;for(var t=!1,e=this.allCompArr.length,i=0;e>i;i++){if(this.allCompArr[i].branchChange){t=!0;break}}return t}},{key:"setChangeFalse",value:function(){this.isChangeTrue=!1;for(var t=this.allCompArr.length,e=0;t>e;e++){this.allCompArr[e].branchChange=!1}}},{key:"runCircuit",value:function(){this.startStepDis(),this.doStepDis()?this.isChangeTrue=!0:this.endStepDis()}},{key:"startStepDis",value:function(){for(var t=this.allCompArr.length,e=0;t>e;e++){var i=this.allCompArr[e];i._findFlag=0,i.huiArr=[],i.bPsArr.forEach(function(t){t.Un=0,t.unNode=null,t._findFlag=0}),i.startStep.call(i)}}},{key:"doStepDis",value:function(){var t=this,e=!1;return this.findHuiArr().forEach(function(i){i.forEach(function(t){t.huiArr=i});var n=new u["default"](t);if(n.createNodes(i),n.elecArr.length&&n.unNodes.length){var o=n.elecArr.length,r=new l["default"];r.setHead(n.unNodes.length-1);for(var s=0;o>s;s++){var h=n.elecArr[s];if(1===h.elecType)h.Resistance>0?r.appendBranch(h.bposter0.bindinger.unNode.number,h.bposter1.bindinger.unNode.number,h.Resistance,1):0===h.Resistance&&t.showElecLine&&r.appendBranch(h.bposter0.bindinger.unNode.number,h.bposter1.bindinger.unNode.number,t.ZERO_RESISTANCE,1);else if(9===h.elecType||10===h.elecType)r.appendBranch(h.bposter0.bindinger.unNode.number,h.bposter1.bindinger.unNode.number,h.compResistance,1),r.appendBranch(h.bposter0.bindinger.unNode.number,h.bposter1.bindinger.unNode.number,h.Source,2);else if(3===h.elecType)r.appendBranch(h.bposter0.bindinger.unNode.number,h.bposter1.bindinger.unNode.number,-h.Power,3);else if(2===h.elecType)r.appendBranch(h.bposter0.bindinger.unNode.number,h.bposter1.bindinger.unNode.number,-h.Source,2);else if(12===h.elecType){var c=h.bposter0.bindinger.unNode.number,d=h.bposter1.bindinger.unNode.number,p=h.bposter2.bindinger.unNode.number,f=h.bposter3.bindinger.unNode.number;r.appendVCCurrentSource(c,p,d,f,h.node_a2),r.appendVCCurrentSource(d,f,c,p,h.node_a3),r.appendBranch(c,p,a1,13),r.appendBranch(d,f,a4,13),r.appendBranch(c,p,h.Source1,2),r.appendBranch(d,f,h.Source2,2)}}var y=r.caculate();if(y&&y.vns){for(var m=null,g=0,v=0;y.vns.length>v;v++){var b=n.unNodes[v+1];b.Un=y.vns[v][0],b.isGround&&(m=b),g=Math.min(g,b.Un)}m&&(g=m.Un),n.unNodes.forEach(function(t){t.Un-=g})}else{for(var _=0;n.unNodes.length>_;_++)n.unNodes[_].destroy.call(n.unNodes[_]);a.ArrayUtil.clear(n.unNodes)}n.unNodes.forEach(function(t){t.freshUn.call(t)});var x=n.reLoopCacu();e=e||x}}),e}},{key:"endStepDis",value:function(){for(var t=this.allCompArr.length,e=0;t>e;e++){var i=this.allCompArr[e];i.endStep.call(i);var n=i.bPsArr;2===n.length&&(n[0].unNode&&n[1].unNode&&n[0].unNode.UID===n[1].unNode.UID?(i.curPower=n[1].Un-n[0].Un,0!==i.Resistance&&i.Resistance!==d["default"].MAX_RESISTANCE?(i.curElec=i.isBreak?0:i.curPower/i.Resistance,i.setWorkElec.call(i,i.curElec)):0===i.Resistance&&(this.showElecLine?(i.curElec=i.isBreak?0:i.curPower/this.ZERO_RESISTANCE,i.setWorkElec.call(i,i.curElec)):i.setWorkElec.call(i,null)),i.setWorkPower.call(i,i.curPower)):(i.curPower=0,i.curElec=0,i.isBreak||(i.setWorkElec.call(i,0),i.setWorkPower.call(i,0)))),i.overStep.call(i)}this.zuheCompArr.forEach(function(t){t.overStep.call(t)})}},{key:"freshEquipmentArr",value:function(){var t=this;a.ArrayUtil.clear(this.zuheCompArr),a.ArrayUtil.clear(this.allCompArr),a.ArrayUtil.clear(this.staCompArr);for(var e=this.main.viewStack.children.length,i=0;e>i;i++){var n=this.main.viewStack.getChildAt(i).component;n.bposter0&&n.bposter1&&(n.isZuHe?(this.zuheCompArr.push(n),this.allCompArr=this.allCompArr.concat(n.zuheCompArr)):this.allCompArr.push(n),this.staCompArr.push(n))}if(7===this.globalConfig.version&&this.moduleMain.elecFamilyPower){var o=this.moduleMain.elecFamilyPower;this.zuheCompArr.push(o),this.allCompArr=this.allCompArr.concat(o.zuheCompArr)}if(this.moduleMain.groundElecManager){this.moduleMain.groundElecManager.getAllLinkElec().forEach(function(e){t.allCompArr.push(e)})}}},{key:"findHuiArr",value:function(){for(var t=this,e=this.allCompArr.filter(function(t){return!(t.isBreak||!t.elecConnect)}),i=[];e.length;){(function(){var n=e.shift();if(0!==n._findFlag)return"continue";n._findFlag=1;for(var o=[n],r=[];o.length;)!function(){var e=o.shift();if(e.bPsArr.forEach(function(t){t.friendPostersArr.forEach(function(t){var e=t.body;e&&!e.isBreak&&e.elecConnect&&0===e._findFlag&&(e._findFlag=1,o.push(e))})}),e.isGround&&t.moduleMain.groundElecManager){t.moduleMain.groundElecManager.getAllLinkElec().forEach(function(t){!t.isBreak&&t.elecConnect&&t.UID!==e.UID&&0===t._findFlag&&(t._findFlag=1,o.push(t))})}e._findFlag=2,r.push(e)}();i.push(r)})()}return i}},{key:"addLoopInit",value:function(){this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.main.addEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandle({isRunning:this.main.isRunning})}},{key:"canvasRunHandle",value:function(t){this.setActive(t.isRunning)}},{key:"setActive",value:function(t){}},{key:"stepLoop",value:function(){var t=this;this.stepLoopStepTime>0?this.stepLoopTimerFlag||(this.stepLoopTimerFlag=setTimeout(function(){t.updateCircuit(),t.time+=t.timeStep,t.stepLoopTimerFlag=0},this.stepLoopStepTime)):(this.updateCircuit(),this.time+=this.timeStep)}},{key:"clearAll",value:function(){this.allCompArr=[],this.staCompArr=[],this.zuheCompArr=[],this.huiArr=[]}},{key:"destroy",value:function(){this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"showElecLine",get:function(){return this.globalConfig.showElecLine}}]),t}()},524:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=i(530),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(){n(this,t),this.elecArr_=[],this.CONST_k=9e9,this.GAN_VALID_MAXDIS=300,this.GAN_VALID_MINDIS=40}return o(t,[{key:"appendOne",value:function(t,e,i,n){this.elecArr_.push(new s["default"](t,e,new r.Vector2DMath(i,n)))}},{key:"clear",value:function(){r.ArrayUtil.clear(this.elecArr_)}},{key:"caculate",value:function(){var t=void 0,e=void 0,i=void 0,n=void 0;for(i=this.elecArr_.length-1,n=this.elecArr_.length,t=0;i>t;t++)for(e=t+1;n>e;e++){var o=this.getTwo_ganNum(this.elecArr_[t],this.elecArr_[e]);0>this.elecArr_[e].elecNum?this.elecArr_[t].ganNum-=o:this.elecArr_[t].ganNum+=o;var r=this.getTwo_ganNum(this.elecArr_[e],this.elecArr_[t]);0>this.elecArr_[t].elecNum?this.elecArr_[e].ganNum-=r:this.elecArr_[e].ganNum+=r}}},{key:"getTwo_ganNum",value:function(t,e){var i=void 0,n=t.v.dist(e.v);return i=n>this.GAN_VALID_MINDIS?this.GAN_VALID_MAXDIS>n?e.elecNum*this.GAN_VALID_MINDIS/n:0:e.elecNum,Math.abs(i)}},{key:"getElecV",value:function(t,e,i){var n=new r.Vector2DMath,o=this;return $.each(this.elecArr_,function(a,s){if(i&&r.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=o.getOneElecV(t,e,s);n.add(l)}),n}},{key:"getOneElecV",value:function(t,e,i){var n=i.v.dist_XY(t,e);if(0==n||n>2*this.GAN_VALID_MAXDIS)return new r.Vector2DMath(0,0);var o=Math.abs(this.CONST_k*i.elecNum/i.v.distSquared_XY(t,e)),a=new r.Vector2DMath(t-i.v.x,e-i.v.y);0>i.elecNum&&(a.x=-a.x,a.y=-a.y);var s=a.length;return new r.Vector2DMath(a.x/s*o,a.y/s*o)}},{key:"elecArr",value:function(){return this.elecArr_}}]),t}()},525:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(524),a=function(t){return t&&t.__esModule?t:{"default":t}}(r),s=i(1);e["default"]=function(){function t(e){n(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.allCompArr=[],this.staCompArr=[],this.zuheFiledCompArr=new s.HashMap,this.core_=new a["default"],this.huiArr=[],this.oneHuiArr=new s.HashMap,this.allCompArrW_=[],this.allCompArrT=[]}return o(t,[{key:"checkAllChanged",value:function(){var t=this;s.ArrayUtil.clear(this.huiArr),this.getAll_comp();var e=void 0;for(e=0;this.allCompArr.length>e;e++)this.allCompArr[e].isLock&&(this.allCompArr.splice(e,1),e--);this.allCompArrT=s.ArrayUtil.copyArray(this.allCompArr),this.cacu_allElecs(),this.setFriends(),$.each(this.staCompArr,function(e,i){i.allCompArr=this.allCompArr,i.staCompArr=this.staCompArr,i.caculateBegin.call(i),i.getElecVFunc=function(e,i){return t.getElecV(e.x,e.y,i)}}),this.average_huiArr(),this.core_.clear(),$.each(this.allCompArr,function(e,i){if(i.isLock)return!0;t.core_.appendOne(i.UID,i.elecNum,i.elecPoint.x,i.elecPoint.y)}),this.core_.caculate(),$.each(this.core_.elecArr_,function(e,i){t.allCompArr[e].ganNum=i.ganNum}),$.each(this.allCompArr,function(t,e){e.setGanYingElec.call(this,{ganNum:e.ganNum})}),$.each(this.allCompArr,function(e,i){var n=t.getElecV(i.elecPoint.x,i.elecPoint.y),o=t.getNearItem(i);o?(n.nearNum=o.elecNum,n.nearItem=o,i.setElectricField(n)):(n.nearNum=0,n.nearItem=null,i.setElectricField(n))}),$.each(this.staCompArr,function(t,e){if(e.isLock)return!0;e.caculateOver.call(e,"mag")})}},{key:"getNearItem",value:function(t){var e=1e5,i=null;return $.each(this.allCompArr,function(n,o){if(t==o||t.UID==o.UID||"WastPaper"==o.classname)return!0;var r=s.M.getPointLen(o.elecPoint,t.elecPoint);e>r&&(e=r,i=o)}),i}},{key:"average_huiArr",value:function(){$.each(this.huiArr,function(t,e){var i=0,n=0;$.each(e,function(t,e){if(e.isLock)return!0;n++,i+=e.elecNum});var o=Math.floor(i/n*10)/10;$.each(e,function(t,e){if(e.isLock)return!0;e.elecNum=o})})}},{key:"getElecV",value:function(t,e,i){var n=this.core_.getElecV(t,e,i);return{x:n.x,y:n.y}}},{key:"setFriends",value:function(){var t=this;$.each(this.allCompArr,function(t,e){s.ArrayUtil.clear(e.friendArr)}),$.each(this.huiArr,function(e,i){$.each(i,function(e,n){n.friendArr=t.get_item_friendArr(i,n)})})}},{key:"get_item_friendArr",value:function(t,e){var i=[];return $.each(t,function(t,n){n.UID!=e.UID&&i.push(n)}),i}},{key:"cacu_allElecs",value:function(){var t=this;this.oneHuiArr.clear();var e=[];if(0!=this.allCompArrT.length){for(e.push(this.allCompArrT.pop());e.length>0;){var i=e.shift();this.oneHuiArr.insert(i.UID,i);var n=this.get_OtherItems(i,this.allCompArr);if(!n)return;$.each(n,function(i,n){t.oneHuiArr.containsKey(n.UID)||s.ArrayUtil.arrayContainsValue(e,n)||(s.ArrayUtil.removeValueFromArray(t.allCompArrT,n),e.push(n))})}var o=this.oneHuiArr.values();2>o.length||this.huiArr.push(o),this.allCompArrT.length>0&&this.cacu_allElecs()}}},{key:"get_OtherItems",value:function(t,e){var i=[];return t?($.each(e,function(e,n){n.hitRect&&!n.isLock&&t.checkHitRect&&t.checkHitRect(n)&&i.push(n)}),i):this.hitArr_}},{key:"getAll_comp",value:function(){var t,e,i=void 0,n=void 0;this.hasZuhe=!1,s.ArrayUtil.clear(this.allCompArr),s.ArrayUtil.clear(this.staCompArr),this.zuheFiledCompArr.clear();var o=this.globalConfig.main.getEquipmentArr();for(i=o.length-1;i>=0;i--){var t=o[i];t&&(t.component&&(t=t.component,-2==t.iElecInter&&(this.staCompArr.push(t),t.isZuHeFiled?(this.zuheFiledCompArr.insert(t.UID,t),this.allCompArr=this.allCompArr.concat(t.zuheFiledCompArr),this.hasZuhe=!0):this.allCompArr.push(t))))}for(n=this.staCompArr.length,i=0;n>i;i++){var e=this.staCompArr[i];e.allCompArr=this.allCompArr,e.staCompArr=this.staCompArr}}},{key:"removeElec",value:function(t){t&&this.zuheFiledCompArr.remove(t.UID)}}]),t}()},526:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(1);e["default"]=function r(t,e,i){n(this,r),this.UID=t,this.magNum=e,(this.v=i)||(this.v=new o.Vector2DMath)}},527:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(1);e["default"]=function r(t,e,i,a,s){n(this,r),this.UID=t,this.lineL=e,this.v=i,a&&(this.topP=a.clone()),s&&(this.bottomP=s.clone()),this.v||(this.v=new o.Vector2DMath)}},528:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1),s=i(526),l=n(s),h=i(527),u=n(h);e["default"]=function(){function t(){o(this,t),this.magArr_=[],this.magLineArr_=[],this.CONST_k=1e6,this.GAN_VALID_MAXDIS=120,this.GAN_VALID_MINDIS=40}return r(t,[{key:"appendOne",value:function(t,e,i,n){this.magArr_.push(new l["default"](t,e,new a.Vector2DMath(i,n)))}},{key:"appendLineOne",value:function(t,e,i,n,o,r){this.magLineArr_.push(new u["default"](t,n,new a.Vector2DMath(e,i),o,r))}},{key:"clear",value:function(){a.ArrayUtil.clear(this.magArr_),a.ArrayUtil.clear(this.magLineArr_)}},{key:"caculate",value:function(){var t=void 0,e=void 0;for(this.magArr_.length-1,this.magArr_.length,t=0;this.magArr_.length-1>t;t++)for(e=t+1;this.magArr_.length>e;e++){var i=this.getTwo_ganNum(this.magArr_[t],this.magArr_[e]);0>this["this"].magArr_[e].magNum?this.magArr_[t].ganNum-=i:this.magArr_[t].ganNum+=i;var n=this.getTwo_ganNum(this.magArr_[e],this.magArr_[t]);0>this.magArr_[t].magNum?this.magArr_[e].ganNum-=n:this.magArr_[e].ganNum+=n}}},{key:"getTwo_ganNum",value:function(t,e){var i=t.v.dist(e.v);return i>this.GAN_VALID_MINDIS?this.GAN_VALID_MAXDIS>i?e.magNum*this.GAN_VALID_MINDIS/i:0:e.magNum}},{key:"getMagV",value:function(t,e,i){var n=new a.Vector2DMath,o=this;return $.each(this.magArr_,function(r,s){if(i&&a.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=o.getOneMagV(t,e,s);n.add(l)}),$.each(this.magLineArr_,function(r,s){if(i&&a.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=o.getOneLineMagV(t,e,s);n.add(l)}),n}},{key:"getOneLineMagV",value:function(t,e,i){if(0==i.lineL)return new a.Vector2DMath;var n=new a.Vector2DMath,o=new a.Point(t,e),r=a.M.getPointLen(o,i.topP)+a.M.getPointLen(o,i.bottomP)-a.M.getPointLen(i.topP,i.bottomP),s=void 0;if(1>Math.abs(r))s=1;else{var l=a.M.getGaoDianFrom3Dian(o,i.topP,i.bottomP);if(!a.M.checkInLineAB(l,i.topP,i.bottomP,.5))return new a.Vector2DMath(0,0);s=a.M.getPointLen(o,l),s=Math.max(2,s)}var h=170-s/10;h=Math.max(1,h),h*=i.lineL;var u=new a.Point(i.topP.x-i.bottomP.x,i.topP.y-i.bottomP.y);u=a.M.rotaPoint(u,a.M.toHu(90)),n.x=u.x,n.y=u.y;var c=n.length;return new a.Vector2DMath(-n.x/c*h,-n.y/c*h)}},{key:"getOneMagV",value:function(t,e,i){if(0==i.v.dist_XY(t,e))return new a.Vector2DMath(0,0);var n=Math.abs(this.CONST_k*i.magNum/i.v.distSquared_XY(t,e)),o=new a.Vector2DMath(t-i.v.x,e-i.v.y);0>i.magNum&&(o.x=-o.x,o.y=-o.y);var r=o.length;return new a.Vector2DMath(o.x/r*n,o.y/r*n)}},{key:"get_magArr",value:function(){return this.magArr_}}]),t}()},529:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=i(528),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(e){n(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.allCompArr=[],this.staCompArr=[],this.core_=new s["default"]}return o(t,[{key:"checkAllChanged",value:function(){this.getAll_comp.call(this);var t=this;$.each(this.staCompArr,function(e,i){i.allCompArr=t.allCompArr,i.staCompArr=t.staCompArr,i.caculateBegin&&i.caculateBegin.call(t),i.getMagVFunc=function(t,e){return getMagV(t.x,t.y,e)}}),this.core_.clear(),$.each(this.allCompArr,function(e,i){if(i.isLock)return!0;if("AstElecComp"===i.classname){var n=Math.abs(i.curPower)>1e-6?i.curPower:0;t.core_.appendLineOne(i.UID,i.x,i.y,n,i.getGlobalTopP(),i.getGlobalBottomP())}else t.core_.appendOne(i.UID,i.magNum,i.magPoint.x,i.magPoint.y)}),$.each(this.allCompArr,function(e,i){if(i.isLock)return!0;var n=t.getMagV(i.magPoint.x,i.magPoint.y);if(i.setMagtricField){var o=t.getNearItem(i);o&&(n.nearNum=o.magNum,n.nearItem=o,i.setMagtricField(n))}}),$.each(this.allCompArr,function(t,e){if(e.isLock)return!0;e.caculateOver&&e.caculateOver.call(e)})}},{key:"getNearItem",value:function(t){var e=this.globalConfig.main.view.toLocal(new r.Point,t),i=1e5,n=null;return $.each(this.allCompArr,function(o,a){var s=r.M.getPointLen(a.magPoint,e);if(a.UID==t.UID||0==a.magNum)return!0;i>s&&(i=s,n=a)}),n}},{key:"getMagV",value:function(t,e,i){var n=this.core_.getMagV(t,e,i);return{x:n.x,y:n.y}}},{key:"getAll_comp",value:function(){r.ArrayUtil.clear(this.allCompArr),r.ArrayUtil.clear(this.staCompArr);var t=void 0,e=this.globalConfig.main.getEquipmentArr();for(t=e.length-1;t>=0;t--){var i=e[t];i&&(i.component&&(i=i.component,i.isLock||2==i.magType&&(this.staCompArr.push(i),i.isZuHeMag?this.allCompArr=this.allCompArr.concat(i.zuheCompArrMag):i.isYuan&&this.allCompArr.push(i))))}}},{key:"freshMag",value:function(t){$.each(this.staCompArr,function(e,i){i.freshMag&&i.freshMag(t)})}}]),t}()},530:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(1);e["default"]=function r(t,e,i){n(this,r),this.UID=t,this.elecNum=e,this.v=i,this.ganNum=0,this.v||(this.v=new o.Vector2DMath)}},531:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isStartLoop=!0,i.dotLen=30,i.firstDis=0,i._points=[],i._speed=0,i._skin=null,i.isactive=!1,i.sprites=new PIXI.ParticleContainer(1e4,{scale:!1,position:!0,rotation:!0,uvs:!1,alpha:!1}),i.addChild(i.sprites),i.sprites.visible=!1,i.dotArr=[],i}return r(e,t),a(e,[{key:"setSkin",value:function(t){this._skin=t}},{key:"getPoints",value:function(){return this._points}},{key:"setPoints",value:function(t){if(this.firstDis=0,this.sprites&&(this.removeAllDot(),this._points=t,this.isStartLoop&&this._skin&&this._points&&this._speed&&t&&t.length)){for(var e=0,i=1;t.length>i;i++){e+=s.M.getPointLen(t[i-1],t[i])}for(var n=Math.floor(e/this.dotLen),o=0;n>o;o++){var r=this.createDot();this.sprites.addChild(r),this.dotArr.push(r)}this.freshDotLocation()}}},{key:"freshDotLocation",value:function(){if(this.isStartLoop&&this._skin&&this._points&&this._speed&&this._points&&this._points.length){var t=0,e=0,i=0,n=this._points[i],o=this._points[i+1];e+=s.M.getPointLen(n,o);for(var r=0;this.dotArr.length>r;r++){for(var a=this.dotArr[r],l=this.firstDis+r*this.dotLen;l>=e&&i+1!==this._points.length;)i++,t=e,n=o,(o=this._points[i+1])&&(e+=s.M.getPointLen(n,o));var h=l-t;if(o){var u=s.M.getXianDianByDis(h,!0,n,o);s.M.setSPPoint(a,u);var c=s.M.getAngleP(o,n);c=this._speed>0?c-90:c+90;a.rotation=s.M.toHu(c)}}}}},{key:"removed",value:function(){this.removeAllDot()}},{key:"removeAllDot",value:function(){for(;this.dotArr.length>0;){var t=this.dotArr.pop();this.parent.main.cachePool.pushElecDot(t),this.sprites.removeChild(t)}}},{key:"createDot",value:function(){var t=void 0;return t=this.parent.main.cachePool.popElecDot(),t||(t=PIXI.Sprite.fromImage(this._skin)),t.anchor.set(.5),t}},{key:"setSpeed",value:function(t){this._speed=t}},{key:"getSpeed",value:function(){return this._speed}},{key:"fresh",value:function(){this.setPoints(this._points)}},{key:"loop",value:function(){if(this.isactive){if(!(this.isStartLoop&&this._skin&&this._points&&this._speed))return void(this.sprites.visible&&(this.removeAllDot(),this.sprites.visible=!1));this.sprites.visible||(this.sprites.visible=!0),this.firstDis-=this._speed,this.firstDis>this.dotLen?this.firstDis-=this.dotLen:0>this.firstDis&&(this.firstDis+=this.dotLen),this.freshDotLocation()}}},{key:"setActive",value:function(t){this.isactive=t}},{key:"destroy",value:function(){this.sprites&&(this.sprites.destroy(),this.sprites=null)}}]),e}(PIXI.Sprite)},533:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(491),a=function(t){return t&&t.__esModule?t:{"default":t}}(r);e["default"]=function(){function t(){n(this,t)}return o(t,null,[{key:"cmplx",value:function(t,e){return new a["default"](t,e)}},{key:"add",value:function(t,e){var i=new a["default"];return i.re=t.re+e.re,i.fl=t.fl+e.fl,i}},{key:"sub",value:function(t,e){var i=new a["default"];return i.re=t.re-e.re,i.fl=t.fl-e.fl,i}},{key:"time",value:function(t,e){var i=new a["default"];return i.re=t.fl*e.re+t.re*e.fl,i.fl=t.fl*e.fl-t.re*e.re,i}},{key:"divv",value:function(t,e){var i=new a["default"],n=e.re*e.re+e.fl*e.fl;return n?(n=1/n,i.re=(t.re*e.fl-t.fl*e.re)*n,i.fl=(t.fl*e.fl-t.re*e.re)*n,i):null}},{key:"sabs",value:function(t){return Math.sqrt(t.fl*t.fl+t.re*t.re)}},{key:"ang",value:function(t){var e=void 0;return 0===t.fl?e=90:(e=Math.atan2(t.re,t.fl),e=180*e/3.1415926),e}}]),t}()},534:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=i(538),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(e){n(this,t),this.UID=r.M.getUniqueID(),this.cacuMain=e,this.elecArr=null,this.allBPoster=[],this.allBPosterMap=new Map,this.unNodes=[],this.reLoopCompArr=[]}return o(t,[{key:"createNodes",value:function(t){if(this.elecArr=t,this.findAllBPosterAndReset(),this.createUnNodes(),this.cacuMain.SHOW_UNNODES_DEBUG)for(var e=0;this.unNodes.length>e;e++)for(var i=this.unNodes[e],n=0;i.bposterArr.length>n;n++);}},{key:"findAllBPosterAndReset",value:function(){var t=this;r.ArrayUtil.clear(this.unNodes),r.ArrayUtil.clear(this.allBPoster),this.allBPosterMap.clear(),this.elecArr.forEach(function(e){t.allBPoster=t.allBPoster.concat(e.bPsArr),e.isReLoopElec&&t.reLoopCompArr.push(e)}),this.allBPoster.forEach(function(e){t.allBPosterMap.set(e.UID,e)})}},{key:"createUnNodes",value:function(){for(var t=this,e=0;this.allBPoster.length;){var i=this.allBPoster.shift();if(0===i._findFlag){i._findFlag=1;for(var n=[i],o=new s["default"](this.UID),r=[];n.length;){var a=n.shift(),l=a.friendPostersArr;if(a.isGround){l=l.concat(a.friendPostersArr)}else if(!this.cacuMain.showElecLine&&2===a.body.bPsArr.length&&1===a.body.elecType&&0===a.body.Resistance&&!a.body.isBreak&&a.body.elecConnect){var h="bposter0"===a.BindMC.name?a.body.bposter1.bindinger:a.body.bposter0.bindinger;l=l.concat([h])}l=l.filter(function(e){var i=!1;return t.allBPosterMap.has(e.UID)?0===e._findFlag&&(i=!0):(i=!0,t.allBPosterMap.set(e.UID,e)),i&&(e._findFlag=1),i}),n=n.concat(l),a._findFlag=2,a.unNode=o,a.isGround&&(o.isGround=!0),r.push(a)}o.number=e,o.bposterArr=r,this.unNodes.push(o),e++}}}},{key:"reLoopCacu",value:function(){var t=!1;return this.elecArr.forEach(function(e){t=t||e.reLoop()}),t}}]),t}()},535:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(491),s=n(a),l=i(533),h=n(l),u=i(537),c=n(u);e["default"]=function(){function t(){o(this,t),this.debug=!1,this.inputDebug=!1,this.gn=[],this.jn=[],this.nt=0,this.nb=0,this.w=100*Math.PI,this.jr=[0],this.branchDataArr=[]}return r(t,[{key:"trace",value:function(){if(this.debug)for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i]}},{key:"setHead",value:function(t){this.nt=t}},{key:"appendBranch",value:function(t,e,i,n){this.branchDataArr.push([t,e,i]),this.jr.push(n)}},{key:"appendVCCurrentSource",value:function(t,e,i,n,o){this.branchDataArr.push([start,end,o,i,n]),this.jr.push(12)}},{key:"clear",value:function(){this.branchDataArr.splice(0,this.branchDataArr.length),this.jr.splice(1,this.jr.length-1),this.nt=0,this.nb=0}},{key:"caculate",value:function(){if(this.nb=this.branchDataArr.length,0===this.nt||0===this.nb)return null;for(var t=[],e=[],i=[],n=this.jn,o=this.gn,r=0;this.nt+5>r;r++){n[r]=new s["default"](0,0),e[r]=new s["default"](0,0),i[r]=new s["default"](0,0);for(var a=0;this.nt+5>a;a++)o[r]||(o[r]=[]),o[r][a]=new s["default"](0,0),t[r]||(t[r]=[]),t[r][a]=new s["default"](0,0)}var l=this.input(e),h=l.ny,u=l.at;this.trace("******ny******"),this.trace("ny:",h);for(var d=1;h>=d;d++){t[d]||(t[d]=[]);for(var p=1;h>=p;p++)o[d][p]||(o[d][p]=new s["default"]),t[d][p]=o[d][p];t[d][h+1]=n[d]}this.trace("******gna******");for(var f=1;h>=f;f++){for(var y="",m=1;h+1>=m;m++)y+="\t"+t[f][m].fl;this.trace(y)}if(this.gauss(t,i,h)>1e-9){this.trace("******a的转置******"),this.debug&&c["default"].traceMatrix(u),this.trace("******节点电压Vn******");for(var g=1;h>=g;g++)this.trace(g+"-----------\x3e"+i[g].fl+"+i"+i[g].re);for(var v=[],b=this.nt+1;h>=b;b++)v.push(i[b].fl);this.trace("******节点电压Vn实体部分 vns******");for(var _=[],x=1;this.nt>=x;x++)_[x-1]||(_[x-1]=[]),_[x-1][0]=i[x].fl;this.debug&&c["default"].traceMatrix(_),this.trace("******支路电压 Ub = At * GN ******");var w=c["default"].multiply(u,_);return this.debug&&c["default"].traceMatrix(w),{vns:_,ub:w,list:v}}return this.trace("没结果!"),null}},{key:"conclus",value:function(t,e,i){var n=this.w,o=this.nt;this.trace("*********节点电压*********");for(var r=1;o>=r;r++)this.trace("VN["+r+"]="+t[r].fl+"+j"+t[r].re);this.trace("*******电压源支路电流*******");for(var a=o+1;i>=a;a++)this.trace("IS["+e[a]+"]="+t[a].fl+"+j"+t[a].re);this.trace("***********时域形式***********");for(var s=1;o>=s;s++)this.trace("vn["+s+"]="+h["default"].sabs(t[s])+"cos("+n+"t+"+h["default"].ang(t[s])+")");for(var l=o+1;i>=l;l++)this.trace("IS["+e[l]+"]="+h["default"].sabs(t[l])+"cos("+n+"t+"+h["default"].ang(t[l])+")")}},{key:"input",value:function(t){var e=[],i=[],n=void 0,o=[],r=[],a=[],s=[],l=[],h=this.nt,u=this.nb,d=this.w;this.trace("节点数NT "+h+",支路数NB "+u+",角频率W "+d),n=h;for(var p=this.jr,f=1;u>=f;f++)switch(this.trace("编号 "+f+", 类型 "+p[f]),p[f]){case 1:case 2:case 9:case 10:case 13:this.gj(f,p,e,o,s,l,d,this.branchDataArr[f-1]);break;case 3:n++,this.es(f,e,o,s,l,n,r,this.branchDataArr[f-1]),t[n]=f;break;case 4:n++,this.vcvs(f,e,o,s,n,i,r),t[n]=f;break;case 5:this.vccs(f,e,o,s,i);break;case 6:n++,this.ccvs(f,e,o,s,n,i,r),t[n]=f;break;case 7:this.cccs(f,e,o,s,i,r);break;case 8:this.hllm(f,e,o,s,l,i,d);break;default:this.trace("error")}this.trace("============GN==============");for(var y=1;h+1>=y;y++){for(var m="",g=1;h+1>=g;g++)m+="\t"+this.gn[y][g].fl;this.trace(m)}this.trace("============RHS==============");for(var v="",b=1;h+1>=b;b++)v+="\t"+this.jn[b].fl;this.trace(v);for(var _=1;u+1>=_;_++)a[e[_]]||(a[e[_]]=[]),a[o[_]]||(a[o[_]]=[]),a[e[_]][_-1]=1,a[o[_]][_-1]=-1;for(var x=0;a.length>x;x++)for(var w=0;u>w;w++)a[x]||(a[x]=[]),a[x][w]||(a[x][w]=0);a.shift(),this.trace("******************"),this.trace("输入节点数NT 输入支路数NB 扩展行NY 输入角频率W"),this.trace("NT\tNB\tNY\tW"),this.trace(h+"\t"+u+"\t"+n+"\t"+d),this.trace("********各支路参数**********"),this.trace("编号I 支路类型JR 起点编号NS 止点编号NF 参数DX 元件类型ICR 初相角DXC 控制支路编号IC"),this.trace("I\tJR\tNS\tNF\tDX\tDXC\tIC");for(var C=1;u>=C;C++)this.trace(C+"\t"+p[C]+"\t"+e[C]+"\t"+o[C]+"\t"+s[C]+"\t"+l[C]+"\t"+i[C]);return this.trace("******关联矩阵a******"),this.debug&&c["default"].traceMatrix(a),{ny:n,at:c["default"].transpose(a)}}},{key:"gj",value:function(t,e,i,n,o,r,a,l){var u=this.gn,c=this.jn,d=void 0,p=void 0,f=new s["default"](1,0),y=new s["default"],m=new s["default"],g=l;if(i[t]=g[0],n[t]=g[1],1===e[t]||9===e[t]||10===e[t]||13===e[t])o[t]=g[2],this.trace("输入起点，止点，参数及元件类型（R：１，L：２，C：３）:",i[t],n[t],o[t]),d=i[t],p=n[t],1===e[t]||13===e[t]?(y.fl=o[t],y.re=0):9===e[t]?(y.fl=0,y.re=o[t]*a):10===e[t]&&(y.fl=0,y.re=-1/(o[t]*a)),m=13===e[t]?y:h["default"].divv(f,y),0!==d&&0!==p?(this.buGn(d,p),u[d][d]=h["default"].add(u[d][d],m),u[p][p]=h["default"].add(u[p][p],m),u[p][d]=h["default"].sub(u[p][d],m),u[d][p]=h["default"].sub(u[d][p],m)):0===p?(this.buGn(d),u[d][d]=h["default"].add(u[d][d],m)):(this.buGn(p),u[p][p]=h["default"].add(u[p][p],m));else{r[t]=0,o[t]=g[2],this.trace("输入起点，止点与参数及初相角: ",i[t],n[t],o[t],r[t]);var v=3.14159*r[t]/180;y.fl=o[t]*Math.cos(v),y.re=o[t]*Math.sin(v),d=i[t],p=n[t],d&&(c[d]=h["default"].sub(c[d],y)),p&&(c[p]=h["default"].add(c[p],y))}}},{key:"es",value:function(t,e,i,n,o,r,a,l){var h=this.gn,u=this.jn,c=new s["default"],d=new s["default"](1,0),p=new s["default"](-1,0),f=l;e[t]=f[0],i[t]=f[1],n[t]=f[2],o[t]=0,this.trace("输入电压源的起点，止点与参数及初相角: ",e[t],i[t],n[t],o[t]);var y=e[t],m=i[t];a[t]=r,0!==y&&(this.buGn(y,r),h[y][r]=d,h[r][y]=d),0!==m&&(this.buGn(m,r),h[m][r]=p,h[r][m]=p);var g=o[t]*Math.PI/180;c.fl=n[t]*Math.cos(g),c.re=n[t]*Math.sin(g),u[r]=c}},{key:"buGn",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;e>n;n++)i[n]=arguments[n];i.forEach(function(e){t.gn[e]||(t.gn[e]=[])})}},{key:"vcvs",value:function(t,e,i,n,o,r,a){var l=this.gn,u=new s["default"](1,0),c=new s["default"](-1,0),d=new s["default"];this.trace("输入VCVS起点，止点，参数与控制支路",e[t],i[t],n[t],r[t]);var p=e[t],f=i[t],y=e[r[t]],m=i[r[t]];a[t]=o,0!==p&&(this.buGn(p,o),l[p][o]=u,l[o][p]=u),0!==f&&(this.buGn(f,o),l[f][o]=c,l[o][f]=c),d.fl=n[t],d.re=0,0!==y&&(this.buGn(o),l[o][y]=h["default"].sub(l[o][y],d)),0!==m&&(this.buGn(o),l[o][m]=h["default"].add(l[o][m],d))}},{key:"vccs",value:function(t,e,i,n,o){var r=this.gn,a=new s["default"];this.trace("输入VCCS起点止点参数与控制支路",e[t],i[t],n[t],o[t]);var l=e[t],u=i[t],c=e[o[t]],d=i[o[t]];a.fl=n[t],a.re=0,0===l?(this.buGn(u),0!==c&&(r[u][c]=h["default"].sub(r[u][c],a)),0!==d&&(r[u][d]=h["default"].add(r[u][d],a))):0===u?(this.buGn(l),0!==c&&(r[l][c]=h["default"].add(r[l][c],a)),0!==d&&(r[l][d]=h["default"].sub(r[l][d],a))):(this.buGn(l,u),0!==c&&(r[l][c]=h["default"].sub(r[l][d],a),r[u][d]=h["default"].add(r[u][d],a)),0!==d&&(this.buGn(l,u),r[l][d]=h["default"].sub(r[l][d],a),r[u][d]=h["default"].add(r[u][d],a)))}},{key:"ccvs",value:function(t,e,i,n,o,r){var a=this.gn,l=new s["default"],h=new s["default"],u=new s["default"];this.trace("输入CCVS的起点止点，参数控制支路序号:",e[t],i[t],n[t],o[t]);var c=e[t],d=i[t],p=r[o[t]];r[t]=ny,l.fl=1,l.re=0,h.fl=-1,h.re=0,0!==c&&(this.buGn(c,ny),a[c][ny]=l,a[ny][c]=l),0!==d&&(this.buGn(d,ny),a[d][ny]=h,a[ny][d]=h),u.fl=n[t],u.re=0,this.buGn(ny),a[ny][p]=sub(a[ny][ke],u)}},{key:"cccs",value:function(t,e,i,n,o,r){var a=this.gn,l=new s["default"];this.trace("输入CCCS的起点，止点，参数及控制支路序号:",e[t],i[t],n[t],o[t]);var u=e[t],c=i[t],d=r[o[t]];l.dl=n[t],l.re=0,u&&(this.buGn(u),a[u][d]=h["default"].add(a[u][d],l)),c&&(this.buGn(c),a[c][d]=h["default"].sub(a[c][d],l))}},{key:"hllm",value:function(t,e,i,n,o,r,a){var s=this.gn;if(this.trace("输入互感支路的起点，止点，参数，互感系数，控制支路:",e[t],i[t],n[t],o[t],r[t]),0!==n[r[t]]){var l=e[t],u=i[t],c=e[r[t]],d=i[r[t]],p=n[r[t]],f=p*n[t]-o[t]*o[t],y=n[t]/(a*f),m=p/(a*f),g=o[t]/(a*f),v=cmplx(0,-y),b=cmplx(0,y),_=cmplx(0,-m),x=cmplx(0,m),w=cmplx(0,g),C=cmplx(0,-g);0!==l&&0!==u?(this.buGn(l,u),s[l][l]=h["default"].add(s[l][l],_),s[u][u]=h["default"].add(s[u][u],_),s[l][u]=h["default"].add(s[l][u],x),s[u][l]=h["default"].add(s[u][l],x)):0===u?(this.buGn(l),s[l][l]=h["default"].add(s[l][l],_)):(this.buGn(u),s[u][u]=h["default"].add(s[u][u],_)),0!==c&&0!==d?(this.buGn(c,d),s[c][c]=h["default"].add(s[c][c],v),s[d][d]=h["default"].add(s[d][d],v),s[c][d]=h["default"].add(s[c][d],b),s[d][c]=h["default"].add(s[d][c],b)):0===d?(this.buGn(c),s[c][c]=h["default"].add(s[c][c],v)):(this.buGn(d),s[d][d]=h["default"].add(s[d][d],v)),0!==l&&0!==c&&(this.buGn(l,c),s[l][c]=h["default"].add(s[l][c],w),s[c][l]=h["default"].add(s[c][l],w)),0!==u&&0!==d&&(this.buGn(u,d),s[u][d]=h["default"].add(s[u][d],w),s[d][u]=h["default"].add(s[d][u],w)),0!==l&&0!==d&&(this.buGn(l,d),s[l][d]=h["default"].add(s[l][d],C),s[d][l]=h["default"].add(s[d][l],C)),0!==u&&0!==c&&(this.buGn(u,c),s[u][c]=h["default"].add(s[u][c],C),s[c][u]=h["default"].add(s[c][u],C))}}},{key:"gauss",value:function(t,e,i){for(var n=void 0,o=[],r=i+1,a=1;i>=a;a++){if(1e-9>(n=this.zu(o,1e-10,i,r,a,t)))return n;var s=void 0;for(s=a;r>=s;s++)t[a][s]=h["default"].divv(t[a][s],o[0]);for(var l=1;i>=l;l++)if(l!==a){var u=t[l][a];for(s=a;r>=s;s++)t[l][s]=h["default"].sub(t[l][s],h["default"].time(u,t[a][s]))}}for(var c=1;i>=c;c++)e[c]=t[c][r];return n}},{key:"zu",value:function(t,e,i,n,o,r){for(var a=new s["default"],l=h["default"].sabs(r[o][o]),u=o,c=o;i>=c;c++)h["default"].sabs(r[c][o])>l&&(l=h["default"].sabs(r[c][o]),u=c);if(e>=l)return 0;if(t[0]=r[u][o],u===o)return 1;for(var d=o;n>=d;d++)a=r[u][d],r[u][d]=r[o][d],r[o][d]=a;return 1}}]),t}()},536:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);t.length>e;e++)i[e]=t[e];return i}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1),l=i(523),h=n(l),u=i(525),c=n(u),d=i(529),p=n(d),f=function(){function t(e){r(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.main=this.globalConfig.main,this.eqMap={}}return a(t,[{key:"destroy",value:function(){this.elect_Update.destroy(),this.elect_Update=null,this.moduleMain=null,this.globalConfig=null,this.eqMap={}}},{key:"clear",value:function(){this.elect_Update.clearAll(),this.eqMap={}}},{key:"init",value:function(){this.elect_Update=new h["default"](this.moduleMain),this.electricField_Update=new c["default"](this.moduleMain),this.magneticField_Update=new p["default"](this.moduleMain)}},{key:"setEqUID",value:function(t,e){this.eqMap[t.UID]&&(this.eqMap[t.UID]=null),this.eqMap[e]=t}},{key:"deleteEqUID",value:function(t){this.eqMap[t]=null}},{key:"getEqByUID",value:function(t){return this.eqMap[t]}},{key:"setActive",value:function(t){this.elect_Update.setActive(t)}},{key:"diyChanged",value:function(t){this.globalConfig&&this.globalConfig.main&&this.globalConfig.main.isDestroy||this.elect_Update&&(this.elect_Update.checkAllChanged(t),this.globalConfig.main.dispatchEvent("diyChanged"))}},{key:"checkIsWire",value:function(t){return!!t&&1===t.iElecInter}},{key:"getBposterWires",value:function(t){var e=[];return t&&t.bindinger&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length>0&&$.each(t.bindinger.friendPostersArr,function(t,i){"ElecWire"!==i.body.classname&&"ElecFamilyWire"!==i.body.classname||e.push(i)}),e}},{key:"getBposterWiresBody",value:function(t){var e=this.getBposterWires(t),i=[];return each(e,function(t,e){i.push(e.body)}),i}},{key:"getAllBposterWires",value:function(t){var e=[];return $.each(t.bPsArr,function(t,i){$.each(i.friendPostersArr,function(t,i){"ElecWire"!==i.body.classname&&"SElecWire"!==i.body.classname||e.push(i)})}),e}},{key:"getAllElecWires",value:function(t){var e=new s.HashMap;return t.bPsArr&&$.each(t.bPsArr,function(t,i){$.each(i.friendPostersArr,function(t,i){"ElecWire"!==i.body.classname&&"SElecWire"!==i.body.classname&&"ElecFamilyWire"!==i.body.classname||e.put(i.body.UID,i.body)})}),e.values()}},{key:"getWireLinkBposter",value:function(t){var e=this,i=null;return t&&t.bindinger&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length&&$.each(t.bindinger.friendPostersArr,function(t,n){if(!e.checkIsWire(n.body))return i=n,!1}),i}},{key:"getWireBposterElec",value:function(t){var e=this,i=null;return t&&t.bindinger&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length&&$.each(t.bindinger.friendPostersArr,function(t,n){if(!e.checkIsWire(n.body))return i="BaseElecResistance"===n.body.classname?n.body.zuheBox:n.body,!1}),i}},{key:"getWireAllBposterElecs",value:function(t){if(!t)return[];var e=new Map,i=this.getWireBposterElec(t.bposter0),n=this.getWireBposterElec(t.bposter1);return i&&e.set(i.uid,i),n&&e.set(n.uid,n),[].concat(o(e.values()))}},{key:"checkIsDuan",value:function(t){if(!t||this.checkIsWire(t))return!1;var e=this.getBposterWiresBody(t.bposter0),i=this.getBposterWiresBody(t.bposter1),n=!1;return each(e,function(t,e){if(each(i,function(t,i){if(e.uid===i.uid)return n=!0,!1}),n)return!1}),n}},{key:"checkIsPower",value:function(t){return 2===t.iElecInter}},{key:"checkIsLamp",value:function(t){return 3===t.iElecInter}},{key:"checkIsVoltmeter",value:function(t){return 4===t.iElecInter}},{key:"checkIsAmpereMeter",value:function(t){return 5===t.iElecInter}},{key:"modifyBinPosterType",value:function(t,e){if(!this.checkIsWire(this)){var i=t.bindinger.friendPostersArr,n=void 0,o=i.length;for(n=0;o>n;n++){var r=i[n];this.checkIsWire(r.body)&&(r.binPoster.currentFrame=e)}t.bindinger.body.updateBinds()}}},{key:"linkWireBindMC",value:function(t,e){var i=void 0,n=void 0,o=e.bindinger.friendPostersArr.concat([e.bindinger]);for(n=o.length,i=0;n>i;i++){var r=o[i];r.friendPostersArr.push(t.bindinger),t.bindinger.friendPostersArr.push(r)}}},{key:"setBindXY",value:function(t,e){t.x=e.x+e.width/2,t.y=e.y,!this.globalConfig.DEBUG&&e.parent&&e.parent.removeChild(this.bp)}},{key:"getMagStaCompArr",value:function(){for(var t=[],e=this.globalConfig.main.getEquipmentArr(),i=e.length-1;i>=0;i--){var n=e[i];n&&(n.component&&(n=n.component,n.isLock||2===n.magType&&t.push(n)))}return t}},{key:"getElecStaCompArr",value:function(){for(var t=[],e=this.globalConfig.main.getEquipmentArr(),i=e.length-1;i>=0;i--){var n=e[i];n&&(n.component&&(n=n.component,n.isLock||1===n.magType&&t.push(n)))}return t}},{key:"getEquipmentArr",value:function(t){var e=this.globalConfig.main.getEquipmentArr(),i=[];return t?t instanceof Array?$.each(e,function(e,n){n.component&&s.ArrayUtil.arrayContainsValue(t,n.component.classname)&&i.push(n.component)}):$.each(e,function(e,n){n.component&&n.component.classname===t&&i.push(n.component)}):$.each(e,function(t,e){i.push(e.component)}),i}},{key:"findEAb",value:function(t,e){return s.ArrayUtil.clear(t.mapfind),e.bindinger?this.findBindEA(t,e.bindinger.friendPostersArr):null}},{key:"findBindEA",value:function(t,e){var i=void 0,n=e.length;for(i=0;n>i;i++)if(-1===t.mapfind.indexOf(e[i]))if(t.mapfind.push(e[i]),this.checkIsWire(e[i].body)){var o=0;if(0!==(o="bposter0"===e[i].name?this.findBindEA(t,e[i].body.bposter1.bindinger.friendPostersArr):this.findBindEA(t,e[i].body.bposter0.bindinger.friendPostersArr)))return o}else{if(!e[i].body)return 0;var r=e[i].body.classname;if("ElectricAppliance"===r||"MetalPlates"===r)return e[i];if(e[i].body.isBreak)return 0;for(var a=[],s=0;;){if(!e[i].body["bposter"+s])break;e[i].body["bposter"+s].UID!==e[i].UID&&a.push(e[i].body["bposter"+s]),s++}var l=void 0,h=a.length;for(l=0;h>l;l++){var u=a[l].bindinger.body.classname;if("ElectricAppliance"===u||"MetalPlates"===u)return a[l];var c=this.findBindEA(t,a[l].bindinger.friendPostersArr);if(0!==c)return c}}return 0}},{key:"getTime",value:function(){return this.elect_Update.time}},{key:"getTimeStep",value:function(){return this.elect_Update.timeStep}},{key:"getUnNode",value:function(t,e){return _.get(t,"bposter"+e+".bindinger.unNode",null)}},{key:"getUnNodeUID",value:function(t,e){return _.get(t,"bposter"+e+".bindinger.unNode.UID",null)}},{key:"checkBindingerInElec",value:function(t){if(!t||!t.length)return!1;for(var e=null,i=0;t.length>i;i++){var n=t[i],o=_.get(n,"unNode.UID",null);if(!o)return!1;if(e){if(e!==o)return!1}else e=o}return!0}},{key:"checkBindMCInElec",value:function(t){return!!t&&this.checkBindingerInElec(t.map(function(t){return t.bindinger}))}},{key:"checkBPsInOneHui",value:function(t){return!(!t||!t.bPsArr)&&this.checkBindingerInElec(t.bPsArr)}},{key:"getNearWireBinding",value:function(t){var e=this;this.main.view.updateTransform();var i=[],n=this.getEquipmentArr("ElecWire"),o=[];return n.forEach(function(t){t.bPsArr.forEach(function(t){0===t.friendPostersArr.length&&o.push(t)})}),o.length>0&&o.forEach(function(n){var o=e.main.view.toLocal(new s.Point,n.BindMC),r=e.main.view.toLocal(new s.Point,t.BindMC);s.M.getPointLen(o,r)>e.globalConfig.connectMinDistanceNumber||i.push(n)}),i}},{key:"getNearBinding",value:function(t){var e=this;if(!t)return null;this.globalConfig.main.view.updateTransform();var i=t.BindMC.toGlobal(),n=this.getEquipmentArr(),o=99999999,r=void 0;if(n.forEach(function(t){e.checkIsWire(t)||t.bPsArr&&t.bPsArr.length&&t.bPsArr.forEach(function(t){var e=t.BindMC.toGlobal(),n=s.M.getPointLen(i,e);o>n&&(o=n,r=t)})}),r){var a=this.globalConfig.main.view.toLocal(new s.Point,t.BindMC),l=this.globalConfig.main.view.toLocal(new s.Point,r.BindMC);if(this.globalConfig.connectMinDistanceNumber>s.M.getPointLen(a,l))return r}return null}}]),t}();f.L="L",f.S="S",f.A="A",f.U="V",f.R="R",f.E="E",f.H="H",f.M="M",f.VD="VD",f.C="C",f.BATTERY_LEFT=3,f.BATTERY_RIGHT=2,f.LAMP_RIGHT=4,f.LAMP_LEFT=5,f.SLIDE_TOP_LEFT=8,f.SLIDE_TOP_RIGHT=9,f.SLIDE_BOTM_LEFT=6,f.SLIDE_BOTM_RIGHT=7,e["default"]=f},537:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){n(this,t),this.ERROR_MATRIX_NOT_SQUARE="Matrix must be square.",this.ERROR_VECTOR_NOT_2D="Only two dimensional operations are supported at this time."}return o(t,null,[{key:"_check2DVector",value:function(t){if(2!==t.length)throw Error(this.ERROR_VECTOR_NOT_2D)}},{key:"deepCopy",value:function(t){if(!Array.isArray(t))throw Error("Input must be a Matrix.");if(t[0][0]===undefined)throw Error("Input cannot be a vector.");for(var e=Array(t.length),i=0;t.length>i;i++)e[i]=t[i].slice();return e}},{key:"isSquare",value:function(t){if(!Array.isArray(t))throw Error("Input must be a Matrix.");if(t[0][0]===undefined)throw Error("Input cannot be a vector.");for(var e=t.length,i=0;e>i;i++)if(t[i].length!==e)return!1;return!0}},{key:"addition",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw Error("Matrix mismatch");var i=Array(t.length),n=void 0;if(t[0].length)for(n=0;t.length>n;n++){i[n]=Array(t[n].length);for(var o=0;t[n].length>o;o++)i[n][o]=t[n][o]+e[n][o]}else for(n=0;t.length>n;n++)i[n]=t[n]+e[n];return i}},{key:"traceMatrix",value:function(t){var e=void 0,i=void 0;if(t[0].length)for(e=0;t.length>e;e++){i="";for(var n=0;t[e].length>n;n++)i+=t[e][n]+"\t"}else for(i="",e=0;t.length>e;e++)i+=t[e]+"\t"}},{key:"subtraction",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw Error("Matrix mismatch");var i=Array(t.length),n=void 0;if(t[0].length)for(n=0;t.length>n;n++){i[n]=Array(t[n].length);for(var o=0;t[n].length>o;o++)i[n][o]=t[n][o]-e[n][o]}else for(n=0;t.length>n;n++)i[n]=t[n]-e[n];return i}},{key:"scalar",value:function(t,e){for(var i=0;t.length>i;i++)for(var n=0;t[i].length>n;n++)t[i][n]=e*t[i][n];return t}},{key:"transpose",value:function(t){for(var e=Array(t[0].length),i=0;t[0].length>i;i++){e[i]=Array(t.length);for(var n=0;t.length>n;n++)e[i][n]=t[n][i]}return e}},{key:"identity",value:function(t){for(var e=Array(t),i=0;t>i;i++){e[i]=Array(t);for(var n=0;t>n;n++)e[i][n]=i===n?1:0}return e}},{key:"dotproduct",value:function(t,e){if(t.length!==e.length)throw Error("Vector mismatch");for(var i=0,n=0;t.length>n;n++)i+=t[n]*e[n];return i}},{key:"multiply",value:function(e,i){if(e[0].length!==i.length)throw Error("Matrix mismatch");for(var n=Array(e.length),o=0;e.length>o;o++)n[o]=Array(i[0].length);for(var r=t.transpose(i),a=0;n.length>a;a++)for(var s=0;n[a].length>s;s++)n[a][s]=t.dotproduct(e[a],r[s]);return n}},{key:"determinant",value:function(e){var i=e.length,n=e[0].length,o=0,r=void 0,a=void 0,s=void 0,l=void 0;if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);if(1===i)return e[0][0];if(2===i)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(a=0;n>a;a++){for(s=e[0][a],l=e[0][a],r=1;i>r;r++)l*=e[r][((a+r)%n+n)%n],s*=e[r][((a-r)%n+n)%n];o+=l-s}return o}},{key:"lupDecomposition",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var i=e.length,n=t.deepCopy(e),o=t.transpose(t.identity(i)),r=void 0,a=Array(i);this.getL=function(e){for(var i=e[0].length,n=t.identity(i),o=0;i>o;o++)for(var r=0;i>r;r++)o>r&&(n[o][r]=e[o][r]);return n},this.getU=function(e){for(var i=e[0].length,n=t.identity(i),o=0;i>o;o++)for(var r=0;i>r;r++)o>r||(n[o][r]=e[o][r]);return n};for(var s=0;i>s;s++){var l=void 0;for(l=0;i>l;l++)a[l]=n[l][s];for(l=0;i>l;l++){r=n[l];for(var h=Math.min(l,s),u=0,c=0;h>c;c++)u+=r[c]*a[c];r[s]=a[l]-=u}var d=s;for(l=s+1;i>l;l++)Math.abs(a[l])>Math.abs(a[d])&&(d=l);if(d!==s&&(n=t.rowSwitch(n,d,s),o=t.rowSwitch(o,d,s)),i>s&&0!==n[s][s])for(l=s+1;i>l;l++)n[l][s]/=n[s][s]}return[this.getL(n),this.getU(n),o]}},{key:"rotate",value:function(e,i,n){t._check2DVector(e);var o="clockwise"===n?-1:1,r=i*(Math.PI/180);return t.multiply([[Math.cos(r),-1*o*Math.sin(r)],[o*Math.sin(r),Math.cos(r)]],e)}},{key:"scale",value:function(e,i,n){return t._check2DVector(e),t.multiply([[i,0],[0,n]],e)}},{key:"shear",value:function(e,i,n){return t._check2DVector(e),t.multiply([[1,"xaxis"===n?i:0],["yaxis"===n?i:0,1]],e)}},{key:"affine",value:function(e,i,n){t._check2DVector(e);var o=[[1,0,i],[0,1,n],[0,0,1]],r=[[e[0][0]],[e[1][0]],[1]],a=t.multiply(o,r);return[[a[0][0]],[a[1][0]]]}},{key:"rowScale",value:function(t,e,i){for(var n=Array(t.length),o=0;t.length>o;o++){n[o]=Array(t[o].length);for(var r=0;t[o].length>r;r++)n[o][r]=o===e?i*t[o][r]:t[o][r]}return n}},{key:"rowSwitch",value:function(t,e,i){for(var n=Array(t.length),o=0;t.length>o;o++){n[o]=Array(t[o].length);for(var r=0;t[o].length>r;r++)n[o][r]=o===e?t[i][r]:o===i?t[e][r]:t[o][r]}return n}},{key:"rowAddMultiple",value:function(t,e,i,n){for(var o=Array(t.length),r=0;t.length>r;r++){o[r]=Array(t[r].length);for(var a=0;t[r].length>a;a++)r===i?o[i][a]=t[i][a]+n*t[e][a]:o[r][a]=t[r][a]}return o}},{key:"GaussJordanEliminate",value:function(t,e){for(var i=void 0===e?1e-10:e,n=t.length,o=t[0].length,r=-1,a=void 0,s=void 0,l=void 0;++r<n;){var h=r;for(a=r;++a<n;)Math.abs(t[a][r])>Math.abs(t[h][r])&&(h=a);var u=t[r];if(t[r]=t[h],t[h]=u,Math.abs(t[r][r])<=i)return t;for(a=r;++a<n;)for(l=t[a][r]/t[r][r],s=r-1;++s<o;)t[a][s]-=t[r][s]*l}for(r=n;--r>=0;){for(l=t[r][r],a=-1;++a<r;)for(s=o;--s>=r;)t[a][s]-=t[r][s]*t[a][r]/l;for(t[r][r]/=l,s=n-1;++s<o;)t[r][s]/=l}return t}},{key:"rowReduce",value:function(e,i){return t.GaussJordanEliminate(e,i)}},{key:"inverse",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var i=e.length,n=t.identity(i),o=void 0;for(o=0;i>o;o++)e[o]=e[o].concat(n[o]);for(e=t.GaussJordanEliminate(e),o=0;i>o;o++)e[o]=e[o].slice(i);return e}},{key:"getCol",value:function(t,e){var i=Array(t.length);if(0>e)throw Error("The specified column must be a positive integer.");if(e>=t[0].length)throw Error("The specified column must be between 0 and the number of columns - 1.");for(var n=0;t.length>n;n++)i[n]=t[n][e];return i}},{key:"reorderRows",value:function(t,e){var i=[];if(e===undefined)throw Error("A reordering array must be entered.");if(e.length!==t.length)throw Error("The reordered matrix must have the same number of rows as the original Matrix.");for(var n=0;e.length>n;n++){if(0>e[n])throw Error("The desired order of the rows must be positive integers.");if(e[n]>=e.length)throw Error("The desired order of the rows must start at 0 and end at the number of rows - 1.");i.push(t[e[n]])}return i}},{key:"reorderCols",value:function(e,i){var n=[];if(i===undefined)throw Error("Please enter a desired reordering array.");if(i.length!==e[0].length)throw Error("The reordered matrix must have the same number of columns as the original Matrix.");for(var o=0;i.length>o;o++){if(0>i[o])throw Error("The desired order of the columns must be positive integers.");if(i[o]>=i.length)throw Error("The desired order of the columns must start at 0 and end at the number of columns - 1.");n.push(t.getCol(e,i[o]))}return t.transpose(n)}},{key:"reverseRows",value:function(e){for(var i=[],n=e.length-1;n>-1;n--)i.push(n);return t.reorderRows(e,i)}},{key:"reverseCols",value:function(e){for(var i=[],n=e.length-1;n>-1;n--)i.push(n);return t.reorderCols(e,i)}},{key:"zeros",value:function(t,e){var i=Array(t);if(1>t||1>e)throw Error("The matrix dimensions must be positive integers.");t=Math.ceil(t),e=Math.ceil(e);for(var n=0;t>n;n++){for(var o=Array(e),r=0;e>r;r++)o[r]=0;i[n]=o}return i}},{key:"zigzag",value:function(e,i,n){if(1>=e)throw Error("Matrix size must be at least 2x2.");e=Math.ceil(e);var o=t.zeros(e,e),r=function(t){var i=!1,n=e*e,o=1,r=1,a=void 0,s=void 0,l=void 0,h=void 0,u=void 0;for(t[0][0]=n,t[e-1][e-1]=o,h=1;e>h;h++)i?(n-=4*r,o+=4*r,r++):(n--,o++),t[0][h]=n,t[e-1][e-1-h]=o,i=!i;var c=!0;for(h=1;e>h;h++){for(a=0,s=h,l=t[a][s],u=1;h+1>u;u++)c?l-=1:l+=1,a++,s--,t[a][s]=l;c=!c}for(c=e%2==0,h=1;e-1>h;h++){for(a=e-1,s=h,l=t[a][s],u=1;e-h>u;u++)c?l--:l++,a--,s++,t[a][s]=l;c=!c}return t},a=function(e){return t.transpose(r(e))},s=function(e){return t.reverseCols(r(e))},l=function(e){return t.reverseCols(t.reverseRows(r(e)))},h=function(e){return t.transpose(l(e))};if("BR"===i&&"H"===n)return r(o);if("BR"===i&&"V"===n)return a(o);if("BL"===i&&"H"===n)return s(o);if("BL"===i&&"V"===n)return function(e){return t.reverseRows(h(s(e)))}(o);if("TR"===i&&"H"===n)return function(e){return t.reverseRows(r(e))}(o);if("TR"===i&&"V"===n)return function(e){return t.reverseRows(a(e))}(o);if("TL"===i&&"H"===n)return l(o);if("TL"===i&&"V"===n)return h(o);throw Error("Enter the direction (V,H) and corner (BR,BL,TR,TL) correctly.")}},{key:"vectorNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length)throw Error("Vector must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e)throw Error("Norm order must be a number.");e=void 0===e?2:e;var i=t.length,n=0,o=void 0,r=void 0;switch(e){case Infinity:for(r=0;i>r;r++)(o=Math.abs(t[r]))>n&&(n=o);break;case-Infinity:for(n=Infinity,r=0;i>r;r++)o=Math.abs(t[r]),n>o&&(n=o);break;default:for(r=0;i>r;r++)n+=Math.pow(Math.abs(t[r]),e);n=Math.pow(n,1/e)}return n}},{key:"matrixNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length||!Array.isArray(t[0]))throw Error("Matrix must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e&&null!==e)throw Error("Norm order must be a number or null.");e=void 0===e?null:e;var i=t.length,n=t[0].length,o=0,r=void 0,a=void 0,s=void 0;switch(e){case Infinity:for(a=0;i>a;a++){for(r=0,s=0;n>s;s++)r+=Math.abs(t[a][s]);r>o&&(o=r)}break;case-Infinity:for(o=Infinity,a=0;i>a;a++){for(r=0,s=0;n>s;s++)r+=Math.abs(t[a][s]);o>r&&(o=r)}break;case 1:for(a=0;n>a;a++){for(r=0,s=0;i>s;s++)r+=Math.abs(t[s][a]);r>o&&(o=r)}break;case-1:for(o=Infinity,a=0;n>a;a++){for(r=0,s=0;i>s;s++)r+=Math.abs(t[s][a]);o>r&&(o=r)}break;case null:for(a=0;i>a;a++)for(s=0;n>s;s++)o+=Math.pow(t[a][s],2);o=Math.pow(o,.5);break;case 2:case-2:throw Error("Singular values are not yet supported in numbers.js.");default:for(a=0;i>a;a++)for(s=0;n>s;s++)o+=Math.pow(Math.abs(t[a][s]),e);o=Math.pow(o,1/e)}return o}},{key:"isUpperBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||2>t.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||0>e||e%1!=0)throw Error("Upper bandwidth must be a nonzero integer.");for(var i=!0,n=t[0].length,o=0,r=e+1;n>r;r++){if(0!==t[o][r]){i=!1;break}o++}return i}},{key:"isLowerBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||2>t.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||0>e||e%1!=0)throw Error("Lower bandwidth must be a nonzero integer.");for(var i=!0,n=t.length,o=0,r=e+1;n>r;r++){if(0!==t[r][o]){i=!1;break}o++}return i}},{key:"isRowDD",value:function(e){var i=e.length;if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=0;i>n;n++){var o=e[n],r=o[n],a=t.sumNondiagonalElements(o,n);if(Math.abs(r)<a)return!1}return!0}},{key:"isStrictlyRowDD",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=e.length,n=0;i>n;n++){var o=e[n],r=o[n],a=t.sumNondiagonalElements(o,n);if(Math.abs(r)<=a)return!1}return!0}},{key:"isColumnDD",value:function(e){if(!t.isSquare)throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=e.length,n=0;i>n;n++){var o=t.getCol(e,n),r=o[n],a=t.sumNondiagonalElements(o,n);if(Math.abs(r)<a)return!1}return!0}},{key:"isStrictlyColumnDD",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=e.length,n=0;i>n;n++){var o=t.getCol(e,n),r=o[n],a=t.sumNondiagonalElements(o,n);if(Math.abs(r)<=a)return!1}return!0}},{key:"sumNondiagonalElements",value:function(t,e){var i=0,n=void 0;for(n=0;e>n;n++)i+=Math.abs(t[n]);for(n=e+1;t.length>n;n++)i+=Math.abs(t[n]);return i}}]),t}();r.clone=r.deepCopy,r.add=r.addition,e["default"]=r},538:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(e){n(this,t),this.UID=e,this.bposterArr=[],this.number=0,this.Un=0,this.isGround=!1}return o(t,[{key:"freshUn",value:function(){var t=this;this.bposterArr.forEach(function(e){e.Un=t.Un,e.BindMC.unNodeSP&&(e.BindMC.unNodeSP.numberLabel.text=t.number+"号",e.BindMC.unNodeSP.wangLabel.text=t.UID+"团")})}},{key:"destroy",value:function(){this.bposterArr.forEach(function(t){t.unNode=null,t.Un=0,t.BindMC.unNodeSP&&(t.BindMC.unNodeSP.numberLabel.text="",t.BindMC.unNodeSP.wangLabel.text="")})}}]),t}()},554:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:f(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(462),c=n(u),d=i(226),p=n(d);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.cageBackCon=null,i.backSp=null,i.connectEarthFlag=!1,i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addCageBack(),this.magElecChanged=function(e){t.diyChangHandler(e)},this.globalConfig.main.addEventListener("magElecChanged",this.magElecChanged)}},{key:"removed",value:function(){this.backSp&&this.backSp.parent&&(this.removeFromFramework(this.backSp),this.backSp=null),this.elecInside&&this.cancelLockItem(this.elecInside),this.globalConfig.main.removeEventListener("magElecChanged",this.magElecChanged),this.magElecChanged=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"addCageBack",value:function(){this.backSp=new p["default"](this.paramObj),this.backSp.allowSave=!1,this.main.addEquipmentChild(this.backSp,new h.Point(0,0));var t=new PIXI.Container;this.backSp.addChild(t),this.backSp.interactive=!1,this.backSp.interactiveChildren=!1,this.backSp.cantToTop=!0,this.backSp.parent.parent.addChildAt(this.backSp.parent,0),this.cageBackCon=t,this.updateBackSpPosition()}},{key:"diyChangHandler",value:function(t){t===this?this.selfMoved():t.classname!==this.classname&&this.itemMoved(t)}},{key:"selfMoved",value:function(){if(this.elecInside&&this.itemMoved(this.elecInside),!this.elecInside)for(var t=this.elecUtil.getElecStaCompArr(),e=t.length,i=0;e>i;i++){var n=t[i];if(this.canItemMoveIn(n)){var o=this.itemMoved(n);if(o)break}}this.elecUtil.electricField_Update.checkAllChanged()}},{key:"itemMoved",value:function(t){var e=this.checkMoveIn(t),i=this.checkMoveOut(t),n=0;return e?(this.lockItem(t),this.parent.parent.setChildIndex(this.parent,0),t.parent.parent.setChildIndex(t.parent,0),this.backSp&&this.backSp.parent.parent.setChildIndex(this.backSp.parent,0),n=1):i&&(this.cancelLockItem(this.elecInside),n=2),this.updateState(),n}},{key:"checkMoveIn",value:function(t){return null===this.elecInside&&!t.inCage&&this.containsItem(t)}},{key:"checkMoveOut",value:function(t){return this.elecInside&&this.elecInside===t&&!this.containsItem(t)}},{key:"canItemMoveIn",value:function(t){return!t.inCage&&t.classname!==this.classname}},{key:"containsItem",value:function(t){return!1}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.updateBackSpPosition()}},{key:"updateBackSpPosition",value:function(){this.backSp&&(this.backSp.parent.x=this.parent.x,this.backSp.parent.y=this.parent.y)}},{key:"updateState",value:function(){this.elecInside&&(this.lockItem(this.elecInside),this.connectEarthFlag||0!==this.elecInside.elecNum&&(this.elecInside.inCage=!0,this.elecInside.isLock=!1))}},{key:"lockItem",value:function(t){this.elecInside=t,t.cantToTop=!0,t.isLock=!0,t.inCage=!0,t.cage=this,this.removeGanNum(t)}},{key:"cancelLockItem",value:function(t){t.cantToTop=!1,t.isLock=!1,t.inCage=!1,t.cage=null,this.elecInside=null}},{key:"removeGanNum",value:function(t){t.ganNum&&(t.ganNum=0),t.freshDotFrom_elecNum?t.freshDotFrom_elecNum():t.txtNumChanged&&t.txtNumChanged()}}]),e}(c["default"])},555:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:f(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(453),c=n(u),d=i(480),p=n(d);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.dengBan=null,i.canRotate=!0,i.adsorptionThreshold=40,i.isLink=!1,i.level=9,i}return a(e,t),s(e,[{key:"getBanP",value:function(){var t=null;return this.dengBan&&(t=this.dengBan.toLocal(h.M.getSPPoint(this.cdot),this.cdot.parent)),t}},{key:"initZuhe",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:1,pos:[[1,0],[1,1]],wire:[[[1,1],[1,0]]],res:[[1,1e-5]]}),this.wire1.unLink(this.wire1.bposter1),this.wire1.addEventListener(p["default"].UPDATE_POSTER_POSITION,function(){t.isLink&&(t.unLink(),t.checkBp1Bind(!1))}),this.bposter1.cannotBindWire=!0}},{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.cdot=new PIXI.Graphics,this.cdot.beginFill(16711680,0),this.cdot.drawCircle(0,0,5),this.add2component(this.cdot),h.M.setSPPointXY(this.cdot,0,143),h.M.addTouch(this,{dbtab:function(e){t.dengBan&&t.dengBan.addBiaoJi.call(t.dengBan,t)}})}},{key:"rotateChange",value:function(t,i){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t,i),this.hideTip(),this.checkBp1Bind(!0)}},{key:"removed",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.dengBan&&this.dengBan.needleMoves.call(this.dengBan),this.hideTip()}},{key:"beginEnd",value:function(t){this.unLink()}},{key:"endEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.checkBp1Bind(!0)}},{key:"checkBp1Bind",value:function(t){for(var e=this.toGlobalView(new h.Point,this.bposter1),i=this.main.getEquipmentArr(!0),n=i.length,o=0;n>o;o++){var r=i[o];if(r!==this&&r.bPsArr){for(var a=r.bPsArr.length,s=!1,l=1e4,u={},c=0;a>c;c++){var d=r.bPsArr[c];if(!d.body.isZuHe){var p=this.toGlobalView(new h.Point,d.BindMC);if(0!==p.x||0!==p.y){var f=h.M.getPointLen(e,p);f>this.adsorptionThreshold||(s=!0,l>f&&(l=f,u.BindMC=d.BindMC,u.p2=p))}}}if(s){this.link(u.BindMC);var y=u.p2;t&&this.parent&&(this.parent.x+=y.x-e.x,this.parent.y+=y.y-e.y,this.updateBinds()),this.diyChanged();break}}}}},{key:"link",value:function(t){this.isLink||(this.isLink=!0,this.elecUtil.linkWireBindMC(this.wire1.bposter1,t))}},{key:"unLink",value:function(){this.isLink&&(this.isLink=!1,this.wire1.unLink(this.wire1.bposter1),this.diyChanged())}},{key:"hideTip",value:function(){this.dengBan&&this.dengBan.hideTip.call(this.dengBan)}}]),e}(c["default"])},582:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(e,i,o){n(this,t),this.numSpArr=e,this.precision=i||0,this.dotSp=o,0>this.precision&&(this.precision=0),this.sca=Math.pow(10,this.precision)}return o(t,[{key:"destory",value:function(){}},{key:"setNum",value:function(t){t=Math.floor(t*this.sca),this.numSpArr.forEach(function(e){e.gotoAndStop(t%10),t=10>t?0:Math.floor(t/10)})}},{key:"show",value:function(){this.numSpArr.forEach(function(t){t.visible=!0}),this.dotSp&&(this.dotSp.visible=!0)}},{key:"hide",value:function(){this.numSpArr.forEach(function(t){t.visible=!1}),this.dotSp&&(this.dotSp.visible=!1)}}]),t}()},583:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);e["default"]=function(){function t(e,i){var o=this;n(this,t),this.phototube=e,this.view=i,this.phototube.addCursor(this.view,"drag"),this.dragId=r.M.addDrag(this.view,null,{begin:function(t){o.phototube.cannotSystemDrag=!0},end:function(t){o.phototube.cannotSystemDrag=!1}}),this.view.getMScale=function(){return o.phototube.getMScale()}}return o(t,[{key:"update",value:function(){}},{key:"destroy",value:function(){r.M.removeDrag(this.view,this.dragId),this.view.getMScale=null,this.phototube.removedCursor(this.view),this.view=null,this.phototube=null}},{key:"getData",value:function(t){return{visible:this.visible,x:this.x,y:this.y}}},{key:"setData",value:function(t){t&&(this.x=t.x,this.y=t.y,this.visible=t.visible)}},{key:"setPosition",value:function(t,e){this.x=t,this.y=e}},{key:"getColorMatrix",value:function(t,e){return[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,e,0]}},{key:"setScale",value:function(t){this.view.scale.x=t,this.view.scale.y=t}},{key:"strColor2Int",value:function(t){return parseInt(t.replace("#","0x"))}},{key:"visible",set:function(t){this.view.visible=t},get:function(){return this.view.visible}},{key:"x",set:function(t){this.view.x=t},get:function(){return this.view.x}},{key:"y",set:function(t){this.view.y=t},get:function(){return this.view.y}}]),t}()},584:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:c(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(461),u=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isOptical=!0,i.OpticalUtil=t.moduleMain.opticalUtil,i.optHitSegments=[],i.rays=[],i}return r(e,t),a(e,[{key:"removed",value:function(){this.elecChanged(),this.opticalChanged(),this.rays=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"moveEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.opticalChanged()}},{key:"handleOptRay",value:function(t){return this.rays.push(t),null}},{key:"lightCalculateBegin",value:function(){this.rays.length=0}},{key:"lightCalculate",value:function(){}},{key:"lightCalculateEnd",value:function(){}},{key:"checkRayCollision",value:function(t){var e=this.optHitSegments.length;if(2>e)return null;var i=this.toLocal(t.startP,this.main.view),n=t.dirP.clone();n.normalize(1e5);for(var o=n.add(i),r=null,a=1e5,s=0;e>s;s+=2){var h=this.optHitSegments[s]||this.optHitSegments[s-1],u=this.optHitSegments[s+1],c=this.AtomicUtil.segmentsIntr(i,o,h,u);if(c){var d=l.Point.distance(c,i);a>d&&(a=d,c=this.toGlobalView(c,this),r={id:s,p:c})}}return r}}]),e}(u["default"])},589:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);e["default"]=function(){function t(e){n(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.phy=e.phy,this.elecUtil=e.elecUtil}return o(t,[{key:"destroy",value:function(){this.globalConfig.main.removeEventListener(this.globalConfig.main.constructor.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.addListeners(!1),this.globalConfig.main.drawStack.removeChild(this._wireG),this.globalConfig=null,this.phy=null,this.elecUtil=null,this.moduleMain=null}},{key:"init",value:function(){this._wireG=new PIXI.Graphics,this.globalConfig.main.drawStack.addChild(this._wireG),this.__pArr=[],this._hasAddLiseners=!1,this.endDrawElecWireId=this.endDrawElecWire.bind(this),this.moveDrawElecWireId=this.moveDrawElecWire.bind(this),this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.globalConfig.main.addEventListener(this.globalConfig.main.constructor.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"getTouches",value:function(t){return t.data.originalEvent.changedTouches}},{key:"canvasRunHandle",value:function(t){this.setActive(t.isRunning)}},{key:"setActive",value:function(t){t||this.addListeners(!1)}},{key:"addListeners",value:function(t){var e=this.globalConfig.main,i=e.canvas;t?this._hasAddLiseners||($(i).on("mouseup"+e.$NAMESPACE+" touchend"+e.$NAMESPACE,this.endDrawElecWireId),$(i).on("mousemove"+e.$NAMESPACE+" touchmove"+e.$NAMESPACE,this.moveDrawElecWireId),this._hasAddLiseners=!0):this._hasAddLiseners&&($(i).off("mouseup"+e.$NAMESPACE+" touchend"+e.$NAMESPACE,this.endDrawElecWireId),$(i).off("mousemove"+e.$NAMESPACE+" touchmove"+e.$NAMESPACE,this.moveDrawElecWireId),this._hasAddLiseners=!1)}},{key:"startDrawElecWire",value:function(t,e){this._isStartDrawElecWire||(this._isStartDrawElecWire=!0,this._wireG.clear(),this._wireG.lineStyle(5,16711680,.5),r.ArrayUtil.clear(this.__pArr),this.__pArr.push(t),this.__wx=t.x,this.__wy=t.y,this._wireG.moveTo(t.x,t.y),this._wireG.lineTo(t.x,t.y),this.globalConfig.main.canRender&&this.addListeners(!0))}},{key:"moveDrawElecWire",value:function(t){if(this._isStartDrawElecWire){var e=this.phy.getCanvasP(t);this.__pArr.length&&(this._wireG.moveTo(this.__wx,this.__wy),this._wireG.lineTo(e.x,e.y)),this.__wx=e.x,this.__wy=e.y,this.__pArr.push(new r.Point(e.x,e.y))}}},{key:"endDrawElecWire",value:function(t){var e=this;if(this._isStartDrawElecWire){this.addListeners(!1);var i=void 0;if(this._isStartDrawElecWire=!1,this._wireG.clear(),5>this.__pArr.length)return;var n=[];for(n.push(this.__pArr[0]),i=1;this.__pArr.length-1>i;i++){var o=this.__pArr[i];r.M.getPointLen(n[n.length-1],o)>100&&n.push(o)}n.push(this.__pArr[this.__pArr.length-1]),this.globalConfig.main.addComp([{name:"ElecWire",p:new r.Point(140,35)}],!1,function(t){var i=t[0];i.isDrawType=!0;var o=i.getData();o.h1_x=n[0].x,o.h1_y=n[0].y,o.h2_x=n[n.length-1].x,o.h2_y=n[n.length-1].y,o.h1IsNearToBinding=!0,o.h2IsNearToBinding=!0,o.pArr=n,i.allowSave=!0,i.setData.call(i,o),i.setDataOver0.call(i);var r=e.elecUtil.getWireLinkBposter(i.bposter0),a=e.elecUtil.getWireLinkBposter(i.bposter1);if(r&&a&&r.UID===a.UID)return void e.globalConfig.main.removeEquipment.call(e.globalConfig.main,i);i.diyChanged.call(i),(1>i.bposter0.bindinger.friendPostersArr.length||1>i.bposter1.bindinger.friendPostersArr.length)&&e.globalConfig.main.removeEquipment.call(e.globalConfig.main,i)})}}}]),t}()},593:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function m(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:m(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(450),c=n(u),d=i(50),p=n(d),f=i(488),y=n(f);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=2;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isDC=!0,i.isOpen=!1,i.maxPower=0,i.duanNum=4,i.duanIndex=0,i.pinF=4,i.maxF=20,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){this.createZuhe({bar:3,pos:[[1,0],[2,1],[3,0],[3,1]],wire:[[[1,1],[2,0]],[[1,0],[3,0]],[[2,1],[3,1]]],res:[[1,0],[2,c["default"].MIN_RESISTANCE]]}),this.bar1.iElecInter=2,this.bar3.elecConnect=!1}},{key:"freshPower",value:function(t){this.maxPower=this.isOpen?t:0,this.freshConnect(),this.bar1.branchChange=!0}},{key:"overStep",value:function(){this.isDC?this.bar1.Power!==this.maxPower&&(this.bar1.Power=this.maxPower,this.bar1.branchChange=!0):this.elecUtil.getBposterWires(this.bposter2).length&&this.elecUtil.getBposterWires(this.bposter3).length&&(this.bar1.Power=this.getNextDuanPower(),this.bar1.branchChange=!0)}},{key:"getNextDuanPower",value:function(){var t=this.duanNum*this.pinF,e=Math.sin(this.duanIndex/t*2*Math.PI)*this.maxPower;return this.duanIndex=t-1>this.duanIndex?this.duanIndex+1:0,e}},{key:"_init_toggleMC",value:function(){var t=this;this._toggleMC_ID=h.M.addTouch(this.toggleMC,{tab:function(){t.isOpen=!t.isOpen,t.toggleMC.currentFrame=t.isOpen?1:0,t.freshPower(t._rosInd),t.freshGlow()},begin:function(){t.cannotSystemDrag=!0},end:function(){t.cannotSystemDrag=!1}}),this.addCursor(this.toggleMC,"hand")}},{key:"freshConnect",value:function(){this.bar1.elecConnect=this.isOpen,this.bar2.elecConnect=this.isOpen,this.wire1.elecConnect=this.isOpen,this.wire2.elecConnect=this.isOpen,this.wire3.elecConnect=this.isOpen}},{key:"_init_ros",value:function(){this.ros.rotation=this._angleArr[this._rosInd],this._addRotateControl()}},{key:"_addRotateControl",value:function(){var t=this;this.parent.updateTransform(),this.alphaSP.rotateData={pareComp:this,cenP:function(){return t.toGlobal(t.alphaSP)},rotateHandleFunc:this._rotateHandleFunc,downHandleFunc:this._downHandleFunc},this.phy.addRotateTool(this.alphaSP),this.alphaSP.alpha=0}},{key:"_downHandleFunc",value:function(t){t.addAngle=0}},{key:"_rotateHandleFunc",value:function(t,e){this.alphaSP.rotation+=e,t.addAngle+=e;var i=!1;t.addAngle>h.M.toHu(15)?(this._angleArr.length-1>this._rosInd&&(this._rosInd++,this.ros.rotation=this._angleArr[this._rosInd],i=!0),t.addAngle=0):t.addAngle<-h.M.toHu(15)&&(this._rosInd>0&&(this._rosInd--,this.ros.rotation=this._angleArr[this._rosInd],i=!0),t.addAngle=0),i&&(this.freshPower(this._rosInd),this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE))}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this._angleArr=[],this._rosInd=0;var t=void 0;for(t=0;16>=t;t++)this._angleArr.push(h.M.toHu(16.25*t-130));this._toggleMC_ID=null,this._init_toggleMC(),this._init_ros(),this.freshBindStateProx=this.freshBindState.bind(this),this.main.addEventListener(p["default"].BIND_ELEC_WIRE,this.freshBindStateProx),this.main.addEventListener(p["default"].UNBIND_ELEC_WIRE,this.freshBindStateProx),this.addCursor(this.alphaSP,"rotatebtn"),this.freshBindState(),this.freshPower(this._rosInd)}},{key:"freshBindState",value:function(){this.bposter0.cannotBindWire=!1,this.bposter1.cannotBindWire=!1,this.bposter2.cannotBindWire=!1,this.bposter3.cannotBindWire=!1,this.elecUtil.getBposterWires(this.bposter0).length&&this.elecUtil.getBposterWires(this.bposter1).length?(this.bposter2.cannotBindWire=!0,this.bposter3.cannotBindWire=!0,this.isDC=!0,this.bar2.elecConnect=!0):this.elecUtil.getBposterWires(this.bposter2).length&&this.elecUtil.getBposterWires(this.bposter3).length?(this.bposter0.cannotBindWire=!0,this.bposter1.cannotBindWire=!0,this.isDC=!1,this.bar2.elecConnect=!0):this.bar2.elecConnect=!1}},{key:"removed",value:function(){this.removedCursor(this.toggleMC),this.removedCursor(this.alphaSP),this.main.removeEventListener(p["default"].BIND_ELEC_WIRE,this.freshBindStateProx),this.main.removeEventListener(p["default"].UNBIND_ELEC_WIRE,this.freshBindStateProx),this.alphaSP.rotateData=null,h.M.removeTouch(this.toggleMC,this._toggleMC_ID),h.M.removeTicker(this.tickerID),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.rosInd=this._rosInd,t.isOpen=this.isOpen,t.pinF=this.pinF,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this._rosInd=t.rosInd||0,this.isOpen=!!t.isOpen,this.pinF=t.pinF||this.pinF,this.toggleMC.currentFrame=this.isOpen?1:0,this.freshPower(this._rosInd),this.freshGlow()}},{key:"setDataOver",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this),this.ros.rotation=this._angleArr[this._rosInd]}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.getScrollBar([this.getLocaleStr("frequency","频率"),!0,"",this.maxF,1,this.maxF-this.pinF+1,1,function(e){t.pinF=t.maxF-e.showValue+1},this])),i}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("frequency")+": "+(this.maxF-this.pinF+1)+"\n    "}},{key:"freshGlow",value:function(){this.globalConfig.SHOW_GLOW&&(this.glowSPArr[0][0].visible=!this.isOpen,this.glowSPArr[0][1].visible=this.isOpen)}},{key:"showGlowIndex",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"showGlowIndex",this).call(this,t),this.freshGlow()}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.pinF=this.pinF,t}},{key:"setDefaultOrigin",value:function(){this.pinF=4}},{key:"defaultSettingChanged",value:function(){this.freshPower(this._rosInd)}}]),e}(y["default"])},594:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:c(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(448),u=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=7;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.canShowRepairBtn=!1,i.defaultName="S",i}return r(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,1],[1,1]],wire:[[[1,1],[2,0]]]}),this.bar1.isBreak=!0}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.dao),this.add2component(this.bg),this.dao.drag.alpha=0,this.dao.xin.alpha=0,this.dao.rotation=-.48,this._addRotateControl(),this._freshResistance(),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter2.bindinger.linkWireType=1,this.drawDis=35,this.bposter0.dp.setTo(12,0),this.bposter2.dp.setTo(12,-8),this.bposter1.dp.setTo(-16,0),this.addCursor(this.dao.drag,"hand")}},{key:"_addRotateControl",value:function(){this.parent.updateTransform(),this.dao.rotateData={rotateType:1,pareComp:this,cenP:function(){return this.toGlobal(this.dao)}.bind(this),rotateHandleFunc:this._rotateHandleFunc},this._spdRotID=this.phy.addRotateTool(this.dao)}},{key:"_rotateHandleFunc",value:function(t,e){var i=this.dao.rotation+e,n=i;i>0&&i<Math.PI/2?n=0:(i>Math.PI/2||i<-Math.PI)&&(n=-Math.PI),this.dao.rotation=n,this._freshResistance.call(this)&&this.diyChanged()}},{key:"_freshResistance",value:function(){var t=l.M.toAngle(this.dao.rotation);if(t<-13)if(-13>t&&t>-167){if(this.bar1.isBreak&&this.bar2.isBreak)return!1;this.bar1.isBreak=!0,this.bar2.isBreak=!0}else{if(!this.bar1.isBreak&&this.bar2.isBreak)return!1;this.bar1.isBreak=!1,this.bar2.isBreak=!0}else{if(this.bar1.isBreak&&!this.bar2.isBreak)return!1;this.bar1.isBreak=!0,this.bar2.isBreak=!1}return!0}},{key:"removed",value:function(){this.removedCursor(this.dao.drag),this.phy.removeRotateTool(this.dao,this._spdRotID),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.daoRotation=this.dao.rotation,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.dao.rotation=t.daoRotation}},{key:"setDataOver",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this),this._freshResistance.call(this)}},{key:"getLocalBoundsElecs",value:function(){return[this.bg,this.dao]}}]),e}(u["default"])},595:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:c(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(448),u=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=7;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.canShowRepairBtn=!1,i.defaultName="S",i}return r(e,t),a(e,[{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.dao),this.add2component(this.bg),this.dao.drag.alpha=0,this.dao.xin.alpha=0,this.dao.rotation=-.48,this._freshResistance(),this._addRotateControl(),this._startAngle=0,this._startTime=0,this._dragTouchId=l.M.addTouch(this.dao.drag,{begin:function(e){t._startAngle=t.dao.rotation,t._startTime=(new Date).getTime()},end:function(e){var i=Math.abs(t._startAngle-t.dao.rotation),n=(new Date).getTime()-t._startTime;.2>i&&300>n&&(t.isBreak?TweenMax.to(t.dao,.5,{rotation:0,onComplete:function(){t._freshResistance()}}):TweenMax.to(t.dao,.5,{rotation:-.651,onComplete:function(){t._freshResistance()}}))}},this,{time:300,dis:10}),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter0.dp.setTo(14,8),this.bposter1.dp.setTo(-14,8),this.drawDis=35,this.addCursor(this.dao.drag,"hand")}},{key:"_addRotateControl",value:function(){var t=this;this.parent.updateTransform(),this.dao.rotateData={rotateType:1,pareComp:this,cenP:function(){return t.toGlobal(t.dao)},rotateHandleFunc:this._rotateHandleFunc,downHandleFunc:this._downHandleFunc},this.phy.addRotateTool(this.dao)}},{key:"_downHandleFunc",value:function(t,e){}},{key:"_rotateHandleFunc",value:function(t,e){var i=l.M.toAngle(this.dao.rotation),n=l.M.toAngle(this.dao.rotation+e);n>0&&0>this.dao.rotation&&(e=-this.dao.rotation),-60>n&&i>-60&&(e=l.M.toHu(-60)-this.dao.rotation),n>0&&0===this.dao.rotation||-60>n&&-60===i||(this.dao.rotation+=e,this._freshResistance.call(this))}},{key:"_freshResistance",value:function(){-13>l.M.toAngle(this.dao.rotation)?this.isBreak||this["break"]():this.isBreak&&this.repair()}},{key:"removed",value:function(){this.removedCursor(this.dao.drag),l.M.removeTouch(this.dao.drag,this._dragTouchId),this.phy.removeRotateTool(this.dao),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.daoRotation=this.dao.rotation,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.dao.rotation=t.daoRotation,this._freshResistance()}},{key:"setDataOver",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this),this._freshResistance.call(this)}},{key:"getLocalBoundsElecs",value:function(){return[this.bg,this.dao]}}]),e}(u["default"])},596:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:p(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(448),c=n(u),d=i(450);n(d);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=0;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.maxRes=20,i.maxResArr=["5Ω","10Ω","20Ω","50Ω","200Ω","1000Ω","10000Ω","100000Ω"],i.dragPerArr=["0%","20%","33%","50%","67%","75%"],i.isShowElec=!0,i.canFuse=!1,i.fuseValueArr=["0.5A","1A","2A"],i.fuseValue=2,i.defaultName="R",i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,1],[1,1],[2,0]],wire:[[[1,1],[2,0]]]})}},{key:"_initMask",value:function(){this.LMask=new PIXI.Graphics,this.RMask=new PIXI.Graphics,this.addChildAt(this.LMask,this.children.length-2),this.addChildAt(this.RMask,this.children.length-2)}},{key:"freshMask",value:function(){this.LMask.clear(),this.LMask.beginFill(16711680,0),this.LMask.drawRect(this.qianSP.x,this.qianSP.y,this.drager.x-this.qianSP.x,this.qianSP.height),this.LMask.endFill(),this.RMask.clear(),this.RMask.beginFill(255,0),this.RMask.drawRect(this.drager.x,this.qianSP.y,this.qianSP.width-(this.drager.x-this.qianSP.x),this.qianSP.height),this.RMask.endFill(),this.shenSP.visible=!1,this.qianSP.visible=!1,this.isShowElec&&this.globalConfig.showElecLine&&(Math.abs(this.bar1.curElec)>1e-6&&Math.abs(this.bar2.curElec)>1e-6&&1e-6>Math.abs(this.bar1.curElec-this.bar2.curElec)?(this.shenSP.visible=!0,this.shenSP.mask=null,this.qianSP.mask=null):Math.abs(this.bar1.curElec)-Math.abs(this.bar2.curElec)>1e-6?(Math.abs(this.bar1.curElec)>1e-6&&(this.shenSP.mask=this.LMask,this.shenSP.visible=!0),Math.abs(this.bar2.curElec)>1e-6&&(this.qianSP.mask=this.RMask,this.qianSP.visible=!0)):(Math.abs(this.bar2.curElec)>1e-6&&(this.shenSP.mask=this.RMask,this.shenSP.visible=!0),Math.abs(this.bar1.curElec)>1e-6&&(this.qianSP.mask=this.LMask,this.qianSP.visible=!0)))}},{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this._initMask(),this._dragRect={x:-146,y:this.drager.y,width:298,height:0},this.drager.x=this._dragRect.x,this._initDrag(),this.freshMask(),this.bposter0.bindinger.linkWireType=4,this.bposter1.bindinger.linkWireType=4,this.bposter2.bindinger.linkWireType=3,this.bposter3.bindinger.linkWireType=3,this.drawDis=40,this.bposter0.dp.setTo(-22,-8),this.bposter1.dp.setTo(22,-8),this.bposter2.dp.setTo(-25,18),this.bposter3.dp.setTo(25,18),this.addCursor(this.drager,"zuoyou"),setTimeout(function(){t.hadDestory||t._freshDragRes(!0)})}},{key:"_initDrag",value:function(){var t=this;this.drager.getMScale=function(){return t.globalConfig.main.view.scale},this._dragerID=h.M.addDrag(this.drager,this._dragRect,{begin:function(){t.cannotSystemDrag=!0},end:function(){t.cannotSystemDrag=!1},move:function(){t._freshDragRes()}})}},{key:"_getDragResPer",value:function(){return(this.drager.x-this._dragRect.x)/this._dragRect.width}},{key:"_freshDragRes",value:function(t){this.bar1.Resistance=this.maxRes*this._getDragResPer(),this.bar2.Resistance=this.maxRes-this.bar1.Resistance,this.main&&this.main.showElecTipMess(),this.diyChanged()}},{key:"overStep",value:function(){this.freshMask(),this.freshBreak()}},{key:"freshElecLineVisible",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshElecLineVisible",this).call(this),this.freshMask()}},{key:"removed",value:function(){this.removedCursor(this.drager),this.drager.getMScale=null,h.M.removeDrag(this.drager,this._dragerID),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.dragerX=this.drager.x,t.maxRes=this.maxRes,t.canFuse=this.canFuse,t.fuseValue=this.fuseValue,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),isNaN(t.dragerX)||(this.drager.x=t.dragerX),isNaN(t.maxRes)||(this.maxRes=t.maxRes),this.canFuse=t.canFuse||!1,this.fuseValue=t.fuseValue||2}},{key:"setDataOver",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this),this._freshDragRes()}},{key:"freshBreak",value:function(){this.canFuse&&(Math.abs(this.bar1.curElec)>this.fuseValue||Math.abs(this.bar2.curElec)>this.fuseValue)&&this["break"]()}},{key:"break",value:function(){this.bar1.isBreak=!0,this.bar2.isBreak=!0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this)}},{key:"repair",value:function(){this.bar1.isBreak=!1,this.bar2.isBreak=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"getLeftN",value:function(){return Math.round(100*this._getDragResPer())}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.getLeftN();return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("maxResistance"),canEnter:!0,enterUnit:"Ω",maxValue:1e5,minValue:0,showValue:this.maxRes+"Ω",value:this.maxResArr,callBack:function(e){t.maxRes=h.M.getNumStr(e.showValue),t._freshDragRes()}},{type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("sliderPosition"),canEnter:!0,enterUnit:"%",maxValue:100,minValue:0,showValue:n+"%",value:this.dragPerArr,callBack:function(e){var i=h.M.getNumStr(e.showValue)/100;t.drager.x=i*t._dragRect.width+t._dragRect.x,t._freshDragRes()}},{type:this.ComponentProperty.BOOL,name:this.language.getLocaleStr("can_fuse"),checked:this.canFuse,callBack:function(e){t.canFuse=e.checked,t.freshBreak()}},{type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("fusing_current"),canEnter:!0,enterUnit:"A",maxValue:1e3,minValue:1e-6,showValue:this.fuseValue+"A",value:this.fuseValueArr,callBack:function(e){t.fuseValue=h.M.getNumStr(e.showValue),t.freshBreak()}}),i}},{key:"getTipMess",value:function(){var t=this.getLeftN(),i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("maxResistance")+": "+this.maxRes+"Ω\n    "+this.language.getLocaleStr("sliderPosition")+": "+t+"%\n    "}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.dragerX=this.drager.x,t.maxRes=this.maxRes,t.canFuse=this.canFuse,t.fuseValue=this.fuseValue,t}},{key:"setDefaultSetting",value:function(t){this.drager.x=t.dragerX,this.maxRes=t.maxRes,this.canFuse=t.canFuse||!1,this.fuseValue=t.fuseValue||2}},{key:"setDefaultOrigin",value:function(){this.drager.x=this._dragRect.x,this.maxRes=20,this.canFuse=!1,this.fuseValue=2}}]),e}(c["default"])},597:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function b(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:b(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(448),c=n(u),d=i(450),p=n(d),f=i(531),y=n(f),m=i(50),g=n(m),v=i(13);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.LINE_BACK_DRAG_ALPHA=0,i.colorIndex=0,i.colorNameArr=[i.language.getLocaleStr("red"),i.language.getLocaleStr("black"),i.language.getLocaleStr("silvery")],i.canShowDragRect=!1,i.loadLevel=4,i.MAX_SPEED=5,i.level=8,i.lockDragBody=!1,i.isDrawType=!1,i.canShowDot=!0,i.pcDot=new y["default"],i.addChild(i.pcDot),i.pcDot.setSkin(i.globalConfig.cdn_static+"electrical/elecwire/"+i.globalConfig.IMAGE_SCALE+"dotWhite.png"),i.noRenderSelected=!0,i._oriElecSpeed=0,i.Resistance=0,i.canvasRunHandleProxy=i.canvasRunHandle.bind(i),i.main.addEventListener(i.NBEvent.CANVAS_RUN,i.canvasRunHandleProxy),i.canvasRunHandle({isRunning:i.globalConfig.main.isRunning}),i}return a(e,t),s(e,[{key:"canvasRunHandle",value:function(t){this.pcDot.setActive(t.isRunning)}},{key:"update",value:function(){this.pcDot.loop()}},{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.closeBtn.visible=!1,this._closeBtnTouch=h.M.addTouch(this.closeBtn,{begin:function(){t.closeBtn.currentFrame=1,t.globalConfig.main.removeEquipment.call(t.globalConfig.main,t)},end:function(){t.closeBtn.currentFrame=0}},this),this.parent.x-=140,this.parent.y-=35,this.cannotSystemDrag=!0,this.startElecTimer=!1,this.h1_mc.bposter=this.bposter0,this.h1_mc.bposter.wire_h_mc=this.h1_mc,this.h2_mc.bposter=this.bposter1,this.h2_mc.bposter.wire_h_mc=this.h2_mc,this.h1_mc._dragmode=this.h2_mc._dragmode=0,this.curElecNum=0,this.lineFG=new PIXI.mesh.Rope(PIXI.Texture.fromImage(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+"ElecWireSe.png"),[]),this.addChildAt(this.lineFG,0),this.lineFG.visible=!1,this.lineG=new PIXI.Graphics,this.addChildAt(this.lineG,0),this.func_add_h_mc_touchHandle(),this.func_addfunc_bposterPositionChangedHandle(),this.func_initDragPro(),this.freshTouDirect(),this.func_init_loadLine(),this.show_h_mc(!0),this._drawLine(),this.hideDragRect(),this.__loopInd=0,h.M.setSPPoint(this.bposter0.position,this.h1_mc),h.M.setSPPoint(this.bposter1.position,this.h2_mc),this._addMouseStatus(this.h1_mc),this._addMouseStatus(this.h2_mc),this.addCursor(this.closeBtn,"hand")}},{key:"_checkDragEndToBind",value:function(t){if(0===t.bindinger.friendPostersArr.length){t.bindinger.nearToBinding()&&(this.branchChange=!0)}}},{key:"endEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this._checkDragEndToBind(this.bposter0),this._checkDragEndToBind(this.bposter1)}},{key:"_addMouseStatus",value:function(t){var e=this;t.addEventListener("mouseover",function(t){var i=t.currentTarget;i[i.h_mc_dragID].isLock&&i.bposter.bindinger.friendPostersArr.length>0&&(e.elecUtil.getWireLinkBposter(i.bposter).canStartDrawElecWire&&(i.__isIn__=!0,e.MouseManager.__changeMouseStatus(e.globalConfig.main.mouseManager,i,11),e.MouseManager.lockMouse(!0)))}),t.addEventListener("mouseout",function(t){var i=t.currentTarget;e.MouseManager.lockMouse(!1),i.__isIn__=!1,e.MouseManager.__changeMouseStatus(e.globalConfig.main.mouseManager,i,11)})}},{key:"freshTouDirect",value:function(){if(this._freshTouTypeFromLink(this.h1_mc),this._freshTouTypeFromLink(this.h2_mc),this.h1_mc.linkBposter);else{var t=h.M.getAngleP(this._pArr[1].p,this._pArr[0].p);this.h1_mc.rotation=h.M.toHu(t+180)}if(this.h2_mc.linkBposter);else{var e=h.M.getAngleP(this._pArr[this._pArr.length-2].p,this._pArr[this._pArr.length-1].p);this.h2_mc.rotation=h.M.toHu(e+180)}}},{key:"_freshTouTypeFromLink",value:function(t){if(t.linkBposter&&t.linkBposter.body){if(t.linkBposter.body.componentBox)switch(t.rotation=t.linkBposter.body.componentBox.rotation,t.linkBposter.linkWireType){case-1:t.currentFrame=0;break;case 0:t.currentFrame=1;break;case 1:t.currentFrame=2;break;case 2:t.currentFrame=3;break;case 3:t.currentFrame=4;break;case 4:t.currentFrame=5}}else t.currentFrame=0}},{key:"func_init_loadLine",value:function(){this.ropeBox=new PIXI.Sprite,this.addChildAt(this.ropeBox,0),this.freshLineType()}},{key:"freshLineType",value:function(){var t=void 0;switch(h.M.removeAllChild(this.ropeBox),this.colorIndex){case 0:t="ElecWireLineStyleRed";break;case 1:t="ElecWireLineStyleBlue";break;case 2:t="ElecWireLineStyle"}var e=void 0;e=this.globalConfig.isWinXP?new PIXI.Graphics:new PIXI.mesh.Rope(PIXI.Texture.fromImage(this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+t+".png"),[]),this.ropeBox.addChild(e),this.freshDotColor()}},{key:"setWorkElec",value:function(t){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),null===t)return void this.pcDot.setSpeed(0);this.curElecNum=t;var i=void 0;this.globalConfig.showElecLine&&Math.abs(this.curElecNum)>1e-7?(this.startElecTimer=!0,i=t,i=h.M.range(i,-this.MAX_SPEED,this.MAX_SPEED)):(this.startElecTimer=!1,i=0),this.pcDot.setSpeed(i),(0!==this._oriElecSpeed&&0===i||0===this._oriElecSpeed&&0!==i)&&(this._oriElecSpeed=i,this._drawLine())}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);t.isDrawType=this.isDrawType,t.colorIndex=this.colorIndex,t.h1_x=this.h1_mc.x,t.h1_y=this.h1_mc.y,t.h2_x=this.h2_mc.x,t.h2_y=this.h2_mc.y,this.h1_mc.bposter.bindinger.friendPostersArr.length>0&&(t.h1IsNearToBinding=!0),this.h2_mc.bposter.bindinger.friendPostersArr.length>0&&(t.h2IsNearToBinding=!0);var i=[];$.each(this._pArr,function(t,e){i.push(e.p)}),t.pArr=i;var n=this.h1_mc.bposter.bindinger,o=this.h2_mc.bposter.bindinger,r=this.getDriver(n),a=this.getDriver(o);return t.post0={UID:n.UID,driver:r?r.UID:0},t.post1={UID:o.UID,driver:a?a.UID:0},t}},{key:"getDriver",value:function(t){return this.elecUtil.getWireLinkBposter(t.BindMC)}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.colorIndex=this.colorIndex,t}},{key:"setDefaultOrigin",value:function(){this.colorIndex=0}},{key:"defaultSettingChanged",value:function(){this.freshLineType(),this._drawLine()}},{key:"setData",value:function(t){var i=this;this.isDrawType=t.isDrawType,this.colorIndex=t.colorIndex,this.h1_mc.x=t.h1_x,this.h1_mc.y=t.h1_y,this.h2_mc.x=t.h2_x,this.h2_mc.y=t.h2_y,h.M.setSPPoint(this.bposter0.position,this.h1_mc),h.M.setSPPoint(this.bposter1.position,this.h2_mc),h.ArrayUtil.clear(this._pArr),$.each(t.pArr,function(t,e){i._pArr.push({p:new h.Point(e.x,e.y)})}),this._pArr[0].mc=this.h1_mc,this._pArr[this._pArr.length-1].mc=this.h2_mc;var n=this.h1_mc.bposter.bindinger,o=this.h2_mc.bposter.bindinger;t.post0&&(n.UID=t.post0.UID,n.driver=t.post0.driver),t.post1&&(o.UID=t.post1.UID,o.driver=t.post1.driver),this._freshPArrData(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.freshLineType(),this._drawLine()}},{key:"bindToDriver",value:function(t){if(t.driver){var e=this.elecUtil.getEqByUID(t.driver);e&&e.body&&this.linkWireBindMC(t.BindMC,e.BindMC)}else{t.nearToBinding()&&(t.BindMC.wire_h_mc.linkBposter=this.elecUtil.getWireLinkBposter(t.BindMC),this.main.dispatchEvent(g["default"].BIND_ELEC_WIRE,{target:t.BindMC}))}}},{key:"setDataOver0",value:function(){var t=this.bposter0.bindinger,e=this.bposter1.bindinger;this.bindToDriver(t),this.bindToDriver(e),this.freshLineType(),this._drawLine(),this.show_h_mc(!1),this.freshTouDirect()}},{key:"fresh_canShowDot",value:function(){var t=this,e=this.elecUtil.getWireAllBposterElecs(this);each(e,function(e,i){if("ParallelPlateCondenser"===i.classname||"ElectriScope"===i.classname)return t.canShowDot=!1,!1},this)}},{key:"func_add_h_mc_touchHandle",value:function(){var t=this,e={begin:this.func_h_mc_begin,move:this.func_h_mc_move,end:this.func_h_mc_end};this.h1_mc.h_mc_dragID=h.M.addDrag(this.h1_mc,null,e,this),this.h2_mc.h_mc_dragID=h.M.addDrag(this.h2_mc,null,e,this),this.h1_mc.getMScale=function(){return t.globalConfig.main.view.scale},this.h2_mc.getMScale=function(){return t.globalConfig.main.view.scale}}},{key:"func_h_mc_begin",value:function(t){this.canShowDot=!0;var e=t.target;if(e[e.h_mc_dragID].isLock){if(e.bposter.bindinger.friendPostersArr.length>0){var i=this.elecUtil.getWireLinkBposter(e.bposter);if(i.canStartDrawElecWire){this.globalConfig.main.viewStack.parent.updateTransform();var n=this.globalConfig.main.viewStack.toLocal(new h.Point,e.bposter);this.moduleMain.drawLineComp.startDrawElecWire.call(this.moduleMain.drawLineComp,n,t)}}}else e._isTouDown=!0,this.lockDragBody=!1,e.bposter.bindinger.friendPostersArr.length>0&&(e.linkBposter=null,this.freshTouDirect(),e.bposter.bindinger.breakBinding.call(e.bposter.bindinger),this.main.dispatchEvent(g["default"].UNBIND_ELEC_WIRE,{target:e.bposter}),this.diyChanged());this.main.dispatchEvent(v.PHY_EVENTS.TIP_TOP_BEGIN,{target:[e.bposter.bindinger],type:1})}},{key:"freshHcPoint",value:function(t){h.M.setSPPointXY(t.bposter,t.x,t.y)}},{key:"func_h_mc_move",value:function(t){var e=t.target;this.freshHcPoint(e),e._isTouDown&&this._drawLine()}},{key:"func_h_mc_end",value:function(t){var e=t.target;if(e._isTouDown){e._isTouDown=!1,this.freshHcPoint(e);e.bposter.bindinger.nearToBinding()&&(e.linkBposter=this.elecUtil.getWireLinkBposter(e.bposter),this.globalConfig.SoundTool.registAndPlay(this.SoundStr.DAO_XIAN_LIAN_JIE),this.main.dispatchEvent(g["default"].BIND_ELEC_WIRE,{target:e.bposter}),this.diyChanged(),this.show_h_mc(!1)),this._drawLine()}}},{key:"func_addfunc_bposterPositionChangedHandle",value:function(){this.bposter0.addEventListener(p["default"].BINDMC_POTISON_CHANGED,this.func_bposterPositionChangedHandle),this.bposter1.addEventListener(p["default"].BINDMC_POTISON_CHANGED,this.func_bposterPositionChangedHandle)}},{key:"func_bposterPositionChangedHandle",value:function(t){this.wire_h_mc.x=this.position.x,this.wire_h_mc.y=this.position.y}},{key:"func_initDragPro",value:function(){this._cInd=0,this._preMC1P=new h.Point,this._preMC2P=new h.Point,this._dDis=30,this._cDis=10,this._isTouDown=!1,this._lineGP1=new h.Point,this._lineGP2=new h.Point,this._pArr=[{p:h.M.getSPPoint(this.h1_mc),mc:this.h1_mc},{p:h.M.getSPPoint(this.h2_mc),mc:this.h2_mc}],this._sp0=new h.Point,this._sp1=new h.Point,this._sp2=new h.Point,this._shangPArr=[],this._xiaPArr=[],this.wanObjPArr=[],this._lineGID=h.M.addTouch(this.lineG,{begin:this.lineGBegin,move:this.lineGMove,end:this.lineGEnd},this),this.lineG.isTiDown=!1,this.lineG.preDownP=new h.Point}},{key:"lineGBegin",value:function(t){if(!this.lockDragBody){this.lineG.isTiDown=!0,this.bposter0.bindinger&&0===this.bposter0.bindinger.friendPostersArr.length&&0===this.bposter1.bindinger.friendPostersArr.length?(this._isDragLine=!0,this.main.dispatchEvent(v.PHY_EVENTS.TIP_TOP_BEGIN,{target:[this.bposter0.bindinger,this.bposter1.bindinger],type:1})):this._isDragLine=!1;var e=t.data.global;if(this.lineG.preDownP.setTo(e.x,e.y),!this._isDragLine){if(e=this.toLocal(e),0>(this._cInd=this.func_getPArrDownInd(e)))return!1;var i=this._cInd,n=this.func_getDownValidP(e);n?this._dragObj=n:(this._dragObj={p:e.clone()},this._pArr.splice(i+1,0,this._dragObj),this._dragObj.ind=i+1)}}}},{key:"lineGMove",value:function(t){if(!this.lockDragBody&&this.lineG.isTiDown){var e=t.data.global.x-this.lineG.preDownP.x,i=t.data.global.y-this.lineG.preDownP.y;if(e/=this.globalConfig.main.view.scale.x,i/=this.globalConfig.main.view.scale.y,this._isDragLine)$.each(this._pArr,function(t,n){n.p.x+=e,n.p.y+=i}),h.M.setSPPoint(this._pArr[0].mc,this._pArr[0].p),h.M.setSPPoint(this._pArr[this._pArr.length-1].mc,this._pArr[this._pArr.length-1].p),this._drawLine(),this.freshHcPoint(this.bposter0.wire_h_mc),this.freshHcPoint(this.bposter1.wire_h_mc);else if(this._dragObj)if(this.isDrawType){for(var n=this._pArr[0].p,o=this._dragObj.p,r=new h.Point(this._dragObj.p.x+e,this._dragObj.p.y+i),a=h.M.getAngleP1(new h.Point(r.x-n.x,r.y-n.y),new h.Point(o.x-n.x,o.y-n.y)),s=h.M.toHu(a),l=h.M.getPointLen(n,r)/h.M.getPointLen(n,o),u=1;this._dragObj.ind>u;u++){var c=this._pArr[u].p,d=h.M.getGaoDianFrom3Dian(c,n,o),p=h.M.getRectOneP(n,c,d),f=h.M.rotaPointFromP(c,n,s),y=h.M.rotaPointFromP(p,n,s);this._pArr[u].p=h.M.interpolate(y,f,l)}n=this._pArr[this._pArr.length-1].p,o=this._dragObj.p,r=new h.Point(this._dragObj.p.x+e,this._dragObj.p.y+i),a=h.M.getAngleP1(new h.Point(r.x-n.x,r.y-n.y),new h.Point(o.x-n.x,o.y-n.y)),s=h.M.toHu(a),l=h.M.getPointLen(n,r)/h.M.getPointLen(n,o);for(var m=this._dragObj.ind+1;this._pArr.length-1>m;m++){var g=this._pArr[m].p,v=h.M.getGaoDianFrom3Dian(g,n,o),b=h.M.getRectOneP(n,g,v),_=h.M.rotaPointFromP(g,n,s),x=h.M.rotaPointFromP(b,n,s);this._pArr[m].p=h.M.interpolate(x,_,l)}h.M.setSPPoint(this._dragObj.p,r),this._drawLine()}else this._dragObj.p.x+=e,this._dragObj.p.y+=i,this._drawLine();this.lineG.preDownP.setTo(t.data.global.x,t.data.global.y)}}},{key:"lineGEnd",value:function(t){this.lockDragBody||this.lineG.isTiDown&&(this.lineG.isTiDown=!1,this._isDragLine||(this.func_checkToRemove_dragObj(),this._drawLine(),this._dragObj=null))}},{key:"_freshPArrData",value:function(t){var e=void 0;if(this.isDrawType||t){var i=this._pArr[0].p.x!==this._pArr[0].mc.x||this._pArr[0].p.y!==this._pArr[0].mc.y,n=this._pArr[this._pArr.length-1].p.x!==this._pArr[this._pArr.length-1].mc.x||this._pArr[this._pArr.length-1].p.y!==this._pArr[this._pArr.length-1].mc.y;if(i&&n)return h.M.setSPPoint(this._pArr[0].p,this._pArr[0].mc),void h.M.setSPPoint(this._pArr[this._pArr.length-1].p,this._pArr[this._pArr.length-1].mc);if(i){var o=this._pArr[this._pArr.length-1].p,r=this._pArr[0].p,a=h.M.getSPPoint(this._pArr[0].mc),s=h.M.getAngleP1(new h.Point(a.x-o.x,a.y-o.y),new h.Point(r.x-o.x,r.y-o.y)),l=h.M.toHu(s),u=h.M.getPointLen(o,a)/h.M.getPointLen(o,r);for(e=1;this._pArr.length-1>e;e++){var c=this._pArr[e].p,d=h.M.getGaoDianFrom3Dian(c,o,r),p=h.M.getRectOneP(o,c,d),f=h.M.rotaPointFromP(c,o,l),y=h.M.rotaPointFromP(p,o,l);this._pArr[e].p=h.M.interpolate(y,f,u)}h.M.setSPPoint(this._pArr[0].p,this._pArr[0].mc)}else if(n){var m=this._pArr[0].p,g=this._pArr[this._pArr.length-1].p,v=h.M.getSPPoint(this._pArr[this._pArr.length-1].mc),b=h.M.getAngleP1(new h.Point(v.x-m.x,v.y-m.y),new h.Point(g.x-m.x,g.y-m.y)),_=h.M.toHu(b),x=h.M.getPointLen(m,v)/h.M.getPointLen(m,g);for(e=1;this._pArr.length-1>e;e++){var w=this._pArr[e].p,C=h.M.getGaoDianFrom3Dian(w,m,g),P=h.M.getRectOneP(m,w,C),k=h.M.rotaPointFromP(w,m,_),T=h.M.rotaPointFromP(P,m,_);this._pArr[e].p=h.M.interpolate(T,k,x)}h.M.setSPPoint(this._pArr[this._pArr.length-1].p,this._pArr[this._pArr.length-1].mc)}}else h.M.setSPPoint(this._pArr[0].p,this._pArr[0].mc),h.M.setSPPoint(this._pArr[this._pArr.length-1].p,this._pArr[this._pArr.length-1].mc)}},{key:"caculate_yan",value:function(t,e,i,n,o){var r=h.M.getGaoDianFrom3Dian(n,t,e),a=r.sub(t).length/e.sub(t).length;r=h.M.interpolate(t,i,a);var s=h.M.getPointLen(n,r),l=h.M.interpolate(t,r,o),u=h.M.checkPointOnLineLeftOrRight(n,t,e)>0;return h.M.getXianDuanGaoXianDian(l,t,s,u)}},{key:"_drawLine",value:function(t,e){this.fresh_canShowDot();var i=void 0,n=void 0,o=void 0,r=void 0,a=void 0,s=void 0,l=this.elecUtil.getWireAllBposterElecs(this);e&&1===l.length?(h.M.setSPPoint(this._pArr[0].p,this._pArr[0].mc),h.M.setSPPoint(this._pArr[this._pArr.length-1].p,this._pArr[this._pArr.length-1].mc)):this._freshPArrData(t),n=this._pArr.length,h.ArrayUtil.clear(this._shangPArr),h.ArrayUtil.clear(this._xiaPArr),h.ArrayUtil.clear(this._cenPArr);var u=[this._pArr[0].p.clone()],c=[this._pArr[0].p.clone()];for(i=1;n>i;i++){o=this._pArr[i].p,r=this._pArr[i-1].p;var d=void 0,f=void 0,y=void 0,m=void 0;d=1===i?r:h.M.getXianDianByDis(p["default"].ELEC__GUAI_DIS_THICK,!0,r,o),f=i===n-1?o:h.M.getXianDianByDis(p["default"].ELEC__GUAI_DIS_THICK,!0,o,r),y=h.M.getXianDianByDis(p["default"].ELEC_WIRE_THICK_ALPHA/2,!0,d,f);var g=h.M.getXianDianByDis(20,!0,d,f);m=h.M.getXianDianByDis(p["default"].ELEC_WIRE_THICK_ALPHA/2,!0,f,d);var v=h.M.getXianDianByDis(20,!0,f,d);h.M.rotaPointFromP(y,d,Math.PI/2),h.M.rotaPointFromP(y,d,-Math.PI/2);var b=h.M.rotaPointFromP(g,d,Math.PI/2),_=h.M.rotaPointFromP(g,d,-Math.PI/2);if(i===n-1?(h.M.rotaPointFromP(f,m,Math.PI/2),h.M.rotaPointFromP(f,m,-Math.PI/2),a=h.M.rotaPointFromP(f,v,Math.PI/2),s=h.M.rotaPointFromP(f,v,-Math.PI/2)):(h.M.rotaPointFromP(m,f,-Math.PI/2),h.M.rotaPointFromP(m,f,Math.PI/2),a=h.M.rotaPointFromP(v,f,-Math.PI/2),s=h.M.rotaPointFromP(v,f,Math.PI/2)),this._shangPArr.push(b),this._shangPArr.push(a),this._xiaPArr.push(_),this._xiaPArr.push(s),2===n)u.push(o),c.push(o);else if(1===i)u.push(m),c.push(m);else{2===i&&c.push(y);var x=u[u.length-1],w=h.M.get_quadraticCurveTo_points(x.x,x.y,r.x,r.y,y.x,y.y);u=u.concat(w),c.push(o),i===n-1?(u.push(o),c.push(o)):u.push(m)}i>0&&n-1>i&&(this.wanObjPArr[i]={},this.wanObjPArr[i].cenWP=o,this.wanObjPArr[i].shangWP=h.M.getXianDianByDis(40,!1,a,b),this.wanObjPArr[i].xiaWP=h.M.getXianDianByDis(40,!1,s,_))}u[0]=u[0].clone(),u[u.length-1]=u[u.length-1].clone(),n=this.ropeBox.children.length;for(var C=0;n>C;C++){this.setRopePoints(this.ropeBox.getChildAt(C),u)}this.pcDot.setPoints(this.canShowDot?c:[]),this.lineFG.setRopePoints(u),u=h.ArrayUtil.copyArray(u);for(var P=0,k=1;u.length>k;k++){P+=h.M.getPointLen(u[k-1],u[k])}for(var T=P/2,O=1;u.length>O;O++){var M=u[O-1],A=u[O],I=h.M.getPointLen(M,A);if(I>=T){var S=h.M.getXianDianByDis(I-T,!0,A,M);h.M.setSPPoint(this.closeBtn,S);break}T-=I}this.lineG.clear(),this.lineG.lineStyle(null),this.lineG.beginFill(65280,this.LINE_BACK_DRAG_ALPHA),n=this._shangPArr.length;for(var E=0;n-1>E;E++){var B=this._shangPArr[E],D=this._shangPArr[E+1],R=this._xiaPArr[E],N=this._xiaPArr[E+1];if(E%2!=0){var L=this.wanObjPArr[(E+1)/2];this.lineG.moveTo(B.x,B.y),this.lineG.quadraticCurveTo(L.shangWP.x,L.shangWP.y,D.x,D.y),this.lineG.lineTo(N.x,N.y),this.lineG.quadraticCurveTo(L.xiaWP.x,L.xiaWP.y,R.x,R.y),this.lineG.lineTo(B.x,B.y)}this.lineG.moveTo(B.x,B.y),this.lineG.lineTo(D.x,D.y),this.lineG.lineTo(N.x,N.y),this.lineG.lineTo(R.x,R.y),this.lineG.lineTo(B.x,B.y)}this.lineG.endFill(),this.freshTouDirect();var j=h.M.getSPPoint(this.h1_mc),G=h.M.getSPPoint(this.h2_mc);if(!this._dragObj&&!this._isTouDown){var F=j.subtract(this._preMC1P),U=G.subtract(this._preMC2P);if(0!==F.length&&0!==U.length)return}this._preMC1P.setTo(j.x,j.y),this._preMC2P.setTo(G.x,G.y)}},{key:"setRopePoints",value:function(t,e){if(this.globalConfig.isWinXP){t.clear();t.lineStyle(9,[8523520,2302755,10263456][this.colorIndex]),each(e,function(e,i){0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)},this)}else t.setRopePoints(e)}},{key:"func_getDownValidP",value:function(t){var e=void 0,i=void 0;for(this._freshPArrData(),i=this._pArr.length-1,e=0;i>e;e++){var n=this._pArr[e],o=this._pArr[e+1];if(n.ind=e,o.ind=e+1,h.M.getPointLen(t,n.p)<this._cDis)return n;if(h.M.getPointLen(t,o.p)<this._cDis)return o}return null}},{key:"func_checkToRemove_dragObj",value:function(){if(this._dragObj&&this._dragObj.ind>0&&this._pArr.length-1>this._dragObj.ind){var t=this._pArr[this._dragObj.ind-1].p,e=this._pArr[this._dragObj.ind].p,i=this._pArr[this._dragObj.ind+1].p;10>180-h.M.getAngleByP(e,t,i)?this._pArr.splice(this._dragObj.ind,1):(h.M.getPointLen(e,t)<this._dDis||h.M.getPointLen(e,i)<this._dDis)&&this._pArr.splice(this._dragObj.ind,1)}}},{key:"func_getPArrDownInd",value:function(t){var e=void 0,i=this._pArr.length-1;for(e=0;i>e;e++){var n=this._pArr[e].p,o=this._pArr[e+1].p,r=h.M.getCenP(n,o),a=h.M.getXianDianByDis(p["default"].ELEC__GUAI_DIS_THICK,!0,n,o),s=h.M.getDuiDianDian(a,r),l=h.M.getXianDianByDis(62,!0,n,o),u=h.M.getDuiDianDian(l,r),c=h.M.rotaPointFromP(l,a,-Math.PI/2),d=h.M.rotaPointFromP(l,a,Math.PI/2),f=h.M.rotaPointFromP(u,s,-Math.PI/2),y=h.M.rotaPointFromP(u,s,Math.PI/2);if(h.M.checkPolygonPointArr2(t,[c,d,f,y]))return e;if(e>0){var m=this._pArr[e-1].p,g=h.M.getXianDianByDis(40,!0,n,m),v=new h.Point;v.x=h.M.sq(.5)*g.x+.5*n.x+h.M.sq(.5)*a.x,v.y=h.M.sq(.5)*g.y+.5*n.y+h.M.sq(.5)*a.y;if(h.M.getPointLen(v,g)>h.M.getPointLen(v,t))return e}}return-1}},{key:"linkWireBindMC",value:function(t,e){var i=void 0;i=e.bindinger.body.zuheBox?this.toLocal(e,e.bindinger.body.zuheBox):this.toLocal(e,e.bindinger.body),h.M.setSPPoint(t,i),t.bindinger.nearToBinding()&&(t.wire_h_mc.linkBposter=this.elecUtil.getWireLinkBposter(t),this.show_h_mc(!1),this.main.dispatchEvent(g["default"].BIND_ELEC_WIRE,{target:t}),this.freshTouDirect())}},{key:"showDragRect",value:function(){this.closeBtn.alpha=this.lineFG.alpha=1,this.lineFG.visible=!0,this.show_h_mc(!0)}},{key:"hideDragRect",value:function(){clearTimeout(this._hideDragRect_ID),this.lineFG.visible=!1,this.show_h_mc(!1)}},{key:"show_h_mc",value:function(t){this.h1_mc&&this.h2_mc&&this.h1_mc.bposter&&this.h2_mc.bposter.bindinger&&this.h1_mc&&this.h1_mc[this.h1_mc.h_mc_dragID]&&(this.h1_mc[this.h1_mc.h_mc_dragID].isLock=!1,this.h2_mc[this.h2_mc.h_mc_dragID].isLock=!1,t?this.h1_mc._dragmode=this.h2_mc._dragmode=0:(!this.lineFG.visible&&this.h1_mc.bposter.bindinger.friendPostersArr.length>0&&(this.h1_mc._dragmode=1,this.h1_mc[this.h1_mc.h_mc_dragID].isLock=!0),!this.lineFG.visible&&this.h2_mc.bposter.bindinger.friendPostersArr.length>0&&(this.h2_mc._dragmode=1,this.h2_mc[this.h2_mc.h_mc_dragID].isLock=!0)))}},{key:"freshDotColor",value:function(){this.pcDot.setSkin(0===this.colorIndex||1===this.colorIndex?this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+"dotWhite.png":this.globalConfig.cdn_static+"electrical/elecwire/"+this.globalConfig.IMAGE_SCALE+"dotRed.png")}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("wireColor"),checked:this.colorIndex,value:this.colorNameArr,"this":this,callBack:function(e){var i=e.checked;t.colorIndex!==i&&(t.colorIndex=i,t.freshLineType()),t._drawLine()}}),i}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("wireColor")+": "+this.colorNameArr[this.colorIndex]+"\n    "}},{key:"freshElecLineVisible",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshElecLineVisible",this).call(this),this.setWorkElec(this.curElecNum)}},{key:"removed",value:function(){this.h1_mc.getMScale=null,this.h2_mc.getMScale=null,this.removedCursor(this.closeBtn),this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),h.M.removeTouch(this.closeBtn,this._closeBtnTouch),this.bposter0.removeEventListener(p["default"].BINDMC_POTISON_CHANGED,this.func_bposterPositionChangedHandle),this.bposter1.removeEventListener(p["default"].BINDMC_POTISON_CHANGED,this.func_bposterPositionChangedHandle),h.M.removeTouch(this.lineG,this._lineGID),h.M.removeDrag(this.h1_mc,this.h1_mc.h_mc_dragID),h.M.removeDrag(this.h2_mc,this.h2_mc.h_mc_dragID),this.canvasRunHandleProxy=null,this.pcDot.removed(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setSelected",value:function(t){t?(this.closeBtn.alpha=this.lineFG.alpha=1,this.lineFG.visible=!0,this.show_h_mc(!0)):(this.lineFG.visible=!1,this.show_h_mc(!1))}},{key:"setPArr",value:function(t){var e=this;h.ArrayUtil.clear(this._pArr),each(t,function(t,i){e._pArr.push(i)}),this._pArr[0].mc=this.h1_mc,this._pArr[this._pArr.length-1].mc=this.h2_mc,this._drawLine()}},{key:"getPArr",value:function(){return h.ArrayUtil.copy(this._pArr)}},{key:"getPArrRect",value:function(){var t=this.getRectPoints(),e=t.lP,i=t.rP;return new h.Rectangle(e.x,e.y,i.x-e.x,i.y-e.y)}},{key:"getRectPoints",value:function(){for(var t=this._pArr,e=void 0,i=void 0,n=0;t.length>n;n++){var o=t[n].p;e?(e.x=Math.min(e.x,o.x),e.y=Math.min(e.y,o.y)):e=new h.Point(o.x,o.y),i?(i.x=Math.max(i.x,o.x),i.y=Math.max(i.y,o.y)):i=new h.Point(e.x,e.y)}return{lP:e,rP:i}}},{key:"getLocalBoundsElecs",value:function(){return[this.closeBtn]}},{key:"getElecBounds",value:function(){var t=this.getRectPoints(),e=t.lP,i=t.rP;return e=this.toGlobal(e),i=this.toGlobal(i),new h.Rectangle(e.x-10,e.y-10,i.x-e.x+20,i.y-e.y+20)}}]),e}(c["default"])},598:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:c(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(554),u=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canCreateGanYingElec=!0,i.bg=null,i.metalBarrelFront=null,i.metalBarrelBack=null,i.backSp=null,i.canHit=!1,i.type=0,i.elecInside=null,i.typeArr=[i.getLocaleStr("round_ball","圆球"),i.getLocaleStr("barrel","圆筒")],i.hitRectArr=[new l.Rectangle(-12,-182,28,30),new l.Rectangle(-32,-239,68,98)],i.cageRect=new l.Rectangle(-40,-250,85,120),i.u=0,i.mapfind=[],i.showElecMagLine=!0,i}return r(e,t),a(e,[{key:"fresh_angle",value:function(){var t=Math.abs(this.txtNum/100*45);this.left.rotation=l.M.toHu(t),this.right.rotation=-this.left.rotation}},{key:"txtNumChanged",value:function(){if(this.fresh_angle(),this._particle2&&this._particle2.particle){this._particle2.particle.maxParticles=Math.abs(this.txtNum);var t=Math.abs(this.ganNum)>Math.abs(this.elecNum)?this.ganNum:-this.elecNum;this._particle2.particle.startColor=l.M.retrieveRGBComponent(0>t?this.elecsParticlesColor.zheng:this.elecsParticlesColor.fu)}}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.freshType()}},{key:"freshType",value:function(){var t=this.elecUtil.findEAb(this,this.bposter0),e=this.u;if(t&&t.body&&t.body.Power){var i=Math.abs(t.body.Power-t.Un);0===t.Un&&1===t.linkWireType&&(i=-i),this.u=i}else this.u=0;e!==this.u&&(this.updateElecNum(),0===this.u&&this.diyChanged())}},{key:"updateElecNum",value:function(){this.elecNum=.01*this.u}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.init(0),this.initBoElecs(),this.changeType({showValue:this.typeArr[this.type]}),this.bg.addChild(this.metalBarrelFront),l.M.setSPPointXY(this.bposter0,this.elecAre.x+this.elecAre.width/2,this.elecAre.y+this.elecAre.height/2)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"diyChangHandler",value:function(t){0!==this.type&&s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"diyChangHandler",this).call(this,t)}},{key:"selfMoved",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selfMoved",this).call(this)}},{key:"canItemMoveIn",value:function(t){return!t.inCage&&"InsulatingFrame"===t.classname}},{key:"itemMoved",value:function(t){if("InsulatingFrame"!==t.classname)return 0;this.DEBUG&&this.graP&&this.graP.clear(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"itemMoved",this).call(this,t)}},{key:"checkMoveIn",value:function(t){if(t.onCage)return!1;var e=t.hitRect.clone();e.x+=t.parent.x-this.parent.x,e.y+=t.parent.y-this.parent.y;var i=this.hitRect.clone(),n=this.hitTestRectRect(e,i),o=t.moveDir.y-this.moveDir.y>0&&i.y-this.moveDir.y>e.y-t.moveDir.y,r=null===this.elecInside&&!t.onCage&&!t.inCage&&n&&o;return r?(this.elecNum+=t.elecNum,t.elecNum=0):!t.inCage&&n&&(t.onCage=!0,t.upToTop()),r}},{key:"checkMoveOut",value:function(t){var e=t.hitRect.clone();e.x+=t.parent.x-this.parent.x,e.y+=t.parent.y-this.parent.y;var i=this.cageRect.clone(),n=this.hitTestRectRect(e,i),o=this.elecInside&&this.elecInside===t&&!n;return o&&(0===t.moveDir.x&&0===t.moveDir.y||t.upToTop()),t.onCage&&!n&&(t.onCage=!1),o}},{key:"hitTestRectRect",value:function(t,e){return this.DEBUG&&(this.graP||(this.graP=new PIXI.Graphics,this.addChild(this.graP)),this.graP.lineStyle(1,16711680,1),this.graP.drawRect(t.x,t.y,t.width,t.height),this.graP.drawRect(e.x,e.y,e.width,e.height)),t.intersects(e)}},{key:"hitTest",value:function(t,e){this.DEBUG&&(this.graP||(this.graP=new PIXI.Graphics,this.addChild(this.graP)),this.graP.lineStyle(1,16711680,1),this.graP.drawCircle(e.x,e.y,e.r+5),this.graP.drawRect(t.x,t.y,t.width,t.height));var i=e.r,n=Math.abs(e.x-t.x-t.width/2),o=Math.abs(e.y-t.y-t.height/2),r=Math.min(n,t.width/2),a=Math.max(r,-t.width/2),s=Math.min(o,t.height/2),l=Math.max(s,-t.height/2);return(a-n)*(a-n)+(l-o)*(l-o)<=i*i}},{key:"changeType",value:function(t){this.type=t.showValue?this.typeArr.indexOf(t.showValue):t.checked,0===this.type?(this.metalBarrelFront.visible=!1,this.metalBarrelBack.visible=!1,this.canHit=!0,this.elecInside&&this.cancelLockItem(this.elecInside)):(this.metalBarrelFront.visible=!0,this.metalBarrelBack.visible=!0,this.canHit=!1),this.hitRect=this.getHitAreaRect(),this.hitRectSP.x=this.hitRect.x+this.hitRect.width/2,this.hitRectSP.y=this.hitRect.y+this.hitRect.height/2,this.freshParticleRect(),this.debugRefresh(),this.updateBackSpPosition(),this.selfMoved(),this.freshGlow()}},{key:"getHitAreaRect",value:function(){return this.hitRectArr[this.type]}},{key:"addCageBack",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addCageBack",this).call(this),this.cageBackCon.addChild(this.metalBarrelBack)}},{key:"checkHitRect",value:function(t){var i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"checkHitRect",this).call(this,t);return i&&!this.canHit&&"InsulatingFrame"===t.classname&&(this.itemMoved(t),t.inCage&&(i=!1)),i}},{key:"initBoElecs",value:function(){this._particle2=this.ParticleUtil.getParticle(this.ParticleUtil.particles.elecs),this.add2component(this._particle2),this._particle2._this=this,this._particle2.completeFunc=function(){var t=this._this;l.M.setSPPoint(this,t.hitRect),this.particle.spawnRect.y=165,this.particle.spawnRect.width=t.hitRect.width,this.particle.spawnRect.height=t.hitRect.height,this.particle.maxParticles=Math.abs(this.txtNum)}}},{key:"clearCharge",value:function(t){var e=this;this.elecNum=0,this.elecUtil.getEquipmentArr("MetalPlates").forEach(function(t){t.clearCharge&&e.elecUtil.checkBindingerInElec(t.bPsArr.concat(e.bPsArr))&&t.clearCharge()})}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.type=this.type,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.type=t.type||0,this.changeType({showValue:this.typeArr[this.type]})}},{key:"showGlowSP",value:function(t){if(t){this.showGlowIndex(0===this.type?0:1)}else this.hideGlow()}},{key:"getConf",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),i=this.getLocaleStr("clear_charge","清除电荷");return t.confArr.push(this.getRadio([this.getLocaleStr("type","类型"),this.type,this.typeArr,this.changeType.bind(this)]),this.getButton([i,i,this.clearCharge,this])),t}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.getLocaleStr("type","类型")+": "+this.typeArr[this.type]+"\n    "}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.type=this.type,t}},{key:"setDefaultOrigin",value:function(){this.type=0}},{key:"defaultSettingChanged",value:function(){this.changeType({showValue:this.typeArr[this.type]})}}]),e}(u["default"])},599:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:c(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(497),u=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=4;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.validNum=1,i.resArr=["1000Ω","2000Ω","5000Ω","10000Ω"],i.validNumArr=["1","2","3"],i._zhenRangeAngle=l.M.toHu(51),i.oriAngle=-i._zhenRangeAngle/2,i.unit="V",i.rotPower=0,i.curPower=0,i.vScale=1,i.angleP=i._zhenRangeAngle/2,i.MAX_RESISTANCE=3e6,i.MIN_POWER=-1,i.MAX_POWER=3,i.defaultName="V",i}return r(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[1,1],[2,1]],wire:[[[1,1],[2,0]]],res:[[1,-1],[2,-1]]}),this.freshConnect()}},{key:"freshConnect",value:function(){var t=-1!==this.bar1.Resistance;this.bar1.elecConnect=t,this.bar2.elecConnect=t}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.freshLabel("0V"),this.zhen.rotation=this.oriAngle,this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter2.bindinger.linkWireType=2,this.drawDis=52,this.bposter0.dp.setTo(-2,5),this.bposter1.dp.setTo(-15,5),this.bposter2.dp.setTo(2,5)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"overStep",value:function(){if(this.bar1.isBreak)return void(this.curPower=0);var t=this.elecUtil.getBposterWires(this.bposter0).length,e=this.elecUtil.getBposterWires(this.bposter1).length,i=this.elecUtil.getBposterWires(this.bposter2).length;t>0&&0===e&&i>0&&this.elecUtil.checkBindMCInElec([this.bposter0,this.bposter2])?(this.curPower=this.bposter2.bindinger.Un-this.bposter0.bindinger.Un,this.curPower/=5,this.vScale=5):t>0&&e>0&&0===i&&this.elecUtil.checkBindMCInElec([this.bposter0,this.bposter1])?(this.curPower=this.bposter1.bindinger.Un-this.bposter0.bindinger.Un,this.vScale=1):this.curPower=0}},{key:"break",value:function(){this.bar1.isBreak=!0,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this)}},{key:"repair",value:function(){this.bar1.isBreak=!1,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.validNum=this.validNum,t.bar1Resistance=this.bar1.Resistance,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),isNaN(t.validNum)||(this.validNum=t.validNum),isNaN(t.bar1Resistance)||(this.bar1.Resistance=t.bar1Resistance),this.bar2.Resistance=4*this.bar1.Resistance,t.isBreak&&(this.bar1.isBreak=!0),this.freshConnect()}},{key:"getShowValue",value:function(){var t=this.language.getLocaleStr("ideal");return-1===this.bar1.Resistance?t:this.bar1.Resistance+"Ω"}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.language.getLocaleStr("ideal"),o=this.getShowValue(),r=this.resArr.concat([n]);return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("small_InResistance"),canEnter:!0,enterUnit:"Ω",maxValue:3e6,minValue:1e3,showValue:o,value:r,callBack:function(e){if(e.showValue===n)t.bar1.Resistance=-1,t.bar2.Resistance=-1;else{var i=l.M.getNumStr(e.showValue);i>t.MAX_RESISTANCE?(t.bar1.Resistance=-1,t.bar2.Resistance=-1):(t.bar1.Resistance=i,t.bar2.Resistance=4*t.bar1.Resistance)}t.freshConnect(),t.diyChanged(),t.updateLabel()}},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("decimalDigits"),checked:l.ArrayUtil.getIndexFromValue(this.validNumArr,this.validNum+""),value:this.validNumArr,callBack:function(e){t.validNum=t.validNumArr[e.checked]-0,t.diyChanged(),t.updateLabel()}}),i}},{key:"getTipMess",value:function(){var t=this.getShowValue(),i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("small_InResistance")+": "+t+"\n    "}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.validNum=this.validNum,t.bar1Resistance=this.bar1.Resistance,t}},{key:"setDefaultSetting",value:function(t){this.validNum=t.validNum,this.bar1.Resistance=t.bar1Resistance,this.bar2.Resistance=4*this.bar1.Resistance,this.freshConnect()}},{key:"setDefaultOrigin",value:function(){this.validNum=2,this.bar1.Resistance=-1,this.bar2.Resistance=-1,this.freshConnect()}}]),e}(u["default"])},600:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:f(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(497),c=n(u),d=i(450),p=n(d);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=5;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resArr=["0Ω","500Ω","1000Ω","5000Ω"],i.maximumRangeArr=["300μA","300mA","300A"],i.validNumArr=["1","2","3"],i.Resistance=1e3,i.maximumRange=3e-4,i.validNum=2,i.txt=new PIXI.Text("-300μA~300μA",{font:"20px 微软雅黑",fill:10066329,align:"center"}),i.label=i.txt,i._zhenRangeAngle=h.M.toHu(51.5),i.oriAngle=0,i.unit="μA",i.rotPower=0,i.curPower=0,i.vScale=1,i.unitScale=1e6,i.angleP=i._zhenRangeAngle/300,i.MIN_POWER=-300,i.MAX_POWER=300,i.defaultName="A",i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addChild(this.txt),this.updateRangeText(),this.updateLabel(),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=60,this.bposter0.dp.setTo(12,0),this.bposter1.dp.setTo(-12,0),this.rangeChanged({showValue:"300μA"})}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.vScale=this.maximumRange*this.unitScale/300,this.curPower=t*this.unitScale/this.vScale,this.updateLabel()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.maximumRange=this.maximumRange,t.validNum=this.validNum,t.unit=this.unit,t.unitScale=this.unitScale,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),isNaN(t.maximumRange)||(this.maximumRange=t.maximumRange),isNaN(t.validNum)||(this.validNum=t.validNum),t.unit?(this.unit=t.unit,this.unitScale=t.unitScale):t.txttext&&(this.txt.text=t.txttext,this.freshUnit()),this.updateRangeText()}},{key:"updateRangeText",value:function(){var t=Math.round(this.maximumRange*this.unitScale)+this.unit;this.txt.text="-"+t+"~"+t,this.txt.x=-this.txt.width/2-this.bg.width/2+120,this.txt.y=this.bg.height/2-34+2}},{key:"freshUnit",value:function(){var t=this.txt.text;t=t.split("~")[1],h.StringUtil.contains(t,"μA")?(this.unit="μA",this.unitScale=1e6):h.StringUtil.contains(t,"mA")?(this.unit="mA",this.unitScale=1e3):(this.unit="A",this.unitScale=1)}},{key:"rangeChanged",value:function(t){var e=t.showValue,i=e.match(/\d*/g)[0]-0,n=e.match(/\D*$/g)[0];n=n.toLowerCase(),"a"===n?(this.maximumRange=i,this.unit="A",this.unitScale=1):"ma"===n?(this.maximumRange=i/1e3,this.unit="mA",this.unitScale=1e3):"μa"!==n&&"ua"!==n||(this.maximumRange=i/1e3/1e3,this.unit="μA",this.unitScale=1e6),this.updateRangeText(),this.diyChanged()}},{key:"getShowValue",value:function(){return this.Resistance>p["default"].MIN_RESISTANCE?this.Resistance+"Ω":"0Ω"}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.getShowValue();return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("inResistance"),canEnter:!0,enterUnit:"Ω",maxValue:5e5,minValue:0,showValue:n,value:this.resArr,callBack:function(e){var i=h.M.getNumStr(e.showValue);0==i&&(i=p["default"].MIN_RESISTANCE),t.Resistance=i,t.diyChanged()}},{type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("range"),canEnter:!0,enterUnit:this.unit,maxValue:1e3,minValue:0,showValue:Math.round(this.maximumRange*this.unitScale)+this.unit,value:this.maximumRangeArr,callBack:this.rangeChanged},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("decimalDigits"),checked:h.ArrayUtil.getIndexFromValue(this.validNumArr,this.validNum+""),value:this.validNumArr,callBack:function(e){t.validNum=t.validNumArr[e.checked]-0,t.diyChanged()}}),i}},{key:"selectRenderChild",value:function(){return this.updateTransform(),this.getBounds()}},{key:"getTipMess",value:function(){var t=this.getShowValue(),i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("inResistance")+": "+t+"\n    "}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.maximumRange=this.maximumRange,t.validNum=this.validNum,t.unit=this.unit,t.unitScale=this.unitScale,t}},{key:"setDefaultOrigin",value:function(){this.maximumRange=.5,this.validNum=2,this.rangeChanged({showValue:"300μA"})}},{key:"defaultSettingChanged",value:function(){this.rangeChanged({showValue:1e3*this.maximumRange+""}),this.branchChange=!0}}]),e}(c["default"])},622:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(e){n(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.baseLambda=7800}return o(t,[{key:"init",value:function(){}},{key:"destroy",value:function(){}},{key:"dispose",value:function(){}},{key:"getN",value:function(t,e){var i=t;if(550!==e){i=(n1-1)*(1-656e4/lamd1/lamd1)/(1-656e4/lamd2/lamd2)+1}return i}},{key:"getNByLamda",value:function(t){var e=1/t,i=e*e;return 1.3831+.0712*i+i*i*-.0064}},{key:"getN2ByLamdaAndN1",value:function(t,e,i){var n=i;if(660!==e){n=(i-1)*(1-656e4/t/t)/(1-656e4/e/e)+1}return n}},{key:"lamda2rgba",value:function(t){var e=void 0,i=void 0,n=void 0,o=void 0;t>=380&&440>t?(i=-(t-440)/60,n=0,o=1):t>=440&&490>t?(i=0,n=(t-440)/50,o=1):t>=490&&510>t?(i=0,n=1,o=-(t-510)/20):t>=510&&580>t?(i=(t-510)/70,n=1,o=0):t>=580&&645>t?(i=1,n=-(t-645)/65,o=0):t>=645&&781>t?(i=1,n=0,o=0):(i=0,n=0,o=0),e=t>=380&&420>t?.3+.7*(t-380)/40:t>=420&&701>t?1:t>=701&&781>t?.3+.7*(780-t)/80:0;return i=0===i?0:Math.round(255*Math.pow(i*e,.8)),n=0===n?0:Math.round(255*Math.pow(n*e,.8)),o=0===o?0:Math.round(255*Math.pow(o*e,.8)),[i,n,o,e]}},{key:"rgb2color",value:function(t,e,i){return t<<16|e<<8|i<<0}},{key:"color2rgb",value:function(t){return[t>>16&255,t>>8&255,255&t]}},{key:"colorSuperposition",value:function(t,e,i,n){var o=this.color2rgb(t),r=this.color2rgb(i),a=255-(255-o[0])*(255-r[0])/255,s=255-(255-o[1])*(255-r[1])/255,l=255-(255-o[2])*(255-r[2])/255,h=1-(1-e)*(1-n);return[this.rgb2color(a,s,l),h]}}]),t}()},642:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1);e["default"]=function(t){function e(){n(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.rect=new s.Rectangle(0,0,1,1),t.ps=[],t.particles=[],t.pool=[],t.initSpeed=-3,t.k=.1,t.q1=2,t.q2=79,t.particleFrameId="AlphaParticleScattering/particle.png",t.showTail=!0,t.tailW=1,t.tailLife=25,t.tailPool=[],t.tailColor=16777215,t.tailCon=new PIXI.Container,t.addChild(t.tailCon),t.init(),t}return r(e,t),a(e,[{key:"init",value:function(){var t=new PIXI.Graphics;this.addChild(t),t.beginFill(0,.5),t.drawRect(this.rect.x,this.rect.y,this.rect.width,this.rect.height),t.endFill(),this.mask=t}},{key:"addParticle",value:function(){var t=this.getParticle();this.addChild(t),this.particles.push(t),t.x=Math.random()*this.rect.width+this.rect.x,t.y=this.rect.y+this.rect.height,t.speed=new s.Point(0,this.initSpeed)}},{key:"update",value:function(){this.tailCon.visible=this.showTail;for(var t=this.particles.length-1;t>=0;t--){var e=this.particles[t];if(this.rect.contains(e.x,e.y)){var i=new s.Point(e.x,e.y);e.x+=e.speed.x,e.y+=e.speed.y;var n=this.getForce(e);e.speed.x+=n.x,e.speed.y+=n.y,this.addTail(i,new s.Point(e.x,e.y))}else this.removeChild(e),this.pool.push(e),this.particles.splice(t,1)}for(var o=1/this.tailLife,r=0;this.tailCon.children.length>r;r++){var a=this.tailCon.children[r];a.alpha>0?a.alpha-=o:(this.tailCon.removeChildAt(r),this.tailPool.push(a))}}},{key:"getForce",value:function(t){var e=this,i=new s.Point(0,0);return this.ps.forEach(function(n){var o=new s.Point(t.x-n.x,t.y-n.y),r=o.length,a=e.k*e.q1*e.q2,l=a/(r*r*r);i.x+=o.x*l,i.y+=o.y*l}),i}},{key:"addTail",value:function(t,e){var i=this.getTail();i.alpha=1,i.clear(),i.lineStyle(this.tailW,this.tailColor,.6),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),this.tailCon.addChild(i)}},{key:"getTail",value:function(){var t=this.tailPool.pop();return t||(t=new PIXI.Graphics),t}},{key:"getParticle",value:function(){var t=this.pool.pop();if(!t){t=new PIXI.Container;var e=PIXI.Sprite.fromFrame(this.particleFrameId);t.addChild(e),e.x=-e.width/2,e.y=-e.height/2}return t}}]),e}(PIXI.Container)},643:function(t,e,i){"use strict";e.__esModule=!0,function(t,e){var i=t.animate.MovieClip,n=t.Sprite,o=t.Texture.fromFrame,r=i.extend(function(t){i.call(this,{mode:t,duration:60,loop:!1});var e=new n(o("boom0001")),r=new n(o("boom0002")),a=new n(o("boom0003")),s=new n(o("boom0004")),l=new n(o("boom0005")),h=new n(o("boom0006")),u=new n(o("boom0007")),c=new n(o("boom0008")),d=new n(o("boom0009")),p=new n(o("boom0010")),f=new n(o("boom0011")),y=new n(o("boom0012")),m=new n(o("boom0013")),g=new n(o("boom0014")),v=new n(o("boom0015")),b=new n(o("boom0016")),_=new n(o("boom0017")),x=new n(o("boom0018")),w=new n(o("boom0019")),C=new n(o("boom0020")),P=new n(o("boom0021")),k=new n(o("boom0022")),T=new n(o("boom0023")),O=new n(o("boom0024")),M=new n(o("boom0025")),A=new n(o("boom0026")),I=new n(o("boom0027")),S=new n(o("boom0028")),E=new n(o("boom0029")),B=new n(o("boom0030")),D=new n(o("boom0031")),R=new n(o("boom0032")),N=new n(o("boom0033")),L=new n(o("boom0034")),j=new n(o("boom0035")),G=new n(o("boom0036")),F=new n(o("boom0037")),U=new n(o("boom0038")),H=new n(o("boom0039")),X=new n(o("boom0040")),V=new n(o("boom0041")),W=new n(o("boom0042")),z=new n(o("boom0043")),Y=new n(o("boom0044")),q=new n(o("boom0045")),Z=new n(o("boom0046")),$=new n(o("boom0047")),K=new n(o("boom0048")),Q=new n(o("boom0049")),J=new n(o("boom0050")),tt=new n(o("boom0051")),et=new n(o("boom0052")),it=new n(o("boom0053")),nt=new n(o("boom0054")),ot=new n(o("boom0055")),rt=new n(o("boom0056")),at=new n(o("boom0057")),st=new n(o("boom0058")),lt=new n(o("boom0059")),ht=new n(o("boom0060")).setTransform(22,250.05);this.addTimedChild(e,0,1,{0:{x:399,y:289.05}}).addTimedChild(r,1,1,{1:{x:396,y:286.05}}).addTimedChild(a,2,1,{2:{x:391,y:282.05}}).addTimedChild(s,3,1,{3:{x:383,y:274.05}}).addTimedChild(l,4,1,{4:{x:375,y:265.05}}).addTimedChild(h,5,1,{5:{x:368,y:257.05}}).addTimedChild(u,6,1,{6:{x:360,y:249.05}}).addTimedChild(c,7,1,{7:{x:352,y:242.05}}).addTimedChild(d,8,1,{8:{x:339,y:228.05}}).addTimedChild(p,9,1,{9:{x:325,y:214.05}}).addTimedChild(f,10,1,{10:{x:311,y:201.05}}).addTimedChild(y,11,1,{11:{x:300,y:189.05}}).addTimedChild(m,12,1,{12:{x:290,y:179.05}}).addTimedChild(g,13,1,{13:{x:281,y:170.05}}).addTimedChild(v,14,1,{14:{x:274,y:163.05}}).addTimedChild(b,15,1,{15:{x:268,y:157.05}}).addTimedChild(_,16,1,{16:{x:264,y:154.05}}).addTimedChild(x,17,1,{17:{x:262,y:151.05}}).addTimedChild(w,18,1,{18:{x:267,y:148.05}}).addTimedChild(C,19,1,{19:{x:260,y:139.05}}).addTimedChild(P,20,1,{20:{x:250,y:125.05}}).addTimedChild(k,21,1,{21:{x:237,y:111.05}}).addTimedChild(T,22,1,{22:{x:223,y:97.05}}).addTimedChild(O,23,1,{23:{x:208,y:82.05}}).addTimedChild(M,24,1,{24:{x:223,y:97.05}}).addTimedChild(A,25,1,{25:{x:215,y:88.05}}).addTimedChild(I,26,1,{26:{x:207,y:78.05}}).addTimedChild(S,27,1,{27:{x:200,y:70.05}}).addTimedChild(E,28,1,{28:{x:192,y:62.05}}).addTimedChild(B,29,1,{29:{x:185,y:54.05}}).addTimedChild(D,30,1,{30:{x:178,y:45.05}}).addTimedChild(R,31,1,{31:{x:170,y:37.05}}).addTimedChild(N,32,1,{32:{x:164,y:29.05}}).addTimedChild(L,33,1,{33:{x:158,y:22.05}}).addTimedChild(j,34,1,{34:{x:154,y:17.05}}).addTimedChild(G,35,1,{35:{x:158,y:22.05}}).addTimedChild(F,36,1,{36:{x:154,y:17.05}}).addTimedChild(U,37,1,{37:{x:232,y:121.05}}).addTimedChild(H,38,1,{38:{x:221,y:205.05}}).addTimedChild(X,39,1,{39:{x:209,y:205.05}}).addTimedChild(V,40,1,{40:{x:196,y:205.05}}).addTimedChild(W,41,1,{41:{x:183,y:205.05}}).addTimedChild(z,42,1,{42:{x:171,y:205.05}}).addTimedChild(Y,43,1,{43:{x:158,y:205.05}}).addTimedChild(q,44,1,{44:{x:145,y:206.05}}).addTimedChild(Z,45,1,{45:{x:132,y:206.05}}).addTimedChild($,46,1,{46:{x:121,y:206.05}}).addTimedChild(K,47,1,{47:{x:108,y:206.05}}).addTimedChild(Q,48,1,{48:{x:96,y:207.05}}).addTimedChild(J,49,1,{49:{x:83,y:211.05}}).addTimedChild(tt,50,1,{50:{x:72,y:214.05}}).addTimedChild(et,51,1,{51:{x:60,y:217.05}}).addTimedChild(it,52,1,{52:{x:47,y:221.05}}).addTimedChild(nt,53,1,{53:{x:37,y:224.05}}).addTimedChild(ot,54,1,{54:{x:26,y:227.05}}).addTimedChild(rt,55,1,{55:{x:14,y:231.05}}).addTimedChild(at,56,1,{56:{x:7,y:235.05}}).addTimedChild(st,57,1,{57:{y:239.05}}).addTimedChild(lt,58,1,{58:{x:1,y:244.05}}).addTimedChild(ht,59,1)}),a=i.extend(function(t){i.call(this,{mode:t,duration:121,loop:!1});var e=new n(o("fog0003")),r=new n(o("fog0004")),a=new n(o("fog0005")),s=new n(o("fog0006")),l=new n(o("fog0007")),h=new n(o("fog0008")),u=new n(o("fog0009")),c=new n(o("fog0010")),d=new n(o("fog0011")),p=new n(o("fog0012")),f=new n(o("fog0013")),y=new n(o("fog0014")),m=new n(o("fog0015")),g=new n(o("fog0016")),v=new n(o("fog0017")),b=new n(o("fog0018")),_=new n(o("fog0019")),x=new n(o("fog0020")),w=new n(o("fog0021")),C=new n(o("fog0022")),P=new n(o("fog0023")),k=new n(o("fog0024")),T=new n(o("fog0025")),O=new n(o("fog0026")),M=new n(o("fog0027")),A=new n(o("fog0028")),I=new n(o("fog0029")),S=new n(o("fog0030")),E=new n(o("fog0031")),B=new n(o("fog0032")),D=new n(o("fog0033")),R=new n(o("fog0034")),N=new n(o("fog0035")),L=new n(o("fog0036")),j=new n(o("fog0037")),G=new n(o("fog0038")),F=new n(o("fog0039")),U=new n(o("fog0040")),H=new n(o("fog0041")),X=new n(o("fog0042")),V=new n(o("fog0043")),W=new n(o("fog0044")),z=new n(o("fog0045")),Y=new n(o("fog0046")),q=new n(o("fog0047")),Z=new n(o("fog0048")),$=new n(o("fog0049")),K=new n(o("fog0050")),Q=new n(o("fog0051")),J=new n(o("fog0052")),tt=new n(o("fog0053")),et=new n(o("fog0054")),it=new n(o("fog0055")),nt=new n(o("fog0056")),ot=new n(o("fog0057")),rt=new n(o("fog0058")),at=new n(o("fog0059")),st=new n(o("fog0060")),lt=new n(o("fog0061")),ht=new n(o("fog0062")),ut=new n(o("fog0063")),ct=new n(o("fog0064")),dt=new n(o("fog0065")),pt=new n(o("fog0066")),ft=new n(o("fog0067")),yt=new n(o("fog0068")),mt=new n(o("fog0069")),gt=new n(o("fog0070")),vt=new n(o("fog0071")),bt=new n(o("fog0072")),_t=new n(o("fog0073")),xt=new n(o("fog0074")),wt=new n(o("fog0075")),Ct=new n(o("fog0076")),Pt=new n(o("fog0077")),kt=new n(o("fog0078")),Tt=new n(o("fog0079")),Ot=new n(o("fog0080")),Mt=new n(o("fog0081")),At=new n(o("fog0082")),It=new n(o("fog0083")),St=new n(o("fog0084")),Et=new n(o("fog0085")),Bt=new n(o("fog0086")),Dt=new n(o("fog0087")),Rt=new n(o("fog0088")),Nt=new n(o("fog0089")),Lt=new n(o("fog0090")),jt=new n(o("fog0091")),Gt=new n(o("fog0092")),Ft=new n(o("fog0093")),Ut=new n(o("fog0094")),Ht=new n(o("fog0095")),Xt=new n(o("fog0096")),Vt=new n(o("fog0097")),Wt=new n(o("fog0098")),zt=new n(o("fog0099")),Yt=new n(o("fog0100")),qt=new n(o("fog0101")),Zt=new n(o("fog0102")),$t=new n(o("fog0103")),Kt=new n(o("fog0104")),Qt=new n(o("fog0105")),Jt=new n(o("fog0106")),te=new n(o("fog0107")),ee=new n(o("fog0108")),ie=new n(o("fog0109")),ne=new n(o("fog0110")),oe=new n(o("fog0111")),re=new n(o("fog0112")),ae=new n(o("fog0113")),se=new n(o("fog0114")),le=new n(o("fog0115")),he=new n(o("fog0116")),ue=new n(o("fog0117")),ce=new n(o("fog0118")),de=new n(o("fog0119")),pe=new n(o("fog0120"));this.addTimedChild(e,2,1,{2:{x:312,y:213}}).addTimedChild(r,3,1,{3:{x:308,y:209}}).addTimedChild(a,4,1,{4:{x:305,y:205}}).addTimedChild(s,5,1,{5:{x:302,y:201}}).addTimedChild(l,6,1,{6:{x:297,y:198}}).addTimedChild(h,7,1,{7:{x:291,y:195}}).addTimedChild(u,8,1,{8:{x:287,y:192}}).addTimedChild(c,9,1,{9:{x:283,y:188}}).addTimedChild(d,10,1,{10:{x:279,y:184}}).addTimedChild(p,11,1,{11:{x:275,y:182}}).addTimedChild(f,12,1,{12:{x:273,y:177}}).addTimedChild(y,13,1,{13:{x:271,y:175}}).addTimedChild(m,14,1,{14:{x:269,y:173}}).addTimedChild(g,15,1,{15:{x:268,y:171}}).addTimedChild(v,16,1,{16:{x:266,y:169}}).addTimedChild(b,17,1,{17:{x:266,y:167}}).addTimedChild(_,18,1,{18:{x:271,y:161}}).addTimedChild(x,19,1,{19:{x:269,y:155}}).addTimedChild(w,20,1,{20:{x:268,y:144}}).addTimedChild(C,21,1,{21:{x:266,y:140}}).addTimedChild(P,22,1,{22:{x:265,y:132}}).addTimedChild(k,23,1,{23:{x:265,y:129}}).addTimedChild(T,24,1,{24:{x:263,y:122}}).addTimedChild(O,25,1,{25:{x:259,y:116}}).addTimedChild(M,26,1,{26:{x:257,y:113}}).addTimedChild(A,27,1,{27:{x:251,y:111}}).addTimedChild(I,28,1,{28:{x:249,y:105}}).addTimedChild(S,29,1,{29:{x:246,y:103}}).addTimedChild(E,30,1,{30:{x:244,y:102}}).addTimedChild(B,31,1,{31:{x:242,y:97}}).addTimedChild(D,32,1,{32:{x:239,y:96}}).addTimedChild(R,33,1,{33:{x:233,y:91}}).addTimedChild(N,34,1,{34:{x:232,y:90}}).addTimedChild(L,35,1,{35:{x:228,y:88}}).addTimedChild(j,36,1,{36:{x:226,y:86}}).addTimedChild(G,37,1,{37:{x:224,y:84}}).addTimedChild(F,38,1,{38:{x:219,y:81}}).addTimedChild(U,39,1,{39:{x:216,y:79}}).addTimedChild(H,40,1,{40:{x:213,y:76}}).addTimedChild(X,41,1,{41:{x:208,y:74}}).addTimedChild(V,42,1,{42:{x:206,y:72}}).addTimedChild(W,43,1,{43:{x:205,y:70}}).addTimedChild(z,44,1,{44:{x:203,y:69}}).addTimedChild(Y,45,1,{45:{x:203,y:67}}).addTimedChild(q,46,1,{46:{x:202,y:65}}).addTimedChild(Z,47,1,{47:{x:201,y:64}}).addTimedChild($,48,1,{48:{x:200,y:63}}).addTimedChild(K,49,1,{49:{x:199,y:62}}).addTimedChild(Q,50,1,{50:{x:199,y:61}}).addTimedChild(J,51,1,{51:{x:199,y:60}}).addTimedChild(tt,52,1,{52:{x:198,y:59}}).addTimedChild(et,53,1,{53:{x:198,y:58}}).addTimedChild(it,54,1,{54:{x:197,y:57}}).addTimedChild(nt,55,1,{55:{x:197,y:56}}).addTimedChild(ot,56,1,{56:{x:197,y:55}}).addTimedChild(rt,57,1,{57:{x:197,y:54}}).addTimedChild(at,58,1,{58:{x:197,y:53}}).addTimedChild(st,59,1,{59:{x:198,y:52}}).addTimedChild(lt,60,1,{60:{x:198,y:51}}).addTimedChild(ht,61,1,{61:{x:197,y:51}}).addTimedChild(ut,62,1,{62:{x:197,y:50}}).addTimedChild(ct,63,1,{63:{x:197,y:50}}).addTimedChild(dt,64,1,{64:{x:196,y:49}}).addTimedChild(pt,65,1,{65:{x:196,y:48}}).addTimedChild(ft,66,1,{66:{x:196,y:48}}).addTimedChild(yt,67,1,{67:{x:196,y:47}}).addTimedChild(mt,68,1,{68:{x:196,y:46}}).addTimedChild(gt,69,1,{69:{x:197,y:46}}).addTimedChild(vt,70,1,{70:{x:197,y:45}}).addTimedChild(bt,71,1,{71:{x:196,y:45}}).addTimedChild(_t,72,1,{72:{x:195,y:44}}).addTimedChild(xt,73,1,{73:{x:195,y:43}}).addTimedChild(wt,74,1,{74:{x:194,y:44}}).addTimedChild(Ct,75,1,{75:{x:194,y:43}}).addTimedChild(Pt,76,1,{76:{x:193,y:43}}).addTimedChild(kt,77,1,{77:{x:193,y:43}}).addTimedChild(Tt,78,1,{78:{x:193,y:42}}).addTimedChild(Ot,79,1,{79:{x:192,y:42}}).addTimedChild(Mt,80,1,{80:{x:192,y:42}}).addTimedChild(At,81,1,{81:{x:192,y:41}}).addTimedChild(It,82,1,{82:{x:192,y:41}}).addTimedChild(St,83,1,{83:{x:192,y:41}}).addTimedChild(Et,84,1,{84:{x:192,y:41}}).addTimedChild(Bt,85,1,{85:{x:192,y:40}}).addTimedChild(Dt,86,1,{86:{x:192,y:40}}).addTimedChild(Rt,87,1,{87:{x:192,y:40}}).addTimedChild(Nt,88,1,{88:{x:192,y:40}}).addTimedChild(Lt,89,1,{89:{x:192,y:39}}).addTimedChild(jt,90,1,{90:{x:193,y:39}}).addTimedChild(Gt,91,1,{91:{x:193,y:39}}).addTimedChild(Ft,92,1,{92:{x:193,y:38}}).addTimedChild(Ut,93,1,{93:{x:194,y:38}}).addTimedChild(Ht,94,1,{94:{x:194,y:38}}).addTimedChild(Xt,95,1,{95:{x:195,y:38}}).addTimedChild(Vt,96,1,{96:{x:195,y:38}}).addTimedChild(Wt,97,1,{97:{x:196,y:37}}).addTimedChild(zt,98,1,{98:{x:196,y:37}}).addTimedChild(Yt,99,1,{99:{x:197,y:38}}).addTimedChild(qt,100,1,{100:{x:198,y:38}}).addTimedChild(Zt,101,1,{101:{x:198,y:38}}).addTimedChild($t,102,1,{102:{x:199,y:38}}).addTimedChild(Kt,103,1,{103:{x:200,y:38}}).addTimedChild(Qt,104,1,{104:{x:200,y:38}}).addTimedChild(Jt,105,1,{105:{x:200,y:38}}).addTimedChild(te,106,1,{106:{x:199,y:39}}).addTimedChild(ee,107,1,{107:{x:199,y:39}}).addTimedChild(ie,108,1,{108:{x:199,y:42}}).addTimedChild(ne,109,1,{109:{x:199,y:42}}).addTimedChild(oe,110,1,{110:{x:199,y:45}}).addTimedChild(re,111,1,{111:{x:199,y:44}}).addTimedChild(ae,112,1,{112:{x:199,y:44}}).addTimedChild(se,113,1,{113:{x:199,y:44}}).addTimedChild(le,114,1,{114:{x:199,y:45}}).addTimedChild(he,115,1,{115:{x:200,y:49}}).addTimedChild(ue,116,1,{116:{x:200,y:58}}).addTimedChild(ce,117,1,{117:{x:200,y:59}}).addTimedChild(de,118,1,{118:{x:201,y:61}}).addTimedChild(pe,119,1,{119:{x:201,y:62}})});e.AtomicBomb=i.extend(function(){i.call(this,{duration:121,framerate:24});var t=new a(i.SYNCHED).setTransform(-621,-417,3.27,3.27),e=new r(i.SYNCHED);this.addTimedChild(t).addTimedChild(e,0,60)}),e.AtomicBomb.assets={AtomicBomb_atlas_1:"assets/animate/AtomicBomb_atlas_1.json",AtomicBomb_atlas_2:"assets/animate/AtomicBomb_atlas_2.json"}}(PIXI,n=n||{});var n;e["default"]=n.AtomicBomb},644:function(t,e,i){"use strict";e.__esModule=!0,function(t,e){var i=t.animate.MovieClip,n=t.Container,o=t.Sprite,r=t.Texture.fromFrame,a=t.Graphics,s=t.animate.ShapesCache,l=i.extend(function(t){i.call(this,{mode:t,duration:80,loop:!1}),this.addTimedChild((new a).drawCommands(s.BombImplosion[0]))}),h=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic3=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var u=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new h(i.SYNCHED).setMask(n),r=(new e.Graphic3).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),c=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic6=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var d=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new c(i.SYNCHED).setMask(n),r=(new e.Graphic6).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),p=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic9=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var f=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new p(i.SYNCHED).setMask(n),r=(new e.Graphic9).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),y=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic12=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var m=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new y(i.SYNCHED).setMask(n),r=(new e.Graphic12).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),g=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic15=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var v=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new g(i.SYNCHED).setMask(n),r=(new e.Graphic15).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),b=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic18=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var _=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new b(i.SYNCHED).setMask(n),r=(new e.Graphic18).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),x=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic21=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var w=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new x(i.SYNCHED).setMask(n),r=(new e.Graphic21).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),C=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic24=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var P=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new C(i.SYNCHED).setMask(n),r=(new e.Graphic24).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),k=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic27=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var T=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new k(i.SYNCHED).setMask(n),r=(new e.Graphic27).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),O=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic30=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var M=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new O(i.SYNCHED).setMask(n),r=(new e.Graphic30).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),A=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic33=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var I=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new A(i.SYNCHED).setMask(n),r=(new e.Graphic33).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),S=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic36=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var E=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new S(i.SYNCHED).setMask(n),r=(new e.Graphic36).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),B=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic39=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var D=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new B(i.SYNCHED).setMask(n),r=(new e.Graphic39).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),R=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic42=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var N=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new R(i.SYNCHED).setMask(n),r=(new e.Graphic42).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),L=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic45=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var j=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new L(i.SYNCHED).setMask(n),r=(new e.Graphic45).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),G=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic48=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var F=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new G(i.SYNCHED).setMask(n),r=(new e.Graphic48).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),U=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic51=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var H=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new U(i.SYNCHED).setMask(n),r=(new e.Graphic51).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),X=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic54=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var V=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new X(i.SYNCHED).setMask(n),r=(new e.Graphic54).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),W=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic57=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var z=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new W(i.SYNCHED).setMask(n),r=(new e.Graphic57).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),Y=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic60=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var q=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new Y(i.SYNCHED).setMask(n),r=(new e.Graphic60).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),Z=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic63=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var $=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new Z(i.SYNCHED).setMask(n),r=(new e.Graphic63).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),K=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic66=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var Q=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new K(i.SYNCHED).setMask(n),r=(new e.Graphic66).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),J=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic69=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var tt=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new J(i.SYNCHED).setMask(n),r=(new e.Graphic69).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),et=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1}),this.addTimedChild(new o(r("Bitmap 1")).setTransform(-16,-3))});e.Graphic72=n.extend(function(){n.call(this),this.addChild(new o(r("Bitmap 1")).setTransform(-16,-3))});var it=i.extend(function(t){i.call(this,{mode:t,duration:20,loop:!1});var n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[1]).setRenderable(!1),o=new et(i.SYNCHED).setMask(n),r=(new e.Graphic72).setTransform(9.2,.2);this.addTimedChild(n).addTimedChild(n).addTimedChild(o,0,19,{0:{x:-22.4,y:0},1:{x:-20.75},2:{x:-19.05},3:{x:-17.4,y:.05},4:{x:-15.75},5:{x:-14.1},6:{x:-12.4},7:{x:-10.75},8:{x:-9.1,y:.1},9:{x:-7.45},10:{x:-5.75},11:{x:-4.1},12:{x:-2.45,y:.15},13:{x:-.8},14:{x:.9},15:{x:2.55},16:{x:4.2},17:{x:5.85,y:.2},18:{x:7.55}}).addTimedChild(r,19,1)}),nt=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1});var e=(new a).drawCommands(s.BombImplosion[2]),n=(new a).drawCommands(s.BombImplosion[3]),o=(new a).drawCommands(s.BombImplosion[2]),r=(new a).drawCommands(s.BombImplosion[3]),l=(new a).drawCommands(s.BombImplosion[2]),h=(new a).drawCommands(s.BombImplosion[3]),u=(new a).drawCommands(s.BombImplosion[2]),c=(new a).drawCommands(s.BombImplosion[3]),d=(new a).drawCommands(s.BombImplosion[2]).setTransform(-.1,.05,1.204,.919);this.addTimedChild(e,0,1).addTimedChild(n,1,1).addTimedChild(o,2,4,{2:{x:-.1,y:.05,sx:1.204,sy:.919},3:{y:0,sx:1.03,sy:1.003},4:{sx:.898,sy:1.217},5:{x:0,sx:1,sy:1}}).addTimedChild(r,6,1).addTimedChild(l,7,5,{7:{x:-.1,y:.05,sx:1.204,sy:.919},9:{y:0,sx:1.03,sy:1.003},10:{sx:.898,sy:1.217},11:{x:0,sx:1,sy:1}}).addTimedChild(h,12,1).addTimedChild(u,13,4,{13:{x:-.1,y:.05,sx:1.204,sy:.919},14:{y:0,sx:1.03,sy:1.003},15:{sx:.898,sy:1.217},16:{x:0,sx:1,sy:1}}).addTimedChild(c,17,1).addTimedChild(d,18,1)}),ot=i.extend(function(t){i.call(this,{mode:t,duration:19,loop:!1});var e=(new a).drawCommands(s.BombImplosion[2]),n=(new a).drawCommands(s.BombImplosion[3]),o=(new a).drawCommands(s.BombImplosion[2]),r=(new a).drawCommands(s.BombImplosion[3]),l=(new a).drawCommands(s.BombImplosion[2]),h=(new a).drawCommands(s.BombImplosion[3]),u=(new a).drawCommands(s.BombImplosion[2]),c=(new a).drawCommands(s.BombImplosion[3]),d=(new a).drawCommands(s.BombImplosion[2]).setTransform(-.1,.05,1.204,.919);this.addTimedChild(e,0,1).addTimedChild(n,1,1).addTimedChild(o,2,4,{2:{x:-.1,y:.05,sx:1.204,sy:.919},3:{y:0,sx:1.03,sy:1.003},4:{sx:.898,sy:1.217},5:{x:0,sx:1,sy:1}}).addTimedChild(r,6,1).addTimedChild(l,7,5,{7:{x:-.1,y:.05,sx:1.204,sy:.919},9:{y:0,sx:1.03,sy:1.003},10:{sx:.898,sy:1.217},11:{x:0,sx:1,sy:1}}).addTimedChild(h,12,1).addTimedChild(u,13,4,{13:{x:-.1,y:.05,sx:1.204,sy:.919},14:{y:0,sx:1.03,sy:1.003},15:{sx:.898,sy:1.217},16:{x:0,sx:1,sy:1}}).addTimedChild(c,17,1).addTimedChild(d,18,1)}),rt=i.extend(function(t){i.call(this,{mode:t,duration:80,loop:!1});var e=new o(r("kaiguan")),n=new nt(i.SYNCHED),a=new E(i.SYNCHED),s=new I(i.SYNCHED),l=new M(i.SYNCHED),h=new T(i.SYNCHED),c=new P(i.SYNCHED),p=new w(i.SYNCHED),y=new _(i.SYNCHED),g=new v(i.SYNCHED),b=new m(i.SYNCHED),x=new f(i.SYNCHED),C=new d(i.SYNCHED),k=new u(i.SYNCHED),O=new ot(i.SYNCHED),A=new it(i.SYNCHED).setTransform(-78.8,.55),S=new tt(i.SYNCHED).setTransform(-66,-49.25,1,1,.501),B=new Q(i.SYNCHED).setTransform(-29.35,-86.45,1,1,1.081),R=new $(i.SYNCHED).setTransform(20.5,-99.75,1,1,0,4.702,1.581),L=new q(i.SYNCHED).setTransform(71.25,-86.1,1,1,0,4.174,2.109),G=new z(i.SYNCHED).setTransform(107.8,-49.55,1,1,0,3.663,2.62),U=new V(i.SYNCHED).setTransform(120.35,.35,1,1,-3.122),X=new H(i.SYNCHED).setTransform(107,50.25,1,1,-2.556),W=new F(i.SYNCHED).setTransform(70.35,86.6,1,1,-2.042),Y=new j(i.SYNCHED).setTransform(20.45,99.8,1,1,-1.561),Z=new N(i.SYNCHED).setTransform(-28.55,86.9,1,1,-1.007),K=new D(i.SYNCHED).setTransform(-65.25,50.05,1,1,-.559);this.addTimedChild(e,0,80,{0:{x:-132.5,y:-112.5}}).addTimedChild(n,1,19,{1:{x:-106.8,y:13.4,sx:1,sy:.757,kx:0,ky:0,r:0},2:{x:-105.849,y:12.041,sx:.963,sy:.75,r:-.989},3:{x:-104.83,y:10.631,sx:.927,sy:.745,r:-1.973},4:{x:-103.84,y:9.277,sx:.892,sy:.74,r:-2.962},5:{x:-102.841,y:7.85,sx:.856,sy:.734,kx:3.947,ky:2.336,r:0},6:{x:-101.917,y:6.539,sx:.821,sy:.73,kx:0,ky:0,r:1.352},7:{x:-100.867,y:5.196,sx:.785,sy:.724,r:.363},8:{x:-99.857,y:3.864,sx:.749,sy:.718,r:-.625},9:{x:-98.85,y:2.35,sx:.714,sy:.714,r:-1.611},10:{x:-97.575,y:2.251,sx:.685,sy:.685,r:-2.708},11:{x:-96.214,y:2.227,sx:.657,sy:.657,kx:3.802,ky:2.481,r:0},12:{x:-94.801,y:2.102,sx:.63,sy:.63,kx:0,ky:0,r:1.387},13:{x:-93.452,y:1.878,sx:.601,sy:.601,r:.289},14:{x:-92.145,y:1.713,sx:.573,sy:.573,r:-.805},15:{x:-90.943,y:1.687,sx:.545,sy:.545,r:-1.899},16:{x:-89.648,y:1.578,sx:.518,sy:.518,r:-2.997},17:{x:-88.284,y:1.513,sx:.489,sy:.489,kx:4.092,ky:2.192,r:0},18:{x:-86.817,y:1.35,sx:.461,sy:.461,kx:0,ky:0,r:1.098},19:{x:-85.55,y:1.2,sx:.434,sy:.434,r:0}}).addTimedChild(a,20,20,{20:{x:-78.8,y:.55}}).addTimedChild(s,20,20,{20:{x:-66,y:-49.25,r:.501}}).addTimedChild(l,20,20,{20:{x:-29.35,y:-86.45,r:1.081}}).addTimedChild(h,20,20,{20:{x:20.5,y:-99.75,kx:4.702,ky:1.581}}).addTimedChild(c,20,20,{20:{x:71.25,y:-86.1,kx:4.174,ky:2.109}}).addTimedChild(p,20,20,{20:{x:107.8,y:-49.55,kx:3.663,ky:2.62}}).addTimedChild(y,20,20,{20:{x:120.35,y:.35,r:-3.122}}).addTimedChild(g,20,20,{20:{x:107,y:50.25,r:-2.556}}).addTimedChild(b,20,20,{20:{x:70.35,y:86.6,r:-2.042}}).addTimedChild(x,20,20,{20:{x:20.45,y:99.8,r:-1.561}}).addTimedChild(C,20,20,{20:{x:-28.55,y:86.9,r:-1.007}}).addTimedChild(k,20,20,{20:{x:-65.25,y:50.05,r:-.559}}).addTimedChild(O,41,19,{41:{x:-106.8,y:13.4,sx:1,sy:.757,kx:0,ky:0,r:0},42:{x:-105.849,y:12.041,sx:.963,sy:.75,r:-.989},43:{x:-104.83,y:10.631,sx:.927,sy:.745,r:-1.973},44:{x:-103.84,y:9.277,sx:.892,sy:.74,r:-2.962},45:{x:-102.841,y:7.85,sx:.856,sy:.734,kx:3.947,ky:2.336,r:0},46:{x:-101.917,y:6.539,sx:.821,sy:.73,kx:0,ky:0,r:1.352},47:{x:-100.867,y:5.196,sx:.785,sy:.724,r:.363},48:{x:-99.857,y:3.864,sx:.749,sy:.718,r:-.625},49:{x:-98.85,y:2.35,sx:.714,sy:.714,r:-1.611},50:{x:-97.575,y:2.251,sx:.685,sy:.685,r:-2.708},51:{x:-96.214,y:2.227,sx:.657,sy:.657,kx:3.802,ky:2.481,r:0},52:{x:-94.801,y:2.102,sx:.63,sy:.63,kx:0,ky:0,r:1.387},53:{x:-93.452,y:1.878,sx:.601,sy:.601,r:.289},54:{x:-92.145,y:1.713,sx:.573,sy:.573,r:-.805},55:{x:-90.943,y:1.687,sx:.545,sy:.545,r:-1.899},56:{x:-89.648,y:1.578,sx:.518,sy:.518,r:-2.997},57:{x:-88.284,y:1.513,sx:.489,sy:.489,kx:4.092,ky:2.192,r:0},58:{x:-86.817,y:1.35,sx:.461,sy:.461,kx:0,ky:0,r:1.098},59:{x:-85.55,y:1.2,sx:.434,sy:.434,r:0}}).addTimedChild(A,60,20).addTimedChild(S,60,20).addTimedChild(B,60,20).addTimedChild(R,60,20).addTimedChild(L,60,20).addTimedChild(G,60,20).addTimedChild(U,60,20).addTimedChild(X,60,20).addTimedChild(W,60,20).addTimedChild(Y,60,20).addTimedChild(Z,60,20).addTimedChild(K,60,20)}),at=i.extend(function(t){i.call(this,{mode:t,duration:32,loop:!1}),this.addTimedChild((new a).drawCommands(s.BombImplosion[4]))}),st=i.extend(function(t){i.call(this,{mode:t,duration:32,loop:!1}),this.addTimedChild((new a).drawCommands(s.BombImplosion[4]))}),lt=i.extend(function(t){i.call(this,{mode:t,duration:32,loop:!1}),this.addTimedChild((new a).drawCommands(s.BombImplosion[4]))}),ht=i.extend(function(t){i.call(this,{mode:t,duration:32,loop:!1}),this.addTimedChild((new a).drawCommands(s.BombImplosion[4]))}),ut=i.extend(function(t){i.call(this,{mode:t,duration:32,loop:!1}),this.addTimedChild((new a).drawCommands(s.BombImplosion[4]))}),ct=i.extend(function(t){i.call(this,{mode:t,duration:33,loop:!1}),this.addTimedChild(new o(r("lizi")).setTransform(-6,-6))}),dt=i.extend(function(t){i.call(this,{mode:t,duration:55,loop:!1}),this.addTimedChild(new o(r("lizi")).setTransform(-6,-6))}),pt=i.extend(function(t){i.call(this,{mode:t,duration:55,loop:!1});var e=new dt(i.SYNCHED),n=new ct(i.SYNCHED),o=(new a).drawCommands(s.BombImplosion[5]),r=(new a).drawCommands(s.BombImplosion[6]),l=(new a).drawCommands(s.BombImplosion[7]),h=(new a).drawCommands(s.BombImplosion[8]),u=(new a).drawCommands(s.BombImplosion[9]),c=(new a).drawCommands(s.BombImplosion[10]),d=(new a).drawCommands(s.BombImplosion[11]),p=(new a).drawCommands(s.BombImplosion[12]),f=(new a).drawCommands(s.BombImplosion[13]),y=(new a).drawCommands(s.BombImplosion[14]),m=(new a).drawCommands(s.BombImplosion[15]),g=(new a).drawCommands(s.BombImplosion[16]),v=(new a).drawCommands(s.BombImplosion[17]),b=(new a).drawCommands(s.BombImplosion[18]),_=(new a).drawCommands(s.BombImplosion[19]),x=(new a).drawCommands(s.BombImplosion[20]),w=(new a).drawCommands(s.BombImplosion[21]),C=(new a).drawCommands(s.BombImplosion[22]),P=(new a).drawCommands(s.BombImplosion[23]),k=(new a).drawCommands(s.BombImplosion[24]),T=(new a).drawCommands(s.BombImplosion[25]),O=(new a).drawCommands(s.BombImplosion[26]),M=(new a).drawCommands(s.BombImplosion[27]),A=(new a).drawCommands(s.BombImplosion[28]),I=(new a).drawCommands(s.BombImplosion[29]),S=(new a).drawCommands(s.BombImplosion[30]),E=(new a).drawCommands(s.BombImplosion[31]),B=(new a).drawCommands(s.BombImplosion[32]),D=(new a).drawCommands(s.BombImplosion[33]);this.addTimedChild(e,0,55,{0:{x:0,y:0,sx:1,sy:1},22:{sx:.583,sy:.583},23:{x:-.2,y:.05,sx:.582,sy:.582},24:{x:-.35,y:.15,sx:.58,sy:.58},25:{x:-.55,y:.2,sx:.579,sy:.579},26:{x:-.7,y:.3,sx:.577,sy:.577},27:{x:-.9,y:.35,sx:.576,sy:.576},28:{x:-1.05,y:.45,sx:.574,sy:.574},29:{x:-1.25,y:.5,sx:.573,sy:.573},30:{x:-1.45,y:.55,sx:.571,sy:.571},31:{x:-1.6,y:.65,sx:.57,sy:.57},32:{x:-1.8,y:.7,sx:.568,sy:.568},33:{x:-1.95,y:.8,sx:.567,sy:.567},34:{x:-2.15,y:.85,sx:.565,sy:.565},35:{x:-2.3,y:.95,sx:.564,sy:.564},36:{x:-2.5,y:1,sx:.562,sy:.562},37:{x:-2.7,y:1.05,sx:.561,sy:.561},38:{x:-2.85,y:1.15,sx:.56,sy:.56},39:{x:-3.05,y:1.2,sx:.558,sy:.558},40:{x:-3.2,y:1.3,sx:.557,sy:.557},41:{x:-3.4,y:1.35,sx:.555,sy:.555},42:{x:-3.55,y:1.45,sx:.554,sy:.554},43:{x:-3.75,y:1.5,sx:.552,sy:.552},44:{x:-3.95,y:1.55,sx:.551,sy:.551},45:{x:-4.1,y:1.65,sx:.549,sy:.549},46:{x:-4.3,y:1.7,sx:.548,sy:.548},47:{x:-4.45,y:1.8,sx:.546,sy:.546},48:{x:-4.65,y:1.85,sx:.545,sy:.545},49:{x:-4.8,y:1.95,sx:.543,sy:.543},50:{x:-5,y:2,sx:.542,sy:.542}}).addTimedChild(n,22,33,{22:{x:0,y:0,sx:.583,sy:.583},23:{x:.2,y:.05,sx:.582,sy:.582},24:{x:.4,y:.1,sx:.58,sy:.58},25:{x:.6,sx:.579,sy:.579},26:{x:.8,y:.15,sx:.577,sy:.577},27:{x:1,y:.2,sx:.576,sy:.576},28:{x:1.2,y:.25,sx:.574,sy:.574},29:{x:1.4,sx:.573,sy:.573},30:{x:1.55,y:.3,sx:.571,sy:.571},31:{x:1.75,y:.35,sx:.57,sy:.57},32:{x:1.95,y:.4,sx:.568,sy:.568},33:{x:2.15,sx:.567,sy:.567},34:{x:2.35,y:.45,sx:.565,sy:.565},35:{x:2.55,y:.5,sx:.564,sy:.564},36:{x:2.75,y:.55,sx:.562,sy:.562},37:{x:2.95,sx:.561,sy:.561},38:{x:3.15,y:.6,sx:.559,sy:.559},39:{x:3.35,y:.65,sx:.558,sy:.558},40:{x:3.55,y:.7,sx:.557,sy:.557},41:{x:3.75,sx:.555,sy:.555},42:{x:3.95,y:.75,sx:.554,sy:.554},43:{x:4.15,y:.8,sx:.552,sy:.552},44:{x:4.3,y:.85,sx:.551,sy:.551},45:{x:4.5,sx:.549,sy:.549},46:{x:4.7,y:.9,sx:.548,sy:.548},47:{x:4.9,y:.95,sx:.546,sy:.546},48:{x:5.1,y:1,sx:.545,sy:.545},49:{x:5.3,sx:.543,sy:.543},50:{x:5.5,sx:.542,sy:.542}}).addTimedChild(o,22,1).addTimedChild(r,23,1).addTimedChild(l,24,1).addTimedChild(h,25,1).addTimedChild(u,26,1).addTimedChild(c,27,1).addTimedChild(d,28,1).addTimedChild(p,29,1).addTimedChild(f,30,1).addTimedChild(y,31,1).addTimedChild(m,32,1).addTimedChild(g,33,1).addTimedChild(v,34,1).addTimedChild(b,35,1).addTimedChild(_,36,1).addTimedChild(x,37,1).addTimedChild(w,38,1).addTimedChild(C,39,1).addTimedChild(P,40,1).addTimedChild(k,41,1).addTimedChild(T,42,1).addTimedChild(O,43,1).addTimedChild(M,44,1).addTimedChild(A,45,1).addTimedChild(I,46,1).addTimedChild(S,47,1).addTimedChild(E,48,1).addTimedChild(B,49,1).addTimedChild(D,50,5)}),ft=i.extend(function(t){i.call(this,{mode:t,duration:33,loop:!1}),this.addTimedChild(new o(r("lizi")).setTransform(-6,-6))}),yt=i.extend(function(t){i.call(this,{mode:t,duration:55,loop:!1}),this.addTimedChild(new o(r("lizi")).setTransform(-6,-6))}),mt=i.extend(function(t){i.call(this,{mode:t,duration:55,loop:!1});var e=new yt(i.SYNCHED),n=new ft(i.SYNCHED),o=(new a).drawCommands(s.BombImplosion[5]),r=(new a).drawCommands(s.BombImplosion[6]),l=(new a).drawCommands(s.BombImplosion[7]),h=(new a).drawCommands(s.BombImplosion[8]),u=(new a).drawCommands(s.BombImplosion[9]),c=(new a).drawCommands(s.BombImplosion[10]),d=(new a).drawCommands(s.BombImplosion[11]),p=(new a).drawCommands(s.BombImplosion[12]),f=(new a).drawCommands(s.BombImplosion[13]),y=(new a).drawCommands(s.BombImplosion[14]),m=(new a).drawCommands(s.BombImplosion[15]),g=(new a).drawCommands(s.BombImplosion[16]),v=(new a).drawCommands(s.BombImplosion[17]),b=(new a).drawCommands(s.BombImplosion[18]),_=(new a).drawCommands(s.BombImplosion[19]),x=(new a).drawCommands(s.BombImplosion[20]),w=(new a).drawCommands(s.BombImplosion[21]),C=(new a).drawCommands(s.BombImplosion[22]),P=(new a).drawCommands(s.BombImplosion[23]),k=(new a).drawCommands(s.BombImplosion[24]),T=(new a).drawCommands(s.BombImplosion[25]),O=(new a).drawCommands(s.BombImplosion[26]),M=(new a).drawCommands(s.BombImplosion[27]),A=(new a).drawCommands(s.BombImplosion[28]),I=(new a).drawCommands(s.BombImplosion[29]),S=(new a).drawCommands(s.BombImplosion[30]),E=(new a).drawCommands(s.BombImplosion[31]),B=(new a).drawCommands(s.BombImplosion[32]),D=(new a).drawCommands(s.BombImplosion[33]);this.addTimedChild(e,0,55,{0:{x:0,y:0,sx:1,sy:1},22:{sx:.583,sy:.583},23:{x:-.2,y:.05,sx:.582,sy:.582},24:{x:-.35,y:.15,sx:.58,sy:.58},25:{x:-.55,y:.2,sx:.579,sy:.579},26:{x:-.7,y:.3,sx:.577,sy:.577},27:{x:-.9,y:.35,sx:.576,sy:.576},28:{x:-1.05,y:.45,sx:.574,sy:.574},29:{x:-1.25,y:.5,sx:.573,sy:.573},30:{x:-1.45,y:.55,sx:.571,sy:.571},31:{x:-1.6,y:.65,sx:.57,sy:.57},32:{x:-1.8,y:.7,sx:.568,sy:.568},33:{x:-1.95,y:.8,sx:.567,sy:.567},34:{x:-2.15,y:.85,sx:.565,sy:.565},35:{x:-2.3,y:.95,sx:.564,sy:.564},36:{x:-2.5,y:1,sx:.562,sy:.562},37:{x:-2.7,y:1.05,sx:.561,sy:.561},38:{x:-2.85,y:1.15,sx:.56,sy:.56},39:{x:-3.05,y:1.2,sx:.558,sy:.558},40:{x:-3.2,y:1.3,sx:.557,sy:.557},41:{x:-3.4,y:1.35,sx:.555,sy:.555},42:{x:-3.55,y:1.45,sx:.554,sy:.554},43:{x:-3.75,y:1.5,sx:.552,sy:.552},44:{x:-3.95,y:1.55,sx:.551,sy:.551},45:{x:-4.1,y:1.65,sx:.549,sy:.549},46:{x:-4.3,y:1.7,sx:.548,sy:.548},47:{x:-4.45,y:1.8,sx:.546,sy:.546},48:{x:-4.65,y:1.85,sx:.545,sy:.545},49:{x:-4.8,y:1.95,sx:.543,sy:.543},50:{x:-5,y:2,sx:.542,sy:.542}}).addTimedChild(n,22,33,{22:{x:0,y:0,sx:.583,sy:.583},23:{x:.2,y:.05,sx:.582,sy:.582},24:{x:.4,y:.1,sx:.58,sy:.58},25:{x:.6,sx:.579,sy:.579},26:{x:.8,y:.15,sx:.577,sy:.577},27:{x:1,y:.2,sx:.576,sy:.576},28:{x:1.2,y:.25,sx:.574,sy:.574},29:{x:1.4,sx:.573,sy:.573},30:{x:1.55,y:.3,sx:.571,sy:.571},31:{x:1.75,y:.35,sx:.57,sy:.57},32:{x:1.95,y:.4,sx:.568,sy:.568},33:{x:2.15,sx:.567,sy:.567},34:{x:2.35,y:.45,sx:.565,sy:.565},35:{x:2.55,y:.5,sx:.564,sy:.564},36:{x:2.75,y:.55,sx:.562,sy:.562},37:{x:2.95,sx:.561,sy:.561},38:{x:3.15,y:.6,sx:.559,sy:.559},39:{x:3.35,y:.65,sx:.558,sy:.558},40:{x:3.55,y:.7,sx:.557,sy:.557},41:{x:3.75,sx:.555,sy:.555},42:{x:3.95,y:.75,sx:.554,sy:.554},43:{x:4.15,y:.8,sx:.552,sy:.552},44:{x:4.3,y:.85,sx:.551,sy:.551},45:{x:4.5,sx:.549,sy:.549},46:{x:4.7,y:.9,sx:.548,sy:.548},47:{x:4.9,y:.95,sx:.546,sy:.546},48:{x:5.1,y:1,sx:.545,sy:.545},49:{x:5.3,sx:.543,sy:.543},50:{x:5.5,sx:.542,sy:.542}}).addTimedChild(o,22,1).addTimedChild(r,23,1).addTimedChild(l,24,1).addTimedChild(h,25,1).addTimedChild(u,26,1).addTimedChild(c,27,1).addTimedChild(d,28,1).addTimedChild(p,29,1).addTimedChild(f,30,1).addTimedChild(y,31,1).addTimedChild(m,32,1).addTimedChild(g,33,1).addTimedChild(v,34,1).addTimedChild(b,35,1).addTimedChild(_,36,1).addTimedChild(x,37,1).addTimedChild(w,38,1).addTimedChild(C,39,1).addTimedChild(P,40,1).addTimedChild(k,41,1).addTimedChild(T,42,1).addTimedChild(O,43,1).addTimedChild(M,44,1).addTimedChild(A,45,1).addTimedChild(I,46,1).addTimedChild(S,47,1).addTimedChild(E,48,1).addTimedChild(B,49,1).addTimedChild(D,50,5)}),gt=i.extend(function(t){i.call(this,{mode:t,duration:33,loop:!1}),this.addTimedChild(new o(r("lizi")).setTransform(-6,-6))}),vt=i.extend(function(t){i.call(this,{mode:t,duration:55,loop:!1}),this.addTimedChild(new o(r("lizi")).setTransform(-6,-6))}),bt=i.extend(function(t){i.call(this,{mode:t,duration:55,loop:!1});var e=new vt(i.SYNCHED),n=new gt(i.SYNCHED),o=(new a).drawCommands(s.BombImplosion[5]),r=(new a).drawCommands(s.BombImplosion[6]),l=(new a).drawCommands(s.BombImplosion[7]),h=(new a).drawCommands(s.BombImplosion[8]),u=(new a).drawCommands(s.BombImplosion[9]),c=(new a).drawCommands(s.BombImplosion[10]),d=(new a).drawCommands(s.BombImplosion[11]),p=(new a).drawCommands(s.BombImplosion[12]),f=(new a).drawCommands(s.BombImplosion[13]),y=(new a).drawCommands(s.BombImplosion[14]),m=(new a).drawCommands(s.BombImplosion[15]),g=(new a).drawCommands(s.BombImplosion[16]),v=(new a).drawCommands(s.BombImplosion[17]),b=(new a).drawCommands(s.BombImplosion[18]),_=(new a).drawCommands(s.BombImplosion[19]),x=(new a).drawCommands(s.BombImplosion[20]),w=(new a).drawCommands(s.BombImplosion[21]),C=(new a).drawCommands(s.BombImplosion[22]),P=(new a).drawCommands(s.BombImplosion[23]),k=(new a).drawCommands(s.BombImplosion[24]),T=(new a).drawCommands(s.BombImplosion[25]),O=(new a).drawCommands(s.BombImplosion[26]),M=(new a).drawCommands(s.BombImplosion[27]),A=(new a).drawCommands(s.BombImplosion[28]),I=(new a).drawCommands(s.BombImplosion[29]),S=(new a).drawCommands(s.BombImplosion[30]),E=(new a).drawCommands(s.BombImplosion[31]),B=(new a).drawCommands(s.BombImplosion[32]),D=(new a).drawCommands(s.BombImplosion[33]);this.addTimedChild(e,0,55,{0:{x:0,y:0,sx:1,sy:1},22:{sx:.583,sy:.583},23:{x:-.2,y:.05,sx:.582,sy:.582},24:{x:-.35,y:.15,sx:.58,sy:.58},25:{x:-.55,y:.2,sx:.579,sy:.579},26:{x:-.7,y:.3,sx:.577,sy:.577},27:{x:-.9,y:.35,sx:.576,sy:.576},28:{x:-1.05,y:.45,sx:.574,sy:.574},29:{x:-1.25,y:.5,sx:.573,sy:.573},30:{x:-1.45,y:.55,sx:.571,sy:.571},31:{x:-1.6,y:.65,sx:.57,sy:.57},32:{x:-1.8,y:.7,sx:.568,sy:.568},33:{x:-1.95,y:.8,sx:.567,sy:.567},34:{x:-2.15,y:.85,sx:.565,sy:.565},35:{x:-2.3,y:.95,sx:.564,sy:.564},36:{x:-2.5,y:1,sx:.562,sy:.562},37:{x:-2.7,y:1.05,sx:.561,sy:.561},38:{x:-2.85,y:1.15,sx:.56,sy:.56},39:{x:-3.05,y:1.2,sx:.558,sy:.558},40:{x:-3.2,y:1.3,sx:.557,sy:.557},41:{x:-3.4,y:1.35,sx:.555,sy:.555},42:{x:-3.55,y:1.45,sx:.554,sy:.554},43:{x:-3.75,y:1.5,sx:.552,sy:.552},44:{x:-3.95,y:1.55,sx:.551,sy:.551},45:{x:-4.1,y:1.65,sx:.549,sy:.549},46:{x:-4.3,y:1.7,sx:.548,sy:.548},47:{x:-4.45,y:1.8,sx:.546,sy:.546},48:{x:-4.65,y:1.85,sx:.545,sy:.545},49:{x:-4.8,y:1.95,sx:.543,sy:.543},50:{x:-5,y:2,sx:.542,sy:.542}}).addTimedChild(n,22,33,{22:{x:0,y:0,sx:.583,sy:.583},23:{x:.2,y:.05,sx:.582,sy:.582},24:{x:.4,y:.1,sx:.58,sy:.58},25:{x:.6,sx:.579,sy:.579},26:{x:.8,y:.15,sx:.577,sy:.577},27:{x:1,y:.2,sx:.576,sy:.576},28:{x:1.2,y:.25,sx:.574,sy:.574},29:{x:1.4,sx:.573,sy:.573},30:{x:1.55,y:.3,sx:.571,sy:.571},31:{x:1.75,y:.35,sx:.57,sy:.57},32:{x:1.95,y:.4,sx:.568,sy:.568},33:{x:2.15,sx:.567,sy:.567},34:{x:2.35,y:.45,sx:.565,sy:.565},35:{x:2.55,y:.5,sx:.564,sy:.564},36:{x:2.75,y:.55,sx:.562,sy:.562},37:{x:2.95,sx:.561,sy:.561},38:{x:3.15,y:.6,sx:.559,sy:.559},39:{x:3.35,y:.65,sx:.558,sy:.558},40:{x:3.55,y:.7,sx:.557,sy:.557},41:{x:3.75,sx:.555,sy:.555},42:{x:3.95,y:.75,sx:.554,sy:.554},43:{x:4.15,y:.8,sx:.552,sy:.552},44:{x:4.3,y:.85,sx:.551,sy:.551},45:{x:4.5,sx:.549,sy:.549},46:{x:4.7,y:.9,sx:.548,sy:.548},47:{x:4.9,y:.95,sx:.546,sy:.546},48:{x:5.1,y:1,sx:.545,sy:.545},49:{x:5.3,sx:.543,sy:.543},50:{x:5.5,sx:.542,sy:.542}}).addTimedChild(o,22,1).addTimedChild(r,23,1).addTimedChild(l,24,1).addTimedChild(h,25,1).addTimedChild(u,26,1).addTimedChild(c,27,1).addTimedChild(d,28,1).addTimedChild(p,29,1).addTimedChild(f,30,1).addTimedChild(y,31,1).addTimedChild(m,32,1).addTimedChild(g,33,1).addTimedChild(v,34,1).addTimedChild(b,35,1).addTimedChild(_,36,1).addTimedChild(x,37,1).addTimedChild(w,38,1).addTimedChild(C,39,1).addTimedChild(P,40,1).addTimedChild(k,41,1).addTimedChild(T,42,1).addTimedChild(O,43,1).addTimedChild(M,44,1).addTimedChild(A,45,1).addTimedChild(I,46,1).addTimedChild(S,47,1).addTimedChild(E,48,1).addTimedChild(B,49,1).addTimedChild(D,50,5)}),_t=i.extend(function(t){i.call(this,{mode:t,duration:33,loop:!1}),this.addTimedChild(new o(r("lizi")).setTransform(-6,-6))}),xt=i.extend(function(t){i.call(this,{mode:t,duration:55,loop:!1}),this.addTimedChild(new o(r("lizi")).setTransform(-6,-6))}),wt=i.extend(function(t){i.call(this,{mode:t,duration:55,loop:!1});var e=new xt(i.SYNCHED),n=new _t(i.SYNCHED),o=(new a).drawCommands(s.BombImplosion[5]),r=(new a).drawCommands(s.BombImplosion[6]),l=(new a).drawCommands(s.BombImplosion[7]),h=(new a).drawCommands(s.BombImplosion[8]),u=(new a).drawCommands(s.BombImplosion[9]),c=(new a).drawCommands(s.BombImplosion[10]),d=(new a).drawCommands(s.BombImplosion[11]),p=(new a).drawCommands(s.BombImplosion[12]),f=(new a).drawCommands(s.BombImplosion[13]),y=(new a).drawCommands(s.BombImplosion[14]),m=(new a).drawCommands(s.BombImplosion[15]),g=(new a).drawCommands(s.BombImplosion[16]),v=(new a).drawCommands(s.BombImplosion[17]),b=(new a).drawCommands(s.BombImplosion[18]),_=(new a).drawCommands(s.BombImplosion[19]),x=(new a).drawCommands(s.BombImplosion[20]),w=(new a).drawCommands(s.BombImplosion[21]),C=(new a).drawCommands(s.BombImplosion[22]),P=(new a).drawCommands(s.BombImplosion[23]),k=(new a).drawCommands(s.BombImplosion[24]),T=(new a).drawCommands(s.BombImplosion[25]),O=(new a).drawCommands(s.BombImplosion[26]),M=(new a).drawCommands(s.BombImplosion[27]),A=(new a).drawCommands(s.BombImplosion[28]),I=(new a).drawCommands(s.BombImplosion[29]),S=(new a).drawCommands(s.BombImplosion[30]),E=(new a).drawCommands(s.BombImplosion[31]),B=(new a).drawCommands(s.BombImplosion[32]),D=(new a).drawCommands(s.BombImplosion[33]);this.addTimedChild(e,0,55,{0:{x:0,y:0,sx:1,sy:1},22:{sx:.583,sy:.583},23:{x:-.2,y:.05,sx:.582,sy:.582},24:{x:-.35,y:.15,sx:.58,sy:.58},25:{x:-.55,y:.2,sx:.579,sy:.579},26:{x:-.7,y:.3,sx:.577,sy:.577},27:{x:-.9,y:.35,sx:.576,sy:.576},28:{x:-1.05,y:.45,sx:.574,sy:.574},29:{x:-1.25,y:.5,sx:.573,sy:.573},30:{x:-1.45,y:.55,sx:.571,sy:.571},31:{x:-1.6,y:.65,sx:.57,sy:.57},32:{x:-1.8,y:.7,sx:.568,sy:.568},33:{x:-1.95,y:.8,sx:.567,sy:.567},34:{x:-2.15,y:.85,sx:.565,sy:.565},35:{x:-2.3,y:.95,sx:.564,sy:.564},36:{x:-2.5,y:1,sx:.562,sy:.562},37:{x:-2.7,y:1.05,sx:.561,sy:.561},38:{x:-2.85,y:1.15,sx:.56,sy:.56},39:{x:-3.05,y:1.2,sx:.558,sy:.558},40:{x:-3.2,y:1.3,sx:.557,sy:.557},41:{x:-3.4,y:1.35,sx:.555,sy:.555},42:{x:-3.55,y:1.45,sx:.554,sy:.554},43:{x:-3.75,y:1.5,sx:.552,sy:.552},44:{x:-3.95,y:1.55,sx:.551,sy:.551},45:{x:-4.1,y:1.65,sx:.549,sy:.549},46:{x:-4.3,y:1.7,sx:.548,sy:.548},47:{x:-4.45,y:1.8,sx:.546,sy:.546},48:{x:-4.65,y:1.85,sx:.545,sy:.545},49:{x:-4.8,y:1.95,sx:.543,sy:.543},50:{x:-5,y:2,sx:.542,sy:.542}}).addTimedChild(n,22,33,{22:{x:0,y:0,sx:.583,sy:.583},23:{x:.2,y:.05,sx:.582,sy:.582},24:{x:.4,y:.1,sx:.58,sy:.58},25:{x:.6,sx:.579,sy:.579},26:{x:.8,y:.15,sx:.577,sy:.577},27:{x:1,y:.2,sx:.576,sy:.576},28:{x:1.2,y:.25,sx:.574,sy:.574},29:{x:1.4,sx:.573,sy:.573},30:{x:1.55,y:.3,sx:.571,sy:.571},31:{x:1.75,y:.35,sx:.57,sy:.57},32:{x:1.95,y:.4,sx:.568,sy:.568},33:{x:2.15,sx:.567,sy:.567},34:{x:2.35,y:.45,sx:.565,sy:.565},35:{x:2.55,y:.5,sx:.564,sy:.564},36:{x:2.75,y:.55,sx:.562,sy:.562},37:{x:2.95,sx:.561,sy:.561},38:{x:3.15,y:.6,sx:.559,sy:.559},39:{x:3.35,y:.65,sx:.558,sy:.558},40:{x:3.55,y:.7,sx:.557,sy:.557},41:{x:3.75,sx:.555,sy:.555},42:{x:3.95,y:.75,sx:.554,sy:.554},43:{x:4.15,y:.8,sx:.552,sy:.552},44:{x:4.3,y:.85,sx:.551,sy:.551},45:{x:4.5,sx:.549,sy:.549},46:{x:4.7,y:.9,sx:.548,sy:.548},47:{x:4.9,y:.95,sx:.546,sy:.546},48:{x:5.1,y:1,sx:.545,sy:.545},49:{x:5.3,sx:.543,sy:.543},50:{x:5.5,sx:.542,sy:.542}}).addTimedChild(o,22,1).addTimedChild(r,23,1).addTimedChild(l,24,1).addTimedChild(h,25,1).addTimedChild(u,26,1).addTimedChild(c,27,1).addTimedChild(d,28,1).addTimedChild(p,29,1).addTimedChild(f,30,1).addTimedChild(y,31,1).addTimedChild(m,32,1).addTimedChild(g,33,1).addTimedChild(v,34,1).addTimedChild(b,35,1).addTimedChild(_,36,1).addTimedChild(x,37,1).addTimedChild(w,38,1).addTimedChild(C,39,1).addTimedChild(P,40,1).addTimedChild(k,41,1).addTimedChild(T,42,1).addTimedChild(O,43,1).addTimedChild(M,44,1).addTimedChild(A,45,1).addTimedChild(I,46,1).addTimedChild(S,47,1).addTimedChild(E,48,1).addTimedChild(B,49,1).addTimedChild(D,50,5)}),Ct=i.extend(function(t){i.call(this,{mode:t,duration:80,loop:!1});var e=(new a).drawCommands(s.BombImplosion[64]).setRenderable(!1),n=(new a).drawCommands(s.BombImplosion[65]).setRenderable(!1),l=(new a).drawCommands(s.BombImplosion[66]).setRenderable(!1),h=(new a).drawCommands(s.BombImplosion[67]).setRenderable(!1),u=(new a).drawCommands(s.BombImplosion[68]).setRenderable(!1),c=(new a).drawCommands(s.BombImplosion[69]).setRenderable(!1),d=(new a).drawCommands(s.BombImplosion[70]).setRenderable(!1),p=(new a).drawCommands(s.BombImplosion[71]).setRenderable(!1),f=(new a).drawCommands(s.BombImplosion[72]).setRenderable(!1),y=(new a).drawCommands(s.BombImplosion[73]).setRenderable(!1),m=(new a).drawCommands(s.BombImplosion[74]).setRenderable(!1),g=(new a).drawCommands(s.BombImplosion[75]).setRenderable(!1),v=(new a).drawCommands(s.BombImplosion[76]).setRenderable(!1),b=(new a).drawCommands(s.BombImplosion[77]).setRenderable(!1),_=(new a).drawCommands(s.BombImplosion[78]).setRenderable(!1),x=(new a).drawCommands(s.BombImplosion[79]).setRenderable(!1),w=(new a).drawCommands(s.BombImplosion[80]).setRenderable(!1),C=(new a).drawCommands(s.BombImplosion[81]).setRenderable(!1),P=(new a).drawCommands(s.BombImplosion[82]).setRenderable(!1),k=(new a).drawCommands(s.BombImplosion[83]).setRenderable(!1),T=(new a).drawCommands(s.BombImplosion[84]).setRenderable(!1),O=(new a).drawCommands(s.BombImplosion[58]),M=(new a).drawCommands(s.BombImplosion[59]),A=(new a).drawCommands(s.BombImplosion[60]),I=(new a).drawCommands(s.BombImplosion[61]),S=(new a).drawCommands(s.BombImplosion[60]),E=(new a).drawCommands(s.BombImplosion[61]),B=(new a).drawCommands(s.BombImplosion[60]),D=(new a).drawCommands(s.BombImplosion[61]),R=(new a).drawCommands(s.BombImplosion[60]),N=(new a).drawCommands(s.BombImplosion[61]),L=(new a).drawCommands(s.BombImplosion[62]),j=(new a).drawCommands(s.BombImplosion[56]),G=(new a).drawCommands(s.BombImplosion[38]),F=(new a).drawCommands(s.BombImplosion[46]),U=(new a).drawCommands(s.BombImplosion[54]),H=(new a).drawCommands(s.BombImplosion[47]),X=(new a).drawCommands(s.BombImplosion[48]),V=(new a).drawCommands(s.BombImplosion[47]),W=(new a).drawCommands(s.BombImplosion[48]),z=(new a).drawCommands(s.BombImplosion[47]),Y=(new a).drawCommands(s.BombImplosion[49]),q=(new a).drawCommands(s.BombImplosion[48]),Z=(new a).drawCommands(s.BombImplosion[49]),$=(new a).drawCommands(s.BombImplosion[50]),K=(new a).drawCommands(s.BombImplosion[49]),Q=(new a).drawCommands(s.BombImplosion[50]),J=(new a).drawCommands(s.BombImplosion[51]),tt=new o(r("Bitmap 3")).setTransform(-88.5,-84.75,1.012,1.012),et=(new a).drawCommands(s.BombImplosion[63]),it=(new a).drawCommands(s.BombImplosion[57]),nt=(new a).drawCommands(s.BombImplosion[55]),ot=(new a).drawCommands(s.BombImplosion[49]),rt=(new a).drawCommands(s.BombImplosion[52]),ct=(new a).drawCommands(s.BombImplosion[50]),dt=(new a).drawCommands(s.BombImplosion[52]),ft=(new a).drawCommands(s.BombImplosion[53]),yt=(new a).drawCommands(s.BombImplosion[45]),gt=(new a).drawCommands(s.BombImplosion[34]),vt=(new a).drawCommands(s.BombImplosion[43]),_t=(new a).drawCommands(s.BombImplosion[41]),xt=(new a).drawCommands(s.BombImplosion[42]),Ct=(new a).drawCommands(s.BombImplosion[41]),Pt=(new a).drawCommands(s.BombImplosion[39]),kt=(new a).drawCommands(s.BombImplosion[44]),Tt=(new a).drawCommands(s.BombImplosion[42]),Ot=(new a).drawCommands(s.BombImplosion[40]),Mt=(new a).drawCommands(s.BombImplosion[38]),At=(new a).drawCommands(s.BombImplosion[36]),It=(new a).drawCommands(s.BombImplosion[37]),St=(new a).drawCommands(s.BombImplosion[35]),Et=(new a).drawCommands(s.BombImplosion[34]),Bt=new wt(i.SYNCHED),Dt=new bt(i.SYNCHED),Rt=new mt(i.SYNCHED),Nt=new pt(i.SYNCHED),Lt=new ut(i.SYNCHED),jt=new ht(i.SYNCHED),Gt=new lt(i.SYNCHED),Ft=new st(i.SYNCHED),Ut=new at(i.SYNCHED);this.addTimedChild(e,19,1).addTimedChild(n,20,1).addTimedChild(l,21,1).addTimedChild(h,22,1).addTimedChild(u,23,1).addTimedChild(c,24,1).addTimedChild(d,25,1).addTimedChild(p,26,1).addTimedChild(f,27,1).addTimedChild(y,28,1).addTimedChild(m,29,1).addTimedChild(g,30,1).addTimedChild(v,31,1).addTimedChild(b,32,1).addTimedChild(_,33,1).addTimedChild(x,34,1).addTimedChild(w,35,1).addTimedChild(C,36,1).addTimedChild(P,37,1).addTimedChild(k,38,1).addTimedChild(T,39,41).addTimedChild(O,0,1).addTimedChild(M,1,1).addTimedChild(A,2,1).addTimedChild(I,3,1).addTimedChild(S,4,1,{4:{x:31.45,y:-51.8,sx:1.591,sy:1.605}}).addTimedChild(E,5,1,{5:{x:24.9,y:-39.75,sx:1.468,sy:1.465}}).addTimedChild(B,6,1,{6:{x:63.55,y:-103.55,sx:2.195,sy:2.21}}).addTimedChild(D,7,1,{7:{x:49.8,y:-80,sx:1.937,sy:1.935}}).addTimedChild(R,8,1,{8:{x:95.25,y:-155.35,sx:2.792,sy:2.815}}).addTimedChild(N,9,2,{9:{x:74.45,y:-119.75,sx:2.4,sy:2.4},10:{x:86.9,y:-139.6,sx:2.634,sy:2.632}}).addTimedChild(L,11,8,{11:{x:0,y:0,sx:1,sy:1},12:{x:4.25,y:-6.75,sx:1.08,sy:1.079},13:{x:8.55,y:-13.85,sx:1.162,sy:1.162},14:{x:12.95,y:-20.75,sx:1.243,sy:1.243},15:{x:17.25,y:-27.7,sx:1.325,sy:1.324},16:{x:21.6,y:-34.6,sx:1.406,sy:1.404},17:{x:25.85,y:-41.7,sx:1.486,sy:1.488},18:{x:30.3,y:-48.45,sx:1.57,sy:1.566}}).addTimedChild(j,0,17,{0:{x:0,y:0,sx:1,sy:1},1:{x:60.15,y:-33.85,sx:1.673,sy:1.681},2:{x:122,y:-67.7,sx:2.365,sy:2.362},3:{x:182.15,y:-100.85,sx:3.038,sy:3.029},4:{x:244.05,y:-135.4,sx:3.731,sy:3.725},5:{x:304.2,y:-169.25,sx:4.404,sy:4.406},6:{x:366.05,y:-203.1,sx:5.096,sy:5.087},7:{x:426.2,y:-236.95,sx:5.769,sy:5.768},8:{x:486.35,y:-270.05,sx:6.442,sy:6.435},9:{x:548.25,y:-303.9,sx:7.135,sy:7.116},10:{x:608.35,y:-338.45,sx:7.808,sy:7.812},11:{x:670.25,y:-372.35,sx:8.5,sy:8.493},12:{x:730.4,y:-405.45,sx:9.173,sy:9.159},13:{x:790.55,y:-439.3,sx:9.846,sy:9.841},14:{x:852.4,y:-473.15,sx:10.538,sy:10.522},15:{x:912.55,y:-507,sx:11.212,sy:11.203},16:{x:974.45,y:-541.55,sx:11.904,sy:11.899}}).addTimedChild(G,0,1,{0:{x:-177,y:.4,sx:.8,sy:.8}}).addTimedChild(F,0,1).addTimedChild(U,1,14,{1:{x:0,y:0,sx:1,sy:1},2:{x:35.7,y:.15,sx:1.347,sy:1.348},3:{x:69.35,y:.3,sx:1.673,sy:1.695},4:{x:105.05,y:.45,sx:2.02,sy:2.035},5:{x:140.75,y:.6,sx:2.367,sy:2.39},6:{x:176.45,y:.75,sx:2.714,sy:2.73},7:{x:212.15,y:.85,sx:3.061,sy:3.078},8:{x:245.8,y:1.05,sx:3.388,sy:3.426},9:{x:281.5,y:1.15,sx:3.735,sy:3.773},10:{x:317.2,y:1.3,sx:4.082,sy:4.113},11:{x:352.9,y:1.4,sx:4.429,sy:4.461},12:{x:386.55,y:1.6,sx:4.755,sy:4.809},13:{x:422.25,y:1.7,sx:5.102,sy:5.156},14:{x:457.95,y:1.85,sx:5.449,sy:5.496}}).addTimedChild(H,1,1).addTimedChild(X,2,2,{2:{x:0,y:0,sx:1,sy:1},3:{x:24.1,y:14.05,sx:1.271,sy:1.275}}).addTimedChild(V,4,1,{4:{x:100.05,y:56.2,sx:2.128,sy:2.095}}).addTimedChild(W,5,1,{5:{x:72.3,y:42.25,sx:1.814,sy:1.825}}).addTimedChild(z,6,1,{6:{x:166.15,y:94.5,sx:2.872,sy:2.841}}).addTimedChild(Y,7,1).addTimedChild(q,8,1,{8:{x:145.25,y:84.2,sx:2.636,sy:2.643}}).addTimedChild(Z,9,1,{9:{x:20.65,y:11.85,sx:1.233,sy:1.232}}).addTimedChild($,10,1).addTimedChild(K,11,1,{11:{x:41.35,y:23.65,sx:1.466,sy:1.462}}).addTimedChild(Q,12,1,{12:{x:15.35,y:8.8,sx:1.173,sy:1.172}}).addTimedChild(J,13,1).addTimedMask(tt,{19:e,20:n,21:l,22:h,23:u,24:c,25:d,26:p,27:f,28:y,29:m,30:g,31:v,32:b,33:_,34:x,35:w,36:C,37:P,38:k,39:T}).addTimedChild(tt,19,61).addTimedChild(et,19,61).addTimedChild(it,17,63,{17:{x:0,y:0,sx:1,sy:1},18:{x:4.95,y:-2.7,sx:1.055,sy:1.054},19:{x:9.7,y:-5.4,sx:1.109,sy:1.108}}).addTimedChild(nt,15,65,{15:{x:0,y:0,sx:1,sy:1},16:{x:6.15,y:.05,sx:1.06,sy:1.058},17:{x:12,sx:1.116,sy:1.118},18:{x:18.15,y:.1,sx:1.176,sy:1.177},19:{x:24.3,sx:1.236,sy:1.236}}).addTimedChild(ot,14,2,{14:{x:72.2,y:41.35,sx:1.813,sy:1.807},15:{x:82.1,y:47.4,sx:1.925,sy:1.926}}).addTimedChild(rt,16,1).addTimedChild(ct,17,1,{17:{x:53.35,y:30.9,sx:1.601,sy:1.604}}).addTimedChild(dt,18,1,{18:{x:10.1,y:5.75,sx:1.114,sy:1.112}}).addTimedChild(ft,19,61).addTimedChild(yt,0,80,{0:{x:0,y:0,sx:1,sy:1},1:{x:34.55,y:54.75,sx:1.622,sy:1.643},2:{x:69.8,y:106.45,sx:2.257,sy:2.25},3:{x:103.6,y:161.2,sx:2.865,sy:2.893},4:{x:138.85,y:212.9,sx:3.5,sy:3.5},5:{x:173.45,y:267.65,sx:4.122,sy:4.143},6:{x:208.7,y:319.35,sx:4.757,sy:4.75},7:{x:243.25,y:374.1,sx:5.378,sy:5.393},8:{x:277.05,y:425.8,sx:5.986,sy:6},9:{x:312.3,y:480.55,sx:6.622,sy:6.643},10:{x:346.85,y:532.25,sx:7.243,sy:7.25},11:{x:382.1,y:587,sx:7.878,sy:7.893},12:{x:415.9,y:638.7,sx:8.486,sy:8.5},13:{x:450.45,y:693.45,sx:9.108,sy:9.143},14:{x:485.75,y:745.15,sx:9.743,sy:9.75},15:{x:520.3,y:799.9,sx:10.365,sy:10.393},16:{x:555.55,y:851.6,sx:11,sy:11},17:{x:589.35,y:906.35,sx:11.608,sy:11.643},18:{x:624.6,y:958.05,sx:12.243,sy:12.25},19:{x:659.15,y:1012.8,sx:12.865,sy:12.893}}).addTimedChild(gt,0,1,{0:{x:-3.2,y:-146.9,sx:.504,sy:.5}}).addTimedChild(vt,1,15,{1:{x:0,y:0,sx:1,sy:1},2:{x:2,y:44.45,sx:1.427,sy:1.45},3:{x:4.05,y:86.5,sx:1.855,sy:1.875},4:{x:6.05,y:128.5,sx:2.282,sy:2.3},5:{x:8.1,y:173,sx:2.709,sy:2.75},6:{x:10.1,y:217.5,sx:3.137,sy:3.2},7:{x:12.15,y:259.5,sx:3.564,sy:3.625},8:{x:14.15,y:301.55,sx:3.991,sy:4.05},9:{x:16.2,y:343.6,sx:4.419,sy:4.475},10:{x:18.2,y:388.05,sx:4.846,sy:4.925},11:{x:20.25,y:430.05,sx:5.273,sy:5.35},12:{x:22.25,y:472.1,sx:5.701,sy:5.775},13:{x:24.25,y:514.15,sx:6.128,sy:6.2},14:{x:26.25,y:558.6,sx:6.556,sy:6.65},15:{x:28.3,y:603.1,sx:6.983,sy:7.1}}).addTimedChild(_t,0,14,{0:{x:0,y:0,sx:1,sy:1},1:{x:-28.85,y:50.9,sx:1.61,sy:1.6},2:{x:-56.5,y:101.8,sx:2.195,sy:2.2},3:{x:-85.35,y:151.25,sx:2.805,sy:2.783},4:{x:-113.6,y:202.15,sx:3.403,sy:3.383},5:{x:-141.85,y:251.7,sx:4,sy:3.967},6:{x:-170.05,y:302.6,sx:4.597,sy:4.567},7:{x:-198.95,y:353.5,sx:5.208,sy:5.167},8:{x:-227.2,y:402.95,sx:5.805,sy:5.75},9:{x:-255.45,y:453.85,sx:6.403,sy:6.35},10:{x:-284.3,y:504.75,sx:7.013,sy:6.95},11:{x:-312.5,y:555.65,sx:7.61,sy:7.55},12:{x:-340.8,y:605.15,sx:8.208,sy:8.133},13:{x:-369.65,y:656.05,sx:8.818,sy:8.733}}).addTimedChild(xt,14,1).addTimedChild(Ct,15,1,{15:{x:-426.15,y:756.45,sx:10.013,sy:9.917}}).addTimedChild(Pt,0,16,{0:{x:0,y:0,sx:1,sy:1},1:{x:-53.1,y:31.6,sx:1.648,sy:1.644},2:{x:-106.1,y:62.6,sx:2.296,sy:2.274},3:{x:-159.2,y:94.9,sx:2.944,sy:2.932},4:{x:-212.25,y:126.55,sx:3.593,sy:3.575},5:{x:-265.35,y:158.15,sx:4.241,sy:4.219},6:{x:-318.35,y:189.15,sx:4.889,sy:4.849},7:{x:-371.45,y:220.8,sx:5.537,sy:5.493},8:{x:-426.05,y:253.1,sx:6.204,sy:6.151},9:{x:-477.6,y:284.7,sx:6.833,sy:6.795},10:{x:-532.15,y:315.7,sx:7.5,sy:7.425},11:{x:-583.7,y:347.35,sx:8.13,sy:8.068},12:{x:-638.25,y:379.65,sx:8.796,sy:8.726},13:{x:-691.35,y:411.25,sx:9.444,sy:9.37},14:{x:-744.4,y:442.25,sx:10.093,sy:10},15:{x:-797.5,y:473.85,sx:10.741,sy:10.644}}).addTimedChild(kt,16,64,{16:{x:0,y:0,sx:1,sy:1},17:{x:.3,y:5.6,sx:1.058,sy:1.056},18:{x:.55,y:11.45,sx:1.115,sy:1.116},19:{x:.85,y:17.05,sx:1.173,sy:1.173}}).addTimedChild(Tt,16,64,{16:{x:-6,y:10.8,sx:1.127,sy:1.127},17:{x:-9.05,y:16.1,sx:1.192,sy:1.189},18:{x:-12,y:21.55,sx:1.254,sy:1.254},19:{x:-15.1,y:27,sx:1.319,sy:1.318}}).addTimedChild(Ot,16,64,{16:{x:0,y:0,sx:1,sy:1},17:{x:-4.7,y:2.85,sx:1.057,sy:1.058},18:{x:-9.3,y:5.65,sx:1.114,sy:1.114},19:{x:-14,y:8.4,sx:1.171,sy:1.171}}).addTimedChild(Mt,0,80,{0:{x:0,y:0,sx:1,sy:1},1:{x:-37.85,y:.4,sx:1.4,sy:1.409},2:{x:-78.05,y:.85,sx:1.825,sy:1.826},3:{x:-115.9,y:1.25,sx:2.225,sy:2.235},4:{x:-156.1,y:1.7,sx:2.65,sy:2.643},5:{x:-196.25,y:2.05,sx:3.075,sy:3.043},6:{x:-236.45,y:2.45,sx:3.5,sy:3.461},7:{x:-274.3,y:2.9,sx:3.9,sy:3.87},8:{x:-312.15,y:3.3,sx:4.3,sy:4.278},9:{x:-352.35,y:3.75,sx:4.725,sy:4.687},10:{x:-390.2,y:4.15,sx:5.125,sy:5.104},11:{x:-430.4,y:4.6,sx:5.55,sy:5.513},12:{x:-468.2,y:5,sx:5.95,sy:5.922},13:{x:-506.05,y:5.4,sx:6.35,sy:6.33},14:{x:-546.25,y:5.85,sx:6.775,sy:6.748},15:{x:-586.4,y:6.2,sx:7.2,sy:7.148},16:{x:-626.65,y:6.65,sx:7.625,sy:7.557},17:{x:-664.45,y:7.05,sx:8.025,sy:7.965},18:{x:-704.65,y:7.45,sx:8.45,sy:8.383},19:{x:-742.5,y:7.9,sx:8.85,sy:8.791}}).addTimedChild(At,0,18,{0:{x:0,y:0,sx:1,sy:1},1:{x:-36.7,y:-22.3,sx:1.447,sy:1.455},2:{x:-73.35,y:-44.05,sx:1.895,sy:1.901},3:{x:-111.1,y:-66.35,sx:2.355,sy:2.356},4:{x:-147.75,y:-88.1,sx:2.803,sy:2.802},5:{x:-184.45,y:-110.4,sx:3.25,sy:3.257},6:{x:-221.15,y:-132.15,sx:3.697,sy:3.703},7:{x:-257.8,y:-154.45,sx:4.145,sy:4.158},8:{x:-295.55,y:-176.2,sx:4.605,sy:4.604},9:{x:-332.2,y:-198.5,sx:5.053,sy:5.059},10:{x:-368.9,y:-219.8,sx:5.5,sy:5.495},11:{x:-405.6,y:-242.1,sx:5.947,sy:5.951},12:{x:-443.3,y:-263.85,sx:6.408,sy:6.396},13:{x:-480,y:-286.15,sx:6.855,sy:6.851},14:{x:-516.65,y:-307.9,sx:7.303,sy:7.297},15:{x:-553.35,y:-330.2,sx:7.75,sy:7.752},16:{x:-590.05,y:-351.95,sx:8.197,sy:8.198},17:{x:-627.75,y:-374.25,sx:8.658,sy:8.653}}).addTimedChild(It,18,62,{18:{x:0,y:0,sx:1,sy:1},19:{x:-4.05,y:-2.45,sx:1.049,sy:1.05}}).addTimedChild(St,0,80,{0:{x:0,y:0,sx:1,sy:1},1:{x:-18.95,y:-35.45,sx:1.421,sy:1.415},2:{x:-37.5,y:-71.95,sx:1.832,sy:1.841},3:{x:-56.45,y:-107.35,sx:2.252,sy:2.256},4:{x:-75.45,y:-142.8,sx:2.673,sy:2.671},5:{x:-94,y:-178.3,sx:3.084,sy:3.085},6:{x:-112.95,y:-213.75,sx:3.505,sy:3.5},7:{x:-131.9,y:-249.15,sx:3.925,sy:3.915},8:{x:-150.45,y:-285.65,sx:4.336,sy:4.341},9:{x:-169.4,y:-321.1,sx:4.757,sy:4.756},10:{x:-188.8,y:-356.55,sx:5.187,sy:5.171},11:{x:-207.8,y:-391.95,sx:5.607,sy:5.585},12:{x:-226.35,y:-428.45,sx:6.019,sy:6.012},13:{x:-245.3,y:-463.9,sx:6.439,sy:6.427},14:{x:-264.25,y:-499.35,sx:6.86,sy:6.841},15:{x:-282.8,y:-534.8,sx:7.271,sy:7.256},16:{x:-301.75,y:-570.25,sx:7.692,sy:7.671},17:{x:-320.7,y:-605.7,sx:8.112,sy:8.085},18:{x:-339.3,y:-642.2,sx:8.523,sy:8.512},19:{x:-358.25,y:-677.6,sx:8.944,sy:8.927}}).addTimedChild(Et,0,80,{0:{x:0,y:0,sx:1,sy:1},1:{x:1.05,y:-34.2,sx:1.353,sy:1.348},2:{x:2.15,y:-70.5,sx:1.707,sy:1.717},3:{x:3.25,y:-104.7,sx:2.06,sy:2.065},4:{x:4.3,y:-138.9,sx:2.414,sy:2.413},5:{x:5.35,y:-175.25,sx:2.767,sy:2.783},6:{x:6.45,y:-209.4,sx:3.12,sy:3.13},7:{x:7.55,y:-245.75,sx:3.474,sy:3.5},8:{x:8.6,y:-279.95,sx:3.827,sy:3.848},9:{x:9.65,y:-314.15,sx:4.18,sy:4.196},10:{x:10.75,y:-350.45,sx:4.534,sy:4.565},11:{x:11.85,y:-384.65,sx:4.887,sy:4.913},12:{x:12.9,y:-418.85,sx:5.241,sy:5.261},13:{x:13.95,y:-455.15,sx:5.594,sy:5.63},14:{x:15.05,y:-489.35,sx:5.947,sy:5.978},15:{x:16.1,y:-525.7,sx:6.301,sy:6.348},16:{x:17.2,y:-559.9,sx:6.654,sy:6.696},17:{x:18.25,y:-594.05,sx:7.008,sy:7.043},18:{x:19.35,y:-630.4,sx:7.361,sy:7.413},19:{x:20.4,y:-664.6,sx:7.714,sy:7.761}}).addTimedChild(Bt,25,55,{25:{x:-4.85,y:-62,a:0},26:{y:-59.35,a:.25},27:{y:-56.7,a:.5},28:{y:-54.1,a:.75},29:{y:-51.45,a:1},30:{x:-4.75,y:-49},31:{x:-4.65,y:-46.55},32:{x:-4.55,y:-44.1},33:{x:-4.45,y:-41.65},34:{x:-4.35,y:-39.2},35:{x:-4.25,y:-36.8},36:{x:-4.15,y:-34.35},37:{x:-4.05,y:-31.9},38:{x:-3.95,y:-29.45},39:{x:-3.85,y:-27}}).addTimedChild(Dt,25,55,{25:{x:-62.9,y:1,sx:1,sy:1,r:0,a:0},26:{x:-60.65,y:.95,a:.25},27:{x:-58.4,a:.5},28:{x:-56.15,y:.9,a:.75},29:{x:-53.9,y:.85,a:1},30:{x:-51.664,y:.766,r:.07},31:{x:-49.413,y:.796,r:.141},32:{x:-47.164,y:.736,sx:.999,sy:.999,r:.214},33:{x:-44.927,y:.653,r:.284},34:{x:-42.684,y:.642,r:.355},35:{x:-40.469,y:.657,r:.428},36:{x:-38.221,y:.595,r:.499},37:{x:-35.995,y:.555,sx:.998,sy:.998,r:.573},38:{x:-33.726,y:.512,r:.643},39:{x:-31.35,y:.45,sx:1,sy:1,r:.715}}).addTimedChild(Rt,25,55,{25:{x:-3.35,y:58.55,sx:1,sy:1,r:0,a:0},26:{y:56.4,a:.25},27:{y:54.3,a:.5},28:{y:52.15,a:.75},29:{y:50,a:1},30:{x:-3.329,y:47.408,r:.023},31:{x:-3.267,y:44.821,r:.048},32:{x:-3.202,y:42.201,r:.074},33:{x:-3.171,y:39.625,r:.097},34:{x:-3.097,y:37.093,r:.123},35:{x:-3.066,y:34.527,sx:.999,sy:.999,r:.149},36:{x:-3.018,y:31.919,r:.171},37:{x:-2.974,y:29.293,r:.197},38:{x:-2.92,y:26.734,r:.223},39:{x:-2.8,y:24.05,sx:1,sy:1,r:.249}}).addTimedChild(Nt,25,55,{25:{x:56.65,y:-.5,sx:1,sy:1,r:0,a:0},26:{x:54.45,y:-.45,a:.25},27:{x:52.25,y:-.4,a:.5},28:{x:50,a:.75},29:{x:47.8,y:-.35,a:1},30:{x:45.614,y:-.278,r:.114},31:{x:43.414,y:-.272,sx:.999,sy:.999,r:.227},32:{x:41.164,y:-.25,r:.341},33:{x:38.983,y:-.18,r:.455},34:{x:36.796,y:-.126,r:.569},35:{x:34.588,y:-.1,sx:.998,sy:.998,r:.683},36:{x:32.388,y:-.099,r:.8},37:{x:30.105,y:-.009,r:.914},38:{x:27.943,y:-.004,sx:.999,sy:.999,r:1.028},39:{x:25.65,y:0,sx:1,sy:1,r:1.141}}).addTimedChild(Lt,25,32,{25:{x:-7.35,y:1.25,a:0},26:{a:.14},27:{a:.27},28:{a:.38},29:{a:.49},30:{a:.59},31:{a:.67},32:{a:.75},33:{a:.82},34:{a:.87},35:{a:.92},36:{a:.95},37:{a:.98},38:{a:1},44:{x:-12.15,y:1.1,a:.85},45:{x:-16.6,y:.95,a:.71},46:{x:-20.65,y:.85,a:.59},47:{x:-24.3,y:.75,a:.48},48:{x:-27.55,y:.65,a:.38},49:{x:-30.45,y:.55,a:.29},50:{x:-32.95,y:.45,a:.21},51:{x:-35.1,y:.4,a:.15},52:{x:-36.8,y:.35,a:.09},53:{x:-38.15,y:.3,a:.05},54:{x:-39.15,y:.25,a:.02},55:{x:-39.7,a:.01},56:{x:-39.9,a:0}}).addTimedChild(jt,25,32,{25:{x:.05,y:0,a:0},26:{a:.14},27:{a:.27},28:{a:.38},29:{a:.49},30:{a:.59},31:{a:.67},32:{a:.75},33:{a:.82},34:{a:.87},35:{a:.92},36:{a:.95},37:{a:.98},38:{a:1},44:{x:5.15,y:.05,a:.85},45:{x:9.85,a:.71},46:{x:14.15,y:.1,a:.59},47:{x:18,y:.15,a:.48},48:{x:21.5,a:.38},49:{x:24.55,y:.2,a:.29},50:{x:27.2,a:.21},51:{x:29.45,a:.15},52:{x:31.3,y:.25,a:.09},53:{x:32.7,a:.05},54:{x:33.75,a:.02},55:{x:34.35,a:.01},56:{x:34.55,a:0}}).addTimedChild(Gt,25,32,{25:{x:-3.2,y:3.75,a:0},26:{a:.14},27:{a:.27},28:{a:.38},29:{a:.49},30:{a:.59},31:{a:.67},32:{a:.75},33:{a:.82},34:{a:.87},35:{a:.92},36:{a:.95},37:{a:.98},38:{a:1},44:{x:-3.15,y:8.2,a:.85},45:{y:12.25,a:.71},46:{x:-3.1,y:16,a:.59},47:{x:-3.05,y:19.35,a:.48},48:{y:22.4,a:.38},49:{x:-3,y:25.05,a:.29},50:{y:27.35,a:.21},51:{y:29.3,a:.15},52:{x:-2.95,y:30.9,a:.09},53:{y:32.15,a:.05},54:{y:33.05,a:.02},55:{y:33.55,a:.01},56:{y:33.75,a:0}}).addTimedChild(Ft,25,32,{25:{x:-3.95,y:-3.5,a:0},26:{a:.14},27:{a:.27},28:{a:.38},29:{a:.49},30:{a:.59},31:{a:.67},32:{a:.75},33:{a:.82},34:{a:.87},35:{a:.92},36:{a:.95},37:{a:.98},38:{a:1},44:{x:-3.9,y:-9.05,a:.85},45:{y:-14.15,a:.71},46:{x:-3.85,y:-18.8,a:.59},47:{x:-3.8,y:-23.05,a:.48},48:{y:-26.8,a:.38},49:{x:-3.75,y:-30.15,a:.29},50:{y:-33,a:.21},51:{y:-35.45,a:.15},52:{x:-3.7,y:-37.45,a:.09},53:{y:-39,a:.05},54:{y:-40.1,a:.02},55:{y:-40.8,a:.01},56:{y:-41,a:0}}).addTimedChild(Ut,25,32,{25:{x:-3.85,y:0,a:0},26:{a:.14},27:{a:.27},28:{a:.38},29:{a:.49},30:{a:.59},31:{a:.67},32:{a:.75},33:{a:.82},34:{a:.87},35:{a:.92},36:{a:.95},37:{a:.98},38:{a:1},44:{x:.9,y:4.2,a:.85},45:{x:5.25,y:8.1,a:.71},46:{x:9.2,y:11.65,a:.59},47:{x:12.8,y:14.85,a:.48},48:{x:16.05,y:17.7,a:.38},49:{x:18.85,y:20.25,a:.29},50:{x:21.35,y:22.45,a:.21},51:{x:23.4,y:24.3,a:.15},52:{x:25.1,y:25.8,a:.09},53:{x:26.45,y:27,a:.05},54:{x:27.4,y:27.85,a:.02},55:{x:27.95,y:28.35,a:.01},56:{x:28.15,y:28.5,a:0}})}),Pt=i.extend(function(t){i.call(this,{mode:t,duration:135,loop:!1}),this.addTimedChild(new o(r("BombImplosion0080")).setTransform(-282.5,-138.5))});e.BombImplosion=i.extend(function(){i.call(this,{duration:215,framerate:24});var t=new o(r("bg")),e=new Ct(i.SYNCHED),n=new rt(i.SYNCHED),a=new l(i.SYNCHED),s=new Pt(i.SYNCHED);this.addTimedChild(t,0,80).addTimedChild(e,0,80,{0:{x:352.8,y:138.2}}).addTimedChild(n,0,80,{0:{x:328.95,y:138.4}}).addTimedChild(a,0,80,{0:{x:282.5,y:138.55}}).addTimedChild(s,80,135,{80:{x:282.5,y:138.5,a:1},81:{y:160.5},82:{y:125.5},83:{y:162.5},84:{y:124.5},85:{y:151.5},86:{y:125.5},87:{y:138.5},88:{a:.86},89:{a:.71},90:{a:.57},91:{a:.43},92:{a:.29},93:{a:.14},94:{a:0}})}),e.BombImplosion.assets={BombImplosion:"assets/animate/BombImplosion.shapes.txt",BombImplosion_atlas_1:"assets/animate/BombImplosion_atlas_1.json"}}(PIXI,n=n||{});var n;e["default"]=n.BombImplosion},645:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);e["default"]=function(){function t(e,i,o,a,s,l,h){n(this,t),this.sp=e,this.bar=i,this.eabase=o,this.callBack=h,this.p0=new r.Point(a.x,a.y),this.p1=new r.Point(s.x,s.y),this.N=l,this.curN=0,this.curP=a.clone(),this.setN(0),this.eabase.addCursor(this.sp,"hand"),this.touchId=r.M.addTouch(this.sp,{begin:this.onBegin,move:this.onMove,end:this.onEnd},this),this.bar&&(this.touchBarId=r.M.addTouch(this.bar,{tab:this.onTab},this))}return o(t,[{key:"onBegin",value:function(t){this.isDrag=!0,this.op0=new PIXI.Point(this.sp.x,this.sp.y),this.op1=this.sp.parent.toLocal(this.eabase.getMouseXY(t),this.eabase.main.view),this.eabase.cannotSystemDrag=!0}},{key:"onMove",value:function(t){if(this.isDrag){var e=this.eabase.getMouseXY(t);e=this.sp.parent.toLocal(e,this.eabase.main.view);this.moveToP(new PIXI.Point(this.op0.x+e.x-this.op1.x,this.op0.y+e.y-this.op1.y))}}},{key:"moveToP",value:function(t){var e=this.curN;this.setP(t),e!==this.curN&&this.callBack.call(this.eabase,this.sp,this.curN,this.curP)}},{key:"onEnd",value:function(t){this.isDrag=!1,this.eabase.cannotSystemDrag=!1}},{key:"onTab",value:function(t){this.moveToP(this.eabase.getMouseXY(t))}},{key:"setP",value:function(t){this.setN(this.p2n(t))}},{key:"setN",value:function(t){this.curN=this.limitN(t);var e=this.n2p(t);this.curP.x=e.x,this.curP.y=e.y,this.sp.x=e.x,this.sp.y=e.y}},{key:"p2n",value:function(t){t=new r.Point(t.x,t.y);var e=this.p1.sub(this.p0),i=e.length;e.normalize(1);var n=t.sub(this.p0),o=n.x*e.x+n.y*e.y;return this.limitN(Math.round(this.N*o/i))}},{key:"n2p",value:function(t){return t=this.limitN(t),r.Point.interpolate(this.p0,this.p1,t/this.N)}},{key:"limitN",value:function(t){return 0>t&&(t=0),t>this.N&&(t=this.N),t}},{key:"destroy",value:function(){r.M.removeTouch(this.sp,this.touchId),this.eabase.removedCursor(this.sp),this.sp=null,this.bar&&(r.M.removeTouch(this.bar,this.touchBarId),this.bar=null),this.callBack=null,this.eabase=null,this.p0=null,this.p1=null}}]),t}()},646:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);e["default"]=function(){function t(e,i,o,a,s){n(this,t),this.sp=e,this.eabase=i,this.callBack=s,this.upIndex=o,this.downIndex=a,this.eabase.addCursor(this.sp,"hand"),this.touchId=r.M.addTouch(this.sp,{begin:this.touchBegin,end:this.touchEnd,move:this.touchMove,tab:this.touchTab},this),this.ticker=r.M.addTicker(this.loop,this,!1),this.interval=60,this.count=0}return o(t,[{key:"destroy",value:function(){r.M.removeTouch(this.sp,this.touchId),r.M.removeTicker(this.ticker),this.ticker=null,this.eabase.removedCursor(this.sp),this.sp=null,this.eabase=null,this.callBack=null}},{key:"loop",value:function(){this.count++,this.interval>this.count||(this.count=0,this.interval=6,this.callBack&&this.callBack.call(this.eabase,this.sp,null))}},{key:"touchBegin",value:function(t){this.eabase.cannotSystemDrag=!0,this.sp.gotoAndStop(this.downIndex),this.ticker.start(),this.interval=30,this.count=0}},{key:"touchMove",value:function(t){}},{key:"touchEnd",value:function(t){this.eabase.cannotSystemDrag=!1,this.sp.gotoAndStop(this.upIndex),this.ticker.stop()}},{key:"touchTab",value:function(t){this.callBack&&this.callBack.call(this.eabase,this.sp,t)}}]),t}()},647:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1);e["default"]=function(t){function e(t,i){n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.renderer=t,r.rect=i,r.X=NaN,r.Y=NaN,r.lastX=NaN,r.lastY=NaN,r._color1=16777215,r._lineWidth1=2,r.color2=16711935,r.lineWidth2=2,r.lineGra=new PIXI.Graphics,r.addChild(r.lineGra),r.renderTexture=PIXI.RenderTexture.create(r.rect.width,r.rect.height),r.sp=new PIXI.Sprite(r.renderTexture),r.addChild(r.sp),r.lineGra2=new PIXI.Graphics,r.addChild(r.lineGra2),r.lineColor=16777215,r.x=r.rect.x,r.y=r.rect.y,r.pointSp=new PIXI.Graphics,r.setLineStyle(r._color1,r._lineWidth1),r.pointGra=new PIXI.Graphics,r.lineMode=!0,r.lineCircle=!1,r.historyPoints=[],r.historyPoints2=[],r.linePoints=[],r.nihe=new l(r.linePoints),r}return r(e,t),a(e,[{key:"removed",value:function(){this.renderer=null}},{key:"setColorMatrixFilter",value:function(t){this.sp.filters=[t]}},{key:"setLineStyle",value:function(t,e){this._color1=t,this._lineWidth1=e,this.pointSp.beginFill(this._color1,1),this.pointSp.drawCircle(0,0,this._lineWidth1),this.pointSp.endFill(),this.pointSp.cacheAsBitmap=!0}},{key:"setXY",value:function(t,e,i){if(t!=this.X||e!=this.Y){this.lastX=this.X,this.lastY=this.Y,this.X=t,this.Y=e,this.historyPoints.push({x:t,y:e});var n=this.getP(this.X,this.Y);this.historyPoints2.push(n),i&&this.updateLine(n),this.drawGuideline(n)}}},{key:"updateLine",value:function(t){if(this.lineMode&&!isNaN(this.lastX)){this.drawLine(t,this.getP(this.lastX,this.lastY))}else this.drawPoint(t)}},{key:"drawGuideline",value:function(t){this.lineGra.clear(),this.lineGra.lineStyle(this.lineWidth2,this.color2,1),s.M.drawDashed(this.lineGra,t,new PIXI.Point(t.x,-this.rect.y),10,5),this.lineGra.drawCircle(t.x,t.y,3)}},{key:"drawLine",value:function(t,e){this.pointGra.nativeLines=!0,this.pointGra.clear(),this.pointGra.lineStyle(this._lineWidth1,this._color1,1),this.pointGra.moveTo(t.x,t.y),this.pointGra.lineTo(e.x,e.y),this.lineCircle&&this.pointGra.drawCircle(t.x,t.y,2*this._lineWidth1),this.renderer.render(this.pointGra,this.renderTexture,!1)}},{key:"updateLinePoints",value:function(){var t=this;this.linePoints.length=0,this.historyPoints2.forEach(function(e){t.linePoints.push(e)})}},{key:"refreshLine",value:function(){if(this.lineGra2.clear(),this.linePoints.length>=2){this.nihe.updateAb(this.linePoints),this.lineGra2.lineStyle(this.lineWidth2,this.lineColor,1);var t=this.nihe.getX(326);t>407||121>t?this.lineGra2.moveTo(121,this.nihe.getY(121)):this.lineGra2.moveTo(t,326),this.lineGra2.lineTo(407,this.nihe.getY(407))}}},{key:"drawPoint",value:function(t){this.pointSp.x=t.x,this.pointSp.y=t.y,this.renderer.render(this.pointSp,this.renderTexture,!1)}},{key:"getP",value:function(t,e){return new PIXI.Point(t,e)}},{key:"clear",value:function(){this.X=NaN,this.Y=NaN,this.lastX=NaN,this.lastY=NaN,this.lineGra.clear(),this.pointSp.x=1e3,this.renderer.render(this.pointSp,this.renderTexture,!0),this.historyPoints.length=0,this.linePoints.length=0,this.lineGra2.clear()}}]),e}(PIXI.Sprite);var l=function(){function t(e){n(this,t),this.a=1,this.b=0,this.updateAb(e)}return a(t,[{key:"updateAb",value:function(t){this.arr=t;var e=this.arr.length;this.len=e;for(var i=0,n=0,o=0,r=0,a=0;e>a;a++){var s=this.arr[a];i+=s.x*s.y,o+=s.x,r+=s.y,n+=s.x*s.x}var l=(i-o*r/e)/(n-o*o/e),h=(r-l*o)/e;this.a=l,this.b=h}},{key:"getY",value:function(t){return this.a*t+this.b}},{key:"getX",value:function(t){return(t-this.b)/this.a}}]),t}()},648:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function r(){n(this,r)};o.ME=9.1091e-31,o.E=-1.6021e-19,o.H=6.6261e-34,o.ALPHA_0=5.29177208591e-11,o.E_ME=-175882015010,e["default"]=o},649:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function y(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:y(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(461),c=(n(u),i(226)),d=n(c),p=i(448),f=n(p);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.backCon=null,i.backSp=null,i.topCon=null,i.topSp=null,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addBack(),this.addTop()}},{key:"removed",value:function(){this.removeFromFramework(this.backSp),this.backSp=null,this.removeFromFramework(this.topSp),this.topSp=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"addBack",value:function(){this.backSp=new d["default"](this.paramObj),this.backSp.allowSave=!1,this.main.addEquipmentChild(this.backSp,new h.Point(0,0));var t=new PIXI.Container;this.backSp.addChild(t),this.backSp.interactive=!1,this.backSp.interactiveChildren=!1,this.backSp.cantToTop=!0,this.backSp.parent.parent.addChildAt(this.backSp.parent,0),this.backCon=t,this.updateBackSpPosition()}},{key:"addTop",value:function(){this.topSp=new d["default"](this.paramObj),this.topSp.allowSave=!1,this.main.addEquipmentChild(this.topSp,new h.Point(0,0));var t=new PIXI.Container;this.topSp.addChild(t),this.topSp.interactive=!1,this.topSp.interactiveChildren=!1,this.topSp.cantToTop=!0,this.topSp.level=20,this.topCon=t,this.updateTopSpPosition()}},{key:"updateBackSpPosition",value:function(){this.backSp&&(this.backSp.parent.x=this.parent.x,this.backSp.parent.y=this.parent.y)}},{key:"updateTopSpPosition",value:function(){this.topSp&&(this.topSp.parent.x=this.parent.x,this.topSp.parent.y=this.parent.y)}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.updateBackSpPosition(),this.updateTopSpPosition()}}]),e}(f["default"])},650:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(e,i,o){n(this,t),this.x=e,this.y=i,this.z=o}return o(t,[{key:"add",value:function(e){return new t(this.x+e.z,this.y+e.y,this.z+e.z)}},{key:"clone",value:function(){return new t(this.x,this.y,this.z)}},{key:"crossProduct",value:function(t){return new Vector(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}},{key:"decrementBy",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"dotProduct",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}},{key:"incrementBy",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"nearEquals",value:function(t,e){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e&&Math.abs(this.z-t.z)<=e}},{key:"negate",value:function(){return this.scaleBy(-1),this}},{key:"normalize",value:function(){return this.scaleBy(1/this.length),this}},{key:"scaleBy",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)}},{key:"toString",value:function(){return"{x: "+this.x+", y: "+this.y+", z: "+this.z+"}"}},{key:"length",get:function(){return Math.sqrt(this.lengthSquared)}},{key:"lengthSquared",get:function(){return this.dotProduct(this)}}],[{key:"angleBetween",value:function(t,e){var i=t.dot(e)/(t.length*e.length);return Math.acos(i)}},{key:"distance",value:function(t,e){return e.clone().subtract(t).length}}]),t}()},813:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function _(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:_(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(76),u=i(458),c=n(u),d=i(536),p=n(d),f=i(589),y=n(f),m=i(848),g=n(m),v=i(622),b=n(v);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.moduleType=9,i}return a(e,t),s(e,[{key:"init",value:function(){var t=this;return this.hasInit?Promise.resolve():(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),new Promise(function(e){t.elecUtil=new p["default"](t),t.elecUtil.init(),t.drawLineComp=new y["default"](t),t.drawLineComp.init(),t.atomicUtil=new g["default"](t),t.atomicUtil.init(),t.opticalUtil=new b["default"](t),t.opticalUtil.init(),e()}))}},{key:"onRemoveEquipment",value:function(){this.elecUtil.diyChanged(),this.elecUtil.electricField_Update.checkAllChanged()}},{key:"requestAnimationLoop",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requestAnimationLoop",this).call(this),this.elecUtil&&this.elecUtil.elect_Update.stepLoop.call(this.elecUtil.elect_Update)}},{key:"destroy",value:function(){this.elecUtil.destroy(),this.elecUtil=null,this.drawLineComp.destroy(),this.drawLineComp=null,this.atomicUtil.destroy(),this.atomicUtil=null,this.opticalUtil.destroy(),this.opticalUtil=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}],[{key:"MODULE_TYPE",get:function(){return h.Modules.ATOMICPHYSICS}}]),e}(c["default"])},814:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function P(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:P(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(461),c=n(u),d=i(477),p=n(d),f=i(582),y=n(f),m=i(646),g=n(m),v=i(836),b=n(v),_=i(837),x=n(_),w=i(838),C=n(w);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.rot0=null,i.rot1=null,i.switchBtn=null,i.screen0=null,i.principle1=null,i.principle2=null,i.inside=null,i.light1=null,i.switchButton=null,i.numsManager=null,i.rotButton00=null,i.rotButton01=null,i.principleCon1=null,i.principleCon2=null,i.screenCon=null,i.type=0,i.isOpen=!1,i.curRotation=0,i.tarRotation=0,i.ticker=null,i.particleLife=100,i.particleN=0,i.k=.0224,i.types=[i.language.getLocaleStr("inner-structure"),i.language.getLocaleStr("principle-1"),i.language.getLocaleStr("principle-2")],i.ROT_STEP=1,i.MAX_ROTATION=150,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bg.p0.alpha=0,this.screen0.num0.gotoAndStop(10),this.numsManager=new y["default"]([this.screen0.num1,this.screen0.num2,this.screen0.num3],0,null),this.switchButton=new p["default"](this.switchBtn,this,1,0,this.switchCallBack,this.isOpen),this.rotButton00=new g["default"](this.rot0,this,0,1,this.rotCallBack00),this.rotButton01=new g["default"](this.rot1,this,0,1,this.rotCallBack01),this.updateRotation(),this.ticker=h.M.addTicker(this.update,this,!0),this.principleCon1=new b["default"],this.principle1.addChild(this.principleCon1),this.principleCon2=new x["default"],this.principle2.addChild(this.principleCon2),this.screenCon=new C["default"],this.screenCon.partxt=this.language.getLocaleStr("particles"),this.addChild(this.screenCon),this.setType(this.type),this.switchCallBack(null,this.isOpen)}},{key:"removed",value:function(){this.numsManager.destory(),this.numsManager=null,this.switchButton.destroy(),this.switchButton=null,this.rotButton00.destroy(),this.rotButton00=null,this.rotButton01.destroy(),this.rotButton01=null,h.M.removeTicker(this.ticker),this.ticker=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){if(this.isOpen){for(this.curRotation!==this.tarRotation&&this.updateRotation(),Math.random()>.9&&this.principleCon1.addParticle(),this.principleCon1.update(),Math.random()>.9&&this.principleCon2.addParticle(),this.principleCon2.update(),this.screenCon.life=this.particleLife,this.particleN+=this.getN(),this.particleN>1500&&(this.particleN=1500);this.particleN>0;)this.screenCon.addParticle(),this.particleN--;this.screenCon.update()}}},{key:"getN",value:function(){var t=h.M.toHu(this.curRotation)/2,e=Math.sin(t),i=.5+.02784/(278e-7+e*e*e*e);return i=(.4*Math.random()+.98)*i/this.particleLife}},{key:"updateRotation",value:function(){this.tarRotation>this.curRotation?this.curRotation++:this.curRotation>this.tarRotation&&this.curRotation--,.5>Math.abs(this.curRotation-this.tarRotation)&&(this.curRotation=this.tarRotation);var t=h.M.toHu(this.curRotation);this.inside.platform.rotation=t,this.inside.gear.rotation=2*-t,0>this.curRotation?(this.numsManager.setNum(-this.curRotation),this.screen0.neg.visible=!0):(this.numsManager.setNum(this.curRotation),this.screen0.neg.visible=!1)}},{key:"rotCallBack00",value:function(t,e){this.isOpen&&(this.tarRotation+=this.ROT_STEP)>this.MAX_ROTATION&&(this.tarRotation=this.MAX_ROTATION)}},{key:"rotCallBack01",value:function(t,e){this.isOpen&&(this.tarRotation-=this.ROT_STEP,-this.MAX_ROTATION>this.tarRotation&&(this.tarRotation=-this.MAX_ROTATION))}},{key:"switchCallBack",value:function(t,e){this.isOpen=e,this.isOpen?(this.switchButton.open(),this.screen0.visible=!0,this.screenCon.visible=this.principleCon1.visible=this.principleCon2.visible=!0,this.light1.gotoAndStop(1)):(this.switchButton.close(),this.screen0.visible=!1,this.screenCon.visible=this.principleCon1.visible=this.principleCon2.visible=!1,this.light1.gotoAndStop(0)),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE),this.freshGlow()}},{key:"setType",value:function(t){switch(this.type=t,this.principle1.visible=this.principle2.visible=this.inside.visible=!1,t){case 1:this.principle1.visible=!0;break;case 2:this.principle2.visible=!0;break;case 0:default:this.type=0,this.inside.visible=!0}}},{key:"typeChanged",value:function(t){this.setType(t.checked)}},{key:"rotationChanged",value:function(t){this.curRotation=this.tarRotation=t.showValue,this.updateRotation()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.isOpen=this.isOpen,t.curRotation=this.curRotation,t.type=this.type,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.isOpen=t.isOpen,this.curRotation=t.curRotation,this.type=t.type,this.switchCallBack(null,this.isOpen),this.typeChanged({checked:this.type}),this.rotationChanged({showValue:this.curRotation})}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("type"),this.type,this.types,this.typeChanged.bind(this)),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("deflection_angle"),!0,"°",this.MAX_ROTATION,-this.MAX_ROTATION,{get value(){return t.curRotation},set value(e){t.curRotation=e}},1,this.rotationChanged,this)),i}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("type")+": "+this.types[this.type]+"\n    "+this.language.getLocaleStr("deflection_angle")+": "+this.curRotation+"°\n    "}},{key:"showGlowSP",value:function(t){t?(this.showGlowIndex(0),this.isOpen?(this.glowSPArr[0][0].visible=!1,this.glowSPArr[0][1].visible=!0):(this.glowSPArr[0][0].visible=!0,this.glowSPArr[0][1].visible=!1)):this.hideGlow()}}]),e}(c["default"])},815:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:g(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(461),c=n(u),d=i(644),p=n(d),f=i(643),y=n(f),m=i(229);n(m);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bombImplosion=null,i.atomicBomb=null,i.isAnimPlaying=!1,i.framerate=24,i.emitBtn=new PIXI.Graphics,i.addChild(i.emitBtn),i.emitBtn.beginFill(16711680,0),i.emitBtn.drawCircle(-72,-2,30),i.addCursor(i.emitBtn,"hand"),i.touchId=h.M.addTouch(i.emitBtn,{tab:function(){i.emitChanged(null)}},i),i.main.setAnimateAssets(y["default"].assets),PIXI.animate.load(y["default"],i,function(t){i.atomicBomb=t,i.addChild(i.emitBtn),t.gotoAndStop(0),t.visible=!1,t.loop=!1,i.atomicBomb.x=-350,i.atomicBomb.y=-320}),i.main.setAnimateAssets(p["default"].assets),PIXI.animate.load(p["default"],i,function(t){i.bombImplosion=t,i.addChild(i.emitBtn),i.bg=t,t.x=-280,t.y=-140,t.gotoAndStop(0),t.visible=!0,t.loop=!1,t.addAction(function(){i.isAnimPlaying=!1,t.gotoAndStop(0),i.bombPlay(!1)},t.totalFrames-1),t.addAction(function(){i.bombPlay(!0)},80)}),i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"removed",value:function(){this.removedCursor(this.emitBtn),h.M.removeTouch(this.emitBtn,this.touchId),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"bombPlay",value:function(t){this.atomicBomb&&(t?(this.atomicBomb.gotoAndPlay(0),this.atomicBomb.visible=!0):(this.atomicBomb.gotoAndStop(0),this.atomicBomb.visible=!1))}},{key:"emitChanged",value:function(t){this.bombImplosion&&!this.isAnimPlaying&&(this.isAnimPlaying=!0,this.bombImplosion.visible=!0,this.bombImplosion.gotoAndPlay(0))}},{key:"framerateChanged",value:function(t){this.framerate=t.showValue,this.bombImplosion&&(this.bombImplosion.framerate=this.framerate),this.atomicBomb&&(this.atomicBomb.framerate=this.framerate)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.framerate=this.framerate,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.framerateChanged({showValue:t.framerate||24})}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getButton(this.language.getLocaleStr("emit"),this.language.getLocaleStr("emit"),this.emitChanged,this),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("speed"),!1,"",60,1,this.framerate,1,this.framerateChanged,this)),t}},{key:"getTipMess",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this)}}]),e}(c["default"])},816:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:g(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(49),u=i(1),c=i(461),d=n(c),p=i(648),f=n(p),y=i(517),m=n(y);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=0;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.paper=null,i.bp0=null,i.bp1=null,i.bp2=null,i.bp3=null,i.lineMask=null,i.bgLight=null,i.lineGra=null,i.B=0,i.voltage01=0,i.voltage02=0,i.paperRect=null,i.eRect=null,i.pxmm=.8,i.lightGain=0,i.elecConnect=!1,i.MAX_RESISTANCE=1e6,i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.paperRect=this.paper.getLocalBounds(),this.eRect=new u.Rectangle(this.px2mm(-75-this.paper.x),this.px2mm(-114-this.paper.y),this.px2mm(35),this.px2mm(12)),this.bp0.visible=!1,this.bp1.visible=!1,this.bp2.visible=!1,this.bp3.visible=!1,this.bgLight.visible=!1,this.lineGra=new PIXI.Graphics,this.addChild(this.lineGra),this.lineGra.mask=this.lineMask.getChildAt(0),this.lineGra.x=this.paper.x,this.lineGra.y=this.paper.y,this.magElecChanged=function(e){t.magChangHandler(e)},this.globalConfig.main.addEventListener("magElecChanged",this.magElecChanged)}},{key:"removed",value:function(){this.globalConfig.main.removeEventListener("magElecChanged",this.magElecChanged),this.magElecChanged=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"magChangHandler",value:function(){this.elecChanged()}},{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[1,1],[2,0],[2,1]],res:[[1,this.MAX_RESISTANCE],[2,this.MAX_RESISTANCE]]}),this.bar1.elecConnect=!1,this.bar2.elecConnect=!1}},{key:"overStep",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"overStep",this).call(this),this.voltage01=this.bar1.curPower,this.voltage02=this.bar2.curPower,this.refreshLine()}},{key:"elecChanged",value:function(){this.bar1.branchChange=!0}},{key:"refreshLine",value:function(){if(this.lineGra.clear(),2e3>=this.voltage01)return this.bgLight.visible&&this.elecChanged(),this.bgLight.visible=!1,this.bar1.elecConnect=!1,void(this.bar1.Resistance=this.MAX_RESISTANCE);this.bgLight.visible||this.elecChanged(),this.bar1.elecConnect=!0,this.bgLight.visible=!0,this.bar1.Resistance=this.MAX_RESISTANCE*this.AtomicUtil.getR(this.voltage01,1e3,.9);var t=this.px2mm(this.paperRect.width),e=this.px2mm(this.paperRect.height/2),i=this.voltage01,n=this.voltage02,o=this.eRect.height,r=Math.sqrt(-2*i*f["default"].E_ME),a=n/o,s=void 0,l=-a*f["default"].E_ME,h=new u.Point(0,0),c=new u.Point(0,0),d=0,p=new u.Point(r,0),y=0,g=new u.Point(0,0),v=new u.Point(0,0),b=new u.Point(this.eRect.x,this.eRect.y),_=new u.Point(this.eRect.x+this.eRect.width,this.eRect.y),x=new u.Point(this.eRect.x,this.eRect.y+this.eRect.height),w=new u.Point(this.eRect.x+this.eRect.width,this.eRect.y+this.eRect.height),C=2549804,P=m["default"].rgb2hsv(38,232,44),k=this.dB2times(this.lightGain);this.bgLight.alpha=Math.sqrt(k),P.v*=k;var T=m["default"].hsv2rgb(P.h,P.s,P.v);for(C=m["default"].rgb2color(T.r,T.g,T.b),this.lineGra.lineStyle(2,C,1),this.lineGra.moveTo(this.mm2px(c.x),this.mm2px(c.y));;){v.x=c.x,v.y=c.y;s=this.AtomicUtil.getBAtPoint(this.paper.toGlobal(c)).z,g.x=p.y*s*f["default"].E_ME,g.y=-p.x*s*f["default"].E_ME,y=this.eRect.containsPoint(c)?l:0,h.x=g.x,h.y=y+g.y;var O=1/Math.max(p.length,1);if(p.x+=h.x*O,p.y+=h.y*O,c.x+=p.x*O,c.y+=p.y*O,this.lineGra.lineTo(this.mm2px(c.x),this.mm2px(c.y)),u.M.checkJPIsInABCD(c,v,b,_)||u.M.checkJPIsInABCD(c,v,x,w))break;if(c.x>=0+t)break;if(Math.abs(c.y)>=e)break;if(++d>1e3)break}}},{key:"px2mm",value:function(t){return t*this.pxmm}},{key:"mm2px",value:function(t){return t/this.pxmm}},{key:"lightGainChanged",value:function(t){this.lightGain=t.showValue,this.refreshLine()}},{key:"dB2times",value:function(t){return Math.pow(10,.1*t)}},{key:"times2dB",value:function(t){return 10*Math.log10(t)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.lightGain=this.lightGain,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.lightGain=t.lightGain||0,this.refreshLine()}},{key:"setDataOver",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.elecChanged()}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("light_intensity_gain"),!1,"dB",10,0,(0,h.round)(this.lightGain,1),.1,this.lightGainChanged,this)),t}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("light_intensity_gain")+": "+(0,h.round)(this.lightGain,1)+"dB\n    "}}]),e}(d["default"])},817:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:g(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(49),u=i(1),c=i(461),d=n(c),p=i(477),f=n(p),y=i(646),m=n(y);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.platform=null,i.detector=null,i.rot=null,i.switch00=null,i.light01=null,i.light02=null,i.startBtn=null,i.resetBtn=null,i.axis=null,i.switchButton=null,i.startButton=null,i.resetButton=null,i.screenCon=null,i.isOpen=!1,i.lineGra=null,i.pointGra=null,i.state=0,i.angleArr=[-20,-30,-60,-80,-100,-120],i.R=[{x:20,y:322},{x:40,y:270},{x:60,y:209},{x:80,y:166},{x:100,y:135},{x:120,y:115}],i.pArr=[],i.detectN=0,i.startRot=u.M.toHu(90),i.scanningNext=0,i.principleMc=null,i.pricipleFlag=!1,i.animationSpeed=.5,i.NORMAL=0,i.SCANNING=1,i.DETECTING=2,i.RESETING=3,i.N=0,i.SCAN_SPEED=.01,i.RESET_SPEED=.01,i.DETECT_N=20,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.screenCon=new PIXI.Container,this.addChild(this.screenCon),this.screenCon.addChild(this.axis),this.screenCon.addChild(this.startBtn),this.screenCon.addChild(this.resetBtn),this.screenCon.visible=!1,this.lineGra=new PIXI.Graphics,this.pointGra=new PIXI.Graphics,this.screenCon.addChild(this.lineGra),this.screenCon.addChild(this.pointGra),this.pointGra.x=this.lineGra.x=this.axis.x,this.pointGra.y=this.lineGra.y=this.axis.y,this.lineGra.scale.y=-1,this.pointGra.scale.y=-1;for(var t=0;this.angleArr.length>t;t++)this.angleArr[t]=u.M.toHu(this.angleArr[t])+this.startRot;this.detector.rotation=this.startRot,this.updateRotRotation(),this.screenCon.addChild(this.principleMc),this.switchButton=new f["default"](this.switch00,this,1,0,this.switchCallBack,this.isOpen,[this.light01,this.light02]),this.startButton=new m["default"](this.startBtn,this,0,1,this.startCallBack),this.resetButton=new m["default"](this.resetBtn,this,0,1,this.resetCallBack),this.ticker=u.M.addTicker(this.update,this,!0)}},{key:"removed",value:function(){u.M.removeTicker(this.ticker),this.ticker=null,this.switchButton.destroy(),this.switchButton=null,this.startButton.destroy(),this.startButton=null,this.resetButton.destroy(),this.resetButton=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){if(this.isOpen)if(this.state===this.SCANNING){if(this.angleArr[this.angleArr.length-1]>this.detector.rotation)return void(this.state=this.NORMAL);this.detector.rotation-=this.SCAN_SPEED;for(var t=!1,e=this.angleArr.length,i=0;e>i;i++)if(Math.abs(this.detector.rotation-this.angleArr[i])<=this.SCAN_SPEED/2){this.detectN=i,this.scanningNext=i===e-1?this.NORMAL:this.SCANNING,t=!0;break}t&&(this.state=this.DETECTING,this.N=this.DETECT_N),this.updateRotRotation()}else this.state===this.DETECTING?--this.N>0||(this.state=this.scanningNext,this.drawDetect()):this.state===this.RESETING&&(this.detector.rotation+=this.RESET_SPEED,this.startRot>this.detector.rotation||(this.detector.rotation=this.startRot,this.state=this.NORMAL),this.updateRotRotation())}},{key:"updateRotRotation",value:function(){this.rot.rotation=.1*(this.detector.rotation-this.startRot)}},{key:"drawDetect",value:function(){var t=this.R[this.detectN];if(this.pointGra.lineStyle(1,13784116,.8),this.pointGra.beginFill(13784116),this.pointGra.drawCircle(t.x*(220/150),t.y*(200/350),2),this.pointGra.endFill(),this.pArr.length){var e=this.pArr[this.pArr.length-1];this.lineGra.lineStyle(1,0,.8),this.lineGra.moveTo(e.x*(220/150),e.y*(200/350)),this.lineGra.lineTo(t.x*(220/150),t.y*(200/350))}this.pArr.push(t)}},{key:"switchCallBack",value:function(t,e){this.isOpen=e,this.screenCon.visible=this.isOpen,this.state=this.NORMAL,this.resetCallBack(null,null),this.isOpen&&this.showPrincipleChange({checked:!1}),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"startCallBack",value:function(t,e){this.state=this.SCANNING}},{key:"resetCallBack",value:function(t,e){this.pointGra.clear(),this.lineGra.clear(),this.pArr=[],this.state=this.RESETING}},{key:"showPrincipleChange",value:function(t){this.pricipleFlag=t.checked,this.principleMc.visible=this.pricipleFlag,this.pointGra.visible=this.lineGra.visible=this.resetBtn.visible=this.startBtn.visible=this.axis.visible=!this.pricipleFlag,this.pricipleFlag&&(this.principleMc.animationSpeed=this.animationSpeed,this.principleMc.gotoAndPlay(0)),this.freshLibPan()}},{key:"speedChanged",value:function(t){this.animationSpeed=t.showValue,this.principleMc.animationSpeed=this.animationSpeed}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.animationSpeed=this.animationSpeed,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.animationSpeed=t.animationSpeed}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getSwitch(this.language.getLocaleStr("principle"),this.pricipleFlag,this.showPrincipleChange,this)),this.pricipleFlag&&t.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("speed"),!1,"",1,0,(0,h.round)(this.animationSpeed,2),.01,this.speedChanged,this)),t}}]),e}(d["default"])},818:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:g(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(49),u=i(1),c=i(461),d=n(c),p=i(477),f=n(p),y=i(582),m=n(y);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.hideMc=null,i.switchBtn=null,i.light=null,i.lv=null,i.paper=null,i.principleCon=null,i.qian=null,i.num0=null,i.num1=null,i.num2=null,i.num3=null,i.num4=null,i.num5=null,i.switchButton=null,i.numsManager=null,i.isOpen=!1,i.principleFlag=!0,i.alphaFlag=!0,i.betaFlag=!0,i.gamaFlag=!0,i.paperFlag=!0,i.lvFlag=!1,i.qianFlag=!1,i.paperNum=1,i.lvNum=5,i.qianNum=5,i.alphaStrength=5,i.betaStrength=5,i.gamaStrength=5,i.principleCon=null,i.alphaArr=[],i.betaArr=[],i.gamaArr=[],i.gamaPArr=[],i.alphaPool=[],i.betaPool=[],i.gamaPool=[],i.gamaNum=0,i.pNum=0,i.n=0,i.a=130,i.b=280,i.c=455,i.d=600,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.hideMc=this.principleCon.hideMc,this.paper=this.principleCon.paper,this.lv=this.principleCon.lv,this.qian=this.principleCon.qian,this.clearCon(this.paper),this.clearCon(this.lv),this.clearCon(this.qian);for(var t=0;10>t;t++){var i=PIXI.Sprite.fromFrame("CosmicRays/paper.png"),n=PIXI.Sprite.fromFrame("CosmicRays/lv.png"),o=PIXI.Sprite.fromFrame("CosmicRays/qian.png");this.paper.addChildAt(i,0),i.x=-i.width/2+t,i.y=-i.height/2,this.lv.addChildAt(n,0),n.x=-n.width/2+2*t,n.y=-n.height/2,this.qian.addChildAt(o,0),o.x=-o.width/2+2*t,o.y=-o.height/2}this.paper.removeChildAt(0),this.hideMc.visible=!1,this.switchButton=new f["default"](this.switchBtn,this,1,0,this.switchCallBack,this.isOpen,[this.light]),this.numsManager=new m["default"]([this.num0,this.num1,this.num2,this.num3,this.num4,this.num5],0,null),this.numsManager.setNum(0),this.numsManager.hide(),this.switchCallBack(null,this.isOpen);for(var r=0;100>r;r++){var a=new PIXI.Point;a.x=0,a.y=100*Math.random()+80,this.gamaPArr.push(a)}this.ticker=u.M.addTicker(this.update,this,!0)}},{key:"clearCon",value:function(t){for(;t.children.length;)t.removeChildAt(0)}},{key:"removed",value:function(){this.numsManager.destory(),this.numsManager=null,this.switchButton.destroy(),this.switchButton=null,u.M.removeTicker(this.ticker),this.ticker=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){this.principleCon.visible=this.principleFlag,this.paper.visible=this.paperFlag,this.lv.visible=this.lvFlag,this.qian.visible=this.qianFlag,this.isOpen&&this.emitRays(),this.updateRays(),0===this.n&&(this.numsManager.setNum(this.pNum*(1e3+10*Math.random())),this.pNum=0),this.n++,this.n>60&&(this.n=0),this.updatePaperNum(),this.updateLvNum(),this.updateQianNum()}},{key:"emitRays",value:function(){if(this.alphaFlag&&10*Math.random()<this.alphaStrength){var t=this.getAlphaParticle();this.addParticle(t),this.alphaArr.push(t)}if(this.betaFlag&&10*Math.random()<this.betaStrength){var e=this.getBetaPartical();this.addParticle(e),this.betaArr.push(e)}this.gamaNum=2*this.gamaStrength+1}},{key:"addParticle",value:function(t){this.principleCon.addChild(t),t.x=0,t.y=100*Math.random()+80,t.step=0}},{key:"updateRays",value:function(){for(var t=this.alphaArr.length-1;t>=0;t--){var e=this.alphaArr[t];e.x+=3,e.visible=this.alphaFlag,e.x>this.d||!this.alphaPassThrough(e)?(this.principleCon.removeChild(e),this.alphaPool.push(e),this.alphaArr.splice(t,1),e.x>this.d&&(this.pNum+=2)):this.updateIndex(e)}for(var i=this.betaArr.length-1;i>=0;i--){var n=this.betaArr[i];n.visible=this.betaFlag,n.x+=8,n.x>this.d||!this.betaPassThrough(n)?(this.principleCon.removeChild(n),this.betaPool.push(n),this.betaArr.splice(i,1),n.x>this.d&&(this.pNum+=2)):this.updateIndex(n)}for(var o=this.gamaArr.length-1;o>=0;o--){var r=this.gamaArr[o];this.principleCon.removeChild(r),this.gamaPool.push(r)}this.gamaArr.length=0;for(var a=this.isOpen&&this.gamaFlag,s=0;this.gamaNum>s;s++){var l=this.gamaPArr[s],h=(this.addGama(l.x,l.y,this.principleCon.children.length,a,this.a),this.addGama(this.a,l.y,this.principleCon.getChildIndex(this.paper),a,this.b-this.a),this.addGama(this.b,l.y,this.principleCon.getChildIndex(this.lv),a,this.c-this.b),this.addGama(this.c,l.y,this.principleCon.getChildIndex(this.qian),a,this.d-this.c));this.qianFlag&&(h.visible=!1),h.visible&&(this.pNum+=.1)}}},{key:"addGama",value:function(t,e,i,n,o){var r=this.getGamaPatical();return this.gamaArr.push(r),this.principleCon.addChildAt(r,i),r.visible=n,r.width=o+2,r.x=t,r.y=e,r}},{key:"alphaPassThrough",value:function(t){return this.qianFlag&&t.x>this.c&&2===t.step?0>=this.qianNum:this.lvFlag&&t.x>this.b&&1===t.step?0>=this.lvNum:!this.paperFlag||this.a>=t.x||0!==t.step||1>this.paperNum}},{key:"betaPassThrough",value:function(t){if(this.qianFlag&&t.x>this.c&&2===t.step)return 0>=this.qianNum;if(this.lvFlag&&t.x>this.b&&1===t.step){var e=2*(this.betaStrength-1)/9+3;return Math.random()*e>this.lvNum}return!this.paperFlag||this.a>=t.x||0!==t.step||500*Math.random()>this.paperNum}},{key:"updateIndex",value:function(t){t.x>this.c&&2===t.step?(t.step=3,this.principleCon.setChildIndex(t,this.principleCon.getChildIndex(this.qian))):t.x>this.b&&1===t.step?(t.step=2,this.principleCon.setChildIndex(t,this.principleCon.getChildIndex(this.lv))):t.x>this.a&&0===t.step&&(t.step=1,this.principleCon.setChildIndex(t,this.principleCon.getChildIndex(this.paper)))}},{key:"getAlphaParticle",value:function(){var t=this.alphaPool.pop();return t||(t=PIXI.Sprite.fromFrame("CosmicRays/alpha.png")),t}},{key:"getBetaPartical",value:function(){var t=this.betaPool.pop();return t||(t=PIXI.Sprite.fromFrame("CosmicRays/beta.png")),t}},{key:"getGamaPatical",value:function(){var t=this.gamaPool.pop();return t||(t=PIXI.Sprite.fromFrame("CosmicRays/gama.png")),t}},{key:"addSp",value:function(t,e,i){var n=new PIXI.Sprite;return t.addChild(n),n.x=e,n.y=i,n}},{key:"updatePaperNum",value:function(){for(var t=this.paper.children.length,e=0;t>e;e++){this.paper.children[t-1-e].visible=!(this.paperNum<=e)}}},{key:"updateLvNum",value:function(){for(var t=this.lv.children.length,e=0;t>e;e++){this.lv.children[t-1-e].visible=!(this.lvNum<=e)}}},{key:"updateQianNum",value:function(){for(var t=this.qian.children.length,e=0;t>e;e++){this.qian.children[t-1-e].visible=!(this.qianNum<=e)}}},{key:"switchCallBack",value:function(t,e){this.isOpen=e,this.isOpen?(this.switchButton.open(),this.numsManager.show()):(this.switchButton.close(),this.numsManager.hide()),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.isOpen=this.isOpen,t.principleFlag=this.principleFlag,t.alphaFlag=this.alphaFlag,t.betaFlag=this.betaFlag,t.gamaFlag=this.gamaFlag,t.paperFlag=this.paperFlag,t.lvFlag=this.lvFlag,t.qianFlag=this.qianFlag,t.paperNum=this.paperNum,t.lvNum=this.lvNum,t.qianNum=this.qianNum,t}},{key:"setData",value:function(t){this.isOpen=!!t.isOpen,this.principleFlag=!!t.principleFlag,this.alphaFlag=!!t.alphaFlag,this.betaFlag=!!t.betaFlag,this.gamaFlag=!!t.gamaFlag,this.paperFlag=!!t.paperFlag,this.lvFlag=!!t.lvFlag,this.qianFlag=!!t.qianFlag,this.paperNum=t.paperNum||1,this.lvNum=t.lvNum||1,this.qianNum=t.qianNum||1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.switchCallBack(null,this.isOpen)}},{key:"principleChanged",value:function(t){this.principleFlag=t.checked}},{key:"alphaChanged",value:function(t){this.alphaFlag=t.checked}},{key:"alphaStrengthChanged",value:function(t){this.alphaStrength=t.showValue}},{key:"betaChanged",value:function(t){this.betaFlag=t.checked}},{key:"betaStrengthChanged",value:function(t){this.betaStrength=t.showValue}},{key:"gamaChanged",value:function(t){this.gamaFlag=t.checked}},{key:"gamaStrengthChanged",value:function(t){this.gamaStrength=t.showValue}},{key:"paperChanged",value:function(t){this.paperFlag=t.checked}},{key:"lvChanged",value:function(t){this.lvFlag=t.checked}},{key:"qianChanged",value:function(t){this.qianFlag=t.checked}},{key:"paperThickChanged",value:function(t){this.paperNum=t.showValue}},{key:"lvThickChanged",value:function(t){this.lvNum=t.showValue}},{key:"qianThickChanged",value:function(t){this.qianNum=t.showValue}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getSwitch(this.language.getLocaleStr("principle"),this.principleFlag,this.principleChanged,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("alpha_ray"),this.alphaFlag,this.alphaChanged,this),(0,h.merge)(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("alpha_ray")+this.language.getLocaleStr("strength"),!1,"",10,1,(0,h.round)(this.alphaStrength,0),1,this.alphaStrengthChanged,this),{depend:[{name:this.language.getLocaleStr("alpha_ray"),visible:{checked:!0}}]}),this.ComponentProperty.getSwitch(this.language.getLocaleStr("beta_ray"),this.betaFlag,this.betaChanged,this),(0,h.merge)(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("beta_ray")+this.language.getLocaleStr("strength"),!1,"",10,1,(0,h.round)(this.betaStrength,0),1,this.betaStrengthChanged,this),{depend:[{name:this.language.getLocaleStr("beta_ray"),visible:{checked:!0}}]}),this.ComponentProperty.getSwitch(this.language.getLocaleStr("gama_ray"),this.gamaFlag,this.gamaChanged,this),(0,h.merge)(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("gama_ray")+this.language.getLocaleStr("strength"),!1,"",10,1,(0,h.round)(this.gamaStrength,0),1,this.gamaStrengthChanged,this),{depend:[{name:this.language.getLocaleStr("gama_ray"),visible:{checked:!0}}]}),this.ComponentProperty.getSwitch(this.language.getLocaleStr("paper"),this.paperFlag,this.paperChanged,this),(0,h.merge)(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("paper")+this.language.getLocaleStr("houdu"),!1,"",10,1,(0,h.round)(this.paperNum,0),1,this.paperThickChanged,this),{depend:[{name:this.language.getLocaleStr("paper"),visible:{checked:!0}}]}),this.ComponentProperty.getSwitch(this.language.getLocaleStr("aluminum"),this.lvFlag,this.lvChanged,this),(0,h.merge)(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("aluminum")+this.language.getLocaleStr("houdu"),!1,"",10,1,(0,h.round)(this.lvNum,1),.1,this.lvThickChanged,this),{depend:[{name:this.language.getLocaleStr("aluminum"),visible:{checked:!0}}]}),this.ComponentProperty.getSwitch(this.language.getLocaleStr("lead"),this.qianFlag,this.qianChanged,this),(0,h.merge)(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("lead")+this.language.getLocaleStr("houdu"),!1,"",10,1,(0,h.round)(this.qianNum,1),.1,this.qianThickChanged,this),{depend:[{name:this.language.getLocaleStr("lead"),visible:{checked:!0}}]})),t}}]),e}(d["default"])},819:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function y(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:y(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(461),u=n(h),c=i(477),d=n(c),p=i(486),f=n(p);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=2;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.rot0=null,i.switchBtn=null,i.pointer=null,i.light=null,i.bp0=null,i.bp1=null,i.switchButton=null,i.rotateButton00=null,i.isOpen=!1,i.voltageArr=[250,300,600,1e3,1200,1500],i.voltageLevel=2,i.voltage=i.voltageArr[i.voltageLevel],i.ang=76*Math.PI/180,i.pointerAng=48*Math.PI/180,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bp0.visible=!1,this.bp1.visible=!1,this.switchButton=new d["default"](this.switchBtn,this,1,0,this.switchCallBack,this.isOpen),this.rotateButton00=new f["default"](this.rot0,this,2*this.ang/5,-this.ang,this.ang,0,this.rotateCalback00),this.rotateButton00.setLevel0Angle(-this.ang),this.rotateButton00.setLevel(this.voltageLevel),this.updatePointer(),this.voltageChanged()}},{key:"removed",value:function(){this.rotateButton00.destroy(),this.rotateButton00=null,this.switchButton.destroy(),this.switchButton=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"rotateCalback00",value:function(t,e,i,n){this.voltageLevel=this.rotateButton00.getLevel(),this.voltage=this.voltageArr[this.voltageLevel],this.voltageChanged(),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"voltageChanged",value:function(){this.Power=this.isOpen?this.voltage:0,this.updatePointer(),this.elecChanged()}},{key:"switchCallBack",value:function(t,e){this.isOpen=e,this.voltageChanged(),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE),this.freshGlow()}},{key:"updatePointer",value:function(){this.pointer.rotation=this.AtomicUtil.linearMapping([0,2e3],[-this.pointerAng,this.pointerAng],this.Power)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.isOpen=this.isOpen,t.voltage=this.voltage,t.voltageLevel=this.voltageLevel,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.isOpen=t.isOpen,this.voltage=t.voltage,this.voltageLevel=t.voltageLevel,this.rotateButton00.setLevel(this.voltageLevel),this.isOpen?this.switchButton.open():this.switchButton.close(),this.voltageChanged()}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}},{key:"showGlowSP",value:function(t){t?(this.showGlowIndex(0),this.isOpen?(this.glowSPArr[0][0].visible=!1,this.glowSPArr[0][1].visible=!0):(this.glowSPArr[0][0].visible=!0,this.glowSPArr[0][1].visible=!1)):this.hideGlow()}}]),e}(u["default"])},820:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function x(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:x(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(49),u=i(461),c=n(u),d=i(582),p=n(d),f=i(477),y=n(f),m=i(486),g=n(m),v=i(494),b=n(v);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.circle=null,i.switchBtn=null,i.num0=null,i.num1=null,i.num2=null,i.num3=null,i.rot0=null,i.rot1=null,i.rot2=null,i.rot3=null,i.rot4=null,i.rot5=null,i.numsManager=null,i.switchButton=null,i.rotateButton00=null,i.rotateButton04=null,i.rotateButton05=null,i.voltage=12,i.offsetX=0,i.offsetY=0,i.diffCon=new PIXI.Container,i.diffractionGra=new PIXI.Graphics,i.isOpen=!1,i.MillerIndex=i.getMillerIndex(8),i.IMAGE_WIDTH=186,i.IMAGE_HEIGHT=186,i.diffImage=new b["default"](i.IMAGE_WIDTH,i.IMAGE_HEIGHT),i.diffImageData=i.diffImage.context.getImageData(0,0,i.IMAGE_WIDTH,i.IMAGE_HEIGHT),i.radialGradient=new _(65280,0,180),i.aAl=.405,i.c=1.226479921826806,i.lamda=i.getLamda(),i.L=1500,i.rArr=[],i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.numsManager=new p["default"]([this.num0,this.num1,this.num2,this.num3],1,null),this.numsManager.setNum(this.voltage),this.switchButton=new y["default"](this.switchBtn,this,1,0,this.switchCallBack,this.isOpen);var t=2*Math.PI;this.rotateButton00=new g["default"](this.rot0,this,0,-t,t,0,this.rotateCalback00),this.rotateButton04=new g["default"](this.rot4,this,0,-t,t,0,this.rotateCalback04),this.rotateButton05=new g["default"](this.rot5,this,0,-t,t,0,this.rotateCalback05),this.addChildAt(this.diffCon,0),this.diffCon.x=this.circle.x,this.diffCon.y=this.circle.y,this.circle.x=0,this.circle.y=0,this.diffImage.x=-this.IMAGE_WIDTH/2,this.diffImage.y=-this.IMAGE_HEIGHT/2,this.diffCon.addChild(this.circle),this.diffCon.addChild(this.diffImage),this.diffImage.updateTexture();var i=new PIXI.filters.BlurFilter;i.blur=5,i.passes=3,this.diffractionGra.filters=[i],this.diffractionGra.blendMode=PIXI.BLEND_MODES.SCREEN;var n=new PIXI.Graphics;this.diffCon.addChild(n),this.diffCon.mask=n,n.beginFill(0,.5),n.drawRect(-this.IMAGE_WIDTH/2,-this.IMAGE_HEIGHT/2,this.IMAGE_WIDTH,this.IMAGE_HEIGHT),n.endFill(),this.debounceRefresh=(0,h.throttle)(this.refreshDiffractionImage,30),this.refreshDiffractionImage(),this.updateAll()}},{key:"rotateCalback00",value:function(t,e,i,n){this.voltage=12+8*e/(2*Math.PI),this.isOpen&&this.numsManager.setNum(this.voltage),this.debounceRefresh()}},{key:"rotateCalback04",value:function(t,e,i,n){this.offsetX=50*e/(2*Math.PI),this.debounceRefresh()}},{key:"rotateCalback05",value:function(t,e,i,n){this.offsetY=50*e/(2*Math.PI),this.debounceRefresh()}},{key:"switchCallBack",value:function(t,e){this.isOpen=e,this.diffImage.visible=this.isOpen,this.diffractionGra.visible=this.isOpen,this.circle.visible=!this.isOpen,this.numsManager.setNum(this.isOpen?this.voltage:0),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE),this.freshGlow()}},{key:"updateAll",value:function(){this.rotateButton00.setRotation((this.voltage-12)*(2*Math.PI)/8,!1),this.rotateButton04.setRotation(this.offsetX*(2*Math.PI)/50,!1),this.rotateButton05.setRotation(this.offsetY*(2*Math.PI)/50,!1),this.switchCallBack(null,this.isOpen),this.isOpen?this.switchButton.open():this.switchButton.close(),this.debounceRefresh()}},{key:"refreshDiffractionImage",value:function(){this.diffractionGra.clear();var t=this.MillerIndex,e=this.getLamda(),i=this.L;this.rArr[0]=0;for(var n=1;t.length>n;n++){var o=.405/Math.sqrt(t[n].r),r=e/(2*o),a=i*r;this.rArr[n]=a;this.diffractionGra.lineStyle(1,16777215,1),this.diffractionGra.drawCircle(this.offsetX,this.offsetY,a),1===n&&(this.diffractionGra.beginFill(16777215,1),this.diffractionGra.drawCircle(this.offsetX,this.offsetY,a/2),this.diffractionGra.endFill())}for(var s=this.diffImageData.data,l=0,h=this.IMAGE_WIDTH/2+this.offsetX,u=this.IMAGE_HEIGHT/2+this.offsetY,c=0;this.IMAGE_WIDTH>c;c++)for(var d=0;this.IMAGE_HEIGHT>d;d++){var p=this.getRgb(c-u,d-h),f=this.getRgb2(c-u,d-h),y=255-(255-p[0])*(255-f[0])/255,m=255-(255-p[1])*(255-f[1])/255,g=255-(255-p[2])*(255-f[2])/255;s[l]=y,s[l+1]=m,s[l+2]=g,s[l+3]=255,l+=4}this.diffImage.context.putImageData(this.diffImageData,0,0),this.diffImage.updateTexture()}},{key:"getRgb",value:function(t,e){return this.radialGradient.getRgb(t,e)}},{key:"getRgb2",value:function(t,e){var i=0,n=Math.sqrt(t*t+e*e);this.B||(this.B=.25,this.C=.0065,this.lightGain=1,this.B=.3,this.C=.2,this.lightGain=200);for(var o=0;this.rArr.length>o;o++){var r=this.rArr[o],a=Math.PI*(n-r)*this.B,s=Math.PI*n*this.C,l=1;0!==a&&(l=Math.sin(a)/a),0!==s&&(l*=Math.sin(s)/s),i+=l*l}return i*=255*this.lightGain,[i,i,i]}},{key:"getLamda",value:function(){return 1.226479921826806/Math.sqrt(1e3*this.voltage)}},{key:"getMillerIndex",value:function(t){for(var e=[],i=0;t>i;i++)for(var n=0;t>n;n++)for(var o=0;t>o;o++)if((i+n)%2==0&&(n+o)%2==0&&(o+i)%2==0){var r={hkl:[i,n,o],r:i*i+n*n+o*o};e.push(r)}e.sort(function(t,e){return t.r-e.r});for(var a=-1,s=[],l=0;e.length>l;l++){var h=e[l],u=h.hkl;h.r>a&&u[1]===u[2]&&(s.push(h),a=h.r)}return s}},{key:"removed",value:function(){this.switchButton.destroy(),this.rotateButton00.destroy(),this.rotateButton04.destroy(),this.rotateButton05.destroy(),this.switchButton=null,this.rotateButton00=null,this.rotateButton04=null,this.rotateButton05=null,this.debounceRefresh=null,this.diffImage.destroy(),this.diffImage=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.isOpen=this.isOpen,t.voltage=this.voltage,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.isOpen=t.isOpen,this.voltage=t.voltage,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.updateAll()}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}},{key:"showGlowSP",value:function(t){if(t){this.showGlowIndex(this.isOpen?1:0)}else this.hideGlow()}}]),e}(c["default"]);var _=function(){function t(e,i,n){o(this,t),this.color1=e,this.color2=i,this.r=n,this.r1=this.color1>>16&255,this.g1=this.color1>>8&255,this.b1=255&this.color1,this.r2=this.color2>>16&255,this.g2=this.color2>>8&255,this.b2=255&this.color2}return s(t,[{key:"getRgb",value:function(t,e){var i=Math.sqrt(t*t+e*e),n=i/this.r;return 0>n&&(n=0),n>1&&(n=1),[this.r1+(this.r2-this.r1)*n,this.g1+(this.g2-this.g1)*n,this.b1+(this.b2-this.b1)*n]}},{key:"getColor",value:function(t,e){var i=this.getRgb(t,e);return i[0]<<16|i[1]<<8|i[2]}}]),t}()},821:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function b(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:b(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(49),u=i(1),c=i(461),d=n(c),p=i(477),f=n(p),y=i(486),m=n(y),g=i(494),v=n(g);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.hideMc=null,i.light0=null,i.switch0=null,i.rot0=null,i.camera=null,i.bubble=null,i.baffle00=null,i.screen=null,i.switchButton00=null,i.rotateButton00=null,i.diffImage=null,i.diffImageData=null,i.elecCon=null,i.isOpen=!1,i.isMonitor=!1,i.baffled=!1,i.speedN=1,i.waveTexture01=null,i.waveTexture02=null,i.waveSp01=null,i.waveSp02=null,i.ticker=null,i.pixelReady=!1,i.waveVector01=[],i.waveVector02=[],i.waveVector03=[],i.waveLen01=0,i.waveLen02=0,i.waveLen03=0,i.screenMatrix=new PIXI.Matrix,i.screenMatrix.b=Math.tan(u.M.toHu(17.4)),i.screenMatrix.c=Math.tan(u.M.toHu(0)),i.elecPool=[],i.MAX_ROT=u.M.toHu(65),i.MIN_ROT=u.M.toHu(-65),i.MAX_SPEED=1e3,i.MIN_SPEED=1,i.IMAGE_WIDTH=680,i.IMAGE_HEIGHT=480,i.WAVE_WIDTH=530,i.WAVE_HEIGHT=300,i.SCREEN_WIDTH=i.WAVE_WIDTH,i.SCREEN_HEIGHT=300,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.hideMc.visible=!1,this.bg.p1.alpha=0,this.bg.p2.alpha=0,this.bg.p3.alpha=0,this.bg.p4.alpha=0,this.diffImage=new v["default"](this.IMAGE_WIDTH,this.IMAGE_HEIGHT),this.diffImageData=this.diffImage.context.getImageData(0,0,this.IMAGE_WIDTH,this.IMAGE_HEIGHT),this.screen.addChild(this.diffImage),this.diffImage.x=-this.IMAGE_WIDTH/2-20,this.diffImage.y=-this.IMAGE_HEIGHT/2-18,this.diffImage.updateTexture(),this.elecCon=new PIXI.Container,this.bubble.addChildAt(this.elecCon,2);var t=new PIXI.Graphics;this.bubble.addChild(t),t.beginFill(65280,1),t.drawCircle(0,0,180),t.endFill(),this.elecCon.mask=t,this.waveTexture01=PIXI.Texture.fromFrame("ElectronicInterference/wave1.png"),this.waveTexture02=PIXI.Texture.fromFrame("ElectronicInterference/wave2.png"),this.waveTexture03=PIXI.Texture.fromFrame("ElectronicInterference/wave3.png"),this.waveSp01=new PIXI.Sprite(this.waveTexture01),this.waveSp02=new PIXI.Sprite(this.waveTexture02),this.waveSp03=new PIXI.Sprite(this.waveTexture03);var i=new PIXI.filters.BlurFilter;i.blur=3,i.passes=1,this.diffImage.filters=[i],this.switchButton00=new f["default"](this.switch0,this,1,0,this.switchCallBack00,this.isOpen),this.rotateButton00=new m["default"](this.rot0,this,0,this.MIN_ROT,this.MAX_ROT,0,this.rotateCallBack00),this.speedChanged({showValue:this.speedN}),this.baffleChanged({checked:this.baffled}),this.monitorChanged({checked:this.isMonitor}),this.ticker=u.M.addTicker(this.update,this,!0),this.update()}},{key:"removed",value:function(){this.switchButton00.destroy(),this.switchButton00=null,this.rotateButton00.destroy(),this.rotateButton00=null,u.M.removeTicker(this.ticker),this.ticker=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){for(var t=this.elecCon.children.length-1;t>=0;t--){var e=this.elecCon.children[t];e.x+=e.speed,e.x>e.xend&&(this.elecCon.removeChildAt(t),this.elecPool.push(e))}if(this.isOpen&&(this.pixelReady||this.updatePixels(),this.pixelReady)){for(var i=0;this.speedN>i;i++){var n=this.getPosition(),o=this.toScreenP(n),r=4*(o.x+o.y*this.IMAGE_WIDTH);this.diffImageData.data[r]=255,this.diffImageData.data[r+1]=255,this.diffImageData.data[r+2]=255,this.diffImageData.data[r+3]=255}this.diffImage.context.putImageData(this.diffImageData,0,0),this.diffImage.updateTexture();var a=this.speedN;if(a=3*Math.sqrt(a),100*Math.random()<a){var s=this.getElecSp();s.x=-200,s.y=180*Math.random()-105,this.baffled||Math.random()>.5?(s.scale.x=s.scale.y=.8,s.speed=8,s.xend=15,this.elecCon.addChildAt(s,0)):(s.scale.x=s.scale.y=1,s.speed=10,s.xend=60,this.elecCon.addChild(s))}}}},{key:"toScreenP",value:function(t){var e=new PIXI.Point(t.x-this.WAVE_WIDTH/2,t.y-this.WAVE_HEIGHT/2),i=this.screenMatrix.apply(e),n=1+64/620*t.x/this.IMAGE_WIDTH;return i.x=Math.round(i.x+this.IMAGE_WIDTH/2),i.y=Math.round(i.y*n+this.IMAGE_HEIGHT/2),i}},{key:"getElecSp",value:function(){var t=this.elecPool.pop();return t||(t=PIXI.Sprite.fromFrame("ElectronicInterference/electronics.png")),t}},{key:"getPosition",value:function(){var t=void 0;return this.baffled?t=this.isMonitor?this.getPosition03():this.getPosition01():this.isMonitor?(t=this.getPosition03(),Math.random()>.5&&(t.x=this.WAVE_WIDTH-t.x)):t=this.getPosition02(),t}},{key:"getPosition01",value:function(){var t=new u.Point;return t.x=this.waveVector01[Math.floor(Math.random()*this.waveLen01)],t.y=Math.random()*this.SCREEN_HEIGHT,t}},{key:"getPosition02",value:function(){var t=new u.Point;return t.x=this.waveVector02[Math.floor(Math.random()*this.waveLen02)],t.y=Math.random()*this.SCREEN_HEIGHT,t}},{key:"getPosition03",value:function(){var t=new u.Point;return t.x=this.waveVector03[Math.floor(Math.random()*this.waveLen03)],t.y=Math.random()*this.SCREEN_HEIGHT,t}},{key:"updatePixels",value:function(){this.waveVector01=this.getWavePixels(this.waveSp01),this.waveLen01=this.waveVector01.length,this.waveVector02=this.getWavePixels(this.waveSp02),this.waveLen02=this.waveVector02.length,this.waveVector03=this.getWavePixels(this.waveSp03),this.waveLen03=this.waveVector03.length,0!==this.waveLen01&&0!==this.waveLen02&&0!==this.waveLen03&&(this.pixelReady=!0)}},{key:"getWavePixels",value:function(t){var e=PIXI.RenderTexture.create(this.WAVE_WIDTH,this.WAVE_HEIGHT,PIXI.SCALE_MODES.DEFAULT,1);this.main.renderer.render(t,e);for(var i=this.main.renderer.extract.pixels(e),n=[],o=0;this.WAVE_WIDTH>o;o++)for(var r=0;this.WAVE_HEIGHT>r;r++){var a=4*(r*this.WAVE_WIDTH+o),s=i[a+3];0!==s&&n.push(o)}return n}},{key:"getO",value:function(t){var e={};return t.forEach(function(t){e[t]=e[t]||0,e[t]++}),e}},{key:"switchCallBack00",value:function(t,e){this.isOpen=e,this.light0.gotoAndStop(this.isOpen?1:0),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE),this.freshGlow()}},{key:"rotateCallBack00",value:function(t,e,i,n){this.speedN=this.AtomicUtil.linearMapping([this.MIN_ROT,this.MAX_ROT],[this.MIN_SPEED,this.MAX_SPEED],e),this.freshLibPan()}},{key:"baffleChanged",value:function(t){this.baffled=t.checked,this.baffle00.visible=this.baffled,this.bubble.baffle00.visible=this.baffled,this.reseScreen(null)}},{key:"monitorChanged",value:function(t){this.isMonitor=t.checked,this.camera.visible=this.isMonitor,this.bubble.visible=this.isMonitor,this.bg.p2.visible=this.isMonitor,this.reseScreen(null)}},{key:"speedChanged",value:function(t){this.speedN=t.showValue,this.rotateButton00.setRotation(this.AtomicUtil.linearMapping([this.MIN_SPEED,this.MAX_SPEED],[this.MIN_ROT,this.MAX_ROT],this.speedN))}},{key:"emitChanged",value:function(t){this.switchCallBack00(null,!this.isOpen),this.isOpen?this.switchButton00.open():this.switchButton00.close()}},{key:"reseScreen",value:function(t){this.diffImage.context.clearRect(0,0,this.IMAGE_WIDTH,this.IMAGE_HEIGHT),this.diffImage.updateTexture(),this.diffImageData=this.diffImage.context.getImageData(0,0,this.IMAGE_WIDTH,this.IMAGE_HEIGHT)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.baffled=this.baffled,t.isMonitor=this.isMonitor,t.speedN=this.speedN,t.isOpen=this.isOpen,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.baffled=t.baffled,this.isMonitor=t.isMonitor,this.speedN=t.speedN,this.isOpen=!t.isOpen,this.emitChanged(),this.speedChanged({showValue:this.speedN}),this.monitorChanged({checked:this.isMonitor}),this.baffleChanged({checked:this.baffled})}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getSwitch(this.language.getLocaleStr("baffle"),this.baffled,this.baffleChanged,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("monitor"),this.isMonitor,this.monitorChanged,this),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("elec_emit_speed"),!0,"",this.MAX_SPEED,this.MIN_SPEED,(0,h.floor)(this.speedN),1,this.speedChanged,this),this.ComponentProperty.getButton(this.language.getLocaleStr("emit/stop"),this.language.getLocaleStr("emit/stop"),this.emitChanged,this),this.ComponentProperty.getButton(this.language.getLocaleStr("clear_screen"),this.language.getLocaleStr("clear_screen"),this.reseScreen,this)),t}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("elec_emit_speed")+": "+(0,h.floor)(this.speedN)+"\n    "}},{key:"showGlowSP",value:function(t){t?(this.showGlowIndex(0),this.isOpen?(this.glowSPArr[0][0].visible=!1,this.glowSPArr[0][1].visible=!0):(this.glowSPArr[0][0].visible=!0,this.glowSPArr[0][1].visible=!1)):this.hideGlow()}}]),e}(d["default"])},822:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:g(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(461),c=n(u),d=i(839),p=n(d),f=i(643),y=n(f),m=i(644);n(m);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.zhayao=null,i.youba=null,i.youdan=null,i.bg=null,i.showLabelFlag=!0,i.isAnimPlaying=!1,i.framerate=24,i.emitBtn=new PIXI.Graphics,i.addChild(i.emitBtn),i.emitBtn.beginFill(16711680,0),i.emitBtn.drawRect(-140,-20,80,40),i.addCursor(i.emitBtn,"hand"),i.touchId=h.M.addTouch(i.emitBtn,{tab:function(){i.emitChanged(null)}},i),i.atomicBomb=null,i.main.setAnimateAssets(y["default"].assets),PIXI.animate.load(y["default"],i,function(t){i.atomicBomb=t,t.framerate=i.framerate,i.addChild(i.emitBtn),t.gotoAndStop(0),t.visible=!1,t.loop=!1,i.atomicBomb.x=-215,i.atomicBomb.y=-315}),i.main.setAnimateAssets(p["default"].assets),PIXI.animate.load(p["default"],i,function(t){i.bomb=t,t.framerate=i.framerate,t.x=-626,t.y=-326,t.gotoAndStop(0),t.visible=!1,t.loop=!1,t.addAction(function(){i.isAnimPlaying=!1,i.setLabelVisible(i.showLabelFlag),i.bg.alpha=1,i.bomb.visible=!1,i.bombPlay(!1)},t.totalFrames-1),t.addAction(function(){i.bombPlay(!0)},68)}),i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.setLabelVisible(this.showLabelFlag)}},{key:"bombPlay",value:function(t){this.atomicBomb&&(t?(this.atomicBomb.gotoAndPlay(0),this.atomicBomb.visible=!0):(this.atomicBomb.gotoAndStop(0),this.atomicBomb.visible=!1))}},{key:"setLabelVisible",value:function(t){this.zhayao.visible=t,this.youba.visible=t,this.youdan.visible=t}},{key:"removed",value:function(){this.removedCursor(this.emitBtn),h.M.removeTouch(this.emitBtn,this.touchId),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"emitChanged",value:function(t){this.bomb&&!this.isAnimPlaying&&(this.isAnimPlaying=!0,this.bg.alpha=0,this.bomb.visible=!0,this.bomb.gotoAndPlay(0),this.setLabelVisible(!1))}},{key:"showLabelChanged",value:function(t){this.showLabelFlag=t.checked,this.isAnimPlaying||this.setLabelVisible(this.showLabelFlag)}},{key:"framerateChanged",value:function(t){this.framerate=t.showValue,this.bomb&&(this.bomb.framerate=this.framerate),this.atomicBomb&&(this.atomicBomb.framerate=this.framerate)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.showLabelFlag=this.showLabelFlag,t.framerate=this.framerate,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.framerateChanged({showValue:t.framerate||24}),this.showLabelFlag=!!t.showLabelFlag,this.setLabelVisible(this.showLabelFlag)}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getButton(this.language.getLocaleStr("emit"),this.language.getLocaleStr("emit"),this.emitChanged,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("show_annotation"),this.showLabelFlag,this.showLabelChanged,this),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("speed"),!1,"",60,1,this.framerate,1,this.framerateChanged,this)),t}},{key:"getTipMess",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this)}}]),e}(c["default"])},823:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function v(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:v(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(461),c=n(u),d=i(486),p=n(d),f=i(645),y=n(f),m=i(841),g=n(m);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=2;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.bg=null,i.rot0=null,i.rot1=null,i.light=null,i.needleL=null,i.needleR=null,i.bp0=null,i.bp1=null,i.needleDragL=null,i.needleDragR=null,i.sound=null,i.lightNing=new g["default"](16777215,1,0),i.addChildAt(i.lightNing.holder,0);var n=new PIXI.filters.BlurFilter;return i.lightNing.holder.filters=[n],n.blur=2,i.rotateButton00=null,i.rotateButton01=null,i.ang0=30*Math.PI/180,i.ang1=-130*Math.PI/180,i.ang2=-73*Math.PI/180,i.ang3=150*Math.PI/180,i.voltage=0,i.isOpen=!1,i.vDir=0,i.MIN_V=1e4,i.MAX_V=8e4,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.needleDragL.alpha=0,this.needleDragR.alpha=0,this.bp0.visible=!1,this.bp1.visible=!1,this.rotateButton00=new p["default"](this.rot0,this,this.ang0,-this.ang0,this.ang0,0,this.rotateCalback00),this.rotateButton00.setLevel0Angle(0),this.rotateButton00.setLevel(0),this.rotateButton01=new p["default"](this.rot1,this,0,this.ang1,this.ang3,0,this.rotateCalback01),this.rotateButton01.setLevel0Angle(this.ang1),this.rotateButton01.setLevel(0),this.rotateButton01.setOpenAngle(this.ang2),this.needleLScroll=new y["default"](this.needleDragL,null,this,new h.Point(-209,-123),new h.Point(-139,-123),1e3,this.needleMoveCallBack01),this.needleLScroll.setN(500),this.updateNeedleBySp(this.needleL,this.needleDragL),this.needleRScroll=new y["default"](this.needleDragR,null,this,new h.Point(136,-123),new h.Point(208,-123),1e3,this.needleMoveCallBack02),this.needleRScroll.setN(500),this.updateNeedleBySp(this.needleR,this.needleDragR),this.ticker=h.M.addTicker(this.lightLoop,this,!1),this.updateLight()}},{key:"lightLoop",value:function(){this.lightNing.startX=this.needleL.x+128,this.lightNing.startY=this.needleL.y,this.lightNing.endX=this.needleR.x-125,this.lightNing.endY=this.needleR.y,this.lightNing.update()}},{key:"needleMoveCallBack01",value:function(t,e,i){this.updateNeedleBySp(this.needleL,this.needleDragL),this.updateLight()}},{key:"needleMoveCallBack02",value:function(t,e,i){this.updateNeedleBySp(this.needleR,this.needleDragR),this.updateLight()}},{key:"updateNeedleBySp",value:function(t,e){t.x=e.x,t.y=e.y+5}},{key:"updateLight",value:function(){var t=this.needleR.x-this.needleL.x-256,e=Math.abs(this.Power/t);e>500?(this.lightNing.holder.visible=!0,g["default"].speed=2*e/1e3,this.ticker.started||this.ticker.start(),this.playApplianceSound()):(this.lightNing.holder.visible=!1,this.ticker.started&&this.ticker.stop(),this.stopApplianceSound())}},{key:"removed",value:function(){h.M.removeTicker(this.ticker),this.ticker=null,this.needleLScroll.destroy(),this.needleLScroll=null,this.needleRScroll.destroy(),this.needleRScroll=null,this.rotateButton00.destroy(),this.rotateButton00=null,this.rotateButton01.destroy(),this.rotateButton01=null,this.stopApplianceSound(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"voltageChanged",value:function(){this.Power=this.vDir*this.voltage,this.elecChanged(),this.updateLight()}},{key:"rotateCalback00",value:function(t,e,i,n){this.vDir=this.rotateButton00.getLevel(),this.voltageChanged(),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"rotateCalback01",value:function(t,e,i,n){this.isOpen!==this.rotateButton01.isOpen&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE),this.isOpen=this.rotateButton01.isOpen,this.light.gotoAndStop(this.isOpen?1:0),this.voltage=0,this.isOpen&&(this.voltage=this.AtomicUtil.linearMapping([this.ang2,this.ang3],[this.MIN_V,this.MAX_V],e)),this.voltageChanged()}},{key:"voltage2rotation",value:function(t){return this.AtomicUtil.linearMapping([this.MIN_V,this.MAX_V],[this.ang2,this.ang3],t)}},{key:"playApplianceSound",value:function(){this.sound||(this.sound=this.globalConfig.SoundTool.play(this.SoundStr.ELECTRIC_APPLIANCE,Number.MAX_SAFE_INTEGER))}},{key:"stopApplianceSound",value:function(){this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.isOpen=this.isOpen,t.voltage=this.voltage,t.vDir=this.vDir,t.lx=this.needleDragL.x,t.rx=this.needleDragR.x,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.isOpen=t.isOpen,this.voltage=t.voltage,this.vDir=t.vDir,this.rotateButton00.setLevel(this.vDir),this.isOpen?this.rotateButton01.setRotation(this.voltage2rotation(this.voltage),!1):this.rotateButton01.setLevel(0),this.needleLScroll.setP(new h.Point(t.lx,0)),this.needleRScroll.setP(new h.Point(t.rx,0)),this.voltageChanged(),this.updateNeedleBySp(this.needleL,this.needleDragL),this.updateNeedleBySp(this.needleR,this.needleDragR),this.updateLight(),this.light.gotoAndStop(this.isOpen?1:0)}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}}]),e}(c["default"])},824:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:d(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(49),u=i(461),c=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.bg1=null,i.bg2=null,i.cloud=null,i.photon=null,i.elec1=null,i.elec2=null,i.photonSpeed=1,i.photonCon=null,i.spectralSeries=[i.language.getLocaleStr("auto"),i.language.getLocaleStr("Lyman_series"),i.language.getLocaleStr("Balmer_series"),i.language.getLocaleStr("Paschen_series"),i.language.getLocaleStr("Brackett_series"),i.language.getLocaleStr("Pfund_series")],i.spectralSeriesN=[i.language.getLocaleStr("auto"),"1","2","3","4","5"],i.rs=[130,130,236,319,355,377],i.hs=[0,0,-572,-672,-715,-742],i.lambdas=[121.57,102.57,97.254,94.974,656.3,486.1,434,1875,1282,4051],i.h0=415,i.op0=new l.Point(0,0),i.op1=new l.Point(993,415),i.level=1,i.serie=1,i.orbitR=0,i.orbitH=0,i.orbitAngle=0,i.omiga=.1,i.ev=10.2,i.lambda=i.ev2lambda(i.ev),i.downwardTransitionFlag=!0,i.cloudFlag=!1,i.downwardN=0,i.timeInterval=5,i.ticker=null,i.MAX_LEVEL=5,i.MAX_EV=13.2,i.MIN_EV=.3,i}return r(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bg=new PIXI.Graphics,this.addChild(this.bg),this.bg.lineStyle(1,0,0),this.bg.drawRect(-600,-450,2080,910),this.cloud.visible=!1,this.photonCon=new PIXI.Container,this.addChild(this.photonCon),this.addCursor(this.photon,"hand"),this.ticker=l.M.addTicker(this.update,this,!0),this.setLevel(this.level),this.photonTouchId=l.M.addTouch(this.photon,{tab:this.photonClicked},this)}},{key:"removed",value:function(){this.removedCursor(this.photon),this.removedCursor(this.photon),l.M.removeTicker(this.ticker),this.ticker=null,l.M.removeTouch(this.photon,this.photonTouchId),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){this.downwardTransitionFlag&&++this.downwardN>60*this.timeInterval&&(this.downwardTransition(),this.downwardN=0);for(var t=this.photonCon.children.length-1;t>=0;t--){var e=this.photonCon.children[t];e.x+=10*this.photonSpeed,this.upwardTransition(e)?(this.photonCon.removeChildAt(t),this.downwardN=0):e.x>400&&((e.alpha-=.05)>0||this.photonCon.removeChildAt(t))}this.elec1.x=this.op0.x+this.orbitR*Math.cos(this.orbitAngle),this.elec1.y=this.op0.y+this.orbitR*Math.sin(this.orbitAngle),this.orbitAngle+=this.omiga,this.elec2.x=this.elec1.x-this.op0.x+this.op1.x,this.elec2.y=this.orbitH+this.op1.y}},{key:"downwardTransition",value:function(){if(1!==this.level){var t=this.serie||this.level-1;if(this.level!==t){this.addPhonton(this.elec1.x,this.elec1.y,this.getTransitionLambda(t,this.level),!1),this.setLevel(t)}}}},{key:"upwardTransition",value:function(t){if(!t.flag)return!1;for(var e=0,i=this.level+1;this.MAX_LEVEL>=i;i++){var n=this.getTransitionLambda(this.level,i),o=this.lambda2ev(n);if(.02>Math.abs(t.ev-o)||Math.abs((t.lambda-n)/n)<.005*this.level){e=i;break}if(t.lambda>n)return!1}if(!e)return!1;var r=this.rs[this.level];return 0>(new l.Point(t.x-this.op0.x,t.y-this.op0.y).length-r)*(new l.Point(t.x+t.width-this.op0.x,t.y-this.op0.y).length-r)&&this.MAX_LEVEL>=e&&(this.setLevel(e),!0)}},{key:"getTransitionLambda",value:function(t,e){return 1/(.0109737*(1/(t*t)-1/(e*e)))}},{key:"photonClicked",value:function(t){this.addPhonton(this.photon.x,this.photon.y,this.lambda,!0)}},{key:"addPhonton",value:function(t,e,i,n){var o=PIXI.Sprite.fromFrame("HydrogenAtomicEnergyLevel/photon.png");this.photonCon.addChild(o),o.x=t-o.width/2,o.y=e-o.height/2,o.flag=n,o.ev=this.ev,o.lambda=this.lambda;var r=new PIXI.Text("λ = "+(0,h.round)(i,1)+"nm",{font:"30px Arial",fill:16777215});o.addChild(r),r.x=0,r.y=-30}},{key:"setLevel",value:function(t){this.rs.length>t?0>t&&(t=0):t=this.rs.length-1,this.level=t,this.cloud.gotoAndStop(this.level-1),this.orbitR=this.rs[this.level],this.orbitH=this.hs[this.level];var e=this.rs[0]/this.orbitR;this.omiga=.1*Math.sqrt(e*e*e)}},{key:"spectralSeriesChanged",value:function(t){this.serie=t.checked,0>this.serie&&(this.serie=0),this.serie>0&&this.serie>this.level&&this.setLevel(this.serie),this.freshLibPan()}},{key:"lambdaChanged",value:function(t){this.lambda=t.showValue,this.ev=this.lambda2ev(this.lambda)}},{key:"downwardTransitionFlagChanged",value:function(t){this.downwardTransitionFlag=t.checked,this.downwardN=0,this.freshLibPan()}},{key:"electronCloudChanged",value:function(t){this.cloudFlag=t.checked,this.cloud.visible=this.cloudFlag,this.cloud.gotoAndStop(this.level-1),this.bg2.visible=!this.cloudFlag,this.elec2.visible=!this.cloudFlag}},{key:"timeIntervalChanged",value:function(t){this.timeInterval=(0,h.round)(t.showValue,0)}},{key:"changeeV",value:function(t){this.ev=t.showValue,this.lambda=this.ev2lambda(this.ev)}},{key:"lambda2ev",value:function(t){return 1987.83/(1.602*t)}},{key:"ev2lambda",value:function(t){return 1987.83/(1.602*t)}},{key:"photonSpeedChanged",value:function(t){this.photonSpeed=t.showValue}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.cloudFlag=this.cloudFlag,t.downwardTransitionFlag=this.downwardTransitionFlag,t.timeInterval=this.timeInterval,t.serie=this.serie,t.level=this.level,t.ev=this.ev,t.lambda=this.lambda,t.photonSpeed=this.photonSpeed,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.cloudFlag=t.cloudFlag,this.electronCloudChanged({checked:this.cloudFlag}),this.downwardTransitionFlag=t.downwardTransitionFlag,this.downwardTransitionFlagChanged({checked:this.downwardTransitionFlag}),this.timeInterval=t.timeInterval,this.serie=t.serie,this.level=t.level,this.spectralSeriesChanged({checked:this.serie}),this.setLevel(this.level),this.ev=t.ev,this.lambda=t.lambda,this.photonSpeed=0===t.photonSpeed?t.photonSpeed:t.photonSpeed||1}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getDropMenu(this.language.getLocaleStr("spectral_series")+" n=",!1,"",this.spectralSeriesN[this.serie],this.spectralSeriesN,this,this.spectralSeriesChanged,1,0),this.ComponentProperty.getLabel(this.language.getLocaleStr("spectral_series"),this.spectralSeries[this.serie]),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("photon_energy"),!0,"eV",this.MAX_EV,this.MIN_EV,{get value(){return(0,h.round)(t.ev,3)},set value(e){t.ev=e}},.001,this.changeeV,this),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("wave_length"),!0,"nm",(0,h.round)(this.ev2lambda(this.MIN_EV),0),(0,h.round)(this.ev2lambda(this.MAX_EV),0),{get value(){return(0,h.round)(t.lambda,0)},set value(e){t.lambda=e}},1,this.lambdaChanged,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("downward_transition"),this.downwardTransitionFlag,this.downwardTransitionFlagChanged,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("electron_cloud"),this.cloudFlag,this.electronCloudChanged,this)),this.downwardTransitionFlag&&i.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("time_interval"),!1,"",10,1,this.timeInterval,1,this.timeIntervalChanged,this)),i.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("photon_speed"),!0,"",1,0,(0,h.round)(this.photonSpeed,2),.01,this.photonSpeedChanged,this)),i}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("spectral_series")+"n="+this.spectralSeriesN[this.serie]+"\n    "+this.language.getLocaleStr("spectral_series")+": "+this.spectralSeries[this.serie]+"\n    "+this.language.getLocaleStr("photon_energy")+": "+(0,h.round)(this.ev,3)+"eV\n    "+this.language.getLocaleStr("wave_length")+": "+(0,h.round)(this.lambda,0)+"nm\n    "+this.language.getLocaleStr("photon_speed")+": "+(0,h.round)(this.photonSpeed,2)+"\n    "}}]),e}(c["default"])},825:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:f(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(461),c=n(u),d=i(650),p=n(d);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.level=7,i.canReversal=!0,i.upSp=null,i.bottomSp=null,i.direction=1,i.reversed=!1,i.B=.1,i.magType=2,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bg=this.upSp,this.backCon.addChild(this.bottomSp),this.changeDirection({checked:this.reversed}),this.magChanged()}},{key:"removed",value:function(){var t=this.globalConfig.main;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this),t.dispatchEvent("magElecChanged",this)}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.magChanged()}},{key:"magChanged",value:function(){this.globalConfig.main.dispatchEvent("magElecChanged",this)}},{key:"changeDirection",value:function(t){this.reversed=t.checked;var e=void 0;this.reversed?(this.direction=1,e=0):(this.direction=-1,e=1),this.upSp.gotoAndStop(e),this.bottomSp.gotoAndStop(e),this.magChanged()}},{key:"getBAt",value:function(t,e){return this.getBAtPoint(new h.Point(t,e))}},{key:"getBAtPoint",value:function(t){var e=this.toGlobal(new h.Point(0,0)),i=h.Point.distance(t,e),n=new p["default"](0,0,this.B);return i>1&&(n.z*=1/(i*i)),n.z*=this.direction,n}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.reversed=this.reversed,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.reversed=t.reversed,this.changeDirection({checked:this.reversed})}},{key:"reversal",value:function(){this.changeDirection({checked:!this.reversed})}}]),e}(c["default"])},826:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:d(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(49),h=i(1),u=i(584),c=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.bp0=null,i.tipSp=null,i.isOptical=!0,i.metals=[i.language.getLocaleStr("ele_W"),i.language.getLocaleStr("ele_Zn"),i.language.getLocaleStr("ele_Ca"),i.language.getLocaleStr("ele_Na"),i.language.getLocaleStr("ele_K"),i.language.getLocaleStr("ele_Rb")],i.frequencies=[10.95,8.1,7.73,5.53,5.44,5.15],i.metalId=1,i.Power=0,i.optHitSegments=[new h.Point(-5.5,-124.5),new h.Point(-5.5,-6.5),null,new h.Point(-5.5,21.5)],i}return r(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),h.M.setSPPointXY(this.bposter1,this.bp0.x,this.bp0.y),this.metalChanged({checked:this.metalId})}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.updateHint()}},{key:"updateHint",value:function(){this.tipSp.visible=!(0,l.get)(this.bposter1,"bindinger.friendPostersArr.length")}},{key:"lightCalculateEnd",value:function(){var t=this,e=0;this.rays.forEach(function(i){e+=t.getEnergy(i)}),this.Power=Math.max(e,this.Power),this.elecChanged()}},{key:"clearCharge",value:function(){this.Power=0,this.elecChanged(),this.opticalChanged()}},{key:"getEnergy",value:function(t){if(0===t.endPData.id&&3e3/t.opticalData.lamda>this.frequencies[this.metalId])return 10*t.opticalData.I*8;return 0}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.metalId=this.metalId,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.metalId=t.metalId,this.bg.gotoAndStop(this.metalId),this.updateHint(),this.elecChanged(),this.opticalChanged()}},{key:"metalChanged",value:function(t){this.metalId=t.checked,this.bg.gotoAndStop(this.metalId),this.elecChanged(),this.opticalChanged(),this.freshLibPan()}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getDropMenu(this.language.getLocaleStr("type"),!1,"",this.metals[this.metalId],this.metals,this,this.metalChanged),this.ComponentProperty.getLabel(this.language.getLocaleStr("limit-frequency"),this.frequencies[t.metalId]+"×10¹⁴Hz")),i}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("type")+": "+this.metals[this.metalId]+"\n    "+this.language.getLocaleStr("limit-frequency")+": "+this.frequencies[self.metalId]+'×10<font class="pre-snum">14</font>Hz\n    '}},{key:"selectRenderChild",value:function(){return this.updateTransform(),this.bg.getBounds()}},{key:"hideTips",value:function(){this.tipSp.alpha=0}}]),e}(c["default"])},827:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:d(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(461),u=(n(h),i(555)),c=n(u);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.bp0=null,i.bp1=null,i.canRotate=!0,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.rotateA(-60)}},{key:"removed",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"addCompComplete",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addCompComplete",this).call(this),this.checkBp1Bind(!0)}},{key:"getData",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t)}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}}]),e}(c["default"])},828:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function C(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:C(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(49),c=i(461),d=n(c),p=i(477),f=n(p),y=i(486),m=n(y),g=i(645),v=n(g),b=i(840),_=n(b);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.sprayer=null,i.camera=null,i.monitor=null,i.rot0=null,i.rot1=null,i.light0=null,i.light1=null,i.switch0=null,i.pull0=null,i.scroll0=null,i.sbar0=null,i.scroll1=null,i.sbar1=null,i.hideMc=null,i.switchButton00=null,i.switchButton01=null,i.rotateButton00=null,i.rotateButton01=null,i.scrollBar00=null,i.scrollBar01=null,i.oilDropManager=null,i.screenCon=null,i.gridGra=null,i.oilCon=null,i.vTf=null,i.tTf=null,i.calculagraph=new _["default"](!1,i.timerCallBack,i),i.isOpen=!1,i.isCounting=!1,i.cameraRot=0,i.voltage=0,i.vDir=1,i.vType=1,i.d=.005,i.hasOil=!1,i.CAMERA_MIN_X=20,i.CAMERA_MAX_X=32,i.CAMERA_MIN_ROT=2*-Math.PI,i.CAMERA_MAX_ROT=2*Math.PI,i.V_MAX_ROT=2*Math.PI,i.V_MIN_ROT=0,i.V_MAX=500,i.V_MIN=0,i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.hideMc.visible=!1,this.sbar0.alpha=0,this.sbar1.alpha=0,this.screenCon=new PIXI.Container,this.monitor.addChildAt(this.screenCon,1),this.screenCon.visible=!1,this.oilCon=new PIXI.Container,this.screenCon.addChild(this.oilCon),this.oilCon.x=-130,this.oilCon.y=-130,this.oilDropManager=new x(this.oilCon,260,260),this.vTf=this.addTxt(this.screenCon,60,-120,""),this.tTf=this.addTxt(this.screenCon,60,-100,""),this.switchButton00=new f["default"](this.switch0,this,1,0,this.switchCallBack00,this.isOpen),this.switchButton01=new f["default"](this.pull0,this,1,0,this.switchCallBack01,this.isCounting),this.rotateButton00=new m["default"](this.rot0,this,0,this.V_MIN_ROT,this.V_MAX_ROT,0,this.rotateCallBack00),this.rotateButton01=new m["default"](this.rot1,this,0,this.CAMERA_MIN_ROT,this.CAMERA_MAX_ROT,0,this.rotateCallBack01),this.scrollBar00=new v["default"](this.scroll0,this.sbar0,this,new h.Point(-42,77),new h.Point(-42,138),1,this.scrollCallBack00),this.scrollBar01=new v["default"](this.scroll1,this.sbar1,this,new h.Point(-12,77),new h.Point(-12,138),2,this.scrollCallBack01),this.scrollBar01.setN(1),this.updateCameraPosition(),this.sprayerTouchId=h.M.addTouch(this.sprayer,{begin:function(e){t.cannotSystemDrag=!0,t.sprayer.loop=!1,t.sprayer.animationSpeed=.3,t.sprayer.play(),t.hasOil=!0,t.oilDropManager.anHourLater()},end:function(e){t.cannotSystemDrag=!1,t.sprayer.gotoAndStop(0)}},this),this.ticker=h.M.addTicker(function(){t.oilDropManager.update(.001*t.ticker.deltaTime),t.hasOil&&1>100*Math.random()&&t.oilDropManager.addOil(10)},this,!0),this.alphaSP.x=-210}},{key:"removed",value:function(){this.switchButton00.destroy(),this.switchButton00=null,this.switchButton01.destroy(),this.switchButton01=null,this.rotateButton00.destroy(),this.rotateButton00=null,this.rotateButton01.destroy(),this.rotateButton01=null,this.scrollBar00.destroy(),this.scrollBar00=null,this.scrollBar01.destroy(),this.scrollBar01=null,h.M.removeTouch(this.sprayer,this.sprayerTouchId),this.oilDropManager.destroy(),this.oilDropManager=null,this.ticker.stop(),h.M.removeTicker(this.ticker),this.ticker=null,this.calculagraph.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"voltageChanged",value:function(){this.vTf.text=(0,u.floor)(this.voltage*this.vDir,0)+"v",this.oilDropManager.E=this.getV()/this.d}},{key:"timerCallBack",value:function(t,e,i){this.tTf.text=(0,u.floor)(t/1e3,3)+"s"}},{key:"switchCallBack00",value:function(t,e){this.isOpen=e;var i=this.isOpen?1:0;this.light0.gotoAndStop(i),this.light1.gotoAndStop(i),this.isOpen?this.calculagraph.open():this.calculagraph.close(),this.screenCon.visible=this.isOpen,this.voltageChanged(),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE),this.freshGlow()}},{key:"switchCallBack01",value:function(t,e){this.isCounting=e,this.isCounting?this.calculagraph.start():this.calculagraph.stop(),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"rotateCallBack00",value:function(t,e,i,n){this.voltage=this.AtomicUtil.linearMapping([this.V_MIN_ROT,this.V_MAX_ROT],[this.V_MIN,this.V_MAX],e),this.voltageChanged()}},{key:"rotateCallBack01",value:function(t,e,i,n){this.cameraRot=e,this.updateCameraPosition()}},{key:"updateCameraPosition",value:function(){this.camera.x=this.getCameraPos(this.cameraRot),this.oilDropManager.setZ((this.cameraRot-this.CAMERA_MIN_ROT)/(this.CAMERA_MAX_ROT-this.CAMERA_MIN_ROT)-.5)}},{key:"getCameraPos",value:function(t){return this.AtomicUtil.linearMapping([this.CAMERA_MIN_ROT,this.CAMERA_MAX_ROT],[this.CAMERA_MIN_X,this.CAMERA_MAX_X],t)}},{key:"scrollCallBack00",value:function(t,e,i){this.vDir=0===e?1:-1,this.voltageChanged(),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"scrollCallBack01",value:function(t,e,i){this.vType=[1.5,1,0][e],this.voltageChanged(),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"updateGrid",value:function(){this.gridGra.clear(),this.gridGra.lineStyle(1,16777215,1);for(var t=0;3>=t;t++){var e=80*t-120;this.gridGra.moveTo(e,-120),this.gridGra.lineTo(e,120)}for(var i=0;5>=i;i++){var n=48*i-120;this.gridGra.moveTo(-120,n),this.gridGra.lineTo(120,n)}}},{key:"getV",value:function(){return this.isOpen?this.voltage*this.vDir*this.vType:0}},{key:"addTxt",value:function(t,e,i,n){var o=new PIXI.Text(n,{font:"16px Arial",fill:16777215});return t.addChild(o),o.x=e,o.y=i,o}},{key:"getData",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t)}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}},{key:"getLocalBoundsElecs",value:function(){return[this.alphaSP]}},{key:"showGlowSP",value:function(t){t?(this.showGlowIndex(0),this.isOpen?(this.glowSPArr[0][0].visible=!1,this.glowSPArr[0][1].visible=!0):(this.glowSPArr[0][0].visible=!0,this.glowSPArr[0][1].visible=!1)):this.hideGlow()}}]),e}(d["default"]);var x=function(){function t(e,i,n){o(this,t),this.con=e,this.w=i,this.h=n,this.z=0,this.g=9.8,this.E=0,this.oilPool=[],this.maxNum=1e3,this.pxmm=5/240}return s(t,[{key:"addOil",value:function(t){var e=this.con.children.length;t=Math.min(t,this.maxNum-e);for(var i=0;t>i;i++){var n=this.getOil();this.con.addChild(n),n.x=Math.random()*this.w,n.y=0}}},{key:"anHourLater",value:function(){var t=this;this.addOil(1e4),this.con.children.forEach(function(e){e.y=Math.random()*t.h})}},{key:"clear",value:function(){var t=this;this.con.children.forEach(function(e){t.oilPool.push(e)}),this.con.removeChildren()}},{key:"destroy",value:function(){this.con.removeChildren(),this.con=null,this.oilPool=null}},{key:"update",value:function(t){for(var e=this.con.children.length,i=e-1;i>=0;i--){var n=this.con.children[i];this.updateOil(n,t),n.y>this.h?n.y=0:0>n.y&&(n.y=this.h)}}},{key:"updateOil",value:function(t,e){t.vy=-(t.q*this.E+t.m*this.g)/t.feta_v,t.y+=this.mm2px(t.vy*e*1e3)}},{key:"setZ",value:function(t){this.z=t,this.con.children.forEach(function(e){e.setZ(t)})}},{key:"getOil",value:function(){var t=this.oilPool.pop();return t||(t=new w),t.init(),t.setZ(this.z),t}},{key:"px2mm",value:function(t){return t*this.pxmm}},{key:"mm2px",value:function(t){return t/this.pxmm}}]),t}(),w=function(t){function e(){o(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.a=1,t.rho=981,t.eta=183e-7,t.m=1,t.x=0,t.y=0,t.z0=0,t.vy=0,t.q=1,t.e=-1.602e-19,t.feta_v=1,t.pxmm=5/240,t.texture=PIXI.Texture.fromImage("MillikanOilDrop/oilDrop.png"),t.w0=10,t.sca0=1,t.SCALE=4,t.maxBlur=3,t}return a(e,t),s(e,[{key:"init",value:function(){this.vy=0,this.a=Math.random()>.5?.1+.9*Math.random():1+4*Math.random(),this.a*=1e-6,this.z0=Math.random()-.5,this.m=4*Math.PI*this.a*this.a*this.a*this.rho/3,this.feta_v=-6*Math.PI*this.a*this.eta;var t=-9.8*this.m/4e4;t*=.8+.4*Math.random(),this.q=Math.ceil(t/this.e)*this.e,this.w0=1e3*this.a/this.pxmm,this.sca0=this.SCALE*this.w0/10}},{key:"setZ",value:function(t){var e={x:0,y:0,z:0,f:.15};e.z=1*t;var i=e.z-this.z0+2*e.f,n=(i-e.f)/e.f;if(n>0&&this.maxBlur>n){this.scale.x=this.sca0*n,this.scale.y=this.sca0*n;var o=1/(n*n);this.alpha=Math.min(o,1),this.visible=!0}else this.visible=!1}}]),e}(PIXI.Sprite)},829:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function x(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:x(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(49),u=i(1),c=i(584),d=n(c),p=i(477),f=n(p),y=i(486),m=n(y),g=i(847),v=n(g),b=i(846),_=n(b);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.rot0=null,i.rot1=null,i.light=null,i.switchBtn=null,i.rotateButton00=null,i.rotateButton01=null,i.switchButton=null,i.isOptical=!0,i.level=6,i.lineGra=null,i.ang0=u.M.toHu(90),i.ang1=u.M.toHu(65),i.ang2=u.M.toHu(60),i.ang3=u.M.toHu(80),i.isOpen=!1,i.lightGain=0,i.lamda=660,i.lightColor=16711680,i.lightAlpha=1,i}return a(e,t),s(e,[{key:"added",value:function(){this.lineGra=new PIXI.Graphics,this.addChildAt(this.lineGra,0),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.switchButton=new f["default"](this.switchBtn,this,1,0,this.switchCallBack,this.isOpen),this.rotateButton00=new m["default"](this.rot0,this,0,-this.ang1,this.ang1,0,this.rotateCalback00),this.rotateButton00.setRotation(-this.ang1,!1),this.rotateButton01=new m["default"](this.rot1,this,0,-this.ang3,this.ang3,0,this.rotateCalback01),this.lamda=this.rotation2lamda(this.rotateButton01.rotation),this.updateLamda(),this.light.gotoAndStop(this.isOpen?1:0)}},{key:"removed",value:function(){this.switchButton.destroy(),this.switchButton=null,this.rotateButton00.destroy(),this.rotateButton00=null,this.rotateButton01.destroy(),this.rotateButton01=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"switchCallBack",value:function(t,e){this.isOpen=e,this.light.gotoAndStop(this.isOpen?1:0),this.opticalChanged(),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"rotateCalback00",value:function(t,e,i,n){this.lightGain=this.rotation2lightGain(e),this.opticalChanged()}},{key:"rotation2lightGain",value:function(t){return this.AtomicUtil.linearMapping([-this.ang1,this.ang1],[0,1],t,1)}},{key:"lightGain2rotation",value:function(t){return this.AtomicUtil.linearMapping([0,1],[-this.ang1,this.ang1],t,1)}},{key:"rotateCalback01",value:function(t,e,i,n){this.lamda=this.rotation2lamda(e),this.updateLamda(),this.opticalChanged(),this.freshLibPan(),this.freshTipMess()}},{key:"updateLamda",value:function(){var t=this.OpticalUtil.lamda2rgba(this.lamda);this.lightColor=this.OpticalUtil.rgb2color.apply(this,t),this.lightAlpha=t[3]}},{key:"rotation2lamda",value:function(t){return this.AtomicUtil.linearMapping([-this.ang3,-this.ang2,this.ang2,this.ang3],[800,660,410,250],t,1)}},{key:"lamda2rotation",value:function(t){return this.AtomicUtil.linearMapping([800,660,410,250],[-this.ang3,-this.ang2,this.ang2,this.ang3],t,-1)}},{key:"updateLightRay",value:function(){if(this.lineGra.clear(),this.isOpen&&0!==this.lightGain){var t=this.toGlobalView(new u.Point(141,0),this),e=new u.Point(1,0),i=new v["default"](t,e),n=this.lightGain*this.lightAlpha;for(i.opticalData=new _["default"](this.lamda),i.opticalData.I=100*this.lightGain,i.opticalData.color=this.lightColor,i.opticalData.alpha=n,this.AtomicUtil.rayPropagation(i),this.lineGra.lineStyle(4,this.lightColor,n);i;){if(i.startP&&i.endP){var o=this.toLocal(i.startP,this.main.view),r=this.toLocal(i.endP,this.main.view);this.lineGra.moveTo(o.x,o.y),this.lineGra.lineTo(r.x,r.y)}i=i.nextRay}}}},{key:"lightCalculate",value:function(){this.updateLightRay()}},{key:"lamdaChanged",value:function(t){this.lamda=t.showValue,this.updateLamda(),this.opticalChanged(),this.rotateButton01.setRotation(this.lamda2rotation(this.lamda),!1)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.lamda=this.lamda,t.lightGain=this.lightGain,t.isOpen=this.isOpen,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.isOpen=t.isOpen||!1,this.lamda=t.lamda||this.lamda,this.lightGain=t.lightGain,this.rotateButton01.setRotation(this.lamda2rotation(this.lamda),!1),this.rotateButton00.setRotation(this.lightGain2rotation(this.lightGain),!1),this.updateLamda(),this.light.gotoAndStop(this.isOpen?1:0),this.isOpen?this.switchButton.open():this.switchButton.close(),this.opticalChanged()}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("wave_length"),!1,"nm",800,250,(0,h.round)(this.lamda,0)+"nm",1,this.lamdaChanged,this)),t}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("wave_length")+": "+(0,h.round)(this.lamda,0)+"nm\n    "+this.language.getLocaleStr("frequency")+": "+(0,h.round)(3e3/this.lamda,2)+'×10<font class="pre-snum">14</font>Hz\n    '}}]),e}(d["default"])},830:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:d(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(49),u=i(461),c=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resetBtn=null,i.gunBtn=null,i.gra=null,i.hideMc=null,i.bg=null,i.type=0,i.typeArr=[i.language.getLocaleStr("principle-1"),i.language.getLocaleStr("principle-2"),i.language.getLocaleStr("principle-3")],i.zhongziPool=[],i.hePool=[],i.bombPool=[],i.zhongziArr=[],i.heArr=[],i.bombArr=[],i.speedGain=1,i.speed=3,i.heSpeed=5,i.heSpeed01=95*i.heSpeed/138,i.heNum=100,i.con=new PIXI.Sprite,i.con2=new PIXI.Sprite,i.rect00=new l.Rectangle(-155,-250,900,400),i.rect01=new l.Rectangle(-155,-300,1100,500),i.rect02=new l.Rectangle(-400,-2,800,4),i.rect03=i.rect01,i.rect=i.rect00,i.he01Arr=[],i.he02Arr=[],i.he01Pool=[],i.he02Pool=[],i}return r(e,t),a(e,[{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.hideMc.visible=!1,this.addChildAt(this.con,0),this.addChild(this.con2),this.resetBtn.fontColor="#ffffff",this.resetBtn.label.style.fontSize="24px",this.resetBtn.text=this.language.getLocaleStr("reset_nucleus"),this.resetBtn["this"]=this,this.resetBtn.tab=this.resetClick,this.gunBtn["this"]=this,this.gunBtn.tab=this.gunClick,this.ticker=l.M.addTicker(function(){t.update()}),this.setType(this.type)}},{key:"removed",value:function(){this.ticker&&(l.M.removeTicker(this.ticker),this.ticker=null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"resetClick",value:function(t){this.setType(this.type)}},{key:"gunClick",value:function(t){this.emitZhongzi(147,-50,0)}},{key:"update",value:function(){this.updatePosition(this.zhongziArr),this.updatePosition(this.heArr),this.updatePosition(this.he01Arr),this.updatePosition(this.he02Arr),0==this.type?this.update0():this.update1(),this.checkPengzhuangWallFun(this.zhongziArr,this.removeZhongzi),this.checkPengzhuangWallFun(this.heArr,this.removeHe),this.checkPengzhuangWallFun(this.he01Arr,this.removeHe01),this.checkPengzhuangWallFun(this.he02Arr,this.removeHe02),this.updateBomb()}},{key:"update0",value:function(){var t=this;this.checkPengzhuangHeFun(function(e,i,n,o){e.active=!0,e.u235.visible=!1,e.u236.visible=!0,t.gra.line.y=110,e.friendSp&&(e.friendSp.active=!0),t.removeZhongzi(n,o)}),this.updateLife(function(t,e){1===t.type&&(t.x=t.ox+60*Math.random()-30)},function(e,i){t.liebian02(e,i)})}},{key:"update1",value:function(){var t=this;this.checkPengzhuangHeFun(function(e,i,n,o){e.active=!0,e.u235.visible=!1,e.u236.visible=!0,t.removeZhongzi(n,o)}),this.updateLife(null,function(e,i){t.liebian01(e,i)})}},{key:"liebian01",value:function(t,e){this.removeHe(t,e),this.emitZhongziAt(t.x,t.y),this.emitZhongziAt(t.x,t.y),this.emitZhongziAt(t.x,t.y);var i=this.getRandomAng();this.emitHe01(t.x,t.y,i),this.emitHe02(t.x,t.y,i+Math.PI),this.addBomb(t.x,t.y)}},{key:"liebian02",value:function(t,e){if(this.removeHe(t,e),1===t.type){var i=this.emitHe01(t.x,t.y,0),n=this.emitHe02(t.x,t.y,Math.PI);this.gra.line.addChild(i),this.gra.line.addChild(n),i.type=1,n.type=1}else{var o=this.getRandomAng();this.emitHe01(t.x,t.y,o),this.emitHe02(t.x,t.y,o+Math.PI);this.emitZhongziAt(t.x,t.y),this.emitZhongziAt(t.x,t.y),this.emitZhongziAt(t.x,t.y),this.addBomb(t.x,t.y)}}},{key:"updateLife",value:function(t,e){for(var i=this.heArr.length-1;i>=0;i--){var n=this.heArr[i];n.active&&(n.life--,t&&t(n,i),n.life>0||e(n,i))}}},{key:"updatePosition",value:function(t){if(t)for(var e=t.length-1;e>=0;e--){var i=t[e];i.x+=i.speedX*this.speedGain,i.y+=i.speedY*this.speedGain}}},{key:"updateBomb",value:function(){for(var t=this.bombArr.length-1;t>=0;t--){var e=this.bombArr[t];e.scale.x*=1.08,e.scale.y=e.scale.x,e.alpha*=.98,e.scale.x>8&&this.removeBomb(e,t)}}},{key:"checkPengzhuangHeFun",value:function(t){for(var e=this.zhongziArr.length-1;e>=0;e--){var i=this.zhongziArr[e],n=this.checkPengzhuangHe(i.x,i.y);n&&t.call(this,n.he,n.index,i,e)}}},{key:"checkPengzhuangWallFun",value:function(t,e){for(var i=t.length-1;i>=0;i--){var n=t[i];this.checkPengzhuangWall(n.x,n.y,n.type)&&e.call(this,n,i)}}},{key:"checkPengzhuangWall",value:function(t,e,i){return 1===i?!this.rect02.contains(t,e):!this.rect.contains(t,e)}},{key:"removeHe",value:function(t,e){this.removeSp(t,this.heArr,this.hePool,e)}},{key:"removeHe01",value:function(t,e){this.removeSp(t,this.he01Arr,this.he01Pool,e)}},{key:"removeHe02",value:function(t,e){this.removeSp(t,this.he02Arr,this.he02Pool,e)}},{key:"removeBomb",value:function(t,e){this.removeSp(t,this.bombArr,this.bombPool,e)}},{key:"removeZhongzi",value:function(t,e){this.removeSp(t,this.zhongziArr,this.zhongziPool,e)}},{key:"removeSp",value:function(t,e,i,n){n||0===n||(n=e.indexOf(t)),0>n||e.splice(n,1),t.parent&&t.parent.removeChild(t),i.push(t)}},{key:"checkPengzhuangHe",value:function(t,e){for(var i=this.heArr.length-1;i>=0;i--){var n=this.heArr[i];if(n.u235.visible&&15>Math.abs(n.x-t)&&15>Math.abs(n.y-e))return n.u235.visible=!1,{he:n,index:i}}return null}},{key:"setType",value:function(t){this.type=t,this.clearAll(),0==this.type?(this.rect=this.rect00,this.gra.visible=!0,this.init0()):1==this.type?(this.rect=this.rect01,this.gra.visible=!1,this.init1()):(this.rect=this.rect03,this.gra.visible=!1,this.init2())}},{key:"addBomb",value:function(t,e){this.bombAt(t,e,.2),this.bombAt(t,e,.6),this.bombAt(t,e,1)}},{key:"bombAt",value:function(t,e,i){var n=this.getBomb();n.x=t,n.y=e,n.scale.x=n.scale.y=i,n.alpha=.3,this.con2.addChild(n),this.bombArr.push(n)}},{key:"emitHe01At",value:function(t,e){return this.emitHe01(t,e,this.getRandomAng())}},{key:"emitHe01",value:function(t,e,i){return this.emitSp(this.getHe01(),t,e,i,this.heSpeed01,this.he01Arr)}},{key:"emitHe02At",value:function(t,e){return this.emitHe02(t,e,this.getRandomAng())}},{key:"emitHe02",value:function(t,e,i){return this.emitSp(this.getHe02(),t,e,i,this.heSpeed,this.he02Arr)}},{key:"emitZhongziAt",value:function(t,e){var i=this.getRandomAng();return 2==this.type&&(i-=Math.PI,i*=(i>0?1:-1)*i/Math.PI),this.emitZhongzi(t,e,i)}},{key:"emitZhongzi",value:function(t,e,i){return this.emitSp(this.getZhongzi(),t,e,i,this.speed,this.zhongziArr)}},{key:"emitSp",value:function(t,e,i,n,o,r){return this.con.addChild(t),r.push(t),t.x=e,t.y=i,t.speedX=Math.cos(n)*o,t.speedY=Math.sin(n)*o,t.type=0,t}},{key:"getRandomAng",value:function(){return Math.random()*Math.PI*2}},{key:"clearAll",value:function(){this.clearSp(this.heArr,this.hePool),this.clearSp(this.he01Arr,this.he01Pool),this.clearSp(this.he02Arr,this.he02Pool),this.clearSp(this.zhongziArr,this.zhongziPool),this.clearSp(this.bombArr,this.bombPool)}},{key:"clearSp",value:function(t,e){var i=e.length;t.forEach(function(t){300>e.length&&(e.push(t),i++),t.parent.removeChild(t)}),t.length=0}},{key:"init0",value:function(){this.gra.line.y=147;var t=this.addHe(this.con,400,-50,0,100),e=this.addHe(this.gra.line,0,0,1,100);e.u235.visible=!1,t.friendSp=e}},{key:"init1",value:function(){this.addHe2Num(this.heNum)}},{key:"init2",value:function(){this.addHe3()}},{key:"addHe3",value:function(){for(var t=void 0,e=void 0,i=0;10>i;i++)for(var n=0;i>=n;n++)t=258+40*i,e=40*(n-.5*i)-50,this.addHe(this.con,t,e,0,0)}},{key:"addHe2Num",value:function(t){for(var e=this.heArr.length;t>e;){var i=void 0,n=void 0;if(0===e)i=258,n=-50;else{var o=Math.floor(18*Math.random()),r=Math.floor(11*Math.random());i=258+40*(o-2)+10*Math.random()-5,n=-50-40*(r-5)+10*Math.random()-5}this.addHe(this.con,i,n,0,0),e++}}},{key:"addHe",value:function(t,e,i,n,o){var r=this.getHe();return t.addChild(r),this.heArr.push(r),r.life=o,r.ox=r.x=e,r.oy=r.y=i,r.u235.visible=!0,r.u236.visible=!1,r.type=n,r}},{key:"setHeType",value:function(t,e){t.u235.visible=1&e,t.u236.visible=2&e}},{key:"typeChanged",value:function(t){this.setType(t.checked),this.freshLibPan()}},{key:"getZhongzi",value:function(){return this.zhongziPool.pop()||this.getTexture("NuclearFission/neutron.png")}},{key:"getHe",value:function(){var t=this.hePool.pop();return t||(t=this.getTexture("NuclearFission/nucleus.png"),t.u235=this.getTexture("NuclearFission/u235.png"),t.addChild(t.u235),t.u236=this.getTexture("NuclearFission/u236.png"),t.addChild(t.u236)),t.life=0,t.active=!1,t.speedX=t.speedY=0,t.type=0,t.friendSp=null,t}},{key:"getHe01",value:function(){return this.he01Pool.pop()||this.getTexture("NuclearFission/nucleus1.png")}},{key:"getHe02",value:function(){return this.he02Pool.pop()||this.getTexture("NuclearFission/nucleus2.png")}},{key:"getBomb",value:function(){return this.bombPool.pop()||this.getTexture("NuclearFission/bomb.png")}},{key:"getTexture",value:function(t){var e=PIXI.Sprite.fromFrame(t);return e.anchor.x=e.anchor.y=.5,e}},{key:"emitCallBack",value:function(t){this.gunClick(t)}},{key:"resetCalBack",value:function(t){this.resetClick(t)}},{key:"heNumChanged",value:function(t){this.heNum=t.showValue,1===this.type&&this.addHe2Num(this.heNum)}},{key:"speedChanged",value:function(t){this.speedGain=t.showValue}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.type=this.type,t.heNum=this.heNum,t.speedGain=this.speedGain,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.heNum=(0,h.get)(t,"heNum",100),this.setType((0,h.get)(t,"type",0)),this.speedGain=t.speedGain||this.speedGain}},{key:"getConf",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),i=this.language.getLocaleStr("emit_neutron"),n=this.language.getLocaleStr("reset_nucleus");return t.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("principle"),this.type,this.typeArr,this.typeChanged.bind(this)),this.ComponentProperty.getButton(i,i,this.emitCallBack,this),this.ComponentProperty.getButton(n,n,this.resetCalBack,this),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("neutron_speed"),!1,"",1,0,(0,h.round)(this.speedGain,2),.01,this.speedChanged,this)),1==this.type&&t.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("nucleus_num"),!1,"",150,1,(0,h.round)(this.heNum,0),1,this.heNumChanged,this)),t}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}}]),e}(c["default"])},831:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:d(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(49),u=i(461),c=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resetBtn=null,i.emitBtn=null,i.dragArera=null,i.wenduji=null,i.tiaojiegan=null,i.T=0,i.zhongziPool=[],i.hePool=[],i.bombPool=[],i.zhongziArr=[],i.heArr=[],i.bombArr=[],i.freeRect=new l.Rectangle(-364,-154,730,310),i.H=0,i.speed=3,i.con=new PIXI.Sprite,i.con2=new PIXI.Sprite,i}return r(e,t),a(e,[{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addChildAt(this.con,this.getChildIndex(this.tiaojiegan)),this.addChild(this.con2),this.wenduji.bar.height=1,this.dy=this.dragArera.y-this.tiaojiegan.y,this.dy2=this.dragArera.y-this.H,this.dragArera.getMScale=function(){return t.main.view.scale},this.dragId=l.M.addDrag(this.dragArera,new l.Rectangle(425,37,0,310),{begin:function(e){t.cannotSystemDrag=!0},move:function(e){t.tiaojiegan.y=t.dragArera.y-t.dy,t.H=t.dragArera.y-t.dy2},end:function(e){t.cannotSystemDrag=!1}},this),this.resetBtn.fontColor="#ffffff",this.resetBtn.label.style.fontSize="24px",this.resetBtn.text=this.language.getLocaleStr("reset_nucleus"),this.resetBtn["this"]=this,this.resetBtn.tab=this.resetClick,this.emitBtn.fontColor="#ffffff",this.emitBtn.label.style.fontSize="24px",this.emitBtn.text=this.language.getLocaleStr("emit_neutron"),this.emitBtn["this"]=this,this.emitBtn.tab=this.emitClick,this.ticker=l.M.addTicker(function(){t.update()}),this.initHe()}},{key:"removed",value:function(){this.ticker&&(l.M.removeTicker(this.ticker),this.ticker=null),this.dragId&&l.M.removeDrag(this.dragArera,this.dragId),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){for(var t=this.zhongziArr.length-1;t>=0;t--){var e=this.zhongziArr[t],i=e.ang;e.speedX=Math.cos(i)*this.speed,e.speedY=Math.sin(i)*this.speed,e.x+=e.speedX,e.y+=e.speedY;var n=e.x,o=e.y,r=!1;this.checkPengzhuangHe(n,o)?(r=!0,this.emitZhongziAt(n,o),this.emitZhongziAt(n,o),this.emitZhongziAt(n,o),this.addBomb(n,o),this.T+=1):this.checkPengzhuangWall(n,o)&&(r=!0),r&&(this.zhongziArr.splice(t,1),this.con.removeChild(e),this.zhongziPool.push(e))}for(var a=this.bombArr.length-1;a>=0;a--){var s=this.bombArr[a];s.scale.x*=1.05,s.scale.y=s.scale.x,s.scale.x>5&&(this.bombArr.splice(a,1),this.bombPool.push(s),this.con2.removeChild(s))}this.T*=.95,this.wenduji.bar.height=Math.min(75,2*this.T)}},{key:"checkPengzhuangHe",value:function(t,e){for(var i=this.heArr.length-1;i>=0;i--){var n=this.heArr[i];if(n.u.visible&&15>Math.abs(n.x-t)&&15>Math.abs(n.y-e)){n.u.visible=!1;var o=this.getRandomAng();return n.x+=4*Math.cos(o),n.y+=4*Math.sin(o),n.minHe.visible=!0,n.rotation=Math.random()*Math.PI*2,n.scale.x=n.scale.y=.8,!0}}return!1}},{key:"getRandomAng",value:function(){return Math.random()*Math.PI*2}},{key:"updateYByH",value:function(){this.dragArera.y=this.H+this.dy2,this.tiaojiegan.y=this.dragArera.y-this.dy}},{key:"checkPengzhuangWall",value:function(t,e){if(!this.freeRect.contains(t,e))return!0;for(var i=0;5>i;i++){var n=126*i-264;if(e>-154+this.H&&t>n&&n+28>t)return!0}return!1}},{key:"addBomb",value:function(t,e){this.bombAt(t,e,.2),this.bombAt(t,e,.6),this.bombAt(t,e,1)}},{key:"bombAt",value:function(t,e,i){var n=this.getBomb();n.x=t,n.y=e,n.scale.x=n.scale.y=i,n.alpha=.3,this.con2.addChild(n),this.bombArr.push(n)}},{key:"initHe",value:function(){for(var t=0;6>t;t++)for(var e=0;3>e;e++)for(var i=126*t-345+30*e,n=0;10>n;n++){var o=30*n-135,r=this.getHe();this.con.addChild(r),r.x=i,r.y=o,r.ox=i,r.oy=o,r.rotation=0,r.scale.x=r.scale.y=1,r.minHe.visible=!1,this.heArr.push(r)}}},{key:"resetClick",value:function(t){var e=this;this.heArr.forEach(function(t){t.x=t.ox,t.y=t.oy,t.u.visible=!0,t.rotation=0,t.minHe.visible=!1,t.scale.x=t.scale.y=1}),this.zhongziArr.forEach(function(t){e.zhongziPool.push(t),e.con.removeChild(t)}),this.zhongziArr.length=0,this.bombArr.forEach(function(t){e.bombPool.push(t),e.con2.removeChild(t)}),this.bombArr.length=0}},{key:"emitClick",value:function(t){var e=Math.floor(6*Math.random()),i=this.freeRect.height,n=98,o=126*e-345+n/2,r=i/4-135;n=1,i/=2;for(var a=o+Math.random()*n,s=r+Math.random()*i,l=this.getRandomAng();10>(180*l/Math.PI+5)%90;)l=this.getRandomAng();this.emitZhongzi(a,s,l)}},{key:"emitZhongziAt",value:function(t,e){this.emitZhongzi(t,e,this.getRandomAng())}},{key:"emitZhongzi",value:function(t,e,i){var n=this.getZhongzi();this.con.addChild(n),this.zhongziArr.push(n),n.x=t,n.y=e,n.ang=i,n.speedX=Math.cos(i)*this.speed,n.speedY=Math.sin(i)*this.speed}},{key:"getZhongzi",value:function(){var t=this.zhongziPool.pop();return t||(t=PIXI.Sprite.fromFrame("NuclearReactor/neutron.png"),t.anchor.x=t.anchor.y=.5),t}},{key:"getHe",value:function(){var t=this.hePool.pop();if(!t){t=PIXI.Sprite.fromFrame("NuclearReactor/nucleus.png");var e=PIXI.Sprite.fromFrame("NuclearReactor/u.png"),i=PIXI.Sprite.fromFrame("NuclearReactor/nucleus2.png");t.addChild(e),t.addChild(i),t.minHe=i,t.u=e,e.anchor.x=e.anchor.y=.5,t.anchor.x=t.anchor.y=.5,i.anchor.x=i.anchor.y=.5,i.x=16+3*Math.random(),i.y=0,i.scale.x=i.scale.y=.8}return t}},{key:"getBomb",value:function(){var t=this.bombPool.pop();return t||(t=PIXI.Sprite.fromFrame("NuclearReactor/bomb.png"),t.anchor.x=t.anchor.y=.5),t}},{key:"speedChanged",value:function(t){this.speed=t.showValue}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.speed=this.speed,t.H=this.H,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.speed=(0,h.get)(t,"speed",3),this.H=(0,h.get)(t,"H",0),this.updateYByH()}},{key:"getConf",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("neutron_speed"),!1,"",5,0,(0,h.round)(this.speed,1),.1,this.speedChanged,this)),t}}]),e}(c["default"])},832:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){var i=[],n=!0,o=!1,r=undefined;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(l){o=!0,r=l}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function C(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:C(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},u=i(1),c=i(584),d=n(c),p=i(450),f=n(p),y=i(648),m=n(y),g=i(843),v=n(g),b=i(844),_=n(b),x=i(845),w=n(x);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=11;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.level=7,i.bg=null,i.bottomSp=null,i.bp0=null,i.bp1=null,i.princ=null,i.iuDiag=null,i.miuUDiag=null,i.iuDiagram=null,i.miuUDiagram=null,i.principle=null,i.isOptical=!0,i.metals=[i.language.getLocaleStr("ele_W"),i.language.getLocaleStr("ele_Zn"),i.language.getLocaleStr("ele_Ca"),i.language.getLocaleStr("ele_Na"),i.language.getLocaleStr("ele_K"),i.language.getLocaleStr("ele_Rb")],i.frequencies=[10.95,8.1,7.73,5.53,5.44,5.15],i.w0s=[4.54,3.34,3.2,2.29,2.25,2.13],i.metalId=0,i.optHitSegments=[new u.Point(12.5,-67.5),new u.Point(12.5,-13.5)],i.voltage=0,i.Source=0,i.rays=[],i.MAX_RESISTANCE=1e6,i.MIN_RESISTANCE=f["default"].MIN_RESISTANCE,i.Resistance=i.MAX_RESISTANCE,i.elecConnect=!0,i}return a(e,t),l(e,[{key:"added",value:function(){var t=this;this.iuDiagram=new v["default"](this,this.iuDiag),this.miuUDiagram=new _["default"](this,this.miuUDiag),this.principle=new w["default"](this,this.princ),this.iuDiagram.visible=!1,this.miuUDiagram.visible=!1,this.principle.visible=!1,this.iuDiagram.setPosition(634,-225),this.miuUDiagram.setPosition(632,607),this.principle.setPosition(-8,-445);this.iuDiagram.setScale(2),this.miuUDiagram.setScale(2),this.principle.setScale(2),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.backCon.addChild(this.bottomSp),this.tickerId=u.M.addTicker(function(){t.update()})}},{key:"removed",value:function(){u.M.removeTicker(this.tickerId),this.iuDiagram.destroy(),this.miuUDiagram.destroy(),this.principle.destroy(),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){var t=this;if(this.rays){var e=[],i=0;this.rays.forEach(function(n){var o=t.getOptI(n,t.voltage);e.push(o),i+=o[0]}),this.Source=i,this.elecChanged(),this.principle.setI(i);var n=0,o=0;this.rays.forEach(function(e){var i=e.opticalData.color,r=e.opticalData.alpha,a=t.OpticalUtil.colorSuperposition(n,o,i,r),l=s(a,2);n=l[0],o=l[1]}),this.principle.setColor(n,o),this.iuDiagram.setColor(n);var r=this.principle.infrared,a=this.principle.ultravioletRays;r.visible=!1,a.visible=!1,this.rays.forEach(function(t){var e=t.opticalData.lamda;if(e>700){r.visible=!0;var i=.3+.7*(780-e)/80;r.alpha=Math.max(1-i,1)}else if(420>e){a.visible=!0;var n=.3+.7*(e-380)/40;a.alpha=Math.max(1-n,1)}});var l=this.getRayMaxF();l&&this.miuUDiagram.setIUlambda(this.Source,this.curPower,l.opticalData.lamda),this.principle.rayResults=e,this.iuDiagram.setUI(this.curPower,this.Source),this.iuDiagram.update(),this.miuUDiagram.update(),this.principle.update()}}},{key:"freshTxtColor",value:function(){var t=this.globalConfig.TXT_COLOR;this.miuUDiagram.setTextColor(t),this.iuDiagram.setTextColor(t),this.principle.setTextColor(t)}},{key:"getRayMaxF",value:function(){var t=null;return this.rays.forEach(function(e){t?t.opticalData.lamda>e.opticalData.lamda&&(t=e):t=e}),t}},{key:"getOptI",value:function(t,e){var i=t.opticalData.I,n=this.frequencies[this.metalId],o=3e3/t.opticalData.lamda,r=o-n;if(0>r)return[0,r,i,null];var a=m["default"].H*r*1e14/m["default"].E,s=a;return e>s?[-this.getIsca4(s,e,o)*m["default"].E*t.opticalData.I*.001*1e-17/(m["default"].H*o),r,i,s]:[0,r,i,s]}},{key:"getIsca3",value:function(t,e,i){return 1/(1+Math.exp(-(e-t)))-.5}},{key:"getIsca4",value:function(t,e,i){var n=-1/(1+Math.exp(-t));return 1/(1+Math.exp(-e))+n}},{key:"getIsca2",value:function(t,e,i){var n=-1/(1+Math.pow(Math.E,-t));return(i*((.999/(1/(1+Math.pow(Math.E,-4.5))+n)+1)/i)-1)*(1/(1+Math.pow(Math.E,-e))+n)}},{key:"getIsca",value:function(t,e){var i=-t/.95;return-(1-.95)*i/(e+i)+1}},{key:"overStep",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"overStep",this).call(this),this.voltage=this.curPower,this.principle.setPower(this.voltage)}},{key:"lightCalculateEnd",value:function(){}},{key:"metalChanged",value:function(t){this.metalId=t.checked,this.freshLibPan()}},{key:"showPrincileChanged",value:function(t){this.principle.visible=t.checked}},{key:"showIUChanged",value:function(t){this.iuDiagram.visible=t.checked}},{key:"showMiuUChanged",value:function(t){this.miuUDiagram.visible=t.checked}},{key:"getData",value:function(){var t=h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.metalId=this.metalId,t.showPrinciple=this.principle.getData(),t.showIU=this.iuDiagram.getData(),t.showMiuU=this.miuUDiagram.getData(),t}},{key:"setData",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.metalId=+t.metalId||0,this.metalChanged({checked:this.metalId}),this.principle.setData(t.showPrinciple),this.iuDiagram.setData(t.showIU),this.miuUDiagram.setData(t.showMiuU)}},{key:"getConf",value:function(){var t=h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getDropMenu(this.language.getLocaleStr("type"),!1,"",this.metals[this.metalId],this.metals,this,this.metalChanged),this.ComponentProperty.getLabel(this.language.getLocaleStr("cut_off_frequency"),this.frequencies[this.metalId]+"×10¹⁴Hz"),this.ComponentProperty.getSwitch(this.language.getLocaleStr("principle"),this.principle.visible,this.showPrincileChanged,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("iu_diagram"),this.iuDiagram.visible,this.showIUChanged,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("miuu_diagram"),this.miuUDiagram.visible,this.showMiuUChanged,this)),t}},{key:"getTipMess",value:function(){var t=h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("type")+": "+this.metals[this.metalId]+"\n    "+this.language.getLocaleStr("cut_off_frequency")+": "+this.frequencies[this.metalId]+'×10<font class="pre-snum">14</font>Hz\n    '}}]),e}(d["default"])},833:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:d(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(461),u=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.bp0=null,i.bp1=null,i.bp2=null,i.bp3=null,i.bp4=null,i.bp5=null,i.bp6=null,i.lightN2=null,i.lightAr=null,i.lightHe=null,i.lightH2=null,i.lightHg=null,i.lightNe=null,i.tubeArr=[],i.elecConnect=!1,i}return r(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.tubeArr=[new c(this.lightN2,this,this.bar1),new c(this.lightAr,this,this.bar2),new c(this.lightHe,this,this.bar3),new c(this.lightH2,this,this.bar4),new c(this.lightHg,this,this.bar5),new c(this.lightNe,this,this.bar6)]}},{key:"removed",value:function(){this.tubeArr&&this.tubeArr.forEach(function(t){t.destroy()}),this.tubeArr=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.MAX_RESISTANCE=1e6,this.createZuhe({bar:6,pos:[[1,0],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1]],wire:[[[1,0],[2,0]],[[1,0],[3,0]],[[1,0],[4,0]],[[1,0],[5,0]],[[1,0],[6,0]]],res:[[1,this.MAX_RESISTANCE],[2,this.MAX_RESISTANCE],[3,this.MAX_RESISTANCE],[4,this.MAX_RESISTANCE],[5,this.MAX_RESISTANCE],[6,this.MAX_RESISTANCE]]})}},{key:"overStep",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"overStep",this).call(this),this.updateTube()}},{key:"updateTube",value:function(){this.tubeArr&&this.tubeArr.forEach(function(t){t.update()})}},{key:"getData",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t)}},{key:"getConf",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}}]),e}(u["default"]);var c=function(){function t(e,i,o){var r=this;n(this,t),this.sp=e,this.sp.visible=!1,this.eabase=i,this.bar=o,this.voltage=0,this.isStar=!1,this.alphaSca=1,this.resistance=this.bar.Resistance;var a=0,s=0;this.ticker=l.M.addTicker(function(){if(++a>s){s=5*Math.random(),a=0;var t=r.alphaSca*(.4*Math.random()+.7);r.sp.alpha=Math.min(t,1)}},this),this.bar.elecConnect=!1,this.update()}return a(t,[{key:"destroy",value:function(){this.star(!1),l.M.removeTicker(this.ticker),this.ticker=null,this.bar.Resistance=this.resistance,this.sp=null,this.eabase=null,this.bar=null}},{key:"star",value:function(t){t!==this.isStar&&(this.isStar=t,this.isStar?this.ticker.start():this.ticker.stop())}},{key:"update",value:function(){this.voltage=this.bar.curPower;var t=Math.abs(this.voltage);t>1e4?(this.bar.elecConnect||(this.bar.branchChange=!0),this.bar.elecConnect=!0,this.alphaSca=Math.min(.5+t/1e5,1),this.sp.alpha=this.alphaSca,this.star(!0),this.sp.visible=!0,this.bar.Resistance=this.resistance*this.eabase.AtomicUtil.getR(t,1e3,.9)):(this.bar.elecConnect&&(this.bar.branchChange=!0),this.bar.elecConnect=!1,this.bar.Resistance=this.resistance,this.star(!1),this.sp.visible=!1)}}]),t}()},834:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function y(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:y(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(49),c=i(461),d=n(c),p=i(477),f=n(p);e["default"]=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.bg1=null,i.switch00=null,i.btn00=null,i.gan=null,i.metal=null,i.switchButton=null,i.cloud1=null,i.cloud2=null,i.isOpen=!1,i.isPlaying=!1,i.types=[i.language.getLocaleStr("alpha-particle"),i.language.getLocaleStr("beta-particle")],i.type=0,i.animationSpeed=.5,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.btn00.alpha=0,this.showCloud(!1),this.bg1.interactive=this.bg1.interactiveChildren=!1,this.bg.alpha=0,this.switchButton=new f["default"](this.switch00,this,1,0,this.switchCallBack,this.isOpen),this.clickId=h.M.addTouch(this.btn00,{tab:this.btnClick},this),this.addCursor(this.btn00,"hand"),this.typeChanged({checked:this.type})}},{key:"removed",value:function(){this.removedCursor(this.btn00),this.cloud1.onComplete=null,this.cloud2.onComplete=null,this.removedCursor(this.btn00),h.M.removeTouch(this.btn00,this.clickId),this.switchButton.destroy(),this.switchButton=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"btnClick",value:function(t){var e=this;this.isPlaying||(this.isPlaying=!0,this.showCloud(this.isOpen),this.playGan(),this.cloud1.visible?this.playCloud(this.cloud1):this.cloud2.visible?this.playCloud(this.cloud2):setTimeout(function(){e.hadDestory||(e.isPlaying=!1)},500))}},{key:"playGan",value:function(){TweenMax.to(this.gan,.3,{x:this.gan.x-30,yoyo:!0,repeat:1})}},{key:"playCloud",value:function(t){var e=this;t.animationSpeed=2*this.animationSpeed,t.alpha=1,t.gotoAndPlay(0),t.loop=!1,t.onComplete=function(){e.isPlaying=!1,e.showCloud(!1)}}},{key:"showCloud",value:function(t){this.cloud1.visible=t&&0===this.type,this.cloud2.visible=t&&1===this.type}},{key:"switchCallBack",value:function(t,e){this.isOpen=e,this.showCloud(!1),this.isPlaying=!1,t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"typeChanged",value:function(t){this.type=t.checked,this.metal.gotoAndStop(this.type)}},{key:"speedChanged",value:function(t){this.animationSpeed=t.showValue,this.cloud1.animationSpeed=2*this.animationSpeed,this.cloud2.animationSpeed=2*this.animationSpeed}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.isOpen=this.isOpen,t.type=this.type,t.animationSpeed=this.animationSpeed,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.isOpen=t.isOpen,this.type=t.type,this.animationSpeed=t.animationSpeed,this.speedChanged({showValue:this.animationSpeed}),this.switchButton.setState(this.isOpen),this.switchCallBack(null,this.isOpen)}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("type"),this.type,this.types,this.typeChanged.bind(this)),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("speed"),!1,"",1,0,(0,u.round)(this.animationSpeed,2),.01,this.speedChanged,this)),t}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("type")+": "+this.types[this.type]+"\n    "+this.language.getLocaleStr("speed")+": "+(0,u.round)(this.animationSpeed,2)+"\n    "}}]),e}(d["default"])},835:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:p(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(1),u=i(461),c=n(u),d=i(450);n(d);e["default"]=function(t){function e(t){o(this,e),t.iElecInter=0;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.xTube=null,i.xLight=null,i.stand=null,i.screenLight=null,i.keyShadow=null,i.keyShadow01=null,i.book=null,i.key=null,i.bookShadow=null,i.MAX_RESISTANCE=1e6,i.Resistance=i.MAX_RESISTANCE,i.elecConnect=!1,i.isOpen=!1,i.keyInBook=!1,i.gra=new PIXI.Graphics,i.addChild(i.gra),i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bg=this.xTube,this.bookShadow=this.book.bookShadow,this.screenLight=this.stand.screenLight,this.keyShadow=this.stand.keyShadow,this.keyShadow.mask=this.stand.maskMc.getChildAt(0),this.keyShadow01=this.book.keyShadow,this.setKeyInBook(this.keyInBook),this.setOpen(this.isOpen),this.updateKeyShadow(),this.getMScale=function(){return t.globalConfig.main.view.scale},this.key.getMScale=this.getMScale,this.keyDragId=h.M.addDrag(this.key,null,{begin:this.dragBegin,move:this.keyDragMove,end:this.keyDragEnd},this),this.book.getMScale=this.getMScale,this.bookDragId=h.M.addDrag(this.book,null,{begin:this.dragBegin,move:this.bookDragMove,end:this.bookDragEnd},this),this.stand.getMScale=this.getMScale,this.standDragId=h.M.addDrag(this.stand,new h.Rectangle(324,-361,800,800),{begin:this.dragBegin,move:this.standDragMove,end:this.standDragEnd},this)}},{key:"removed",value:function(){this.getMScale=null,this.key.getMScale=null,h.M.removeDrag(this.key,this.keyDragId),this.book.getMScale=null,h.M.removeDrag(this.book,this.bookDragId),this.stand.getMScale=null,h.M.removeDrag(this.stand,this.standDragId),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"overStep",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"overStep",this).call(this);var t=this.curPower,i=t>1e3;this.elecConnect=i,this.isOpen!==i&&(this.isOpen=i,this.setOpen(i),this.elecChanged()),this.updateKeyShadow()}},{key:"dragBegin",value:function(){this.cannotSystemDrag=!0}},{key:"keyDragMove",value:function(t){this.keyInBook&&this.setKeyInBook(!1),this.updateKeyShadow()}},{key:"keyDragEnd",value:function(t){var e=this;if(this.cannotSystemDrag=!1,new h.Rectangle(this.book.x-100,this.book.y-100,200,200).contains(this.key.x,this.key.y)){var i=new h.Point(this.key.x-this.book.x,this.key.y-this.book.y),n=i.length/200;TweenLite.to(this.key,n,{x:this.book.x,y:this.book.y,onUpdate:function(){e.updateKeyShadow()},onComplete:function(){e.setKeyInBook(!0)}})}this.addChild(this.key)}},{key:"bookDragMove",value:function(t){this.keyInBook&&(this.key.x=this.book.x,this.key.y=this.book.y),this.updateKeyShadow()}},{key:"updateKeyShadow",value:function(){var t=new h.Point(60,-80),e=new h.Point(this.key.x,this.key.y),i=new h.Point(this.stand.x-56,0);i.y=t.y+(i.x-t.x)*(e.y-t.y)/(e.x-t.x),this.keyShadow.x=i.x-this.stand.x,this.keyShadow.y=i.y-this.stand.y;var n=e.subtract(t),o=i.subtract(t),r=n.length,a=o.length,s=a/r;this.keyShadow.scale.x=s,this.keyShadow.scale.y=s,this.keyShadow.visible=e.x>t.x&&i.x>e.x&&this.isOpen,this.gra.visible=!1,this.gra.clear(),this.gra.lineStyle(2,16711680,1),this.gra.moveTo(t.x,t.y),this.gra.lineTo(e.x,e.y),this.gra.lineStyle(2,65280,1),this.gra.moveTo(e.x,e.y),this.gra.lineTo(i.x,i.y)}},{key:"bookDragEnd",value:function(t){this.cannotSystemDrag=!1}},{key:"standDragMove",value:function(t){this.updateKeyShadow()}},{key:"standDragEnd",value:function(t){this.cannotSystemDrag=!1}},{key:"setOpen",value:function(t){this.isOpen=t,this.bookShadow.visible=this.isOpen,this.isOpen?(this.xLight.visible=!0,this.screenLight.visible=!0,this.keyShadow.visible=!0):(this.xLight.visible=!1,this.screenLight.visible=!1,this.keyShadow.visible=!1)}},{key:"setKeyInBook",value:function(t){this.keyInBook=t,this.keyInBook?(this.key.alpha=0,this.keyShadow01.alpha=.25):(this.key.alpha=1,this.keyShadow01.alpha=0)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.keyInBook=this.keyInBook,t.bookP={x:this.book.x,y:this.book.y},t.standP={x:this.stand.x,y:this.stand.y},t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.Resistance=this.MAX_RESISTANCE,this.keyInBook=t.keyInBook,this.book.x=t.bookP.x,this.book.y=t.bookP.y,this.stand.x=t.standP.x,this.stand.y=t.standP.y,this.setKeyInBook(this.keyInBook),this.bookDragMove(null),this.updateKeyShadow(),this.elecChanged()}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}}]),e}(c["default"])},836:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:c(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(642),u=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(){return n(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return r(e,t),a(e,[{key:"init",value:function(){this.rect=new l.Rectangle(-159,-158,320,319),this.ps=[new l.Point(-84,-84),new l.Point(84,-84),new l.Point(0,84),new l.Point(-168,84),new l.Point(168,84)],this.initSpeed=-3,this.k=.09,this.tailLife=25,this.showTail=!0,this.tailW=1,this.tailColor=16777215,this.particleFrameId="AlphaParticleScattering/particle.png",s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this)}}]),e}(u["default"])},837:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:c(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},l=i(1),h=i(642),u=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(){return n(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return r(e,t),a(e,[{key:"init",value:function(){this.rect=new l.Rectangle(-159,-158,320,319),this.ps=[new l.Point(2,-34),new l.Point(-340,-34),new l.Point(340,-34)],this.initSpeed=-4,this.k=1,this.tailLife=40,this.showTail=!0,this.tailW=2,this.tailColor=16777215,this.particleFrameId="AlphaParticleScattering/smallParticle.png",s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this)}}]),e}(u["default"])},838:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1);e["default"]=function(t){function e(){n(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.rect=new s.Rectangle(200,-158,256,254),t.tf=new PIXI.Text("",{font:"16px Microsoft YaHei",fill:65280}),t.addChild(t.tf),t.tf.x=t.rect.right-110,t.tf.y=t.rect.top+10;var i=new PIXI.Graphics;return t.addChild(i),i.beginFill(0,.5),i.drawRect(t.rect.x,t.rect.y,t.rect.width,t.rect.height),i.endFill(),t.mask=i,t.color=16777215,t.r=1,t.life=100,t.particalCon=new PIXI.Container,t.addChild(t.particalCon),t.pool=[],t.tfN=0,t.partxt="粒子数",t}return r(e,t),a(e,[{key:"addParticle",value:function(){var t=this.getParticle();t.alpha=1;var e=this.rect.x+Math.random()*this.rect.width,i=this.rect.y+Math.random()*this.rect.height;t.x=e,t.y=i,this.particalCon.addChild(t)}},{key:"update",value:function(){for(var t=1/this.life,e=this.particalCon.children.length-1;e>=0;e--){var i=this.particalCon.children[e];i.alpha>0?i.alpha-=t:(this.particalCon.removeChildAt(e),this.pool.push(i))}this.tfN>0||(this.tf.text=this.partxt+"："+this.particalCon.children.length,this.tfN=30),this.tfN--}},{key:"getParticle",value:function(){var t=this.pool.pop();return t||(t=PIXI.Sprite.fromFrame("AlphaParticleScattering/particle2.png")),t}}]),e}(PIXI.Container)},839:function(t,e,i){"use strict";e.__esModule=!0,function(t,e){var i=t.animate.MovieClip,n=t.Sprite,o=t.Texture.fromFrame,r=i.extend(function(t){i.call(this,{mode:t,duration:61,loop:!1}),this.addTimedChild(new n(o("circle")).setTransform(-20,-10))}),a=i.extend(function(t){i.call(this,{mode:t,duration:99,loop:!1});var e=new n(o("fire0002")),r=new n(o("fire0003")),a=new n(o("fire0004")),s=new n(o("fire0005")),l=new n(o("fire0006")),h=new n(o("fire0007")),u=new n(o("fire0008")),c=new n(o("fire0009")),d=new n(o("fire0010")),p=new n(o("fire0011")),f=new n(o("fire0012")),y=new n(o("fire0013")),m=new n(o("fire0014")),g=new n(o("fire0015")),v=new n(o("fire0016")),b=new n(o("fire0017")),_=new n(o("fire0018")),x=new n(o("fire0019")),w=new n(o("fire0020")),C=new n(o("fire0021")),P=new n(o("fire0022")),k=new n(o("fire0023")),T=new n(o("fire0024")),O=new n(o("fire0025")),M=new n(o("fire0026")),A=new n(o("fire0027")),I=new n(o("fire0028")),S=new n(o("fire0029")),E=new n(o("fire0030")),B=new n(o("fire0031")),D=new n(o("fire0032")),R=new n(o("fire0033")),N=new n(o("fire0034")),L=new n(o("fire0035")),j=new n(o("fire0036")),G=new n(o("fire0037")),F=new n(o("fire0038")),U=new n(o("fire0039")),H=new n(o("fire0040")),X=new n(o("fire0041")),V=new n(o("fire0042")),W=new n(o("fire0043")),z=new n(o("fire0044")),Y=new n(o("fire0045")),q=new n(o("fire0046")),Z=new n(o("fire0047")),$=new n(o("fire0048")),K=new n(o("fire0049")),Q=new n(o("fire0050")).setTransform(114,181.5);this.addTimedChild(e,20,1,{20:{x:114,y:181.5}}).addTimedChild(r,21,1,{21:{x:114,y:181.5}}).addTimedChild(a,22,1,{22:{x:114,y:181.5}}).addTimedChild(s,23,1,{23:{x:114,y:181.5}}).addTimedChild(l,24,1,{24:{x:114,y:181.5}}).addTimedChild(h,25,1,{25:{x:114,y:181.5}}).addTimedChild(u,26,1,{26:{x:114,y:181.5}}).addTimedChild(c,27,1,{27:{x:114,y:181.5}}).addTimedChild(d,28,1,{28:{x:114,y:181.5}}).addTimedChild(p,29,1,{29:{x:114,y:181.5}}).addTimedChild(f,30,1,{30:{x:114,y:181.5}}).addTimedChild(y,31,1,{31:{x:114,y:181.5}}).addTimedChild(m,32,1,{32:{x:114,y:181.5}}).addTimedChild(g,33,1,{33:{x:114,y:181.5}}).addTimedChild(v,34,1,{34:{x:114,y:181.5}}).addTimedChild(b,35,1,{35:{x:114,y:181.5}}).addTimedChild(_,36,1,{36:{x:114,y:181.5}}).addTimedChild(x,37,1,{37:{x:114,y:181.5}}).addTimedChild(w,38,1,{38:{x:114,y:181.5}}).addTimedChild(C,39,1,{39:{x:114,y:181.5}}).addTimedChild(P,40,1,{40:{x:114,y:181.5}}).addTimedChild(k,41,1,{41:{x:114,y:181.5}}).addTimedChild(T,42,1,{42:{x:114,y:181.5}}).addTimedChild(O,43,1,{43:{x:114,y:181.5}}).addTimedChild(M,44,1,{44:{x:114,y:181.5}}).addTimedChild(A,45,1,{45:{x:114,y:181.5}}).addTimedChild(I,46,1,{46:{x:114,y:181.5}}).addTimedChild(S,47,1,{47:{x:114,y:181.5}}).addTimedChild(E,48,1,{48:{x:114,y:181.5}}).addTimedChild(B,49,1,{49:{x:114,y:181.5}}).addTimedChild(D,50,1,{50:{x:114,y:181.5}}).addTimedChild(R,51,1,{51:{x:114,y:181.5}}).addTimedChild(N,52,1,{52:{x:114,y:181.5}}).addTimedChild(L,53,1,{53:{x:114,y:181.5}}).addTimedChild(j,54,1,{54:{x:114,y:181.5}}).addTimedChild(G,55,1,{55:{x:114,y:181.5}}).addTimedChild(F,56,1,{56:{x:114,y:181.5}}).addTimedChild(U,57,1,{57:{x:114,y:181.5}}).addTimedChild(H,58,1,{58:{x:114,y:181.5}}).addTimedChild(X,59,1,{59:{x:114,y:181.5}}).addTimedChild(V,60,1,{60:{x:114,y:181.5}}).addTimedChild(W,61,1,{61:{x:114,y:181.5}}).addTimedChild(z,62,1,{62:{x:114,y:181.5}}).addTimedChild(Y,63,1,{63:{x:114,y:181.5}}).addTimedChild(q,64,1,{64:{x:114,y:181.5}}).addTimedChild(Z,65,1,{65:{x:114,y:181.5}}).addTimedChild($,66,1,{66:{x:114,y:181.5}}).addTimedChild(K,67,1,{67:{x:114,y:181.5}}).addTimedChild(Q,68,31)}),s=i.extend(function(t){i.call(this,{mode:t,duration:99,loop:!1});var e=new n(o("bg")).setTransform(-293,-98.5),s=new a(i.SYNCHED).setTransform(-270.5,-205.45),l=new n(o("circle")),h=new r(i.SYNCHED);this.addTimedChild(e).addTimedChild(s).addTimedChild(l,0,38,{0:{x:-113.1,y:-13.5}}).addTimedChild(h,38,61,{38:{x:-93.1,y:-3.5},39:{x:-92.8},40:{x:-91.85},41:{x:-90.3},42:{x:-88.15},43:{x:-85.35},44:{x:-81.95},45:{x:-77.9},46:{x:-73.25},47:{x:-68},48:{x:-62.1},49:{x:-55.6},50:{x:-48.45},51:{x:-40.7},52:{x:-32.35},53:{x:-23.35},54:{x:-13.75},55:{x:-3.5},56:{x:7.35},57:{x:18.8},58:{x:30.9},59:{x:43.6},60:{x:56.95},61:{x:70.9},62:{x:85.45},63:{x:100.65},64:{x:116.45},65:{x:132.9},66:{x:149.95},67:{x:167.6},68:{x:185.9}})});e.GunBomb=i.extend(function(){i.call(this,{duration:189,framerate:24}),this.addTimedChild(new s(i.SYNCHED),0,99,{0:{x:626.15,y:331.1,a:1},67:{y:349.1},68:{y:311.1},69:{y:347.1},70:{y:317.1},71:{y:339.1},72:{y:323.1},73:{y:335.1},74:{y:327.1},75:{y:333.1},76:{y:331.1},88:{a:.91},89:{a:.82},90:{a:.73},91:{a:.64},92:{a:.55},93:{a:.45},94:{a:.36},95:{a:.27},96:{a:.18},97:{a:.09},98:{a:0}})}),e.GunBomb.assets={GunBomb_atlas_1:"assets/animate/GunBomb_atlas_1.json"}}(PIXI,n=n||{});var n;e["default"]=n.GunBomb},840:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);e["default"]=function(){function t(e,i,o){n(this,t),this.isOpen=e||!1,this.callBack=i,this.bindThis=o,this.t=0,this.pauseT=0,this.lastTime=0,this.isPause=!0,this.isStop=!0,this.ticker=r.M.addTicker(this.loop,this),this.isOpen&&this.open()}return o(t,[{key:"loop",value:function(t){var e=(new Date).getTime();this.isStop?this.lastTime=e:(this.isPause?this.pauseT+=e-this.lastTime:this.t+=e-this.lastTime,this.lastTime=e,this.updateCallBack())}},{key:"updateCallBack",value:function(){this.callBack&&this.callBack.call(this.bindThis,this.t,this.pauseT,this.isOpen)}},{key:"destroy",value:function(){this.close(),r.M.removeTicker(this.ticker),this.ticker=null,this.callBack=null,this.bindThis=null}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this.reset(),this.ticker.start(),this.updateCallBack())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.ticker.stop(),this.reset(),this.updateCallBack())}},{key:"start",value:function(){this.isStop&&this.reset(),this.isPause=!1,this.isStop=!1}},{key:"pause",value:function(){this.isPause=!0}},{key:"stop",value:function(){this.isStop=!0}},{key:"reset",value:function(){this.t=0,this.pauseT=0,this.isPause=!0,this.isStop=!0,this.lastTime=(new Date).getTime()}},{key:"reStart",value:function(){this.stop(),this.start()}}]),t}()},841:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,i,o){n(this,t),this.SMOOTH_COLOR=8421504,this.holder=new PIXI.Graphics,this.sbd=null,this.bbd=null,this.soffs=new h(0,0),this.boffs=new h(0,0),this.glow=null,this.lifeSpan=0,this.startX=50,this.startY=50,this.endX=200,this.endY=50,this.steps=100,this.smooth=null,this.childrenArray=[],this._smoothPercentage=50,this.color=0,this.generation=0,this.childrenProbability=.3,this.childrenMaxCount=4,this.isVisible=!0,this.parentInstance=null,this.thickness=1,this.position=0,this.absolutePosition=1,this.startStep=0,this.endStep=100,this.angle=0,this.lifeTime=0,this.color=e,this.thickness=i,0===(this.generation=o)&&(this.steps=100,this.smooth=new l(this.SMOOTH_COLOR,this.steps,50,1),this.smoothPercentage=50)}return o(t,[{key:"kill",value:function(){var t=this;if(this.killAllChildren(),null!==this.parentInstance){var e=0,i=this.parentInstance;i.childrenArray.forEach(function(n){n===t&&i.childrenArray.splice(e,1),e++}),this.holder.parent.removeChild(this.holder)}}},{key:"killAllChildren",value:function(){for(;this.childrenArray.length>0;){this.childrenArray[0].kill()}}},{key:"getLifeSpan",value:function(){return Math.random()*(t.childrenLifeSpanMax-t.childrenLifeSpanMin)+t.childrenLifeSpanMin}},{key:"getRandomStep",value:function(){return Math.floor(Math.random()*this.steps)}},{key:"generateChild",value:function(e,i){if(e=e||1,t.childrenMaxGenerations>this.generation&&this.childrenMaxCount>this.childrenArray.length){if(this.steps*t.childrenLengthDecay>=2)for(var n=0;e>n;n++){var o=new t(this.color,this.thickness,this.generation+1);o.parentInstance=this;for(var r=this.getRandomStep(),a=this.getRandomStep();a===r;)a=this.getRandomStep();var s=(Math.random()-.5)*t.angleVariation;o.lifeSpan=this.getLifeSpan(),o.position=1-r/this.steps,o.absolutePosition=this.absolutePosition*o.position;var l=1-1/(t.childrenMaxGenerations+1)*o.generation;t.alphaFadeType===t.LightningFadeType.GENERATION&&(o.alpha=l),t.thicknessFadeType===t.LightningFadeType.GENERATION&&(o.thickness=this.thickness*l),o.childrenMaxCount=this.childrenMaxCount*(1-t.childrenMaxCountDecay),o.childrenProbability=this.childrenProbability*(1-t.childrenProbabilityDecay),o.steps=Math.floor(this.steps*(1-t.childrenLengthDecay)),o.startStep=r,o.endStep=a,o.angle=s,o.smooth=this.smooth,this.childrenArray.push(o),this.holder.addChild(o.holder),i&&o.generateChild(e,!0)}}}},{key:"updateParam",value:function(){var e=this;this.childrenArray.forEach(function(i){i.angle=Math.random()*t.angleVariation-t.angleVariation/2,i.color=e.color})}},{key:"update",value:function(){this.lifeSpan>0&&20*++this.lifeTime>1e3*this.lifeSpan&&this.kill(),this.updateParam(),this.killSurplus(),this.soffs.x+=this.steps/100*t.speed,this.soffs.y+=this.steps/100*t.speed,this.sbd.perlinNoise(this.steps/20,this.steps/20,1,this.soffs);var e=this.steps*t.wavelength,i=.1*e*t.speed;this.boffs.x-=i,this.boffs.y+=i,this.bbd.perlinNoise(e,e,1,this.boffs),this.smoothPercentage>0&&this.bbd.draw(this.smooth,this.steps/this.smooth.width),Math.random()<this.childrenProbability&&this.generateChild(),this.isVisible&&this.render(),this.childrenArray.forEach(function(t){t.update()})}},{key:"render",value:function(){var e=this;this.holder.clear(),this.holder.lineStyle(this.thickness,this.color,1);for(var i=this.endX-this.startX,n=this.endY-this.startY,o=Math.sqrt(i*i+n*n),r=Math.atan2(n,i),a=Math.cos(r),s=Math.sin(r),l=0;this.steps>l;l++)!function(l){var h=1/e.steps*(e.steps-l),u=1,c=e.thickness;t.alphaFadeType===t.LightningFadeType.TIP_TO_END&&(u=e.absolutePosition*h),t.thicknessFadeType===t.LightningFadeType.TIP_TO_END&&(c=e.thickness*(e.absolutePosition*h)),e.holder.lineStyle(c,e.color,u);var d=(e.sbd.getPixel(l,0)-8421504)/16777215*o*.03,p=s*d,f=a*d,y=(e.bbd.getPixel(l,0)-8421504)/16777215*o*t.amplitude,m=s*y,g=a*y,v=e.startX+i/(e.steps-1)*l+p+m,b=e.startY+n/(e.steps-1)*l-f-g;0===l?e.holder.moveTo(v,b):e.holder.lineTo(v,b),e.childrenArray.forEach(function(e){if(e.startStep===l?(e.startX=v,e.startY=b):e.endStep===l&&(e.endX=v,e.endY=b),t.detachedEnd){var i=r+e.angle/180*Math.PI,n=o*t.childrenLengthDecay;e.endX=e.startX+Math.cos(i)*n,e.endY=e.startY+Math.sin(i)*n}})}(l)}},{key:"killSurplus",value:function(){for(;this.childrenArray.length>this.childrenMaxCount;){this.childrenArray[this.childrenArray.length-1].kill()}}},{key:"steps",set:function(t){2>t&&(t=2),t>2880&&(t=2880),this._steps=t,this.sbd=new s(this.steps,1,!1),this.bbd=new s(this.steps,1,!1),0===this.generation&&(this.smoothPercentage=this.smoothPercentage)},get:function(){return this._steps}},{key:"smoothPercentage",set:function(t){this.smooth&&(this._smoothPercentage=t,this.smooth.width=this.steps,this.smooth.color=this.SMOOTH_COLOR,this.smooth.ratioOffset=this._smoothPercentage/100*128,this.smooth.update())},get:function(){return this._smoothPercentage}}]),t}();r.LightningFadeType={NONE:"none",GENERATION:"generation",TIP_TO_END:"tip"},r.childrenLifeSpanMax=2,r.childrenLifeSpanMin=.1,r.angleVariation=60,r.alphaFadeType=r.LightningFadeType.GENERATION,r.thicknessFadeType=r.LightningFadeType.NONE,r.childrenMaxGenerations=3,r.childrenMaxCountDecay=.5,r.childrenProbabilityDecay=0,r.wavelength=.3,r.amplitude=.5,r.speed=.5,r.detachedEnd=!1,r.childrenLengthDecay=.5,e["default"]=r;var a=function(){function t(e,i){n(this,t),void 0===e&&(e=1),void 0===i&&(i=1),this.p=[],this.permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.baseX=1,this.baseY=1,this.stitch=!0,this.offX=0,this.offY=0;for(var o=0;256>o;o++)this.p[256+o]=this.p[o]=this.permutation[o];this.baseX=e,this.baseY=i}return o(t,[{key:"OctavePerlin",value:function(t,e,i,n){for(var o=0,r=1/this.baseX,a=1/this.baseY,s=1,l=0,h=0;i>h;h++)o+=this.noise((t+this.offX)*r,(e+this.offY)*a)*s,l+=s,s*=n,r*=2,a*=2;return Math.abs(o/l)}},{key:"noise0",value:function(t,e){var i=t+57*e;return 1-((i^=i<<13)*(i*i*15731+789221)+1376312589&2147483647)/1073741824}},{key:"noise",value:function(t,e){var i=255&Math.floor(t),n=255&Math.floor(e);t-=Math.floor(t),e-=Math.floor(e);var o=this.p[this.p[i]+n],r=this.p[this.p[i]+n+1],a=this.p[this.p[i+1]+n],s=this.p[this.p[i+1]+n+1],l=this.grad(o,t,e),h=this.grad(r,t,e-1),u=this.grad(a,t-1,e),c=this.grad(s,t-1,e-1),d=this.fade(t);return this.lerp(this.fade(e),this.lerp(d,l,u),this.lerp(d,h,c))}},{key:"fade",value:function(t){return t*t*t*(t*(6*t-15)+10)}},{key:"lerp",value:function(t,e,i){return e+t*(i-e)}},{key:"grad",value:function(t,e,i){switch(7&t){case 0:return e;case 1:return-e;case 2:return i;case 3:return-i;case 4:return e+i;case 5:return-e+i;case 6:return-e-i;case 7:return e-i;default:return 0}}}]),t}(),s=function(){function t(e,i,o){var r=this;n(this,t),this.width=e,this.height=i,this.transparent=o,this.perlin=new a(this.width,this.height),this.data=[];var s=0;this.forEach(function(t,e){r.data[s]=0,r.data[s+1]=0,r.data[s+2]=0,r.data[s+3]=0,s+=4})}return o(t,[{key:"forEach",value:function(t){for(var e=0;this.height>e;e++)for(var i=0;this.width>i;i++)t(i,e)}},{key:"perlinNoise",value:function(t,e,i,n){var o=this;this.perlin.baseX=Math.floor(t),this.perlin.baseY=Math.floor(e),this.perlin.offX=Math.floor(n.x),this.perlin.offY=Math.floor(n.y);var r=0;this.forEach(function(t,e){var n=255*o.perlin.OctavePerlin(t,e,i,.5);n&=255,10>t&&(n*=.1*t),10>o.width-t&&(n*=.1*(o.width-t)),o.data[r]=n,o.data[r+1]=n,o.data[r+2]=n,o.data[r+3]=o.transparent?n:255,r+=4})}},{key:"getPixel",value:function(t,e){var i=4*(e*this.width+t),n=this.data[i],o=this.data[i+1],r=this.data[i+2];return n<<16|o<<8|r}},{key:"draw",value:function(t,e){var i=this,n=0;this.forEach(function(e,o){var r=i.data[n],a=i.data[n+1],s=i.data[n+2],l=i.data[n+3],h=t.data[n]||0,u=t.data[n+1]||0,c=t.data[n+2]||0,d=t.data[n+3]||0;i.data[n]=255-(255-r)*(255-h)/255,i.data[n+1]=255-(255-a)*(255-u)/255,i.data[n+2]=255-(255-s)*(255-c)/255,i.data[n+3]=255-(255-l)*(255-d)/255,n+=4})}}]),t}(),l=function(){function t(e,i,o,r){n(this,t),this.color=e,this.ratioOffset=o,this.scaleX=r,this.width=i,this.height=1,this.data=[],this.update()}return o(t,[{key:"update",value:function(){this.data.length=0;for(var t=this.data,e=this.width*this.scaleX,i=[255,0,0,255],n=[0,this.ratioOffset,255-this.ratioOffset,255],o=0,r=this.color>>16&255,a=this.color>>8&255,s=this.color>>0&255,l=0;this.width>l;l++){var h=255*(l+e/2-this.width/2)/e,u=this.linearMapping(n,i,h);u>255?u=255:0>u&&(u=0),t[o]=r,t[o+1]=a,t[o+2]=s,t[o+3]=255&u,o+=4}}},{key:"forEach",value:function(t){for(var e=0;this.height>e;e++)for(var i=0;this.width>i;i++)t(i,e)}},{key:"getPixel",value:function(t,e){var i=4*(e*this.width+t),n=this.data[i],o=this.data[i+1],r=this.data[i+2];return n<<16|o<<8|r}},{key:"getPixel32",value:function(t,e){var i=4*(e*this.width+t);return this.data[i]<<24|this.data[i+1]<<16|this.data[i+2]<<8|this.data[i+3]}},{key:"linearMapping",value:function(t,e,i){for(var n=t.length,o=0,r=1,a=1;n-1>a;a++)i>t[a]&&(o++,r++);return(e[o]-e[r])*(i-t[o])/(t[o]-t[r])+e[o]}}]),t}(),h=function u(t,e){n(this,u),this.x=t,this.y=e}},843:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:p(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=(i(1),i(583)),u=n(h),c=i(647),d=n(c);e["default"]=function(t){function e(t,i){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.rect=new PIXI.Rectangle(-121,-326,407,357),n.lastU=NaN,n.drawLineCon=new d["default"](t.main.renderer,n.rect),n.view.addChild(n.drawLineCon),n.setColor(16777215),n.drawLineCon.getP=function(t,e){return n.getP(t,e)},n.axis=i.axis,n.textColorMatrix=new PIXI.filters.ColorMatrixFilter,n.axis.filters=[n.textColorMatrix],n.clearBtn=i.clearBtn,n.clearBtn.fontColor="#ffffff",n.clearBtn.text=n.phototube.language.getLocaleStr("reset"),n.clearBtn.tab=function(t){n.clear()},n.clearBtn["this"]=n.phototube,n}return a(e,t),s(e,[{key:"update",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"destroy",value:function(){this.drawLineCon.removed(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"setColor",value:function(t){this.drawLineCon.setLineStyle(t,2)}},{key:"setTextColor",value:function(t){this.clearBtn.fontColor=t,this.textColorMatrix.matrix=this.getColorMatrix(this.strColor2Int(t),1)}},{key:"clear",value:function(){this.drawLineCon.clear(),this.lastU=NaN}},{key:"setUI",value:function(t,e){this.drawLineCon.setXY(t,e,!this.equal(t,this.lastU)),this.lastU=t}},{key:"equal",value:function(t,e,i){return i=i||.001,Math.abs(t-e)<i}},{key:"getP",value:function(t,e){return new PIXI.Point(20*t-this.rect.x,-this.rect.y-1e7*e)}},{key:"lineMode",set:function(t){this.drawLineCon.lineMode=t},get:function(){return this.drawLineCon.lineMode}}]),e}(u["default"])},844:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:p(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=(i(1),i(583)),u=n(h),c=i(647),d=n(c);e["default"]=function(t){function e(t,i){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.rect=new PIXI.Rectangle(-121,-326,407,357),n.lastU=NaN,n.lastI=NaN,n.lastlambda=NaN,n.drawLineCon=new d["default"](t.main.renderer,n.rect),n.drawLineCon.lineMode=!1,n.view.addChild(n.drawLineCon),n.setColor(16777215),n.drawLineCon.lineCircle=!0,n.drawLineCon.getP=function(t,e){return n.getP(t,e)},n.axis=i.axis,n.textColorMatrix=new PIXI.filters.ColorMatrixFilter,n.axis.filters=[n.textColorMatrix],n.drawLineCon.setColorMatrixFilter(n.textColorMatrix),n.clearBtn=i.clearBtn,n.clearBtn.fontColor="#ffffff",n.clearBtn.text=n.phototube.language.getLocaleStr("reset"),n.clearBtn.tab=function(){n.clear()},n.clearBtn["this"]=n.phototube,n.lineBtn=i.lineBtn,n.lineBtn.fontColor="#ffffff",n.lineBtn.text=n.phototube.language.getLocaleStr("draw_line"),n.lineBtn.tab=function(){n.drawLine()},n.lineBtn["this"]=n.phototube,n}return a(e,t),s(e,[{key:"update",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"destroy",value:function(){this.drawLineCon.removed(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"clear",value:function(){this.lastU=NaN,this.lastI=NaN,this.lastlambda=NaN,this.drawLineCon.clear()}},{key:"drawLine",value:function(){this.drawLineCon.updateLinePoints(),this.drawLineCon.refreshLine()}},{key:"setColor",value:function(t){this.drawLineCon.setLineStyle(t,2)}},{key:"setTextColor",value:function(t){this.clearBtn.fontColor=t,this.lineBtn.fontColor=t;var e=this.strColor2Int(t);this.textColorMatrix.matrix=this.getColorMatrix(e,1),this.drawLineCon.lineColor=e,this.drawLineCon.refreshLine()}},{key:"setIUlambda",value:function(t,e,i){if(!isNaN(this.lastI)&&!this.equal(e,this.lastU,.001)&&.2>Math.abs(e-this.lastU)){var n=!this.lastI,o=!t;!n&&o?this.drawLineCon.setXY(i,e,!0):n&&!o&&this.drawLineCon.setXY(this.lastlambda,this.lastU,!0)}this.lastU=e,this.lastI=t,this.lastlambda=i,this.drawLineCon.drawGuideline(this.getP(i,e))}},{key:"getP",value:function(t,e){var i=3e5/t;return new PIXI.Point(.22*i-this.rect.x,60*e-this.rect.y)}},{key:"equal",value:function(t,e,i){return i=i||.001,Math.abs(t-e)<i}},{key:"lineMode",set:function(t){this.drawLineCon.lineMode=t},get:function(){return this.drawLineCon.lineMode}}]),e}(u["default"])},845:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){var i=[],n=!0,o=!1,r=undefined;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(l){o=!0,r=l}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:c(o,e,i)}if("value"in n)return n.value;var r=n.get;return r===undefined?undefined:r.call(i)},h=i(583),u=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t,i){n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));r.power=0,r.I=0,r.battery=i.battery,r.zf=i.zf,r.light=i.light,r.elec=i.elec,r.ultravioletRays=i.ultravioletRays,r.infrared=i.infrared,r.tf=i.tf,r.elec.visible=!1,r.ultravioletRays.visible=!1,r.infrared.visible=!1,r.tf.text=r.phototube.language.getLocaleStr("ray"),r.colorMatrix=new PIXI.filters.ColorMatrixFilter,r.light.filters=[r.colorMatrix],r.tfColorMatrix=new PIXI.filters.ColorMatrixFilter,r.tf.filters=[r.tfColorMatrix],r.textColor=0,r.textColorMatrix=new PIXI.filters.ColorMatrixFilter,r.zf.filters=[r.textColorMatrix],r.battery.filters=[r.textColorMatrix],r.elecCon=new PIXI.particles.ParticleContainer,r.view.addChild(r.elecCon),r.elecCon.interactive=r.elecCon.interactiveChildren=!1,r.rect=new PIXI.Rectangle(-109,-70,218,100);var a=new PIXI.Graphics;a.beginFill(0,1),a.drawRect(r.rect.x,r.rect.y,r.rect.width,r.rect.height),a.endFill(),r.view.addChild(a),r.elecCon.mask=a,r.elecCurCon=new PIXI.particles.ParticleContainer,r.view.addChild(r.elecCurCon),r.elecCurCon.x=-130.5,r.elecCurCon.y=-12.5,r.view.addChild(r.battery),r.view.addChild(r.light),r.pool=[],r.acc=0,r.elecAniP=[{x:14.5,y:10.5},{x:4.85,y:17.4},{x:4,y:30.45},{x:4,y:43.3},{x:4,y:56.15},{x:4,y:69},{x:4,y:81.85},{x:4,y:94.7},{x:4,y:107.55},{x:4,y:120.25},{x:9.05,y:131.15},{x:21.9,y:132},{x:34.75,y:132},{x:47.6,y:132},{x:60.45,y:132},{x:73.3,y:132},{x:86.2,y:132},{x:99.05,y:132},{x:111.9,y:132},{x:124.75,y:132},{x:137.6,y:132},{x:150.45,y:132},{x:163.3,y:132},{x:176.15,y:132},{x:189,y:132},{x:201.85,y:132},{x:214.7,y:132},{x:227.55,y:132},{x:240.4,y:132},{x:252.5,y:131.1},{x:257.3,y:119.9},{x:256.5,y:107},{x:256.5,y:94.15},{x:256.5,y:81.3},{x:256.5,y:68.45},{x:256.5,y:55.6},{x:256.5,y:42.7},{x:256.5,y:29.85},{x:256.7,y:17.4},{x:246.5,y:10.5}],r.elecCurNum=30,r.elecCurSpeed=0;for(var s=0;r.elecCurNum>s;s++){var l=r.getElec();r.elecCurCon.addChild(l),l.ind=s,r.updateElecCurP(l)}return r.rayResults=[],r.c=.06,r.d=2.8,r}return r(e,t),s(e,[{key:"update",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),this.rayResults.forEach(function(e){var i=a(e,4),n=i[1],o=i[2];if(n>=0&&300*Math.random()<o){var r=t.d*Math.sqrt(n)*(.8+.4*Math.random());t.addElec(-r)}});for(var i=this.elecCon.children.length-1;i>=0;i--){var n=this.elecCon.getChildAt(i);n.speedX+=this.acc,n.x+=n.speedX,(this.rect.left>n.x||n.x>this.rect.right)&&(this.elecCon.removeChildAt(i),this.pool.push(n))}this.elecCurCon.children.forEach(function(e){e.ind+=t.elecCurSpeed,0!==t.elecCurSpeed&&(e.ind>0?t.elecCurNum>e.ind||(e.ind-=t.elecCurNum):e.ind+=t.elecCurNum),t.updateElecCurP(e)})}},{key:"setI",value:function(t){this.I=t,this.elecCurSpeed=1e4*t,this.elecCurSpeed=Math.min(this.elecCurSpeed,.37),this.elecCurSpeed=Math.max(this.elecCurSpeed,-.37)}},{key:"setColor",value:function(t,e){this.colorMatrix.matrix=this.getColorMatrix(t,e),this.tfColorMatrix.matrix=this.getColorMatrix(t||this.textColor,1)}},{key:"setTextColor",value:function(t){this.textColor=this.strColor2Int(t),this.textColorMatrix.matrix=this.getColorMatrix(this.strColor2Int(t),1)}},{key:"setPower",value:function(t){this.power=0,t>0?this.battery.scale.x=this.zf.scale.x=1:0>t&&(this.battery.scale.x=this.zf.scale.x=-1),this.acc=-t*this.c,this.acc=Math.min(this.acc,1),this.acc=Math.max(this.acc,-1)}},{key:"addElec",value:function(t){var e=this.getElec();return this.elecCon.addChild(e),e.x=this.rect.right,e.y=this.rect.y+(.25+.5*Math.random())*this.rect.height,e.speedX=t,e}},{key:"getElec",value:function(){var t=this.pool.pop();return t||(t=PIXI.Sprite.fromFrame("Phototube/elec.png"),t.anchor.x=.5,t.anchor.y=.5),t}},{key:"updateElecCurP",value:function(t){var e=this.getElecCurP(t.ind);t.x=e.x,t.y=e.y}},{key:"getElecCurP",value:function(t){t=(this.elecAniP.length-1)*t/this.elecCurNum;var e=Math.floor(t),i=Math.ceil(t),n=this.elecAniP[e],o=this.elecAniP[i],r=t-e,a=o.x-n.x,s=o.y-n.y;return new PIXI.Point(n.x+a*r,n.y+s*r)}}]),e}(u["default"])},846:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e["default"]=function o(t){n(this,o),this.lamda=t,this.I=100,this.color=16777215,this.alpha=1,this.n=1,this.phi=0}},847:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);e["default"]=function(){function t(e,i){n(this,t),this._startP=null,this._endP=null,this._dirP=null,this._nextRay=null,this._prevRay=null,this.startP=e,this.dirP=i,this.endP=null,this.endPData=null,this.opticalData=null}return o(t,[{key:"startP",get:function(){return this._startP},set:function(t){this._startP=t?new r.Point(t.x,t.y):null}},{key:"dirP",get:function(){return this._dirP},set:function(t){this._dirP=t?new r.Point(t.x,t.y):null}},{key:"endP",get:function(){return this._endP},set:function(t){this._endP=t?new r.Point(t.x,t.y):null}},{key:"nextRay",set:function(t){this.nextRay&&(this.nextRay.prevRay=null),this.nextRay=t,t.prevRay=this},get:function(){return this._nextRay}},{key:"prevRay",set:function(t){this.prevRay&&(this.prevRay.nextRay=null),this.prevRay=t,t.nextRay=this},get:function(){return this._prevRay}},{key:"isHead",get:function(){return!this.prevRay}},{key:"isTail",get:function(){return!this.nextRay}}]),t}()},848:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=i(49),s=i(650),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(){function t(e){n(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.elecChangedFlag=!1,this.opticalChangedFlag=!1}return o(t,[{key:"destroy",value:function(){this.moduleMain=null,this.globalConfig=null,r.M.removeTicker(this.ticker),this.ticker=null}},{key:"init",value:function(){this.viewRect=new r.Rectangle(0,0,1,1),this.ticker=r.M.addTicker(this.loop,this,!0)}},{key:"loop",value:function(){var t=this.opticalChangedFlag;this.opticalChangedFlag=!1;var e=this.getViewRectangle();e.x===this.viewRect.x&&e.y===this.viewRect.y&&e.width===this.viewRect.width&&e.height===this.viewRect.height||(this.viewRect=e,t=!0),t&&this.lightCalculate()}},{key:"opticalChanged",value:function(){this.opticalChangedFlag=!0}},{key:"getBAt",value:function(t,e){return this.getBAtPoint(new r.Point(t,e))}},{key:"getBAtPoint",value:function(t){var e=this.getMagStaCompArr(),i=new l["default"](0,0,0);return(0,a.forEach)(e,function(e){var n=e.component.getBAtPoint(t);i.incrementBy(n)}),i}},{key:"getMagStaCompArr",value:function(){var t=this.globalConfig.main.getEquipmentArr();return(0,a.remove)(t,function(t){var e=(0,a.get)(t,"component");return!e||e.isLock||2!==e.magType||!e.getBAt}),t}},{key:"getOptCompArr",value:function(t){var e=this.globalConfig.main.getEquipmentArr();return(0,a.remove)(e,function(e){var i=(0,a.get)(e,"component");return!i||!!(0,a.find)(t,function(t){return!(0,a.get)(i,t)})}),e}},{key:"lightCalculate",value:function(){var t=this.getOptCompArr(["isAtomic"]);(0,a.forEach)(t,function(t){var e=t.component;e.isOptical&&e.lightCalculateBegin()}),(0,a.forEach)(t,function(t){var e=t.component;e.isOptical&&e.lightCalculate()}),(0,a.forEach)(t,function(t){var e=t.component;e.isOptical&&e.lightCalculateEnd()})}},{key:"rayPropagation",value:function(t){for(var e=this,i=this.getOptCompArr(["isAtomic"]),n=0;t;){if("break"===function(){var o=null,s=null,l=1e6,h=t.startP;if((0,a.forEach)(i,function(e){var i=e.component;if(i.isOptical){var n=i.checkRayCollision(t);if(n){var a=r.Point.distance(n.p,h);l>a&&(l=a,o=n,s=i)}}}),!o){var u=e.getViewRectangle(),c=t.startP.clone(),d=t.dirP.clone();d.normalize(1e5);var p=c.add(d),f=e.segmentRectangleIntersection(c,p,u);return f.length&&(t.endP=f[0]),"break"}if(t.endP=o.p,t.endPData=o,t=s.handleOptRay(t),++n>200)return"break"}())break}}},{key:"getR",value:function(t,e,i){var n=i;return 1/(t+(1/(1-n)-e))+n}},{key:"getViewRectangle",value:function(){var t=this.moduleMain.main,e=t.view.toLocal(new r.Point(0,0),t.stage),i=t.view.toLocal(new r.Point(t.W,t.H),t.stage);return new r.Rectangle(e.x,e.y,i.x-e.x,i.y-e.y)}},{key:"linearMapping",value:function(t,e,i,n){var o=t.length,r=0,a=1;n=n||1;for(var s=1;o>s;s++)1===n?i>t[s]&&(r++,a++):t[s]>i&&(r++,a++);return(e[r]-e[a])*(i-t[r])/(t[r]-t[a])+e[r]}},{key:"segmentRectangleIntersection",value:function(t,e,i){var n=new r.Point(i.x,i.y),o=new r.Point(i.x+i.width,i.y),a=new r.Point(i.x+i.width,i.y+i.height),s=new r.Point(i.x,i.y+i.height),l=[],h=this.segmentsIntr(t,e,n,o);h&&l.push(h);var u=this.segmentsIntr(t,e,o,a);u&&l.push(u);var c=this.segmentsIntr(t,e,a,s);c&&l.push(c);var d=this.segmentsIntr(t,e,s,n);return d&&l.push(d),l}},{key:"segmentsIntr",value:function(t,e,i,n){var o=(e.y-t.y)*(n.x-i.x)-(t.x-e.x)*(i.y-n.y);if(0===o)return null;var a=((e.x-t.x)*(n.x-i.x)*(i.y-t.y)+(e.y-t.y)*(n.x-i.x)*t.x-(n.y-i.y)*(e.x-t.x)*i.x)/o,s=-((e.y-t.y)*(n.y-i.y)*(i.x-t.x)+(e.x-t.x)*(n.y-i.y)*t.y-(n.x-i.x)*(e.y-t.y)*i.y)/o;return(a-t.x)*(a-e.x)>1e-10||(s-t.y)*(s-e.y)>1e-10||(a-i.x)*(a-n.x)>1e-10||(s-i.y)*(s-n.y)>1e-10?null:new r.Point(a,s)}}]),t}()}});