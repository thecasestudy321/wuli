var __awaiter=this&&this.__awaiter||function(t,e,n,i){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function s(t){try{c(i.next(t))}catch(e){r(e)}}function a(t){try{c(i["throw"](t))}catch(e){r(e)}}function c(t){t.done?n(t.value):o(t.value).then(s,a)}c((i=i.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(r=s[0]&2?o["return"]:s[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;if(o=0,r)s=[s[0]&2,r.value];switch(s[0]){case 0:case 1:r=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;o=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){n.label=s[1];break}if(s[0]===6&&n.label<r[1]){n.label=r[1];r=s;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(s);break}if(r[2])n.ops.pop();n.trys.pop();continue}s=e.call(t,n)}catch(a){s=[6,a];o=0}finally{i=r=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-7243f468.system.js","./p-eed37127.system.js","./p-46752feb.system.js","./p-00271e78.system.js","./p-a9129b60.system.js"],(function(t){"use strict";var e,n,i,o,r;return{setters:[function(t){e=t.r;n=t.c;i=t.h;o=t.g},function(){},function(){},function(t){r=t.g},function(){}],execute:function(){var s=t("nb_library_item",function(){function t(t){e(this,t);this.eqData={};this.ownerSetAddPos=false;this.ownerSetAddPosUid=0;this.isvip=false;this.iconstyle={};this.isclick=true;this.startOffset=null;this._iconNode=null;this.addNum=0;this.eqsDistance=100;this.layerCount=0;this.startP={x:0,y:0};this.clickItem=n(this,"clickItem",7);this.registerItem=n(this,"registerItem",7)}t.prototype.componentWillLoad=function(){};t.prototype.componentDidLoad=function(){this.setIconStyles();this.registerItem.emit({target:this})};t.prototype.componentDidUnload=function(){this.canvas=null;console.log("library item unload")};t.prototype.setIconStyles=function(){var t=this.eqData;var e=t.bgImgUrl;var n;var i="auto";if(t.iconPngData){var o=t.iconPngData.x;var r=t.iconPngData.y;n="-"+o+"px -"+r+"px"}else{n=""}var s={"background-image":e,"background-size":i,"background-position":n};this.iconstyle=s};t.prototype.itemClick=function(){if(!this.isclick){return}if(s.oriOwnerSetAddPosUid!==this.ownerSetAddPosUid){s.oriOwnerSetAddPosUid=this.ownerSetAddPosUid;s.addNum2=0;s.layerCount2=0}var t=r(this.canvas,"phyCanvas.viewScale",1);var e=s.addNum2===0?0:Math.PI/2/s.addNum2;var n={x:window.innerWidth/2,y:window.innerHeight/2};var i=n.x+Math.cos(s.layerCount2*e)*s.addNum2*this.eqsDistance*t;var o=n.y+Math.sin(s.layerCount2*e)*s.addNum2*this.eqsDistance*t;s.layerCount2++;if(s.addNum2===0||s.layerCount2%(s.addNum2*4)===0){s.addNum2++;s.layerCount2=0}this.clickItem.emit({target:this,data:this.eqData,pos:{x:i,y:o}})};t.prototype.moveCloneImg=function(t){if(!t){return null}var e=window.$;var n=this.iconNode;var i=this.startOffset;i={x:40,y:40};e(n).css("pointer-events","none");if(!n.isadd){e(document.body).append(n)}var o=t.clientX-i.x;var r=t.clientY-i.y;n.css("left",o+"px");n.css("top",r+"px");return{x:o,y:r}};t.prototype.removeCloneImg=function(){this.iconNode.remove()};t.prototype.showLoading=function(){var t=window.$;var e=t(this._iconNode).children()[0];if(e){e.style.display="block"}};t.prototype.hideLoading=function(){var t=window.$;var e=t(this._iconNode).children()[0];if(e){e.style.display="none"}};Object.defineProperty(t.prototype,"iconNode",{get:function(){var t=this.element.querySelector(".iconBlock");var e=window.$;if(!this._iconNode){this._iconNode=e(t).clone()}this._iconNode.addClass("showedDragElement");this._iconNode.css({position:"absolute",zIndex:"9999",width:t.clientWidth+"px",height:t.clientHeight+"px",opacity:.5});return this._iconNode},enumerable:true,configurable:true});t.prototype.touchBegin=function(t){return __awaiter(this,void 0,void 0,(function(){var e,n,i,o;return __generator(this,(function(r){e=this.element.querySelector(".eqsBlock");n=e.getBoundingClientRect();if(t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom){i=this.element.querySelector(".iconBlock");o=i.getBoundingClientRect();this.startOffset={x:t.clientX-o.left,y:t.clientY-o.top};this.isclick=true;return[2,this]}return[2,null]}))}))};Object.defineProperty(t.prototype,"eqIsLock",{get:function(){if(this.canvas&&this.canvas.removeLock){return false}if(!this.eqData){return true}if(this.isvip){return false}return!this.eqData.isLock?false:true},enumerable:true,configurable:true});t.prototype.addLockIcon=function(){if(this.eqIsLock){return i("span",{class:"iconfont"})}};t.prototype.render=function(){var t=this;return i("div",{class:"eqsBlock",onClick:function(){setTimeout((function(){t.itemClick()}),0)}},this.addLockIcon(),i("div",{class:"iconPareBox"},i("div",{class:"iconBlock",style:this.iconstyle})),i("span",{class:"eqsName"},this.eqData.name))};Object.defineProperty(t.prototype,"element",{get:function(){return o(this)},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".editor_icon_lock,nb-library-item .eqsBlock .iconfont{background-image:url(assets/imgs/nbk/nbk_commons_sprite.png);background-size:24px 24px;background-repeat:no-repeat;background-position:0 0;width:24px;height:24px}nb-library-item .eqsBlock{cursor:pointer;width:120px;height:120px;display:block;background-color:rgba(26,27,28,.15);border:1px solid rgba(26,27,28,.15);margin-left:6px;margin-top:6px;border-radius:8px;-webkit-transition:background-color .25s;transition:background-color .25s}nb-library-item .eqsBlock:hover{background:rgba(0,0,0,.15);border:1px solid #4b515e}nb-library-item .eqsBlock .iconPareBox{position:relative;width:100%;min-height:80px;padding-top:3px}nb-library-item .eqsBlock .iconPareBox .iconBlock{position:relative;width:80px;height:80px;margin:0 auto;text-align:center;bottom:0}nb-library-item .eqsBlock .eqsName{text-align:center;font-size:14px;word-break:break-word;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;margin-top:5px}nb-library-item .eqsBlock .iconfont{position:absolute;margin-left:83px;margin-top:8px;display:block;z-index:10}"},enumerable:true,configurable:true});return t}());s.oriOwnerSetAddPosUid=0;s.addNum2=0;s.layerCount2=0}}}));