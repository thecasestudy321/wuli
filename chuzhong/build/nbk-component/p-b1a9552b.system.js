System.register(["./p-eed37127.system.js"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.c;n=e.a}],execute:function(){var r=t((function(e){var t=e;function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function e(t,r,i){function o(s,u){if(!r[s]){if(!t[s]){var h="function"==typeof n&&n;if(!u&&h)return h(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=r[s]={exports:{}};t[s][0].call(l.exports,(function(e){var n=t[s][1][e];return o(n||e)}),l,l.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){var r=function(){function e(){o(this,e)}return u(e,null,[{key:"arrayContainsValue",value:function(e,t){return-1!=e.indexOf(t)}},{key:"arrayContainsArray",value:function(t,n){var r=!0,i=void 0,o=n.length;for(i=0;i<o;i++){var a=n[i];if(!e.arrayContainsValue(t,a)){r=!1;break}}return r}},{key:"removeValueFromArray",value:function(e,t){var n=void 0;for(n=e.length;n>-1;n--)if(e[n]==t)return e.splice(n,1),!0;return!1}},{key:"addSingleArr",value:function(t,n){return!e.arrayContainsValue(t,n)&&(t.push(n),!0)}},{key:"removeValueFromIndex",value:function(e,t){var n=e.length,r=void 0;return t>=0&&t<n&&(r=e[t],e.splice(t,1)),r}},{key:"removeArrayFromArray",value:function(t,n){var r=n.length,i=void 0;for(i=0;i<r;i++){var o=n[i];e.removeValueFromArray(t,o)}}},{key:"createUniqueCopy",value:function(t){var n=new Array,r=t.length,i=void 0,o=void 0;for(o=0;o<r;++o)i=t[o],e.arrayContainsValue(n,i)||n.push(i);return n}},{key:"arraysAreEqual",value:function(e,t){if(e.length!=t.length)return!1;var n=e.length,r=void 0;for(r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}},{key:"clear",value:function(e){e&&0!=e.length&&e.splice(0,e.length)}},{key:"print",value:function(e){for(var t in e)trace(t+":"+e[t])}},{key:"getIndexFromValue",value:function(e,t){var n=-1,r=void 0,i=e.length;for(r=0;r<i;r++)if(t==e[r]){n=r;break}return n}},{key:"swapObj",value:function(e,t){}},{key:"swapArrObj",value:function(t,n,r){var i=e.getIndexFromValue(t,n),o=e.getIndexFromValue(t,r);i>-1&&o>-1&&(t[i]=r,t[o]=n)}},{key:"swapArrInd",value:function(e,t,n){var r=e[t],i=e[n];t>-1&&n>-1&&(e[t]=i,e[n]=r)}},{key:"swapChaArrInd",value:function(t,n,r){var i=[],o=void 0,a=void 0,s=void 0,u=void 0,h=t.length;if(n<0||n>=h)return t;if(r>=0&&r<h){o=t[n],a=t[r],e.removeValueFromIndex(t,n);var l=e.getIndexFromValue(t,a);for(s=0;s<l;s++)i[s]=t[s];for(i[l]=o,u=l+1;u<h+1;u++)i[u]=t[u-1]}else r>=h?(o=t[n],e.removeValueFromIndex(t,n),t.push(o),i=e.copyArray(t)):r<0&&(o=t[n],e.removeValueFromIndex(t,n),t.unshift(o),i=e.copyArray(t));return i}},{key:"getString",value:function(e,t){return e&&0!==e.length?(t=t||",",e.join(t)):""}},{key:"copy",value:function(e){return e?e.slice():null}},{key:"copyArray",value:function(t){return e.copy(t)}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}}]),e}();t.exports=r},{}],2:[function(e,t,n){var r=function(){function e(){o(this,e)}return u(e,null,[{key:"checkHasFlag",value:function(e,t){e=e instanceof $?e:$(e);for(var n=!1,r=0;r++<20;){var i=e&&e[0]?e[0].tagName:null;if(i=i?i.toLowerCase():i,!e||"phy-app"===i||"body"===i)break;if(e.hasClass(t)){n=!0;break}e=e.parent()}return n}}]),e}();t.exports=r},{}],3:[function(e,t,n){var r=e("./NumberUtilities"),i=function(){function e(){o(this,e)}return u(e,null,[{key:"setFullscreen",value:function(e){var t=e instanceof HTMLElement?e:document.documentElement,n=t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen;if(n)n.call(t);else if(window.ActiveXObject){var r=new window.ActiveXObject("WScript.Shell");r&&r.SendKeys("{F11}")}else console.log("~~~Your browser is not supported setFullscreen")}},{key:"exitFullscreen",value:function(){var e=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;if(e)e.call(document);else if(window.ActiveXObject){var t=new window.ActiveXObject("WScript.Shell");t&&t.SendKeys("{F11}")}}},{key:"_invokeFieldOrMethod",value:function(e,t){var n=void 0;return["webkit","moz","ms","o",""].forEach((function(r){if(!n){""===r&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var i=s(e[r+t]);i+""!="undefined"&&(n="function"===i?e[r+t]():e[r+t])}})),n}},{key:"isFullScreen",value:function(){return e._invokeFieldOrMethod(document,"FullScreen")||e._invokeFieldOrMethod(document,"IsFullScreen")||document.IsFullScreen}},{key:"toggle",value:function(t){var n=e.isFullScreen();return n?e.exitFullscreen():e.setFullscreen(t),!n}},{key:"addFullListener",value:function(t,n){if(!t||!n)return console.error("~~~~dom 或者 func 为空"),null;var i=r.getUnique();return e._fullListenerMap[i]={dom:t,func:n},t.addEventListener("webkitfullscreenchange",n),t.addEventListener("mozfullscreenchange",n),t.addEventListener("fullscreenchange",n),t.addEventListener("MSFullscreenChange",n),i}},{key:"removeFullListener",value:function(t){if(!e._fullListenerMap[t])return!1;var n=e._fullListenerMap[t],r=n.dom,i=n.func;return r.removeEventListener("webkitfullscreenchange",i),r.removeEventListener("mozfullscreenchange",i),r.removeEventListener("fullscreenchange",i),r.removeEventListener("MSFullscreenChange",i),delete e._fullListenerMap[t],!0}},{key:"hasFullListener",value:function(t){return!!e._fullListenerMap[t]}},{key:"setFullscreenFix",value:function(e){var t=window.__temp_fix_full_data;if(e&&!t){window.__temp_fix_full_data={element:e,style:{zIndex:e.style.zIndex||"unset",position:e.style.position||"unset",left:e.style.position||"unset",top:e.style.top||"unset",width:e.style.width||"unset",height:e.style.height||"unset"},parent:$(e).parent()};var n=$(e).detach();$(document.body).append(n),$(e).css({zIndex:9999,position:"fixed",left:"0px",top:"0px",width:$(window).width()+"px",height:$(window).height()+"px"})}}},{key:"exitFullscreenFix",value:function(){var e=window.__temp_fix_full_data;if(e){var t=e.style,n=e.element,r=e.parent,i=$(n).detach();r.append(i),t&&n&&$(n).css(t),delete window.__temp_fix_full_data}}},{key:"toggleFix",value:function(t){t&&(window.__temp_fix_full_data?e.exitFullscreenFix():e.setFullscreenFix(t))}}]),e}();i._fullListenerMap={},t.exports=i},{"./NumberUtilities":10}],4:[function(e,t,n){(function(e){var n=e||window,s=n.PIXI?n.PIXI.mesh.Mesh:function(){},h=function(e){function t(e,n,i){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(a.mess=i||{},a.points=[],a._ready=!0,a.rectW=10,a.rectH=10,a.radius=10,a.total=36,a.drawType=n||t.RECT,a.drawMode=s.DRAW_MODES.TRIANGLES,a.drawType===t.CRICLE)a.radius=a.mess.r||10,a.radius>300&&(a.total*=2);else if(a.drawType===t.RECT)a.rectW=a.mess.w||10,a.rectH=a.mess.h||10;else if(a.drawType===t.POLYGON){if(!i||!i.points||i.points.length<3)throw new Error("输入数据有误");a.points=i.points}return a.refresh(),a}return i(t,s),u(t,[{key:"updateData",value:function(){}},{key:"drawCircle",value:function(e){this.drawType=t.CRICLE,this.radius=e}},{key:"drawRect",value:function(e,n){this.drawType=t.RECT,this.rectW=e,this.rectH=n}},{key:"refresh",value:function(){var e=[0,0],n=[],r=[],i=[],o=this.texture;if(o._updateUvs(),this.drawType===t.RECT)$.each(o._uvs,(function(e,t){r.push(t)})),e=[0,0,this.rectW,0,0,this.rectH,this.rectW,this.rectH],i=[0,1,2,1,3,2];else if(this.drawType===t.CRICLE){var a=0,s=o._uvs,u=2*this.radius/o.width,h=s.x1*u,l=s.y2*u,c={x:s.x0+h/2,y:s.y0+l/2};r.push(c.x,c.y);var f=h/2,v=2*Math.PI/this.total;for(w=0;w<this.total;w++){var y=a,d=this.radius*Math.cos(y),g=this.radius*Math.sin(y),m=f*Math.cos(y),_=f*Math.sin(y);a+=v,e.push(d,g),r.push(c.x+m,c.y+_),w>1&&i.push(0,w-1,w)}i.push(0,this.total-1,this.total,0,this.total,1)}else if(this.drawType==t.POLYGON){var w,p=1e6,x=-1e6,k=1e7,b=-1e5;for(e=[],w=0;w<this.points.length;w++)(E=this.points[w]).index=w,e.push(E.x,E.y),0===w?(p=x=E.y,k=b=E.x):(E.x<k&&(k=E.x),E.x>b&&(b=E.x),E.y<p&&(p=E.y),E.y>x&&(x=E.y));var M=b-k,P=x-p,h=(s=o._uvs).x1-s.x0,l=s.y2-s.y0;for(w=0;w<this.points.length;w++){var E=this.points[w],m=(E.x-k)/M,_=(E.y-p)/P;r.push(s.x0+h*m,s.y0+l*_)}i=3==this.points.length?[0,1,2]:this.createTriangles()}this.vertices=new Float32Array(e),this.uvs=new Float32Array(r),this.colors=new Float32Array(n),this.indices=new Uint16Array(i)}},{key:"createTriangles",value:function(){var e=this.points.concat(),t=[],n=0,r=0,i=0;for(n=0;n<e.length;n++){0==n?(a=e[e.length-1],s=e[n],u=e[n+1]):n==e.length-1?(a=e[n-1],s=e[n],u=e[0]):(a=e[n-1],s=e[n],u=e[n+1]),(h=this.cross(a,s,u))?r++:i++}var o=void 0;for(o=r>i,n=0;;){if(3==e.length){t.push(e[0].index,e[1].index,e[2].index);break}n>e.length-1&&(n=0);var a,s,u;0==n?(a=e[e.length-1],s=e[n],u=e[n+1]):n==e.length-1?(a=e[n-1],s=e[n],u=e[0]):(a=e[n-1],s=e[n],u=e[n+1]);var h=this.cross(a,s,u);if(h==o){var l=void 0,c=void 0,f=void 0;0==n?(l=e[e.length-1],c=e[n],f=e[n+1]):n==e.length-1?(l=e[n-1],c=e[n],f=e[0]):(l=e[n-1],c=e[n],f=e[n+1]);var v=void 0,y=!0;for(v=0;v<e.length;v++)if(e[v]!=l&&e[v]!=c&&e[v]!=f&&this.isInsideTriangle(l,c,f,e[v])){y=!1,n++;break}y&&(t.push(l.index,c.index,f.index),e.splice(n,1))}else n++}return t}},{key:"isInsideTriangle",value:function(e,t,n,r){var i=(e.x-r.x)*(t.y-r.y)-(t.x-r.x)*(e.y-r.y),o=(t.x-r.x)*(n.y-r.y)-(n.x-r.x)*(t.y-r.y),a=(n.x-r.x)*(e.y-r.y)-(e.x-r.x)*(n.y-r.y);return this.sign(i)===this.sign(o)&&this.sign(o)===this.sign(a)}},{key:"sign",value:function(e){return Math.abs(e)/e}},{key:"cross",value:function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)>0}},{key:"_onTextureUpdate",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onTextureUpdate",this).call(this),this._ready&&this.refresh()}}]),t}();h.CRICLE="circle",h.RECT="rect",h.POLYGON="polygon",t.exports=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){var r=function(){function e(){o(this,e)}return u(e,null,[{key:"drawArc",value:function(e,t,n,r,i,o){var a=[t,n];o||(o=0);var s=o*Math.PI/180,u=(o+i)*Math.PI/180,h=[a[0]+r*Math.cos(s),a[1]+r*Math.sin(s)];e.moveTo(h[0],h[1]);for(var l=[a[0]+r*Math.cos(u),a[1]+r*Math.sin(u)],c=h,f=0;f<i;f+=2){var v=(f+o)*Math.PI/180,y=[r*Math.cos(v)+a[0],r*Math.sin(v)+a[1]];e.moveTo(c[0],c[1]),e.lineTo(y[0],y[1]),e.filling&&(e.lineTo(a[0],a[1]),e.lineTo(c[0],c[1])),c=y}e.lineTo(l[0],l[1]),e.filling&&(e.lineTo(a[0],a[1]),e.lineTo(c[0],c[1]))}}]),e}();t.exports=r},{}],6:[function(e,t,n){var r=function(){function e(){o(this,e),this._data={}}return u(e,[{key:"get",value:function(e){var t=this._data[this._hash(e)];return t&&t[1]}},{key:"find",value:function(e){return this.get(e)}},{key:"set",value:function(e,t){this._data[this._hash(e)]=[e,t]}},{key:"insert",value:function(e,t){this.set(e,t)}},{key:"put",value:function(e,t){this.set(e,t)}},{key:"copy",value:function(e){for(var t in e._data)this._data[t]=e._data[t]}},{key:"has",value:function(e){return this._hash(e)in this._data}},{key:"containsKey",value:function(e){return this.has(e)}},{key:"search",value:function(e){for(var t in this._data)if(this._data[t][1]===e)return this._data[t][0];return null}},{key:"remove",value:function(e){delete this._data[this._hash(e)]}},{key:"type",value:function(e){var t=Object.prototype.toString.call(e).slice(8,-1).toLowerCase();return"domwindow"!==t||e?t:e+""}},{key:"keys",value:function(){var e=[];return this.forEach((function(t,n){e.push(n)})),e}},{key:"getKeySet",value:function(){return this.keys()}},{key:"values",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"count",value:function(){return this.keys().length}},{key:"size",value:function(){return this.count()}},{key:"clear",value:function(){this._data={}}},{key:"clone",value:function(){return new e(this)}},{key:"forEach",value:function(e,t){for(var n in this._data){var r=this._data[n];e.call(t||this,r[1],r[0])}}},{key:"toString",value:function(){var e="HashMap Content = \n";return this.forEach((function(t,n){e+=n+" -> "+t+"\n"})),e}},{key:"length",value:function(){return this.count()}},{key:"isEmpty",value:function(){return 0===this.count()}},{key:"containsValue",value:function(e){var t=!1;return this.forEach((function(n,r){if(e===n)return t=!0,!1})),t}},{key:"getKeyValyeArray",value:function(){var e=[];return this.forEach((function(t,n){e.push({key:n,value:t})})),e}},{key:"_hash",value:function(t){switch(this.type(t)){case"undefined":case"null":case"boolean":case"number":case"string":case"regexp":return t+"";case"date":return"♣"+t.getTime();case"array":for(var n=[],r=0;r<t.length;r++)n[r]=this._hash(t[r]);return"♥"+n.join("⁞");default:return t.hasOwnProperty("_hmuid_")||(t._hmuid_=++e.uid),"♦"+t._hmuid_}}}]),e}();t.exports=r},{}],7:[function(e,t,n){var r=e("./NumberUtilities"),i=e("./Point"),a=e("./Rectangle"),h=e("./ArrayUtil"),l=e("./ObjTree"),c=function(){function e(){o(this,e)}return u(e,null,[{key:"sq",value:function(e){return Math.pow(Math.abs(e),2)}},{key:"bevel",value:function(e,t){return Math.sqrt(e*e+t*t)}},{key:"max",value:function(e){return Math.max.apply(null,e)}},{key:"ping",value:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length}},{key:"getUnique",value:function(){return r.getUnique()}},{key:"getUniqueID",value:function(){return r.getUniqueID()}},{key:"getBoundsFromArray",value:function(e){for(var t=new a,n=1e8,r=-1e8,i=1e10,o=-1e9,s=0;s<e.length;s++){var u=e[s];u.x<n&&(n=u.x),u.y<i&&(i=u.y),u.x+u.width>r&&(r=u.x+u.width),u.y+u.height>o&&(o=u.y+u.height)}return t.x=n,t.y=i,t.width=r-n,t.height=o-i,t}},{key:"getCenP",value:function(e,t){return new i((e.x+t.x)/2,(e.y+t.y)/2)}},{key:"getPointLen",value:function(e,t){return i.distance(e,t)}},{key:"getFuhao",value:function(e){return e>=0?1:-1}},{key:"getXYLen",value:function(e,t,n,r){return Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))}},{key:"getXianDianByDis",value:function(t,n,r,o){var a=void 0;if(r.x===o.x&&r.y===o.y)return r.clone();if(Math.abs(o.x-r.x)<1e-6){if(n&&r.y>o.y||!n&&r.y<o.y)return new i(r.x,r.y-t);if(!n&&r.y>o.y||n&&r.y<o.y)return new i(r.x,r.y+t)}a=(o.y-r.y)/(o.x-r.x);var s=Math.sqrt(t*t/(1+a*a))+r.x,u=-Math.sqrt(t*t/(1+a*a))+r.x,h=a*(s-r.x)+r.y,l=a*(u-r.x)+r.y,c=e.sq(s-o.x)+e.sq(h-o.y),f=e.sq(u-o.x)+e.sq(l-o.y);return n?c>f?new i(u,l):new i(s,h):c>f?new i(s,h):new i(u,l)}},{key:"interpolate",value:function(e,t,n){var r=t.x-e.x,o=t.y-e.y;return new i(e.x+r*n,e.y+o*n)}},{key:"getRandColor",value:function(){return 16777215*Math.random()+4278190080}},{key:"getDecimalNum",value:function(e){var t=""+e;return this.StringUtil.contains(t,".")?(t=t.substring(t.indexOf(".")+1)).length:0}},{key:"getAngleP",value:function(e,t){t||(t=new i(0,0));var n=e.x-t.x,r=e.y-t.y;return Math.atan2(r,n)*(180/Math.PI)}},{key:"getAngleP1",value:function(e,t){var n=Math.atan2(e.y,e.x)*(180/Math.PI);return t?n-Math.atan2(t.y,t.x)*(180/Math.PI):n}},{key:"getAreaByPoints",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);r=t.x-n.x,i=t.y-n.y;var a=Math.sqrt(r*r+i*i);r=n.x-e.x,i=n.y-e.y;var s=Math.sqrt(r*r+i*i),u=(o+a+s)/2;return Math.sqrt(u*(u-o)*(u-a)*(u-s))}},{key:"checkPointIn",value:function(t,n,r,i){var o=e.getAreaByPoints(n,r,i),a=0;return a+=e.getAreaByPoints(t,n,r),a+=e.getAreaByPoints(t,r,i),(a+=e.getAreaByPoints(t,i,n))===o||Math.abs(a-o)<1e-4}},{key:"getAngleByP",value:function(t,n,r){var i=e.getPointLen(n,r),o=e.getPointLen(t,r),a=e.getPointLen(t,n),s=2*o*a;0===s&&(s=1e-9);var u=(o*o+a*a-i*i)/s;return 180*Math.acos(u)/Math.PI}},{key:"getPoint_NeiXin",value:function(t,n,r){var o=e.getPointLen(t,n),a=e.getPointLen(n,r),s=e.getPointLen(t,r),u=new i;return u.x=(o*t.x+a*n.x+s*r.x)/(o+a+s),u.y=(o*t.y+a*n.y+s*r.y)/(o+a+s),u}},{key:"getSPPoint",value:function(e){return new i(e.x,e.y)}},{key:"setSPPoint",value:function(e,t){e&&t&&(e.x=t.x,e.y=t.y)}},{key:"setSPPointXY",value:function(e,t,n){e&&(e.x=t,e.y=n)}},{key:"rotaPointFromP",value:function(t,n,r){n.y===t.y&&(n.y=t.y+e.MIN);var o=new i(t.x-n.x,t.y-n.y),a=e.rotaPoint(o,r);return a.x+=n.x,a.y+=n.y,a}},{key:"atan",value:function(t,n){return e.getAngleP(t,n)}},{key:"getPFrom2DianAndAngle",value:function(t,n,r,o){t.clone(),n.clone();var a=180+e.atan(n,t)-o,s=e.toHu(a);t=e.rotaPoint(t,-s),n=e.rotaPoint(n,-s);var u=Math.sqrt(e.sq(n.x-t.x)+e.sq(n.y-t.y))*Math.sin(e.toHu(r))/Math.sin(e.toHu(180-r-o))+n.x,h=n.y,l=new i(u,h);return l=e.rotaPoint(l,s)}},{key:"toHu",value:function(e){return e/180*Math.PI}},{key:"toAngle",value:function(e){return e/Math.PI*180}},{key:"getNumStr",value:function(e){if(!(e=e.toString()))return"";var t=/(-?\d+)(\.\d+)?/;return null===t.exec(e)?0:(t.exec(e)[0]||0)-0}},{key:"getPStr",value:function(e){return/'+/.exec(e)}},{key:"getFAStr",value:function(e){return/[ABC]+/.exec(e)}},{key:"checkPointOnLineLeftOrRight",value:function(e,t,n){return(e.x-t.x)*(e.y-n.y)-(e.x-n.x)*(e.y-t.y)}},{key:"checkOnLineAB",value:function(e,t,n,r){return r||(r=.5),Math.abs((e.y-t.y)*(e.x-n.x)-(e.y-n.y)*(e.x-t.x))<r}},{key:"checkInLineAB",value:function(t,n,r,i){i||(i=.1);var o=!1;return t?e.getPointLen(t,n)+e.getPointLen(t,r)-e.getPointLen(n,r)<i&&(o=!0):o=!1,o}},{key:"isPingxing",value:function(e,t,n,r){var i=!1,o=e.x,a=e.y,s=t.x,u=t.y,h=n.x,l=n.y;return(u-a)*(r.x-h)==(s-o)*(r.y-l)&&(i=!0),i}},{key:"getJiaoP",value:function(e,t,n,r){var o=new i,a=e.x,s=e.y,u=t.x,h=t.y,l=n.x,c=n.y,f=r.x,v=r.y,y=1e-7,d=void 0;d=u===a?(h-s)/(u-a+y):(h-s)/(u-a);var g=void 0;return g=f===l?(v-c)/(f-l+y):(v-c)/(f-l),o.x=d===g?(d*a-g*l+c-s)/(d-g+y):(d*a-g*l+c-s)/(d-g),o.y=d*o.x-d*a+s,o}},{key:"checkJPIsInAB",value:function(t,n,r,i){var o=e.getJiaoP(t,n,r,i);return e.checkInLineAB(o,t,n)}},{key:"checkJPIsInABCD",value:function(t,n,r,i){var o=e.getJiaoP(t,n,r,i);return e.checkInLineAB(o,t,n)&&e.checkInLineAB(o,r,i)||e.checkInLineAB(t,r,i)||e.checkInLineAB(n,r,i)||e.checkInLineAB(r,t,n)||e.checkInLineAB(i,t,n)}},{key:"hasPoint",value:function(e,t){for(var n=!1,r=0;r<e.length;r++){var i=e[r];if(i.x===t.x&&i.y===t.y){n=!0;break}}return n}},{key:"rotaPoint",value:function(e,t){var n=new i;return n.x=Math.cos(t)*e.x-Math.sin(t)*e.y,n.y=Math.cos(t)*e.y+Math.sin(t)*e.x,n}},{key:"getPArrRect",value:function(e){for(var t=void 0,n=void 0,r=0;r<e.length;r++){var o=e[r];t?(t.x=Math.min(t.x,o.x),t.y=Math.min(t.y,o.y)):t=new i(o.x,o.y),n?(n.x=Math.max(n.x,o.x),n.y=Math.max(n.y,o.y)):n=new i(t.x,t.y)}return new a(t.x,t.y,n.x-t.x,n.y-t.y)}},{key:"getRectCen",value:function(e){var t=new i;return t.x=(e.left+e.right)/2,t.y=(e.top+e.bottom)/2,t}},{key:"getRectFromDuiP",value:function(e,t){var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y),i=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return new a(n,r,i,o)}},{key:"getZoomPoint",value:function(e,t,n,r){var o=e.x,a=e.y,s=t.x,u=t.y,h=n.x,l=n.y,c=r.x,f=r.y;return new i((h-o)/(s-o)*(c-o)+o,(l-a)/(u-a)*(f-a)+a)}},{key:"getZoomPointA",value:function(t,n,r,o,a){var s=t.x,u=t.y,h=n.x,l=n.y,c=r.x,f=r.y,v=o.x,y=o.y,d=new i(c-s,f-u),g=new i(h-s,l-u),m=new i(v-s,y-u),_=d.x/g.x,w=d.y/g.y,p=new i(_*m.x,w*m.y),x=p.x+s,k=p.y+u,b=new i(x-v,k-y),M=(b=e.getRoZoomP(b,a)).x+v,P=b.y+y;return new i(M,P)}},{key:"isPointNi",value:function(e,t,n){var r=t.x,i=t.y,o=n.x,a=n.y;return(e.x-r)*(a-i)<(e.y-i)*(o-r)}},{key:"getRoZoomP",value:function(t,n){var r=new i;return r.x=t.x*Math.cos(e.toHu(-n))+t.y*Math.sin(e.toHu(-n)),r.y=t.y*Math.cos(e.toHu(-n))-t.x*Math.sin(e.toHu(-n)),r}},{key:"getOvalPoint",value:function(e,t,n){void 0===n&&(n=null);var r=[],o=e/2,a=t/2,s=0,u=void 0,h=void 0;for(n||(n=new i(0,0));s<2*Math.PI;)u=n.x+o*Math.sin(s),h=n.y+a*Math.cos(s),r.push(new i(u,h)),s+=2/180*Math.PI;return r}},{key:"getRegPolygon",value:function(e,t,n){var r=[];if(1===e)return[t];for(var o=0;o<e;o++){var a=new i;a.x=t.x+n*Math.cos(2*Math.PI/e*o),a.y=t.y+n*Math.sin(2*Math.PI/e*o),Math.abs(a.x)<1e-5&&(a.x=0),Math.abs(a.y)<1e-5&&(a.y=0),r.push(a)}return r}},{key:"getLianPObj",value:function(e,t){return{p1:e,p2:t}}},{key:"getRegPolygonRay",value:function(t,n,r){var i=e.getRegPolygon(t,n,r),o=[];if(2===t)o.push(e.getLianPObj(i[0],i[1]));else if(t>2){for(var a=0;a<i.length-1;a++)o.push({p1:i[a],p2:i[a+1]});o.push({p1:i[i.length-1],p2:i[0]})}return{pArr:i,lianArr:o}}},{key:"getThreeRay",value:function(t,n,r){var o=[],a=[],s=0;o.push(n),s++;for(var u=Math.ceil((t-1)/3),h=0;h<u;h++)for(var l=0;l<3&&s!==t;l++){var c=void 0;c=1===o.length?o[0]:o[o.length-3];var f=new i(c.x,c.y-r);if(o.push(f),++s===t)break;var v=e.rotaPointFromP(f,n,2*-Math.PI/3);if(o.push(v),++s===t)break;var y=e.rotaPointFromP(f,n,2*Math.PI/3);if(o.push(y),++s===t)break}if(2===t)a.push(e.getLianPObj(o[0],o[1]));else if(3===t)a.push(e.getLianPObj(o[0],o[1])),a.push(e.getLianPObj(o[0],o[2]));else if(t>3){a.push(e.getLianPObj(o[0],o[1])),a.push(e.getLianPObj(o[0],o[2]));for(var d=0;d<=o.length-4;d++)a.push(e.getLianPObj(o[d],o[d+3]))}return{pArr:o,lianArr:a}}},{key:"getCrossRay",value:function(t,n,r){var o=[],a=[],s=0;o.push(n),s++;for(var u=Math.ceil((t-1)/3),h=0;h<u;h++)for(var l=0;l<4&&s!==t;l++){var c=void 0;c=1===o.length?o[0]:o[o.length-4];var f=new i(c.x,c.y-r);if(o.push(f),++s===t)break;var v=e.rotaPointFromP(f,n,-Math.PI/2);if(o.push(v),++s===t)break;var y=e.rotaPointFromP(f,n,-Math.PI);if(o.push(y),++s===t)break;var d=e.rotaPointFromP(f,n,Math.PI/2);if(o.push(d),++s===t)break}if(2===t)a.push(e.getLianPObj(o[0],o[1]));else if(3===t)a.push(e.getLianPObj(o[0],o[1])),a.push(e.getLianPObj(o[0],o[2]));else if(4===t)a.push(e.getLianPObj(o[0],o[1])),a.push(e.getLianPObj(o[0],o[2])),a.push(e.getLianPObj(o[0],o[3]));else if(t>4){a.push(e.getLianPObj(o[0],o[1])),a.push(e.getLianPObj(o[0],o[2])),a.push(e.getLianPObj(o[0],o[3]));for(var g=0;g<=o.length-5;g++)a.push(e.getLianPObj(o[g],o[g+4]))}return{pArr:o,lianArr:a}}},{key:"getHorizontalRay",value:function(t,n,r){var o=[],a=[],s=0;o.push(n),s++;for(var u=Math.ceil((t-1)/3),h=0;h<u;h++)for(var l=0;l<3&&s!==t;l++){var c=void 0;c=1===o.length?o[0]:o[o.length-2];var f=new i(c.x-r,c.y);if(o.push(f),++s===t)break;var v=e.rotaPointFromP(f,n,Math.PI);if(o.push(v),++s===t)break}if(2===t)a.push(e.getLianPObj(o[0],o[1]));else if(t>2){a.push(e.getLianPObj(o[0],o[1]));for(var y=0;y<=o.length-3;y++)a.push(e.getLianPObj(o[y],o[y+2]))}return{pArr:o,lianArr:a}}},{key:"getVerticalRay",value:function(t,n,r){var o=[],a=[],s=0;o.push(n),s++;for(var u=Math.ceil((t-1)/3),h=0;h<u;h++)for(var l=0;l<3&&s!==t;l++){var c=void 0;c=1===o.length?o[0]:o[o.length-2];var f=new i(c.x,c.y-r);if(o.push(f),++s===t)break;var v=e.rotaPointFromP(f,n,Math.PI);if(o.push(v),++s===t)break}if(2===t)a.push(e.getLianPObj(o[0],o[1]));else if(t>2){a.push(e.getLianPObj(o[0],o[1]));for(var y=0;y<=o.length-3;y++)a.push(e.getLianPObj(o[y],o[y+2]))}return{pArr:o,lianArr:a}}},{key:"getDuiDianP",value:function(t,n,r){var o=new i,a=e.getGaoDianFrom3Dian(t,n,r);return o.x=2*a.x-t.x,o.y=2*a.y-t.y,o}},{key:"getDuiDianDian",value:function(e,t){return new i(2*t.x-e.x,2*t.y-e.y)}},{key:"getNumJie",value:function(e,t){void 0===t&&(t=0),e-=0;var n=Math.pow(10,t),r=Math.round(e*n)/n+"",i=r.split(".");if(0===t)return i[0];var o=0;2===i.length?o=t-i[1].length:(o=t,r+=".");for(var a=0;a<o;)r+="0",a++;return r-0==0?0:r}},{key:"getNumToInt",value:function(e){var t=e+"",n=t.indexOf(".");return-1===n?t-0:(t=t.slice(0,n))-0}},{key:"getGaoDianFrom3Dian",value:function(e,t,n){if(!e||!t||!n)return console.error("nb-utils:getGaoDianFrom3Dian 参数不能为空"),null;if(t.x===n.x&&t.y===n.y)return new i(t.x,t.y);var r=e.x,o=e.y,a=t.x,s=t.y,u=n.x,h=n.y;return new i(1*((h-s)*(h-s)*a+(u-a)*(u-a)*r+(o-s)*(u-a)*(h-s))/((h-s)*(h-s)+(u-a)*(u-a)),((r-a)*(u-a)*(h-s)+(o-s)*(h-s)*(h-s))/((h-s)*(h-s)+(u-a)*(u-a))+s)}},{key:"getDisFrom3Dian",value:function(t,n,r){var i=e.getGaoDianFrom3Dian(t,n,r);return e.getPointLen(t,i)}},{key:"getXianDuanGaoXianDian",value:function(t,n,r,i){void 0===i&&(i=!0);var o=e.getXianDianByDis(r,!0,t,n);return i?e.rotaPointFromP(o,t,-Math.PI/2):e.rotaPointFromP(o,t,Math.PI/2)}},{key:"getRectOneP",value:function(e,t,n){return new i(e.x+t.x-n.x,e.y+t.y-n.y)}},{key:"retrieveRGBComponent",value:function(e){return"[object String]"===Object.prototype.toString.call(e)&&(e="0x"+(e="#"===e.substring(0,1)?e.substring(1):e)-0),[e>>16,e>>8&255,255&e]}},{key:"generateFromRGBComponent",value:function(e){return null===e||3!==e.length||e[0]<0||e[0]>255||e[1]<0||e[1]>255||e[2]<0||e[2]>255?16777215:e[0]<<16|e[1]<<8|e[2]}},{key:"generateTransitionalColor",value:function(t,n,r){if(1===r)return[t];if(2===r)return[t,n];var i=e.retrieveRGBComponent(t),o=e.retrieveRGBComponent(n),a=[];a.push(t),r-=2;for(var s=o[0]-i[0],u=o[1]-i[1],h=o[2]-i[2],l=1;l<r-1;l++){var c=[i[0]+s*l/r,i[1]+u*l/r,i[2]+h*l/r];a.push(e.generateFromRGBComponent(c))}return a.push(n),a}},{key:"drawArc",value:function(e,t,n,r,i,o){var a=[t,n];o||(o=0);var s=o*Math.PI/180,u=(o+i)*Math.PI/180,h=[a[0]+r*Math.cos(s),a[1]+r*Math.sin(s)];e.moveTo(h[0],h[1]);for(var l=[a[0]+r*Math.cos(u),a[1]+r*Math.sin(u)],c=h,f=0;f<i;f+=2){var v=(f+o)*Math.PI/180,y=[r*Math.cos(v)+a[0],r*Math.sin(v)+a[1]];e.moveTo(c[0],c[1]),e.lineTo(y[0],y[1]),e.filling&&(e.lineTo(a[0],a[1]),e.lineTo(c[0],c[1])),c=y}e.lineTo(l[0],l[1]),e.filling&&(e.lineTo(a[0],a[1]),e.lineTo(c[0],c[1]))}},{key:"getArcPoints",value:function(t,n,r,o,a){o=e.toAngle(o);var s=[],u=[t,n];(a=e.toAngle(a))||(a=0);var h=a*Math.PI/180,l=[u[0]+r*Math.cos(h),u[1]+r*Math.sin(h)];s.push(new i(l[0],l[1]));for(var c=0;c<o;c+=1){rad=(c+a)*Math.PI/180;var f=[r*Math.cos(rad)+u[0],r*Math.sin(rad)+u[1]];s.push(new i(f[0],f[1])),f}return s}},{key:"checkPolygonPointArr",value:function(t,n){for(var r=0,i=0,o=void 0,a=!1,s=0;s<n.length;s++){var u=void 0,h=void 0;s===n.length-1?(u=n[s],h=n[0]):(u=n[s],h=n[s+1]),o=e.getAngleByP(t,u,h),Math.abs(o-180)<.2&&(a=!0),i+=o}return a?r=2:!a&&Math.abs(i-360)<.2?r=1:Math.abs(i-360)>.2&&(r=3),r}},{key:"clonePointArr",value:function(e){if(!e)return null;for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.clone())}return t}},{key:"checkArrEqual",value:function(t,n,r){void 0===r&&(r=5),t=e.clonePointArr(t),n=e.clonePointArr(n);var i=e.getRectCen(e.getPArrRect(t)),o=e.getRectCen(e.getPArrRect(n)),a=o.x-i.x,s=o.y-i.y,u=void 0,h=void 0;for(u=0;u<t.length;u++){var l=t[u];l.x+=a,l.y+=s}for(u=0;u<t.length;u++){var c=t[u],f=!1;for(h=0;h<n.length;h++){var v=n[h];if(e.getPointLen(c,v)<=r){f=!0;break}}if(!f)return!1}return{chaX:a,chaY:s}}},{key:"checkPointEqual",value:function(t,n,r){return void 0===r&&(r=.1),e.getPointLen(t,n)<r}},{key:"checkPolygonPointArr2",value:function(e,t){for(var n=!1,r=0,i=0,o=t.length,a=0,s=o-1;a<o;s=a++){var u=(e.x-t[s].x)*(t[a].y-t[s].y)-(e.y-t[s].y)*(t[a].x-t[s].x);u>0?++r:u<0&&++i}return 0!==r&&0!==i||(n=!0),n}},{key:"drawPolygonPArr",value:function(e,t){e.moveTo(t[0].x,t[0].y),$.each(t,(function(n,r){n>0&&e.lineTo(t[n].x,t[n].y)})),e.lineTo(t[0].x,t[0].y)}},{key:"vec3ToVec2",value:function(e){return nape.geom.Vec2.get(e.zpp_inner.x,e.zpp_inner.y)}},{key:"getJiao_polygon_line",value:function(t,n,r){for(var i=[],o=0;o<r.length;o++){var a=r[o],s=o===r.length-1?r[0]:r[o+1];if(!e.isPingxing(a,s,t,n)){var u=e.getJiaoP(t,n,a,s);e.checkInLineAB(u,a,s,.1)&&i.push(u)}}return i}},{key:"containtsP",value:function(t,n,r){void 0===r&&(r=.1);for(var i=!1,o=0;o<t.length;o++){var a=t[o];if(e.getPointLen(a,n)<r){i=!0;break}}return i}},{key:"getNearP",value:function(t,n){var r=1e5,i=void 0,o=void 0;for(o=0;o<t.length;o++){var a=t[o],s=e.getPointLen(n,a);s<r&&(r=s,i=a)}return i}},{key:"checkPolygonPointArr3",value:function(e,t){if(null===t)return!1;var n=t.length,r=0,i=void 0,o=void 0,a=0,s=0;for(i=t[0],r=1;r<=n;r++)o=t[r%n],e.y>Math.min(i.y,o.y)&&e.y<=Math.max(i.y,o.y)&&e.x<=Math.max(i.x,o.x)&&i.y!==o.y&&(s=(e.y-i.y)*(o.x-i.x)/(o.y-i.y)+i.x,(i.x===o.x||e.x<=s)&&a++),i=o;return a%2!=0}},{key:"centerRotate",value:function(e,t){var n=e.rotation;e.rotation=0;var r=e.width,o=e.height;e.rotation=n;var a=e.localToGlobal(new i(r/2,o/2));e.rotation=t;var s=e.localToGlobal(new i(r/2,o/2)),u=a.subtract(s),h=e.transform.matrix;h.translate(u.x,u.y),e.transform.matrix=h}},{key:"getAllChildren",value:function(e){if(!e)return null;for(var t=[],n=0;n<e.numChildren;n++)t.push(e.getChildAt(n));return t}},{key:"getFnName",value:function(e){var t=e.toString().replace(/[\s\?]*/g,""),n=t.length>=50?50:t.length,r=(t=t.substring(0,n)).match(/^function([^\(]+?)\(/);if(r&&r[1])return r[1];var i=e.caller.toString().replace(/[\s\?]*/g,""),o=i.indexOf(t);return(r=i.substring(o-30,o).match(/([^\=]+?)\=/))&&r[1]?r[1]:"anonymous"}},{key:"touchIsType",value:function(e,t){if(e===t)return!0;switch(t){case TouchEvent.TOUCH_BEGIN:return"touchstart"===e;case TouchEvent.TOUCH_MOVE:return"touchmove"===e;case TouchEvent.TOUCH_END:return"touchend"===e;case TouchEvent.TOUCH_END_OUDSIDE:return"touchendoutside"===e;case TouchEvent.TAP:return"tap"===e}return!1}},{key:"addDenyDB",value:function(t){h.addSingleArr(e.__bdArr,t)}},{key:"removeDenyDB",value:function(t){h.removeValueFromArray(e.__bdArr,t)}},{key:"_checkIsDBMC",value:function(t){return h.arrayContainsValue(e.__bdArr,t)}},{key:"addDomTouch",value:function(t,n,r,o){if(t&&n){var a="_M"+e.getUnique()+"_";return n.mc=t,n.this=r,t[a]=n,t[a].downTime=(new Date).getTime(),t[a].downP=new i,t.$document=$(document),t[0]&&(t[0][a]=t[a]),o||(o={time:500,dis:15}),o&&(n.outData=o,n.outData.canTab=!0),n.tab&&(t[a+"touchTab"]=function(e){e.t="tab",this[a]&&(this[a].this?this[a].tab.call(this[a].this,e,this):this[a].tab.call(this,e,this))},t.on("click."+a+" touchend.tab"+a,t[a+"touchTab"])),t[a+"touchStart"]=function(t){if(this[a]){this.$document.on("mousemove."+a+" touchmove."+a,this[a+"touchMove"]),t.t="begin",this._isDown=!0;var n=void 0,r=void 0,i=!1;e._checkIsDBMC(this)&&(e.__isDenyDB=!0),this[a].dbtab&&(n=(new Date).getTime()-this[a].downTime,r=Math.abs(e.getPointLen(this[a].downP,e.getCanvasP(t))),n<300&&r<50&&(i=!0,this[a].this?this[a].dbtab.call(this[a].this,t,this):this[a].dbtab.call(this,t,this))),this[a].downTime=(new Date).getTime(),this[a].downP=e.getSPPoint(e.getMouseXY(t)),!i&&this[a].begin&&(!this[a].isAddDB||this[a].isAddDB&&!e.__isDenyDB)&&(this[a].this?this[a].begin.call(this[a].this,t,this):this[a].begin.call(this,t,this))}}.bind(t),t[a+"touchMove"]=function(t){if(this._isDown&&(t.t="move",this[a])){if(e._checkIsDBMC(this)&&(e.__isDenyDB=!0),this[a]&&(t.outData=this[a].outData,this[a].outData)){var n=Math.abs(e.getPointLen(this[a].downP,e.getMouseXY(t)));this[a].outData.dis&&n>this[a].outData.dis&&(this[a].outData.canTab=!1)}this._isDown&&this[a]&&this[a].move&&(!this[a].isAddDB||this[a].isAddDB&&!e.__isDenyDB)&&(this[a].this?this[a].move.call(this[a].this,t,this):this[a].move.call(this,t,this)),this[a]&&this[a].move2&&(!this[a].isAddDB||this[a].isAddDB&&!e.__isDenyDB)&&(this[a].this?this[a].move2.call(this[a].this,t,this):this[a].move2.call(this,t,this))}}.bind(t),t[a+"touchEnd"]=function(t){t.t="end",this[a]&&(this.$document.off("mousemove."+a,this[a+"touchMove"]),this.$document.off("touchmove."+a,this[a+"touchMove"]),this._isDown=!1,n.end&&(!this[a].isAddDB||this[a].isAddDB&&!e.__isDenyDB)&&(this[a].this?this[a].end.call(this[a].this,t,this):this[a].end.call(this,t,this)),this[a]&&this[a].isAddDB&&e.__isDenyDB&&(e.__isDenyDB=!1))}.bind(t),t.on("mousedown."+a+" touchstart."+a,t[a+"touchStart"]),t.on("mouseup."+a+" touchend."+a,t[a+"touchEnd"]),a}}},{key:"removeDomTouch",value:function(e,t){e&&t&&(e[t+"touchTab"]&&(e.off("click."+t+" touchend.tab"+t,e[t+"touchTab"]),delete e[t+"touchTab"]),e.off("mousedown."+t+" touchstart."+t,e[t+"touchStart"]),e.$document&&e.$document.off("mousemove."+t+" touchmove."+t,e[t+"touchMove"]),e.off("mouseup."+t+" touchend."+t,e[t+"touchEnd"]),delete e[t+"touchStart"],delete e[t+"touchMove"],delete e[t+"touchEnd"],e[t]&&delete e[t])}},{key:"addSVGTouch",value:function(t,n,r,i){if(t&&n){var o="_MSVG"+e.getUnique()+"_";return r=void 0===r?t:r,n.this=r,n.mc=t,t.data(o,n),t.data("funcID",o),i||(i={time:300,dis:15}),i&&(n.outData=i,n.outData.canTab=!0),n._svg_tabFunc=function(e){var t=this.data("funcID"),n=this.data(t);e.t="tab",e.mc=this,n.tab.call(n.this,e)},n._svg_beginFunc=function(e){var t=this.data("funcID");this._isDown=!0;var n=this.data(t);e.t="begin",e.mc=this,n.begin.call(n.this,e)},n._svg_moveFunc=function(e){if(this._isDown){var t=this.data("funcID"),n=this.data(t);e.t="move",e.mc=this,n.move.call(n.this,e)}},n._svg_endFunc=function(e){var t=this.data("funcID"),n=this.data(t);this._isDown=!1,e.t="end",e.mc=this,n.end.call(n.this,e)},n.tab&&t.click(n._svg_tabFunc),e.isMobileBrowser()?(n.begin&&t.touchstart(n._svg_beginFunc),n.move&&t.touchmove(n._svg_moveFunc),n.end&&t.touchend(n._svg_endFunc)):(n.begin&&t.mousedown(n._svg_beginFunc),n.move&&t.mousemove(n._svg_moveFunc),n.end&&t.mouseup(n._svg_endFunc)),o}}},{key:"isMobileBrowser",value:function(){var e=!1;if(navigator){var t=navigator.userAgent;e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)}return e}},{key:"removeSVGTouch",value:function(e,t){if(e&&t){var n=e.data(t);n.tab&&e.unclick(n._svg_tabFunc),n.begin&&(e.untouchstart(n._svg_beginFunc),e.unmousedown(n._svg_beginFunc)),n.move&&(e.untouchmove(n._svg_moveFunc),e.unmousemove(n._svg_moveFunc)),n.end&&(e.untouchend(n._svg_endFunc),e.unmouseup(n._svg_endFunc)),e.data(t,null)}}},{key:"addTouch",value:function(t,n,r,o){if(n){var a="_M"+e.getUnique()+"_";return n.mc=t,n.this=r,t[a]=n,t[a].downTime=(new Date).getTime(),t[a].downP=new i,o||(o={time:300,dis:15}),o&&(n.outData=o,n.outData.canTab=!0),n.tab&&(t[a+"touchTab"]=function(t){if(t.t="tab",this[a]){if(this[a].outData){var n=(new Date).getTime()-this[a].downTime;this[a].outData.time>0&&this[a].outData.time&&n>this[a].outData.time&&(this[a].outData.canTab=!1)}(!this[a].outData||this[a].outData&&this[a].outData.canTab)&&(this[a].this?this[a].tab.call(this[a].this,t,this):this[a].tab.call(this,t,this)),this[a]&&this[a].outData&&(this[a].outData.canTab=!0,this[a].outData.downP=e.getSPPoint(e.getMouseXY(t)))}},t.addEventListener(TouchEvent.TOUCH_END,t[a+"touchTab"])),t[a+"touchStart"]=function(t){t.t="begin",this._isDown=!0;var n=void 0,r=void 0,i=!1;e._checkIsDBMC(this)&&(e.__isDenyDB=!0),this[a].dbtab&&(n=(new Date).getTime()-this[a].downTime,r=Math.abs(e.getPointLen(this[a].downP,e.getMouseXY(t))),n<300&&r<50&&(i=!0,this[a].this?this[a].dbtab.call(this[a].this,t,this):this[a].dbtab.call(this,t,this))),this[a].downTime=(new Date).getTime(),this[a].downP=e.getSPPoint(e.getMouseXY(t)),!i&&this[a].begin&&(this[a].this?this[a].begin.call(this[a].this,t,this):this[a].begin.call(this,t,this))},t.addEventListener(TouchEvent.TOUCH_BEGIN,t[a+"touchStart"]),t[a+"touchMove"]=function(t){if(t.t="move",this[a].globalMove&&(this[a].this?this[a].globalMove.call(this[a].this,t,this):this[a].globalMove.call(this,t,this)),this._isDown){if(e._checkIsDBMC(this)&&(e.__isDenyDB=!0),t.outData=this[a].outData,this[a].outData){var n=Math.abs(e.getPointLen(this[a].downP,e.getMouseXY(t)));this[a].outData.dis&&n>this[a].outData.dis&&(this[a].outData.canTab=!1)}this[a].move&&(this[a].this?this[a].move.call(this[a].this,t,this):this[a].move.call(this,t,this))}},t.addEventListener(TouchEvent.TOUCH_MOVE,t[a+"touchMove"]),t[a+"touchEnd"]=function(e){e.t="end",this._isDown=!1,n.end&&(this[a].this?this[a].end.call(this[a].this,e,this):this[a].end.call(this,e,this))},t.addEventListener(TouchEvent.TOUCH_END,t[a+"touchEnd"]),t.addEventListener(TouchEvent.TOUCH_END_OUTSIDE,t[a+"touchEnd"]),a}}},{key:"removeTouch",value:function(e,t){if(e&&t){if(e[t]){var n=e[t],r=!0,i=!1,o=void 0;try{for(var a,s=Object.keys(n)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)n[a.value]=null}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}delete e[t],e[t+"touchTab"]&&(e.removeEventListener(TouchEvent.TOUCH_END,e[t+"touchTab"]),delete e[t+"touchTab"]),e.removeEventListener(TouchEvent.TOUCH_BEGIN,e[t+"touchStart"]),delete e[t+"touchStart"],e.removeEventListener(TouchEvent.TOUCH_MOVE,e[t+"touchMove"]),delete e[t+"touchMove"],e[t+"touchEnd"]&&(e.removeEventListener(TouchEvent.TOUCH_END,e[t+"touchEnd"]),e.removeEventListener(TouchEvent.TOUCH_END_OUTSIDE,e[t+"touchEnd"]),delete e[t+"touchEnd"]),e[t]&&(e[t].this=null)}}},{key:"vec2Length",value:function(e){return Math.sqrt(e.get_x()*e.get_x()+e.get_y()*e.get_y())}},{key:"vec3Length",value:function(e){return Math.sqrt(e.zpp_inner.x*e.zpp_inner.x+e.zpp_inner.y*e.zpp_inner.y+e.zpp_inner.z*e.zpp_inner.z)}},{key:"getRayPoint",value:function(e,t,n){var r=i.interpolate(t,e,1/i.distance(e,t));return new i(e.x+(r.x-e.x)*n,e.y+(r.y-e.y)*n)}},{key:"addDrag",value:function(t,n,r,o,a){o||(o=t),n&&void 0===r.dragRectEnable&&(r.dragRectEnable=n&&n.width>=0&&n.height>=0);var s=e.addTouch(t,{begin:function(n){t[s+"_dragData"].isDown=!0,e.setSPPoint(t[s+"_dragData"].p,e.getMouseXY(n)),r&&r.begin&&r.begin.call(o,n)},move:function(i){if(t[s+"_dragData"].isDown){var a=e.getMouseXY(i).x-t[s+"_dragData"].p.x,u=e.getMouseXY(i).y-t[s+"_dragData"].p.y;if(t.getMScale){var h=t.getMScale();a/=h.x,u/=h.y}var l=t.x+a,c=t.y+u;r&&r.dragRectEnable&&(l=e.range(l,n.x,n.x+n.width),c=e.range(c,n.y,n.y+n.height)),t[s].isLock||t.x===l&&t.y===c||(e.setSPPointXY(t,l,c),e.setSPPoint(t[s+"_dragData"].p,e.getMouseXY(i)),r&&r.move&&(i.chaX=a,i.chaY=u,r.move.call(o,i)))}},end:function(e){t[s+"_dragData"].isDown=!1,r&&r.end&&r.end.call(o,e)},tab:function(e){r&&r.tab&&r.tab.call(o,e)},dbtab:function(e){r&&r.dbtab&&r.dbtab.call(o,e)}},o,a);return t[s+"_dragData"]={p:new i(0,0)},s}},{key:"removeDrag",value:function(t,n){delete t[n+"_dragData"],e.removeTouch(t,n)}},{key:"setButton",value:function(t,n,r){if(!t.totalFrames)throw new Error("it is not MovieClip");if(2!==t.totalFrames)throw new Error("totalFrames is not equals 2");t.____setButton_touchID=e.addTouch(t,{begin:function(e){this.currentFrame=1},end:function(e){this.currentFrame=0},tab:function(e){n&&(r?n.call(r,{target:this}):n.call(this,{target:this}))}},null,{time:-1})}},{key:"removeButton",value:function(t){t&&e.removeTouch(t,t.____setButton_touchID)}},{key:"setToggle",value:function(t,n,r){t.data=n,t.data.target=t;var i=r||t;t.toggled&&(t.x+=t.data.w),e.addTouch(t,{tab:function(e){t.data.toggled=!t.data.toggled,t.data.toggled?t.x+=t.data.w:t.x-=t.data.w,t.data.toggle&&t.data.toggle.call(i,t.data.toggled)}})}},{key:"writeTxt",value:function(e,t){var n=new Blob([t],{type:"text/plain;charset=utf-8"});FileSaver.saveAs(n,e)}},{key:"setObjProperties",value:function(e,t){for(var n in t)e[n]=t[n]}},{key:"getAbsoluteUrl",value:function(e){var t=document.createElement("A");return t.href=e,e=t.href}},{key:"drawDashed",value:function(t,n,r,o,a){o||(o=5),a||(a=5);for(var s=e.getPointLen(n,r),u=0,h=void 0,l=void 0;u<s;)h=i.interpolate(r,n,u/s),(u+=o)>s&&(u=s),l=i.interpolate(r,n,u/s),t.moveTo(h.x,h.y),t.lineTo(l.x,l.y),u+=a}},{key:"drawDashedRect",value:function(t,n,r,i,o,a,s){e.drawDashed(t,n,r,a,s),e.drawDashed(t,r,i,a,s),e.drawDashed(t,i,o,a,s),e.drawDashed(t,o,n,a,s)}},{key:"drawSVGDashed",value:function(t,n,r,o){r||(r=5),o||(o=5);for(var a=e.getPointLen(t,n),s=0,u=void 0,h=void 0,l="";s<a;)u=i.interpolate(n,t,s/a),(s+=r)>a&&(s=a),h=i.interpolate(n,t,s/a),l+="M"+u.x+" "+u.y,l+="L"+h.x+" "+h.y,s+=o;return l}},{key:"drawSVGDashedRect",value:function(t,n,r,i,o,a){var s="";return s+=e.drawSVGDashed(t,n,o,a),s+=e.drawSVGDashed(n,r,o,a),s+=e.drawSVGDashed(r,i,o,a),s+=e.drawSVGDashed(i,t,o,a)}},{key:"parseXML",value:function(e){return(new l).parseXML(e)}},{key:"removeAllChild",value:function(e){if(e&&e.children.length)for(;e.children.length>0;)e.removeChildAt(0)}},{key:"get_quadraticCurveTo_points",value:function(e,t,n,r,o,a){for(var s=void 0,u=void 0,h=[],l=e,c=t,f=0,v=1;v<=20;++v)s=l+(n-l)*(f=v/20),u=c+(r-c)*f,h.push(new i(s+(n+(o-n)*f-s)*f,u+(r+(a-r)*f-u)*f));return h}},{key:"extends",value:function(e,t){e.prototype=Object.create(t.prototype),e.constructor=e}},{key:"range",value:function(e,t,n){return e=Math.max(t,e),e=Math.min(n,e)}},{key:"getValidAngle",value:function(e){var t=Math.abs(e);return e<0?360*Math.floor(t/360+1)+e:0===t?0:t%360}},{key:"angleSplitLine",value:function(e,t,n,r){var o=new i(t.x-e.x,t.y-e.y),a=new i(r.x-n.x,r.y-n.y),s=Math.sqrt(o.x*o.x+o.y*o.y),u=Math.sqrt(a.x*a.x+a.y*a.y),h=new i(1/s*o.x,1/s*o.y),l=new i(1/u*a.x,1/u*a.y);return new i(h.x+l.x,h.y+l.y)}},{key:"getValidHu",value:function(t){return e.toHu(e.getValidAngle(e.toAngle(t)))}},{key:"stopPropagation",value:function(t){var n=function(e){e.stopPropagation()};e.addTouch(t,{tab:n,begin:n,move:n,end:n})}},{key:"GetObjPos",value:function(e){var t=e,n=new i(t.offsetLeft-t.scrollLeft,t.offsetTop-t.scrollTop);for(t=t.offsetParent;t;)n.x+=t.offsetLeft-t.scrollLeft,n.y+=t.offsetTop-t.scrollTop,t=t.offsetParent;return n}},{key:"containsPoint",value:function(e,t){return!!e.getBounds().contains(t.x,t.y)}},{key:"getMouseXY",value:function(e,t,n){void 0===t&&(t=0),n||(n="changedTouches");var r=void 0;if(e.data&&e.data.global)r=e.data.global;else if(void 0===e.clientX){var o=void 0;e[n]?(o=this.getIndexFromIdentifier(e[n],t),r=new i(e[n][o].clientX,e[n][o].clientY)):(o=this.getIndexFromIdentifier(e.originalEvent[n],t),r=new i(e.originalEvent[n][o].clientX,e.originalEvent[n][o].clientY))}else r=new i(e.clientX,e.clientY);return r.clone()}},{key:"getIndexFromIdentifier",value:function(e,t){var n=0;for(n=0;n<e.length;n++)if(t===e[n].identifier)return n;return 0}},{key:"getCanvasPToMouseP",value:function(t){var n=e.getCanvasP(t),r={};return r.data={},r.data.global=new i(n.x,n.y),r.type=t.type,r}},{key:"getMousePToCanvasP",value:function(t){var n=e.getMouseXY(t),r=$("#canvasID").offset(),o=new i(r.left,r.top),a=nb.PhysicsMain.ToolScale,s=new i(n.x*a,n.y*a);s.x+=o.x,s.y+=o.y;var u={};return u.data={},u.data.global=new i(s.x,s.y),u.type=t.type,u}},{key:"getCanvasP",value:function(t,n,r){var o=$("#canvasID").offset(),a=new i(o.left,o.top),s=e.getMouseXY(t,n,r),u=new i(s.x-a.x,s.y-a.y);return u.x=u.x/nb.PhysicsMain.ToolScale,u.y=u.y/nb.PhysicsMain.ToolScale,u}},{key:"getCanvasP_sdk",value:function(t,n,r){var o=new i(0,0),a=e.getMouseXY(t,n,r);return new i(a.x-o.x,a.y-o.y)}},{key:"os",value:function(){var e=navigator.userAgent.toLowerCase();return{isIpad:/ipad/.test(e),isIphone:/iphone os/.test(e),isAndroid:/android/.test(e),isWindowsCe:/windows ce/.test(e),isWindowsMobile:/windows mobile/.test(e),isWin2K:/windows nt 5.0/.test(e),isXP:/windows nt 5.1/.test(e),isVista:/windows nt 6.0/.test(e),isWin7:/windows nt 6.1/.test(e),isWin8:/windows nt 6.2/.test(e),isWin81:/windows nt 6.3/.test(e),isWinPC:/windows nt/.test(e)}}},{key:"RGBToHex",value:function(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,n=e;if(/^(rgb|RGB)/.test(n)){for(var r=n.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),i="",o=0;o<r.length;o++){var a=Number(r[o]).toString(16);1===a.length&&(a="0"+a),i+=a}return i}if(!t.test(n))return n;var s=n.replace(/#/,"").split("");if(6===s.length)return n;if(3===s.length){for(var u="",h=0;h<s.length;h+=1)u+=s[h]+s[h];return u}}},{key:"isColorDeep",value:function(t){var n=e.retrieveRGBComponent(t);return!(.299*n[0]+.587*n[1]+.114*n[2]>=192)}},{key:"getDomColor",value:function(e){return"#"+Number(e).toString(16)}},{key:"linePath",value:function(e,t,n){if(void 0===n&&(n=!0),!e||!t||t.length<3)return null;e.moveTo(t[0].x,t[0].y);var r=void 0,i=t.length;for(r=1;r<i;r++)e.lineTo(t[r].x,t[r].y);return n&&e.lineTo(t[0].x,t[0].y),e}},{key:"getRoundP",value:function(t,n,r){var i=e.getXianDianByDis(10,!0,n,t),o=e.getXianDianByDis(10,!0,n,r);e.toHu(e.getAngleByP(t,n,r));return[t,i,o,r]}},{key:"addTicker",value:function(e,t,n){void 0===n&&(n=!0);var r=window.PIXI,i=void 0;return r&&((i=new r.ticker.Ticker).$this=t,i.add((function(t){i.$this?e.call(i.$this):e()})),n&&i.start()),i}},{key:"removeTicker",value:function(e){e&&(e.stop(),e.$this=null,delete e.$this,e=null)}},{key:"delayCallFunc",value:function(t,n,r,i){void 0===i&&(i=50),r||(r=this),t.call(r)?n.call(r):setTimeout((function(){e.delayCallFunc(t,n,r,i)}),i)}},{key:"makeOrStr",value:function(e,t){var n=void 0,r=void 0,i=t.length,o=e.length,a="",s=void 0,u=void 0;for(n=0;n<i;n++){for(r=0;r<o;r++)s=e.charCodeAt(r),u=t.charCodeAt(n)^s;a+=String.fromCharCode(u)}return a}},{key:"standardletiance",value:function(e){var t=void 0,n=e.length,r=0;for(t=0;t<n;t++)r+=e[t];var i=r/n,o=0;for(t=0;t<n;t++){var a=e[t]-i;o+=a*a}var s=o/n;return Math.sqrt(s)}},{key:"hitTestPoint",value:function(e,t,n){var r=e.getBounds();return n||(t=e.toGlobal(t)),r.contains(t.x,t.y)}},{key:"alignPivot",value:function(e,t,n){var r=t||"center",i=n||"center";"left"===r?e.pivot.x=0:"center"===r?e.pivot.x=e.width/2:"right"===r&&(e.pivot.x=e.width),"top"===i?e.pivot.y=0:"center"===i?e.pivot.y=e.height/2:"bottom"===i&&(e.pivot.y=e.height)}},{key:"clone",value:function(t){if(null===t||"object"!==(void 0===t?"undefined":s(t)))return t;if(t instanceof Date){var n=new Date;return n.setTime(t.getTime()),n}if(t instanceof Array){var r=[],i=void 0,o=t.length;for(i=0;i<o;++i)r[i]=e.clone(t[i]);return r}if(t instanceof Object){var a={};for(var u in t)t.hasOwnProperty(u)&&(a[u]=e.clone(t[u]));return a}throw new Error("Unable to copy obj! Its type isn't supported.")}},{key:"equals",value:function(t,n){if(t===n)return!0;if(void 0===n||null===n||"object"!==(void 0===n?"undefined":s(n)))return!1;var r=0,i=0;for(var o in t)r++;for(var a in n)i++;if(r!==i)return!1;if(n.constructor===t.constructor){for(var u in t)if("object"===s(t[u])){if(!e.equals(t[u],n[u]))return!1}else if("function"==typeof t[u]){if(!e.equals(t[u].toString(),n[u].toString()))return!1}else if(t[u]!==n[u])return!1;return!0}return!1}},{key:"getFirstChildren",value:function(e){for(var t=[],n=e.getElementsByTagName("*"),r=0,i=n.length;r<i;++r)if(1===n[r].nodeType){var o=n[r].parentNode;1===o.nodeType?o===e&&(t[t.length]=n[r]):o.parentNode===e&&(t[t.length]=n[r])}return t}},{key:"setInputReg",value:function(e,t){var n=this;$("#"+e).keyup((function(e){var r=n.value.replace(t,"");$(n).val(r)}))}},{key:"debounce",value:function(e,t,n,r){void 0===t&&(t=250);var i=void 0,o=r||this;return function(){var r=o||this,a=arguments,s=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(r,a)}),t),s&&e.apply(r,a)}}},{key:"getAddPIXIBMP",value:function(e,t){if(!e||!e.children||!t||0===t.length)return null;var n=null;return each(e.children,(function(e,r){if(r&&r._nbData_&&r._nbData_.libName===t)return n=r,!1})),n}},{key:"checkValidMT",value:function(e){return!e.type||e.type.indexOf("touch")>-1}},{key:"fullScreen",value:function(){var e=document.documentElement,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(void 0!==t&&t)t.call(e);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}},{key:"exitFullScreen",value:function(){var e=document,t=e.cancelFullScreen||e.webkitCancelFullScreen||e.mozCancelFullScreen||e.exitFullScreen;if(void 0!==t&&t)t.call(e);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}},{key:"listenFullscreen",value:function(e,t){var n=void 0!==t?t:this,r=document.documentElement;r.requestFullscreen?document.addEventListener("fullscreenchange",(function(){e.call(n,document.fullscreen)}),!1):r.mozRequestFullScreen?document.addEventListener("mozfullscreenchange",(function(){e.call(n,document.mozFullScreen)}),!1):r.webkitRequestFullscreen?document.addEventListener("webkitfullscreenchange",(function(){e.call(n,document.webkitIsFullScreen)}),!1):r.msRequestFullscreen&&document.addEventListener("msfullscreenchange",(function(){e.call(n,document.msFullscreenElement)}),!1)}},{key:"setRopePoints",value:function(e,t){e.points=t,e.vertices=new Float32Array(4*t.length),e.uvs=new Float32Array(4*t.length),e.colors=new Float32Array(2*t.length),e.indices=new Uint16Array(2*t.length),(e._refresh||e.refresh).call(e)}},{key:"checkIsWinXP",value:function(){var e="Win32"===navigator.platform||"Windows"===navigator.platform,t=!1,n=navigator.userAgent;return e&&(t=n.indexOf("Windows NT 5.1")>-1||n.indexOf("Windows Xp")>-1),t}},{key:"checkIsIE",value:function(){return!!window.ActiveXObject||"ActiveXObject"in window}},{key:"killTweenMax",value:function(t,n){if(t)if(t instanceof Array)for(;t.length;)e.killTweenMax(t.pop());else if(TweenMax.killTweensOf(t.target,!1,null),!n){t.prevNode=null,t.nextNode=null,t.target=null;for(var r in t.vars)t.vars[r].this&&(t.vars[r].this=null),t.vars[r]=null;t.data=null,t=null}}},{key:"getObjFromJsonStr",value:function(e){var t=null;try{var n="[object String]"===Object.prototype.toString.call(e)?JSON.parse(e):e;"[object Object]"===Object.prototype.toString.call(n)&&(t=n)}catch(e){t=null}return t}},{key:"getUrlPara",value:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=location.href.substring(location.href.indexOf("?")+1).match(t);return null!=n?n[2]:null}}]),e}();c.MIN=1e-6,c.__bdArr=[],c.__isDenyDB=!1,t.exports=c},{"./ArrayUtil":1,"./NumberUtilities":10,"./ObjTree":11,"./Point":12,"./Rectangle":14}],8:[function(e,t,n){var r=function(){function e(){o(this,e),this.ERROR_MATRIX_NOT_SQUARE="Matrix must be square.",this.ERROR_VECTOR_NOT_2D="Only two dimensional operations are supported at this time."}return u(e,null,[{key:"_check2DVector",value:function(e){if(2!==e.length)throw new Error(this.ERROR_VECTOR_NOT_2D)}},{key:"deepCopy",value:function(e){if(!Array.isArray(e))throw new Error("Input must be a Matrix.");if(void 0===e[0][0])throw new Error("Input cannot be a vector.");for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n].slice();return t}},{key:"isSquare",value:function(e){if(!Array.isArray(e))throw new Error("Input must be a Matrix.");if(void 0===e[0][0])throw new Error("Input cannot be a vector.");for(var t=e.length,n=0;n<t;n++)if(e[n].length!==t)return!1;return!0}},{key:"addition",value:function(e,t){if(e.length!==t.length||e[0].length!==t[0].length)throw new Error("Matrix mismatch");var n=new Array(e.length),r=void 0;if(e[0].length)for(r=0;r<e.length;r++){n[r]=new Array(e[r].length);for(var i=0;i<e[r].length;i++)n[r][i]=e[r][i]+t[r][i]}else for(r=0;r<e.length;r++)n[r]=e[r]+t[r];return n}},{key:"traceMatrix",value:function(e){var t=void 0,n=void 0;if(e[0].length)for(t=0;t<e.length;t++){n="";for(var r=0;r<e[t].length;r++)n+=e[t][r]+"\t";console.log(n)}else{for(n="",t=0;t<e.length;t++)n+=e[t]+"\t";console.log(n)}}},{key:"subtraction",value:function(e,t){if(e.length!==t.length||e[0].length!==t[0].length)throw new Error("Matrix mismatch");var n=new Array(e.length),r=void 0;if(e[0].length)for(r=0;r<e.length;r++){n[r]=new Array(e[r].length);for(var i=0;i<e[r].length;i++)n[r][i]=e[r][i]-t[r][i]}else for(r=0;r<e.length;r++)n[r]=e[r]-t[r];return n}},{key:"scalar",value:function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)e[n][r]=t*e[n][r];return e}},{key:"transpose",value:function(e){for(var t=new Array(e[0].length),n=0;n<e[0].length;n++){t[n]=new Array(e.length);for(var r=0;r<e.length;r++)t[n][r]=e[r][n]}return t}},{key:"identity",value:function(e){for(var t=new Array(e),n=0;n<e;n++){t[n]=new Array(e);for(var r=0;r<e;r++)t[n][r]=n===r?1:0}return t}},{key:"dotproduct",value:function(e,t){if(e.length!==t.length)throw new Error("Vector mismatch");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}},{key:"multiply",value:function(t,n){if(t[0].length!==n.length)throw new Error("Matrix mismatch");for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=new Array(n[0].length);for(var o=e.transpose(n),a=0;a<r.length;a++)for(var s=0;s<r[a].length;s++)r[a][s]=e.dotproduct(t[a],o[s]);return r}},{key:"determinant",value:function(t){var n=t.length,r=t[0].length,i=0,o=void 0,a=void 0,s=void 0,u=void 0;if(!e.isSquare(t))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);if(1===n)return t[0][0];if(2===n)return t[0][0]*t[1][1]-t[0][1]*t[1][0];for(a=0;a<r;a++){for(s=t[0][a],u=t[0][a],o=1;o<n;o++)u*=t[o][((a+o)%r+r)%r],s*=t[o][((a-o)%r+r)%r];i+=u-s}return i}},{key:"lupDecomposition",value:function(t){if(!e.isSquare(t))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);var n=t.length,r=e.deepCopy(t),i=e.transpose(e.identity(n)),o=void 0,a=new Array(n);this.getL=function(t){for(var n=t[0].length,r=e.identity(n),i=0;i<n;i++)for(var o=0;o<n;o++)i>o&&(r[i][o]=t[i][o]);return r},this.getU=function(t){for(var n=t[0].length,r=e.identity(n),i=0;i<n;i++)for(var o=0;o<n;o++)i<=o&&(r[i][o]=t[i][o]);return r};for(var s=0;s<n;s++){var u=void 0;for(u=0;u<n;u++)a[u]=r[u][s];for(u=0;u<n;u++){o=r[u];for(var h=Math.min(u,s),l=0,c=0;c<h;c++)l+=o[c]*a[c];o[s]=a[u]-=l}var f=s;for(u=s+1;u<n;u++)Math.abs(a[u])>Math.abs(a[f])&&(f=u);if(f!==s&&(r=e.rowSwitch(r,f,s),i=e.rowSwitch(i,f,s)),s<n&&0!==r[s][s])for(u=s+1;u<n;u++)r[u][s]/=r[s][s]}return[this.getL(r),this.getU(r),i]}},{key:"rotate",value:function(t,n,r){e._check2DVector(t);var i="clockwise"===r?-1:1,o=n*(Math.PI/180),a=[[Math.cos(o),-1*i*Math.sin(o)],[i*Math.sin(o),Math.cos(o)]];return e.multiply(a,t)}},{key:"scale",value:function(t,n,r){e._check2DVector(t);var i=[[n,0],[0,r]];return e.multiply(i,t)}},{key:"shear",value:function(t,n,r){e._check2DVector(t);var i=[[1,"xaxis"===r?n:0],["yaxis"===r?n:0,1]];return e.multiply(i,t)}},{key:"affine",value:function(t,n,r){e._check2DVector(t);var i=[[1,0,n],[0,1,r],[0,0,1]],o=[[t[0][0]],[t[1][0]],[1]],a=e.multiply(i,o);return[[a[0][0]],[a[1][0]]]}},{key:"rowScale",value:function(e,t,n){for(var r=new Array(e.length),i=0;i<e.length;i++){r[i]=new Array(e[i].length);for(var o=0;o<e[i].length;o++)r[i][o]=i===t?n*e[i][o]:e[i][o]}return r}},{key:"rowSwitch",value:function(e,t,n){for(var r=new Array(e.length),i=0;i<e.length;i++){r[i]=new Array(e[i].length);for(var o=0;o<e[i].length;o++)r[i][o]=i===t?e[n][o]:i===n?e[t][o]:e[i][o]}return r}},{key:"rowAddMultiple",value:function(e,t,n,r){for(var i=new Array(e.length),o=0;o<e.length;o++){i[o]=new Array(e[o].length);for(var a=0;a<e[o].length;a++)o===n?i[n][a]=e[n][a]+r*e[t][a]:i[o][a]=e[o][a]}return i}},{key:"GaussJordanEliminate",value:function(e,t){for(var n=void 0===t?1e-10:t,r=e.length,i=e[0].length,o=-1,a=void 0,s=void 0,u=void 0;++o<r;){var h=o;for(a=o;++a<r;)Math.abs(e[a][o])>Math.abs(e[h][o])&&(h=a);var l=e[o];if(e[o]=e[h],e[h]=l,Math.abs(e[o][o])<=n)return e;for(a=o;++a<r;)for(u=e[a][o]/e[o][o],s=o-1;++s<i;)e[a][s]-=e[o][s]*u}for(o=r;--o>=0;){for(u=e[o][o],a=-1;++a<o;)for(s=i;--s>=o;)e[a][s]-=e[o][s]*e[a][o]/u;for(e[o][o]/=u,s=r-1;++s<i;)e[o][s]/=u}return e}},{key:"rowReduce",value:function(t,n){return e.GaussJordanEliminate(t,n)}},{key:"inverse",value:function(t){if(!e.isSquare(t))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);var n=t.length,r=e.identity(n),i=void 0;for(i=0;i<n;i++)t[i]=t[i].concat(r[i]);for(t=e.GaussJordanEliminate(t),i=0;i<n;i++)t[i]=t[i].slice(n);return t}},{key:"getCol",value:function(e,t){var n=new Array(e.length);if(t<0)throw new Error("The specified column must be a positive integer.");if(t>=e[0].length)throw new Error("The specified column must be between 0 and the number of columns - 1.");for(var r=0;r<e.length;r++)n[r]=e[r][t];return n}},{key:"reorderRows",value:function(e,t){var n=[];if(void 0===t)throw new Error("A reordering array must be entered.");if(t.length!==e.length)throw new Error("The reordered matrix must have the same number of rows as the original Matrix.");for(var r=0;r<t.length;r++){if(t[r]<0)throw new Error("The desired order of the rows must be positive integers.");if(t[r]>=t.length)throw new Error("The desired order of the rows must start at 0 and end at the number of rows - 1.");n.push(e[t[r]])}return n}},{key:"reorderCols",value:function(t,n){var r=[];if(void 0===n)throw new Error("Please enter a desired reordering array.");if(n.length!==t[0].length)throw new Error("The reordered matrix must have the same number of columns as the original Matrix.");for(var i=0;i<n.length;i++){if(n[i]<0)throw new Error("The desired order of the columns must be positive integers.");if(n[i]>=n.length)throw new Error("The desired order of the columns must start at 0 and end at the number of columns - 1.");r.push(e.getCol(t,n[i]))}return e.transpose(r)}},{key:"reverseRows",value:function(t){for(var n=[],r=t.length-1;r>-1;r--)n.push(r);return e.reorderRows(t,n)}},{key:"reverseCols",value:function(t){for(var n=[],r=t.length-1;r>-1;r--)n.push(r);return e.reorderCols(t,n)}},{key:"zeros",value:function(e,t){var n=new Array(e);if(e<1||t<1)throw new Error("The matrix dimensions must be positive integers.");e=Math.ceil(e),t=Math.ceil(t);for(var r=0;r<e;r++){for(var i=new Array(t),o=0;o<t;o++)i[o]=0;n[r]=i}return n}},{key:"zigzag",value:function(t,n,r){if(t<=1)throw new Error("Matrix size must be at least 2x2.");t=Math.ceil(t);var i=e.zeros(t,t),o=function(e){var n=!1,r=t*t,i=1,o=1,a=void 0,s=void 0,u=void 0,h=void 0,l=void 0;for(e[0][0]=r,e[t-1][t-1]=i,h=1;h<t;h++)n?(r-=4*o,i+=4*o,o++):(r--,i++),e[0][h]=r,e[t-1][t-1-h]=i,n=!n;var c=!0;for(h=1;h<t;h++){for(s=h,u=e[a=0][s],l=1;l<h+1;l++)c?u-=1:u+=1,s--,e[++a][s]=u;c=!c}for(c=t%2==0,h=1;h<t-1;h++){for(s=h,u=e[a=t-1][s],l=1;l<t-h;l++)c?u--:u++,s++,e[--a][s]=u;c=!c}return e},a=function(t){return e.transpose(o(t))},s=function(t){return e.reverseCols(o(t))},u=function(t){return e.reverseCols(e.reverseRows(o(t)))},h=function(t){return e.transpose(u(t))};if("BR"===n&&"H"===r)return o(i);if("BR"===n&&"V"===r)return a(i);if("BL"===n&&"H"===r)return s(i);if("BL"===n&&"V"===r)return function(t){return e.reverseRows(h(s(t)))}(i);if("TR"===n&&"H"===r)return function(t){return e.reverseRows(o(t))}(i);if("TR"===n&&"V"===r)return function(t){return e.reverseRows(a(t))}(i);if("TL"===n&&"H"===r)return u(i);if("TL"===n&&"V"===r)return h(i);throw new Error("Enter the direction (V,H) and corner (BR,BL,TR,TL) correctly.")}},{key:"vectorNorm",value:function(e,t){if(!Array.isArray(e)||0===e.length)throw new Error("Vector must be an array of at least length 1.");if(void 0!==t&&"number"!=typeof t)throw new Error("Norm order must be a number.");t=void 0===t?2:t;var n=e.length,r=0,i=void 0,o=void 0;switch(t){case 1/0:for(o=0;o<n;o++)(i=Math.abs(e[o]))>r&&(r=i);break;case-1/0:for(r=1/0,o=0;o<n;o++)(i=Math.abs(e[o]))<r&&(r=i);break;default:for(o=0;o<n;o++)r+=Math.pow(Math.abs(e[o]),t);r=Math.pow(r,1/t)}return r}},{key:"matrixNorm",value:function(e,t){if(!Array.isArray(e)||0===e.length||!Array.isArray(e[0]))throw new Error("Matrix must be an array of at least length 1.");if(void 0!==t&&"number"!=typeof t&&null!==t)throw new Error("Norm order must be a number or null.");t=void 0===t?null:t;var n=e.length,r=e[0].length,i=0,o=void 0,a=void 0,s=void 0;switch(t){case 1/0:for(a=0;a<n;a++){for(o=0,s=0;s<r;s++)o+=Math.abs(e[a][s]);o>i&&(i=o)}break;case-1/0:for(i=1/0,a=0;a<n;a++){for(o=0,s=0;s<r;s++)o+=Math.abs(e[a][s]);o<i&&(i=o)}break;case 1:for(a=0;a<r;a++){for(o=0,s=0;s<n;s++)o+=Math.abs(e[s][a]);o>i&&(i=o)}break;case-1:for(i=1/0,a=0;a<r;a++){for(o=0,s=0;s<n;s++)o+=Math.abs(e[s][a]);o<i&&(i=o)}break;case null:for(a=0;a<n;a++)for(s=0;s<r;s++)i+=Math.pow(e[a][s],2);i=Math.pow(i,.5);break;case 2:case-2:throw new Error("Singular values are not yet supported in numbers.js.");default:for(a=0;a<n;a++)for(s=0;s<r;s++)i+=Math.pow(Math.abs(e[a][s]),t);i=Math.pow(i,1/t)}return i}},{key:"isUpperBand",value:function(e,t){if(!Array.isArray(e)||!Array.isArray(e[0])||e.length<2)throw new Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof t||t<0||t%1!=0)throw new Error("Upper bandwidth must be a nonzero integer.");for(var n=!0,r=e[0].length,i=0,o=t+1;o<r;o++){if(0!==e[i][o]){n=!1;break}i++}return n}},{key:"isLowerBand",value:function(e,t){if(!Array.isArray(e)||!Array.isArray(e[0])||e.length<2)throw new Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof t||t<0||t%1!=0)throw new Error("Lower bandwidth must be a nonzero integer.");for(var n=!0,r=e.length,i=0,o=t+1;o<r;o++){if(0!==e[o][i]){n=!1;break}i++}return n}},{key:"isRowDD",value:function(t){var n=t.length;if(!e.isSquare(t))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var r=0;r<n;r++){var o=t[r],a=o[r],s=i(o,r);if(Math.abs(a)<s)return!1}return!0}},{key:"isStrictlyRowDD",value:function(t){if(!e.isSquare(t))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=t.length,r=0;r<n;r++){var o=t[r],a=o[r],s=i(o,r);if(Math.abs(a)<=s)return!1}return!0}},{key:"isColumnDD",value:function(t){if(!e.isSquare)throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=t.length,r=0;r<n;r++){var o=e.getCol(t,r),a=o[r],s=i(o,r);if(Math.abs(a)<s)return!1}return!0}},{key:"isStrictlyColumnDD",value:function(t){if(!e.isSquare(t))throw new Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=t.length,r=0;r<n;r++){var o=e.getCol(t,r),a=o[r],s=i(o,r);if(Math.abs(a)<=s)return!1}return!0}}]),e}();r.clone=r.deepCopy,r.add=r.addition;var i=function(e,t){var n=0,r=void 0;for(r=0;r<t;r++)n+=Math.abs(e[r]);for(r=t+1;r<e.length;r++)n+=Math.abs(e[r]);return n};t.exports=r},{}],9:[function(e,t,n){var r=function(){function e(t,n){o(this,e),this._m=[],this._isError=!1,this._errorMes="",this._det=0,this._rows=t,this._columns=n,Object.defineProperty(this,"isError",{get:function(){return this._isError},set:function(e){this._isError=e}}),Object.defineProperty(this,"errorMes",{get:function(){return this._errorMes},set:function(e){this._errorMes=e}}),Object.defineProperty(this,"detMultiplier",{get:function(){return this._det}}),Object.defineProperty(this,"rows",{get:function(){return this._rows}}),Object.defineProperty(this,"columns",{get:function(){return this._columns}}),Object.defineProperty(this,"m",{get:function(){return this._m}});var r=t*n,i=void 0;for(i=0;i<r;i++)this._m.push(0)}return u(e,[{key:"identity",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,void(this._errorMes="Number of rows doesn't match number of columns");var e=void 0,t=void 0;for(e=0;e<this._rows;e++)for(t=0;t<this._columns;t++)this._m[t+e*this._columns]=e==t?1:0}},{key:"multiply",value:function(t){if(this._isError=!1,this._errorMes="",this._columns!=t.rows)return this._isError=!0,void(this._errorMes="Number of columns of the first matrix doesn't match with number of rows of the second matrix");var n=t.columns,r=new e(this._rows,n),i=void 0,o=void 0,a=void 0;for(i=0;i<this._rows;i++)for(o=0;o<n;o++)for(a=0;a<this._columns;a++)r._m[o+i*n]+=this._m[a+i*this._columns]*t._m[o+a*n];this._columns=n,this._m=r._m}},{key:"scalar",value:function(e){var t=this._rows*this._columns,n=void 0;for(n=0;n<t;n++)this._m[n]*=e}},{key:"add",value:function(e){if(this._isError=!1,this._errorMes="",this._rows!=e.rows||this._columns!=e.columns)return this._isError=!0,void(this._errorMes="Number of columns and rows of the first matrix doesn't match with number of columns and rows of the second matrix");var t=this._rows*this._columns,n=void 0;for(n=0;n<t;n++)this._m[n]+=e._m[n]}},{key:"substract",value:function(e){if(this._isError=!1,this._errorMes="",this._rows!=e.rows||this._columns!=e.columns)return this._isError=!0,void(this._errorMes="Number of columns and rows of the first matrix doesn't match with number of columns and rows of the second matrix");var t=this._rows*this._columns,n=void 0;for(n=0;n<t;n++)this._m[n]-=e._m[n]}},{key:"transpose",value:function(){var t=new e(this._columns,this._rows),n=void 0,r=void 0;for(n=0;n<this._rows;n++)for(r=0;r<this._columns;r++)t._m[n+r*this._rows]=this._m[r+n*this._columns];return t}},{key:"gaussElimination",value:function(){this._isError=!1,this._errorMes="";var e=void 0,t=void 0;if(this._det=1,this._rows>this._columns-1)return this._isError=!0,void(this._errorMes="This matrix doesn't represent any system of equations");var n=void 0,r=void 0,i=void 0;for(n=0;n<this._rows-1;n++){for(e=n,r=n+1;r<this._rows;r++)Math.abs(this._m[n+r*this._columns])>Math.abs(this._m[n+e*this._columns])&&(e=r);for(this.swapRows(n,e),r=n+1;r<this._rows;r++){if(0==this._m[n*(1+this._columns)])return this._isError=!0,void(this._errorMes="This system of equations doesn't have any solution");for(t=this._m[n+r*this._columns]/this._m[n*(1+this._columns)],i=n;i<this._columns;i++)this._m[i+r*this._columns]-=this._m[i+n*this._columns]*t}}return 0==this._m[(this._rows-1)*(1+this._columns)]?(this._isError=!0,void(this._errorMes="This system of equations doesn't have any solution")):void 0}},{key:"inverse",value:function(){this._isError=!1,this._errorMes="";var t=this._rows,n=new e(t,t);if(this._rows!=this._columns)return n.resize(0,0),n.isError=!0,n.errorMes="Number of rows doesn't match number of columns",n;var r=void 0,i=this.merge(n),o=i.columns,a=void 0;for(a=0;a<t;a++)i._m[a+t+a*o]=1;if(i.gaussElimination(),i.isError)return n.resize(0,0),n.isError=!0,n.errorMes=i.errorMes,n;for(var s=void 0,u=0;u<t;u++)for(a=t-1;a>=0;a--){for(r=0,s=a+1;s<t;s++)r+=i._m[s+a*o]*n._m[u+s*t];n._m[u+a*t]=(i._m[u+t+a*o]-r)/i._m[a*(1+o)]}return n}},{key:"gaussDeterminant",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,this._errorMes="Number of rows doesn't match number of columns",null;var t=this._rows,n=this.merge(new e(t,1));if(n.gaussElimination(),n.isError)return this._isError=!0,this._errorMes="Some unexpected error",0;this._det=n.detMultiplier;var r=n.columns,i=void 0;for(i=0;i<t;i++)this._det*=n._m[i*(1+r)];return this._det}},{key:"recursiveDeterminant",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,this._errorMes="Number of rows doesn't match number of columns",null;var e=this._rows,t=0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;if(e>1)for(s=0;s<e;s++)0!=(a=this._m[s])&&(o=s%2==0?1:-1,0==s?i=this.fragment(1,1,e-1,this._columns-1):s==e-1?i=this.fragment(1,0,e-1,this.columns-2):(n=this.fragment(1,0,e-1,s-1),r=this.fragment(1,s+1,e-1,this._columns-1),i=n.merge(r)),t+=o*a*i.recursiveDeterminant());else t=_m[0];return t}},{key:"insert",value:function(e,t,n,r){var i=this._rows,o=this._columns;if(!(t>=i||n>=o)){var a=t+e.rows,s=n+e.columns;a=a>i?a:i,s=s>o?s:o,r&&this.resize(a,s),a=t+e.rows,s=n+e.columns;var u=a<=this._rows?a:this._rows,h=s<=this._columns?s:this._columns,l=void 0,c=void 0;for(l=t;l<u;l++)for(c=n;c<h;c++)this._m[c+l*this._columns]=e._m[c-n+(l-t)*e.columns]}}},{key:"resize",value:function(t,n){var r=this._rows,i=this._columns,o=new e(t,n),a=void 0,s=void 0;for(a=0;a<t;a++)if(a<r)for(s=0;s<n;s++)s<i&&(o._m[s+a*n]=this._m[s+a*i]);this._rows=t,this._columns=n,this._m=o._m}},{key:"fragment",value:function(t,n,r,i){t>this._rows&&(t=this._rows),n>this._columns&&(n=this._columns),r>this._rows&&(r=this._rows),i>this._columns&&(i=this._columns);var o=void 0;t>r&&(o=t,t=r,r=o),n>i&&(o=n,n=i,i=o);var a=i-n+1,s=new e(r-t+1,a),u=void 0,h=void 0;for(u=t;u<=r;u++)for(h=n;h<=i;h++)s._m[h-n+(u-t)*a]=_m[h+u*this._columns];return s}},{key:"merge",value:function(t){var n=t.rows,r=t.columns,i=this._rows,o=this._columns,a=o+r,s=new e(Math.max(i,n),a),u=void 0,h=void 0;for(u=0;u<i;u++)for(h=0;h<o;h++)s._m[h+u*a]=this._m[h+u*o];for(u=0;u<n;u++)for(h=0;h<r;h++)s._m[h+o+u*a]=t._m[h+u*r];return s}},{key:"swapRows",value:function(e,t){if(!(e>this._rows||t>this._rows)&&e!=t){this._det=-this._det;var n=void 0,r=void 0;for(r=0;r<this._columns;r++)n=this._m[r+e*this._columns],this._m[r+e*this._columns]=this._m[r+t*this._columns],this._m[r+t*this._columns]=n}}},{key:"random",value:function(e,t){var n=this._rows*this._columns,r=void 0;for(r=0;r<n;r++)this._m[r]=Math.round(Math.random()*(Math.max(e,t)-Math.min(e,t)))+Math.min(e,t)}},{key:"clone",value:function(){var t=this._rows*this._columns,n=new e(this._rows,this._columns),r=void 0;for(r=0;r<t;r++)n._m[r]=this._m[r];return n}},{key:"setElement",value:function(e,t,n){e>=this._rows||t>=this._columns||(this._m[t+e*this._columns]=n)}},{key:"getElement",value:function(e,t){return e>=this._rows||t>=this._columns?NaN:this._m[t+e*this._columns]}},{key:"setMatrixFromRows",value:function(e){var t=e.length,n=e[0].length,r=void 0,i=void 0;for(r=0;r<t;r++)if(e[r].length!=n)return;for(this._m.length=t*n,r=0;r<t;r++)for(i=0;i<n;i++)this._m[i+r*n]=e[r][i];this._rows=t,this._columns=n}},{key:"setMatrixFromVector",value:function(e,t,n){var r=t*n;if(r==e.length){var i=void 0;for(i=0;i<r;i++)this._m[i]=e[i];this._rows=t,this._columns=n}}},{key:"traceMatrix",value:function(){}}],[{key:"GaussSolution",value:function(t,n){var r=t.rows,i=void 0,o=new e(r,1);if(t.rows!=t.columns||t.rows!=n.rows||n.columns>1||0==n.columns)return o.resize(0,0),o.isError=!0,o.errorMes="Can't solve this system of equations",o;var a=t.merge(n),s=a.columns;if(a.gaussElimination(),a.isError)return o.resize(0,0),o.isError=!0,o.errorMes=a.errorMes,o;var u=void 0,h=void 0;for(u=r-1;u>=0;u--){for(i=0,h=u+1;h<r;h++)i+=a._m[h+u*s]*o._m[h];o._m[u]=(a._m[r+u*s]-i)/a._m[u*(1+s)]}return o}},{key:"LUPDecomposition",value:function(e,t){if(e.rows==e.columns){var n=e.rows;t.resize(n,1);var r=void 0,i=void 0,o=void 0;for(r=0;r<n;r++)t._m[r]=r;for(o=0;o<n;o++){var a=0,s=void 0;for(r=o;r<n;r++)Math.abs(e._m[o+r*n])>a&&(a=Math.abs(e._m[o+r*n]),s=r);if(0==a)return e.isError=!0,void(e.errorMes="Can't solve this system of equations");for(t.swapRows(o,s),e.swapRows(o,s),r=o+1;r<n;r++)for(e._m[o+r*n]/=e._m[o*(1+n)],i=o+1;i<n;i++)e._m[i+r*n]-=e._m[o+r*n]*e._m[i+o*n]}}}},{key:"LUPSolution",value:function(t,n,r){var i=t.rows,o=void 0,a=void 0,s=void 0,u=new e(i,1);if(t.isError||i!=t.columns||i!=n.rows||1!=n.columns||i!=r.rows||1!=r.columns)return u.resize(0,0),u.isError=!0,u.errorMes="Can't solve this system of equations",u;for(a=0;a<i;a++){for(o=0,s=0;s<a;s++)o+=t._m[s+a*i]*u._m[s];u._m[a]=r._m[n._m[a]]-o}for(a=i-1;a>=0;a--){for(o=0,s=a+1;s<i;s++)o+=t._m[s+a*i]*u._m[s];u._m[a]=(u._m[a]-o)/t._m[a*(1+i)]}return u}},{key:"CramerSolution",value:function(t,n){var r=t.rows,i=new e(r,1),o=void 0;if(t.rows!=t.columns||t.rows!=n.rows||1!=n.columns)return i.resize(0,0),i.isError=!0,i.errorMes="Can't solve this system of equations",i;var a=t.recursiveDeterminant();if(0==a)return i.resize(0,0),i.isError=!0,i.errorMes="The A matrix is not invertible. So I can't solve this system of equations",i;var s=void 0;for(s=0;s<r;s++)(o=t.clone()).insert(n,0,s),i._m[s]=o.recursiveDeterminant()/a;return i}}]),e}();t.exports=r},{}],10:[function(e,t,n){var r=function(){function e(){o(this,e)}return u(e,null,[{key:"round",value:function(e,t){return void 0===t&&(t=1),Math.round(e/t)*t}},{key:"floor",value:function(e,t){return void 0===t&&(t=1),Math.floor(e/t)*t}},{key:"ceil",value:function(e,t){return void 0===t&&(t=1),Math.ceil(e/t)*t}},{key:"random",value:function(t,n,r){if(void 0===n&&(n=0),void 0===r&&(r=1),t>n){var i=t;t=n,n=i}var o=n-t+1*r,a=Math.random()*o;return a+=t,e.floor(a,r)}},{key:"getUniqueID",value:function(){return e.getUnique()+""}},{key:"getUnique",value:function(){null==e._aUniqueIDs&&(e._aUniqueIDs=new Array);for(var t=new Date,n=t.getTime();!e.isUnique(n);)n+=e.random(t.getTime(),2*t.getTime());return e._aUniqueIDs.push(n),n}},{key:"isUnique",value:function(t){for(var n=0;n<e._aUniqueIDs.length;n++)if(e._aUniqueIDs[n]==t)return!1;return!0}}]),e}();t.exports=r},{}],11:[function(e,t,n){(function(e){var n=e||window,r=function(){function e(){o(this,e),this.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',this.attr_prefix="-"}return u(e,[{key:"parseXML",value:function(e){var t=void 0;if(n.DOMParser){var r=(new DOMParser).parseFromString(e,"application/xml");if(!r)return;t=r.documentElement}else n.ActiveXObject&&(xmldom=new ActiveXObject("Microsoft.XMLDOM"),xmldom.async=!1,xmldom.loadXML(e),t=xmldom.documentElement);if(t)return this.parseDOM(t)}},{key:"parseHTTP",value:function(e,t,n){var r={};for(var i in t)r[i]=t[i];if(r.method||(void 0===r.postBody&&void 0===r.postbody&&void 0===r.parameters?r.method="get":r.method="post"),n){r.asynchronous=!0;var o=this,a=n,s=r.onComplete;r.onComplete=function(e){var t=void 0;e&&e.responseXML&&e.responseXML.documentElement&&(t=o.parseDOM(e.responseXML.documentElement)),a(t,e),s&&s(e)}}else r.asynchronous=!1;var u=void 0;if("undefined"!=typeof HTTP&&HTTP.Request){r.uri=e;var h=new HTTP.Request(r);h&&(u=h.transport)}else if("undefined"!=typeof Ajax&&Ajax.Request){var l=new Ajax.Request(e,r);l&&(u=l.transport)}return n?u:u&&u.responseXML&&u.responseXML.documentElement?this.parseDOM(u.responseXML.documentElement):void 0}},{key:"parseDOM",value:function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),11!==e.nodeType){var r={};r[e.nodeName]=n,n=r}return n}}},{key:"parseElement",value:function(e){if(7!==e.nodeType){if(3===e.nodeType||4===e.nodeType){if(null===e.nodeValue.match(/[^\x00-\x20]/))return;return e.nodeValue}var t=void 0,n={};if(e.attributes&&e.attributes.length){t={};for(var r=0;r<e.attributes.length;r++){var i=e.attributes[r].nodeName;if("string"==typeof i){var o=e.attributes[r].nodeValue;o&&(void 0===n[i=this.attr_prefix+i]&&(n[i]=0),n[i]++,this.addNode(t,i,n[i],o))}}}if(e.childNodes&&e.childNodes.length){var a=!0;t&&(a=!1);for(var s=0;s<e.childNodes.length&&a;s++){var u=e.childNodes[s].nodeType;3!==u&&4!==u&&(a=!1)}if(a){t||(t="");for(var h=0;h<e.childNodes.length;h++)t+=e.childNodes[h].nodeValue}else{t||(t={});for(var l=0;l<e.childNodes.length;l++){var c=e.childNodes[l].nodeName;if("string"==typeof c){var f=this.parseElement(e.childNodes[l]);f&&(void 0===n[c]&&(n[c]=0),n[c]++,this.addNode(t,c,n[c],f))}}}}return t}}},{key:"addNode",value:function(e,t,n,r){this.__force_array[t]?(1===n&&(e[t]=[]),e[t][e[t].length]=r):1===n?e[t]=r:2===n?e[t]=[e[t],r]:e[t][e[t].length]=r}},{key:"writeXML",value:function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t}},{key:"hash_to_xml",value:function(e,t){var n=[],r=[];for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];i.charAt(0)!==this.attr_prefix?void 0!==o&&o?"object"===(void 0===o?"undefined":s(o))&&o.constructor===Array?n[n.length]=this.array_to_xml(i,o):"object"===(void 0===o?"undefined":s(o))?n[n.length]=this.hash_to_xml(i,o):n[n.length]=this.scalar_to_xml(i,o):n[n.length]="<"+i+" />":r[r.length]=" "+i.substring(1)+'="'+this.xml_escape(o)+'"'}var a=r.join(""),u=n.join("");return void 0!==e&&e&&(u=n.length>0?u.match(/\n/)?"<"+e+a+">\n"+u+"</"+e+">\n":"<"+e+a+">"+u+"</"+e+">\n":"<"+e+a+" />\n"),u}},{key:"array_to_xml",value:function(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r];void 0!==i&&i?"object"===(void 0===i?"undefined":s(i))&&i.constructor===Array?n[n.length]=this.array_to_xml(e,i):"object"===(void 0===i?"undefined":s(i))?n[n.length]=this.hash_to_xml(e,i):n[n.length]=this.scalar_to_xml(e,i):n[n.length]="<"+e+" />"}return n.join("")}},{key:"scalar_to_xml",value:function(e,t){return"#text"===e?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+">\n"}},{key:"xml_escape",value:function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}]),e}();t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,n){var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,e),this.x=t,this.y=n}return u(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"normalize",value:function(e){var t=this.length;0!==t&&(this.x*=e/t,this.y*=e/t)}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+"}"}},{key:"setTo",value:function(e,t){this.x=e,this.y=t}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}],[{key:"vec2ToPoint",value:function(t){return new e(t.get_x(),t.get_y())}},{key:"interpolate",value:function(t,n,r){var i=n.x-t.x,o=n.y-t.y;return new e(t.x+i*r,t.y+o*r)}},{key:"distance",value:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}}]),e}();t.exports=r},{}],13:[function(e,t,n){var r=function(){function e(t){o(this,e),this.__queuePromiseArr=t.slice(),this.resultArr=[]}return u(e,[{key:"run",value:function(){var e=this;return new Promise((function(t,n){e.resolve=t,e.reject=n,e.__queueNext()}))}},{key:"__queueNext",value:function(){var e=this;this.__queuePromiseArr.length?this.__queuePromiseArr.shift().then((function(t){e.resultArr.push(t),e.__queueNext()})).catch(this.reject):this.resolve(this.resultArr)}}]),e}();t.exports=r},{}],14:[function(e,t,n){var r=e("./Point"),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,e),this.x=t,this.y=n,this.width=i,this.height=a,this.topLeftPoint=new r,this.sizePoint=new r}return u(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}},{key:"union",value:function(t){if(0===t.width||0===t.height)return this;var n=Math.min(this.x,t.x),r=Math.min(this.y,t.y);return new e(n,r,Math.max(this.x+this.width,t.x+t.width)-n,Math.max(this.y+this.height,t.y+t.height)-r)}},{key:"inflate",value:function(e,t){this.x-=e,this.width+=2*e,this.y-=t,this.height+=2*t}},{key:"contains",value:function(e,t){return e>=this.x&&e<=this.right&&t>=this.y&&t<=this.bottom}},{key:"containsPoint",value:function(e){return this.contains(e.x,e.y)}},{key:"offset",value:function(e,t){this.x+=e,this.y+=t}},{key:"intersects",value:function(e,t){return t?!(e.left>=this.right||e.right<=this.left||e.top>=this.bottom||e.bottom<=this.top):!(e.left>this.right||e.right<this.left||e.top>this.bottom||e.bottom<this.top)}},{key:"intersection",value:function(t,n){var r=new e;return this.intersects(t,n)&&(t.left<=this.right?(r.x=t.left,r.width=this.right-r.x):(r.x=this.left,r.width=t.right-r.x),r.y=t.top<this.top?this.top:t.top,r.height=t.bottom<this.bottom?t.bottom:this.bottom,r.height=r.height-r.y),r}},{key:"isEmpty",value:function(){return this.width<=0||this.height<=0}},{key:"setEmpty",value:function(){this.x=0,this.y=0,this.width=0,this.height=0}},{key:"setTo",value:function(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r}},{key:"left",get:function(){return this.x},set:function(e){this.x=e}},{key:"top",get:function(){return this.y},set:function(e){this.y=e}},{key:"right",get:function(){return this.x+this.width},set:function(e){this.width=e-this.x}},{key:"bottom",get:function(){return this.y+this.height},set:function(e){this.height=e-this.y}},{key:"topLeft",get:function(){return this.topLeftPoint.x=this.x,this.topLeftPoint.y=this.y,this.topLeftPoint},set:function(e){this.x=e.x,this.y=e.y}},{key:"size",get:function(){return this.sizePoint.x=this.width,this.sizePoint.y=this.height,this.sizePoint},set:function(e){this.width=e.x,this.height=e.y}}]),e}();t.exports=i},{"./Point":12}],15:[function(e,t,n){var r=function(){function e(){o(this,e)}return u(e,[{key:"load",value:function(e){var t=this;return new Promise((function(n,r){t._loadNextSVG(n,e,[])}))}},{key:"_loadNextSVG",value:function(e,t,n){var r=this;if(0!==t.length){var i=t.shift();Snap.load(i.path,(function(o){i.g=o.select("g"),n.push(i),r._loadNextSVG(e,t,n)}),this)}else e(n)}}]),e}();t.exports=r},{}],16:[function(e,t,n){var r=function(){function e(){o(this,e)}return u(e,null,[{key:"stringsAreEqual",value:function(e,t,n){return n?e===t:e.toUpperCase()===t.toUpperCase()}},{key:"trim",value:function(t){return e.ltrim(e.rtrim(t))}},{key:"ltrim",value:function(e){for(var t=e.length,n=0;n<t;n++)if(e.charCodeAt(n)>32)return e.substring(n);return""}},{key:"rtrim",value:function(e){for(var t=e.length;t>0;t--)if(e.charCodeAt(t-1)>32)return e.substring(0,t);return""}},{key:"beginsWith",value:function(e,t){return t===e.substring(0,t.length)}},{key:"endsWith",value:function(e,t){return t===e.substring(e.length-t.length)}},{key:"remove",value:function(t,n){return e.replace(t,n,"")}},{key:"replace",value:function(e,t,n){return e.split(t).join(n)}},{key:"stringHasValue",value:function(e){return null!==e&&e.length>0}},{key:"contains",value:function(e,t){return""===e&&""===t||!!e&&e.indexOf(t)>-1}},{key:"addString",value:function(e,t,n){void 0===n&&(n="0");for(var r=e;r.length<t;)r+=n;return r}}]),e}();t.exports=r},{}],17:[function(e,t,n){var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,e),this._x=t,this._y=n}return u(e,[{key:"clone",value:function(){return new e(this._x,this._y)}},{key:"scale",value:function(e){return this._x*=e,this._y*=e,this}},{key:"add",value:function(e){return this._x+=e.x,this._y+=e.y,this}},{key:"substract",value:function(e){return this._x-=e.x,this._y-=e.y,this}},{key:"dotProduct",value:function(e){return this._x*e.x+this._y*e.y}},{key:"dotProdWithNormalizing",value:function(e){var t=e.clone().normalize();return this._x*t.x+this._y*t.y}},{key:"isPerpendicular",value:function(t){return Math.abs(this.dotProduct(t))<e.EPSILON_SQUARED}},{key:"crossProduct",value:function(e){return this._x*e.y-this._y*e.x}},{key:"isParallel",value:function(t){return Math.abs(this.crossProduct(t))<e.EPSILON_SQUARED}},{key:"isZero",value:function(){return Math.abs(this._x)<e.EPSILON&&Math.abs(this._y)<e.EPSILON}},{key:"zero",value:function(){this._x=this._y=0}},{key:"normalize",value:function(){return this.isZero()?(this._x=1,this):this.scale(1/this.length)}},{key:"isNormalized",value:function(){return Math.abs(this.lengthSquared-1)<e.EPSILON_SQUARED}},{key:"equals",value:function(t){return Math.abs(this._x-t.x)<e.EPSILON&&Math.abs(this._y-t.y)<e.EPSILON}},{key:"isValid",value:function(){return!isNaN(this._x)&&!isNaN(this._y)&&isFinite(this._x)&&isFinite(this._y)}},{key:"rotate",value:function(e){var t=Math.sin(e),n=Math.cos(e),r=this._x;return this._x=r*n-this._y*t,this._y=r*t+this._y*n,this}},{key:"rotateWithTrig",value:function(e,t){var n=this._x;return this._x=n*t-this._y*e,this._y=n*e+this._y*t,this}},{key:"negate",value:function(){return this._x*=-1,this._y*=-1,this}},{key:"projectTo",value:function(t){var n=this.dotProduct(t),r=t.lengthSquared;return new e(n*t.x/r,n*t.y/r)}},{key:"projectToNormalized",value:function(t){var n=this.dotProduct(t);return new e(n*t.x,n*t.y)}},{key:"perpProduct",value:function(e){return this.lx*e.x+this.ly*e.y}},{key:"ratio",value:function(t,n,r){return this.isParallel(r)?NaN:this.lengthSquared<e.EPSILON_SQUARED||r.lengthSquared<e.EPSILON_SQUARED?NaN:n.clone().substract(t).perpProduct(r)/this.perpProduct(r)}},{key:"findIntersection",value:function(t,n,r){var i=this.ratio(t,n,r);return isNaN(i)?new e(NaN,NaN):new e(t.x+i*this.x,t.y+i*this.y)}},{key:"findIntersectionInBounds",value:function(t,n,r){t.clone().substract(n);var i=this.ratio(t,n,r),o=r.ratio(n,t,this);return!isNaN(i)&&!isNaN(o)&&i>0&&i<=1&&o>0&&o<=1?new e(t.x+i*this.x,t.y+i*this.y):new e(NaN,NaN)}},{key:"truncate",value:function(e){return this.length=Math.min(e,this.length),this}},{key:"angleBetween",value:function(e){var t=this.clone(),n=e.clone();return this.isNormalized()||t.normalize(),e.isNormalized()||n.normalize(),Math.acos(t.dotProduct(n))}},{key:"setXY",value:function(e,t){this._x=e,this._y=t}},{key:"sign",value:function(e,t){return(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x)}},{key:"dist",value:function(e){return Math.sqrt(this.distSquared(e))}},{key:"dist_XY",value:function(e,t){var n=e-this._x,r=t-this._y;return Math.sqrt(n*n+r*r)}},{key:"distSquared",value:function(e){var t=e.x-this._x,n=e.y-this._y;return t*t+n*n}},{key:"distSquared_XY",value:function(e,t){var n=e-this._x,r=t-this._y;return n*n+r*r}},{key:"bounce",value:function(e,t){void 0===t&&(t=1);var n=(1+t)*this.dotProduct(e);return this._x-=n*e.x,this._y-=n*e.y,this}},{key:"bounceWithFriction",value:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=0);this.clone();var r=this.projectToNormalized(e.rightNormal),i=this.projectToNormalized(e),o=-i.x,a=-i.y,s=r.x,u=r.y;return this.x=o*t+s*n,this.y=a*t+u*n,this}},{key:"toString",value:function(){return"["+this._x+", "+this._y+"]"}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"length",get:function(){return Math.sqrt(this._x*this._x+this._y*this._y)},set:function(e){var t=this.angle;this._x=e*Math.cos(t),this._y=e*Math.sin(t)}},{key:"lengthSquared",get:function(){return this._x*this._x+this._y*this._y}},{key:"angle",get:function(){return this.isZero()?0:Math.atan2(this._y,this._x)},set:function(e){var t=this.length;this._x=t*Math.cos(e),this._y=t*Math.sin(e)}},{key:"dx",get:function(){return this.isZero()?0:this._x/this.length}},{key:"dy",get:function(){return this.isZero()?0:this._y/this.length}},{key:"rightNormal",get:function(){return new e(-this._y,this._x)}},{key:"rx",get:function(){return-this._y}},{key:"ry",get:function(){return this._x}},{key:"leftNormal",get:function(){return new e(this._y,-this._x)}},{key:"lx",get:function(){return this._y}},{key:"ly",get:function(){return-this._x}}]),e}();r.EPSILON=1e-7,r.EPSILON_SQUARED=r.EPSILON*r.EPSILON,t.exports=r},{}],18:[function(e,n,r){(function(r){var i=r||window;i.trace=console.log.bind(console),i.each=function(e,t,n){var r=void 0,i=e.length;for(r=0;r<i;r++){if(!1===(n?t.call(n,r,e[r]):t.call(e[r],r,e[r])))break}},Date.prototype.pattern=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},n={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+n[this.getDay()+""]));for(var r in t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e};var o={Point:e("./Point"),Rectangle:e("./Rectangle"),SVGLoad:e("./SVGLoad"),ArrayUtil:e("./ArrayUtil"),NumberUtilities:e("./NumberUtilities"),Matrix:e("./Matrix"),ObjTree:e("./ObjTree"),StringUtil:e("./StringUtil"),Vector2DMath:e("./Vector2DMath"),HashMap:e("./HashMap"),MatrixMath:e("./MatrixMath"),GraphicsTexture:e("./GraphicsTexture"),GraphicsUtil:e("./GraphicsUtil"),M:e("./M"),PromiseQueue:e("./PromiseQueue"),DomUtil:e("./DomUtil"),FullscreenTool:e("./FullscreenTool")};n.exports=o,("undefined"==typeof t?function(){}:t).exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ArrayUtil":1,"./DomUtil":2,"./FullscreenTool":3,"./GraphicsTexture":4,"./GraphicsUtil":5,"./HashMap":6,"./M":7,"./Matrix":8,"./MatrixMath":9,"./NumberUtilities":10,"./ObjTree":11,"./Point":12,"./PromiseQueue":13,"./Rectangle":14,"./SVGLoad":15,"./StringUtil":16,"./Vector2DMath":17}]},{},[18])}));e("N",r)}}}));